
/home/oslab/os_ucore_mips_m14k/obj/kernel/ucore-kernel-initrd:     file format elf32-tradlittlemips


Disassembly of section .text:

80001000 <_wrs_kernel_text_start>:
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:17
.section .startup

#define KSTACKSIZE (4096*2)

kernel_entry:
  b reset
80001000:	10000003 	b	80001010 <reset>
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:18
  nop
80001004:	00000000 	nop
	...

80001010 <reset>:
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:30
	mtc0	$zero, CP0_WATCHLO
	mtc0	$zero, CP0_WATCHHI
#endif

	/* WP(Watch Pending), SW0/1 should be cleared */
	mtc0	$zero, CP0_CAUSE
80001010:	40806800 	mtc0	zero,c0_cause
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:32
  /* clear SR(ERL), which is 1 after reset */
	mtc0	$zero, CP0_STATUS
80001014:	40806000 	mtc0	zero,c0_status
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:34

  jal 1f
80001018:	0c000409 	jal	80001024 <reset+0x14>
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:35
  nop
8000101c:	00000000 	nop
80001020:	8015b440 	lb	s5,-19392(zero)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:38
  .word _gp
1:
  lw $gp, 0($ra)
80001024:	8ffc0000 	lw	gp,0(ra)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:39
  la $sp, bootstacktop
80001028:	3c1d8002 	lui	sp,0x8002
8000102c:	27bd7430 	addiu	sp,sp,29744
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:41
#setup ram exception
  la   $t0, __exception_vector
80001030:	3c088002 	lui	t0,0x8002
80001034:	25085000 	addiu	t0,t0,20480
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:43
#TODO
  mtc0 $t0, $15, 1 
80001038:	40887801 	mtc0	t0,c0_ebase
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:45

  mfc0 $t0, CP0_STATUS
8000103c:	40086000 	mfc0	t0,c0_status
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:46
  li   $t1, ~ST0_BEV
80001040:	3c09ffbf 	lui	t1,0xffbf
80001044:	3529ffff 	ori	t1,t1,0xffff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:47
  and  $t0, $t0, $t1
80001048:	01094024 	and	t0,t0,t1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:48
  mtc0 $t0, CP0_STATUS
8000104c:	40886000 	mtc0	t0,c0_status
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:51

#zero bss
  la $t0, edata
80001050:	3c088015 	lui	t0,0x8015
80001054:	25083450 	addiu	t0,t0,13392
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:52
  la $t1, end
80001058:	3c098015 	lui	t1,0x8015
8000105c:	252977c0 	addiu	t1,t1,30656
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:55
  
2:
  sw $zero, 0($t0)
80001060:	ad000000 	sw	zero,0(t0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:56
  addiu $t0, $t0, 4
80001064:	25080004 	addiu	t0,t0,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:57
  slt $t3, $t0, $t1
80001068:	0109582a 	slt	t3,t0,t1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:58
  bgtz $t3, 2b
8000106c:	1d60fffc 	bgtz	t3,80001060 <reset+0x50>
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:59
  nop 
80001070:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:61

  addiu $sp, $sp, -16
80001074:	27bdfff0 	addiu	sp,sp,-16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:62
  la $t9, kern_init 
80001078:	3c198002 	lui	t9,0x8002
8000107c:	2739bb90 	addiu	t9,t9,-17520
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:63
  jal $t9
80001080:	0320f809 	jalr	t9
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:64
  nop
80001084:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:66
#never here
  bgez $zero, .
80001088:	0401ffff 	b	80001088 <reset+0x78>
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:67
  nop
8000108c:	00000000 	nop

80001090 <romExcHandle_280>:
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:72


# bfc00280: R4000 xtlbmiss vector
romExcHandle_280:
  b romExcHandle_280
80001090:	1000ffff 	b	80001090 <romExcHandle_280>
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:73
  nop
80001094:	00000000 	nop

80001098 <romExcHandle_300>:
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:77

# bfc00300: R4000 cache vector
romExcHandle_300:
  b romExcHandle_300
80001098:	1000ffff 	b	80001098 <romExcHandle_300>
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/entry.S:78
  nop
8000109c:	00000000 	nop

800010a0 <db_sched>:
db_sched():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:27
static int sched_info_head[8];
static int sched_slices[8][SLICEPOOL_SIZE];
int sched_collect_info = 1;

void db_sched(int lines)
{
800010a0:	27bdffd0 	addiu	sp,sp,-48
800010a4:	afb40020 	sw	s4,32(sp)
800010a8:	0080a021 	move	s4,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:28
	kprintf("\n");
800010ac:	3c048002 	lui	a0,0x8002
800010b0:	24843f2c 	addiu	a0,a0,16172
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:27
static int sched_info_head[8];
static int sched_slices[8][SLICEPOOL_SIZE];
int sched_collect_info = 1;

void db_sched(int lines)
{
800010b4:	afb10014 	sw	s1,20(sp)
800010b8:	afbf002c 	sw	ra,44(sp)
800010bc:	afb60028 	sw	s6,40(sp)
800010c0:	afb50024 	sw	s5,36(sp)
800010c4:	afb3001c 	sw	s3,28(sp)
800010c8:	afb20018 	sw	s2,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:28
	kprintf("\n");
800010cc:	0c007a9e 	jal	8001ea78 <kprintf>
800010d0:	afb00010 	sw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:30

	int lcpu_count = pls_read(lcpu_count);
800010d4:	3c028015 	lui	v0,0x8015
800010d8:	8c5177a0 	lw	s1,30624(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:33
	int i, j, k;
	/* Print a header */
	kprintf("        ");
800010dc:	3c048002 	lui	a0,0x8002
800010e0:	0c007a9e 	jal	8001ea78 <kprintf>
800010e4:	24840dc4 	addiu	a0,a0,3524
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:34
	for (i = 0; i < lcpu_count; i++)
800010e8:	1a200009 	blez	s1,80001110 <db_sched+0x70>
800010ec:	3c128002 	lui	s2,0x8002
800010f0:	00008021 	move	s0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:35
		kprintf("|    CPU%d    ", i);
800010f4:	26520dd0 	addiu	s2,s2,3536
800010f8:	02002821 	move	a1,s0
800010fc:	02402021 	move	a0,s2
80001100:	0c007a9e 	jal	8001ea78 <kprintf>
80001104:	26100001 	addiu	s0,s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:34

	int lcpu_count = pls_read(lcpu_count);
	int i, j, k;
	/* Print a header */
	kprintf("        ");
	for (i = 0; i < lcpu_count; i++)
80001108:	1611fffc 	bne	s0,s1,800010fc <db_sched+0x5c>
8000110c:	02002821 	move	a1,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:36
		kprintf("|    CPU%d    ", i);
	kprintf("\n\r");
80001110:	3c158002 	lui	s5,0x8002
80001114:	0c007a9e 	jal	8001ea78 <kprintf>
80001118:	26a4474c 	addiu	a0,s5,18252
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:38
	/* Print the table */
	for (i = 0; i < lines; i++) {
8000111c:	1a800018 	blez	s4,80001180 <db_sched+0xe0>
80001120:	3c168002 	lui	s6,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:44
		kprintf(" %4d ", i);
		for (k = 0; k < lcpu_count; k++) {
			j = sched_info_head[k] - i;
			if (j < 0)
				j += PGSIZE / sizeof(uint16_t) / lcpu_count;
			kprintf("  %4d(%4d) ",
80001124:	3c128002 	lui	s2,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:38
	kprintf("        ");
	for (i = 0; i < lcpu_count; i++)
		kprintf("|    CPU%d    ", i);
	kprintf("\n\r");
	/* Print the table */
	for (i = 0; i < lines; i++) {
80001128:	00009821 	move	s3,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:39
		kprintf(" %4d ", i);
8000112c:	26d60de0 	addiu	s6,s6,3552
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:44
		for (k = 0; k < lcpu_count; k++) {
			j = sched_info_head[k] - i;
			if (j < 0)
				j += PGSIZE / sizeof(uint16_t) / lcpu_count;
			kprintf("  %4d(%4d) ",
80001130:	26520de8 	addiu	s2,s2,3560
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:48
				sched_info_pid[j * lcpu_count + k],
				sched_info_times[j * lcpu_count + k]);
		}
		kprintf("\n\r");
80001134:	26b5474c 	addiu	s5,s5,18252
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:39
	for (i = 0; i < lcpu_count; i++)
		kprintf("|    CPU%d    ", i);
	kprintf("\n\r");
	/* Print the table */
	for (i = 0; i < lines; i++) {
		kprintf(" %4d ", i);
80001138:	02c02021 	move	a0,s6
8000113c:	0c007a9e 	jal	8001ea78 <kprintf>
80001140:	02602821 	move	a1,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:40
		for (k = 0; k < lcpu_count; k++) {
80001144:	5a20000a 	blezl	s1,80001170 <db_sched+0xd0>
80001148:	26730001 	addiu	s3,s3,1
8000114c:	00008021 	move	s0,zero
80001150:	26100001 	addiu	s0,s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:44
			j = sched_info_head[k] - i;
			if (j < 0)
				j += PGSIZE / sizeof(uint16_t) / lcpu_count;
			kprintf("  %4d(%4d) ",
80001154:	02402021 	move	a0,s2
80001158:	00002821 	move	a1,zero
8000115c:	0c007a9e 	jal	8001ea78 <kprintf>
80001160:	00003021 	move	a2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:40
		kprintf("|    CPU%d    ", i);
	kprintf("\n\r");
	/* Print the table */
	for (i = 0; i < lines; i++) {
		kprintf(" %4d ", i);
		for (k = 0; k < lcpu_count; k++) {
80001164:	5611fffb 	bnel	s0,s1,80001154 <db_sched+0xb4>
80001168:	26100001 	addiu	s0,s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:38
	kprintf("        ");
	for (i = 0; i < lcpu_count; i++)
		kprintf("|    CPU%d    ", i);
	kprintf("\n\r");
	/* Print the table */
	for (i = 0; i < lines; i++) {
8000116c:	26730001 	addiu	s3,s3,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:48
				j += PGSIZE / sizeof(uint16_t) / lcpu_count;
			kprintf("  %4d(%4d) ",
				sched_info_pid[j * lcpu_count + k],
				sched_info_times[j * lcpu_count + k]);
		}
		kprintf("\n\r");
80001170:	0c007a9e 	jal	8001ea78 <kprintf>
80001174:	02a02021 	move	a0,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:38
	kprintf("        ");
	for (i = 0; i < lcpu_count; i++)
		kprintf("|    CPU%d    ", i);
	kprintf("\n\r");
	/* Print the table */
	for (i = 0; i < lines; i++) {
80001178:	5674fff0 	bnel	s3,s4,8000113c <db_sched+0x9c>
8000117c:	02c02021 	move	a0,s6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:50
				sched_info_pid[j * lcpu_count + k],
				sched_info_times[j * lcpu_count + k]);
		}
		kprintf("\n\r");
	}
}
80001180:	8fbf002c 	lw	ra,44(sp)
80001184:	8fb60028 	lw	s6,40(sp)
80001188:	8fb50024 	lw	s5,36(sp)
8000118c:	8fb40020 	lw	s4,32(sp)
80001190:	8fb3001c 	lw	s3,28(sp)
80001194:	8fb20018 	lw	s2,24(sp)
80001198:	8fb10014 	lw	s1,20(sp)
8000119c:	8fb00010 	lw	s0,16(sp)
800011a0:	03e00008 	jr	ra
800011a4:	27bd0030 	addiu	sp,sp,48

800011a8 <db_time>:
db_time():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:54

void db_time(uint16_t left, uint16_t right)
{
	kprintf("\n\r");
800011a8:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:53
		kprintf("\n\r");
	}
}

void db_time(uint16_t left, uint16_t right)
{
800011ac:	27bdffd8 	addiu	sp,sp,-40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:54
	kprintf("\n\r");
800011b0:	2484474c 	addiu	a0,a0,18252
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:53
		kprintf("\n\r");
	}
}

void db_time(uint16_t left, uint16_t right)
{
800011b4:	afb10014 	sw	s1,20(sp)
800011b8:	afbf0024 	sw	ra,36(sp)
800011bc:	afb40020 	sw	s4,32(sp)
800011c0:	afb3001c 	sw	s3,28(sp)
800011c4:	afb20018 	sw	s2,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:54
	kprintf("\n\r");
800011c8:	0c007a9e 	jal	8001ea78 <kprintf>
800011cc:	afb00010 	sw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:56

	int lcpu_count = pls_read(lcpu_count);
800011d0:	3c028015 	lui	v0,0x8015
800011d4:	8c5177a0 	lw	s1,30624(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:58
	int i, j;
	for (i = 0; i < lcpu_count; i++) {
800011d8:	1a200013 	blez	s1,80001228 <db_time+0x80>
800011dc:	3c148002 	lui	s4,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:66
		for (j = 0; j < total; j++) {
			uint16_t pid = sched_info_pid[j * lcpu_count + i];
			if (pid >= left && pid <= right)
				sum += sched_info_times[j * lcpu_count + i];
		}
		kprintf("%4d", sum);
800011e0:	3c138002 	lui	s3,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:70
		sum = 0;
		for (j = left; j <= right; j++)
			sum += sched_slices[i][j % SLICEPOOL_SIZE];
		kprintf("(%4d)\n\r", sum);
800011e4:	3c128002 	lui	s2,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:58
{
	kprintf("\n\r");

	int lcpu_count = pls_read(lcpu_count);
	int i, j;
	for (i = 0; i < lcpu_count; i++) {
800011e8:	00008021 	move	s0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:59
		kprintf("On CPU%d: ", i);
800011ec:	26940df4 	addiu	s4,s4,3572
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:66
		for (j = 0; j < total; j++) {
			uint16_t pid = sched_info_pid[j * lcpu_count + i];
			if (pid >= left && pid <= right)
				sum += sched_info_times[j * lcpu_count + i];
		}
		kprintf("%4d", sum);
800011f0:	26730e00 	addiu	s3,s3,3584
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:70
		sum = 0;
		for (j = left; j <= right; j++)
			sum += sched_slices[i][j % SLICEPOOL_SIZE];
		kprintf("(%4d)\n\r", sum);
800011f4:	26520e04 	addiu	s2,s2,3588
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:59
	kprintf("\n\r");

	int lcpu_count = pls_read(lcpu_count);
	int i, j;
	for (i = 0; i < lcpu_count; i++) {
		kprintf("On CPU%d: ", i);
800011f8:	02002821 	move	a1,s0
800011fc:	0c007a9e 	jal	8001ea78 <kprintf>
80001200:	02802021 	move	a0,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:66
		for (j = 0; j < total; j++) {
			uint16_t pid = sched_info_pid[j * lcpu_count + i];
			if (pid >= left && pid <= right)
				sum += sched_info_times[j * lcpu_count + i];
		}
		kprintf("%4d", sum);
80001204:	02602021 	move	a0,s3
80001208:	0c007a9e 	jal	8001ea78 <kprintf>
8000120c:	00002821 	move	a1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:58
{
	kprintf("\n\r");

	int lcpu_count = pls_read(lcpu_count);
	int i, j;
	for (i = 0; i < lcpu_count; i++) {
80001210:	26100001 	addiu	s0,s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:70
		}
		kprintf("%4d", sum);
		sum = 0;
		for (j = left; j <= right; j++)
			sum += sched_slices[i][j % SLICEPOOL_SIZE];
		kprintf("(%4d)\n\r", sum);
80001214:	02402021 	move	a0,s2
80001218:	0c007a9e 	jal	8001ea78 <kprintf>
8000121c:	00002821 	move	a1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:58
{
	kprintf("\n\r");

	int lcpu_count = pls_read(lcpu_count);
	int i, j;
	for (i = 0; i < lcpu_count; i++) {
80001220:	5611fff6 	bnel	s0,s1,800011fc <db_time+0x54>
80001224:	02002821 	move	a1,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:72
		sum = 0;
		for (j = left; j <= right; j++)
			sum += sched_slices[i][j % SLICEPOOL_SIZE];
		kprintf("(%4d)\n\r", sum);
	}
}
80001228:	8fbf0024 	lw	ra,36(sp)
8000122c:	8fb40020 	lw	s4,32(sp)
80001230:	8fb3001c 	lw	s3,28(sp)
80001234:	8fb20018 	lw	s2,24(sp)
80001238:	8fb10014 	lw	s1,20(sp)
8000123c:	8fb00010 	lw	s0,16(sp)
80001240:	03e00008 	jr	ra
80001244:	27bd0028 	addiu	sp,sp,40

80001248 <sched_init>:
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
 * list_init - initialize a new entry
 * @elm:        new entry to be initialized
 * */
static inline void list_init(list_entry_t * elm)
{
	elm->prev = elm->next = elm;
80001248:	3c038015 	lui	v1,0x8015
8000124c:	24623450 	addiu	v0,v1,13392
sched_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:111
}

static struct run_queue __rq[4];

void sched_init(void)
{
80001250:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:114
	list_init(&timer_list);

	rq = __rq;
80001254:	3c048015 	lui	a0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:111
}

static struct run_queue __rq[4];

void sched_init(void)
{
80001258:	afbf0014 	sw	ra,20(sp)
8000125c:	afb00010 	sw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:114
	list_init(&timer_list);

	rq = __rq;
80001260:	2484345c 	addiu	a0,a0,13404
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
80001264:	ac420004 	sw	v0,4(v0)
80001268:	ac623450 	sw	v0,13392(v1)
sched_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:114
8000126c:	3c028015 	lui	v0,0x8015
80001270:	ac443458 	sw	a0,13400(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:116
	list_init(&(rq->rq_link));
	rq->max_time_slice = 8;
80001274:	24020008 	li	v0,8
80001278:	ac82000c 	sw	v0,12(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:119

	int i;
	for (i = 1; i < sizeof(__rq) / sizeof(__rq[0]); i++) {
8000127c:	24020001 	li	v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:120
		list_add_before(&(rq->rq_link), &(__rq[i].rq_link));
80001280:	000218c0 	sll	v1,v0,0x3
80001284:	00024940 	sll	t1,v0,0x5
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
80001288:	3c088015 	lui	t0,0x8015
sched_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:120
8000128c:	01231823 	subu	v1,t1,v1
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
80001290:	2508346c 	addiu	t0,t0,13420
sched_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:116
{
	list_init(&timer_list);

	rq = __rq;
	list_init(&(rq->rq_link));
	rq->max_time_slice = 8;
80001294:	3c058015 	lui	a1,0x8015
80001298:	24070008 	li	a3,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:120

	int i;
	for (i = 1; i < sizeof(__rq) / sizeof(__rq[0]); i++) {
		list_add_before(&(rq->rq_link), &(__rq[i].rq_link));
8000129c:	24630010 	addiu	v1,v1,16
800012a0:	00831821 	addu	v1,a0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:116
{
	list_init(&timer_list);

	rq = __rq;
	list_init(&(rq->rq_link));
	rq->max_time_slice = 8;
800012a4:	24a53480 	addiu	a1,a1,13440
800012a8:	01003021 	move	a2,t0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:121

	int i;
	for (i = 1; i < sizeof(__rq) / sizeof(__rq[0]); i++) {
		list_add_before(&(rq->rq_link), &(__rq[i].rq_link));
		__rq[i].max_time_slice = rq->max_time_slice * (1 << i);
800012ac:	00473804 	sllv	a3,a3,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:119
	rq = __rq;
	list_init(&(rq->rq_link));
	rq->max_time_slice = 8;

	int i;
	for (i = 1; i < sizeof(__rq) / sizeof(__rq[0]); i++) {
800012b0:	240a0004 	li	t2,4
800012b4:	24420001 	addiu	v0,v0,1
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
800012b8:	ac880014 	sw	t0,20(a0)
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
800012bc:	ac830010 	sw	v1,16(a0)
800012c0:	acc30004 	sw	v1,4(a2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->next = next;
	elm->prev = prev;
800012c4:	ac660000 	sw	a2,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
	elm->next = next;
800012c8:	ac680004 	sw	t0,4(v1)
sched_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:121
		list_add_before(&(rq->rq_link), &(__rq[i].rq_link));
		__rq[i].max_time_slice = rq->max_time_slice * (1 << i);
800012cc:	aca70000 	sw	a3,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:119
	rq = __rq;
	list_init(&(rq->rq_link));
	rq->max_time_slice = 8;

	int i;
	for (i = 1; i < sizeof(__rq) / sizeof(__rq[0]); i++) {
800012d0:	104a0011 	beq	v0,t2,80001318 <sched_init+0xd0>
800012d4:	24a50018 	addiu	a1,a1,24
800012d8:	8c87000c 	lw	a3,12(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:120
		list_add_before(&(rq->rq_link), &(__rq[i].rq_link));
800012dc:	000218c0 	sll	v1,v0,0x3
800012e0:	00024940 	sll	t1,v0,0x5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:119
	rq = __rq;
	list_init(&(rq->rq_link));
	rq->max_time_slice = 8;

	int i;
	for (i = 1; i < sizeof(__rq) / sizeof(__rq[0]); i++) {
800012e4:	8c860010 	lw	a2,16(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:120
		list_add_before(&(rq->rq_link), &(__rq[i].rq_link));
800012e8:	01231823 	subu	v1,t1,v1
800012ec:	24630010 	addiu	v1,v1,16
800012f0:	00831821 	addu	v1,a0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:121
		__rq[i].max_time_slice = rq->max_time_slice * (1 << i);
800012f4:	00473804 	sllv	a3,a3,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:119
	rq = __rq;
	list_init(&(rq->rq_link));
	rq->max_time_slice = 8;

	int i;
	for (i = 1; i < sizeof(__rq) / sizeof(__rq[0]); i++) {
800012f8:	24420001 	addiu	v0,v0,1
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
800012fc:	ac830010 	sw	v1,16(a0)
80001300:	acc30004 	sw	v1,4(a2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->next = next;
	elm->prev = prev;
80001304:	ac660000 	sw	a2,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
	elm->next = next;
80001308:	ac680004 	sw	t0,4(v1)
sched_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:121
		list_add_before(&(rq->rq_link), &(__rq[i].rq_link));
		__rq[i].max_time_slice = rq->max_time_slice * (1 << i);
8000130c:	aca70000 	sw	a3,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:119
	rq = __rq;
	list_init(&(rq->rq_link));
	rq->max_time_slice = 8;

	int i;
	for (i = 1; i < sizeof(__rq) / sizeof(__rq[0]); i++) {
80001310:	144afff1 	bne	v0,t2,800012d8 <sched_init+0x90>
80001314:	24a50018 	addiu	a1,a1,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:127
	}

#ifdef UCONFIG_SCHEDULER_MLFQ
	sched_class = &MLFQ_sched_class;
#else
	sched_class = &RR_sched_class;
80001318:	3c038002 	lui	v1,0x8002
8000131c:	24635404 	addiu	v1,v1,21508
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:129
#endif
	sched_class->init(rq);
80001320:	8c620004 	lw	v0,4(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:127
	}

#ifdef UCONFIG_SCHEDULER_MLFQ
	sched_class = &MLFQ_sched_class;
#else
	sched_class = &RR_sched_class;
80001324:	3c108015 	lui	s0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:129
#endif
	sched_class->init(rq);
80001328:	0040f809 	jalr	v0
8000132c:	ae0334bc 	sw	v1,13500(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:131

	kprintf("sched class: %s\n\r", sched_class->name);
80001330:	8e0234bc 	lw	v0,13500(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:132
}
80001334:	8fbf0014 	lw	ra,20(sp)
80001338:	8fb00010 	lw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:131
#else
	sched_class = &RR_sched_class;
#endif
	sched_class->init(rq);

	kprintf("sched class: %s\n\r", sched_class->name);
8000133c:	8c450000 	lw	a1,0(v0)
80001340:	3c048002 	lui	a0,0x8002
80001344:	24840e0c 	addiu	a0,a0,3596
80001348:	08007a9e 	j	8001ea78 <kprintf>
8000134c:	27bd0018 	addiu	sp,sp,24

80001350 <stop_proc>:
stop_proc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:135
}

void stop_proc(struct proc_struct *proc, uint32_t wait)
{
80001350:	27bdffd8 	addiu	sp,sp,-40
80001354:	afb0001c 	sw	s0,28(sp)
80001358:	afbf0024 	sw	ra,36(sp)
8000135c:	afb10020 	sw	s1,32(sp)
80001360:	00808021 	move	s0,a0
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80001364:	40026000 	mfc0	v0,c0_status
80001368:	30420001 	andi	v0,v0,0x1
8000136c:	10400005 	beqz	v0,80001384 <stop_proc+0x34>
80001370:	00008821 	move	s1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80001374:	0c006d04 	jal	8001b410 <intr_disable>
80001378:	afa50010 	sw	a1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:16
	return 1;
8000137c:	8fa50010 	lw	a1,16(sp)
80001380:	24110001 	li	s1,1
stop_proc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:140
	bool intr_flag;
	local_intr_save(intr_flag);
	proc->state = PROC_SLEEPING;
	proc->wait_state = wait;
	if (!list_empty(&(proc->run_link))) {
80001384:	8e0300a4 	lw	v1,164(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:138

void stop_proc(struct proc_struct *proc, uint32_t wait)
{
	bool intr_flag;
	local_intr_save(intr_flag);
	proc->state = PROC_SLEEPING;
80001388:	24040001 	li	a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:140
	proc->wait_state = wait;
	if (!list_empty(&(proc->run_link))) {
8000138c:	260200a0 	addiu	v0,s0,160
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:138

void stop_proc(struct proc_struct *proc, uint32_t wait)
{
	bool intr_flag;
	local_intr_save(intr_flag);
	proc->state = PROC_SLEEPING;
80001390:	ae040000 	sw	a0,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:140
	proc->wait_state = wait;
	if (!list_empty(&(proc->run_link))) {
80001394:	10620008 	beq	v1,v0,800013b8 <stop_proc+0x68>
80001398:	ae050084 	sw	a1,132(s0)
sched_class_dequeue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:91
	}
}

static inline void sched_class_dequeue(struct proc_struct *proc)
{
	sched_class->dequeue(rq, proc);
8000139c:	3c028015 	lui	v0,0x8015
800013a0:	8c4234bc 	lw	v0,13500(v0)
800013a4:	3c038015 	lui	v1,0x8015
800013a8:	8c643458 	lw	a0,13400(v1)
800013ac:	8c42000c 	lw	v0,12(v0)
800013b0:	0040f809 	jalr	v0
800013b4:	02002821 	move	a1,s0
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
800013b8:	16200005 	bnez	s1,800013d0 <stop_proc+0x80>
800013bc:	8fbf0024 	lw	ra,36(sp)
stop_proc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:144
	proc->wait_state = wait;
	if (!list_empty(&(proc->run_link))) {
		sched_class_dequeue(proc);
	}
	local_intr_restore(intr_flag);
}
800013c0:	8fb10020 	lw	s1,32(sp)
800013c4:	8fb0001c 	lw	s0,28(sp)
800013c8:	03e00008 	jr	ra
800013cc:	27bd0028 	addiu	sp,sp,40
800013d0:	8fb10020 	lw	s1,32(sp)
800013d4:	8fb0001c 	lw	s0,28(sp)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
800013d8:	08006d00 	j	8001b400 <intr_enable>
800013dc:	27bd0028 	addiu	sp,sp,40

800013e0 <wakeup_proc>:
wakeup_proc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:148

void wakeup_proc(struct proc_struct *proc)
{
	assert(proc->state != PROC_ZOMBIE);
800013e0:	8c820000 	lw	v0,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:147
	}
	local_intr_restore(intr_flag);
}

void wakeup_proc(struct proc_struct *proc)
{
800013e4:	27bdffe0 	addiu	sp,sp,-32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:148
	assert(proc->state != PROC_ZOMBIE);
800013e8:	24030003 	li	v1,3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:147
	}
	local_intr_restore(intr_flag);
}

void wakeup_proc(struct proc_struct *proc)
{
800013ec:	afbf001c 	sw	ra,28(sp)
800013f0:	afb00018 	sw	s0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:148
	assert(proc->state != PROC_ZOMBIE);
800013f4:	1043002f 	beq	v0,v1,800014b4 <wakeup_proc+0xd4>
800013f8:	00802821 	move	a1,a0
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
800013fc:	40036000 	mfc0	v1,c0_status
80001400:	30630001 	andi	v1,v1,0x1
80001404:	10600006 	beqz	v1,80001420 <wakeup_proc+0x40>
80001408:	00008021 	move	s0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8000140c:	0c006d04 	jal	8001b410 <intr_disable>
80001410:	afa40010 	sw	a0,16(sp)
80001414:	8fa50010 	lw	a1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:16
	return 1;
80001418:	24100001 	li	s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8000141c:	8ca20000 	lw	v0,0(a1)
wakeup_proc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:152
	bool intr_flag;
	local_intr_save(intr_flag);
	{
		if (proc->state != PROC_RUNNABLE) {
80001420:	24030002 	li	v1,2
80001424:	1043001b 	beq	v0,v1,80001494 <wakeup_proc+0xb4>
80001428:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:155
			proc->state = PROC_RUNNABLE;
			proc->wait_state = 0;
			if (proc != current) {
8000142c:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:154
	bool intr_flag;
	local_intr_save(intr_flag);
	{
		if (proc->state != PROC_RUNNABLE) {
			proc->state = PROC_RUNNABLE;
			proc->wait_state = 0;
80001430:	aca00084 	sw	zero,132(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:155
			if (proc != current) {
80001434:	10a2000f 	beq	a1,v0,80001474 <wakeup_proc+0x94>
80001438:	aca30000 	sw	v1,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:156
				assert(proc->pid >= pls_read(lcpu_count));
8000143c:	3c028015 	lui	v0,0x8015
80001440:	8ca30004 	lw	v1,4(a1)
80001444:	8c4277a0 	lw	v0,30624(v0)
80001448:	0062102a 	slt	v0,v1,v0
8000144c:	14400021 	bnez	v0,800014d4 <wakeup_proc+0xf4>
80001450:	3c028015 	lui	v0,0x8015
sched_class_enqueue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:84

static struct run_queue *rq;

static inline void sched_class_enqueue(struct proc_struct *proc)
{
	if (proc != idleproc) {
80001454:	8c4277a8 	lw	v0,30632(v0)
80001458:	10a20006 	beq	a1,v0,80001474 <wakeup_proc+0x94>
8000145c:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:85
		sched_class->enqueue(rq, proc);
80001460:	8c4234bc 	lw	v0,13500(v0)
80001464:	3c038015 	lui	v1,0x8015
80001468:	8c420008 	lw	v0,8(v0)
8000146c:	0040f809 	jalr	v0
80001470:	8c643458 	lw	a0,13400(v1)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80001474:	16000004 	bnez	s0,80001488 <wakeup_proc+0xa8>
80001478:	8fbf001c 	lw	ra,28(sp)
wakeup_proc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:164
		} else {
			warn("wakeup runnable process.\n\r");
		}
	}
	local_intr_restore(intr_flag);
}
8000147c:	8fb00018 	lw	s0,24(sp)
80001480:	03e00008 	jr	ra
80001484:	27bd0020 	addiu	sp,sp,32
80001488:	8fb00018 	lw	s0,24(sp)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
8000148c:	08006d00 	j	8001b400 <intr_enable>
80001490:	27bd0020 	addiu	sp,sp,32
wakeup_proc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:160
			if (proc != current) {
				assert(proc->pid >= pls_read(lcpu_count));
				sched_class_enqueue(proc);
			}
		} else {
			warn("wakeup runnable process.\n\r");
80001494:	3c048002 	lui	a0,0x8002
80001498:	3c068002 	lui	a2,0x8002
8000149c:	24840e20 	addiu	a0,a0,3616
800014a0:	240500a0 	li	a1,160
800014a4:	0c006b2b 	jal	8001acac <__warn>
800014a8:	24c60e80 	addiu	a2,a2,3712
800014ac:	0800051d 	j	80001474 <wakeup_proc+0x94>
800014b0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:148
	local_intr_restore(intr_flag);
}

void wakeup_proc(struct proc_struct *proc)
{
	assert(proc->state != PROC_ZOMBIE);
800014b4:	3c048002 	lui	a0,0x8002
800014b8:	3c068002 	lui	a2,0x8002
800014bc:	3c078002 	lui	a3,0x8002
800014c0:	24840e20 	addiu	a0,a0,3616
800014c4:	24050094 	li	a1,148
800014c8:	24c60e28 	addiu	a2,a2,3624
800014cc:	0c006b0b 	jal	8001ac2c <__panic>
800014d0:	24e70e40 	addiu	a3,a3,3648
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:156
	{
		if (proc->state != PROC_RUNNABLE) {
			proc->state = PROC_RUNNABLE;
			proc->wait_state = 0;
			if (proc != current) {
				assert(proc->pid >= pls_read(lcpu_count));
800014d4:	3c048002 	lui	a0,0x8002
800014d8:	3c068002 	lui	a2,0x8002
800014dc:	3c078002 	lui	a3,0x8002
800014e0:	24840e20 	addiu	a0,a0,3616
800014e4:	2405009c 	li	a1,156
800014e8:	24c60e28 	addiu	a2,a2,3624
800014ec:	0c006b0b 	jal	8001ac2c <__panic>
800014f0:	24e70e5c 	addiu	a3,a3,3676

800014f4 <try_to_wakeup>:
try_to_wakeup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:168
	local_intr_restore(intr_flag);
}

int try_to_wakeup(struct proc_struct *proc)
{
	assert(proc->state != PROC_ZOMBIE);
800014f4:	8c820000 	lw	v0,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:167
	}
	local_intr_restore(intr_flag);
}

int try_to_wakeup(struct proc_struct *proc)
{
800014f8:	27bdffc0 	addiu	sp,sp,-64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:168
	assert(proc->state != PROC_ZOMBIE);
800014fc:	24030003 	li	v1,3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:167
	}
	local_intr_restore(intr_flag);
}

int try_to_wakeup(struct proc_struct *proc)
{
80001500:	afb0001c 	sw	s0,28(sp)
80001504:	afbf003c 	sw	ra,60(sp)
80001508:	afb70038 	sw	s7,56(sp)
8000150c:	afb60034 	sw	s6,52(sp)
80001510:	afb50030 	sw	s5,48(sp)
80001514:	afb4002c 	sw	s4,44(sp)
80001518:	afb30028 	sw	s3,40(sp)
8000151c:	afb20024 	sw	s2,36(sp)
80001520:	afb10020 	sw	s1,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:168
	assert(proc->state != PROC_ZOMBIE);
80001524:	1043004d 	beq	v0,v1,8000165c <try_to_wakeup+0x168>
80001528:	00808021 	move	s0,a0
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8000152c:	40036000 	mfc0	v1,c0_status
80001530:	30630001 	andi	v1,v1,0x1
80001534:	10600004 	beqz	v1,80001548 <try_to_wakeup+0x54>
80001538:	00009821 	move	s3,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8000153c:	0c006d04 	jal	8001b410 <intr_disable>
80001540:	24130001 	li	s3,1
80001544:	8e020000 	lw	v0,0(s0)
try_to_wakeup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:173
	int ret;
	bool intr_flag;
	local_intr_save(intr_flag);
	{
		if (proc->state != PROC_RUNNABLE) {
80001548:	24030002 	li	v1,2
8000154c:	10430011 	beq	v0,v1,80001594 <try_to_wakeup+0xa0>
80001550:	00009021 	move	s2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:176
			proc->state = PROC_RUNNABLE;
			proc->wait_state = 0;
			if (proc != current) {
80001554:	3c028015 	lui	v0,0x8015
80001558:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:175
	bool intr_flag;
	local_intr_save(intr_flag);
	{
		if (proc->state != PROC_RUNNABLE) {
			proc->state = PROC_RUNNABLE;
			proc->wait_state = 0;
8000155c:	ae000084 	sw	zero,132(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:174
	int ret;
	bool intr_flag;
	local_intr_save(intr_flag);
	{
		if (proc->state != PROC_RUNNABLE) {
			proc->state = PROC_RUNNABLE;
80001560:	ae030000 	sw	v1,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:176
			proc->wait_state = 0;
			if (proc != current) {
80001564:	1202000b 	beq	s0,v0,80001594 <try_to_wakeup+0xa0>
80001568:	24120001 	li	s2,1
sched_class_enqueue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:84

static struct run_queue *rq;

static inline void sched_class_enqueue(struct proc_struct *proc)
{
	if (proc != idleproc) {
8000156c:	3c028015 	lui	v0,0x8015
80001570:	8c4277a8 	lw	v0,30632(v0)
80001574:	12020007 	beq	s0,v0,80001594 <try_to_wakeup+0xa0>
80001578:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:85
		sched_class->enqueue(rq, proc);
8000157c:	8c4234bc 	lw	v0,13500(v0)
80001580:	3c038015 	lui	v1,0x8015
80001584:	8c643458 	lw	a0,13400(v1)
80001588:	8c420008 	lw	v0,8(v0)
8000158c:	0040f809 	jalr	v0
80001590:	02002821 	move	a1,s0
try_to_wakeup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:184
			ret = 1;
		} else {
			ret = 0;
		}
		struct proc_struct *next = proc;
		while ((next = next_thread(next)) != proc) {
80001594:	02001021 	move	v0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:185
			if (next->state == PROC_SLEEPING
80001598:	24110001 	li	s1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:189
			    && next->wait_state == WT_SIGNAL) {
				next->state = PROC_RUNNABLE;
				next->wait_state = 0;
				if (next != current) {
8000159c:	3c148015 	lui	s4,0x8015
sched_class_enqueue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:84

static struct run_queue *rq;

static inline void sched_class_enqueue(struct proc_struct *proc)
{
	if (proc != idleproc) {
800015a0:	3c158015 	lui	s5,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:85
		sched_class->enqueue(rq, proc);
800015a4:	3c178015 	lui	s7,0x8015
800015a8:	3c168015 	lui	s6,0x8015
try_to_wakeup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:184
			ret = 1;
		} else {
			ret = 0;
		}
		struct proc_struct *next = proc;
		while ((next = next_thread(next)) != proc) {
800015ac:	0c00452d 	jal	800114b4 <next_thread>
800015b0:	00402021 	move	a0,v0
800015b4:	10500019 	beq	v0,s0,8000161c <try_to_wakeup+0x128>
800015b8:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:185
			if (next->state == PROC_SLEEPING
800015bc:	8c430000 	lw	v1,0(v0)
800015c0:	1471fffa 	bne	v1,s1,800015ac <try_to_wakeup+0xb8>
800015c4:	3c038000 	lui	v1,0x8000
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:186
			    && next->wait_state == WT_SIGNAL) {
800015c8:	8c440084 	lw	a0,132(v0)
800015cc:	24630400 	addiu	v1,v1,1024
800015d0:	1483fff6 	bne	a0,v1,800015ac <try_to_wakeup+0xb8>
800015d4:	8e8377a4 	lw	v1,30628(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:187
				next->state = PROC_RUNNABLE;
800015d8:	24040002 	li	a0,2
800015dc:	ac440000 	sw	a0,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:189
				next->wait_state = 0;
				if (next != current) {
800015e0:	1043fff2 	beq	v0,v1,800015ac <try_to_wakeup+0xb8>
800015e4:	ac400084 	sw	zero,132(v0)
sched_class_enqueue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:84

static struct run_queue *rq;

static inline void sched_class_enqueue(struct proc_struct *proc)
{
	if (proc != idleproc) {
800015e8:	8ea377a8 	lw	v1,30632(s5)
800015ec:	1043ffef 	beq	v0,v1,800015ac <try_to_wakeup+0xb8>
800015f0:	8ee334bc 	lw	v1,13500(s7)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:85
		sched_class->enqueue(rq, proc);
800015f4:	8ec43458 	lw	a0,13400(s6)
800015f8:	00402821 	move	a1,v0
800015fc:	8c630008 	lw	v1,8(v1)
80001600:	0060f809 	jalr	v1
80001604:	afa20010 	sw	v0,16(sp)
80001608:	8fa20010 	lw	v0,16(sp)
try_to_wakeup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:184
			ret = 1;
		} else {
			ret = 0;
		}
		struct proc_struct *next = proc;
		while ((next = next_thread(next)) != proc) {
8000160c:	0c00452d 	jal	800114b4 <next_thread>
80001610:	00402021 	move	a0,v0
80001614:	5450ffea 	bnel	v0,s0,800015c0 <try_to_wakeup+0xcc>
80001618:	8c430000 	lw	v1,0(v0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
8000161c:	12600004 	beqz	s3,80001630 <try_to_wakeup+0x13c>
80001620:	8fbf003c 	lw	ra,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
80001624:	0c006d00 	jal	8001b400 <intr_enable>
80001628:	00000000 	nop
try_to_wakeup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:197
			}
		}
	}
	local_intr_restore(intr_flag);
	return ret;
}
8000162c:	8fbf003c 	lw	ra,60(sp)
80001630:	02401021 	move	v0,s2
80001634:	8fb70038 	lw	s7,56(sp)
80001638:	8fb60034 	lw	s6,52(sp)
8000163c:	8fb50030 	lw	s5,48(sp)
80001640:	8fb4002c 	lw	s4,44(sp)
80001644:	8fb30028 	lw	s3,40(sp)
80001648:	8fb20024 	lw	s2,36(sp)
8000164c:	8fb10020 	lw	s1,32(sp)
80001650:	8fb0001c 	lw	s0,28(sp)
80001654:	03e00008 	jr	ra
80001658:	27bd0040 	addiu	sp,sp,64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:168
	local_intr_restore(intr_flag);
}

int try_to_wakeup(struct proc_struct *proc)
{
	assert(proc->state != PROC_ZOMBIE);
8000165c:	3c048002 	lui	a0,0x8002
80001660:	3c068002 	lui	a2,0x8002
80001664:	3c078002 	lui	a3,0x8002
80001668:	24840e20 	addiu	a0,a0,3616
8000166c:	240500a8 	li	a1,168
80001670:	24c60e28 	addiu	a2,a2,3624
80001674:	0c006b0b 	jal	8001ac2c <__panic>
80001678:	24e70e40 	addiu	a3,a3,3648

8000167c <schedule>:
schedule():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:204
#include <vmm.h>

#define MT_SUPPORT

void schedule(void)
{
8000167c:	27bdffd0 	addiu	sp,sp,-48
80001680:	afbf002c 	sw	ra,44(sp)
80001684:	afb30028 	sw	s3,40(sp)
80001688:	afb20024 	sw	s2,36(sp)
8000168c:	afb10020 	sw	s1,32(sp)
80001690:	afb0001c 	sw	s0,28(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80001694:	40026000 	mfc0	v0,c0_status
80001698:	30420001 	andi	v0,v0,0x1
8000169c:	10400003 	beqz	v0,800016ac <schedule+0x30>
800016a0:	00008821 	move	s1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
800016a4:	0c006d04 	jal	8001b410 <intr_disable>
800016a8:	24110001 	li	s1,1
schedule():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:209
	bool intr_flag;
	struct proc_struct *next;
	local_intr_save(intr_flag);
	{
        	current->need_resched = 0;
800016ac:	3c108015 	lui	s0,0x8015
800016b0:	8e0577a4 	lw	a1,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:210
        	if (current->state == PROC_RUNNABLE) {
800016b4:	24020002 	li	v0,2
800016b8:	8ca30000 	lw	v1,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:209
{
	bool intr_flag;
	struct proc_struct *next;
	local_intr_save(intr_flag);
	{
        	current->need_resched = 0;
800016bc:	aca00018 	sw	zero,24(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:210
        	if (current->state == PROC_RUNNABLE) {
800016c0:	10620028 	beq	v1,v0,80001764 <schedule+0xe8>
800016c4:	3c138015 	lui	s3,0x8015
800016c8:	3c128015 	lui	s2,0x8015
sched_class_pick_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:96
	sched_class->dequeue(rq, proc);
}

static inline struct proc_struct *sched_class_pick_next(void)
{
	return sched_class->pick_next(rq);
800016cc:	8e6234bc 	lw	v0,13500(s3)
800016d0:	8c420010 	lw	v0,16(v0)
800016d4:	0040f809 	jalr	v0
800016d8:	8e443458 	lw	a0,13400(s2)
schedule():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:213
	{
        	current->need_resched = 0;
        	if (current->state == PROC_RUNNABLE) {
            		sched_class_enqueue(current);
        	}
        	if ((next = sched_class_pick_next()) != NULL) {
800016dc:	1040001e 	beqz	v0,80001758 <schedule+0xdc>
800016e0:	3c038015 	lui	v1,0x8015
sched_class_dequeue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:91
	}
}

static inline void sched_class_dequeue(struct proc_struct *proc)
{
	sched_class->dequeue(rq, proc);
800016e4:	8c6334bc 	lw	v1,13500(v1)
800016e8:	3c048015 	lui	a0,0x8015
800016ec:	8c843458 	lw	a0,13400(a0)
800016f0:	8c63000c 	lw	v1,12(v1)
800016f4:	00402821 	move	a1,v0
800016f8:	0060f809 	jalr	v1
800016fc:	afa20010 	sw	v0,16(sp)
80001700:	8fa20010 	lw	v0,16(sp)
schedule():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:219
            		sched_class_dequeue(next);
       	 	}
        	if (next == NULL) {
           		next = idleproc;
        	}
        	next->runs ++;
80001704:	8c440010 	lw	a0,16(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:220
        	if (next != current) {
80001708:	8e0377a4 	lw	v1,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:219
            		sched_class_dequeue(next);
       	 	}
        	if (next == NULL) {
           		next = idleproc;
        	}
        	next->runs ++;
8000170c:	24840001 	addiu	a0,a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:220
        	if (next != current) {
80001710:	10430003 	beq	v0,v1,80001720 <schedule+0xa4>
80001714:	ac440010 	sw	a0,16(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:225
            		//kprintf("########################\n");
            		//kprintf("c %d TO %d\n", current->pid, next->pid);
           		//print_trapframe(next->tf);
            		//kprintf("@@@@@@@@@@@@@@@@@@@@@@@@\n");
            		proc_run(next);
80001718:	0c003b12 	jal	8000ec48 <proc_run>
8000171c:	00402021 	move	a0,v0
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80001720:	16200007 	bnez	s1,80001740 <schedule+0xc4>
80001724:	8fbf002c 	lw	ra,44(sp)
schedule():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:229
        	}
    	}
    	local_intr_restore(intr_flag);
}
80001728:	8fb30028 	lw	s3,40(sp)
8000172c:	8fb20024 	lw	s2,36(sp)
80001730:	8fb10020 	lw	s1,32(sp)
80001734:	8fb0001c 	lw	s0,28(sp)
80001738:	03e00008 	jr	ra
8000173c:	27bd0030 	addiu	sp,sp,48
80001740:	8fb30028 	lw	s3,40(sp)
80001744:	8fb20024 	lw	s2,36(sp)
80001748:	8fb10020 	lw	s1,32(sp)
8000174c:	8fb0001c 	lw	s0,28(sp)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
80001750:	08006d00 	j	8001b400 <intr_enable>
80001754:	27bd0030 	addiu	sp,sp,48
schedule():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:217
        	}
        	if ((next = sched_class_pick_next()) != NULL) {
            		sched_class_dequeue(next);
       	 	}
        	if (next == NULL) {
           		next = idleproc;
80001758:	3c028015 	lui	v0,0x8015
8000175c:	080005c1 	j	80001704 <schedule+0x88>
80001760:	8c4277a8 	lw	v0,30632(v0)
sched_class_enqueue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:84

static struct run_queue *rq;

static inline void sched_class_enqueue(struct proc_struct *proc)
{
	if (proc != idleproc) {
80001764:	3c028015 	lui	v0,0x8015
80001768:	8c4277a8 	lw	v0,30632(v0)
8000176c:	10a20007 	beq	a1,v0,8000178c <schedule+0x110>
80001770:	8e6234bc 	lw	v0,13500(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:85
		sched_class->enqueue(rq, proc);
80001774:	3c128015 	lui	s2,0x8015
80001778:	8c420008 	lw	v0,8(v0)
8000177c:	0040f809 	jalr	v0
80001780:	8e443458 	lw	a0,13400(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:96
	sched_class->dequeue(rq, proc);
}

static inline struct proc_struct *sched_class_pick_next(void)
{
	return sched_class->pick_next(rq);
80001784:	080005b4 	j	800016d0 <schedule+0x54>
80001788:	8e6234bc 	lw	v0,13500(s3)
8000178c:	080005b3 	j	800016cc <schedule+0x50>
80001790:	3c128015 	lui	s2,0x8015

80001794 <add_timer>:
add_timer():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:232
    	}
    	local_intr_restore(intr_flag);
}

void add_timer(timer_t * timer)
{
80001794:	27bdffe0 	addiu	sp,sp,-32
80001798:	afbf001c 	sw	ra,28(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8000179c:	40026000 	mfc0	v0,c0_status
800017a0:	30420001 	andi	v0,v0,0x1
800017a4:	10400005 	beqz	v0,800017bc <add_timer+0x28>
800017a8:	00004821 	move	t1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
800017ac:	0c006d04 	jal	8001b410 <intr_disable>
800017b0:	afa40010 	sw	a0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:16
	return 1;
800017b4:	8fa40010 	lw	a0,16(sp)
800017b8:	24090001 	li	t1,1
add_timer():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:236
	bool intr_flag;
	local_intr_save(intr_flag);
	{
		assert(timer->expires > 0 && timer->proc != NULL);
800017bc:	8c830000 	lw	v1,0(a0)
800017c0:	5060002e 	beqzl	v1,8000187c <add_timer+0xe8>
800017c4:	3c048002 	lui	a0,0x8002
800017c8:	8c820004 	lw	v0,4(a0)
800017cc:	1040002a 	beqz	v0,80001878 <add_timer+0xe4>
800017d0:	24880014 	addiu	t0,a0,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:237
		assert(list_empty(&(timer->timer_link)));
800017d4:	8c820018 	lw	v0,24(a0)
800017d8:	5502002f 	bnel	t0,v0,80001898 <add_timer+0x104>
800017dc:	3c048002 	lui	a0,0x8002
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
800017e0:	3c078015 	lui	a3,0x8015
800017e4:	24e73450 	addiu	a3,a3,13392
800017e8:	8ce20004 	lw	v0,4(a3)
add_timer():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:239
		list_entry_t *le = list_next(&timer_list);
		while (le != &timer_list) {
800017ec:	50470010 	beql	v0,a3,80001830 <add_timer+0x9c>
800017f0:	8c430000 	lw	v1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:241
			timer_t *next = le2timer(le, timer_link);
			if (timer->expires < next->expires) {
800017f4:	8c45ffec 	lw	a1,-20(v0)
800017f8:	0065302b 	sltu	a2,v1,a1
800017fc:	50c00008 	beqzl	a2,80001820 <add_timer+0x8c>
80001800:	8c420004 	lw	v0,4(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:242
				next->expires -= timer->expires;
80001804:	08000614 	j	80001850 <add_timer+0xbc>
80001808:	00a31823 	subu	v1,a1,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:241
		assert(timer->expires > 0 && timer->proc != NULL);
		assert(list_empty(&(timer->timer_link)));
		list_entry_t *le = list_next(&timer_list);
		while (le != &timer_list) {
			timer_t *next = le2timer(le, timer_link);
			if (timer->expires < next->expires) {
8000180c:	8c45ffec 	lw	a1,-20(v0)
80001810:	0065302b 	sltu	a2,v1,a1
80001814:	54c0000e 	bnezl	a2,80001850 <add_timer+0xbc>
80001818:	00a31823 	subu	v1,a1,v1
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
8000181c:	8c420004 	lw	v0,4(v0)
add_timer():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:245
				next->expires -= timer->expires;
				break;
			}
			timer->expires -= next->expires;
80001820:	00651823 	subu	v1,v1,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:239
	local_intr_save(intr_flag);
	{
		assert(timer->expires > 0 && timer->proc != NULL);
		assert(list_empty(&(timer->timer_link)));
		list_entry_t *le = list_next(&timer_list);
		while (le != &timer_list) {
80001824:	1447fff9 	bne	v0,a3,8000180c <add_timer+0x78>
80001828:	ac830000 	sw	v1,0(a0)
list_add_before():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:80
 * Insert the new element @elm *before* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_before(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm->prev, listelm);
8000182c:	8c430000 	lw	v1,0(v0)
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
80001830:	ac480000 	sw	t0,0(v0)
80001834:	ac680004 	sw	t0,4(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->next = next;
	elm->prev = prev;
80001838:	ac830014 	sw	v1,20(a0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
8000183c:	1520000b 	bnez	t1,8000186c <add_timer+0xd8>
80001840:	ac820018 	sw	v0,24(a0)
add_timer():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:251
			le = list_next(le);
		}
		list_add_before(le, &(timer->timer_link));
	}
	local_intr_restore(intr_flag);
}
80001844:	8fbf001c 	lw	ra,28(sp)
80001848:	03e00008 	jr	ra
8000184c:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:242
		assert(list_empty(&(timer->timer_link)));
		list_entry_t *le = list_next(&timer_list);
		while (le != &timer_list) {
			timer_t *next = le2timer(le, timer_link);
			if (timer->expires < next->expires) {
				next->expires -= timer->expires;
80001850:	ac43ffec 	sw	v1,-20(v0)
list_add_before():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:80
 * Insert the new element @elm *before* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_before(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm->prev, listelm);
80001854:	8c430000 	lw	v1,0(v0)
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
80001858:	ac480000 	sw	t0,0(v0)
8000185c:	ac680004 	sw	t0,4(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->next = next;
	elm->prev = prev;
80001860:	ac830014 	sw	v1,20(a0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
80001864:	1120fff7 	beqz	t1,80001844 <add_timer+0xb0>
80001868:	ac820018 	sw	v0,24(a0)
add_timer():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:251
			le = list_next(le);
		}
		list_add_before(le, &(timer->timer_link));
	}
	local_intr_restore(intr_flag);
}
8000186c:	8fbf001c 	lw	ra,28(sp)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
80001870:	08006d00 	j	8001b400 <intr_enable>
80001874:	27bd0020 	addiu	sp,sp,32
add_timer():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:236
void add_timer(timer_t * timer)
{
	bool intr_flag;
	local_intr_save(intr_flag);
	{
		assert(timer->expires > 0 && timer->proc != NULL);
80001878:	3c048002 	lui	a0,0x8002
8000187c:	3c068002 	lui	a2,0x8002
80001880:	3c078002 	lui	a3,0x8002
80001884:	24840e20 	addiu	a0,a0,3616
80001888:	240500ec 	li	a1,236
8000188c:	24c60e28 	addiu	a2,a2,3624
80001890:	0c006b0b 	jal	8001ac2c <__panic>
80001894:	24e70e9c 	addiu	a3,a3,3740
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:237
		assert(list_empty(&(timer->timer_link)));
80001898:	3c068002 	lui	a2,0x8002
8000189c:	3c078002 	lui	a3,0x8002
800018a0:	24840e20 	addiu	a0,a0,3616
800018a4:	240500ed 	li	a1,237
800018a8:	24c60e28 	addiu	a2,a2,3624
800018ac:	0c006b0b 	jal	8001ac2c <__panic>
800018b0:	24e70ec8 	addiu	a3,a3,3784

800018b4 <del_timer>:
del_timer():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:254
	}
	local_intr_restore(intr_flag);
}

void del_timer(timer_t * timer)
{
800018b4:	27bdffe0 	addiu	sp,sp,-32
800018b8:	afbf001c 	sw	ra,28(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
800018bc:	40026000 	mfc0	v0,c0_status
800018c0:	30420001 	andi	v0,v0,0x1
800018c4:	10400005 	beqz	v0,800018dc <del_timer+0x28>
800018c8:	00003021 	move	a2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
800018cc:	0c006d04 	jal	8001b410 <intr_disable>
800018d0:	afa40010 	sw	a0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:16
	return 1;
800018d4:	8fa40010 	lw	a0,16(sp)
800018d8:	24060001 	li	a2,1
list_empty():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:126
 * list_empty - tests whether a list is empty
 * @list:       the list to test.
 * */
static inline bool list_empty(list_entry_t * list)
{
	return list->next == list;
800018dc:	8c820018 	lw	v0,24(a0)
del_timer():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:258
	bool intr_flag;
	local_intr_save(intr_flag);
	{
		if (!list_empty(&(timer->timer_link))) {
800018e0:	24830014 	addiu	v1,a0,20
800018e4:	10620010 	beq	v1,v0,80001928 <del_timer+0x74>
800018e8:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:259
			if (timer->expires != 0) {
800018ec:	8c850000 	lw	a1,0(a0)
800018f0:	50a00009 	beqzl	a1,80001918 <del_timer+0x64>
800018f4:	8c850014 	lw	a1,20(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:262
				list_entry_t *le =
				    list_next(&(timer->timer_link));
				if (le != &timer_list) {
800018f8:	3c078015 	lui	a3,0x8015
800018fc:	24e73450 	addiu	a3,a3,13392
80001900:	50470005 	beql	v0,a3,80001918 <del_timer+0x64>
80001904:	8c850014 	lw	a1,20(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:265
					timer_t *next =
					    le2timer(le, timer_link);
					next->expires += timer->expires;
80001908:	8c47ffec 	lw	a3,-20(v0)
8000190c:	00e52821 	addu	a1,a3,a1
80001910:	ac45ffec 	sw	a1,-20(v0)
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
80001914:	8c850014 	lw	a1,20(a0)
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
80001918:	aca20004 	sw	v0,4(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:170
	next->prev = prev;
8000191c:	ac450000 	sw	a1,0(v0)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
 * list_init - initialize a new entry
 * @elm:        new entry to be initialized
 * */
static inline void list_init(list_entry_t * elm)
{
	elm->prev = elm->next = elm;
80001920:	ac830018 	sw	v1,24(a0)
80001924:	ac830014 	sw	v1,20(a0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80001928:	14c00003 	bnez	a2,80001938 <del_timer+0x84>
8000192c:	8fbf001c 	lw	ra,28(sp)
del_timer():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:272
			}
			list_del_init(&(timer->timer_link));
		}
	}
	local_intr_restore(intr_flag);
}
80001930:	03e00008 	jr	ra
80001934:	27bd0020 	addiu	sp,sp,32
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
80001938:	08006d00 	j	8001b400 <intr_enable>
8000193c:	27bd0020 	addiu	sp,sp,32

80001940 <run_timer_list>:
run_timer_list():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:275

void run_timer_list(void)
{
80001940:	27bdffd0 	addiu	sp,sp,-48
80001944:	afbf002c 	sw	ra,44(sp)
80001948:	afb60028 	sw	s6,40(sp)
8000194c:	afb50024 	sw	s5,36(sp)
80001950:	afb40020 	sw	s4,32(sp)
80001954:	afb3001c 	sw	s3,28(sp)
80001958:	afb20018 	sw	s2,24(sp)
8000195c:	afb10014 	sw	s1,20(sp)
80001960:	afb00010 	sw	s0,16(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80001964:	40026000 	mfc0	v0,c0_status
80001968:	30420001 	andi	v0,v0,0x1
8000196c:	10400003 	beqz	v0,8000197c <run_timer_list+0x3c>
80001970:	00009821 	move	s3,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80001974:	0c006d04 	jal	8001b410 <intr_disable>
80001978:	24130001 	li	s3,1
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
8000197c:	3c128015 	lui	s2,0x8015
80001980:	26523450 	addiu	s2,s2,13392
80001984:	8e510004 	lw	s1,4(s2)
run_timer_list():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:280
	bool intr_flag;
	local_intr_save(intr_flag);
	{
		list_entry_t *le = list_next(&timer_list);
		if (le != &timer_list) {
80001988:	1232001b 	beq	s1,s2,800019f8 <run_timer_list+0xb8>
8000198c:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:282
			timer_t *timer = le2timer(le, timer_link);
			assert(timer->expires != 0);
80001990:	8e22ffec 	lw	v0,-20(s1)
80001994:	10400056 	beqz	v0,80001af0 <run_timer_list+0x1b0>
80001998:	2442ffff 	addiu	v0,v0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:300
				struct proc_struct *proc = timer->proc;
				if (proc->wait_state != 0) {
					assert(proc->wait_state &
					       WT_INTERRUPTED);
				} else {
					warn("process %d's wait_state == 0.\n\r",
8000199c:	3c158002 	lui	s5,0x8002
800019a0:	3c148002 	lui	s4,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:281
	bool intr_flag;
	local_intr_save(intr_flag);
	{
		list_entry_t *le = list_next(&timer_list);
		if (le != &timer_list) {
			timer_t *timer = le2timer(le, timer_link);
800019a4:	2630ffec 	addiu	s0,s1,-20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:283
			assert(timer->expires != 0);
			timer->expires--;
800019a8:	ae22ffec 	sw	v0,-20(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:300
				struct proc_struct *proc = timer->proc;
				if (proc->wait_state != 0) {
					assert(proc->wait_state &
					       WT_INTERRUPTED);
				} else {
					warn("process %d's wait_state == 0.\n\r",
800019ac:	26b50e20 	addiu	s5,s5,3616
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:284
		list_entry_t *le = list_next(&timer_list);
		if (le != &timer_list) {
			timer_t *timer = le2timer(le, timer_link);
			assert(timer->expires != 0);
			timer->expires--;
			while (timer->expires == 0) {
800019b0:	14400010 	bnez	v0,800019f4 <run_timer_list+0xb4>
800019b4:	26940f24 	addiu	s4,s4,3876
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:286
				le = list_next(le);
				if (__ucore_is_linux_timer(timer)) {
800019b8:	8e020008 	lw	v0,8(s0)
800019bc:	10400023 	beqz	v0,80001a4c <run_timer_list+0x10c>
800019c0:	8e310004 	lw	s1,4(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:289
					struct __ucore_linux_timer *lt =
					    &(timer->linux_timer);
					if (lt->function)
800019c4:	8e020010 	lw	v0,16(s0)
800019c8:	10400003 	beqz	v0,800019d8 <run_timer_list+0x98>
800019cc:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:290
						(lt->function) (lt->data);
800019d0:	0040f809 	jalr	v0
800019d4:	8e04000c 	lw	a0,12(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:291
					del_timer(timer);
800019d8:	0c00062d 	jal	800018b4 <del_timer>
800019dc:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:292
					kfree(timer);
800019e0:	0c0054b1 	jal	800152c4 <kfree>
800019e4:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:310

				del_timer(timer);
				if (le == &timer_list) {
					break;
				}
				timer = le2timer(le, timer_link);
800019e8:	8e020000 	lw	v0,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:284
		list_entry_t *le = list_next(&timer_list);
		if (le != &timer_list) {
			timer_t *timer = le2timer(le, timer_link);
			assert(timer->expires != 0);
			timer->expires--;
			while (timer->expires == 0) {
800019ec:	5040fff3 	beqzl	v0,800019bc <run_timer_list+0x7c>
800019f0:	8e020008 	lw	v0,8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:313
					break;
				}
				timer = le2timer(le, timer_link);
			}
		}
		sched_class_proc_tick(current);
800019f4:	3c028015 	lui	v0,0x8015
800019f8:	8c4577a4 	lw	a1,30628(v0)
sched_class_proc_tick():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:101
	return sched_class->pick_next(rq);
}

static void sched_class_proc_tick(struct proc_struct *proc)
{
	if (proc != idleproc) {
800019fc:	3c028015 	lui	v0,0x8015
80001a00:	8c4277a8 	lw	v0,30632(v0)
80001a04:	10a20026 	beq	a1,v0,80001aa0 <run_timer_list+0x160>
80001a08:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:102
		sched_class->proc_tick(rq, proc);
80001a0c:	8c4234bc 	lw	v0,13500(v0)
80001a10:	3c038015 	lui	v1,0x8015
80001a14:	8c420014 	lw	v0,20(v0)
80001a18:	0040f809 	jalr	v0
80001a1c:	8c643458 	lw	a0,13400(v1)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80001a20:	16600023 	bnez	s3,80001ab0 <run_timer_list+0x170>
80001a24:	8fbf002c 	lw	ra,44(sp)
run_timer_list():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:316
			}
		}
		sched_class_proc_tick(current);
	}
	local_intr_restore(intr_flag);
}
80001a28:	8fb60028 	lw	s6,40(sp)
80001a2c:	8fb50024 	lw	s5,36(sp)
80001a30:	8fb40020 	lw	s4,32(sp)
80001a34:	8fb3001c 	lw	s3,28(sp)
80001a38:	8fb20018 	lw	s2,24(sp)
80001a3c:	8fb10014 	lw	s1,20(sp)
80001a40:	8fb00010 	lw	s0,16(sp)
80001a44:	03e00008 	jr	ra
80001a48:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:295
						(lt->function) (lt->data);
					del_timer(timer);
					kfree(timer);
					continue;
				}
				struct proc_struct *proc = timer->proc;
80001a4c:	8e160004 	lw	s6,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:296
				if (proc->wait_state != 0) {
80001a50:	8ec20084 	lw	v0,132(s6)
80001a54:	5040000c 	beqzl	v0,80001a88 <run_timer_list+0x148>
80001a58:	8ec70004 	lw	a3,4(s6)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:297
					assert(proc->wait_state &
80001a5c:	0441001d 	bgez	v0,80001ad4 <run_timer_list+0x194>
80001a60:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:304
				} else {
					warn("process %d's wait_state == 0.\n\r",
					     proc->pid);
				}

				wakeup_proc(proc);
80001a64:	0c0004f8 	jal	800013e0 <wakeup_proc>
80001a68:	02c02021 	move	a0,s6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:306

				del_timer(timer);
80001a6c:	0c00062d 	jal	800018b4 <del_timer>
80001a70:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:307
				if (le == &timer_list) {
80001a74:	5232ffe0 	beql	s1,s2,800019f8 <run_timer_list+0xb8>
80001a78:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:310
					break;
				}
				timer = le2timer(le, timer_link);
80001a7c:	2630ffec 	addiu	s0,s1,-20
80001a80:	0800067b 	j	800019ec <run_timer_list+0xac>
80001a84:	8e020000 	lw	v0,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:300
				struct proc_struct *proc = timer->proc;
				if (proc->wait_state != 0) {
					assert(proc->wait_state &
					       WT_INTERRUPTED);
				} else {
					warn("process %d's wait_state == 0.\n\r",
80001a88:	02a02021 	move	a0,s5
80001a8c:	2405012d 	li	a1,301
80001a90:	0c006b2b 	jal	8001acac <__warn>
80001a94:	02803021 	move	a2,s4
80001a98:	08000699 	j	80001a64 <run_timer_list+0x124>
80001a9c:	00000000 	nop
sched_class_proc_tick():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:104
static void sched_class_proc_tick(struct proc_struct *proc)
{
	if (proc != idleproc) {
		sched_class->proc_tick(rq, proc);
	} else {
		proc->need_resched = 1;
80001aa0:	24020001 	li	v0,1
80001aa4:	aca20018 	sw	v0,24(a1)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
80001aa8:	1260ffdf 	beqz	s3,80001a28 <run_timer_list+0xe8>
80001aac:	8fbf002c 	lw	ra,44(sp)
run_timer_list():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:316
			}
		}
		sched_class_proc_tick(current);
	}
	local_intr_restore(intr_flag);
}
80001ab0:	8fb60028 	lw	s6,40(sp)
80001ab4:	8fb50024 	lw	s5,36(sp)
80001ab8:	8fb40020 	lw	s4,32(sp)
80001abc:	8fb3001c 	lw	s3,28(sp)
80001ac0:	8fb20018 	lw	s2,24(sp)
80001ac4:	8fb10014 	lw	s1,20(sp)
80001ac8:	8fb00010 	lw	s0,16(sp)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
80001acc:	08006d00 	j	8001b400 <intr_enable>
80001ad0:	27bd0030 	addiu	sp,sp,48
run_timer_list():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:297
					kfree(timer);
					continue;
				}
				struct proc_struct *proc = timer->proc;
				if (proc->wait_state != 0) {
					assert(proc->wait_state &
80001ad4:	3c068002 	lui	a2,0x8002
80001ad8:	3c078002 	lui	a3,0x8002
80001adc:	24840e20 	addiu	a0,a0,3616
80001ae0:	2405012a 	li	a1,298
80001ae4:	24c60e28 	addiu	a2,a2,3624
80001ae8:	0c006b0b 	jal	8001ac2c <__panic>
80001aec:	24e70f00 	addiu	a3,a3,3840
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.c:282
	local_intr_save(intr_flag);
	{
		list_entry_t *le = list_next(&timer_list);
		if (le != &timer_list) {
			timer_t *timer = le2timer(le, timer_link);
			assert(timer->expires != 0);
80001af0:	3c048002 	lui	a0,0x8002
80001af4:	3c068002 	lui	a2,0x8002
80001af8:	3c078002 	lui	a3,0x8002
80001afc:	24840e20 	addiu	a0,a0,3616
80001b00:	2405011a 	li	a1,282
80001b04:	24c60e28 	addiu	a2,a2,3624
80001b08:	0c006b0b 	jal	8001ac2c <__panic>
80001b0c:	24e70eec 	addiu	a3,a3,3820

80001b10 <RR_init>:
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
 * list_init - initialize a new entry
 * @elm:        new entry to be initialized
 * */
static inline void list_init(list_entry_t * elm)
{
	elm->prev = elm->next = elm;
80001b10:	ac840004 	sw	a0,4(a0)
80001b14:	ac840000 	sw	a0,0(a0)
RR_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:11

static void RR_init(struct run_queue *rq)
{
	list_init(&(rq->run_list));
	rq->proc_num = 0;
}
80001b18:	03e00008 	jr	ra
80001b1c:	ac800008 	sw	zero,8(a0)

80001b20 <RR_pick_next>:
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
80001b20:	8c830004 	lw	v1,4(a0)
RR_pick_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:35

static struct proc_struct *RR_pick_next(struct run_queue *rq)
{
	list_entry_t *le = list_next(&(rq->run_list));
	if (le != &(rq->run_list)) {
		return le2proc(le, run_link);
80001b24:	2462ff60 	addiu	v0,v1,-160
80001b28:	00831826 	xor	v1,a0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:38
	}
	return NULL;
}
80001b2c:	03e00008 	jr	ra
80001b30:	0003100a 	movz	v0,zero,v1

80001b34 <RR_proc_tick>:
RR_proc_tick():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:42

static void RR_proc_tick(struct run_queue *rq, struct proc_struct *proc)
{
	if (proc->time_slice > 0) {
80001b34:	8ca200a8 	lw	v0,168(a1)
80001b38:	18400003 	blez	v0,80001b48 <RR_proc_tick+0x14>
80001b3c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:43
		proc->time_slice--;
80001b40:	2442ffff 	addiu	v0,v0,-1
80001b44:	aca200a8 	sw	v0,168(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:45
	}
	if (proc->time_slice == 0) {
80001b48:	14400002 	bnez	v0,80001b54 <RR_proc_tick+0x20>
80001b4c:	24020001 	li	v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:46
		proc->need_resched = 1;
80001b50:	aca20018 	sw	v0,24(a1)
80001b54:	03e00008 	jr	ra
80001b58:	00000000 	nop

80001b5c <RR_dequeue>:
list_empty():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:126
 * list_empty - tests whether a list is empty
 * @list:       the list to test.
 * */
static inline bool list_empty(list_entry_t * list)
{
	return list->next == list;
80001b5c:	8ca300a4 	lw	v1,164(a1)
RR_dequeue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:25
	proc->rq = rq;
	rq->proc_num++;
}

static void RR_dequeue(struct run_queue *rq, struct proc_struct *proc)
{
80001b60:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:26
	assert(!list_empty(&(proc->run_link)) && proc->rq == rq);
80001b64:	24a200a0 	addiu	v0,a1,160
80001b68:	1043000e 	beq	v0,v1,80001ba4 <RR_dequeue+0x48>
80001b6c:	afbf0014 	sw	ra,20(sp)
80001b70:	8ca6009c 	lw	a2,156(a1)
80001b74:	14c4000b 	bne	a2,a0,80001ba4 <RR_dequeue+0x48>
80001b78:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:28
	list_del_init(&(proc->run_link));
	rq->proc_num--;
80001b7c:	8cc70008 	lw	a3,8(a2)
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
80001b80:	8ca400a0 	lw	a0,160(a1)
RR_dequeue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:28
80001b84:	24e7ffff 	addiu	a3,a3,-1
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
80001b88:	ac830004 	sw	v1,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:170
	next->prev = prev;
80001b8c:	ac640000 	sw	a0,0(v1)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
 * list_init - initialize a new entry
 * @elm:        new entry to be initialized
 * */
static inline void list_init(list_entry_t * elm)
{
	elm->prev = elm->next = elm;
80001b90:	aca200a4 	sw	v0,164(a1)
80001b94:	aca200a0 	sw	v0,160(a1)
RR_dequeue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:29
}
80001b98:	27bd0018 	addiu	sp,sp,24
80001b9c:	03e00008 	jr	ra
80001ba0:	acc70008 	sw	a3,8(a2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:26
	rq->proc_num++;
}

static void RR_dequeue(struct run_queue *rq, struct proc_struct *proc)
{
	assert(!list_empty(&(proc->run_link)) && proc->rq == rq);
80001ba4:	3c048002 	lui	a0,0x8002
80001ba8:	3c068002 	lui	a2,0x8002
80001bac:	3c078002 	lui	a3,0x8002
80001bb0:	24840f44 	addiu	a0,a0,3908
80001bb4:	2405001a 	li	a1,26
80001bb8:	24c60e28 	addiu	a2,a2,3624
80001bbc:	0c006b0b 	jal	8001ac2c <__panic>
80001bc0:	24e70f50 	addiu	a3,a3,3920

80001bc4 <RR_enqueue>:
RR_enqueue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:15
	rq->proc_num = 0;
}

static void RR_enqueue(struct run_queue *rq, struct proc_struct *proc)
{
	assert(list_empty(&(proc->run_link)));
80001bc4:	8ca300a4 	lw	v1,164(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:14
	list_init(&(rq->run_list));
	rq->proc_num = 0;
}

static void RR_enqueue(struct run_queue *rq, struct proc_struct *proc)
{
80001bc8:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:15
	assert(list_empty(&(proc->run_link)));
80001bcc:	24a200a0 	addiu	v0,a1,160
80001bd0:	1443001b 	bne	v0,v1,80001c40 <RR_enqueue+0x7c>
80001bd4:	afbf0014 	sw	ra,20(sp)
list_add_before():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:80
 * Insert the new element @elm *before* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_before(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm->prev, listelm);
80001bd8:	8c830000 	lw	v1,0(a0)
RR_enqueue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:17
	list_add_before(&(rq->run_list), &(proc->run_link));
	if (proc->time_slice == 0 || proc->time_slice > rq->max_time_slice) {
80001bdc:	8ca600a8 	lw	a2,168(a1)
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
80001be0:	ac820000 	sw	v0,0(a0)
80001be4:	ac620004 	sw	v0,4(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->next = next;
	elm->prev = prev;
80001be8:	aca300a0 	sw	v1,160(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
	elm->next = next;
80001bec:	aca400a4 	sw	a0,164(a1)
RR_enqueue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:17
80001bf0:	14c00009 	bnez	a2,80001c18 <RR_enqueue+0x54>
80001bf4:	8c82000c 	lw	v0,12(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:18
		proc->time_slice = rq->max_time_slice;
80001bf8:	aca200a8 	sw	v0,168(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:21
	}
	proc->rq = rq;
	rq->proc_num++;
80001bfc:	8c820008 	lw	v0,8(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:22
}
80001c00:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:20
	assert(list_empty(&(proc->run_link)));
	list_add_before(&(rq->run_list), &(proc->run_link));
	if (proc->time_slice == 0 || proc->time_slice > rq->max_time_slice) {
		proc->time_slice = rq->max_time_slice;
	}
	proc->rq = rq;
80001c04:	aca4009c 	sw	a0,156(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:21
	rq->proc_num++;
80001c08:	24420001 	addiu	v0,v0,1
80001c0c:	ac820008 	sw	v0,8(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:22
}
80001c10:	03e00008 	jr	ra
80001c14:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:17

static void RR_enqueue(struct run_queue *rq, struct proc_struct *proc)
{
	assert(list_empty(&(proc->run_link)));
	list_add_before(&(rq->run_list), &(proc->run_link));
	if (proc->time_slice == 0 || proc->time_slice > rq->max_time_slice) {
80001c18:	0046302a 	slt	a2,v0,a2
80001c1c:	54c0fff7 	bnezl	a2,80001bfc <RR_enqueue+0x38>
80001c20:	aca200a8 	sw	v0,168(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:21
		proc->time_slice = rq->max_time_slice;
	}
	proc->rq = rq;
	rq->proc_num++;
80001c24:	8c820008 	lw	v0,8(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:22
}
80001c28:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:20
	assert(list_empty(&(proc->run_link)));
	list_add_before(&(rq->run_list), &(proc->run_link));
	if (proc->time_slice == 0 || proc->time_slice > rq->max_time_slice) {
		proc->time_slice = rq->max_time_slice;
	}
	proc->rq = rq;
80001c2c:	aca4009c 	sw	a0,156(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:21
	rq->proc_num++;
80001c30:	24420001 	addiu	v0,v0,1
80001c34:	ac820008 	sw	v0,8(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:22
}
80001c38:	03e00008 	jr	ra
80001c3c:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched_RR.c:15
	rq->proc_num = 0;
}

static void RR_enqueue(struct run_queue *rq, struct proc_struct *proc)
{
	assert(list_empty(&(proc->run_link)));
80001c40:	3c048002 	lui	a0,0x8002
80001c44:	3c068002 	lui	a2,0x8002
80001c48:	3c078002 	lui	a3,0x8002
80001c4c:	24840f44 	addiu	a0,a0,3908
80001c50:	2405000f 	li	a1,15
80001c54:	24c60e28 	addiu	a2,a2,3624
80001c58:	0c006b0b 	jal	8001ac2c <__panic>
80001c5c:	24e70f84 	addiu	a3,a3,3972

80001c60 <ucore_gettimeofday>:
ucore_gettimeofday():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:12
int ucore_gettimeofday(struct linux_timeval __user * tv,
		       struct linux_timezone __user * tz)
{
	struct mm_struct *mm = pls_read(current)->mm;
	struct linux_timeval ktv;
	ktv.tv_sec = ticks / 100;
80001c60:	3c028015 	lui	v0,0x8015
80001c64:	8c4277ac 	lw	v0,30636(v0)
80001c68:	3c0351eb 	lui	v1,0x51eb
80001c6c:	3463851f 	ori	v1,v1,0x851f
80001c70:	00430018 	mult	v0,v1
80001c74:	000237c3 	sra	a2,v0,0x1f
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:9
#include <string.h>

extern int ticks;
int ucore_gettimeofday(struct linux_timeval __user * tv,
		       struct linux_timezone __user * tz)
{
80001c78:	27bdffd0 	addiu	sp,sp,-48
80001c7c:	afb10024 	sw	s1,36(sp)
80001c80:	00a08821 	move	s1,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:10
	struct mm_struct *mm = pls_read(current)->mm;
80001c84:	3c078015 	lui	a3,0x8015
80001c88:	8ce777a4 	lw	a3,30628(a3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:9
#include <string.h>

extern int ticks;
int ucore_gettimeofday(struct linux_timeval __user * tv,
		       struct linux_timezone __user * tz)
{
80001c8c:	afb00020 	sw	s0,32(sp)
80001c90:	afb20028 	sw	s2,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:10
	struct mm_struct *mm = pls_read(current)->mm;
80001c94:	8cf00020 	lw	s0,32(a3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:9
#include <string.h>

extern int ticks;
int ucore_gettimeofday(struct linux_timeval __user * tv,
		       struct linux_timezone __user * tz)
{
80001c98:	00809021 	move	s2,a0
80001c9c:	afbf002c 	sw	ra,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:14
	struct mm_struct *mm = pls_read(current)->mm;
	struct linux_timeval ktv;
	ktv.tv_sec = ticks / 100;
	ktv.tv_usec = (ticks % 100) * 10000;
	lock_mm(mm);
80001ca0:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:12
int ucore_gettimeofday(struct linux_timeval __user * tv,
		       struct linux_timezone __user * tz)
{
	struct mm_struct *mm = pls_read(current)->mm;
	struct linux_timeval ktv;
	ktv.tv_sec = ticks / 100;
80001ca4:	00001810 	mfhi	v1
80001ca8:	00031943 	sra	v1,v1,0x5
80001cac:	00663023 	subu	a2,v1,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:13
	ktv.tv_usec = (ticks % 100) * 10000;
80001cb0:	00062880 	sll	a1,a2,0x2
80001cb4:	00061900 	sll	v1,a2,0x4
80001cb8:	00a31821 	addu	v1,a1,v1
80001cbc:	00032880 	sll	a1,v1,0x2
80001cc0:	00651821 	addu	v1,v1,a1
80001cc4:	00431023 	subu	v0,v0,v1
80001cc8:	000229c0 	sll	a1,v0,0x7
80001ccc:	00021880 	sll	v1,v0,0x2
80001cd0:	00a31823 	subu	v1,a1,v1
80001cd4:	00621021 	addu	v0,v1,v0
80001cd8:	00021880 	sll	v1,v0,0x2
80001cdc:	00431021 	addu	v0,v0,v1
80001ce0:	00021100 	sll	v0,v0,0x4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:12
int ucore_gettimeofday(struct linux_timeval __user * tv,
		       struct linux_timezone __user * tz)
{
	struct mm_struct *mm = pls_read(current)->mm;
	struct linux_timeval ktv;
	ktv.tv_sec = ticks / 100;
80001ce4:	afa60018 	sw	a2,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:14
	ktv.tv_usec = (ticks % 100) * 10000;
	lock_mm(mm);
80001ce8:	0c004c26 	jal	80013098 <lock_mm>
80001cec:	afa2001c 	sw	v0,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:15
	if (!copy_to_user(mm, tv, &ktv, sizeof(struct linux_timeval))) {
80001cf0:	02002021 	move	a0,s0
80001cf4:	02402821 	move	a1,s2
80001cf8:	27a60018 	addiu	a2,sp,24
80001cfc:	0c007948 	jal	8001e520 <copy_to_user>
80001d00:	24070008 	li	a3,8
80001d04:	1040001a 	beqz	v0,80001d70 <ucore_gettimeofday+0x110>
80001d08:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:19
		unlock_mm(mm);
		return -1;
	}
	unlock_mm(mm);
80001d0c:	0c004c37 	jal	800130dc <unlock_mm>
80001d10:	00009021 	move	s2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:20
	if (tz) {
80001d14:	1220000f 	beqz	s1,80001d54 <ucore_gettimeofday+0xf4>
80001d18:	00002821 	move	a1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:22
		struct linux_timezone ktz;
		memset(&ktz, 0, sizeof(struct linux_timezone));
80001d1c:	24060008 	li	a2,8
80001d20:	0c005c52 	jal	80017148 <memset>
80001d24:	27a40010 	addiu	a0,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:23
		lock_mm(mm);
80001d28:	0c004c26 	jal	80013098 <lock_mm>
80001d2c:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:24
		if (!copy_to_user(mm, tz, &ktz, sizeof(struct linux_timezone))) {
80001d30:	02002021 	move	a0,s0
80001d34:	02202821 	move	a1,s1
80001d38:	27a60010 	addiu	a2,sp,16
80001d3c:	0c007948 	jal	8001e520 <copy_to_user>
80001d40:	24070008 	li	a3,8
80001d44:	1040000a 	beqz	v0,80001d70 <ucore_gettimeofday+0x110>
80001d48:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:28
			unlock_mm(mm);
			return -1;
		}
		unlock_mm(mm);
80001d4c:	0c004c37 	jal	800130dc <unlock_mm>
80001d50:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:31
	}
	return 0;
}
80001d54:	8fbf002c 	lw	ra,44(sp)
80001d58:	02401021 	move	v0,s2
80001d5c:	8fb10024 	lw	s1,36(sp)
80001d60:	8fb20028 	lw	s2,40(sp)
80001d64:	8fb00020 	lw	s0,32(sp)
80001d68:	03e00008 	jr	ra
80001d6c:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:25
	if (tz) {
		struct linux_timezone ktz;
		memset(&ktz, 0, sizeof(struct linux_timezone));
		lock_mm(mm);
		if (!copy_to_user(mm, tz, &ktz, sizeof(struct linux_timezone))) {
			unlock_mm(mm);
80001d70:	0c004c37 	jal	800130dc <unlock_mm>
80001d74:	2412ffff 	li	s2,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:26
			return -1;
80001d78:	08000756 	j	80001d58 <ucore_gettimeofday+0xf8>
80001d7c:	8fbf002c 	lw	ra,44(sp)

80001d80 <do_clock_gettime>:
do_clock_gettime():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:37

int do_clock_gettime(struct linux_timespec __user * time)
{
	struct mm_struct *mm = pls_read(current)->mm;
	struct linux_timespec ktv;
	ktv.tv_sec = ticks / 100;
80001d80:	3c028015 	lui	v0,0x8015
80001d84:	8c4277ac 	lw	v0,30636(v0)
80001d88:	3c0351eb 	lui	v1,0x51eb
80001d8c:	3463851f 	ori	v1,v1,0x851f
80001d90:	00430018 	mult	v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:35
	return 0;
}

int do_clock_gettime(struct linux_timespec __user * time)
{
	struct mm_struct *mm = pls_read(current)->mm;
80001d94:	3c058015 	lui	a1,0x8015
80001d98:	8ca777a4 	lw	a3,30628(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:37
	struct linux_timespec ktv;
	ktv.tv_sec = ticks / 100;
80001d9c:	000237c3 	sra	a2,v0,0x1f
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:34
	}
	return 0;
}

int do_clock_gettime(struct linux_timespec __user * time)
{
80001da0:	27bdffd8 	addiu	sp,sp,-40
80001da4:	afb00020 	sw	s0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:35
	struct mm_struct *mm = pls_read(current)->mm;
80001da8:	8cf00020 	lw	s0,32(a3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:34
	}
	return 0;
}

int do_clock_gettime(struct linux_timespec __user * time)
{
80001dac:	00802821 	move	a1,a0
80001db0:	afbf0024 	sw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:39
	struct mm_struct *mm = pls_read(current)->mm;
	struct linux_timespec ktv;
	ktv.tv_sec = ticks / 100;
	ktv.tv_nsec = (ticks % 100) * 10000000;
	lock_mm(mm);
80001db4:	02002021 	move	a0,s0
80001db8:	afa50018 	sw	a1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:37

int do_clock_gettime(struct linux_timespec __user * time)
{
	struct mm_struct *mm = pls_read(current)->mm;
	struct linux_timespec ktv;
	ktv.tv_sec = ticks / 100;
80001dbc:	00001810 	mfhi	v1
80001dc0:	00031943 	sra	v1,v1,0x5
80001dc4:	00661823 	subu	v1,v1,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:38
	ktv.tv_nsec = (ticks % 100) * 10000000;
80001dc8:	00033880 	sll	a3,v1,0x2
80001dcc:	00033100 	sll	a2,v1,0x4
80001dd0:	00e63021 	addu	a2,a3,a2
80001dd4:	00063880 	sll	a3,a2,0x2
80001dd8:	00c73021 	addu	a2,a2,a3
80001ddc:	00461023 	subu	v0,v0,a2
80001de0:	00023a00 	sll	a3,v0,0x8
80001de4:	000230c0 	sll	a2,v0,0x3
80001de8:	00e63023 	subu	a2,a3,a2
80001dec:	00063980 	sll	a3,a2,0x6
80001df0:	00e63023 	subu	a2,a3,a2
80001df4:	00c21021 	addu	v0,a2,v0
80001df8:	00023080 	sll	a2,v0,0x2
80001dfc:	00461021 	addu	v0,v0,a2
80001e00:	000211c0 	sll	v0,v0,0x7
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:37

int do_clock_gettime(struct linux_timespec __user * time)
{
	struct mm_struct *mm = pls_read(current)->mm;
	struct linux_timespec ktv;
	ktv.tv_sec = ticks / 100;
80001e04:	afa30010 	sw	v1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:39
	ktv.tv_nsec = (ticks % 100) * 10000000;
	lock_mm(mm);
80001e08:	0c004c26 	jal	80013098 <lock_mm>
80001e0c:	afa20014 	sw	v0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:40
	if (!copy_to_user(mm, time, &ktv, sizeof(struct linux_timespec))) {
80001e10:	8fa50018 	lw	a1,24(sp)
80001e14:	02002021 	move	a0,s0
80001e18:	27a60010 	addiu	a2,sp,16
80001e1c:	0c007948 	jal	8001e520 <copy_to_user>
80001e20:	24070008 	li	a3,8
80001e24:	10400008 	beqz	v0,80001e48 <do_clock_gettime+0xc8>
80001e28:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:44
		unlock_mm(mm);
		return -1;
	}
	unlock_mm(mm);
80001e2c:	0c004c37 	jal	800130dc <unlock_mm>
80001e30:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:45
	return 0;
80001e34:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:46
}
80001e38:	8fbf0024 	lw	ra,36(sp)
80001e3c:	8fb00020 	lw	s0,32(sp)
80001e40:	03e00008 	jr	ra
80001e44:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:41
	struct linux_timespec ktv;
	ktv.tv_sec = ticks / 100;
	ktv.tv_nsec = (ticks % 100) * 10000000;
	lock_mm(mm);
	if (!copy_to_user(mm, time, &ktv, sizeof(struct linux_timespec))) {
		unlock_mm(mm);
80001e48:	0c004c37 	jal	800130dc <unlock_mm>
80001e4c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/syscall/gettimeofday.c:42
		return -1;
80001e50:	0800078e 	j	80001e38 <do_clock_gettime+0xb8>
80001e54:	2402ffff 	li	v0,-1

80001e58 <dev_lookup>:
dev_lookup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:123
 *
 * However, we have no support for this in the base system.
 */
static int dev_lookup(struct inode *node, char *path, struct inode **node_store)
{
	if (*path != '\0') {
80001e58:	90a30000 	lbu	v1,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:122
 * mode.
 *
 * However, we have no support for this in the base system.
 */
static int dev_lookup(struct inode *node, char *path, struct inode **node_store)
{
80001e5c:	27bdffe0 	addiu	sp,sp,-32
80001e60:	afb00018 	sw	s0,24(sp)
80001e64:	afbf001c 	sw	ra,28(sp)
80001e68:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:123
	if (*path != '\0') {
80001e6c:	14600006 	bnez	v1,80001e88 <dev_lookup+0x30>
80001e70:	2402fffe 	li	v0,-2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:126
		return -E_NOENT;
	}
	vop_ref_inc(node);
80001e74:	0c0010b6 	jal	800042d8 <inode_ref_inc>
80001e78:	afa60010 	sw	a2,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:127
	*node_store = node;
80001e7c:	8fa60010 	lw	a2,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:128
	return 0;
80001e80:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:127
{
	if (*path != '\0') {
		return -E_NOENT;
	}
	vop_ref_inc(node);
	*node_store = node;
80001e84:	acd00000 	sw	s0,0(a2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:129
	return 0;
}
80001e88:	8fbf001c 	lw	ra,28(sp)
80001e8c:	8fb00018 	lw	s0,24(sp)
80001e90:	03e00008 	jr	ra
80001e94:	27bd0020 	addiu	sp,sp,32

80001e98 <dev_tryseek>:
dev_tryseek():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:97
 * Attempt a seek.
 * For block devices, require block alignment.
 * For character devices, prohibit seeking entirely.
 */
static int dev_tryseek(struct inode *node, off_t pos)
{
80001e98:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:98
	struct device *dev = vop_info(node, device);
80001e9c:	10800015 	beqz	a0,80001ef4 <dev_tryseek+0x5c>
80001ea0:	afbf0014 	sw	ra,20(sp)
80001ea4:	8c830038 	lw	v1,56(a0)
80001ea8:	24021234 	li	v0,4660
80001eac:	54620012 	bnel	v1,v0,80001ef8 <dev_tryseek+0x60>
80001eb0:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:99
	if (dev->d_blocks > 0) {
80001eb4:	8c860000 	lw	a2,0(a0)
80001eb8:	10c0000b 	beqz	a2,80001ee8 <dev_tryseek+0x50>
80001ebc:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:100
		if ((pos % dev->d_blocksize) == 0) {
80001ec0:	8c830004 	lw	v1,4(a0)
80001ec4:	00a3001b 	divu	zero,a1,v1
80001ec8:	006001f4 	teq	v1,zero,0x7
80001ecc:	00002010 	mfhi	a0
80001ed0:	14800006 	bnez	a0,80001eec <dev_tryseek+0x54>
80001ed4:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:101
			if (pos >= 0 && pos < dev->d_blocks * dev->d_blocksize) {
80001ed8:	04a00004 	bltz	a1,80001eec <dev_tryseek+0x54>
80001edc:	70661802 	mul	v1,v1,a2
80001ee0:	00a3282b 	sltu	a1,a1,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:106
				return 0;
			}
		}
	}
	return -E_INVAL;
80001ee4:	0005100b 	movn	v0,zero,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:107
}
80001ee8:	8fbf0014 	lw	ra,20(sp)
80001eec:	03e00008 	jr	ra
80001ef0:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:98
 * For block devices, require block alignment.
 * For character devices, prohibit seeking entirely.
 */
static int dev_tryseek(struct inode *node, off_t pos)
{
	struct device *dev = vop_info(node, device);
80001ef4:	3c048002 	lui	a0,0x8002
80001ef8:	3c068002 	lui	a2,0x8002
80001efc:	3c078002 	lui	a3,0x8002
80001f00:	24840fb4 	addiu	a0,a0,4020
80001f04:	24050062 	li	a1,98
80001f08:	24c60e28 	addiu	a2,a2,3624
80001f0c:	0c006b0b 	jal	8001ac2c <__panic>
80001f10:	24e70fbc 	addiu	a3,a3,4028

80001f14 <dev_gettype>:
dev_gettype():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:85
 * Return the type. A device is a "block device" if it has a known
 * length. A device that generates data in a stream is a "character
 * device".
 */
static int dev_gettype(struct inode *node, uint32_t * type_store)
{
80001f14:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:86
	struct device *dev = vop_info(node, device);
80001f18:	1080000d 	beqz	a0,80001f50 <dev_gettype+0x3c>
80001f1c:	afbf0014 	sw	ra,20(sp)
80001f20:	8c830038 	lw	v1,56(a0)
80001f24:	24021234 	li	v0,4660
80001f28:	14620009 	bne	v1,v0,80001f50 <dev_gettype+0x3c>
80001f2c:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:87
	*type_store = (dev->d_blocks > 0) ? S_IFBLK : S_IFCHR;
80001f30:	8c840000 	lw	a0,0(a0)
80001f34:	24026000 	li	v0,24576
80001f38:	24032000 	li	v1,8192
80001f3c:	0064100a 	movz	v0,v1,a0
80001f40:	aca20000 	sw	v0,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:89
	return 0;
}
80001f44:	27bd0018 	addiu	sp,sp,24
80001f48:	03e00008 	jr	ra
80001f4c:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:86
 * length. A device that generates data in a stream is a "character
 * device".
 */
static int dev_gettype(struct inode *node, uint32_t * type_store)
{
	struct device *dev = vop_info(node, device);
80001f50:	3c048002 	lui	a0,0x8002
80001f54:	3c068002 	lui	a2,0x8002
80001f58:	3c078002 	lui	a3,0x8002
80001f5c:	24840fb4 	addiu	a0,a0,4020
80001f60:	24050056 	li	a1,86
80001f64:	24c60e28 	addiu	a2,a2,3624
80001f68:	0c006b0b 	jal	8001ac2c <__panic>
80001f6c:	24e70fbc 	addiu	a3,a3,4028

80001f70 <dev_ioctl>:
dev_ioctl():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:55

/*
 * Called for ioctl(). Just pass through.
 */
static int dev_ioctl(struct inode *node, int op, void *data)
{
80001f70:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:56
	struct device *dev = vop_info(node, device);
80001f74:	10800008 	beqz	a0,80001f98 <dev_ioctl+0x28>
80001f78:	afbf0014 	sw	ra,20(sp)
80001f7c:	8c870038 	lw	a3,56(a0)
80001f80:	24031234 	li	v1,4660
80001f84:	14e30004 	bne	a3,v1,80001f98 <dev_ioctl+0x28>
80001f88:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:57
	return dop_ioctl(dev, op, data);
80001f8c:	8c99002c 	lw	t9,44(a0)
80001f90:	03200008 	jr	t9
80001f94:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:56
/*
 * Called for ioctl(). Just pass through.
 */
static int dev_ioctl(struct inode *node, int op, void *data)
{
	struct device *dev = vop_info(node, device);
80001f98:	3c048002 	lui	a0,0x8002
80001f9c:	3c068002 	lui	a2,0x8002
80001fa0:	3c078002 	lui	a3,0x8002
80001fa4:	24840fb4 	addiu	a0,a0,4020
80001fa8:	24050038 	li	a1,56
80001fac:	24c60e28 	addiu	a2,a2,3624
80001fb0:	0c006b0b 	jal	8001ac2c <__panic>
80001fb4:	24e70fbc 	addiu	a3,a3,4028

80001fb8 <dev_write>:
dev_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:46

/*
 * Called for write. Hand off to dop_io.
 */
static int dev_write(struct inode *node, struct iobuf *iob)
{
80001fb8:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:47
	struct device *dev = vop_info(node, device);
80001fbc:	10800009 	beqz	a0,80001fe4 <dev_write+0x2c>
80001fc0:	afbf0014 	sw	ra,20(sp)
80001fc4:	8c860038 	lw	a2,56(a0)
80001fc8:	24031234 	li	v1,4660
80001fcc:	14c30005 	bne	a2,v1,80001fe4 <dev_write+0x2c>
80001fd0:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:48
	return dop_io(dev, iob, 1);
80001fd4:	8c990028 	lw	t9,40(a0)
80001fd8:	24060001 	li	a2,1
80001fdc:	03200008 	jr	t9
80001fe0:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:47
/*
 * Called for write. Hand off to dop_io.
 */
static int dev_write(struct inode *node, struct iobuf *iob)
{
	struct device *dev = vop_info(node, device);
80001fe4:	3c048002 	lui	a0,0x8002
80001fe8:	3c068002 	lui	a2,0x8002
80001fec:	3c078002 	lui	a3,0x8002
80001ff0:	24840fb4 	addiu	a0,a0,4020
80001ff4:	2405002f 	li	a1,47
80001ff8:	24c60e28 	addiu	a2,a2,3624
80001ffc:	0c006b0b 	jal	8001ac2c <__panic>
80002000:	24e70fbc 	addiu	a3,a3,4028

80002004 <dev_read>:
dev_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:37

/*
 * Called for read. Hand off to dop_io.
 */
static int dev_read(struct inode *node, struct iobuf *iob)
{
80002004:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:38
	struct device *dev = vop_info(node, device);
80002008:	10800009 	beqz	a0,80002030 <dev_read+0x2c>
8000200c:	afbf0014 	sw	ra,20(sp)
80002010:	8c860038 	lw	a2,56(a0)
80002014:	24031234 	li	v1,4660
80002018:	14c30005 	bne	a2,v1,80002030 <dev_read+0x2c>
8000201c:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:39
	return dop_io(dev, iob, 0);
80002020:	8c990028 	lw	t9,40(a0)
80002024:	00003021 	move	a2,zero
80002028:	03200008 	jr	t9
8000202c:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:38
/*
 * Called for read. Hand off to dop_io.
 */
static int dev_read(struct inode *node, struct iobuf *iob)
{
	struct device *dev = vop_info(node, device);
80002030:	3c048002 	lui	a0,0x8002
80002034:	3c068002 	lui	a2,0x8002
80002038:	3c078002 	lui	a3,0x8002
8000203c:	24840fb4 	addiu	a0,a0,4020
80002040:	24050026 	li	a1,38
80002044:	24c60e28 	addiu	a2,a2,3624
80002048:	0c006b0b 	jal	8001ac2c <__panic>
8000204c:	24e70fbc 	addiu	a3,a3,4028

80002050 <dev_close>:
dev_close():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:28
/*
 * Called on the last close().
 * Just pass through.
 */
static int dev_close(struct inode *node)
{
80002050:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:29
	struct device *dev = vop_info(node, device);
80002054:	10800008 	beqz	a0,80002078 <dev_close+0x28>
80002058:	afbf0014 	sw	ra,20(sp)
8000205c:	8c850038 	lw	a1,56(a0)
80002060:	24031234 	li	v1,4660
80002064:	14a30004 	bne	a1,v1,80002078 <dev_close+0x28>
80002068:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:30
	return dop_close(dev);
8000206c:	8c990024 	lw	t9,36(a0)
80002070:	03200008 	jr	t9
80002074:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:29
 * Called on the last close().
 * Just pass through.
 */
static int dev_close(struct inode *node)
{
	struct device *dev = vop_info(node, device);
80002078:	3c048002 	lui	a0,0x8002
8000207c:	3c068002 	lui	a2,0x8002
80002080:	3c078002 	lui	a3,0x8002
80002084:	24840fb4 	addiu	a0,a0,4020
80002088:	2405001d 	li	a1,29
8000208c:	24c60e28 	addiu	a2,a2,3624
80002090:	0c006b0b 	jal	8001ac2c <__panic>
80002094:	24e70fbc 	addiu	a3,a3,4028

80002098 <dev_open>:
dev_open():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:15
 * Called for each open().
 *
 * We reject O_CREAT | O_TRUNC | O_EXCL | O_APPEND
 */
static int dev_open(struct inode *node, uint32_t open_flags)
{
80002098:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:16
	if (open_flags & (O_CREAT | O_TRUNC | O_EXCL | O_APPEND)) {
8000209c:	30a306c0 	andi	v1,a1,0x6c0
800020a0:	14600009 	bnez	v1,800020c8 <dev_open+0x30>
800020a4:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:19
		return -E_INVAL;
	}
	struct device *dev = vop_info(node, device);
800020a8:	1080000b 	beqz	a0,800020d8 <dev_open+0x40>
800020ac:	24031234 	li	v1,4660
800020b0:	8c860038 	lw	a2,56(a0)
800020b4:	14c30008 	bne	a2,v1,800020d8 <dev_open+0x40>
800020b8:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:20
	return dop_open(dev, open_flags);
800020bc:	8c990020 	lw	t9,32(a0)
800020c0:	03200008 	jr	t9
800020c4:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:21
}
800020c8:	8fbf0014 	lw	ra,20(sp)
800020cc:	2402ffea 	li	v0,-22
800020d0:	03e00008 	jr	ra
800020d4:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:19
static int dev_open(struct inode *node, uint32_t open_flags)
{
	if (open_flags & (O_CREAT | O_TRUNC | O_EXCL | O_APPEND)) {
		return -E_INVAL;
	}
	struct device *dev = vop_info(node, device);
800020d8:	3c048002 	lui	a0,0x8002
800020dc:	3c068002 	lui	a2,0x8002
800020e0:	3c078002 	lui	a3,0x8002
800020e4:	24840fb4 	addiu	a0,a0,4020
800020e8:	24050013 	li	a1,19
800020ec:	24c60e28 	addiu	a2,a2,3624
800020f0:	0c006b0b 	jal	8001ac2c <__panic>
800020f4:	24e70fbc 	addiu	a3,a3,4028

800020f8 <dev_fstat>:
dev_fstat():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:66
 * Called for fstat().
 * Set the type and the size.
 * The link count for a device is always 1.
 */
static int dev_fstat(struct inode *node, struct stat *stat)
{
800020f8:	27bdffe0 	addiu	sp,sp,-32
800020fc:	afb10018 	sw	s1,24(sp)
80002100:	00a08821 	move	s1,a1
80002104:	afb00014 	sw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:68
	int ret;
	memset(stat, 0, sizeof(struct stat));
80002108:	00002821 	move	a1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:66
 * Called for fstat().
 * Set the type and the size.
 * The link count for a device is always 1.
 */
static int dev_fstat(struct inode *node, struct stat *stat)
{
8000210c:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:68
	int ret;
	memset(stat, 0, sizeof(struct stat));
80002110:	24060010 	li	a2,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:66
 * Called for fstat().
 * Set the type and the size.
 * The link count for a device is always 1.
 */
static int dev_fstat(struct inode *node, struct stat *stat)
{
80002114:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:68
	int ret;
	memset(stat, 0, sizeof(struct stat));
80002118:	0c005c52 	jal	80017148 <memset>
8000211c:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:69
	if ((ret = vop_gettype(node, &(stat->st_mode))) != 0) {
80002120:	1200001f 	beqz	s0,800021a0 <dev_fstat+0xa8>
80002124:	3c048002 	lui	a0,0x8002
80002128:	8e020048 	lw	v0,72(s0)
8000212c:	1040001d 	beqz	v0,800021a4 <dev_fstat+0xac>
80002130:	3c068002 	lui	a2,0x8002
80002134:	8c420040 	lw	v0,64(v0)
80002138:	10400019 	beqz	v0,800021a0 <dev_fstat+0xa8>
8000213c:	3c058002 	lui	a1,0x8002
80002140:	02002021 	move	a0,s0
80002144:	0c0010f3 	jal	800043cc <inode_check>
80002148:	24a51040 	addiu	a1,a1,4160
8000214c:	8e020048 	lw	v0,72(s0)
80002150:	02002021 	move	a0,s0
80002154:	8c420040 	lw	v0,64(v0)
80002158:	0040f809 	jalr	v0
8000215c:	02202821 	move	a1,s1
80002160:	1440000a 	bnez	v0,8000218c <dev_fstat+0x94>
80002164:	24031234 	li	v1,4660
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:72
		return ret;
	}
	struct device *dev = vop_info(node, device);
80002168:	8e040038 	lw	a0,56(s0)
8000216c:	14830013 	bne	a0,v1,800021bc <dev_fstat+0xc4>
80002170:	24050001 	li	a1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:74
	stat->st_nlinks = 1;
	stat->st_blocks = dev->d_blocks;
80002174:	8e030000 	lw	v1,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:75
	stat->st_size = stat->st_blocks * dev->d_blocksize;
80002178:	8e040004 	lw	a0,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:73
	memset(stat, 0, sizeof(struct stat));
	if ((ret = vop_gettype(node, &(stat->st_mode))) != 0) {
		return ret;
	}
	struct device *dev = vop_info(node, device);
	stat->st_nlinks = 1;
8000217c:	ae250004 	sw	a1,4(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:75
	stat->st_blocks = dev->d_blocks;
	stat->st_size = stat->st_blocks * dev->d_blocksize;
80002180:	70832002 	mul	a0,a0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:74
	if ((ret = vop_gettype(node, &(stat->st_mode))) != 0) {
		return ret;
	}
	struct device *dev = vop_info(node, device);
	stat->st_nlinks = 1;
	stat->st_blocks = dev->d_blocks;
80002184:	ae230008 	sw	v1,8(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:75
	stat->st_size = stat->st_blocks * dev->d_blocksize;
80002188:	ae24000c 	sw	a0,12(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:77
	return 0;
}
8000218c:	8fbf001c 	lw	ra,28(sp)
80002190:	8fb10018 	lw	s1,24(sp)
80002194:	8fb00014 	lw	s0,20(sp)
80002198:	03e00008 	jr	ra
8000219c:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:69
 */
static int dev_fstat(struct inode *node, struct stat *stat)
{
	int ret;
	memset(stat, 0, sizeof(struct stat));
	if ((ret = vop_gettype(node, &(stat->st_mode))) != 0) {
800021a0:	3c068002 	lui	a2,0x8002
800021a4:	3c078002 	lui	a3,0x8002
800021a8:	24840fb4 	addiu	a0,a0,4020
800021ac:	24050045 	li	a1,69
800021b0:	24c60e28 	addiu	a2,a2,3624
800021b4:	0c006b0b 	jal	8001ac2c <__panic>
800021b8:	24e70ff0 	addiu	a3,a3,4080
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:72
		return ret;
	}
	struct device *dev = vop_info(node, device);
800021bc:	3c048002 	lui	a0,0x8002
800021c0:	3c068002 	lui	a2,0x8002
800021c4:	3c078002 	lui	a3,0x8002
800021c8:	24840fb4 	addiu	a0,a0,4020
800021cc:	24050048 	li	a1,72
800021d0:	24c60e28 	addiu	a2,a2,3624
800021d4:	0c006b0b 	jal	8001ac2c <__panic>
800021d8:	24e70fbc 	addiu	a3,a3,4028

800021dc <dev_init>:
dev_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:167
        extern void dev_init_##x(void);                 \
        dev_init_##x();                                 \
    } while (0)

void dev_init(void)
{
800021dc:	27bdffe8 	addiu	sp,sp,-24
800021e0:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:168
	init_device(null);
800021e4:	0c0009de 	jal	80002778 <dev_init_null>
800021e8:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:169
	init_device(stdin);
800021ec:	0c000ad2 	jal	80002b48 <dev_init_stdin>
800021f0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:170
	init_device(stdout);
800021f4:	0c000b34 	jal	80002cd0 <dev_init_stdout>
800021f8:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:171
	init_device(disk0);
800021fc:	0c000939 	jal	800024e4 <dev_init_disk0>
80002200:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:174
	/* for Nand flash */
	init_device(disk1);
}
80002204:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:173
	init_device(null);
	init_device(stdin);
	init_device(stdout);
	init_device(disk0);
	/* for Nand flash */
	init_device(disk1);
80002208:	08000998 	j	80002660 <dev_init_disk1>
8000220c:	27bd0018 	addiu	sp,sp,24

80002210 <dev_create_inode>:
dev_create_inode():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:180

/*
 * Function to create a inode for a VFS device.
 */
struct inode *dev_create_inode(void)
{
80002210:	27bdffe0 	addiu	sp,sp,-32
80002214:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:182
	struct inode *node;
	if ((node = alloc_inode(device)) != NULL) {
80002218:	0c001091 	jal	80004244 <__alloc_inode>
8000221c:	24041234 	li	a0,4660
80002220:	10400007 	beqz	v0,80002240 <dev_create_inode+0x30>
80002224:	3c058002 	lui	a1,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:183
		vop_init(node, &dev_node_ops, NULL);
80002228:	00402021 	move	a0,v0
8000222c:	24a5fe00 	addiu	a1,a1,-512
80002230:	00003021 	move	a2,zero
80002234:	0c0010d2 	jal	80004348 <inode_init>
80002238:	afa20010 	sw	v0,16(sp)
8000223c:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev.c:186
	}
	return node;
}
80002240:	8fbf001c 	lw	ra,28(sp)
80002244:	03e00008 	jr	ra
80002248:	27bd0020 	addiu	sp,sp,32

8000224c <disk0_open>:
disk0_open():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:33
}

static int disk0_open(struct device *dev, uint32_t open_flags)
{
	return 0;
}
8000224c:	03e00008 	jr	ra
80002250:	00001021 	move	v0,zero

80002254 <disk0_close>:
disk0_close():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:38

static int disk0_close(struct device *dev)
{
	return 0;
}
80002254:	03e00008 	jr	ra
80002258:	00001021 	move	v0,zero

8000225c <disk0_ioctl>:
disk0_ioctl():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:115
}

static int disk0_ioctl(struct device *dev, int op, void *data)
{
	return -E_UNIMP;
}
8000225c:	03e00008 	jr	ra
80002260:	2402ffdd 	li	v0,-35

80002264 <disk0_io>:
disk0_io():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:67
		     blkno, sectno, nblks, nsecs, ret);
	}
}

static int disk0_io(struct device *dev, struct iobuf *iob, bool write)
{
80002264:	27bdffb0 	addiu	sp,sp,-80
80002268:	afb00028 	sw	s0,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:68
	off_t offset = iob->io_offset;
8000226c:	8ca20004 	lw	v0,4(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:69
	size_t resid = iob->io_resid;
80002270:	8cb0000c 	lw	s0,12(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:67
		     blkno, sectno, nblks, nsecs, ret);
	}
}

static int disk0_io(struct device *dev, struct iobuf *iob, bool write)
{
80002274:	afb70044 	sw	s7,68(sp)
80002278:	afb60040 	sw	s6,64(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:66
		    ("disk0: write blkno = %d (sectno = %d), nblks = %d (nsecs = %d): 0x%08x.\n",
		     blkno, sectno, nblks, nsecs, ret);
	}
}

static int disk0_io(struct device *dev, struct iobuf *iob, bool write)
8000227c:	00501825 	or	v1,v0,s0
80002280:	30630fff 	andi	v1,v1,0xfff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:67
{
80002284:	afbf004c 	sw	ra,76(sp)
80002288:	afbe0048 	sw	s8,72(sp)
8000228c:	afb5003c 	sw	s5,60(sp)
80002290:	afb40038 	sw	s4,56(sp)
80002294:	afb30034 	sw	s3,52(sp)
80002298:	afb20030 	sw	s2,48(sp)
8000229c:	afb1002c 	sw	s1,44(sp)
800022a0:	00a0b021 	move	s6,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:74
	size_t resid = iob->io_resid;
	uint32_t blkno = offset / DISK0_BLKSIZE;
	uint32_t nblks = resid / DISK0_BLKSIZE;

	/* don't allow I/O that isn't block-aligned */
	if ((offset % DISK0_BLKSIZE) != 0 || (resid % DISK0_BLKSIZE) != 0) {
800022a4:	14600068 	bnez	v1,80002448 <disk0_io+0x1e4>
800022a8:	00c0b821 	move	s7,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:70

static int disk0_io(struct device *dev, struct iobuf *iob, bool write)
{
	off_t offset = iob->io_offset;
	size_t resid = iob->io_resid;
	uint32_t blkno = offset / DISK0_BLKSIZE;
800022ac:	24430fff 	addiu	v1,v0,4095
800022b0:	28510000 	slti	s1,v0,0
800022b4:	0071100b 	movn	v0,v1,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:79
	if ((offset % DISK0_BLKSIZE) != 0 || (resid % DISK0_BLKSIZE) != 0) {
		return -E_INVAL;
	}

	/* don't allow I/O past the end of disk0 */
	if (blkno + nblks > dev->d_blocks) {
800022b8:	8c840000 	lw	a0,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:70

static int disk0_io(struct device *dev, struct iobuf *iob, bool write)
{
	off_t offset = iob->io_offset;
	size_t resid = iob->io_resid;
	uint32_t blkno = offset / DISK0_BLKSIZE;
800022bc:	00028b03 	sra	s1,v0,0xc
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:71
	uint32_t nblks = resid / DISK0_BLKSIZE;
800022c0:	00101b02 	srl	v1,s0,0xc
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:79
	if ((offset % DISK0_BLKSIZE) != 0 || (resid % DISK0_BLKSIZE) != 0) {
		return -E_INVAL;
	}

	/* don't allow I/O past the end of disk0 */
	if (blkno + nblks > dev->d_blocks) {
800022c4:	02231021 	addu	v0,s1,v1
800022c8:	0082102b 	sltu	v0,a0,v0
800022cc:	54400003 	bnezl	v0,800022dc <disk0_io+0x78>
800022d0:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:84
		return -E_INVAL;
	}

	/* read/write nothing ? */
	if (nblks == 0) {
800022d4:	5460000d 	bnezl	v1,8000230c <disk0_io+0xa8>
800022d8:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:110
		}
		resid -= copied, blkno += nblks;
	}
	unlock_disk0();
	return 0;
}
800022dc:	8fbf004c 	lw	ra,76(sp)
800022e0:	8fbe0048 	lw	s8,72(sp)
800022e4:	8fb70044 	lw	s7,68(sp)
800022e8:	8fb60040 	lw	s6,64(sp)
800022ec:	8fb5003c 	lw	s5,60(sp)
800022f0:	8fb40038 	lw	s4,56(sp)
800022f4:	8fb30034 	lw	s3,52(sp)
800022f8:	8fb20030 	lw	s2,48(sp)
800022fc:	8fb1002c 	lw	s1,44(sp)
80002300:	8fb00028 	lw	s0,40(sp)
80002304:	03e00008 	jr	ra
80002308:	27bd0050 	addiu	sp,sp,80
lock_disk0():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:22
static char *disk0_buffer;
static semaphore_t disk0_sem;

static void lock_disk0(void)
{
	down(&(disk0_sem));
8000230c:	0c00671f 	jal	80019c7c <down>
80002310:	244434c0 	addiu	a0,v0,13504
disk0_io():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:89
	if (nblks == 0) {
		return 0;
	}

	lock_disk0();
	while (resid != 0) {
80002314:	1200001f 	beqz	s0,80002394 <disk0_io+0x130>
80002318:	3c1e8015 	lui	s8,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:91
		size_t copied, alen = DISK0_BUFSIZE;
		if (write) {
8000231c:	16e00030 	bnez	s7,800023e0 <disk0_io+0x17c>
80002320:	2e024000 	sltiu	v0,s0,16384
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:98
			assert(copied != 0 && copied <= resid
			       && copied % DISK0_BLKSIZE == 0);
			nblks = copied / DISK0_BLKSIZE;
			disk0_write_blks_nolock(blkno, nblks);
		} else {
			if (alen > resid) {
80002324:	1040002b 	beqz	v0,800023d4 <disk0_io+0x170>
80002328:	24150020 	li	s5,32
8000232c:	00109b02 	srl	s3,s0,0xc
80002330:	0013a8c0 	sll	s5,s3,0x3
80002334:	02009021 	move	s2,s0
disk0_read_blks_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:45
static void disk0_read_blks_nolock(uint32_t blkno, uint32_t nblks)
{
	int ret;
	uint32_t sectno = blkno * DISK0_BLK_NSECT, nsecs =
	    nblks * DISK0_BLK_NSECT;
	if ((ret =
80002338:	8fc634d4 	lw	a2,13524(s8)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:43
}

static void disk0_read_blks_nolock(uint32_t blkno, uint32_t nblks)
{
	int ret;
	uint32_t sectno = blkno * DISK0_BLK_NSECT, nsecs =
8000233c:	0011a0c0 	sll	s4,s1,0x3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:45
	    nblks * DISK0_BLK_NSECT;
	if ((ret =
80002340:	24040002 	li	a0,2
80002344:	02802821 	move	a1,s4
80002348:	0c006cdc 	jal	8001b370 <ide_read_secs>
8000234c:	02a03821 	move	a3,s5
80002350:	1440004f 	bnez	v0,80002490 <disk0_io+0x22c>
80002354:	02c02021 	move	a0,s6
disk0_io():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:103
			if (alen > resid) {
				alen = resid;
			}
			nblks = alen / DISK0_BLKSIZE;
			disk0_read_blks_nolock(blkno, nblks);
			iobuf_move(iob, disk0_buffer, alen, 1, &copied);
80002358:	3c028015 	lui	v0,0x8015
8000235c:	8c4534d4 	lw	a1,13524(v0)
80002360:	27a20020 	addiu	v0,sp,32
80002364:	02403021 	move	a2,s2
80002368:	24070001 	li	a3,1
8000236c:	0c003388 	jal	8000ce20 <iobuf_move>
80002370:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:104
			assert(copied == alen && copied % DISK0_BLKSIZE == 0);
80002374:	8fa20020 	lw	v0,32(sp)
80002378:	14520035 	bne	v0,s2,80002450 <disk0_io+0x1ec>
8000237c:	32520fff 	andi	s2,s2,0xfff
80002380:	16400034 	bnez	s2,80002454 <disk0_io+0x1f0>
80002384:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:106
		}
		resid -= copied, blkno += nblks;
80002388:	02028023 	subu	s0,s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:89
	if (nblks == 0) {
		return 0;
	}

	lock_disk0();
	while (resid != 0) {
8000238c:	1600ffe3 	bnez	s0,8000231c <disk0_io+0xb8>
80002390:	02338821 	addu	s1,s1,s3
unlock_disk0():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:27
	down(&(disk0_sem));
}

static void unlock_disk0(void)
{
	up(&(disk0_sem));
80002394:	3c028015 	lui	v0,0x8015
80002398:	0c00671d 	jal	80019c74 <up>
8000239c:	244434c0 	addiu	a0,v0,13504
disk0_io():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:110
		}
		resid -= copied, blkno += nblks;
	}
	unlock_disk0();
	return 0;
}
800023a0:	8fbf004c 	lw	ra,76(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:109
			assert(copied == alen && copied % DISK0_BLKSIZE == 0);
		}
		resid -= copied, blkno += nblks;
	}
	unlock_disk0();
	return 0;
800023a4:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:110
}
800023a8:	8fbe0048 	lw	s8,72(sp)
800023ac:	8fb70044 	lw	s7,68(sp)
800023b0:	8fb60040 	lw	s6,64(sp)
800023b4:	8fb5003c 	lw	s5,60(sp)
800023b8:	8fb40038 	lw	s4,56(sp)
800023bc:	8fb30034 	lw	s3,52(sp)
800023c0:	8fb20030 	lw	s2,48(sp)
800023c4:	8fb1002c 	lw	s1,44(sp)
800023c8:	8fb00028 	lw	s0,40(sp)
800023cc:	03e00008 	jr	ra
800023d0:	27bd0050 	addiu	sp,sp,80
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:98
			assert(copied != 0 && copied <= resid
			       && copied % DISK0_BLKSIZE == 0);
			nblks = copied / DISK0_BLKSIZE;
			disk0_write_blks_nolock(blkno, nblks);
		} else {
			if (alen > resid) {
800023d4:	24130004 	li	s3,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:90
		return 0;
	}

	lock_disk0();
	while (resid != 0) {
		size_t copied, alen = DISK0_BUFSIZE;
800023d8:	080008ce 	j	80002338 <disk0_io+0xd4>
800023dc:	24124000 	li	s2,16384
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:92
		if (write) {
			iobuf_move(iob, disk0_buffer, alen, 0, &copied);
800023e0:	8fc534d4 	lw	a1,13524(s8)
800023e4:	27a20020 	addiu	v0,sp,32
800023e8:	02c02021 	move	a0,s6
800023ec:	24064000 	li	a2,16384
800023f0:	00003821 	move	a3,zero
800023f4:	0c003388 	jal	8000ce20 <iobuf_move>
800023f8:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:93
			assert(copied != 0 && copied <= resid
800023fc:	8fb30020 	lw	s3,32(sp)
80002400:	1260001b 	beqz	s3,80002470 <disk0_io+0x20c>
80002404:	0213102b 	sltu	v0,s0,s3
80002408:	14400019 	bnez	v0,80002470 <disk0_io+0x20c>
8000240c:	32620fff 	andi	v0,s3,0xfff
80002410:	14400017 	bnez	v0,80002470 <disk0_io+0x20c>
80002414:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:95
			       && copied % DISK0_BLKSIZE == 0);
			nblks = copied / DISK0_BLKSIZE;
80002418:	00139b02 	srl	s3,s3,0xc
disk0_write_blks_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:58
static void disk0_write_blks_nolock(uint32_t blkno, uint32_t nblks)
{
	int ret;
	uint32_t sectno = blkno * DISK0_BLK_NSECT, nsecs =
	    nblks * DISK0_BLK_NSECT;
	if ((ret =
8000241c:	8c4634d4 	lw	a2,13524(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:56
}

static void disk0_write_blks_nolock(uint32_t blkno, uint32_t nblks)
{
	int ret;
	uint32_t sectno = blkno * DISK0_BLK_NSECT, nsecs =
80002420:	0011a0c0 	sll	s4,s1,0x3
80002424:	001390c0 	sll	s2,s3,0x3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:58
	    nblks * DISK0_BLK_NSECT;
	if ((ret =
80002428:	24040002 	li	a0,2
8000242c:	02802821 	move	a1,s4
80002430:	0c006cee 	jal	8001b3b8 <ide_write_secs>
80002434:	02403821 	move	a3,s2
80002438:	14400020 	bnez	v0,800024bc <disk0_io+0x258>
8000243c:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:104
				alen = resid;
			}
			nblks = alen / DISK0_BLKSIZE;
			disk0_read_blks_nolock(blkno, nblks);
			iobuf_move(iob, disk0_buffer, alen, 1, &copied);
			assert(copied == alen && copied % DISK0_BLKSIZE == 0);
80002440:	080008e2 	j	80002388 <disk0_io+0x124>
80002444:	8fa20020 	lw	v0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:80
		return -E_INVAL;
	}

	/* don't allow I/O past the end of disk0 */
	if (blkno + nblks > dev->d_blocks) {
		return -E_INVAL;
80002448:	080008b7 	j	800022dc <disk0_io+0x78>
8000244c:	2402ffea 	li	v0,-22
disk0_io():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:104
				alen = resid;
			}
			nblks = alen / DISK0_BLKSIZE;
			disk0_read_blks_nolock(blkno, nblks);
			iobuf_move(iob, disk0_buffer, alen, 1, &copied);
			assert(copied == alen && copied % DISK0_BLKSIZE == 0);
80002450:	3c048002 	lui	a0,0x8002
80002454:	3c068002 	lui	a2,0x8002
80002458:	3c078002 	lui	a3,0x8002
8000245c:	24841048 	addiu	a0,a0,4168
80002460:	24050068 	li	a1,104
80002464:	24c60e28 	addiu	a2,a2,3624
80002468:	0c006b0b 	jal	8001ac2c <__panic>
8000246c:	24e71128 	addiu	a3,a3,4392
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:93
	lock_disk0();
	while (resid != 0) {
		size_t copied, alen = DISK0_BUFSIZE;
		if (write) {
			iobuf_move(iob, disk0_buffer, alen, 0, &copied);
			assert(copied != 0 && copied <= resid
80002470:	3c048002 	lui	a0,0x8002
80002474:	3c068002 	lui	a2,0x8002
80002478:	3c078002 	lui	a3,0x8002
8000247c:	24841048 	addiu	a0,a0,4168
80002480:	2405005e 	li	a1,94
80002484:	24c60e28 	addiu	a2,a2,3624
80002488:	0c006b0b 	jal	8001ac2c <__panic>
8000248c:	24e71054 	addiu	a3,a3,4180
disk0_read_blks_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:47
	int ret;
	uint32_t sectno = blkno * DISK0_BLK_NSECT, nsecs =
	    nblks * DISK0_BLK_NSECT;
	if ((ret =
	     ide_read_secs(DISK0_DEV_NO, sectno, disk0_buffer, nsecs)) != 0) {
		panic
80002490:	3c048002 	lui	a0,0x8002
80002494:	3c068002 	lui	a2,0x8002
80002498:	24841048 	addiu	a0,a0,4168
8000249c:	24050031 	li	a1,49
800024a0:	24c610e0 	addiu	a2,a2,4320
800024a4:	02203821 	move	a3,s1
800024a8:	afb40010 	sw	s4,16(sp)
800024ac:	afb30014 	sw	s3,20(sp)
800024b0:	afb50018 	sw	s5,24(sp)
800024b4:	0c006b0b 	jal	8001ac2c <__panic>
800024b8:	afa2001c 	sw	v0,28(sp)
disk0_write_blks_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:60
	int ret;
	uint32_t sectno = blkno * DISK0_BLK_NSECT, nsecs =
	    nblks * DISK0_BLK_NSECT;
	if ((ret =
	     ide_write_secs(DISK0_DEV_NO, sectno, disk0_buffer, nsecs)) != 0) {
		panic
800024bc:	3c068002 	lui	a2,0x8002
800024c0:	24841048 	addiu	a0,a0,4168
800024c4:	2405003e 	li	a1,62
800024c8:	24c61094 	addiu	a2,a2,4244
800024cc:	02203821 	move	a3,s1
800024d0:	afb40010 	sw	s4,16(sp)
800024d4:	afb30014 	sw	s3,20(sp)
800024d8:	afb20018 	sw	s2,24(sp)
800024dc:	0c006b0b 	jal	8001ac2c <__panic>
800024e0:	afa2001c 	sw	v0,28(sp)

800024e4 <dev_init_disk0>:
dev_init_disk0():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:139
		panic("disk0 alloc buffer failed.\n");
	}
}

void dev_init_disk0(void)
{
800024e4:	27bdffe8 	addiu	sp,sp,-24
800024e8:	afb00010 	sw	s0,16(sp)
800024ec:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:141
	struct inode *node;
	if ((node = dev_create_inode()) == NULL) {
800024f0:	0c000884 	jal	80002210 <dev_create_inode>
800024f4:	00000000 	nop
800024f8:	10400039 	beqz	v0,800025e0 <dev_init_disk0+0xfc>
800024fc:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:144
		panic("disk0: dev_create_node.\n");
	}
	disk0_device_init(vop_info(node, device));
80002500:	8c430038 	lw	v1,56(v0)
80002504:	24021234 	li	v0,4660
80002508:	1462002d 	bne	v1,v0,800025c0 <dev_init_disk0+0xdc>
8000250c:	02002021 	move	a0,s0
disk0_device_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:119
	return -E_UNIMP;
}

static void disk0_device_init(struct device *dev)
{
	memset(dev, 0, sizeof(*dev));
80002510:	00002821 	move	a1,zero
80002514:	0c005c52 	jal	80017148 <memset>
80002518:	24060030 	li	a2,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:121
	static_assert(DISK0_BLKSIZE % SECTSIZE == 0);
	if (!ide_device_valid(DISK0_DEV_NO)) {
8000251c:	0c006cc5 	jal	8001b314 <ide_device_valid>
80002520:	24040002 	li	a0,2
80002524:	50400041 	beqzl	v0,8000262c <dev_init_disk0+0x148>
80002528:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:124
		panic("disk0 device isn't available.\n");
	}
	dev->d_blocks = ide_device_size(DISK0_DEV_NO) / DISK0_BLK_NSECT;
8000252c:	0c006cd0 	jal	8001b340 <ide_device_size>
80002530:	24040002 	li	a0,2
80002534:	000210c2 	srl	v0,v0,0x3
80002538:	ae020000 	sw	v0,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:125
	dev->d_blocksize = DISK0_BLKSIZE;
8000253c:	24021000 	li	v0,4096
80002540:	ae020004 	sw	v0,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:126
	dev->d_open = disk0_open;
80002544:	3c028000 	lui	v0,0x8000
80002548:	2442224c 	addiu	v0,v0,8780
8000254c:	ae020020 	sw	v0,32(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:127
	dev->d_close = disk0_close;
80002550:	3c028000 	lui	v0,0x8000
80002554:	24422254 	addiu	v0,v0,8788
80002558:	ae020024 	sw	v0,36(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:128
	dev->d_io = disk0_io;
8000255c:	3c028000 	lui	v0,0x8000
80002560:	24422264 	addiu	v0,v0,8804
80002564:	ae020028 	sw	v0,40(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:129
	dev->d_ioctl = disk0_ioctl;
80002568:	3c028000 	lui	v0,0x8000
8000256c:	2442225c 	addiu	v0,v0,8796
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:130
	sem_init(&(disk0_sem), 1);
80002570:	3c048015 	lui	a0,0x8015
80002574:	248434c0 	addiu	a0,a0,13504
80002578:	24050001 	li	a1,1
8000257c:	0c006717 	jal	80019c5c <sem_init>
80002580:	ae02002c 	sw	v0,44(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:133

	static_assert(DISK0_BUFSIZE % DISK0_BLKSIZE == 0);
	if ((disk0_buffer = kmalloc(DISK0_BUFSIZE)) == NULL) {
80002584:	0c005486 	jal	80015218 <kmalloc>
80002588:	24044000 	li	a0,16384
8000258c:	3c038015 	lui	v1,0x8015
80002590:	10400020 	beqz	v0,80002614 <dev_init_disk0+0x130>
80002594:	ac6234d4 	sw	v0,13524(v1)
dev_init_disk0():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:147
		panic("disk0: dev_create_node.\n");
	}
	disk0_device_init(vop_info(node, device));

	int ret;
	if ((ret = vfs_add_dev("disk0", node, 1)) != 0) {
80002598:	3c048002 	lui	a0,0x8002
8000259c:	248411b0 	addiu	a0,a0,4528
800025a0:	02002821 	move	a1,s0
800025a4:	0c001444 	jal	80005110 <vfs_add_dev>
800025a8:	24060001 	li	a2,1
800025ac:	14400012 	bnez	v0,800025f8 <dev_init_disk0+0x114>
800025b0:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:150
		panic("disk0: vfs_add_dev: %e.\n", ret);
	}
}
800025b4:	8fb00010 	lw	s0,16(sp)
800025b8:	03e00008 	jr	ra
800025bc:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:144
{
	struct inode *node;
	if ((node = dev_create_inode()) == NULL) {
		panic("disk0: dev_create_node.\n");
	}
	disk0_device_init(vop_info(node, device));
800025c0:	3c048002 	lui	a0,0x8002
800025c4:	3c068002 	lui	a2,0x8002
800025c8:	3c078002 	lui	a3,0x8002
800025cc:	24841048 	addiu	a0,a0,4168
800025d0:	24050090 	li	a1,144
800025d4:	24c60e28 	addiu	a2,a2,3624
800025d8:	0c006b0b 	jal	8001ac2c <__panic>
800025dc:	24e70fbc 	addiu	a3,a3,4028
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:142

void dev_init_disk0(void)
{
	struct inode *node;
	if ((node = dev_create_inode()) == NULL) {
		panic("disk0: dev_create_node.\n");
800025e0:	3c048002 	lui	a0,0x8002
800025e4:	3c068002 	lui	a2,0x8002
800025e8:	24841048 	addiu	a0,a0,4168
800025ec:	2405008e 	li	a1,142
800025f0:	0c006b0b 	jal	8001ac2c <__panic>
800025f4:	24c61158 	addiu	a2,a2,4440
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:148
	}
	disk0_device_init(vop_info(node, device));

	int ret;
	if ((ret = vfs_add_dev("disk0", node, 1)) != 0) {
		panic("disk0: vfs_add_dev: %e.\n", ret);
800025f8:	3c048002 	lui	a0,0x8002
800025fc:	3c068002 	lui	a2,0x8002
80002600:	24841048 	addiu	a0,a0,4168
80002604:	24050094 	li	a1,148
80002608:	24c611b8 	addiu	a2,a2,4536
8000260c:	0c006b0b 	jal	8001ac2c <__panic>
80002610:	00403821 	move	a3,v0
disk0_device_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:134
	dev->d_ioctl = disk0_ioctl;
	sem_init(&(disk0_sem), 1);

	static_assert(DISK0_BUFSIZE % DISK0_BLKSIZE == 0);
	if ((disk0_buffer = kmalloc(DISK0_BUFSIZE)) == NULL) {
		panic("disk0 alloc buffer failed.\n");
80002614:	3c048002 	lui	a0,0x8002
80002618:	3c068002 	lui	a2,0x8002
8000261c:	24841048 	addiu	a0,a0,4168
80002620:	24050086 	li	a1,134
80002624:	0c006b0b 	jal	8001ac2c <__panic>
80002628:	24c61194 	addiu	a2,a2,4500
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk0.c:122
static void disk0_device_init(struct device *dev)
{
	memset(dev, 0, sizeof(*dev));
	static_assert(DISK0_BLKSIZE % SECTSIZE == 0);
	if (!ide_device_valid(DISK0_DEV_NO)) {
		panic("disk0 device isn't available.\n");
8000262c:	3c068002 	lui	a2,0x8002
80002630:	24841048 	addiu	a0,a0,4168
80002634:	2405007a 	li	a1,122
80002638:	0c006b0b 	jal	8001ac2c <__panic>
8000263c:	24c61174 	addiu	a2,a2,4468

80002640 <disk1_open>:
disk1_open():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk1.c:41

/* For open() */
static int disk1_open(struct device *dev, uint32_t open_flags)
{
	return 0;
}
80002640:	03e00008 	jr	ra
80002644:	00001021 	move	v0,zero

80002648 <disk1_close>:
disk1_close():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk1.c:47

/* For close() */
static int disk1_close(struct device *dev)
{
	return 0;
}
80002648:	03e00008 	jr	ra
8000264c:	00001021 	move	v0,zero

80002650 <disk1_io>:
disk1_io():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk1.c:53

/* For dop_io() */
static int disk1_io(struct device *dev, struct iobuf *iob, bool write)
{
	return -E_INVAL;
}
80002650:	03e00008 	jr	ra
80002654:	2402ffea 	li	v0,-22

80002658 <disk1_ioctl>:
disk1_ioctl():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk1.c:59

/* For ioctl() */
static int disk1_ioctl(struct device *dev, int op, void *data)
{
	return -E_INVAL;
}
80002658:	03e00008 	jr	ra
8000265c:	2402ffea 	li	v0,-22

80002660 <dev_init_disk1>:
dev_init_disk1():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk1.c:76

/*
 * Function to create and attach disk1:
 */
void dev_init_disk1(void)
{
80002660:	27bdffe8 	addiu	sp,sp,-24
80002664:	afb00010 	sw	s0,16(sp)
80002668:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk1.c:78
	struct inode *node;
	if ((node = dev_create_inode()) == NULL) {
8000266c:	0c000884 	jal	80002210 <dev_create_inode>
80002670:	00000000 	nop
80002674:	10400029 	beqz	v0,8000271c <dev_init_disk1+0xbc>
80002678:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk1.c:81
		panic("disk1: dev_create_node.\n");
	}
	disk1_device_init(vop_info(node, device));
8000267c:	8c430038 	lw	v1,56(v0)
80002680:	24021234 	li	v0,4660
80002684:	1462001d 	bne	v1,v0,800026fc <dev_init_disk1+0x9c>
80002688:	02002021 	move	a0,s0
disk1_device_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk1.c:63
	return -E_INVAL;
}

static void disk1_device_init(struct device *dev)
{
	memset(dev, 0, sizeof(*dev));
8000268c:	00002821 	move	a1,zero
80002690:	0c005c52 	jal	80017148 <memset>
80002694:	24060030 	li	a2,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk1.c:65
	dev->d_blocks = 0;
	dev->d_blocksize = 1;
80002698:	24020001 	li	v0,1
8000269c:	ae020004 	sw	v0,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk1.c:66
	dev->d_open = disk1_open;
800026a0:	3c028000 	lui	v0,0x8000
800026a4:	24422640 	addiu	v0,v0,9792
800026a8:	ae020020 	sw	v0,32(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk1.c:67
	dev->d_close = disk1_close;
800026ac:	3c028000 	lui	v0,0x8000
800026b0:	24422648 	addiu	v0,v0,9800
800026b4:	ae020024 	sw	v0,36(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk1.c:68
	dev->d_io = disk1_io;
800026b8:	3c028000 	lui	v0,0x8000
800026bc:	24422650 	addiu	v0,v0,9808
800026c0:	ae020028 	sw	v0,40(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk1.c:69
	dev->d_ioctl = disk1_ioctl;
800026c4:	3c028000 	lui	v0,0x8000
800026c8:	24422658 	addiu	v0,v0,9816
dev_init_disk1():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk1.c:84
		panic("disk1: dev_create_node.\n");
	}
	disk1_device_init(vop_info(node, device));

	int ret;
	if ((ret = vfs_add_dev("disk1", node, 1)) != 0) {
800026cc:	3c048002 	lui	a0,0x8002
disk1_device_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk1.c:64
}

static void disk1_device_init(struct device *dev)
{
	memset(dev, 0, sizeof(*dev));
	dev->d_blocks = 0;
800026d0:	ae000000 	sw	zero,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk1.c:69
	dev->d_blocksize = 1;
	dev->d_open = disk1_open;
	dev->d_close = disk1_close;
	dev->d_io = disk1_io;
	dev->d_ioctl = disk1_ioctl;
800026d4:	ae02002c 	sw	v0,44(s0)
dev_init_disk1():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk1.c:84
		panic("disk1: dev_create_node.\n");
	}
	disk1_device_init(vop_info(node, device));

	int ret;
	if ((ret = vfs_add_dev("disk1", node, 1)) != 0) {
800026d8:	248411fc 	addiu	a0,a0,4604
800026dc:	02002821 	move	a1,s0
800026e0:	0c001444 	jal	80005110 <vfs_add_dev>
800026e4:	24060001 	li	a2,1
800026e8:	14400012 	bnez	v0,80002734 <dev_init_disk1+0xd4>
800026ec:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk1.c:87
		panic("disk1: vfs_add_dev: %e.\n", ret);
	}
}
800026f0:	8fb00010 	lw	s0,16(sp)
800026f4:	03e00008 	jr	ra
800026f8:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk1.c:81
{
	struct inode *node;
	if ((node = dev_create_inode()) == NULL) {
		panic("disk1: dev_create_node.\n");
	}
	disk1_device_init(vop_info(node, device));
800026fc:	3c048002 	lui	a0,0x8002
80002700:	3c068002 	lui	a2,0x8002
80002704:	3c078002 	lui	a3,0x8002
80002708:	248411d4 	addiu	a0,a0,4564
8000270c:	24050051 	li	a1,81
80002710:	24c60e28 	addiu	a2,a2,3624
80002714:	0c006b0b 	jal	8001ac2c <__panic>
80002718:	24e70fbc 	addiu	a3,a3,4028
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk1.c:79
 */
void dev_init_disk1(void)
{
	struct inode *node;
	if ((node = dev_create_inode()) == NULL) {
		panic("disk1: dev_create_node.\n");
8000271c:	3c048002 	lui	a0,0x8002
80002720:	3c068002 	lui	a2,0x8002
80002724:	248411d4 	addiu	a0,a0,4564
80002728:	2405004f 	li	a1,79
8000272c:	0c006b0b 	jal	8001ac2c <__panic>
80002730:	24c611e0 	addiu	a2,a2,4576
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_disk1.c:85
	}
	disk1_device_init(vop_info(node, device));

	int ret;
	if ((ret = vfs_add_dev("disk1", node, 1)) != 0) {
		panic("disk1: vfs_add_dev: %e.\n", ret);
80002734:	3c048002 	lui	a0,0x8002
80002738:	3c068002 	lui	a2,0x8002
8000273c:	248411d4 	addiu	a0,a0,4564
80002740:	24050055 	li	a1,85
80002744:	24c61204 	addiu	a2,a2,4612
80002748:	0c006b0b 	jal	8001ac2c <__panic>
8000274c:	00403821 	move	a3,v0

80002750 <null_open>:
null_open():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_null.c:17

/* For open() */
static int null_open(struct device *dev, uint32_t open_flags)
{
	return 0;
}
80002750:	03e00008 	jr	ra
80002754:	00001021 	move	v0,zero

80002758 <null_close>:
null_close():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_null.c:23

/* For close() */
static int null_close(struct device *dev)
{
	return 0;
}
80002758:	03e00008 	jr	ra
8000275c:	00001021 	move	v0,zero

80002760 <null_io>:
null_io():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_null.c:32
{
/*
 * On write, discard everything without looking at it.
 * On read, do nothing, generating an immediate EOF.
 */
	if (write) {
80002760:	54c00001 	bnezl	a2,80002768 <null_io+0x8>
80002764:	aca0000c 	sw	zero,12(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_null.c:36
		iob->io_resid = 0;
	}
	return 0;
}
80002768:	03e00008 	jr	ra
8000276c:	00001021 	move	v0,zero

80002770 <null_ioctl>:
null_ioctl():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_null.c:42

/* For ioctl() */
static int null_ioctl(struct device *dev, int op, void *data)
{
	return -E_INVAL;
}
80002770:	03e00008 	jr	ra
80002774:	2402ffea 	li	v0,-22

80002778 <dev_init_null>:
dev_init_null():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_null.c:59

/*
 * Function to create and attach null:
 */
void dev_init_null(void)
{
80002778:	27bdffe8 	addiu	sp,sp,-24
8000277c:	afb00010 	sw	s0,16(sp)
80002780:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_null.c:61
	struct inode *node;
	if ((node = dev_create_inode()) == NULL) {
80002784:	0c000884 	jal	80002210 <dev_create_inode>
80002788:	00000000 	nop
8000278c:	10400029 	beqz	v0,80002834 <dev_init_null+0xbc>
80002790:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_null.c:64
		panic("null: dev_create_node.\n");
	}
	null_device_init(vop_info(node, device));
80002794:	8c430038 	lw	v1,56(v0)
80002798:	24021234 	li	v0,4660
8000279c:	1462001d 	bne	v1,v0,80002814 <dev_init_null+0x9c>
800027a0:	02002021 	move	a0,s0
null_device_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_null.c:46
	return -E_INVAL;
}

static void null_device_init(struct device *dev)
{
	memset(dev, 0, sizeof(*dev));
800027a4:	00002821 	move	a1,zero
800027a8:	0c005c52 	jal	80017148 <memset>
800027ac:	24060030 	li	a2,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_null.c:48
	dev->d_blocks = 0;
	dev->d_blocksize = 1;
800027b0:	24020001 	li	v0,1
800027b4:	ae020004 	sw	v0,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_null.c:49
	dev->d_open = null_open;
800027b8:	3c028000 	lui	v0,0x8000
800027bc:	24422750 	addiu	v0,v0,10064
800027c0:	ae020020 	sw	v0,32(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_null.c:50
	dev->d_close = null_close;
800027c4:	3c028000 	lui	v0,0x8000
800027c8:	24422758 	addiu	v0,v0,10072
800027cc:	ae020024 	sw	v0,36(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_null.c:51
	dev->d_io = null_io;
800027d0:	3c028000 	lui	v0,0x8000
800027d4:	24422760 	addiu	v0,v0,10080
800027d8:	ae020028 	sw	v0,40(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_null.c:52
	dev->d_ioctl = null_ioctl;
800027dc:	3c028000 	lui	v0,0x8000
800027e0:	24422770 	addiu	v0,v0,10096
dev_init_null():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_null.c:67
		panic("null: dev_create_node.\n");
	}
	null_device_init(vop_info(node, device));

	int ret;
	if ((ret = vfs_add_dev("null", node, 0)) != 0) {
800027e4:	3c048002 	lui	a0,0x8002
null_device_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_null.c:47
}

static void null_device_init(struct device *dev)
{
	memset(dev, 0, sizeof(*dev));
	dev->d_blocks = 0;
800027e8:	ae000000 	sw	zero,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_null.c:52
	dev->d_blocksize = 1;
	dev->d_open = null_open;
	dev->d_close = null_close;
	dev->d_io = null_io;
	dev->d_ioctl = null_ioctl;
800027ec:	ae02002c 	sw	v0,44(s0)
dev_init_null():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_null.c:67
		panic("null: dev_create_node.\n");
	}
	null_device_init(vop_info(node, device));

	int ret;
	if ((ret = vfs_add_dev("null", node, 0)) != 0) {
800027f0:	24841244 	addiu	a0,a0,4676
800027f4:	02002821 	move	a1,s0
800027f8:	0c001444 	jal	80005110 <vfs_add_dev>
800027fc:	00003021 	move	a2,zero
80002800:	14400012 	bnez	v0,8000284c <dev_init_null+0xd4>
80002804:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_null.c:70
		panic("null: vfs_add_dev: %e.\n", ret);
	}
}
80002808:	8fb00010 	lw	s0,16(sp)
8000280c:	03e00008 	jr	ra
80002810:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_null.c:64
{
	struct inode *node;
	if ((node = dev_create_inode()) == NULL) {
		panic("null: dev_create_node.\n");
	}
	null_device_init(vop_info(node, device));
80002814:	3c048002 	lui	a0,0x8002
80002818:	3c068002 	lui	a2,0x8002
8000281c:	3c078002 	lui	a3,0x8002
80002820:	24841220 	addiu	a0,a0,4640
80002824:	24050040 	li	a1,64
80002828:	24c60e28 	addiu	a2,a2,3624
8000282c:	0c006b0b 	jal	8001ac2c <__panic>
80002830:	24e70fbc 	addiu	a3,a3,4028
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_null.c:62
 */
void dev_init_null(void)
{
	struct inode *node;
	if ((node = dev_create_inode()) == NULL) {
		panic("null: dev_create_node.\n");
80002834:	3c048002 	lui	a0,0x8002
80002838:	3c068002 	lui	a2,0x8002
8000283c:	24841220 	addiu	a0,a0,4640
80002840:	2405003e 	li	a1,62
80002844:	0c006b0b 	jal	8001ac2c <__panic>
80002848:	24c6122c 	addiu	a2,a2,4652
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_null.c:68
	}
	null_device_init(vop_info(node, device));

	int ret;
	if ((ret = vfs_add_dev("null", node, 0)) != 0) {
		panic("null: vfs_add_dev: %e.\n", ret);
8000284c:	3c048002 	lui	a0,0x8002
80002850:	3c068002 	lui	a2,0x8002
80002854:	24841220 	addiu	a0,a0,4640
80002858:	24050044 	li	a1,68
8000285c:	24c6124c 	addiu	a2,a2,4684
80002860:	0c006b0b 	jal	8001ac2c <__panic>
80002864:	00403821 	move	a3,v0

80002868 <stdin_open>:
stdin_open():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:89
}

static int stdin_open(struct device *dev, uint32_t open_flags)
{
	if (open_flags != O_RDONLY) {
		return -E_INVAL;
80002868:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:92
	}
	return 0;
}
8000286c:	03e00008 	jr	ra
80002870:	0005100a 	movz	v0,zero,a1

80002874 <stdin_close>:
stdin_close():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:97

static int stdin_close(struct device *dev)
{
	return 0;
}
80002874:	03e00008 	jr	ra
80002878:	00001021 	move	v0,zero

8000287c <stdin_ioctl>:
stdin_ioctl():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:114
}

static int stdin_ioctl(struct device *dev, int op, void *data)
{
	return -E_INVAL;
}
8000287c:	03e00008 	jr	ra
80002880:	2402ffea 	li	v0,-22

80002884 <stdin_io>:
stdin_io():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:100
{
	return 0;
}

static int stdin_io(struct device *dev, struct iobuf *iob, bool write)
{
80002884:	27bdffa8 	addiu	sp,sp,-88
80002888:	afb7004c 	sw	s7,76(sp)
8000288c:	afb60048 	sw	s6,72(sp)
80002890:	afbf0054 	sw	ra,84(sp)
80002894:	afbe0050 	sw	s8,80(sp)
80002898:	afb50044 	sw	s5,68(sp)
8000289c:	afb40040 	sw	s4,64(sp)
800028a0:	afb3003c 	sw	s3,60(sp)
800028a4:	afb20038 	sw	s2,56(sp)
800028a8:	afb10034 	sw	s1,52(sp)
800028ac:	afb00030 	sw	s0,48(sp)
800028b0:	00a0b821 	move	s7,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:101
	if (!write) {
800028b4:	14c00047 	bnez	a2,800029d4 <stdin_io+0x150>
800028b8:	2416ffea 	li	s6,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:103
		int ret;
		if ((ret = dev_stdin_read(iob->io_base, iob->io_resid)) > 0) {
800028bc:	8ca20000 	lw	v0,0(a1)
800028c0:	8cbe000c 	lw	s8,12(a1)
800028c4:	afa20028 	sw	v0,40(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
800028c8:	40026000 	mfc0	v0,c0_status
800028cc:	30420001 	andi	v0,v0,0x1
800028d0:	10400003 	beqz	v0,800028e0 <stdin_io+0x5c>
800028d4:	00008021 	move	s0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
800028d8:	0c006d04 	jal	8001b410 <intr_disable>
800028dc:	24100001 	li	s0,1
dev_stdin_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:66
				p_rpos++;
				ret++;
				if (p_rpos <= p_wpos)
					break;
			} else {
				kprintf("asd123456\n\r");
800028e0:	3c118002 	lui	s1,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:68
				wait_t __wait, *wait = &__wait;
				wait_current_set(wait_queue, wait, WT_KBD);
800028e4:	3c138015 	lui	s3,0x8015
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:45
}

static int dev_stdin_read(char *buf, size_t len)
{
	//kprintf("asd123\n\r");
	int ret = 0;
800028e8:	0000b021 	move	s6,zero
800028ec:	3c158015 	lui	s5,0x8015
800028f0:	3c148015 	lui	s4,0x8015
dev_stdin_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:66
				p_rpos++;
				ret++;
				if (p_rpos <= p_wpos)
					break;
			} else {
				kprintf("asd123456\n\r");
800028f4:	26311264 	addiu	s1,s1,4708
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:68
				wait_t __wait, *wait = &__wait;
				wait_current_set(wait_queue, wait, WT_KBD);
800028f8:	267344e0 	addiu	s3,s3,17632
800028fc:	3c128000 	lui	s2,0x8000
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:51
	bool intr_flag;
	//kprintf("p_rpos:%d,p_wpos:%d\n\r",p_rpos,p_wpos);
	local_intr_save(intr_flag);
	{
		while (1) {
			if (ret >= len)
80002900:	56de0015 	bnel	s6,s8,80002958 <stdin_io+0xd4>
80002904:	8ea544dc 	lw	a1,17628(s5)
80002908:	08000a6e 	j	800029b8 <stdin_io+0x134>
8000290c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:71
				kprintf("asd123456\n\r");
				wait_t __wait, *wait = &__wait;
				wait_current_set(wait_queue, wait, WT_KBD);
				local_intr_restore(intr_flag);

				schedule();
80002910:	0c00059f 	jal	8000167c <schedule>
80002914:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:72
				kprintf("asd123456\n\r");
80002918:	0c007a9e 	jal	8001ea78 <kprintf>
8000291c:	02202021 	move	a0,s1
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80002920:	40026000 	mfc0	v0,c0_status
80002924:	30420001 	andi	v0,v0,0x1
80002928:	10400003 	beqz	v0,80002938 <stdin_io+0xb4>
8000292c:	00008021 	move	s0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80002930:	0c006d04 	jal	8001b410 <intr_disable>
80002934:	24100001 	li	s0,1
dev_stdin_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:74
				local_intr_save(intr_flag);
				wait_current_del(wait_queue, wait);
80002938:	0c0069b6 	jal	8001a6d8 <wait_in_queue>
8000293c:	27a40010 	addiu	a0,sp,16
80002940:	14400016 	bnez	v0,8000299c <stdin_io+0x118>
80002944:	8fa30014 	lw	v1,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:75
				if (wait->wakeup_flags == WT_KBD) {
80002948:	26420004 	addiu	v0,s2,4
8000294c:	1462001a 	bne	v1,v0,800029b8 <stdin_io+0x134>
80002950:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:55
		while (1) {
			if (ret >= len)
				break;
try_again:
			//kprintf("p_rpos:%d,p_wpos:%d",p_rpos,p_wpos);
			if (p_rpos >= p_wpos) {
80002954:	8ea544dc 	lw	a1,17628(s5)
80002958:	8e8234d8 	lw	v0,13528(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:66
				p_rpos++;
				ret++;
				if (p_rpos <= p_wpos)
					break;
			} else {
				kprintf("asd123456\n\r");
8000295c:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:55
		while (1) {
			if (ret >= len)
				break;
try_again:
			//kprintf("p_rpos:%d,p_wpos:%d",p_rpos,p_wpos);
			if (p_rpos >= p_wpos) {
80002960:	00a2102a 	slt	v0,a1,v0
80002964:	1040002c 	beqz	v0,80002a18 <stdin_io+0x194>
80002968:	3c038015 	lui	v1,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:66
				p_rpos++;
				ret++;
				if (p_rpos <= p_wpos)
					break;
			} else {
				kprintf("asd123456\n\r");
8000296c:	0c007a9e 	jal	8001ea78 <kprintf>
80002970:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:68
				wait_t __wait, *wait = &__wait;
				wait_current_set(wait_queue, wait, WT_KBD);
80002974:	02602021 	move	a0,s3
80002978:	27a50010 	addiu	a1,sp,16
8000297c:	0c006a00 	jal	8001a800 <wait_current_set>
80002980:	26460004 	addiu	a2,s2,4
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80002984:	1200ffe2 	beqz	s0,80002910 <stdin_io+0x8c>
80002988:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
8000298c:	0c006d00 	jal	8001b400 <intr_enable>
80002990:	00000000 	nop
80002994:	08000a44 	j	80002910 <stdin_io+0x8c>
80002998:	00000000 	nop
dev_stdin_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:74
				local_intr_restore(intr_flag);

				schedule();
				kprintf("asd123456\n\r");
				local_intr_save(intr_flag);
				wait_current_del(wait_queue, wait);
8000299c:	02602021 	move	a0,s3
800029a0:	0c006966 	jal	8001a598 <wait_queue_del>
800029a4:	27a50010 	addiu	a1,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:75
				if (wait->wakeup_flags == WT_KBD) {
800029a8:	8fa30014 	lw	v1,20(sp)
800029ac:	26420004 	addiu	v0,s2,4
800029b0:	5062ffe9 	beql	v1,v0,80002958 <stdin_io+0xd4>
800029b4:	8ea544dc 	lw	a1,17628(s5)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
800029b8:	16000013 	bnez	s0,80002a08 <stdin_io+0x184>
800029bc:	00000000 	nop
stdin_io():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:103

static int stdin_io(struct device *dev, struct iobuf *iob, bool write)
{
	if (!write) {
		int ret;
		if ((ret = dev_stdin_read(iob->io_base, iob->io_resid)) > 0) {
800029c0:	12c00005 	beqz	s6,800029d8 <stdin_io+0x154>
800029c4:	8fbf0054 	lw	ra,84(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:104
			iob->io_resid -= ret;
800029c8:	8ee2000c 	lw	v0,12(s7)
800029cc:	00561023 	subu	v0,v0,s6
800029d0:	aee2000c 	sw	v0,12(s7)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:109
		}
		return ret;
	}
	return -E_INVAL;
}
800029d4:	8fbf0054 	lw	ra,84(sp)
800029d8:	02c01021 	move	v0,s6
800029dc:	8fbe0050 	lw	s8,80(sp)
800029e0:	8fb7004c 	lw	s7,76(sp)
800029e4:	8fb60048 	lw	s6,72(sp)
800029e8:	8fb50044 	lw	s5,68(sp)
800029ec:	8fb40040 	lw	s4,64(sp)
800029f0:	8fb3003c 	lw	s3,60(sp)
800029f4:	8fb20038 	lw	s2,56(sp)
800029f8:	8fb10034 	lw	s1,52(sp)
800029fc:	8fb00030 	lw	s0,48(sp)
80002a00:	03e00008 	jr	ra
80002a04:	27bd0058 	addiu	sp,sp,88
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
80002a08:	0c006d00 	jal	8001b400 <intr_enable>
80002a0c:	00000000 	nop
80002a10:	08000a70 	j	800029c0 <stdin_io+0x13c>
80002a14:	00000000 	nop
dev_stdin_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:59
			//kprintf("p_rpos:%d,p_wpos:%d",p_rpos,p_wpos);
			if (p_rpos >= p_wpos) {
				//kprintf("asd1234\n\r");
				char c = stdin_buffer[p_rpos % STDIN_BUFSIZE];
				//FIXME
				c=getchar();
80002a18:	0c007b13 	jal	8001ec4c <getchar>
80002a1c:	afa3002c 	sw	v1,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:61
				*buf++ = c;
				p_rpos++;
80002a20:	8fa3002c 	lw	v1,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:63
				ret++;
				if (p_rpos <= p_wpos)
80002a24:	3c048015 	lui	a0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:59
			//kprintf("p_rpos:%d,p_wpos:%d",p_rpos,p_wpos);
			if (p_rpos >= p_wpos) {
				//kprintf("asd1234\n\r");
				char c = stdin_buffer[p_rpos % STDIN_BUFSIZE];
				//FIXME
				c=getchar();
80002a28:	8fa60028 	lw	a2,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:61
				*buf++ = c;
				p_rpos++;
80002a2c:	8c6544dc 	lw	a1,17628(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:63
				ret++;
				if (p_rpos <= p_wpos)
80002a30:	8c8434d8 	lw	a0,13528(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:59
			//kprintf("p_rpos:%d,p_wpos:%d",p_rpos,p_wpos);
			if (p_rpos >= p_wpos) {
				//kprintf("asd1234\n\r");
				char c = stdin_buffer[p_rpos % STDIN_BUFSIZE];
				//FIXME
				c=getchar();
80002a34:	a0c20000 	sb	v0,0(a2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:61
				*buf++ = c;
				p_rpos++;
80002a38:	24a50001 	addiu	a1,a1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:60
			if (p_rpos >= p_wpos) {
				//kprintf("asd1234\n\r");
				char c = stdin_buffer[p_rpos % STDIN_BUFSIZE];
				//FIXME
				c=getchar();
				*buf++ = c;
80002a3c:	24c60001 	addiu	a2,a2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:63
				p_rpos++;
				ret++;
				if (p_rpos <= p_wpos)
80002a40:	0085202a 	slt	a0,a0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:60
			if (p_rpos >= p_wpos) {
				//kprintf("asd1234\n\r");
				char c = stdin_buffer[p_rpos % STDIN_BUFSIZE];
				//FIXME
				c=getchar();
				*buf++ = c;
80002a44:	afa60028 	sw	a2,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:61
				p_rpos++;
80002a48:	ac6544dc 	sw	a1,17628(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:63
				ret++;
				if (p_rpos <= p_wpos)
80002a4c:	1480ffac 	bnez	a0,80002900 <stdin_io+0x7c>
80002a50:	26d60001 	addiu	s6,s6,1
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80002a54:	1200ffda 	beqz	s0,800029c0 <stdin_io+0x13c>
80002a58:	00000000 	nop
80002a5c:	08000a82 	j	80002a08 <stdin_io+0x184>
80002a60:	00000000 	nop

80002a64 <dev_stdin_write>:
dev_stdin_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:24
static char stdin_buffer[STDIN_BUFSIZE];
static off_t p_rpos, p_wpos;
static wait_queue_t __wait_queue, *wait_queue = &__wait_queue;

void dev_stdin_write(char c)
{
80002a64:	27bdffe0 	addiu	sp,sp,-32
80002a68:	afb10018 	sw	s1,24(sp)
80002a6c:	309100ff 	andi	s1,a0,0xff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:26
	bool intr_flag;
	kprintf("asdwwww\n\r");
80002a70:	3c048002 	lui	a0,0x8002
80002a74:	24841270 	addiu	a0,a0,4720
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:24
static char stdin_buffer[STDIN_BUFSIZE];
static off_t p_rpos, p_wpos;
static wait_queue_t __wait_queue, *wait_queue = &__wait_queue;

void dev_stdin_write(char c)
{
80002a78:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:26
	bool intr_flag;
	kprintf("asdwwww\n\r");
80002a7c:	0c007a9e 	jal	8001ea78 <kprintf>
80002a80:	afb00014 	sw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:27
	if (c != '\0') {
80002a84:	16200005 	bnez	s1,80002a9c <dev_stdin_write+0x38>
80002a88:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:40
				wakeup_queue(wait_queue, WT_KBD, 1);
			}
		}
		local_intr_restore(intr_flag);
	}
}
80002a8c:	8fb10018 	lw	s1,24(sp)
80002a90:	8fb00014 	lw	s0,20(sp)
80002a94:	03e00008 	jr	ra
80002a98:	27bd0020 	addiu	sp,sp,32
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80002a9c:	40026000 	mfc0	v0,c0_status
80002aa0:	30420001 	andi	v0,v0,0x1
80002aa4:	10400003 	beqz	v0,80002ab4 <dev_stdin_write+0x50>
80002aa8:	00008021 	move	s0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80002aac:	0c006d04 	jal	8001b410 <intr_disable>
80002ab0:	24100001 	li	s0,1
dev_stdin_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:30
	bool intr_flag;
	kprintf("asdwwww\n\r");
	if (c != '\0') {
		local_intr_save(intr_flag);
		{
			stdin_buffer[p_wpos % STDIN_BUFSIZE] = c;
80002ab4:	3c048015 	lui	a0,0x8015
80002ab8:	8c8234d8 	lw	v0,13528(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:31
			if (p_wpos - p_rpos < STDIN_BUFSIZE) {
80002abc:	3c038015 	lui	v1,0x8015
80002ac0:	8c6544dc 	lw	a1,17628(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:30
	bool intr_flag;
	kprintf("asdwwww\n\r");
	if (c != '\0') {
		local_intr_save(intr_flag);
		{
			stdin_buffer[p_wpos % STDIN_BUFSIZE] = c;
80002ac4:	00021fc3 	sra	v1,v0,0x1f
80002ac8:	00031d02 	srl	v1,v1,0x14
80002acc:	00433021 	addu	a2,v0,v1
80002ad0:	30c60fff 	andi	a2,a2,0xfff
80002ad4:	00c31823 	subu	v1,a2,v1
80002ad8:	3c068015 	lui	a2,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:31
			if (p_wpos - p_rpos < STDIN_BUFSIZE) {
80002adc:	00452823 	subu	a1,v0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:30
	bool intr_flag;
	kprintf("asdwwww\n\r");
	if (c != '\0') {
		local_intr_save(intr_flag);
		{
			stdin_buffer[p_wpos % STDIN_BUFSIZE] = c;
80002ae0:	24c634dc 	addiu	a2,a2,13532
80002ae4:	00661821 	addu	v1,v1,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:31
			if (p_wpos - p_rpos < STDIN_BUFSIZE) {
80002ae8:	28a51000 	slti	a1,a1,4096
80002aec:	10a00003 	beqz	a1,80002afc <dev_stdin_write+0x98>
80002af0:	a0710000 	sb	s1,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:32
				p_wpos++;
80002af4:	24420001 	addiu	v0,v0,1
80002af8:	ac8234d8 	sw	v0,13528(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:34
			}
			if (!wait_queue_empty(wait_queue)) {
80002afc:	3c118015 	lui	s1,0x8015
80002b00:	0c0069b2 	jal	8001a6c8 <wait_queue_empty>
80002b04:	262444e0 	addiu	a0,s1,17632
80002b08:	10400007 	beqz	v0,80002b28 <dev_stdin_write+0xc4>
80002b0c:	3c058000 	lui	a1,0x8000
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80002b10:	1200ffde 	beqz	s0,80002a8c <dev_stdin_write+0x28>
80002b14:	8fbf001c 	lw	ra,28(sp)
dev_stdin_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:40
				wakeup_queue(wait_queue, WT_KBD, 1);
			}
		}
		local_intr_restore(intr_flag);
	}
}
80002b18:	8fb10018 	lw	s1,24(sp)
80002b1c:	8fb00014 	lw	s0,20(sp)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
80002b20:	08006d00 	j	8001b400 <intr_enable>
80002b24:	27bd0020 	addiu	sp,sp,32
dev_stdin_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:35
			stdin_buffer[p_wpos % STDIN_BUFSIZE] = c;
			if (p_wpos - p_rpos < STDIN_BUFSIZE) {
				p_wpos++;
			}
			if (!wait_queue_empty(wait_queue)) {
				wakeup_queue(wait_queue, WT_KBD, 1);
80002b28:	262444e0 	addiu	a0,s1,17632
80002b2c:	24a50004 	addiu	a1,a1,4
80002b30:	0c0069d4 	jal	8001a750 <wakeup_queue>
80002b34:	24060001 	li	a2,1
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80002b38:	1200ffd4 	beqz	s0,80002a8c <dev_stdin_write+0x28>
80002b3c:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:40
			}
		}
		local_intr_restore(intr_flag);
	}
}
80002b40:	08000ac7 	j	80002b1c <dev_stdin_write+0xb8>
80002b44:	8fb10018 	lw	s1,24(sp)

80002b48 <dev_init_stdin>:
dev_init_stdin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:131
	p_rpos = p_wpos = 0;
	wait_queue_init(wait_queue);
}

void dev_init_stdin(void)
{
80002b48:	27bdffe8 	addiu	sp,sp,-24
80002b4c:	afb00010 	sw	s0,16(sp)
80002b50:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:133
	struct inode *node;
	if ((node = dev_create_inode()) == NULL) {
80002b54:	0c000884 	jal	80002210 <dev_create_inode>
80002b58:	00000000 	nop
80002b5c:	10400030 	beqz	v0,80002c20 <dev_init_stdin+0xd8>
80002b60:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:136
		panic("stdin: dev_create_node.\n");
	}
	stdin_device_init(vop_info(node, device));
80002b64:	8c430038 	lw	v1,56(v0)
80002b68:	24021234 	li	v0,4660
80002b6c:	14620024 	bne	v1,v0,80002c00 <dev_init_stdin+0xb8>
80002b70:	00002821 	move	a1,zero
stdin_device_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:118
	return -E_INVAL;
}

static void stdin_device_init(struct device *dev)
{
	memset(dev, 0, sizeof(*dev));
80002b74:	24060030 	li	a2,48
80002b78:	0c005c52 	jal	80017148 <memset>
80002b7c:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:120
	dev->d_blocks = 0;
	dev->d_blocksize = 1;
80002b80:	24020001 	li	v0,1
80002b84:	ae020004 	sw	v0,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:121
	dev->d_open = stdin_open;
80002b88:	3c028000 	lui	v0,0x8000
80002b8c:	24422868 	addiu	v0,v0,10344
80002b90:	ae020020 	sw	v0,32(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:122
	dev->d_close = stdin_close;
80002b94:	3c028000 	lui	v0,0x8000
80002b98:	24422874 	addiu	v0,v0,10356
80002b9c:	ae020024 	sw	v0,36(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:123
	dev->d_io = stdin_io;
80002ba0:	3c028000 	lui	v0,0x8000
80002ba4:	24422884 	addiu	v0,v0,10372
80002ba8:	ae020028 	sw	v0,40(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:124
	dev->d_ioctl = stdin_ioctl;
80002bac:	3c028000 	lui	v0,0x8000
80002bb0:	2442287c 	addiu	v0,v0,10364
80002bb4:	ae02002c 	sw	v0,44(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:127

	p_rpos = p_wpos = 0;
	wait_queue_init(wait_queue);
80002bb8:	3c048015 	lui	a0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:126
	dev->d_open = stdin_open;
	dev->d_close = stdin_close;
	dev->d_io = stdin_io;
	dev->d_ioctl = stdin_ioctl;

	p_rpos = p_wpos = 0;
80002bbc:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:127
	wait_queue_init(wait_queue);
80002bc0:	248444e0 	addiu	a0,a0,17632
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:126
	dev->d_open = stdin_open;
	dev->d_close = stdin_close;
	dev->d_io = stdin_io;
	dev->d_ioctl = stdin_ioctl;

	p_rpos = p_wpos = 0;
80002bc4:	ac4034d8 	sw	zero,13528(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:119
}

static void stdin_device_init(struct device *dev)
{
	memset(dev, 0, sizeof(*dev));
	dev->d_blocks = 0;
80002bc8:	ae000000 	sw	zero,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:126
	dev->d_open = stdin_open;
	dev->d_close = stdin_close;
	dev->d_io = stdin_io;
	dev->d_ioctl = stdin_ioctl;

	p_rpos = p_wpos = 0;
80002bcc:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:127
	wait_queue_init(wait_queue);
80002bd0:	0c00694b 	jal	8001a52c <wait_queue_init>
80002bd4:	ac4044dc 	sw	zero,17628(v0)
dev_init_stdin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:139
		panic("stdin: dev_create_node.\n");
	}
	stdin_device_init(vop_info(node, device));

	int ret;
	if ((ret = vfs_add_dev("stdin", node, 0)) != 0) {
80002bd8:	3c048002 	lui	a0,0x8002
80002bdc:	248412a4 	addiu	a0,a0,4772
80002be0:	02002821 	move	a1,s0
80002be4:	0c001444 	jal	80005110 <vfs_add_dev>
80002be8:	00003021 	move	a2,zero
80002bec:	14400012 	bnez	v0,80002c38 <dev_init_stdin+0xf0>
80002bf0:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:142
		panic("stdin: vfs_add_dev: %e.\n", ret);
	}
}
80002bf4:	8fb00010 	lw	s0,16(sp)
80002bf8:	03e00008 	jr	ra
80002bfc:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:136
{
	struct inode *node;
	if ((node = dev_create_inode()) == NULL) {
		panic("stdin: dev_create_node.\n");
	}
	stdin_device_init(vop_info(node, device));
80002c00:	3c048002 	lui	a0,0x8002
80002c04:	3c068002 	lui	a2,0x8002
80002c08:	3c078002 	lui	a3,0x8002
80002c0c:	2484127c 	addiu	a0,a0,4732
80002c10:	24050088 	li	a1,136
80002c14:	24c60e28 	addiu	a2,a2,3624
80002c18:	0c006b0b 	jal	8001ac2c <__panic>
80002c1c:	24e70fbc 	addiu	a3,a3,4028
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:134

void dev_init_stdin(void)
{
	struct inode *node;
	if ((node = dev_create_inode()) == NULL) {
		panic("stdin: dev_create_node.\n");
80002c20:	3c048002 	lui	a0,0x8002
80002c24:	3c068002 	lui	a2,0x8002
80002c28:	2484127c 	addiu	a0,a0,4732
80002c2c:	24050086 	li	a1,134
80002c30:	0c006b0b 	jal	8001ac2c <__panic>
80002c34:	24c61288 	addiu	a2,a2,4744
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdin.c:140
	}
	stdin_device_init(vop_info(node, device));

	int ret;
	if ((ret = vfs_add_dev("stdin", node, 0)) != 0) {
		panic("stdin: vfs_add_dev: %e.\n", ret);
80002c38:	3c048002 	lui	a0,0x8002
80002c3c:	3c068002 	lui	a2,0x8002
80002c40:	2484127c 	addiu	a0,a0,4732
80002c44:	2405008c 	li	a1,140
80002c48:	24c612ac 	addiu	a2,a2,4780
80002c4c:	0c006b0b 	jal	8001ac2c <__panic>
80002c50:	00403821 	move	a3,v0

80002c54 <stdout_open>:
stdout_open():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:15
#include <glue_kio.h>

static int stdout_open(struct device *dev, uint32_t open_flags)
{
	if (open_flags != O_WRONLY) {
		return -E_INVAL;
80002c54:	38a50001 	xori	a1,a1,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:18
	}
	return 0;
}
80002c58:	2402ffea 	li	v0,-22
80002c5c:	03e00008 	jr	ra
80002c60:	0005100a 	movz	v0,zero,a1

80002c64 <stdout_close>:
stdout_close():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:23

static int stdout_close(struct device *dev)
{
	return 0;
}
80002c64:	03e00008 	jr	ra
80002c68:	00001021 	move	v0,zero

80002c6c <stdout_ioctl>:
stdout_ioctl():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:40
}

static int stdout_ioctl(struct device *dev, int op, void *data)
{
	return -E_INVAL;
}
80002c6c:	03e00008 	jr	ra
80002c70:	2402ffea 	li	v0,-22

80002c74 <stdout_io>:
stdout_io():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:26
{
	return 0;
}

static int stdout_io(struct device *dev, struct iobuf *iob, bool write)
{
80002c74:	27bdffe0 	addiu	sp,sp,-32
80002c78:	afb00014 	sw	s0,20(sp)
80002c7c:	afbf001c 	sw	ra,28(sp)
80002c80:	afb10018 	sw	s1,24(sp)
80002c84:	00a08021 	move	s0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:27
	if (write) {
80002c88:	10c0000c 	beqz	a2,80002cbc <stdout_io+0x48>
80002c8c:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:29
		char *data = iob->io_base;
		for (; iob->io_resid != 0; iob->io_resid--) {
80002c90:	8ca3000c 	lw	v1,12(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:28
}

static int stdout_io(struct device *dev, struct iobuf *iob, bool write)
{
	if (write) {
		char *data = iob->io_base;
80002c94:	8cb10000 	lw	s1,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:29
		for (; iob->io_resid != 0; iob->io_resid--) {
80002c98:	10600008 	beqz	v1,80002cbc <stdout_io+0x48>
80002c9c:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:30
			kcons_putc(*data++);
80002ca0:	92240000 	lbu	a0,0(s1)
80002ca4:	0c006c5b 	jal	8001b16c <cons_putc>
80002ca8:	26310001 	addiu	s1,s1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:29

static int stdout_io(struct device *dev, struct iobuf *iob, bool write)
{
	if (write) {
		char *data = iob->io_base;
		for (; iob->io_resid != 0; iob->io_resid--) {
80002cac:	8e02000c 	lw	v0,12(s0)
80002cb0:	2442ffff 	addiu	v0,v0,-1
80002cb4:	1440fffa 	bnez	v0,80002ca0 <stdout_io+0x2c>
80002cb8:	ae02000c 	sw	v0,12(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:35
			kcons_putc(*data++);
		}
		return 0;
	}
	return -E_INVAL;
}
80002cbc:	8fbf001c 	lw	ra,28(sp)
80002cc0:	8fb10018 	lw	s1,24(sp)
80002cc4:	8fb00014 	lw	s0,20(sp)
80002cc8:	03e00008 	jr	ra
80002ccc:	27bd0020 	addiu	sp,sp,32

80002cd0 <dev_init_stdout>:
dev_init_stdout():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:54
	dev->d_io = stdout_io;
	dev->d_ioctl = stdout_ioctl;
}

void dev_init_stdout(void)
{
80002cd0:	27bdffe8 	addiu	sp,sp,-24
80002cd4:	afb00010 	sw	s0,16(sp)
80002cd8:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:56
	struct inode *node;
	if ((node = dev_create_inode()) == NULL) {
80002cdc:	0c000884 	jal	80002210 <dev_create_inode>
80002ce0:	00000000 	nop
80002ce4:	10400029 	beqz	v0,80002d8c <dev_init_stdout+0xbc>
80002ce8:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:59
		panic("stdout: dev_create_node.\n");
	}
	stdout_device_init(vop_info(node, device));
80002cec:	8c430038 	lw	v1,56(v0)
80002cf0:	24021234 	li	v0,4660
80002cf4:	1462001d 	bne	v1,v0,80002d6c <dev_init_stdout+0x9c>
80002cf8:	02002021 	move	a0,s0
stdout_device_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:44
	return -E_INVAL;
}

static void stdout_device_init(struct device *dev)
{
	memset(dev, 0, sizeof(*dev));
80002cfc:	00002821 	move	a1,zero
80002d00:	0c005c52 	jal	80017148 <memset>
80002d04:	24060030 	li	a2,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:46
	dev->d_blocks = 0;
	dev->d_blocksize = 1;
80002d08:	24020001 	li	v0,1
80002d0c:	ae020004 	sw	v0,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:47
	dev->d_open = stdout_open;
80002d10:	3c028000 	lui	v0,0x8000
80002d14:	24422c54 	addiu	v0,v0,11348
80002d18:	ae020020 	sw	v0,32(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:48
	dev->d_close = stdout_close;
80002d1c:	3c028000 	lui	v0,0x8000
80002d20:	24422c64 	addiu	v0,v0,11364
80002d24:	ae020024 	sw	v0,36(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:49
	dev->d_io = stdout_io;
80002d28:	3c028000 	lui	v0,0x8000
80002d2c:	24422c74 	addiu	v0,v0,11380
80002d30:	ae020028 	sw	v0,40(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:50
	dev->d_ioctl = stdout_ioctl;
80002d34:	3c028000 	lui	v0,0x8000
80002d38:	24422c6c 	addiu	v0,v0,11372
dev_init_stdout():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:62
		panic("stdout: dev_create_node.\n");
	}
	stdout_device_init(vop_info(node, device));

	int ret;
	if ((ret = vfs_add_dev("stdout", node, 0)) != 0) {
80002d3c:	3c048002 	lui	a0,0x8002
stdout_device_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:45
}

static void stdout_device_init(struct device *dev)
{
	memset(dev, 0, sizeof(*dev));
	dev->d_blocks = 0;
80002d40:	ae000000 	sw	zero,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:50
	dev->d_blocksize = 1;
	dev->d_open = stdout_open;
	dev->d_close = stdout_close;
	dev->d_io = stdout_io;
	dev->d_ioctl = stdout_ioctl;
80002d44:	ae02002c 	sw	v0,44(s0)
dev_init_stdout():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:62
		panic("stdout: dev_create_node.\n");
	}
	stdout_device_init(vop_info(node, device));

	int ret;
	if ((ret = vfs_add_dev("stdout", node, 0)) != 0) {
80002d48:	248412f4 	addiu	a0,a0,4852
80002d4c:	02002821 	move	a1,s0
80002d50:	0c001444 	jal	80005110 <vfs_add_dev>
80002d54:	00003021 	move	a2,zero
80002d58:	14400012 	bnez	v0,80002da4 <dev_init_stdout+0xd4>
80002d5c:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:65
		panic("stdout: vfs_add_dev: %e.\n", ret);
	}
}
80002d60:	8fb00010 	lw	s0,16(sp)
80002d64:	03e00008 	jr	ra
80002d68:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:59
{
	struct inode *node;
	if ((node = dev_create_inode()) == NULL) {
		panic("stdout: dev_create_node.\n");
	}
	stdout_device_init(vop_info(node, device));
80002d6c:	3c048002 	lui	a0,0x8002
80002d70:	3c068002 	lui	a2,0x8002
80002d74:	3c078002 	lui	a3,0x8002
80002d78:	248412c8 	addiu	a0,a0,4808
80002d7c:	2405003b 	li	a1,59
80002d80:	24c60e28 	addiu	a2,a2,3624
80002d84:	0c006b0b 	jal	8001ac2c <__panic>
80002d88:	24e70fbc 	addiu	a3,a3,4028
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:57

void dev_init_stdout(void)
{
	struct inode *node;
	if ((node = dev_create_inode()) == NULL) {
		panic("stdout: dev_create_node.\n");
80002d8c:	3c048002 	lui	a0,0x8002
80002d90:	3c068002 	lui	a2,0x8002
80002d94:	248412c8 	addiu	a0,a0,4808
80002d98:	24050039 	li	a1,57
80002d9c:	0c006b0b 	jal	8001ac2c <__panic>
80002da0:	24c612d8 	addiu	a2,a2,4824
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/devs/dev_stdout.c:63
	}
	stdout_device_init(vop_info(node, device));

	int ret;
	if ((ret = vfs_add_dev("stdout", node, 0)) != 0) {
		panic("stdout: vfs_add_dev: %e.\n", ret);
80002da4:	3c048002 	lui	a0,0x8002
80002da8:	3c068002 	lui	a2,0x8002
80002dac:	248412c8 	addiu	a0,a0,4808
80002db0:	2405003f 	li	a1,63
80002db4:	24c612fc 	addiu	a2,a2,4860
80002db8:	0c006b0b 	jal	8001ac2c <__panic>
80002dbc:	00403821 	move	a3,v0

80002dc0 <pipe_sync>:
pipe_sync():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:24
}

static int pipe_sync(struct fs *fs)
{
	return 0;
}
80002dc0:	03e00008 	jr	ra
80002dc4:	00001021 	move	v0,zero

80002dc8 <pipe_unmount>:
pipe_unmount():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:36
}

static int pipe_unmount(struct fs *fs)
{
	return -E_INVAL;
}
80002dc8:	03e00008 	jr	ra
80002dcc:	2402ffea 	li	v0,-22

80002dd0 <pipe_cleanup>:
pipe_cleanup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:42

static int pipe_cleanup(struct fs *fs)
{
	/* do nothing */
	return 0;
}
80002dd0:	03e00008 	jr	ra
80002dd4:	00001021 	move	v0,zero

80002dd8 <pipe_get_root>:
pipe_get_root():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:27
{
	return 0;
}

static struct inode *pipe_get_root(struct fs *fs)
{
80002dd8:	27bdffe8 	addiu	sp,sp,-24
80002ddc:	afb00010 	sw	s0,16(sp)
80002de0:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:28
	struct pipe_fs *pipe = fsop_info(fs, pipe);
80002de4:	1080000c 	beqz	a0,80002e18 <pipe_get_root+0x40>
80002de8:	00808021 	move	s0,a0
80002dec:	8c830084 	lw	v1,132(a0)
80002df0:	24025678 	li	v0,22136
80002df4:	54620009 	bnel	v1,v0,80002e1c <pipe_get_root+0x44>
80002df8:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:29
	vop_ref_inc(pipe->root);
80002dfc:	0c0010b6 	jal	800042d8 <inode_ref_inc>
80002e00:	8c840000 	lw	a0,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:31
	return pipe->root;
}
80002e04:	8fbf0014 	lw	ra,20(sp)
80002e08:	8e020000 	lw	v0,0(s0)
80002e0c:	8fb00010 	lw	s0,16(sp)
80002e10:	03e00008 	jr	ra
80002e14:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:28
	return 0;
}

static struct inode *pipe_get_root(struct fs *fs)
{
	struct pipe_fs *pipe = fsop_info(fs, pipe);
80002e18:	3c048002 	lui	a0,0x8002
80002e1c:	3c068002 	lui	a2,0x8002
80002e20:	3c078002 	lui	a3,0x8002
80002e24:	24841318 	addiu	a0,a0,4888
80002e28:	2405001c 	li	a1,28
80002e2c:	24c60e28 	addiu	a2,a2,3624
80002e30:	0c006b0b 	jal	8001ac2c <__panic>
80002e34:	24e71320 	addiu	a3,a3,4896

80002e38 <lock_pipe>:
lock_pipe():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:13
#include <error.h>
#include <assert.h>

void lock_pipe(struct pipe_fs *pipe)
{
	down(&(pipe->pipe_sem));
80002e38:	0800671f 	j	80019c7c <down>
80002e3c:	24840004 	addiu	a0,a0,4

80002e40 <unlock_pipe>:
unlock_pipe():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:18
}

void unlock_pipe(struct pipe_fs *pipe)
{
	up(&(pipe->pipe_sem));
80002e40:	0800671d 	j	80019c74 <up>
80002e44:	24840004 	addiu	a0,a0,4

80002e48 <pipe_init>:
pipe_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:60
	fs->fs_unmount = pipe_unmount;
	fs->fs_cleanup = pipe_cleanup;
}

void pipe_init(void)
{
80002e48:	27bdffe8 	addiu	sp,sp,-24
80002e4c:	afb00010 	sw	s0,16(sp)
80002e50:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:62
	struct fs *fs;
	if ((fs = alloc_fs(pipe)) == NULL) {
80002e54:	0c0011bf 	jal	800046fc <__alloc_fs>
80002e58:	24045678 	li	a0,22136
80002e5c:	1040002b 	beqz	v0,80002f0c <pipe_init+0xc4>
80002e60:	00408021 	move	s0,v0
pipe_fs_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:46
	return 0;
}

static void pipe_fs_init(struct fs *fs)
{
	struct pipe_fs *pipe = fsop_info(fs, pipe);
80002e64:	8c430084 	lw	v1,132(v0)
80002e68:	24025678 	li	v0,22136
80002e6c:	14620020 	bne	v1,v0,80002ef0 <pipe_init+0xa8>
80002e70:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:47
	if ((pipe->root = pipe_create_root(fs)) == NULL) {
80002e74:	0c000eed 	jal	80003bb4 <pipe_create_root>
80002e78:	02002021 	move	a0,s0
80002e7c:	10400030 	beqz	v0,80002f40 <pipe_init+0xf8>
80002e80:	ae020000 	sw	v0,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:50
		panic("pipe: create root inode failed.\n");
	}
	sem_init(&(pipe->pipe_sem), 1);
80002e84:	26040004 	addiu	a0,s0,4
80002e88:	0c006717 	jal	80019c5c <sem_init>
80002e8c:	24050001 	li	a1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:51
	list_init(&(pipe->pipe_list));
80002e90:	26020018 	addiu	v0,s0,24
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
 * list_init - initialize a new entry
 * @elm:        new entry to be initialized
 * */
static inline void list_init(list_entry_t * elm)
{
	elm->prev = elm->next = elm;
80002e94:	ae02001c 	sw	v0,28(s0)
80002e98:	ae020018 	sw	v0,24(s0)
pipe_fs_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:53

	fs->fs_sync = pipe_sync;
80002e9c:	3c028000 	lui	v0,0x8000
80002ea0:	24422dc0 	addiu	v0,v0,11712
80002ea4:	ae020088 	sw	v0,136(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:54
	fs->fs_get_root = pipe_get_root;
80002ea8:	3c028000 	lui	v0,0x8000
80002eac:	24422dd8 	addiu	v0,v0,11736
80002eb0:	ae02008c 	sw	v0,140(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:55
	fs->fs_unmount = pipe_unmount;
80002eb4:	3c028000 	lui	v0,0x8000
80002eb8:	24422dc8 	addiu	v0,v0,11720
80002ebc:	ae020090 	sw	v0,144(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:56
	fs->fs_cleanup = pipe_cleanup;
80002ec0:	3c028000 	lui	v0,0x8000
80002ec4:	24422dd0 	addiu	v0,v0,11728
pipe_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:68
		panic("pipe: create pipe_fs failed.\n");
	}
	pipe_fs_init(fs);

	int ret;
	if ((ret = vfs_add_fs("pipe", fs)) != 0) {
80002ec8:	3c048002 	lui	a0,0x8002
pipe_fs_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:56
	list_init(&(pipe->pipe_list));

	fs->fs_sync = pipe_sync;
	fs->fs_get_root = pipe_get_root;
	fs->fs_unmount = pipe_unmount;
	fs->fs_cleanup = pipe_cleanup;
80002ecc:	ae020094 	sw	v0,148(s0)
pipe_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:68
		panic("pipe: create pipe_fs failed.\n");
	}
	pipe_fs_init(fs);

	int ret;
	if ((ret = vfs_add_fs("pipe", fs)) != 0) {
80002ed0:	24841390 	addiu	a0,a0,5008
80002ed4:	0c001440 	jal	80005100 <vfs_add_fs>
80002ed8:	02002821 	move	a1,s0
80002edc:	14400011 	bnez	v0,80002f24 <pipe_init+0xdc>
80002ee0:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:71
		panic("pipe: vfs_add_fs: %e.\n", ret);
	}
}
80002ee4:	8fb00010 	lw	s0,16(sp)
80002ee8:	03e00008 	jr	ra
80002eec:	27bd0018 	addiu	sp,sp,24
pipe_fs_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:46
	return 0;
}

static void pipe_fs_init(struct fs *fs)
{
	struct pipe_fs *pipe = fsop_info(fs, pipe);
80002ef0:	3c068002 	lui	a2,0x8002
80002ef4:	3c078002 	lui	a3,0x8002
80002ef8:	24841318 	addiu	a0,a0,4888
80002efc:	2405002e 	li	a1,46
80002f00:	24c60e28 	addiu	a2,a2,3624
80002f04:	0c006b0b 	jal	8001ac2c <__panic>
80002f08:	24e71320 	addiu	a3,a3,4896
pipe_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:63

void pipe_init(void)
{
	struct fs *fs;
	if ((fs = alloc_fs(pipe)) == NULL) {
		panic("pipe: create pipe_fs failed.\n");
80002f0c:	3c048002 	lui	a0,0x8002
80002f10:	3c068002 	lui	a2,0x8002
80002f14:	24841318 	addiu	a0,a0,4888
80002f18:	2405003f 	li	a1,63
80002f1c:	0c006b0b 	jal	8001ac2c <__panic>
80002f20:	24c6134c 	addiu	a2,a2,4940
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:69
	}
	pipe_fs_init(fs);

	int ret;
	if ((ret = vfs_add_fs("pipe", fs)) != 0) {
		panic("pipe: vfs_add_fs: %e.\n", ret);
80002f24:	3c048002 	lui	a0,0x8002
80002f28:	3c068002 	lui	a2,0x8002
80002f2c:	24841318 	addiu	a0,a0,4888
80002f30:	24050045 	li	a1,69
80002f34:	24c61398 	addiu	a2,a2,5016
80002f38:	0c006b0b 	jal	8001ac2c <__panic>
80002f3c:	00403821 	move	a3,v0
pipe_fs_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe.c:48

static void pipe_fs_init(struct fs *fs)
{
	struct pipe_fs *pipe = fsop_info(fs, pipe);
	if ((pipe->root = pipe_create_root(fs)) == NULL) {
		panic("pipe: create root inode failed.\n");
80002f40:	3c048002 	lui	a0,0x8002
80002f44:	3c068002 	lui	a2,0x8002
80002f48:	24841318 	addiu	a0,a0,4888
80002f4c:	24050030 	li	a1,48
80002f50:	0c006b0b 	jal	8001ac2c <__panic>
80002f54:	24c6136c 	addiu	a2,a2,4972

80002f58 <pipe_inode_gettype>:
pipe_inode_gettype():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:117
	return 0;
}

static int pipe_inode_gettype(struct inode *node, uint32_t * type_store)
{
	*type_store = S_IFCHR;
80002f58:	24022000 	li	v0,8192
80002f5c:	aca20000 	sw	v0,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:119
	return 0;
}
80002f60:	03e00008 	jr	ra
80002f64:	00001021 	move	v0,zero

80002f68 <pipe_inode_reclaim>:
pipe_inode_reclaim():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:96
	iobuf_skip(iob, len);
	return 0;
}

static int pipe_inode_reclaim(struct inode *node)
{
80002f68:	27bdffe0 	addiu	sp,sp,-32
80002f6c:	afb00014 	sw	s0,20(sp)
80002f70:	afbf001c 	sw	ra,28(sp)
80002f74:	afb10018 	sw	s1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:97
	struct pipe_inode *pin = vop_info(node, pipe_inode);
80002f78:	10800031 	beqz	a0,80003040 <pipe_inode_reclaim+0xd8>
80002f7c:	00808021 	move	s0,a0
80002f80:	8c830038 	lw	v1,56(a0)
80002f84:	24021236 	li	v0,4662
80002f88:	5462002e 	bnel	v1,v0,80003044 <pipe_inode_reclaim+0xdc>
80002f8c:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:98
	if (pin->name != NULL) {
80002f90:	8c820004 	lw	v0,4(a0)
80002f94:	10400018 	beqz	v0,80002ff8 <pipe_inode_reclaim+0x90>
80002f98:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:99
		struct pipe_fs *pipe = fsop_info(vop_fs(node), pipe);
80002f9c:	8c910044 	lw	s1,68(a0)
80002fa0:	1220002f 	beqz	s1,80003060 <pipe_inode_reclaim+0xf8>
80002fa4:	24025678 	li	v0,22136
80002fa8:	8e230084 	lw	v1,132(s1)
80002fac:	1462002d 	bne	v1,v0,80003064 <pipe_inode_reclaim+0xfc>
80002fb0:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:100
		lock_pipe(pipe);
80002fb4:	0c000b8e 	jal	80002e38 <lock_pipe>
80002fb8:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:101
		assert(pin->reclaim_count > 0);
80002fbc:	8e020008 	lw	v0,8(s0)
80002fc0:	1840002f 	blez	v0,80003080 <pipe_inode_reclaim+0x118>
80002fc4:	2442ffff 	addiu	v0,v0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:102
		if ((--pin->reclaim_count) != 0 || inode_ref_count(node) != 0) {
80002fc8:	14400015 	bnez	v0,80003020 <pipe_inode_reclaim+0xb8>
80002fcc:	ae020008 	sw	v0,8(s0)
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
 *
 * Atomically reads the value of @v.
 * */
static __always_inline int atomic_read(const atomic_t * v)
{
	return v->counter;
80002fd0:	8e02003c 	lw	v0,60(s0)
pipe_inode_reclaim():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:102
80002fd4:	14400012 	bnez	v0,80003020 <pipe_inode_reclaim+0xb8>
80002fd8:	02202021 	move	a0,s1
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
80002fdc:	8e030010 	lw	v1,16(s0)
80002fe0:	8e020014 	lw	v0,20(s0)
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
80002fe4:	ac620004 	sw	v0,4(v1)
pipe_inode_reclaim():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:107
			unlock_pipe(pipe);
			return -E_BUSY;
		}
		list_del(&(pin->pipe_link));
		unlock_pipe(pipe);
80002fe8:	0c000b90 	jal	80002e40 <unlock_pipe>
80002fec:	ac430000 	sw	v1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:108
		kfree(pin->name);
80002ff0:	0c0054b1 	jal	800152c4 <kfree>
80002ff4:	8e040004 	lw	a0,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:110
	}
	pipe_state_release(pin->state);
80002ff8:	0c000f82 	jal	80003e08 <pipe_state_release>
80002ffc:	8e04000c 	lw	a0,12(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:111
	vop_kill(node);
80003000:	0c00109d 	jal	80004274 <inode_kill>
80003004:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:113
	return 0;
}
80003008:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:112
		unlock_pipe(pipe);
		kfree(pin->name);
	}
	pipe_state_release(pin->state);
	vop_kill(node);
	return 0;
8000300c:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:113
}
80003010:	8fb10018 	lw	s1,24(sp)
80003014:	8fb00014 	lw	s0,20(sp)
80003018:	03e00008 	jr	ra
8000301c:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:103
	if (pin->name != NULL) {
		struct pipe_fs *pipe = fsop_info(vop_fs(node), pipe);
		lock_pipe(pipe);
		assert(pin->reclaim_count > 0);
		if ((--pin->reclaim_count) != 0 || inode_ref_count(node) != 0) {
			unlock_pipe(pipe);
80003020:	0c000b90 	jal	80002e40 <unlock_pipe>
80003024:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:113
		kfree(pin->name);
	}
	pipe_state_release(pin->state);
	vop_kill(node);
	return 0;
}
80003028:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:104
		struct pipe_fs *pipe = fsop_info(vop_fs(node), pipe);
		lock_pipe(pipe);
		assert(pin->reclaim_count > 0);
		if ((--pin->reclaim_count) != 0 || inode_ref_count(node) != 0) {
			unlock_pipe(pipe);
			return -E_BUSY;
8000302c:	2402fff0 	li	v0,-16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:113
		kfree(pin->name);
	}
	pipe_state_release(pin->state);
	vop_kill(node);
	return 0;
}
80003030:	8fb10018 	lw	s1,24(sp)
80003034:	8fb00014 	lw	s0,20(sp)
80003038:	03e00008 	jr	ra
8000303c:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:97
	return 0;
}

static int pipe_inode_reclaim(struct inode *node)
{
	struct pipe_inode *pin = vop_info(node, pipe_inode);
80003040:	3c048002 	lui	a0,0x8002
80003044:	3c068002 	lui	a2,0x8002
80003048:	3c078002 	lui	a3,0x8002
8000304c:	248413b0 	addiu	a0,a0,5040
80003050:	24050061 	li	a1,97
80003054:	24c60e28 	addiu	a2,a2,3624
80003058:	0c006b0b 	jal	8001ac2c <__panic>
8000305c:	24e713c0 	addiu	a3,a3,5056
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:99
	if (pin->name != NULL) {
		struct pipe_fs *pipe = fsop_info(vop_fs(node), pipe);
80003060:	3c048002 	lui	a0,0x8002
80003064:	3c068002 	lui	a2,0x8002
80003068:	3c078002 	lui	a3,0x8002
8000306c:	248413b0 	addiu	a0,a0,5040
80003070:	24050063 	li	a1,99
80003074:	24c60e28 	addiu	a2,a2,3624
80003078:	0c006b0b 	jal	8001ac2c <__panic>
8000307c:	24e71320 	addiu	a3,a3,4896
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:101
		lock_pipe(pipe);
		assert(pin->reclaim_count > 0);
80003080:	3c048002 	lui	a0,0x8002
80003084:	3c068002 	lui	a2,0x8002
80003088:	3c078002 	lui	a3,0x8002
8000308c:	248413b0 	addiu	a0,a0,5040
80003090:	24050065 	li	a1,101
80003094:	24c60e28 	addiu	a2,a2,3624
80003098:	0c006b0b 	jal	8001ac2c <__panic>
8000309c:	24e713f8 	addiu	a3,a3,5112

800030a0 <pipe_inode_open>:
pipe_inode_open():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:15
#include <unistd.h>
#include <error.h>
#include <assert.h>

static int pipe_inode_open(struct inode *node, uint32_t open_flags)
{
800030a0:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:16
	if (open_flags & (O_TRUNC | O_APPEND)) {
800030a4:	30a20600 	andi	v0,a1,0x600
800030a8:	14400010 	bnez	v0,800030ec <pipe_inode_open+0x4c>
800030ac:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:19
		return -E_INVAL;
	}
	struct pipe_inode *pin = vop_info(node, pipe_inode);
800030b0:	10800019 	beqz	a0,80003118 <pipe_inode_open+0x78>
800030b4:	24021236 	li	v0,4662
800030b8:	8c830038 	lw	v1,56(a0)
800030bc:	14620016 	bne	v1,v0,80003118 <pipe_inode_open+0x78>
800030c0:	30a50003 	andi	a1,a1,0x3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:20
	switch (open_flags & O_ACCMODE) {
800030c4:	14a00007 	bnez	a1,800030e4 <pipe_inode_open+0x44>
800030c8:	24020001 	li	v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:22
	case O_RDONLY:
		return (pin->pin_type == PIN_RDONLY) ? 0 : -E_INVAL;
800030cc:	8c830000 	lw	v1,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:28
	case O_WRONLY:
		return (pin->pin_type == PIN_WRONLY) ? 0 : -E_INVAL;
	default:
		return -E_INVAL;
	}
}
800030d0:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:22
		return -E_INVAL;
	}
	struct pipe_inode *pin = vop_info(node, pipe_inode);
	switch (open_flags & O_ACCMODE) {
	case O_RDONLY:
		return (pin->pin_type == PIN_RDONLY) ? 0 : -E_INVAL;
800030d4:	2402ffea 	li	v0,-22
800030d8:	0003100a 	movz	v0,zero,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:28
	case O_WRONLY:
		return (pin->pin_type == PIN_WRONLY) ? 0 : -E_INVAL;
	default:
		return -E_INVAL;
	}
}
800030dc:	03e00008 	jr	ra
800030e0:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:20
{
	if (open_flags & (O_TRUNC | O_APPEND)) {
		return -E_INVAL;
	}
	struct pipe_inode *pin = vop_info(node, pipe_inode);
	switch (open_flags & O_ACCMODE) {
800030e4:	50a20005 	beql	a1,v0,800030fc <pipe_inode_open+0x5c>
800030e8:	8c820000 	lw	v0,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:28
	case O_WRONLY:
		return (pin->pin_type == PIN_WRONLY) ? 0 : -E_INVAL;
	default:
		return -E_INVAL;
	}
}
800030ec:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:26
	case O_RDONLY:
		return (pin->pin_type == PIN_RDONLY) ? 0 : -E_INVAL;
	case O_WRONLY:
		return (pin->pin_type == PIN_WRONLY) ? 0 : -E_INVAL;
	default:
		return -E_INVAL;
800030f0:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:28
	}
}
800030f4:	03e00008 	jr	ra
800030f8:	27bd0018 	addiu	sp,sp,24
800030fc:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:24
	struct pipe_inode *pin = vop_info(node, pipe_inode);
	switch (open_flags & O_ACCMODE) {
	case O_RDONLY:
		return (pin->pin_type == PIN_RDONLY) ? 0 : -E_INVAL;
	case O_WRONLY:
		return (pin->pin_type == PIN_WRONLY) ? 0 : -E_INVAL;
80003100:	2403ffea 	li	v1,-22
80003104:	38420001 	xori	v0,v0,0x1
80003108:	0002180a 	movz	v1,zero,v0
8000310c:	00601021 	move	v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:28
	default:
		return -E_INVAL;
	}
}
80003110:	03e00008 	jr	ra
80003114:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:19
static int pipe_inode_open(struct inode *node, uint32_t open_flags)
{
	if (open_flags & (O_TRUNC | O_APPEND)) {
		return -E_INVAL;
	}
	struct pipe_inode *pin = vop_info(node, pipe_inode);
80003118:	3c048002 	lui	a0,0x8002
8000311c:	3c068002 	lui	a2,0x8002
80003120:	3c078002 	lui	a3,0x8002
80003124:	248413b0 	addiu	a0,a0,5040
80003128:	24050013 	li	a1,19
8000312c:	24c60e28 	addiu	a2,a2,3624
80003130:	0c006b0b 	jal	8001ac2c <__panic>
80003134:	24e713c0 	addiu	a3,a3,5056

80003138 <pipe_inode_namefile>:
pipe_inode_namefile():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:81
	    pipe_state_size(pin->state, pin->pin_type == PIN_WRONLY);
	return 0;
}

static int pipe_inode_namefile(struct inode *node, struct iobuf *iob)
{
80003138:	27bdffd8 	addiu	sp,sp,-40
8000313c:	afb30020 	sw	s3,32(sp)
80003140:	afb00014 	sw	s0,20(sp)
80003144:	afbf0024 	sw	ra,36(sp)
80003148:	afb2001c 	sw	s2,28(sp)
8000314c:	afb10018 	sw	s1,24(sp)
80003150:	00809821 	move	s3,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:82
	struct pipe_inode *pin = vop_info(node, pipe_inode);
80003154:	10800026 	beqz	a0,800031f0 <pipe_inode_namefile+0xb8>
80003158:	00a08021 	move	s0,a1
8000315c:	8c830038 	lw	v1,56(a0)
80003160:	24021236 	li	v0,4662
80003164:	54620023 	bnel	v1,v0,800031f4 <pipe_inode_namefile+0xbc>
80003168:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:83
	size_t len = (pin->name != NULL) ? strlen(pin->name) : 0;
8000316c:	8c840004 	lw	a0,4(a0)
80003170:	1080001d 	beqz	a0,800031e8 <pipe_inode_namefile+0xb0>
80003174:	24120001 	li	s2,1
80003178:	0c005b79 	jal	80016de4 <strlen>
8000317c:	00000000 	nop
80003180:	00408821 	move	s1,v0
80003184:	24520001 	addiu	s2,v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:84
	if (iob->io_resid < len + 1) {
80003188:	8e03000c 	lw	v1,12(s0)
8000318c:	0072182b 	sltu	v1,v1,s2
80003190:	1460000e 	bnez	v1,800031cc <pipe_inode_namefile+0x94>
80003194:	2402fff4 	li	v0,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:87
		return -E_NO_MEM;
	}
	if (pin->name != NULL) {
80003198:	8e650004 	lw	a1,4(s3)
8000319c:	50a00005 	beqzl	a1,800031b4 <pipe_inode_namefile+0x7c>
800031a0:	8e020000 	lw	v0,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:88
		memcpy(iob->io_base, pin->name, len);
800031a4:	8e040000 	lw	a0,0(s0)
800031a8:	0c005c7c 	jal	800171f0 <memcpy>
800031ac:	02203021 	move	a2,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:90
	}
	((char *)(iob->io_base))[len++] = '\0';
800031b0:	8e020000 	lw	v0,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:91
	iobuf_skip(iob, len);
800031b4:	02002021 	move	a0,s0
800031b8:	02402821 	move	a1,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:90
		return -E_NO_MEM;
	}
	if (pin->name != NULL) {
		memcpy(iob->io_base, pin->name, len);
	}
	((char *)(iob->io_base))[len++] = '\0';
800031bc:	00518821 	addu	s1,v0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:91
	iobuf_skip(iob, len);
800031c0:	0c00334e 	jal	8000cd38 <iobuf_skip>
800031c4:	a2200000 	sb	zero,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:92
	return 0;
800031c8:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:93
}
800031cc:	8fbf0024 	lw	ra,36(sp)
800031d0:	8fb30020 	lw	s3,32(sp)
800031d4:	8fb2001c 	lw	s2,28(sp)
800031d8:	8fb10018 	lw	s1,24(sp)
800031dc:	8fb00014 	lw	s0,20(sp)
800031e0:	03e00008 	jr	ra
800031e4:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:83
}

static int pipe_inode_namefile(struct inode *node, struct iobuf *iob)
{
	struct pipe_inode *pin = vop_info(node, pipe_inode);
	size_t len = (pin->name != NULL) ? strlen(pin->name) : 0;
800031e8:	08000c62 	j	80003188 <pipe_inode_namefile+0x50>
800031ec:	00008821 	move	s1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:82
	return 0;
}

static int pipe_inode_namefile(struct inode *node, struct iobuf *iob)
{
	struct pipe_inode *pin = vop_info(node, pipe_inode);
800031f0:	3c048002 	lui	a0,0x8002
800031f4:	3c068002 	lui	a2,0x8002
800031f8:	3c078002 	lui	a3,0x8002
800031fc:	248413b0 	addiu	a0,a0,5040
80003200:	24050052 	li	a1,82
80003204:	24c60e28 	addiu	a2,a2,3624
80003208:	0c006b0b 	jal	8001ac2c <__panic>
8000320c:	24e713c0 	addiu	a3,a3,5056

80003210 <pipe_inode_fstat>:
pipe_inode_fstat():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:66
	}
	return 0;
}

static int pipe_inode_fstat(struct inode *node, struct stat *stat)
{
80003210:	27bdffe0 	addiu	sp,sp,-32
80003214:	afb10014 	sw	s1,20(sp)
80003218:	00a08821 	move	s1,a1
8000321c:	afb00010 	sw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:68
	int ret;
	memset(stat, 0, sizeof(struct stat));
80003220:	00002821 	move	a1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:66
	}
	return 0;
}

static int pipe_inode_fstat(struct inode *node, struct stat *stat)
{
80003224:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:68
	int ret;
	memset(stat, 0, sizeof(struct stat));
80003228:	24060010 	li	a2,16
8000322c:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:66
	}
	return 0;
}

static int pipe_inode_fstat(struct inode *node, struct stat *stat)
{
80003230:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:68
	int ret;
	memset(stat, 0, sizeof(struct stat));
80003234:	0c005c52 	jal	80017148 <memset>
80003238:	afb20018 	sw	s2,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:69
	if ((ret = vop_gettype(node, &(stat->st_mode))) != 0) {
8000323c:	12000024 	beqz	s0,800032d0 <pipe_inode_fstat+0xc0>
80003240:	3c048002 	lui	a0,0x8002
80003244:	8e020048 	lw	v0,72(s0)
80003248:	10400022 	beqz	v0,800032d4 <pipe_inode_fstat+0xc4>
8000324c:	3c068002 	lui	a2,0x8002
80003250:	8c420040 	lw	v0,64(v0)
80003254:	1040001e 	beqz	v0,800032d0 <pipe_inode_fstat+0xc0>
80003258:	3c058002 	lui	a1,0x8002
8000325c:	02002021 	move	a0,s0
80003260:	0c0010f3 	jal	800043cc <inode_check>
80003264:	24a51040 	addiu	a1,a1,4160
80003268:	8e020048 	lw	v0,72(s0)
8000326c:	02002021 	move	a0,s0
80003270:	8c420040 	lw	v0,64(v0)
80003274:	0040f809 	jalr	v0
80003278:	02202821 	move	a1,s1
8000327c:	1440000d 	bnez	v0,800032b4 <pipe_inode_fstat+0xa4>
80003280:	00409021 	move	s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:72
		return ret;
	}
	struct pipe_inode *pin = vop_info(node, pipe_inode);
80003284:	8e030038 	lw	v1,56(s0)
80003288:	24021236 	li	v0,4662
8000328c:	14620017 	bne	v1,v0,800032ec <pipe_inode_fstat+0xdc>
80003290:	24020001 	li	v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:76
	stat->st_nlinks = 1;
	stat->st_blocks = 0;
	stat->st_size =
	    pipe_state_size(pin->state, pin->pin_type == PIN_WRONLY);
80003294:	8e050000 	lw	a1,0(s0)
80003298:	8e04000c 	lw	a0,12(s0)
8000329c:	38a50001 	xori	a1,a1,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:73
	memset(stat, 0, sizeof(struct stat));
	if ((ret = vop_gettype(node, &(stat->st_mode))) != 0) {
		return ret;
	}
	struct pipe_inode *pin = vop_info(node, pipe_inode);
	stat->st_nlinks = 1;
800032a0:	ae220004 	sw	v0,4(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:74
	stat->st_blocks = 0;
800032a4:	ae200008 	sw	zero,8(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:76
	stat->st_size =
	    pipe_state_size(pin->state, pin->pin_type == PIN_WRONLY);
800032a8:	0c000fcb 	jal	80003f2c <pipe_state_size>
800032ac:	2ca50001 	sltiu	a1,a1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:75
		return ret;
	}
	struct pipe_inode *pin = vop_info(node, pipe_inode);
	stat->st_nlinks = 1;
	stat->st_blocks = 0;
	stat->st_size =
800032b0:	ae22000c 	sw	v0,12(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:78
	    pipe_state_size(pin->state, pin->pin_type == PIN_WRONLY);
	return 0;
}
800032b4:	8fbf001c 	lw	ra,28(sp)
800032b8:	02401021 	move	v0,s2
800032bc:	8fb10014 	lw	s1,20(sp)
800032c0:	8fb20018 	lw	s2,24(sp)
800032c4:	8fb00010 	lw	s0,16(sp)
800032c8:	03e00008 	jr	ra
800032cc:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:69

static int pipe_inode_fstat(struct inode *node, struct stat *stat)
{
	int ret;
	memset(stat, 0, sizeof(struct stat));
	if ((ret = vop_gettype(node, &(stat->st_mode))) != 0) {
800032d0:	3c068002 	lui	a2,0x8002
800032d4:	3c078002 	lui	a3,0x8002
800032d8:	248413b0 	addiu	a0,a0,5040
800032dc:	24050045 	li	a1,69
800032e0:	24c60e28 	addiu	a2,a2,3624
800032e4:	0c006b0b 	jal	8001ac2c <__panic>
800032e8:	24e70ff0 	addiu	a3,a3,4080
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:72
		return ret;
	}
	struct pipe_inode *pin = vop_info(node, pipe_inode);
800032ec:	3c048002 	lui	a0,0x8002
800032f0:	3c068002 	lui	a2,0x8002
800032f4:	3c078002 	lui	a3,0x8002
800032f8:	248413b0 	addiu	a0,a0,5040
800032fc:	24050048 	li	a1,72
80003300:	24c60e28 	addiu	a2,a2,3624
80003304:	0c006b0b 	jal	8001ac2c <__panic>
80003308:	24e713c0 	addiu	a3,a3,5056

8000330c <pipe_inode_write>:
pipe_inode_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:52
	}
	return 0;
}

static int pipe_inode_write(struct inode *node, struct iobuf *iob)
{
8000330c:	27bdffe0 	addiu	sp,sp,-32
80003310:	afb00014 	sw	s0,20(sp)
80003314:	afbf001c 	sw	ra,28(sp)
80003318:	afb10018 	sw	s1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:53
	struct pipe_inode *pin = vop_info(node, pipe_inode);
8000331c:	1080001d 	beqz	a0,80003394 <pipe_inode_write+0x88>
80003320:	00a08021 	move	s0,a1
80003324:	8c830038 	lw	v1,56(a0)
80003328:	24021236 	li	v0,4662
8000332c:	14620019 	bne	v1,v0,80003394 <pipe_inode_write+0x88>
80003330:	24020001 	li	v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:54
	if (pin->pin_type != PIN_WRONLY) {
80003334:	8c830000 	lw	v1,0(a0)
80003338:	14620008 	bne	v1,v0,8000335c <pipe_inode_write+0x50>
8000333c:	2411ffea 	li	s1,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:58
		return -E_INVAL;
	}
	size_t ret;
	if ((ret =
80003340:	8c84000c 	lw	a0,12(a0)
80003344:	8ca50000 	lw	a1,0(a1)
80003348:	8e06000c 	lw	a2,12(s0)
8000334c:	0c00102f 	jal	800040bc <pipe_state_write>
80003350:	00008821 	move	s1,zero
80003354:	14400007 	bnez	v0,80003374 <pipe_inode_write+0x68>
80003358:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:63
	     pipe_state_write(pin->state, iob->io_base, iob->io_resid)) != 0) {
		iobuf_skip(iob, ret);
	}
	return 0;
}
8000335c:	8fbf001c 	lw	ra,28(sp)
80003360:	02201021 	move	v0,s1
80003364:	8fb00014 	lw	s0,20(sp)
80003368:	8fb10018 	lw	s1,24(sp)
8000336c:	03e00008 	jr	ra
80003370:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:60
		return -E_INVAL;
	}
	size_t ret;
	if ((ret =
	     pipe_state_write(pin->state, iob->io_base, iob->io_resid)) != 0) {
		iobuf_skip(iob, ret);
80003374:	0c00334e 	jal	8000cd38 <iobuf_skip>
80003378:	00402821 	move	a1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:63
	}
	return 0;
}
8000337c:	8fbf001c 	lw	ra,28(sp)
80003380:	02201021 	move	v0,s1
80003384:	8fb00014 	lw	s0,20(sp)
80003388:	8fb10018 	lw	s1,24(sp)
8000338c:	03e00008 	jr	ra
80003390:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:53
	return 0;
}

static int pipe_inode_write(struct inode *node, struct iobuf *iob)
{
	struct pipe_inode *pin = vop_info(node, pipe_inode);
80003394:	3c048002 	lui	a0,0x8002
80003398:	3c068002 	lui	a2,0x8002
8000339c:	3c078002 	lui	a3,0x8002
800033a0:	248413b0 	addiu	a0,a0,5040
800033a4:	24050035 	li	a1,53
800033a8:	24c60e28 	addiu	a2,a2,3624
800033ac:	0c006b0b 	jal	8001ac2c <__panic>
800033b0:	24e713c0 	addiu	a3,a3,5056

800033b4 <pipe_inode_read>:
pipe_inode_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:38
	pipe_state_close(pin->state);
	return 0;
}

static int pipe_inode_read(struct inode *node, struct iobuf *iob)
{
800033b4:	27bdffe0 	addiu	sp,sp,-32
800033b8:	afb00014 	sw	s0,20(sp)
800033bc:	afbf001c 	sw	ra,28(sp)
800033c0:	afb10018 	sw	s1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:39
	struct pipe_inode *pin = vop_info(node, pipe_inode);
800033c4:	10800018 	beqz	a0,80003428 <pipe_inode_read+0x74>
800033c8:	00a08021 	move	s0,a1
800033cc:	8c830038 	lw	v1,56(a0)
800033d0:	24021236 	li	v0,4662
800033d4:	54620015 	bnel	v1,v0,8000342c <pipe_inode_read+0x78>
800033d8:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:40
	if (pin->pin_type != PIN_RDONLY) {
800033dc:	8c820000 	lw	v0,0(a0)
800033e0:	1440000b 	bnez	v0,80003410 <pipe_inode_read+0x5c>
800033e4:	2411ffea 	li	s1,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:44
		return -E_INVAL;
	}
	size_t ret;
	if ((ret =
800033e8:	8c84000c 	lw	a0,12(a0)
800033ec:	8ca50000 	lw	a1,0(a1)
800033f0:	8e06000c 	lw	a2,12(s0)
800033f4:	0c000fd7 	jal	80003f5c <pipe_state_read>
800033f8:	00008821 	move	s1,zero
800033fc:	10400005 	beqz	v0,80003414 <pipe_inode_read+0x60>
80003400:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:46
	     pipe_state_read(pin->state, iob->io_base, iob->io_resid)) != 0) {
		iobuf_skip(iob, ret);
80003404:	02002021 	move	a0,s0
80003408:	0c00334e 	jal	8000cd38 <iobuf_skip>
8000340c:	00402821 	move	a1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:49
	}
	return 0;
}
80003410:	8fbf001c 	lw	ra,28(sp)
80003414:	02201021 	move	v0,s1
80003418:	8fb00014 	lw	s0,20(sp)
8000341c:	8fb10018 	lw	s1,24(sp)
80003420:	03e00008 	jr	ra
80003424:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:39
	return 0;
}

static int pipe_inode_read(struct inode *node, struct iobuf *iob)
{
	struct pipe_inode *pin = vop_info(node, pipe_inode);
80003428:	3c048002 	lui	a0,0x8002
8000342c:	3c068002 	lui	a2,0x8002
80003430:	3c078002 	lui	a3,0x8002
80003434:	248413b0 	addiu	a0,a0,5040
80003438:	24050027 	li	a1,39
8000343c:	24c60e28 	addiu	a2,a2,3624
80003440:	0c006b0b 	jal	8001ac2c <__panic>
80003444:	24e713c0 	addiu	a3,a3,5056

80003448 <pipe_inode_close>:
pipe_inode_close():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:31
		return -E_INVAL;
	}
}

static int pipe_inode_close(struct inode *node)
{
80003448:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:32
	struct pipe_inode *pin = vop_info(node, pipe_inode);
8000344c:	1080000b 	beqz	a0,8000347c <pipe_inode_close+0x34>
80003450:	afbf0014 	sw	ra,20(sp)
80003454:	8c830038 	lw	v1,56(a0)
80003458:	24021236 	li	v0,4662
8000345c:	54620008 	bnel	v1,v0,80003480 <pipe_inode_close+0x38>
80003460:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:33
	pipe_state_close(pin->state);
80003464:	0c000fb3 	jal	80003ecc <pipe_state_close>
80003468:	8c84000c 	lw	a0,12(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:35
	return 0;
}
8000346c:	8fbf0014 	lw	ra,20(sp)
80003470:	00001021 	move	v0,zero
80003474:	03e00008 	jr	ra
80003478:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:32
	}
}

static int pipe_inode_close(struct inode *node)
{
	struct pipe_inode *pin = vop_info(node, pipe_inode);
8000347c:	3c048002 	lui	a0,0x8002
80003480:	3c068002 	lui	a2,0x8002
80003484:	3c078002 	lui	a3,0x8002
80003488:	248413b0 	addiu	a0,a0,5040
8000348c:	24050020 	li	a1,32
80003490:	24c60e28 	addiu	a2,a2,3624
80003494:	0c006b0b 	jal	8001ac2c <__panic>
80003498:	24e713c0 	addiu	a3,a3,5056

8000349c <pipe_create_inode>:
pipe_create_inode():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:159
	list_init(&(pin->pipe_link));
}

struct inode *pipe_create_inode(struct fs *fs, const char *__name,
				struct pipe_state *state, bool readonly)
{
8000349c:	27bdffd0 	addiu	sp,sp,-48
800034a0:	afb30028 	sw	s3,40(sp)
800034a4:	afb10020 	sw	s1,32(sp)
800034a8:	afb0001c 	sw	s0,28(sp)
800034ac:	afbf002c 	sw	ra,44(sp)
800034b0:	afb20024 	sw	s2,36(sp)
800034b4:	00808821 	move	s1,a0
800034b8:	00c08021 	move	s0,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:161
	char *name = NULL;
	if (__name == NULL || (name = strdup(__name)) != NULL) {
800034bc:	10a00030 	beqz	a1,80003580 <pipe_create_inode+0xe4>
800034c0:	00e09821 	move	s3,a3
800034c4:	0c005917 	jal	8001645c <strdup>
800034c8:	00a02021 	move	a0,a1
800034cc:	1040002e 	beqz	v0,80003588 <pipe_create_inode+0xec>
800034d0:	00409021 	move	s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:163
		struct inode *node;
		if ((node = alloc_inode(pipe_inode)) != NULL) {
800034d4:	0c001091 	jal	80004244 <__alloc_inode>
800034d8:	24041236 	li	a0,4662
800034dc:	1040001c 	beqz	v0,80003550 <pipe_create_inode+0xb4>
800034e0:	3c058002 	lui	a1,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:164
			vop_init(node, &pipe_node_ops, fs);
800034e4:	00402021 	move	a0,v0
800034e8:	24a5fe5c 	addiu	a1,a1,-420
800034ec:	02203021 	move	a2,s1
800034f0:	0c0010d2 	jal	80004348 <inode_init>
800034f4:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:165
			pipe_inode_init(vop_info(node, pipe_inode), name, state,
800034f8:	8fa20010 	lw	v0,16(sp)
800034fc:	24031236 	li	v1,4662
80003500:	8c440038 	lw	a0,56(v0)
80003504:	14830022 	bne	a0,v1,80003590 <pipe_create_inode+0xf4>
80003508:	3c048002 	lui	a0,0x8002
pipe_inode_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:151

static void
pipe_inode_init(struct pipe_inode *pin, char *name, struct pipe_state *state,
		bool readonly)
{
	assert(state != NULL);
8000350c:	12000027 	beqz	s0,800035ac <pipe_create_inode+0x110>
80003510:	24430010 	addiu	v1,v0,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:152
	pin->pin_type = readonly ? PIN_RDONLY : PIN_WRONLY;
80003514:	2e730001 	sltiu	s3,s3,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:153
	pin->name = name, pin->state = state, pin->reclaim_count = 1;
80003518:	24040001 	li	a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:152
static void
pipe_inode_init(struct pipe_inode *pin, char *name, struct pipe_state *state,
		bool readonly)
{
	assert(state != NULL);
	pin->pin_type = readonly ? PIN_RDONLY : PIN_WRONLY;
8000351c:	ac530000 	sw	s3,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:153
	pin->name = name, pin->state = state, pin->reclaim_count = 1;
80003520:	ac520004 	sw	s2,4(v0)
80003524:	ac50000c 	sw	s0,12(v0)
80003528:	ac440008 	sw	a0,8(v0)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
 * list_init - initialize a new entry
 * @elm:        new entry to be initialized
 * */
static inline void list_init(list_entry_t * elm)
{
	elm->prev = elm->next = elm;
8000352c:	ac430014 	sw	v1,20(v0)
80003530:	ac430010 	sw	v1,16(v0)
pipe_create_inode():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:174
		if (name != NULL) {
			kfree(name);
		}
	}
	return NULL;
}
80003534:	8fbf002c 	lw	ra,44(sp)
80003538:	8fb30028 	lw	s3,40(sp)
8000353c:	8fb20024 	lw	s2,36(sp)
80003540:	8fb10020 	lw	s1,32(sp)
80003544:	8fb0001c 	lw	s0,28(sp)
80003548:	03e00008 	jr	ra
8000354c:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:169
			vop_init(node, &pipe_node_ops, fs);
			pipe_inode_init(vop_info(node, pipe_inode), name, state,
					readonly);
			return node;
		}
		if (name != NULL) {
80003550:	1240fff8 	beqz	s2,80003534 <pipe_create_inode+0x98>
80003554:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:170
			kfree(name);
80003558:	0c0054b1 	jal	800152c4 <kfree>
8000355c:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:174
		}
	}
	return NULL;
}
80003560:	8fbf002c 	lw	ra,44(sp)
80003564:	8fa20010 	lw	v0,16(sp)
80003568:	8fb30028 	lw	s3,40(sp)
8000356c:	8fb20024 	lw	s2,36(sp)
80003570:	8fb10020 	lw	s1,32(sp)
80003574:	8fb0001c 	lw	s0,28(sp)
80003578:	03e00008 	jr	ra
8000357c:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:160
}

struct inode *pipe_create_inode(struct fs *fs, const char *__name,
				struct pipe_state *state, bool readonly)
{
	char *name = NULL;
80003580:	08000d35 	j	800034d4 <pipe_create_inode+0x38>
80003584:	00009021 	move	s2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:173
		}
		if (name != NULL) {
			kfree(name);
		}
	}
	return NULL;
80003588:	08000d4d 	j	80003534 <pipe_create_inode+0x98>
8000358c:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:165
	char *name = NULL;
	if (__name == NULL || (name = strdup(__name)) != NULL) {
		struct inode *node;
		if ((node = alloc_inode(pipe_inode)) != NULL) {
			vop_init(node, &pipe_node_ops, fs);
			pipe_inode_init(vop_info(node, pipe_inode), name, state,
80003590:	3c068002 	lui	a2,0x8002
80003594:	3c078002 	lui	a3,0x8002
80003598:	248413b0 	addiu	a0,a0,5040
8000359c:	240500a5 	li	a1,165
800035a0:	24c60e28 	addiu	a2,a2,3624
800035a4:	0c006b0b 	jal	8001ac2c <__panic>
800035a8:	24e713c0 	addiu	a3,a3,5056
pipe_inode_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:151

static void
pipe_inode_init(struct pipe_inode *pin, char *name, struct pipe_state *state,
		bool readonly)
{
	assert(state != NULL);
800035ac:	3c068002 	lui	a2,0x8002
800035b0:	3c078002 	lui	a3,0x8002
800035b4:	248413b0 	addiu	a0,a0,5040
800035b8:	24050097 	li	a1,151
800035bc:	24c60e28 	addiu	a2,a2,3624
800035c0:	0c006b0b 	jal	8001ac2c <__panic>
800035c4:	24e71410 	addiu	a3,a3,5136

800035c8 <pipe_open>:
pipe_open():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:177
	}
	return NULL;
}

int pipe_open(struct inode **rnode_store, struct inode **wnode_store)
{
800035c8:	27bdffc8 	addiu	sp,sp,-56
800035cc:	afb30028 	sw	s3,40(sp)
800035d0:	00809821 	move	s3,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:180
	int ret;
	struct inode *root;
	if ((ret = vfs_get_root("pipe", &root)) != 0) {
800035d4:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:177
	}
	return NULL;
}

int pipe_open(struct inode **rnode_store, struct inode **wnode_store)
{
800035d8:	afb20024 	sw	s2,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:180
	int ret;
	struct inode *root;
	if ((ret = vfs_get_root("pipe", &root)) != 0) {
800035dc:	24841390 	addiu	a0,a0,5008
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:177
	}
	return NULL;
}

int pipe_open(struct inode **rnode_store, struct inode **wnode_store)
{
800035e0:	00a09021 	move	s2,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:180
	int ret;
	struct inode *root;
	if ((ret = vfs_get_root("pipe", &root)) != 0) {
800035e4:	27a50010 	addiu	a1,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:177
	}
	return NULL;
}

int pipe_open(struct inode **rnode_store, struct inode **wnode_store)
{
800035e8:	afb0001c 	sw	s0,28(sp)
800035ec:	afbf0034 	sw	ra,52(sp)
800035f0:	afb50030 	sw	s5,48(sp)
800035f4:	afb4002c 	sw	s4,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:180
	int ret;
	struct inode *root;
	if ((ret = vfs_get_root("pipe", &root)) != 0) {
800035f8:	0c0013e8 	jal	80004fa0 <vfs_get_root>
800035fc:	afb10020 	sw	s1,32(sp)
80003600:	1040000b 	beqz	v0,80003630 <pipe_open+0x68>
80003604:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:216
failed_cleanup_node0:
	vop_ref_dec(node[0]);
failed_cleanup_state:
	pipe_state_release(state);
	goto out;
}
80003608:	8fbf0034 	lw	ra,52(sp)
8000360c:	02001021 	move	v0,s0
80003610:	8fb50030 	lw	s5,48(sp)
80003614:	8fb4002c 	lw	s4,44(sp)
80003618:	8fb30028 	lw	s3,40(sp)
8000361c:	8fb20024 	lw	s2,36(sp)
80003620:	8fb10020 	lw	s1,32(sp)
80003624:	8fb0001c 	lw	s0,28(sp)
80003628:	03e00008 	jr	ra
8000362c:	27bd0038 	addiu	sp,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:186
		return ret;
	}
	ret = -E_NO_MEM;

	struct pipe_state *state;
	if ((state = pipe_state_create()) == NULL) {
80003630:	0c000f57 	jal	80003d5c <pipe_state_create>
80003634:	00000000 	nop
80003638:	1040002c 	beqz	v0,800036ec <pipe_open+0x124>
8000363c:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:192
		goto out;
	}

	struct fs *fs = vop_fs(root);
	struct inode *node[2] = { NULL, NULL };
	if ((node[0] = pipe_create_inode(fs, NULL, state, 1)) == NULL) {
80003640:	00403021 	move	a2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:190
	struct pipe_state *state;
	if ((state = pipe_state_create()) == NULL) {
		goto out;
	}

	struct fs *fs = vop_fs(root);
80003644:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:192
	struct inode *node[2] = { NULL, NULL };
	if ((node[0] = pipe_create_inode(fs, NULL, state, 1)) == NULL) {
80003648:	00002821 	move	a1,zero
8000364c:	24070001 	li	a3,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:190
	struct pipe_state *state;
	if ((state = pipe_state_create()) == NULL) {
		goto out;
	}

	struct fs *fs = vop_fs(root);
80003650:	8c550044 	lw	s5,68(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:192
	struct inode *node[2] = { NULL, NULL };
	if ((node[0] = pipe_create_inode(fs, NULL, state, 1)) == NULL) {
80003654:	0c000d27 	jal	8000349c <pipe_create_inode>
80003658:	02a02021 	move	a0,s5
8000365c:	1040001f 	beqz	v0,800036dc <pipe_open+0x114>
80003660:	0040a021 	move	s4,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:196
		goto failed_cleanup_state;
	}

	pipe_state_acquire(state);
80003664:	0c000f71 	jal	80003dc4 <pipe_state_acquire>
80003668:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:197
	if ((node[1] = pipe_create_inode(fs, NULL, state, 0)) == NULL) {
8000366c:	02a02021 	move	a0,s5
80003670:	00002821 	move	a1,zero
80003674:	02203021 	move	a2,s1
80003678:	0c000d27 	jal	8000349c <pipe_create_inode>
8000367c:	00003821 	move	a3,zero
80003680:	0040a821 	move	s5,v0
80003684:	10400013 	beqz	v0,800036d4 <pipe_open+0x10c>
80003688:	02802021 	move	a0,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:201
		goto failed_cleanup_node0;
	}

	vop_open_inc(node[0]), vop_open_inc(node[1]);
8000368c:	0c0010d7 	jal	8000435c <inode_open_inc>
80003690:	00000000 	nop
80003694:	0c0010d7 	jal	8000435c <inode_open_inc>
80003698:	02a02021 	move	a0,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:203

	*rnode_store = node[0];
8000369c:	ae740000 	sw	s4,0(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:204
	*wnode_store = node[1];
800036a0:	ae550000 	sw	s5,0(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:208
	ret = 0;

out:
	vop_ref_dec(root);
800036a4:	0c001172 	jal	800045c8 <inode_ref_dec>
800036a8:	8fa40010 	lw	a0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:216
failed_cleanup_node0:
	vop_ref_dec(node[0]);
failed_cleanup_state:
	pipe_state_release(state);
	goto out;
}
800036ac:	8fbf0034 	lw	ra,52(sp)
800036b0:	02001021 	move	v0,s0
800036b4:	8fb50030 	lw	s5,48(sp)
800036b8:	8fb4002c 	lw	s4,44(sp)
800036bc:	8fb30028 	lw	s3,40(sp)
800036c0:	8fb20024 	lw	s2,36(sp)
800036c4:	8fb10020 	lw	s1,32(sp)
800036c8:	8fb0001c 	lw	s0,28(sp)
800036cc:	03e00008 	jr	ra
800036d0:	27bd0038 	addiu	sp,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:212
out:
	vop_ref_dec(root);
	return ret;

failed_cleanup_node0:
	vop_ref_dec(node[0]);
800036d4:	0c001172 	jal	800045c8 <inode_ref_dec>
800036d8:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:214
failed_cleanup_state:
	pipe_state_release(state);
800036dc:	0c000f82 	jal	80003e08 <pipe_state_release>
800036e0:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:215
	goto out;
800036e4:	08000da9 	j	800036a4 <pipe_open+0xdc>
800036e8:	2410fff4 	li	s0,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_inode.c:183
	int ret;
	struct inode *root;
	if ((ret = vfs_get_root("pipe", &root)) != 0) {
		return ret;
	}
	ret = -E_NO_MEM;
800036ec:	08000da9 	j	800036a4 <pipe_open+0xdc>
800036f0:	2410fff4 	li	s0,-12

800036f4 <lookup_pipe_nolock>:
lookup_pipe_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:13
#include <assert.h>

static void
lookup_pipe_nolock(struct pipe_fs *pipe, const char *name,
		   struct inode **rnode_store, struct inode **wnode_store)
{
800036f4:	27bdffd0 	addiu	sp,sp,-48
800036f8:	afb2001c 	sw	s2,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:14
	list_entry_t *list = &(pipe->pipe_list), *le = list;
800036fc:	24920018 	addiu	s2,a0,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:13
#include <assert.h>

static void
lookup_pipe_nolock(struct pipe_fs *pipe, const char *name,
		   struct inode **rnode_store, struct inode **wnode_store)
{
80003700:	afb50028 	sw	s5,40(sp)
80003704:	afb40024 	sw	s4,36(sp)
80003708:	afb30020 	sw	s3,32(sp)
8000370c:	afb10018 	sw	s1,24(sp)
80003710:	afb00014 	sw	s0,20(sp)
80003714:	afbf002c 	sw	ra,44(sp)
80003718:	00c08021 	move	s0,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:15
	list_entry_t *list = &(pipe->pipe_list), *le = list;
	*rnode_store = *wnode_store = NULL;
8000371c:	ace00000 	sw	zero,0(a3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:13
#include <assert.h>

static void
lookup_pipe_nolock(struct pipe_fs *pipe, const char *name,
		   struct inode **rnode_store, struct inode **wnode_store)
{
80003720:	00e0a821 	move	s5,a3
80003724:	00a09821 	move	s3,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:15
	list_entry_t *list = &(pipe->pipe_list), *le = list;
	*rnode_store = *wnode_store = NULL;
80003728:	acc00000 	sw	zero,0(a2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:14

static void
lookup_pipe_nolock(struct pipe_fs *pipe, const char *name,
		   struct inode **rnode_store, struct inode **wnode_store)
{
	list_entry_t *list = &(pipe->pipe_list), *le = list;
8000372c:	02408821 	move	s1,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:33
				break;
			default:
				panic("unknown pipe_inode type %d.\n",
				      pin->pin_type);
			}
			if (vop_ref_inc(node) == 1) {
80003730:	24140001 	li	s4,1
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
80003734:	8e310004 	lw	s1,4(s1)
lookup_pipe_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:16
lookup_pipe_nolock(struct pipe_fs *pipe, const char *name,
		   struct inode **rnode_store, struct inode **wnode_store)
{
	list_entry_t *list = &(pipe->pipe_list), *le = list;
	*rnode_store = *wnode_store = NULL;
	while ((le = list_next(le)) != list) {
80003738:	12510018 	beq	s2,s1,8000379c <lookup_pipe_nolock+0xa8>
8000373c:	8fbf002c 	lw	ra,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:18
		struct pipe_inode *pin = le2pin(le, pipe_link);
		if (strcmp(pin->name, name) == 0) {
80003740:	8e24fff4 	lw	a0,-12(s1)
80003744:	0c005bb8 	jal	80016ee0 <strcmp>
80003748:	02602821 	move	a1,s3
8000374c:	5440fffa 	bnezl	v0,80003738 <lookup_pipe_nolock+0x44>
80003750:	8e310004 	lw	s1,4(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:20
			struct inode *node = info2node(pin, pipe_inode);
			switch (pin->pin_type) {
80003754:	8e27fff0 	lw	a3,-16(s1)
80003758:	14e00018 	bnez	a3,800037bc <lookup_pipe_nolock+0xc8>
8000375c:	2624fff0 	addiu	a0,s1,-16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:22
			case PIN_RDONLY:
				assert(*rnode_store == NULL);
80003760:	8e020000 	lw	v0,0(s0)
80003764:	54400028 	bnezl	v0,80003808 <lookup_pipe_nolock+0x114>
80003768:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:23
				*rnode_store = node;
8000376c:	ae040000 	sw	a0,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:33
				break;
			default:
				panic("unknown pipe_inode type %d.\n",
				      pin->pin_type);
			}
			if (vop_ref_inc(node) == 1) {
80003770:	0c0010b6 	jal	800042d8 <inode_ref_inc>
80003774:	00000000 	nop
80003778:	5454ffef 	bnel	v0,s4,80003738 <lookup_pipe_nolock+0x44>
8000377c:	8e310004 	lw	s1,4(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:34
				pin->reclaim_count++;
80003780:	8e22fff8 	lw	v0,-8(s1)
80003784:	24420001 	addiu	v0,v0,1
80003788:	ae22fff8 	sw	v0,-8(s1)
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
8000378c:	8e310004 	lw	s1,4(s1)
lookup_pipe_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:16
lookup_pipe_nolock(struct pipe_fs *pipe, const char *name,
		   struct inode **rnode_store, struct inode **wnode_store)
{
	list_entry_t *list = &(pipe->pipe_list), *le = list;
	*rnode_store = *wnode_store = NULL;
	while ((le = list_next(le)) != list) {
80003790:	5651ffec 	bnel	s2,s1,80003744 <lookup_pipe_nolock+0x50>
80003794:	8e24fff4 	lw	a0,-12(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:38
			if (vop_ref_inc(node) == 1) {
				pin->reclaim_count++;
			}
		}
	}
}
80003798:	8fbf002c 	lw	ra,44(sp)
8000379c:	8fb50028 	lw	s5,40(sp)
800037a0:	8fb40024 	lw	s4,36(sp)
800037a4:	8fb30020 	lw	s3,32(sp)
800037a8:	8fb2001c 	lw	s2,28(sp)
800037ac:	8fb10018 	lw	s1,24(sp)
800037b0:	8fb00014 	lw	s0,20(sp)
800037b4:	03e00008 	jr	ra
800037b8:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:20
	*rnode_store = *wnode_store = NULL;
	while ((le = list_next(le)) != list) {
		struct pipe_inode *pin = le2pin(le, pipe_link);
		if (strcmp(pin->name, name) == 0) {
			struct inode *node = info2node(pin, pipe_inode);
			switch (pin->pin_type) {
800037bc:	10f40006 	beq	a3,s4,800037d8 <lookup_pipe_nolock+0xe4>
800037c0:	3c068002 	lui	a2,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:30
			case PIN_WRONLY:
				assert(*wnode_store == NULL);
				*wnode_store = node;
				break;
			default:
				panic("unknown pipe_inode type %d.\n",
800037c4:	3c048002 	lui	a0,0x8002
800037c8:	24841420 	addiu	a0,a0,5152
800037cc:	2405001f 	li	a1,31
800037d0:	0c006b0b 	jal	8001ac2c <__panic>
800037d4:	24c6145c 	addiu	a2,a2,5212
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:26
			case PIN_RDONLY:
				assert(*rnode_store == NULL);
				*rnode_store = node;
				break;
			case PIN_WRONLY:
				assert(*wnode_store == NULL);
800037d8:	8ea20000 	lw	v0,0(s5)
800037dc:	54400003 	bnezl	v0,800037ec <lookup_pipe_nolock+0xf8>
800037e0:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:28
				*wnode_store = node;
				break;
800037e4:	08000ddc 	j	80003770 <lookup_pipe_nolock+0x7c>
800037e8:	aea40000 	sw	a0,0(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:26
			case PIN_RDONLY:
				assert(*rnode_store == NULL);
				*rnode_store = node;
				break;
			case PIN_WRONLY:
				assert(*wnode_store == NULL);
800037ec:	3c068002 	lui	a2,0x8002
800037f0:	3c078002 	lui	a3,0x8002
800037f4:	24841420 	addiu	a0,a0,5152
800037f8:	2405001a 	li	a1,26
800037fc:	24c60e28 	addiu	a2,a2,3624
80003800:	0c006b0b 	jal	8001ac2c <__panic>
80003804:	24e71444 	addiu	a3,a3,5188
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:22
		struct pipe_inode *pin = le2pin(le, pipe_link);
		if (strcmp(pin->name, name) == 0) {
			struct inode *node = info2node(pin, pipe_inode);
			switch (pin->pin_type) {
			case PIN_RDONLY:
				assert(*rnode_store == NULL);
80003808:	3c068002 	lui	a2,0x8002
8000380c:	3c078002 	lui	a3,0x8002
80003810:	24841420 	addiu	a0,a0,5152
80003814:	24050016 	li	a1,22
80003818:	24c60e28 	addiu	a2,a2,3624
8000381c:	0c006b0b 	jal	8001ac2c <__panic>
80003820:	24e7142c 	addiu	a3,a3,5164

80003824 <pipe_root_lookup>:
pipe_root_lookup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:102
	return ret;
}

static int
pipe_root_lookup(struct inode *__node, char *path, struct inode **node_store)
{
80003824:	27bdffd8 	addiu	sp,sp,-40
80003828:	afb20020 	sw	s2,32(sp)
8000382c:	afb00018 	sw	s0,24(sp)
80003830:	afbf0024 	sw	ra,36(sp)
80003834:	afb1001c 	sw	s1,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:103
	assert((path[0] == 'r' || path[0] == 'w') && path[1] == '_');
80003838:	90a20000 	lbu	v0,0(a1)
8000383c:	24030072 	li	v1,114
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:102
	return ret;
}

static int
pipe_root_lookup(struct inode *__node, char *path, struct inode **node_store)
{
80003840:	00a09021 	move	s2,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:103
	assert((path[0] == 'r' || path[0] == 'w') && path[1] == '_');
80003844:	10430004 	beq	v0,v1,80003858 <pipe_root_lookup+0x34>
80003848:	00c08021 	move	s0,a2
8000384c:	24030077 	li	v1,119
80003850:	54430034 	bnel	v0,v1,80003924 <pipe_root_lookup+0x100>
80003854:	3c048002 	lui	a0,0x8002
80003858:	92430001 	lbu	v1,1(s2)
8000385c:	2402005f 	li	v0,95
80003860:	54620030 	bnel	v1,v0,80003924 <pipe_root_lookup+0x100>
80003864:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:105
	struct inode *node[2];
	struct pipe_fs *pipe = fsop_info(vop_fs(__node), pipe);
80003868:	8c910044 	lw	s1,68(a0)
8000386c:	12200025 	beqz	s1,80003904 <pipe_root_lookup+0xe0>
80003870:	24025678 	li	v0,22136
80003874:	8e230084 	lw	v1,132(s1)
80003878:	54620023 	bnel	v1,v0,80003908 <pipe_root_lookup+0xe4>
8000387c:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:106
	lock_pipe(pipe);
80003880:	0c000b8e 	jal	80002e38 <lock_pipe>
80003884:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:108
	{
		lookup_pipe_nolock(pipe, path + 2, &node[0], &node[1]);
80003888:	02202021 	move	a0,s1
8000388c:	26450002 	addiu	a1,s2,2
80003890:	27a60010 	addiu	a2,sp,16
80003894:	0c000dbd 	jal	800036f4 <lookup_pipe_nolock>
80003898:	27a70014 	addiu	a3,sp,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:110
	}
	unlock_pipe(pipe);
8000389c:	0c000b90 	jal	80002e40 <unlock_pipe>
800038a0:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:112

	if (path[0] != 'r') {
800038a4:	92430000 	lbu	v1,0(s2)
800038a8:	24020072 	li	v0,114
800038ac:	10620013 	beq	v1,v0,800038fc <pipe_root_lookup+0xd8>
800038b0:	8fa20014 	lw	v0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:113
		struct inode *tmp = node[0];
800038b4:	8fa40010 	lw	a0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:114
		node[0] = node[1], node[1] = tmp;
800038b8:	afa40014 	sw	a0,20(sp)
800038bc:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:117
	}

	if (node[1] != NULL) {
800038c0:	10800004 	beqz	a0,800038d4 <pipe_root_lookup+0xb0>
800038c4:	8fa30010 	lw	v1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:118
		vop_ref_dec(node[1]);
800038c8:	0c001172 	jal	800045c8 <inode_ref_dec>
800038cc:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:120
	}
	if (node[0] == NULL) {
800038d0:	8fa30010 	lw	v1,16(sp)
800038d4:	10600003 	beqz	v1,800038e4 <pipe_root_lookup+0xc0>
800038d8:	2402fffe 	li	v0,-2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:123
		return -E_NOENT;
	}
	*node_store = node[0];
800038dc:	ae030000 	sw	v1,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:124
	return 0;
800038e0:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:125
}
800038e4:	8fbf0024 	lw	ra,36(sp)
800038e8:	8fb20020 	lw	s2,32(sp)
800038ec:	8fb1001c 	lw	s1,28(sp)
800038f0:	8fb00018 	lw	s0,24(sp)
800038f4:	03e00008 	jr	ra
800038f8:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:112
	{
		lookup_pipe_nolock(pipe, path + 2, &node[0], &node[1]);
	}
	unlock_pipe(pipe);

	if (path[0] != 'r') {
800038fc:	08000e30 	j	800038c0 <pipe_root_lookup+0x9c>
80003900:	8fa40014 	lw	a0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:105
static int
pipe_root_lookup(struct inode *__node, char *path, struct inode **node_store)
{
	assert((path[0] == 'r' || path[0] == 'w') && path[1] == '_');
	struct inode *node[2];
	struct pipe_fs *pipe = fsop_info(vop_fs(__node), pipe);
80003904:	3c048002 	lui	a0,0x8002
80003908:	3c068002 	lui	a2,0x8002
8000390c:	3c078002 	lui	a3,0x8002
80003910:	24841420 	addiu	a0,a0,5152
80003914:	24050069 	li	a1,105
80003918:	24c60e28 	addiu	a2,a2,3624
8000391c:	0c006b0b 	jal	8001ac2c <__panic>
80003920:	24e71320 	addiu	a3,a3,4896
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:103
}

static int
pipe_root_lookup(struct inode *__node, char *path, struct inode **node_store)
{
	assert((path[0] == 'r' || path[0] == 'w') && path[1] == '_');
80003924:	3c068002 	lui	a2,0x8002
80003928:	3c078002 	lui	a3,0x8002
8000392c:	24841420 	addiu	a0,a0,5152
80003930:	24050067 	li	a1,103
80003934:	24c60e28 	addiu	a2,a2,3624
80003938:	0c006b0b 	jal	8001ac2c <__panic>
8000393c:	24e7147c 	addiu	a3,a3,5244

80003940 <pipe_root_create>:
pipe_root_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:43
}

static int
pipe_root_create(struct inode *__node, const char *name, bool excl,
		 struct inode **node_store)
{
80003940:	27bdffd0 	addiu	sp,sp,-48
80003944:	afb40028 	sw	s4,40(sp)
80003948:	afb30024 	sw	s3,36(sp)
8000394c:	afbf002c 	sw	ra,44(sp)
80003950:	afb20020 	sw	s2,32(sp)
80003954:	afb1001c 	sw	s1,28(sp)
80003958:	afb00018 	sw	s0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:44
	assert((name[0] == 'r' || name[0] == 'w') && name[1] == '_');
8000395c:	90b10000 	lbu	s1,0(a1)
80003960:	24020072 	li	v0,114
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:43
}

static int
pipe_root_create(struct inode *__node, const char *name, bool excl,
		 struct inode **node_store)
{
80003964:	00c0a021 	move	s4,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:44
	assert((name[0] == 'r' || name[0] == 'w') && name[1] == '_');
80003968:	12220004 	beq	s1,v0,8000397c <pipe_root_create+0x3c>
8000396c:	00e09821 	move	s3,a3
80003970:	24020077 	li	v0,119
80003974:	5622005f 	bnel	s1,v0,80003af4 <pipe_root_create+0x1b4>
80003978:	3c048002 	lui	a0,0x8002
8000397c:	90a30001 	lbu	v1,1(a1)
80003980:	2402005f 	li	v0,95
80003984:	5462005b 	bnel	v1,v0,80003af4 <pipe_root_create+0x1b4>
80003988:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:50
	int ret = 0;
	bool readonly = (name[0] == 'r');
	name += 2;

	struct inode *node[2];
	struct fs *fs = vop_fs(__node);
8000398c:	8c900044 	lw	s0,68(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:51
	struct pipe_fs *pipe = fsop_info(fs, pipe);
80003990:	12000050 	beqz	s0,80003ad4 <pipe_root_create+0x194>
80003994:	24025678 	li	v0,22136
80003998:	8e030084 	lw	v1,132(s0)
8000399c:	1462004d 	bne	v1,v0,80003ad4 <pipe_root_create+0x194>
800039a0:	24b20002 	addiu	s2,a1,2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:53

	lock_pipe(pipe);
800039a4:	02002021 	move	a0,s0
800039a8:	0c000b8e 	jal	80002e38 <lock_pipe>
800039ac:	3a310072 	xori	s1,s1,0x72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:46
pipe_root_create(struct inode *__node, const char *name, bool excl,
		 struct inode **node_store)
{
	assert((name[0] == 'r' || name[0] == 'w') && name[1] == '_');
	int ret = 0;
	bool readonly = (name[0] == 'r');
800039b0:	2e310001 	sltiu	s1,s1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:55
	struct fs *fs = vop_fs(__node);
	struct pipe_fs *pipe = fsop_info(fs, pipe);

	lock_pipe(pipe);

	lookup_pipe_nolock(pipe, name, &node[0], &node[1]);
800039b4:	02002021 	move	a0,s0
800039b8:	02402821 	move	a1,s2
800039bc:	27a60010 	addiu	a2,sp,16
800039c0:	0c000dbd 	jal	800036f4 <lookup_pipe_nolock>
800039c4:	27a70014 	addiu	a3,sp,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:56
	if (!readonly) {
800039c8:	1620001a 	bnez	s1,80003a34 <pipe_root_create+0xf4>
800039cc:	8fa40010 	lw	a0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:58
		struct inode *tmp = node[0];
		node[0] = node[1], node[1] = tmp;
800039d0:	8fa40014 	lw	a0,20(sp)
800039d4:	8fa20010 	lw	v0,16(sp)
800039d8:	afa40010 	sw	a0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:61
	}

	if (node[0] != NULL) {
800039dc:	10800017 	beqz	a0,80003a3c <pipe_root_create+0xfc>
800039e0:	afa20014 	sw	v0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:62
		if (excl) {
800039e4:	16800031 	bnez	s4,80003aac <pipe_root_create+0x16c>
800039e8:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:66
			ret = -E_EXISTS, vop_ref_dec(node[0]);
			goto out;
		}
		*node_store = node[0];
800039ec:	ae640000 	sw	a0,0(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:45
static int
pipe_root_create(struct inode *__node, const char *name, bool excl,
		 struct inode **node_store)
{
	assert((name[0] == 'r' || name[0] == 'w') && name[1] == '_');
	int ret = 0;
800039f0:	00008821 	move	s1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:92
	list_add(&(pipe->pipe_list),
		 &(vop_info(new_node, pipe_inode)->pipe_link));
	ret = 0, *node_store = new_node;

out:
	unlock_pipe(pipe);
800039f4:	0c000b90 	jal	80002e40 <unlock_pipe>
800039f8:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:94

	if (node[1] != NULL) {
800039fc:	8fa40014 	lw	a0,20(sp)
80003a00:	10800004 	beqz	a0,80003a14 <pipe_root_create+0xd4>
80003a04:	8fbf002c 	lw	ra,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:95
		vop_ref_dec(node[1]);
80003a08:	0c001172 	jal	800045c8 <inode_ref_dec>
80003a0c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:98
	}
	return ret;
}
80003a10:	8fbf002c 	lw	ra,44(sp)
80003a14:	02201021 	move	v0,s1
80003a18:	8fb40028 	lw	s4,40(sp)
80003a1c:	8fb30024 	lw	s3,36(sp)
80003a20:	8fb20020 	lw	s2,32(sp)
80003a24:	8fb1001c 	lw	s1,28(sp)
80003a28:	8fb00018 	lw	s0,24(sp)
80003a2c:	03e00008 	jr	ra
80003a30:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:61
	if (!readonly) {
		struct inode *tmp = node[0];
		node[0] = node[1], node[1] = tmp;
	}

	if (node[0] != NULL) {
80003a34:	1480ffeb 	bnez	a0,800039e4 <pipe_root_create+0xa4>
80003a38:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:72
		goto out;
	}
	ret = -E_NO_MEM;

	struct pipe_state *state;
	if (node[1] == NULL) {
80003a3c:	8fa20014 	lw	v0,20(sp)
80003a40:	1040001e 	beqz	v0,80003abc <pipe_root_create+0x17c>
80003a44:	24031236 	li	v1,4662
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:77
		if ((state = pipe_state_create()) == NULL) {
			goto out;
		}
	} else {
		state = vop_info(node[1], pipe_inode)->state;
80003a48:	8c440038 	lw	a0,56(v0)
80003a4c:	14830034 	bne	a0,v1,80003b20 <pipe_root_create+0x1e0>
80003a50:	3c048002 	lui	a0,0x8002
80003a54:	8c54000c 	lw	s4,12(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:78
		pipe_state_acquire(state);
80003a58:	0c000f71 	jal	80003dc4 <pipe_state_acquire>
80003a5c:	02802021 	move	a0,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:82
	}

	struct inode *new_node;
	if ((new_node = pipe_create_inode(fs, name, state, readonly)) == NULL) {
80003a60:	02002021 	move	a0,s0
80003a64:	02402821 	move	a1,s2
80003a68:	02803021 	move	a2,s4
80003a6c:	0c000d27 	jal	8000349c <pipe_create_inode>
80003a70:	02203821 	move	a3,s1
80003a74:	10400026 	beqz	v0,80003b10 <pipe_root_create+0x1d0>
80003a78:	24031236 	li	v1,4662
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:88
		pipe_state_release(state);
		goto out;
	}

	list_add(&(pipe->pipe_list),
		 &(vop_info(new_node, pipe_inode)->pipe_link));
80003a7c:	8c440038 	lw	a0,56(v0)
80003a80:	1483002e 	bne	a0,v1,80003b3c <pipe_root_create+0x1fc>
80003a84:	24440010 	addiu	a0,v0,16
list_add_after():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:93
 * Insert the new element @elm *after* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_after(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm, listelm->next);
80003a88:	8e03001c 	lw	v1,28(s0)
pipe_root_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:87
	if ((new_node = pipe_create_inode(fs, name, state, readonly)) == NULL) {
		pipe_state_release(state);
		goto out;
	}

	list_add(&(pipe->pipe_list),
80003a8c:	26050018 	addiu	a1,s0,24
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
80003a90:	ac640000 	sw	a0,0(v1)
80003a94:	ae04001c 	sw	a0,28(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->next = next;
	elm->prev = prev;
80003a98:	ac450010 	sw	a1,16(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
	elm->next = next;
80003a9c:	ac430014 	sw	v1,20(v0)
pipe_root_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:89
		 &(vop_info(new_node, pipe_inode)->pipe_link));
	ret = 0, *node_store = new_node;
80003aa0:	00008821 	move	s1,zero
80003aa4:	08000e7d 	j	800039f4 <pipe_root_create+0xb4>
80003aa8:	ae620000 	sw	v0,0(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:63
		node[0] = node[1], node[1] = tmp;
	}

	if (node[0] != NULL) {
		if (excl) {
			ret = -E_EXISTS, vop_ref_dec(node[0]);
80003aac:	0c001172 	jal	800045c8 <inode_ref_dec>
80003ab0:	2411ffef 	li	s1,-17
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:64
			goto out;
80003ab4:	08000e7d 	j	800039f4 <pipe_root_create+0xb4>
80003ab8:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:73
	}
	ret = -E_NO_MEM;

	struct pipe_state *state;
	if (node[1] == NULL) {
		if ((state = pipe_state_create()) == NULL) {
80003abc:	0c000f57 	jal	80003d5c <pipe_state_create>
80003ac0:	00000000 	nop
80003ac4:	1440ffe6 	bnez	v0,80003a60 <pipe_root_create+0x120>
80003ac8:	0040a021 	move	s4,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:69
			goto out;
		}
		*node_store = node[0];
		goto out;
	}
	ret = -E_NO_MEM;
80003acc:	08000e7d 	j	800039f4 <pipe_root_create+0xb4>
80003ad0:	2411fff4 	li	s1,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:51
	bool readonly = (name[0] == 'r');
	name += 2;

	struct inode *node[2];
	struct fs *fs = vop_fs(__node);
	struct pipe_fs *pipe = fsop_info(fs, pipe);
80003ad4:	3c048002 	lui	a0,0x8002
80003ad8:	3c068002 	lui	a2,0x8002
80003adc:	3c078002 	lui	a3,0x8002
80003ae0:	24841420 	addiu	a0,a0,5152
80003ae4:	24050033 	li	a1,51
80003ae8:	24c60e28 	addiu	a2,a2,3624
80003aec:	0c006b0b 	jal	8001ac2c <__panic>
80003af0:	24e71320 	addiu	a3,a3,4896
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:44

static int
pipe_root_create(struct inode *__node, const char *name, bool excl,
		 struct inode **node_store)
{
	assert((name[0] == 'r' || name[0] == 'w') && name[1] == '_');
80003af4:	3c068002 	lui	a2,0x8002
80003af8:	3c078002 	lui	a3,0x8002
80003afc:	24841420 	addiu	a0,a0,5152
80003b00:	2405002c 	li	a1,44
80003b04:	24c60e28 	addiu	a2,a2,3624
80003b08:	0c006b0b 	jal	8001ac2c <__panic>
80003b0c:	24e714b4 	addiu	a3,a3,5300
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:83
		pipe_state_acquire(state);
	}

	struct inode *new_node;
	if ((new_node = pipe_create_inode(fs, name, state, readonly)) == NULL) {
		pipe_state_release(state);
80003b10:	0c000f82 	jal	80003e08 <pipe_state_release>
80003b14:	02802021 	move	a0,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:84
		goto out;
80003b18:	08000e7d 	j	800039f4 <pipe_root_create+0xb4>
80003b1c:	2411fff4 	li	s1,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:77
	if (node[1] == NULL) {
		if ((state = pipe_state_create()) == NULL) {
			goto out;
		}
	} else {
		state = vop_info(node[1], pipe_inode)->state;
80003b20:	24841420 	addiu	a0,a0,5152
80003b24:	2405004d 	li	a1,77
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:88
		pipe_state_release(state);
		goto out;
	}

	list_add(&(pipe->pipe_list),
		 &(vop_info(new_node, pipe_inode)->pipe_link));
80003b28:	3c068002 	lui	a2,0x8002
80003b2c:	3c078002 	lui	a3,0x8002
80003b30:	24c60e28 	addiu	a2,a2,3624
80003b34:	0c006b0b 	jal	8001ac2c <__panic>
80003b38:	24e713c0 	addiu	a3,a3,5056
80003b3c:	3c048002 	lui	a0,0x8002
80003b40:	24841420 	addiu	a0,a0,5152
80003b44:	08000eca 	j	80003b28 <pipe_root_create+0x1e8>
80003b48:	24050058 	li	a1,88

80003b4c <pipe_root_lookup_parent>:
pipe_root_lookup_parent():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:130
}

static int
pipe_root_lookup_parent(struct inode *node, char *path,
			struct inode **node_store, char **endp)
{
80003b4c:	27bdffe8 	addiu	sp,sp,-24
80003b50:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:131
	assert((path[0] == 'r' || path[0] == 'w') && path[1] == '_');
80003b54:	90a20000 	lbu	v0,0(a1)
80003b58:	24030072 	li	v1,114
80003b5c:	10430003 	beq	v0,v1,80003b6c <pipe_root_lookup_parent+0x20>
80003b60:	24030077 	li	v1,119
80003b64:	5443000c 	bnel	v0,v1,80003b98 <pipe_root_lookup_parent+0x4c>
80003b68:	3c048002 	lui	a0,0x8002
80003b6c:	90a30001 	lbu	v1,1(a1)
80003b70:	2402005f 	li	v0,95
80003b74:	54620008 	bnel	v1,v0,80003b98 <pipe_root_lookup_parent+0x4c>
80003b78:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:132
	*node_store = node, *endp = path;
80003b7c:	acc40000 	sw	a0,0(a2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:133
	vop_ref_inc(node);
80003b80:	0c0010b6 	jal	800042d8 <inode_ref_inc>
80003b84:	ace50000 	sw	a1,0(a3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:135
	return 0;
}
80003b88:	8fbf0014 	lw	ra,20(sp)
80003b8c:	00001021 	move	v0,zero
80003b90:	03e00008 	jr	ra
80003b94:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:131

static int
pipe_root_lookup_parent(struct inode *node, char *path,
			struct inode **node_store, char **endp)
{
	assert((path[0] == 'r' || path[0] == 'w') && path[1] == '_');
80003b98:	3c068002 	lui	a2,0x8002
80003b9c:	3c078002 	lui	a3,0x8002
80003ba0:	24841420 	addiu	a0,a0,5152
80003ba4:	24050083 	li	a1,131
80003ba8:	24c60e28 	addiu	a2,a2,3624
80003bac:	0c006b0b 	jal	8001ac2c <__panic>
80003bb0:	24e7147c 	addiu	a3,a3,5244

80003bb4 <pipe_create_root>:
pipe_create_root():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:164
	.vop_lookup = pipe_root_lookup,
	.vop_lookup_parent = pipe_root_lookup_parent,
};

struct inode *pipe_create_root(struct fs *fs)
{
80003bb4:	27bdffe0 	addiu	sp,sp,-32
80003bb8:	00803021 	move	a2,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:166
	struct inode *node;
	if ((node = alloc_inode(pipe_root)) != NULL) {
80003bbc:	afa60010 	sw	a2,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:164
	.vop_lookup = pipe_root_lookup,
	.vop_lookup_parent = pipe_root_lookup_parent,
};

struct inode *pipe_create_root(struct fs *fs)
{
80003bc0:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:166
	struct inode *node;
	if ((node = alloc_inode(pipe_root)) != NULL) {
80003bc4:	0c001091 	jal	80004244 <__alloc_inode>
80003bc8:	24041235 	li	a0,4661
80003bcc:	10400007 	beqz	v0,80003bec <pipe_create_root+0x38>
80003bd0:	8fa60010 	lw	a2,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:167
		vop_init(node, &pipe_root_ops, fs);
80003bd4:	3c058002 	lui	a1,0x8002
80003bd8:	00402021 	move	a0,v0
80003bdc:	24a5feb8 	addiu	a1,a1,-328
80003be0:	0c0010d2 	jal	80004348 <inode_init>
80003be4:	afa20010 	sw	v0,16(sp)
80003be8:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_root.c:170
	}
	return node;
}
80003bec:	8fbf001c 	lw	ra,28(sp)
80003bf0:	03e00008 	jr	ra
80003bf4:	27bd0020 	addiu	sp,sp,32

80003bf8 <pipe_state_wakeup>:
pipe_state_wakeup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:81
	local_intr_restore(intr_flag);
	return wait->wakeup_flags == WT_PIPE;
}

static void pipe_state_wakeup(wait_queue_t * queue)
{
80003bf8:	27bdffe8 	addiu	sp,sp,-24
80003bfc:	afb00010 	sw	s0,16(sp)
80003c00:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:82
	if (!wait_queue_empty(queue)) {
80003c04:	0c0069b2 	jal	8001a6c8 <wait_queue_empty>
80003c08:	00808021 	move	s0,a0
80003c0c:	10400004 	beqz	v0,80003c20 <pipe_state_wakeup+0x28>
80003c10:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:90
		{
			wakeup_queue(queue, WT_PIPE, 1);
		}
		local_intr_restore(intr_flag);
	}
}
80003c14:	8fb00010 	lw	s0,16(sp)
80003c18:	03e00008 	jr	ra
80003c1c:	27bd0018 	addiu	sp,sp,24
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80003c20:	40026000 	mfc0	v0,c0_status
80003c24:	30420001 	andi	v0,v0,0x1
80003c28:	14400008 	bnez	v0,80003c4c <pipe_state_wakeup+0x54>
80003c2c:	02002021 	move	a0,s0
pipe_state_wakeup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:90
80003c30:	8fbf0014 	lw	ra,20(sp)
80003c34:	8fb00010 	lw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:86
{
	if (!wait_queue_empty(queue)) {
		bool intr_flag;
		local_intr_save(intr_flag);
		{
			wakeup_queue(queue, WT_PIPE, 1);
80003c38:	3c058000 	lui	a1,0x8000
80003c3c:	24a50200 	addiu	a1,a1,512
80003c40:	24060001 	li	a2,1
80003c44:	080069d4 	j	8001a750 <wakeup_queue>
80003c48:	27bd0018 	addiu	sp,sp,24
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80003c4c:	0c006d04 	jal	8001b410 <intr_disable>
80003c50:	00000000 	nop
pipe_state_wakeup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:86
80003c54:	3c058000 	lui	a1,0x8000
80003c58:	02002021 	move	a0,s0
80003c5c:	24a50200 	addiu	a1,a1,512
80003c60:	0c0069d4 	jal	8001a750 <wakeup_queue>
80003c64:	24060001 	li	a2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:90
		}
		local_intr_restore(intr_flag);
	}
}
80003c68:	8fbf0014 	lw	ra,20(sp)
80003c6c:	8fb00010 	lw	s0,16(sp)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80003c70:	08006d00 	j	8001b400 <intr_enable>
80003c74:	27bd0018 	addiu	sp,sp,24

80003c78 <pipe_state_wait>:
pipe_state_wait():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:65
{
	return state->p_wpos - state->p_rpos >= PIPE_BUFSIZE;
}

static bool pipe_state_wait(wait_queue_t * queue)
{
80003c78:	27bdffc8 	addiu	sp,sp,-56
80003c7c:	afb1002c 	sw	s1,44(sp)
80003c80:	afbf0034 	sw	ra,52(sp)
80003c84:	afb20030 	sw	s2,48(sp)
80003c88:	afb00028 	sw	s0,40(sp)
80003c8c:	00808821 	move	s1,a0
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80003c90:	40026000 	mfc0	v0,c0_status
80003c94:	30420001 	andi	v0,v0,0x1
80003c98:	14400025 	bnez	v0,80003d30 <pipe_state_wait+0xb8>
80003c9c:	00000000 	nop
pipe_state_wait():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:69
	bool intr_flag;
	wait_t __wait, *wait = &__wait;
	local_intr_save(intr_flag);
	wait_current_set(queue, wait, WT_PIPE);
80003ca0:	27b00010 	addiu	s0,sp,16
80003ca4:	3c068000 	lui	a2,0x8000
80003ca8:	02002821 	move	a1,s0
80003cac:	0c006a00 	jal	8001a800 <wait_current_set>
80003cb0:	24c60200 	addiu	a2,a2,512
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:72
	local_intr_restore(intr_flag);

	schedule();
80003cb4:	0c00059f 	jal	8000167c <schedule>
80003cb8:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
80003cbc:	40026000 	mfc0	v0,c0_status
80003cc0:	30420001 	andi	v0,v0,0x1
80003cc4:	10400003 	beqz	v0,80003cd4 <pipe_state_wait+0x5c>
80003cc8:	00009021 	move	s2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80003ccc:	0c006d04 	jal	8001b410 <intr_disable>
80003cd0:	24120001 	li	s2,1
pipe_state_wait():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:75

	local_intr_save(intr_flag);
	wait_current_del(queue, wait);
80003cd4:	0c0069b6 	jal	8001a6d8 <wait_in_queue>
80003cd8:	02002021 	move	a0,s0
80003cdc:	54400010 	bnezl	v0,80003d20 <pipe_state_wait+0xa8>
80003ce0:	02202021 	move	a0,s1
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80003ce4:	12400004 	beqz	s2,80003cf8 <pipe_state_wait+0x80>
80003ce8:	8fa30014 	lw	v1,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
80003cec:	0c006d00 	jal	8001b400 <intr_enable>
80003cf0:	00000000 	nop
pipe_state_wait():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:77
	local_intr_restore(intr_flag);
	return wait->wakeup_flags == WT_PIPE;
80003cf4:	8fa30014 	lw	v1,20(sp)
80003cf8:	3c027fff 	lui	v0,0x7fff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:78
}
80003cfc:	8fbf0034 	lw	ra,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:77
	schedule();

	local_intr_save(intr_flag);
	wait_current_del(queue, wait);
	local_intr_restore(intr_flag);
	return wait->wakeup_flags == WT_PIPE;
80003d00:	3442fe00 	ori	v0,v0,0xfe00
80003d04:	00621021 	addu	v0,v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:78
}
80003d08:	2c420001 	sltiu	v0,v0,1
80003d0c:	8fb20030 	lw	s2,48(sp)
80003d10:	8fb1002c 	lw	s1,44(sp)
80003d14:	8fb00028 	lw	s0,40(sp)
80003d18:	03e00008 	jr	ra
80003d1c:	27bd0038 	addiu	sp,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:75
	local_intr_restore(intr_flag);

	schedule();

	local_intr_save(intr_flag);
	wait_current_del(queue, wait);
80003d20:	0c006966 	jal	8001a598 <wait_queue_del>
80003d24:	02002821 	move	a1,s0
80003d28:	08000f39 	j	80003ce4 <pipe_state_wait+0x6c>
80003d2c:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
80003d30:	0c006d04 	jal	8001b410 <intr_disable>
80003d34:	27b00010 	addiu	s0,sp,16
pipe_state_wait():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:69
static bool pipe_state_wait(wait_queue_t * queue)
{
	bool intr_flag;
	wait_t __wait, *wait = &__wait;
	local_intr_save(intr_flag);
	wait_current_set(queue, wait, WT_PIPE);
80003d38:	3c068000 	lui	a2,0x8000
80003d3c:	02202021 	move	a0,s1
80003d40:	02002821 	move	a1,s0
80003d44:	0c006a00 	jal	8001a800 <wait_current_set>
80003d48:	24c60200 	addiu	a2,a2,512
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80003d4c:	0c006d00 	jal	8001b400 <intr_enable>
80003d50:	00000000 	nop
80003d54:	08000f2d 	j	80003cb4 <pipe_state_wait+0x3c>
80003d58:	00000000 	nop

80003d5c <pipe_state_create>:
pipe_state_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:29
};

#define PIPE_BUFSIZE                            (PGSIZE - sizeof(struct pipe_state))

struct pipe_state *pipe_state_create(void)
{
80003d5c:	27bdffe0 	addiu	sp,sp,-32
80003d60:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:32
	static_assert((int)PIPE_BUFSIZE > 128);
	struct pipe_state *state;
	if ((state = kmalloc(sizeof(struct pipe_state) + PIPE_BUFSIZE)) != NULL) {
80003d64:	0c005486 	jal	80015218 <kmalloc>
80003d68:	24041000 	li	a0,4096
80003d6c:	10400012 	beqz	v0,80003db8 <pipe_state_create+0x5c>
80003d70:	24430038 	addiu	v1,v0,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:34
		state->p_rpos = state->p_wpos = 0;
		state->buf = (uint8_t *) (state + 1);
80003d74:	ac430008 	sw	v1,8(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:36
		state->isclosed = 0;
		state->ref_count = 1;
80003d78:	24030001 	li	v1,1
80003d7c:	ac430010 	sw	v1,16(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:37
		sem_init(&(state->sem), 1);
80003d80:	24440014 	addiu	a0,v0,20
80003d84:	24050001 	li	a1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:33
struct pipe_state *pipe_state_create(void)
{
	static_assert((int)PIPE_BUFSIZE > 128);
	struct pipe_state *state;
	if ((state = kmalloc(sizeof(struct pipe_state) + PIPE_BUFSIZE)) != NULL) {
		state->p_rpos = state->p_wpos = 0;
80003d88:	ac400004 	sw	zero,4(v0)
80003d8c:	ac400000 	sw	zero,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:35
		state->buf = (uint8_t *) (state + 1);
		state->isclosed = 0;
80003d90:	ac40000c 	sw	zero,12(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:37
		state->ref_count = 1;
		sem_init(&(state->sem), 1);
80003d94:	0c006717 	jal	80019c5c <sem_init>
80003d98:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:38
		wait_queue_init(&(state->reader_queue));
80003d9c:	8fa20010 	lw	v0,16(sp)
80003da0:	0c00694b 	jal	8001a52c <wait_queue_init>
80003da4:	24440028 	addiu	a0,v0,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:39
		wait_queue_init(&(state->writer_queue));
80003da8:	8fa20010 	lw	v0,16(sp)
80003dac:	0c00694b 	jal	8001a52c <wait_queue_init>
80003db0:	24440030 	addiu	a0,v0,48
80003db4:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:42
	}
	return state;
}
80003db8:	8fbf001c 	lw	ra,28(sp)
80003dbc:	03e00008 	jr	ra
80003dc0:	27bd0020 	addiu	sp,sp,32

80003dc4 <pipe_state_acquire>:
pipe_state_acquire():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:99
#define wakeup_reader(state)                        pipe_state_wakeup(&((state)->reader_queue))
#define wakeup_writer(state)                        pipe_state_wakeup(&((state)->writer_queue))

void pipe_state_acquire(struct pipe_state *state)
{
	assert(state->ref_count > 0);
80003dc4:	8c820010 	lw	v0,16(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:98
#define wait_writer(state)                          pipe_state_wait(&((state)->reader_queue))
#define wakeup_reader(state)                        pipe_state_wakeup(&((state)->reader_queue))
#define wakeup_writer(state)                        pipe_state_wakeup(&((state)->writer_queue))

void pipe_state_acquire(struct pipe_state *state)
{
80003dc8:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:99
	assert(state->ref_count > 0);
80003dcc:	18400006 	blez	v0,80003de8 <pipe_state_acquire+0x24>
80003dd0:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:101
	state->ref_count++;
}
80003dd4:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:100
#define wakeup_writer(state)                        pipe_state_wakeup(&((state)->writer_queue))

void pipe_state_acquire(struct pipe_state *state)
{
	assert(state->ref_count > 0);
	state->ref_count++;
80003dd8:	24420001 	addiu	v0,v0,1
80003ddc:	ac820010 	sw	v0,16(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:101
}
80003de0:	03e00008 	jr	ra
80003de4:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:99
#define wakeup_reader(state)                        pipe_state_wakeup(&((state)->reader_queue))
#define wakeup_writer(state)                        pipe_state_wakeup(&((state)->writer_queue))

void pipe_state_acquire(struct pipe_state *state)
{
	assert(state->ref_count > 0);
80003de8:	3c048002 	lui	a0,0x8002
80003dec:	3c068002 	lui	a2,0x8002
80003df0:	3c078002 	lui	a3,0x8002
80003df4:	248414ec 	addiu	a0,a0,5356
80003df8:	24050063 	li	a1,99
80003dfc:	24c60e28 	addiu	a2,a2,3624
80003e00:	0c006b0b 	jal	8001ac2c <__panic>
80003e04:	24e714fc 	addiu	a3,a3,5372

80003e08 <pipe_state_release>:
pipe_state_release():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:104
	state->ref_count++;
}

void pipe_state_release(struct pipe_state *state)
{
80003e08:	27bdffe8 	addiu	sp,sp,-24
80003e0c:	afb00010 	sw	s0,16(sp)
80003e10:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:105
	assert(state != NULL && state->ref_count > 0);
80003e14:	10800016 	beqz	a0,80003e70 <pipe_state_release+0x68>
80003e18:	00808021 	move	s0,a0
80003e1c:	8c820010 	lw	v0,16(a0)
80003e20:	18400013 	blez	v0,80003e70 <pipe_state_release+0x68>
80003e24:	2442ffff 	addiu	v0,v0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:106
	if (--state->ref_count == 0) {
80003e28:	10400005 	beqz	v0,80003e40 <pipe_state_release+0x38>
80003e2c:	ac820010 	sw	v0,16(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:111
		assert(wait_queue_empty(&(state->reader_queue)));
		assert(wait_queue_empty(&(state->writer_queue)));
		kfree(state);
	}
}
80003e30:	8fbf0014 	lw	ra,20(sp)
80003e34:	8fb00010 	lw	s0,16(sp)
80003e38:	03e00008 	jr	ra
80003e3c:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:107

void pipe_state_release(struct pipe_state *state)
{
	assert(state != NULL && state->ref_count > 0);
	if (--state->ref_count == 0) {
		assert(wait_queue_empty(&(state->reader_queue)));
80003e40:	0c0069b2 	jal	8001a6c8 <wait_queue_empty>
80003e44:	24840028 	addiu	a0,a0,40
80003e48:	10400011 	beqz	v0,80003e90 <pipe_state_release+0x88>
80003e4c:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:108
		assert(wait_queue_empty(&(state->writer_queue)));
80003e50:	0c0069b2 	jal	8001a6c8 <wait_queue_empty>
80003e54:	26040030 	addiu	a0,s0,48
80003e58:	10400014 	beqz	v0,80003eac <pipe_state_release+0xa4>
80003e5c:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:111
		kfree(state);
	}
}
80003e60:	8fbf0014 	lw	ra,20(sp)
80003e64:	8fb00010 	lw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:109
{
	assert(state != NULL && state->ref_count > 0);
	if (--state->ref_count == 0) {
		assert(wait_queue_empty(&(state->reader_queue)));
		assert(wait_queue_empty(&(state->writer_queue)));
		kfree(state);
80003e68:	080054b1 	j	800152c4 <kfree>
80003e6c:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:105
	state->ref_count++;
}

void pipe_state_release(struct pipe_state *state)
{
	assert(state != NULL && state->ref_count > 0);
80003e70:	3c048002 	lui	a0,0x8002
80003e74:	3c068002 	lui	a2,0x8002
80003e78:	3c078002 	lui	a3,0x8002
80003e7c:	248414ec 	addiu	a0,a0,5356
80003e80:	24050069 	li	a1,105
80003e84:	24c60e28 	addiu	a2,a2,3624
80003e88:	0c006b0b 	jal	8001ac2c <__panic>
80003e8c:	24e71514 	addiu	a3,a3,5396
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:107
	if (--state->ref_count == 0) {
		assert(wait_queue_empty(&(state->reader_queue)));
80003e90:	3c068002 	lui	a2,0x8002
80003e94:	3c078002 	lui	a3,0x8002
80003e98:	248414ec 	addiu	a0,a0,5356
80003e9c:	2405006b 	li	a1,107
80003ea0:	24c60e28 	addiu	a2,a2,3624
80003ea4:	0c006b0b 	jal	8001ac2c <__panic>
80003ea8:	24e7153c 	addiu	a3,a3,5436
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:108
		assert(wait_queue_empty(&(state->writer_queue)));
80003eac:	3c048002 	lui	a0,0x8002
80003eb0:	3c068002 	lui	a2,0x8002
80003eb4:	3c078002 	lui	a3,0x8002
80003eb8:	248414ec 	addiu	a0,a0,5356
80003ebc:	2405006c 	li	a1,108
80003ec0:	24c60e28 	addiu	a2,a2,3624
80003ec4:	0c006b0b 	jal	8001ac2c <__panic>
80003ec8:	24e71568 	addiu	a3,a3,5480

80003ecc <pipe_state_close>:
pipe_state_close():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:114
		kfree(state);
	}
}

void pipe_state_close(struct pipe_state *state)
{
80003ecc:	27bdffe8 	addiu	sp,sp,-24
80003ed0:	afb00010 	sw	s0,16(sp)
80003ed4:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:115
	assert(state != NULL && state->ref_count > 0);
80003ed8:	1080000c 	beqz	a0,80003f0c <pipe_state_close+0x40>
80003edc:	00808021 	move	s0,a0
80003ee0:	8c820010 	lw	v0,16(a0)
80003ee4:	18400009 	blez	v0,80003f0c <pipe_state_close+0x40>
80003ee8:	24020001 	li	v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:117
	state->isclosed = 1;
	wakeup_reader(state);
80003eec:	24840028 	addiu	a0,a0,40
80003ef0:	0c000efe 	jal	80003bf8 <pipe_state_wakeup>
80003ef4:	ae02000c 	sw	v0,12(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:118
	wakeup_writer(state);
80003ef8:	26040030 	addiu	a0,s0,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:119
}
80003efc:	8fbf0014 	lw	ra,20(sp)
80003f00:	8fb00010 	lw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:118
void pipe_state_close(struct pipe_state *state)
{
	assert(state != NULL && state->ref_count > 0);
	state->isclosed = 1;
	wakeup_reader(state);
	wakeup_writer(state);
80003f04:	08000efe 	j	80003bf8 <pipe_state_wakeup>
80003f08:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:115
	}
}

void pipe_state_close(struct pipe_state *state)
{
	assert(state != NULL && state->ref_count > 0);
80003f0c:	3c048002 	lui	a0,0x8002
80003f10:	3c068002 	lui	a2,0x8002
80003f14:	3c078002 	lui	a3,0x8002
80003f18:	248414ec 	addiu	a0,a0,5356
80003f1c:	24050073 	li	a1,115
80003f20:	24c60e28 	addiu	a2,a2,3624
80003f24:	0c006b0b 	jal	8001ac2c <__panic>
80003f28:	24e71514 	addiu	a3,a3,5396

80003f2c <pipe_state_size>:
pipe_state_size():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:123
	wakeup_writer(state);
}

size_t pipe_state_size(struct pipe_state *state, bool write)
{
	size_t size = state->p_wpos - state->p_rpos;
80003f2c:	8c830004 	lw	v1,4(a0)
80003f30:	8c820000 	lw	v0,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:124
	if (write) {
80003f34:	10a00007 	beqz	a1,80003f54 <pipe_state_size+0x28>
80003f38:	00621023 	subu	v0,v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:125
		if (state->isclosed) {
80003f3c:	8c83000c 	lw	v1,12(a0)
80003f40:	14600003 	bnez	v1,80003f50 <pipe_state_size+0x24>
80003f44:	24030fc8 	li	v1,4040
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:128
			return 0;
		}
		return PIPE_BUFSIZE - size;
80003f48:	03e00008 	jr	ra
80003f4c:	00621023 	subu	v0,v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:126
size_t pipe_state_size(struct pipe_state *state, bool write)
{
	size_t size = state->p_wpos - state->p_rpos;
	if (write) {
		if (state->isclosed) {
			return 0;
80003f50:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:131
		}
		return PIPE_BUFSIZE - size;
	}
	return size;
}
80003f54:	03e00008 	jr	ra
80003f58:	00000000 	nop

80003f5c <pipe_state_read>:
pipe_state_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:134

size_t pipe_state_read(struct pipe_state * state, void *buf, size_t n)
{
80003f5c:	27bdffd0 	addiu	sp,sp,-48
80003f60:	afb40028 	sw	s4,40(sp)
80003f64:	afb30024 	sw	s3,36(sp)
80003f68:	afb20020 	sw	s2,32(sp)
80003f6c:	afb1001c 	sw	s1,28(sp)
80003f70:	afb00018 	sw	s0,24(sp)
80003f74:	afbf002c 	sw	ra,44(sp)
80003f78:	00808021 	move	s0,a0
80003f7c:	00a08821 	move	s1,a1
80003f80:	00c0a021 	move	s4,a2
80003f84:	24920014 	addiu	s2,a0,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:143
	if (is_empty(state)) {
		if (state->isclosed) {
			goto out_unlock;
		} else {
			unlock_state(state);
			if (!wait_writer(state)) {
80003f88:	24930028 	addiu	s3,a0,40
lock_state():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:46
	return state;
}

static void lock_state(struct pipe_state *state)
{
	down(&(state->sem));
80003f8c:	0c00671f 	jal	80019c7c <down>
80003f90:	02402021 	move	a0,s2
is_empty():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:56
	up(&(state->sem));
}

static inline bool is_empty(struct pipe_state *state)
{
	return state->p_rpos == state->p_wpos;
80003f94:	8e030000 	lw	v1,0(s0)
pipe_state_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:138
size_t pipe_state_read(struct pipe_state * state, void *buf, size_t n)
{
	size_t ret = 0;
try_again:
	lock_state(state);
	if (is_empty(state)) {
80003f98:	8e020004 	lw	v0,4(s0)
80003f9c:	14620012 	bne	v1,v0,80003fe8 <pipe_state_read+0x8c>
80003fa0:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:139
		if (state->isclosed) {
80003fa4:	8e02000c 	lw	v0,12(s0)
80003fa8:	1440003b 	bnez	v0,80004098 <pipe_state_read+0x13c>
80003fac:	00001021 	move	v0,zero
unlock_state():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:51
	down(&(state->sem));
}

static void unlock_state(struct pipe_state *state)
{
	up(&(state->sem));
80003fb0:	0c00671d 	jal	80019c74 <up>
80003fb4:	00000000 	nop
pipe_state_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:143
	if (is_empty(state)) {
		if (state->isclosed) {
			goto out_unlock;
		} else {
			unlock_state(state);
			if (!wait_writer(state)) {
80003fb8:	0c000f1e 	jal	80003c78 <pipe_state_wait>
80003fbc:	02602021 	move	a0,s3
80003fc0:	1440fff2 	bnez	v0,80003f8c <pipe_state_read+0x30>
80003fc4:	8fbf002c 	lw	ra,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:135
	return size;
}

size_t pipe_state_read(struct pipe_state * state, void *buf, size_t n)
{
	size_t ret = 0;
80003fc8:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:161

out_unlock:
	unlock_state(state);
out:
	return ret;
}
80003fcc:	8fb40028 	lw	s4,40(sp)
80003fd0:	8fb30024 	lw	s3,36(sp)
80003fd4:	8fb20020 	lw	s2,32(sp)
80003fd8:	8fb1001c 	lw	s1,28(sp)
80003fdc:	8fb00018 	lw	s0,24(sp)
80003fe0:	03e00008 	jr	ra
80003fe4:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:149
				goto out;
			}
			goto try_again;
		}
	}
	for (; ret < n && !is_empty(state); ret++, state->p_rpos++) {
80003fe8:	1280001f 	beqz	s4,80004068 <pipe_state_read+0x10c>
80003fec:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:151
		*(uint8_t *) (buf + ret) =
		    state->buf[state->p_rpos % PIPE_BUFSIZE];
80003ff0:	3c050207 	lui	a1,0x207
80003ff4:	08001002 	j	80004008 <pipe_state_read+0xac>
80003ff8:	24a518d7 	addiu	a1,a1,6359
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:149
				goto out;
			}
			goto try_again;
		}
	}
	for (; ret < n && !is_empty(state); ret++, state->p_rpos++) {
80003ffc:	8e040004 	lw	a0,4(s0)
80004000:	1064002a 	beq	v1,a0,800040ac <pipe_state_read+0x150>
80004004:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:151
		*(uint8_t *) (buf + ret) =
		    state->buf[state->p_rpos % PIPE_BUFSIZE];
80004008:	000320c2 	srl	a0,v1,0x3
8000400c:	00850019 	multu	a0,a1
80004010:	8e070008 	lw	a3,8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:133
		return PIPE_BUFSIZE - size;
	}
	return size;
}

size_t pipe_state_read(struct pipe_state * state, void *buf, size_t n)
80004014:	02223021 	addu	a2,s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:149
				goto out;
			}
			goto try_again;
		}
	}
	for (; ret < n && !is_empty(state); ret++, state->p_rpos++) {
80004018:	24420001 	addiu	v0,v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:151
		*(uint8_t *) (buf + ret) =
		    state->buf[state->p_rpos % PIPE_BUFSIZE];
8000401c:	00002010 	mfhi	a0
80004020:	00042082 	srl	a0,a0,0x2
80004024:	000440c0 	sll	t0,a0,0x3
80004028:	00044a40 	sll	t1,a0,0x9
8000402c:	01284023 	subu	t0,t1,t0
80004030:	01042021 	addu	a0,t0,a0
80004034:	000420c0 	sll	a0,a0,0x3
80004038:	00641823 	subu	v1,v1,a0
8000403c:	00e31821 	addu	v1,a3,v1
80004040:	90630000 	lbu	v1,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:150
			}
			goto try_again;
		}
	}
	for (; ret < n && !is_empty(state); ret++, state->p_rpos++) {
		*(uint8_t *) (buf + ret) =
80004044:	a0c30000 	sb	v1,0(a2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:149
				goto out;
			}
			goto try_again;
		}
	}
	for (; ret < n && !is_empty(state); ret++, state->p_rpos++) {
80004048:	8e030000 	lw	v1,0(s0)
8000404c:	24630001 	addiu	v1,v1,1
80004050:	1454ffea 	bne	v0,s4,80003ffc <pipe_state_read+0xa0>
80004054:	ae030000 	sw	v1,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:154
		*(uint8_t *) (buf + ret) =
		    state->buf[state->p_rpos % PIPE_BUFSIZE];
	}
	if (ret != 0) {
		wakeup_writer(state);
80004058:	26040030 	addiu	a0,s0,48
8000405c:	0c000efe 	jal	80003bf8 <pipe_state_wakeup>
80004060:	afa20010 	sw	v0,16(sp)
80004064:	8fa20010 	lw	v0,16(sp)
unlock_state():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:51
	down(&(state->sem));
}

static void unlock_state(struct pipe_state *state)
{
	up(&(state->sem));
80004068:	02402021 	move	a0,s2
8000406c:	0c00671d 	jal	80019c74 <up>
80004070:	afa20010 	sw	v0,16(sp)
80004074:	8fa20010 	lw	v0,16(sp)
pipe_state_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:161

out_unlock:
	unlock_state(state);
out:
	return ret;
}
80004078:	8fbf002c 	lw	ra,44(sp)
8000407c:	8fb40028 	lw	s4,40(sp)
80004080:	8fb30024 	lw	s3,36(sp)
80004084:	8fb20020 	lw	s2,32(sp)
80004088:	8fb1001c 	lw	s1,28(sp)
8000408c:	8fb00018 	lw	s0,24(sp)
80004090:	03e00008 	jr	ra
80004094:	27bd0030 	addiu	sp,sp,48
unlock_state():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:51
	down(&(state->sem));
}

static void unlock_state(struct pipe_state *state)
{
	up(&(state->sem));
80004098:	02402021 	move	a0,s2
8000409c:	0c00671d 	jal	80019c74 <up>
800040a0:	afa20010 	sw	v0,16(sp)
800040a4:	0800101e 	j	80004078 <pipe_state_read+0x11c>
800040a8:	8fa20010 	lw	v0,16(sp)
pipe_state_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:153
	}
	for (; ret < n && !is_empty(state); ret++, state->p_rpos++) {
		*(uint8_t *) (buf + ret) =
		    state->buf[state->p_rpos % PIPE_BUFSIZE];
	}
	if (ret != 0) {
800040ac:	5040ffef 	beqzl	v0,8000406c <pipe_state_read+0x110>
800040b0:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:154
		wakeup_writer(state);
800040b4:	08001017 	j	8000405c <pipe_state_read+0x100>
800040b8:	26040030 	addiu	a0,s0,48

800040bc <pipe_state_write>:
pipe_state_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:164
out:
	return ret;
}

size_t pipe_state_write(struct pipe_state * state, void *buf, size_t n)
{
800040bc:	27bdffc8 	addiu	sp,sp,-56
800040c0:	afb40024 	sw	s4,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:180
			if (!wait_reader(state)) {
				goto out;
			}
			goto try_again;
		}
		state->buf[state->p_wpos % PIPE_BUFSIZE] =
800040c4:	3c140207 	lui	s4,0x207
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:164
out:
	return ret;
}

size_t pipe_state_write(struct pipe_state * state, void *buf, size_t n)
{
800040c8:	afb70030 	sw	s7,48(sp)
800040cc:	afb6002c 	sw	s6,44(sp)
800040d0:	afb50028 	sw	s5,40(sp)
800040d4:	afb30020 	sw	s3,32(sp)
800040d8:	afb2001c 	sw	s2,28(sp)
800040dc:	afb10018 	sw	s1,24(sp)
800040e0:	afb00014 	sw	s0,20(sp)
800040e4:	afbf0034 	sw	ra,52(sp)
800040e8:	00808021 	move	s0,a0
800040ec:	00a08821 	move	s1,a1
800040f0:	00c09821 	move	s3,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:165
	size_t ret = 0, step;
800040f4:	00009021 	move	s2,zero
800040f8:	24950014 	addiu	s5,a0,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:180
			if (!wait_reader(state)) {
				goto out;
			}
			goto try_again;
		}
		state->buf[state->p_wpos % PIPE_BUFSIZE] =
800040fc:	269418d7 	addiu	s4,s4,6359
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:173
	if (state->isclosed) {
		goto out_unlock;
	}
	for (step = 0; ret < n; ret++, step++, state->p_wpos++) {
		if (is_full(state)) {
			wakeup_reader(state);
80004100:	24970028 	addiu	s7,a0,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:175
			unlock_state(state);
			if (!wait_reader(state)) {
80004104:	24960030 	addiu	s6,a0,48
lock_state():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:46
	return state;
}

static void lock_state(struct pipe_state *state)
{
	down(&(state->sem));
80004108:	0c00671f 	jal	80019c7c <down>
8000410c:	02a02021 	move	a0,s5
pipe_state_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:168
size_t pipe_state_write(struct pipe_state * state, void *buf, size_t n)
{
	size_t ret = 0, step;
try_again:
	lock_state(state);
	if (state->isclosed) {
80004110:	8e02000c 	lw	v0,12(s0)
80004114:	14400026 	bnez	v0,800041b0 <pipe_state_write+0xf4>
80004118:	0253102b 	sltu	v0,s2,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:171
		goto out_unlock;
	}
	for (step = 0; ret < n; ret++, step++, state->p_wpos++) {
8000411c:	10400024 	beqz	v0,800041b0 <pipe_state_write+0xf4>
80004120:	00000000 	nop
is_full():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:61
	return state->p_rpos == state->p_wpos;
}

static inline bool is_full(struct pipe_state *state)
{
	return state->p_wpos - state->p_rpos >= PIPE_BUFSIZE;
80004124:	8e020004 	lw	v0,4(s0)
80004128:	8e030000 	lw	v1,0(s0)
8000412c:	00431823 	subu	v1,v0,v1
pipe_state_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:172
	lock_state(state);
	if (state->isclosed) {
		goto out_unlock;
	}
	for (step = 0; ret < n; ret++, step++, state->p_wpos++) {
		if (is_full(state)) {
80004130:	2c630fc8 	sltiu	v1,v1,4040
80004134:	1060002c 	beqz	v1,800041e8 <pipe_state_write+0x12c>
80004138:	00001821 	move	v1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:180
			if (!wait_reader(state)) {
				goto out;
			}
			goto try_again;
		}
		state->buf[state->p_wpos % PIPE_BUFSIZE] =
8000413c:	08001056 	j	80004158 <pipe_state_write+0x9c>
80004140:	000220c2 	srl	a0,v0,0x3
is_full():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:61
	return state->p_rpos == state->p_wpos;
}

static inline bool is_full(struct pipe_state *state)
{
	return state->p_wpos - state->p_rpos >= PIPE_BUFSIZE;
80004144:	8e040000 	lw	a0,0(s0)
80004148:	00442023 	subu	a0,v0,a0
pipe_state_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:172
	lock_state(state);
	if (state->isclosed) {
		goto out_unlock;
	}
	for (step = 0; ret < n; ret++, step++, state->p_wpos++) {
		if (is_full(state)) {
8000414c:	2c840fc8 	sltiu	a0,a0,4040
80004150:	10800025 	beqz	a0,800041e8 <pipe_state_write+0x12c>
80004154:	000220c2 	srl	a0,v0,0x3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:180
			if (!wait_reader(state)) {
				goto out;
			}
			goto try_again;
		}
		state->buf[state->p_wpos % PIPE_BUFSIZE] =
80004158:	00940019 	multu	a0,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:163
	unlock_state(state);
out:
	return ret;
}

size_t pipe_state_write(struct pipe_state * state, void *buf, size_t n)
8000415c:	02322821 	addu	a1,s1,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:180
			if (!wait_reader(state)) {
				goto out;
			}
			goto try_again;
		}
		state->buf[state->p_wpos % PIPE_BUFSIZE] =
80004160:	8e060008 	lw	a2,8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:181
		    *(uint8_t *) (buf + ret);
80004164:	90a50000 	lbu	a1,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:171
try_again:
	lock_state(state);
	if (state->isclosed) {
		goto out_unlock;
	}
	for (step = 0; ret < n; ret++, step++, state->p_wpos++) {
80004168:	26520001 	addiu	s2,s2,1
8000416c:	24630001 	addiu	v1,v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:180
			if (!wait_reader(state)) {
				goto out;
			}
			goto try_again;
		}
		state->buf[state->p_wpos % PIPE_BUFSIZE] =
80004170:	00002010 	mfhi	a0
80004174:	00042082 	srl	a0,a0,0x2
80004178:	000438c0 	sll	a3,a0,0x3
8000417c:	00044240 	sll	t0,a0,0x9
80004180:	01073823 	subu	a3,t0,a3
80004184:	00e42021 	addu	a0,a3,a0
80004188:	000420c0 	sll	a0,a0,0x3
8000418c:	00441023 	subu	v0,v0,a0
80004190:	00c21021 	addu	v0,a2,v0
80004194:	a0450000 	sb	a1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:171
try_again:
	lock_state(state);
	if (state->isclosed) {
		goto out_unlock;
	}
	for (step = 0; ret < n; ret++, step++, state->p_wpos++) {
80004198:	8e020004 	lw	v0,4(s0)
8000419c:	24420001 	addiu	v0,v0,1
800041a0:	1653ffe8 	bne	s2,s3,80004144 <pipe_state_write+0x88>
800041a4:	ae020004 	sw	v0,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:183
			goto try_again;
		}
		state->buf[state->p_wpos % PIPE_BUFSIZE] =
		    *(uint8_t *) (buf + ret);
	}
	if (step != 0) {
800041a8:	14600022 	bnez	v1,80004234 <pipe_state_write+0x178>
800041ac:	00000000 	nop
unlock_state():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:51
	down(&(state->sem));
}

static void unlock_state(struct pipe_state *state)
{
	up(&(state->sem));
800041b0:	0c00671d 	jal	80019c74 <up>
800041b4:	02a02021 	move	a0,s5
pipe_state_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:191

out_unlock:
	unlock_state(state);
out:
	return ret;
}
800041b8:	8fbf0034 	lw	ra,52(sp)
800041bc:	02401021 	move	v0,s2
800041c0:	8fb70030 	lw	s7,48(sp)
800041c4:	8fb6002c 	lw	s6,44(sp)
800041c8:	8fb50028 	lw	s5,40(sp)
800041cc:	8fb40024 	lw	s4,36(sp)
800041d0:	8fb30020 	lw	s3,32(sp)
800041d4:	8fb2001c 	lw	s2,28(sp)
800041d8:	8fb10018 	lw	s1,24(sp)
800041dc:	8fb00014 	lw	s0,20(sp)
800041e0:	03e00008 	jr	ra
800041e4:	27bd0038 	addiu	sp,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:173
	if (state->isclosed) {
		goto out_unlock;
	}
	for (step = 0; ret < n; ret++, step++, state->p_wpos++) {
		if (is_full(state)) {
			wakeup_reader(state);
800041e8:	0c000efe 	jal	80003bf8 <pipe_state_wakeup>
800041ec:	02e02021 	move	a0,s7
unlock_state():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:51
	down(&(state->sem));
}

static void unlock_state(struct pipe_state *state)
{
	up(&(state->sem));
800041f0:	0c00671d 	jal	80019c74 <up>
800041f4:	02a02021 	move	a0,s5
pipe_state_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:175
	}
	for (step = 0; ret < n; ret++, step++, state->p_wpos++) {
		if (is_full(state)) {
			wakeup_reader(state);
			unlock_state(state);
			if (!wait_reader(state)) {
800041f8:	0c000f1e 	jal	80003c78 <pipe_state_wait>
800041fc:	02c02021 	move	a0,s6
80004200:	1440ffc1 	bnez	v0,80004108 <pipe_state_write+0x4c>
80004204:	8fbf0034 	lw	ra,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:191

out_unlock:
	unlock_state(state);
out:
	return ret;
}
80004208:	02401021 	move	v0,s2
8000420c:	8fb70030 	lw	s7,48(sp)
80004210:	8fb6002c 	lw	s6,44(sp)
80004214:	8fb50028 	lw	s5,40(sp)
80004218:	8fb40024 	lw	s4,36(sp)
8000421c:	8fb30020 	lw	s3,32(sp)
80004220:	8fb2001c 	lw	s2,28(sp)
80004224:	8fb10018 	lw	s1,24(sp)
80004228:	8fb00014 	lw	s0,20(sp)
8000422c:	03e00008 	jr	ra
80004230:	27bd0038 	addiu	sp,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/pipe/pipe_state.c:184
		}
		state->buf[state->p_wpos % PIPE_BUFSIZE] =
		    *(uint8_t *) (buf + ret);
	}
	if (step != 0) {
		wakeup_reader(state);
80004234:	0c000efe 	jal	80003bf8 <pipe_state_wakeup>
80004238:	26040028 	addiu	a0,s0,40
8000423c:	0800106c 	j	800041b0 <pipe_state_write+0xf4>
80004240:	00000000 	nop

80004244 <__alloc_inode>:
__alloc_inode():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:16

/* *
 * __alloc_inode - alloc a inode structure and initialize in_type
 * */
struct inode *__alloc_inode(int type)
{
80004244:	27bdffe8 	addiu	sp,sp,-24
80004248:	afb00010 	sw	s0,16(sp)
8000424c:	00808021 	move	s0,a0
80004250:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:18
	struct inode *node;
	if ((node = kmalloc(sizeof(struct inode))) != NULL) {
80004254:	0c005486 	jal	80015218 <kmalloc>
80004258:	2404004c 	li	a0,76
8000425c:	54400001 	bnezl	v0,80004264 <__alloc_inode+0x20>
80004260:	ac500038 	sw	s0,56(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:22
		node->in_type = type;
	}
	return node;
}
80004264:	8fbf0014 	lw	ra,20(sp)
80004268:	8fb00010 	lw	s0,16(sp)
8000426c:	03e00008 	jr	ra
80004270:	27bd0018 	addiu	sp,sp,24

80004274 <inode_kill>:
atomic_read():
80004274:	8c83003c 	lw	v1,60(a0)
inode_kill():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:44
/* *
 * inode_kill - kill a inode structure
 * invoked by vop_kill
 * */
void inode_kill(struct inode *node)
{
80004278:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:45
	assert(inode_ref_count(node) == 0);
8000427c:	14600006 	bnez	v1,80004298 <inode_kill+0x24>
80004280:	afbf0014 	sw	ra,20(sp)
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
80004284:	8c820040 	lw	v0,64(a0)
inode_kill():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:46
	assert(inode_open_count(node) == 0);
80004288:	1440000b 	bnez	v0,800042b8 <inode_kill+0x44>
8000428c:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:47
	kfree(node);
80004290:	080054b1 	j	800152c4 <kfree>
80004294:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:45
 * inode_kill - kill a inode structure
 * invoked by vop_kill
 * */
void inode_kill(struct inode *node)
{
	assert(inode_ref_count(node) == 0);
80004298:	3c048002 	lui	a0,0x8002
8000429c:	3c068002 	lui	a2,0x8002
800042a0:	3c078002 	lui	a3,0x8002
800042a4:	2484202c 	addiu	a0,a0,8236
800042a8:	2405002d 	li	a1,45
800042ac:	24c60e28 	addiu	a2,a2,3624
800042b0:	0c006b0b 	jal	8001ac2c <__panic>
800042b4:	24e71594 	addiu	a3,a3,5524
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:46
	assert(inode_open_count(node) == 0);
800042b8:	3c048002 	lui	a0,0x8002
800042bc:	3c068002 	lui	a2,0x8002
800042c0:	3c078002 	lui	a3,0x8002
800042c4:	2484202c 	addiu	a0,a0,8236
800042c8:	2405002e 	li	a1,46
800042cc:	24c60e28 	addiu	a2,a2,3624
800042d0:	0c006b0b 	jal	8001ac2c <__panic>
800042d4:	24e715b0 	addiu	a3,a3,5552

800042d8 <inode_ref_inc>:
inode_ref_inc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:55
/* *
 * inode_ref_inc - increment ref_count
 * invoked by vop_ref_inc
 * */
int inode_ref_inc(struct inode *node)
{
800042d8:	27bdffe0 	addiu	sp,sp,-32
800042dc:	afbf001c 	sw	ra,28(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
800042e0:	40026000 	mfc0	v0,c0_status
800042e4:	30420001 	andi	v0,v0,0x1
800042e8:	14400009 	bnez	v0,80004310 <inode_ref_inc+0x38>
800042ec:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
800042f0:	8c82003c 	lw	v0,60(a0)
inode_ref_inc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:57
	return atomic_add_return(&(node->ref_count), 1);
}
800042f4:	8fbf001c 	lw	ra,28(sp)
800042f8:	27bd0020 	addiu	sp,sp,32
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
800042fc:	24420001 	addiu	v0,v0,1
80004300:	ac82003c 	sw	v0,60(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
80004304:	8c82003c 	lw	v0,60(a0)
inode_ref_inc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:57
80004308:	03e00008 	jr	ra
8000430c:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80004310:	0c006d04 	jal	8001b410 <intr_disable>
80004314:	afa40010 	sw	a0,16(sp)
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
80004318:	8fa40010 	lw	a0,16(sp)
8000431c:	8c82003c 	lw	v0,60(a0)
80004320:	24420001 	addiu	v0,v0,1
80004324:	ac82003c 	sw	v0,60(a0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80004328:	0c006d00 	jal	8001b400 <intr_enable>
8000432c:	00000000 	nop
80004330:	8fa40010 	lw	a0,16(sp)
inode_ref_inc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:57
80004334:	8fbf001c 	lw	ra,28(sp)
80004338:	27bd0020 	addiu	sp,sp,32
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
8000433c:	8c82003c 	lw	v0,60(a0)
inode_ref_inc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:57
80004340:	03e00008 	jr	ra
80004344:	00000000 	nop

80004348 <inode_init>:
atomic_set():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:34
 *
 * Atomically sets the value of @v to @i.
 * */
static __always_inline void atomic_set(atomic_t * v, int i)
{
	v->counter = i;
80004348:	ac80003c 	sw	zero,60(a0)
inode_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:32
 * */
void inode_init(struct inode *node, const struct inode_ops *ops, struct fs *fs)
{
	atomic_set(&(node->ref_count), 0);
	atomic_set(&(node->open_count), 0);
	node->in_ops = ops, node->in_fs = fs;
8000434c:	ac850048 	sw	a1,72(a0)
atomic_set():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:34
80004350:	ac800040 	sw	zero,64(a0)
inode_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:36
#ifdef UCONFIG_BIONIC_LIBC
	list_init(&(node->mapped_addr_list));
#endif //UCONFIG_BIONIC_LIBC
	vop_ref_inc(node);
80004354:	080010b6 	j	800042d8 <inode_ref_inc>
80004358:	ac860044 	sw	a2,68(a0)

8000435c <inode_open_inc>:
inode_open_inc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:81
/* *
 * inode_open_inc - increment the open_count
 * invoked by vop_open_inc
 * */
int inode_open_inc(struct inode *node)
{
8000435c:	27bdffe0 	addiu	sp,sp,-32
80004360:	afbf001c 	sw	ra,28(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80004364:	40026000 	mfc0	v0,c0_status
80004368:	30420001 	andi	v0,v0,0x1
8000436c:	14400009 	bnez	v0,80004394 <inode_open_inc+0x38>
80004370:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
80004374:	8c820040 	lw	v0,64(a0)
inode_open_inc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:83
	return atomic_add_return(&(node->open_count), 1);
}
80004378:	8fbf001c 	lw	ra,28(sp)
8000437c:	27bd0020 	addiu	sp,sp,32
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
80004380:	24420001 	addiu	v0,v0,1
80004384:	ac820040 	sw	v0,64(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
80004388:	8c820040 	lw	v0,64(a0)
inode_open_inc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:83
8000438c:	03e00008 	jr	ra
80004390:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80004394:	0c006d04 	jal	8001b410 <intr_disable>
80004398:	afa40010 	sw	a0,16(sp)
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8000439c:	8fa40010 	lw	a0,16(sp)
800043a0:	8c820040 	lw	v0,64(a0)
800043a4:	24420001 	addiu	v0,v0,1
800043a8:	ac820040 	sw	v0,64(a0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
800043ac:	0c006d00 	jal	8001b400 <intr_enable>
800043b0:	00000000 	nop
800043b4:	8fa40010 	lw	a0,16(sp)
inode_open_inc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:83
800043b8:	8fbf001c 	lw	ra,28(sp)
800043bc:	27bd0020 	addiu	sp,sp,32
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
800043c0:	8c820040 	lw	v0,64(a0)
inode_open_inc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:83
800043c4:	03e00008 	jr	ra
800043c8:	00000000 	nop

800043cc <inode_check>:
inode_check():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:107
/* *
 * inode_check - check the various things being valid
 * called before all vop_* calls
 * */
void inode_check(struct inode *node, const char *opstr)
{
800043cc:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:108
	assert(node != NULL && node->in_ops != NULL);
800043d0:	10800018 	beqz	a0,80004434 <inode_check+0x68>
800043d4:	afbf0014 	sw	ra,20(sp)
800043d8:	8c820048 	lw	v0,72(a0)
800043dc:	50400016 	beqzl	v0,80004438 <inode_check+0x6c>
800043e0:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:109
	assert(node->in_ops->vop_magic == VOP_MAGIC);
800043e4:	8c430000 	lw	v1,0(v0)
800043e8:	3c028c4b 	lui	v0,0x8c4b
800043ec:	3442a476 	ori	v0,v0,0xa476
800043f0:	54620027 	bnel	v1,v0,80004490 <inode_check+0xc4>
800043f4:	3c048002 	lui	a0,0x8002
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
 *
 * Atomically reads the value of @v.
 * */
static __always_inline int atomic_read(const atomic_t * v)
{
	return v->counter;
800043f8:	8c83003c 	lw	v1,60(a0)
800043fc:	8c820040 	lw	v0,64(a0)
inode_check():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:112
	int ref_count = inode_ref_count(node), open_count =
	    inode_open_count(node);
	assert(ref_count >= open_count && open_count >= 0);
80004400:	0062202a 	slt	a0,v1,v0
80004404:	1480001b 	bnez	a0,80004474 <inode_check+0xa8>
80004408:	3c048002 	lui	a0,0x8002
8000440c:	0440001a 	bltz	v0,80004478 <inode_check+0xac>
80004410:	3c068002 	lui	a2,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:113
	assert(ref_count < MAX_INODE_COUNT && open_count < MAX_INODE_COUNT);
80004414:	3c040001 	lui	a0,0x1
80004418:	0064182a 	slt	v1,v1,a0
8000441c:	1060000d 	beqz	v1,80004454 <inode_check+0x88>
80004420:	0044102a 	slt	v0,v0,a0
80004424:	1040000b 	beqz	v0,80004454 <inode_check+0x88>
80004428:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:114
}
8000442c:	03e00008 	jr	ra
80004430:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:108
 * inode_check - check the various things being valid
 * called before all vop_* calls
 * */
void inode_check(struct inode *node, const char *opstr)
{
	assert(node != NULL && node->in_ops != NULL);
80004434:	3c048002 	lui	a0,0x8002
80004438:	3c068002 	lui	a2,0x8002
8000443c:	3c078002 	lui	a3,0x8002
80004440:	2484202c 	addiu	a0,a0,8236
80004444:	2405006c 	li	a1,108
80004448:	24c60e28 	addiu	a2,a2,3624
8000444c:	0c006b0b 	jal	8001ac2c <__panic>
80004450:	24e715cc 	addiu	a3,a3,5580
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:113
	assert(node->in_ops->vop_magic == VOP_MAGIC);
	int ref_count = inode_ref_count(node), open_count =
	    inode_open_count(node);
	assert(ref_count >= open_count && open_count >= 0);
	assert(ref_count < MAX_INODE_COUNT && open_count < MAX_INODE_COUNT);
80004454:	3c048002 	lui	a0,0x8002
80004458:	3c068002 	lui	a2,0x8002
8000445c:	3c078002 	lui	a3,0x8002
80004460:	2484202c 	addiu	a0,a0,8236
80004464:	24050071 	li	a1,113
80004468:	24c60e28 	addiu	a2,a2,3624
8000446c:	0c006b0b 	jal	8001ac2c <__panic>
80004470:	24e71648 	addiu	a3,a3,5704
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:112
{
	assert(node != NULL && node->in_ops != NULL);
	assert(node->in_ops->vop_magic == VOP_MAGIC);
	int ref_count = inode_ref_count(node), open_count =
	    inode_open_count(node);
	assert(ref_count >= open_count && open_count >= 0);
80004474:	3c068002 	lui	a2,0x8002
80004478:	3c078002 	lui	a3,0x8002
8000447c:	2484202c 	addiu	a0,a0,8236
80004480:	24050070 	li	a1,112
80004484:	24c60e28 	addiu	a2,a2,3624
80004488:	0c006b0b 	jal	8001ac2c <__panic>
8000448c:	24e7161c 	addiu	a3,a3,5660
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:109
 * called before all vop_* calls
 * */
void inode_check(struct inode *node, const char *opstr)
{
	assert(node != NULL && node->in_ops != NULL);
	assert(node->in_ops->vop_magic == VOP_MAGIC);
80004490:	3c068002 	lui	a2,0x8002
80004494:	3c078002 	lui	a3,0x8002
80004498:	2484202c 	addiu	a0,a0,8236
8000449c:	2405006d 	li	a1,109
800044a0:	24c60e28 	addiu	a2,a2,3624
800044a4:	0c006b0b 	jal	8001ac2c <__panic>
800044a8:	24e715f4 	addiu	a3,a3,5620

800044ac <inode_open_dec>:
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
800044ac:	8c820040 	lw	v0,64(a0)
inode_open_dec():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:91
 * inode_open_dec - decrement the open_count
 * invoked by vop_open_dec
 * calls vop_close if the open_count hits zero
 * */
int inode_open_dec(struct inode *node)
{
800044b0:	27bdffe0 	addiu	sp,sp,-32
800044b4:	afb10018 	sw	s1,24(sp)
800044b8:	afbf001c 	sw	ra,28(sp)
800044bc:	afb00014 	sw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:92
	assert(inode_open_count(node) > 0);
800044c0:	18400039 	blez	v0,800045a8 <inode_open_dec+0xfc>
800044c4:	00808821 	move	s1,a0
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
800044c8:	40026000 	mfc0	v0,c0_status
800044cc:	30420001 	andi	v0,v0,0x1
800044d0:	14400025 	bnez	v0,80004568 <inode_open_dec+0xbc>
800044d4:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
800044d8:	8c820040 	lw	v0,64(a0)
800044dc:	2442ffff 	addiu	v0,v0,-1
800044e0:	ac820040 	sw	v0,64(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
800044e4:	8e300040 	lw	s0,64(s1)
inode_open_dec():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:94
	int open_count, ret;
	if ((open_count = atomic_sub_return(&(node->open_count), 1)) == 0) {
800044e8:	16000010 	bnez	s0,8000452c <inode_open_dec+0x80>
800044ec:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:95
		if ((ret = vop_close(node)) != 0) {
800044f0:	8e220048 	lw	v0,72(s1)
800044f4:	10400025 	beqz	v0,8000458c <inode_open_dec+0xe0>
800044f8:	3c048002 	lui	a0,0x8002
800044fc:	8c420008 	lw	v0,8(v0)
80004500:	10400022 	beqz	v0,8000458c <inode_open_dec+0xe0>
80004504:	3c058002 	lui	a1,0x8002
80004508:	02202021 	move	a0,s1
8000450c:	0c0010f3 	jal	800043cc <inode_check>
80004510:	24a516f0 	addiu	a1,a1,5872
80004514:	8e220048 	lw	v0,72(s1)
80004518:	8c420008 	lw	v0,8(v0)
8000451c:	0040f809 	jalr	v0
80004520:	02202021 	move	a0,s1
80004524:	14400006 	bnez	v0,80004540 <inode_open_dec+0x94>
80004528:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:100
			kprintf("vfs: warning: vop_close: %e.\n", ret);
		}
	}
	return open_count;
}
8000452c:	02001021 	move	v0,s0
80004530:	8fb10018 	lw	s1,24(sp)
80004534:	8fb00014 	lw	s0,20(sp)
80004538:	03e00008 	jr	ra
8000453c:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:96
{
	assert(inode_open_count(node) > 0);
	int open_count, ret;
	if ((open_count = atomic_sub_return(&(node->open_count), 1)) == 0) {
		if ((ret = vop_close(node)) != 0) {
			kprintf("vfs: warning: vop_close: %e.\n", ret);
80004540:	3c048002 	lui	a0,0x8002
80004544:	248416f8 	addiu	a0,a0,5880
80004548:	0c007a9e 	jal	8001ea78 <kprintf>
8000454c:	00402821 	move	a1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:100
		}
	}
	return open_count;
}
80004550:	8fbf001c 	lw	ra,28(sp)
80004554:	02001021 	move	v0,s0
80004558:	8fb10018 	lw	s1,24(sp)
8000455c:	8fb00014 	lw	s0,20(sp)
80004560:	03e00008 	jr	ra
80004564:	27bd0020 	addiu	sp,sp,32
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80004568:	0c006d04 	jal	8001b410 <intr_disable>
8000456c:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
80004570:	8e220040 	lw	v0,64(s1)
80004574:	2442ffff 	addiu	v0,v0,-1
80004578:	ae220040 	sw	v0,64(s1)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000457c:	0c006d00 	jal	8001b400 <intr_enable>
80004580:	00000000 	nop
80004584:	08001139 	j	800044e4 <inode_open_dec+0x38>
80004588:	00000000 	nop
inode_open_dec():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:95
int inode_open_dec(struct inode *node)
{
	assert(inode_open_count(node) > 0);
	int open_count, ret;
	if ((open_count = atomic_sub_return(&(node->open_count), 1)) == 0) {
		if ((ret = vop_close(node)) != 0) {
8000458c:	3c068002 	lui	a2,0x8002
80004590:	3c078002 	lui	a3,0x8002
80004594:	2484202c 	addiu	a0,a0,8236
80004598:	2405005f 	li	a1,95
8000459c:	24c60e28 	addiu	a2,a2,3624
800045a0:	0c006b0b 	jal	8001ac2c <__panic>
800045a4:	24e716a0 	addiu	a3,a3,5792
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:92
 * invoked by vop_open_dec
 * calls vop_close if the open_count hits zero
 * */
int inode_open_dec(struct inode *node)
{
	assert(inode_open_count(node) > 0);
800045a8:	3c048002 	lui	a0,0x8002
800045ac:	3c068002 	lui	a2,0x8002
800045b0:	3c078002 	lui	a3,0x8002
800045b4:	2484202c 	addiu	a0,a0,8236
800045b8:	2405005c 	li	a1,92
800045bc:	24c60e28 	addiu	a2,a2,3624
800045c0:	0c006b0b 	jal	8001ac2c <__panic>
800045c4:	24e71684 	addiu	a3,a3,5764

800045c8 <inode_ref_dec>:
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
 *
 * Atomically reads the value of @v.
 * */
static __always_inline int atomic_read(const atomic_t * v)
{
	return v->counter;
800045c8:	8c82003c 	lw	v0,60(a0)
inode_ref_dec():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:65
 * inode_ref_dec - decrement ref_count
 * invoked by vop_ref_dec
 * calls vop_reclaim if the ref_count hits zero
 * */
int inode_ref_dec(struct inode *node)
{
800045cc:	27bdffe0 	addiu	sp,sp,-32
800045d0:	afb10018 	sw	s1,24(sp)
800045d4:	afbf001c 	sw	ra,28(sp)
800045d8:	afb00014 	sw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:66
	assert(inode_ref_count(node) > 0);
800045dc:	18400035 	blez	v0,800046b4 <inode_ref_dec+0xec>
800045e0:	00808821 	move	s1,a0
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
800045e4:	40026000 	mfc0	v0,c0_status
800045e8:	30420001 	andi	v0,v0,0x1
800045ec:	14400021 	bnez	v0,80004674 <inode_ref_dec+0xac>
800045f0:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
800045f4:	8c82003c 	lw	v0,60(a0)
800045f8:	2442ffff 	addiu	v0,v0,-1
800045fc:	ac82003c 	sw	v0,60(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
80004600:	8e30003c 	lw	s0,60(s1)
inode_ref_dec():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:68
	int ref_count, ret;
	if ((ref_count = atomic_sub_return(&(node->ref_count), 1)) == 0) {
80004604:	16000016 	bnez	s0,80004660 <inode_ref_dec+0x98>
80004608:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:69
		if ((ret = vop_reclaim(node)) != 0 && ret != -E_BUSY) {
8000460c:	8e220048 	lw	v0,72(s1)
80004610:	10400021 	beqz	v0,80004698 <inode_ref_dec+0xd0>
80004614:	3c048002 	lui	a0,0x8002
80004618:	8c420038 	lw	v0,56(v0)
8000461c:	1040001e 	beqz	v0,80004698 <inode_ref_dec+0xd0>
80004620:	3c058002 	lui	a1,0x8002
80004624:	02202021 	move	a0,s1
80004628:	0c0010f3 	jal	800043cc <inode_check>
8000462c:	24a51784 	addiu	a1,a1,6020
80004630:	8e220048 	lw	v0,72(s1)
80004634:	8c420038 	lw	v0,56(v0)
80004638:	0040f809 	jalr	v0
8000463c:	02202021 	move	a0,s1
80004640:	10400006 	beqz	v0,8000465c <inode_ref_dec+0x94>
80004644:	2403fff0 	li	v1,-16
80004648:	10430004 	beq	v0,v1,8000465c <inode_ref_dec+0x94>
8000464c:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:70
			kprintf("vfs: warning: vop_reclaim: %e.\n", ret);
80004650:	2484178c 	addiu	a0,a0,6028
80004654:	0c007a9e 	jal	8001ea78 <kprintf>
80004658:	00402821 	move	a1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:74
		}
	}
	return ref_count;
}
8000465c:	8fbf001c 	lw	ra,28(sp)
80004660:	02001021 	move	v0,s0
80004664:	8fb10018 	lw	s1,24(sp)
80004668:	8fb00014 	lw	s0,20(sp)
8000466c:	03e00008 	jr	ra
80004670:	27bd0020 	addiu	sp,sp,32
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80004674:	0c006d04 	jal	8001b410 <intr_disable>
80004678:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8000467c:	8e22003c 	lw	v0,60(s1)
80004680:	2442ffff 	addiu	v0,v0,-1
80004684:	ae22003c 	sw	v0,60(s1)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80004688:	0c006d00 	jal	8001b400 <intr_enable>
8000468c:	00000000 	nop
80004690:	08001180 	j	80004600 <inode_ref_dec+0x38>
80004694:	00000000 	nop
inode_ref_dec():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:69
int inode_ref_dec(struct inode *node)
{
	assert(inode_ref_count(node) > 0);
	int ref_count, ret;
	if ((ref_count = atomic_sub_return(&(node->ref_count), 1)) == 0) {
		if ((ret = vop_reclaim(node)) != 0 && ret != -E_BUSY) {
80004698:	3c068002 	lui	a2,0x8002
8000469c:	3c078002 	lui	a3,0x8002
800046a0:	2484202c 	addiu	a0,a0,8236
800046a4:	24050045 	li	a1,69
800046a8:	24c60e28 	addiu	a2,a2,3624
800046ac:	0c006b0b 	jal	8001ac2c <__panic>
800046b0:	24e71734 	addiu	a3,a3,5940
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:66
 * invoked by vop_ref_dec
 * calls vop_reclaim if the ref_count hits zero
 * */
int inode_ref_dec(struct inode *node)
{
	assert(inode_ref_count(node) > 0);
800046b4:	3c048002 	lui	a0,0x8002
800046b8:	3c068002 	lui	a2,0x8002
800046bc:	3c078002 	lui	a3,0x8002
800046c0:	2484202c 	addiu	a0,a0,8236
800046c4:	24050042 	li	a1,66
800046c8:	24c60e28 	addiu	a2,a2,3624
800046cc:	0c006b0b 	jal	8001ac2c <__panic>
800046d0:	24e71718 	addiu	a3,a3,5912

800046d4 <null_vop_pass>:
null_vop_pass():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:122
 * null_vop_* - null vop functions
 * */
int null_vop_pass(void)
{
	return 0;
}
800046d4:	03e00008 	jr	ra
800046d8:	00001021 	move	v0,zero

800046dc <null_vop_inval>:
null_vop_inval():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:127

int null_vop_inval(void)
{
	return -E_INVAL;
}
800046dc:	03e00008 	jr	ra
800046e0:	2402ffea 	li	v0,-22

800046e4 <null_vop_unimp>:
null_vop_unimp():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:132

int null_vop_unimp(void)
{
	return -E_UNIMP;
}
800046e4:	03e00008 	jr	ra
800046e8:	2402ffdd 	li	v0,-35

800046ec <null_vop_isdir>:
null_vop_isdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:137

int null_vop_isdir(void)
{
	return -E_ISDIR;
}
800046ec:	03e00008 	jr	ra
800046f0:	2402ffeb 	li	v0,-21

800046f4 <null_vop_notdir>:
null_vop_notdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/inode.c:142

int null_vop_notdir(void)
{
	return -E_NOTDIR;
}
800046f4:	03e00008 	jr	ra
800046f8:	2402ffec 	li	v0,-20

800046fc <__alloc_fs>:
__alloc_fs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:16
static struct inode *bootfs_node = NULL;

extern void vfs_devlist_init(void);

struct fs *__alloc_fs(int type)
{
800046fc:	27bdffe8 	addiu	sp,sp,-24
80004700:	afb00010 	sw	s0,16(sp)
80004704:	00808021 	move	s0,a0
80004708:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:18
	struct fs *fs;
	if ((fs = kmalloc(sizeof(struct fs))) != NULL) {
8000470c:	0c005486 	jal	80015218 <kmalloc>
80004710:	24040098 	li	a0,152
80004714:	54400001 	bnezl	v0,8000471c <__alloc_fs+0x20>
80004718:	ac500084 	sw	s0,132(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:22
		fs->fs_type = type;
	}
	return fs;
}
8000471c:	8fbf0014 	lw	ra,20(sp)
80004720:	8fb00010 	lw	s0,16(sp)
80004724:	03e00008 	jr	ra
80004728:	27bd0018 	addiu	sp,sp,24

8000472c <vfs_set_bootfs>:
vfs_set_bootfs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:66
 * pathnames starting with /.
 *
 * It is also incidentally the system's first current directory.
 */
int vfs_set_bootfs(char *fsname)
{
8000472c:	27bdffd8 	addiu	sp,sp,-40
80004730:	afb00018 	sw	s0,24(sp)
80004734:	afbf0024 	sw	ra,36(sp)
80004738:	afb20020 	sw	s2,32(sp)
8000473c:	afb1001c 	sw	s1,28(sp)
80004740:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:68
	struct inode *node = NULL;
	if (fsname != NULL) {
80004744:	1080002c 	beqz	a0,800047f8 <vfs_set_bootfs+0xcc>
80004748:	afa00010 	sw	zero,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:70
		char *s;
		if ((s = strchr(fsname, ':')) == NULL || s[1] != '\0') {
8000474c:	0c005bdf 	jal	80016f7c <strchr>
80004750:	2405003a 	li	a1,58
80004754:	10400008 	beqz	v0,80004778 <vfs_set_bootfs+0x4c>
80004758:	2411ffea 	li	s1,-22
8000475c:	90420001 	lbu	v0,1(v0)
80004760:	14400006 	bnez	v0,8000477c <vfs_set_bootfs+0x50>
80004764:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:74
			return -E_INVAL;
		}
		int ret;
		if ((ret = vfs_chdir(fsname)) != 0) {
80004768:	0c001823 	jal	8000608c <vfs_chdir>
8000476c:	02002021 	move	a0,s0
80004770:	10400008 	beqz	v0,80004794 <vfs_set_bootfs+0x68>
80004774:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:83
			return ret;
		}
	}
	change_bootfs(node);
	return 0;
}
80004778:	8fbf0024 	lw	ra,36(sp)
8000477c:	02201021 	move	v0,s1
80004780:	8fb20020 	lw	s2,32(sp)
80004784:	8fb1001c 	lw	s1,28(sp)
80004788:	8fb00018 	lw	s0,24(sp)
8000478c:	03e00008 	jr	ra
80004790:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:77
		}
		int ret;
		if ((ret = vfs_chdir(fsname)) != 0) {
			return ret;
		}
		if ((ret = vfs_get_curdir(&node)) != 0) {
80004794:	0c0017ad 	jal	80005eb4 <vfs_get_curdir>
80004798:	27a40010 	addiu	a0,sp,16
8000479c:	1440fff6 	bnez	v0,80004778 <vfs_set_bootfs+0x4c>
800047a0:	00408821 	move	s1,v0
800047a4:	8fb10010 	lw	s1,16(sp)
lock_bootfs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:33
	file_system_type_list_init();
}

static void lock_bootfs(void)
{
	down(&bootfs_sem);
800047a8:	3c108015 	lui	s0,0x8015
800047ac:	0c00671f 	jal	80019c7c <down>
800047b0:	260444e8 	addiu	a0,s0,17640
change_bootfs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:49
static void change_bootfs(struct inode *node)
{
	struct inode *old;
	lock_bootfs();
	{
		old = bootfs_node, bootfs_node = node;
800047b4:	3c028015 	lui	v0,0x8015
800047b8:	8c5244fc 	lw	s2,17660(v0)
unlock_bootfs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:38
	down(&bootfs_sem);
}

static void unlock_bootfs(void)
{
	up(&bootfs_sem);
800047bc:	260444e8 	addiu	a0,s0,17640
change_bootfs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:49
static void change_bootfs(struct inode *node)
{
	struct inode *old;
	lock_bootfs();
	{
		old = bootfs_node, bootfs_node = node;
800047c0:	ac5144fc 	sw	s1,17660(v0)
unlock_bootfs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:38
	down(&bootfs_sem);
}

static void unlock_bootfs(void)
{
	up(&bootfs_sem);
800047c4:	0c00671d 	jal	80019c74 <up>
800047c8:	00008821 	move	s1,zero
change_bootfs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:52
	lock_bootfs();
	{
		old = bootfs_node, bootfs_node = node;
	}
	unlock_bootfs();
	if (old != NULL) {
800047cc:	1240ffeb 	beqz	s2,8000477c <vfs_set_bootfs+0x50>
800047d0:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:53
		vop_ref_dec(old);
800047d4:	0c001172 	jal	800045c8 <inode_ref_dec>
800047d8:	02402021 	move	a0,s2
vfs_set_bootfs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:83
			return ret;
		}
	}
	change_bootfs(node);
	return 0;
}
800047dc:	8fbf0024 	lw	ra,36(sp)
800047e0:	02201021 	move	v0,s1
800047e4:	8fb20020 	lw	s2,32(sp)
800047e8:	8fb1001c 	lw	s1,28(sp)
800047ec:	8fb00018 	lw	s0,24(sp)
800047f0:	03e00008 	jr	ra
800047f4:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:68
 * It is also incidentally the system's first current directory.
 */
int vfs_set_bootfs(char *fsname)
{
	struct inode *node = NULL;
	if (fsname != NULL) {
800047f8:	080011ea 	j	800047a8 <vfs_set_bootfs+0x7c>
800047fc:	00008821 	move	s1,zero

80004800 <vfs_get_bootfs>:
vfs_get_bootfs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:89

/*
 * Get bootfs_inode.
 */
int vfs_get_bootfs(struct inode **node_store)
{
80004800:	27bdffd8 	addiu	sp,sp,-40
80004804:	afb00018 	sw	s0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:91
	struct inode *node = NULL;
	if (bootfs_node != NULL) {
80004808:	3c108015 	lui	s0,0x8015
8000480c:	8e0344fc 	lw	v1,17660(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:89

/*
 * Get bootfs_inode.
 */
int vfs_get_bootfs(struct inode **node_store)
{
80004810:	afb20020 	sw	s2,32(sp)
80004814:	afbf0024 	sw	ra,36(sp)
80004818:	afb1001c 	sw	s1,28(sp)
8000481c:	00809021 	move	s2,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:91
	struct inode *node = NULL;
	if (bootfs_node != NULL) {
80004820:	1060000e 	beqz	v1,8000485c <vfs_get_bootfs+0x5c>
80004824:	2402fffe 	li	v0,-2
lock_bootfs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:33
	file_system_type_list_init();
}

static void lock_bootfs(void)
{
	down(&bootfs_sem);
80004828:	3c118015 	lui	s1,0x8015
8000482c:	262444e8 	addiu	a0,s1,17640
80004830:	0c00671f 	jal	80019c7c <down>
80004834:	afa20010 	sw	v0,16(sp)
vfs_get_bootfs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:94
{
	struct inode *node = NULL;
	if (bootfs_node != NULL) {
		lock_bootfs();
		{
			if ((node = bootfs_node) != NULL) {
80004838:	8e1044fc 	lw	s0,17660(s0)
8000483c:	1200000d 	beqz	s0,80004874 <vfs_get_bootfs+0x74>
80004840:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:95
				vop_ref_inc(bootfs_node);
80004844:	0c0010b6 	jal	800042d8 <inode_ref_inc>
80004848:	02002021 	move	a0,s0
unlock_bootfs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:38
	down(&bootfs_sem);
}

static void unlock_bootfs(void)
{
	up(&bootfs_sem);
8000484c:	0c00671d 	jal	80019c74 <up>
80004850:	262444e8 	addiu	a0,s1,17640
vfs_get_bootfs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:104
	}
	if (node == NULL) {
		return -E_NOENT;
	}
	*node_store = node;
	return 0;
80004854:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:103
		unlock_bootfs();
	}
	if (node == NULL) {
		return -E_NOENT;
	}
	*node_store = node;
80004858:	ae500000 	sw	s0,0(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:105
	return 0;
}
8000485c:	8fbf0024 	lw	ra,36(sp)
80004860:	8fb20020 	lw	s2,32(sp)
80004864:	8fb1001c 	lw	s1,28(sp)
80004868:	8fb00018 	lw	s0,24(sp)
8000486c:	03e00008 	jr	ra
80004870:	27bd0028 	addiu	sp,sp,40
unlock_bootfs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:38
	down(&bootfs_sem);
}

static void unlock_bootfs(void)
{
	up(&bootfs_sem);
80004874:	262444e8 	addiu	a0,s1,17640
80004878:	0c00671d 	jal	80019c74 <up>
8000487c:	afa20010 	sw	v0,16(sp)
vfs_get_bootfs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:105
	if (node == NULL) {
		return -E_NOENT;
	}
	*node_store = node;
	return 0;
}
80004880:	8fbf0024 	lw	ra,36(sp)
unlock_bootfs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:38
	down(&bootfs_sem);
}

static void unlock_bootfs(void)
{
	up(&bootfs_sem);
80004884:	8fa20010 	lw	v0,16(sp)
vfs_get_bootfs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:105
	if (node == NULL) {
		return -E_NOENT;
	}
	*node_store = node;
	return 0;
}
80004888:	8fb20020 	lw	s2,32(sp)
8000488c:	8fb1001c 	lw	s1,28(sp)
80004890:	8fb00018 	lw	s0,24(sp)
80004894:	03e00008 	jr	ra
80004898:	27bd0028 	addiu	sp,sp,40

8000489c <file_system_type_list_init>:
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
 * list_init - initialize a new entry
 * @elm:        new entry to be initialized
 * */
static inline void list_init(list_entry_t * elm)
{
	elm->prev = elm->next = elm;
8000489c:	3c038015 	lui	v1,0x8015
file_system_type_list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:139
}

void file_system_type_list_init(void)
{
	list_init(&file_system_type_list);
	sem_init(&file_system_type_sem, 1);
800048a0:	3c048015 	lui	a0,0x8015
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
800048a4:	24624500 	addiu	v0,v1,17664
file_system_type_list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:139
800048a8:	24844508 	addiu	a0,a0,17672
800048ac:	24050001 	li	a1,1
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
800048b0:	ac420004 	sw	v0,4(v0)
file_system_type_list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:139
800048b4:	08006717 	j	80019c5c <sem_init>
800048b8:	ac624500 	sw	v0,17664(v1)

800048bc <vfs_init>:
vfs_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:26
	return fs;
}

void vfs_init(void)
{
	sem_init(&bootfs_sem, 1);
800048bc:	3c048015 	lui	a0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:25
	}
	return fs;
}

void vfs_init(void)
{
800048c0:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:26
	sem_init(&bootfs_sem, 1);
800048c4:	248444e8 	addiu	a0,a0,17640
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:25
	}
	return fs;
}

void vfs_init(void)
{
800048c8:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:26
	sem_init(&bootfs_sem, 1);
800048cc:	0c006717 	jal	80019c5c <sem_init>
800048d0:	24050001 	li	a1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:27
	vfs_devlist_init();
800048d4:	0c0013a2 	jal	80004e88 <vfs_devlist_init>
800048d8:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:29
	file_system_type_list_init();
}
800048dc:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:28

void vfs_init(void)
{
	sem_init(&bootfs_sem, 1);
	vfs_devlist_init();
	file_system_type_list_init();
800048e0:	08001227 	j	8000489c <file_system_type_list_init>
800048e4:	27bd0018 	addiu	sp,sp,24

800048e8 <register_filesystem>:
register_filesystem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:143
	list_init(&file_system_type_list);
	sem_init(&file_system_type_sem, 1);
}

int register_filesystem(const char *name, int (*mount) (const char *devname))
{
800048e8:	27bdffd0 	addiu	sp,sp,-48
800048ec:	afb50028 	sw	s5,40(sp)
800048f0:	afb00014 	sw	s0,20(sp)
800048f4:	afbf002c 	sw	ra,44(sp)
800048f8:	afb40024 	sw	s4,36(sp)
800048fc:	afb30020 	sw	s3,32(sp)
80004900:	afb2001c 	sw	s2,28(sp)
80004904:	afb10018 	sw	s1,24(sp)
80004908:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:144
	assert(name != NULL);
8000490c:	10800042 	beqz	a0,80004a18 <register_filesystem+0x130>
80004910:	00a0a821 	move	s5,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:145
	if (strlen(name) > FS_MAX_DNAME_LEN) {
80004914:	0c005b79 	jal	80016de4 <strlen>
80004918:	2412ffe5 	li	s2,-27
8000491c:	2c420020 	sltiu	v0,v0,32
80004920:	10400020 	beqz	v0,800049a4 <register_filesystem+0xbc>
80004924:	8fbf002c 	lw	ra,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:151
		return -E_TOO_BIG;
	}

	int ret = -E_NO_MEM;
	char *s_name;
	if ((s_name = strdup(name)) == NULL) {
80004928:	0c005917 	jal	8001645c <strdup>
8000492c:	02002021 	move	a0,s0
80004930:	00408821 	move	s1,v0
80004934:	1040001a 	beqz	v0,800049a0 <register_filesystem+0xb8>
80004938:	2412fff4 	li	s2,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:156
		return ret;
	}

	struct file_system_type *fstype;
	if ((fstype = kmalloc(sizeof(struct file_system_type))) == NULL) {
8000493c:	0c005486 	jal	80015218 <kmalloc>
80004940:	24040010 	li	a0,16
80004944:	10400014 	beqz	v0,80004998 <register_filesystem+0xb0>
80004948:	00409821 	move	s3,v0
lock_file_system_type_list():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:115
static list_entry_t file_system_type_list;
static semaphore_t file_system_type_sem;

static void lock_file_system_type_list(void)
{
	down(&file_system_type_sem);
8000494c:	3c148015 	lui	s4,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:125
	up(&file_system_type_sem);
}

static bool check_file_system_type_name_conflict(const char *name)
{
	list_entry_t *list = &file_system_type_list, *le = list;
80004950:	3c128015 	lui	s2,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:115
static list_entry_t file_system_type_list;
static semaphore_t file_system_type_sem;

static void lock_file_system_type_list(void)
{
	down(&file_system_type_sem);
80004954:	26844508 	addiu	a0,s4,17672
80004958:	0c00671f 	jal	80019c7c <down>
8000495c:	26524500 	addiu	s2,s2,17664
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:125
	up(&file_system_type_sem);
}

static bool check_file_system_type_name_conflict(const char *name)
{
	list_entry_t *list = &file_system_type_list, *le = list;
80004960:	02408021 	move	s0,s2
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
80004964:	8e100004 	lw	s0,4(s0)
check_file_system_type_name_conflict():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:126
	while ((le = list_next(le)) != list) {
80004968:	52120017 	beql	s0,s2,800049c8 <register_filesystem+0xe0>
8000496c:	8e030004 	lw	v1,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:129
		struct file_system_type *fstype =
		    le2fstype(le, file_system_type_link);
		if (strcmp(fstype->name, name) == 0) {
80004970:	8e04fff8 	lw	a0,-8(s0)
80004974:	0c005bb8 	jal	80016ee0 <strcmp>
80004978:	02202821 	move	a1,s1
8000497c:	5440fffa 	bnezl	v0,80004968 <register_filesystem+0x80>
80004980:	8e100004 	lw	s0,4(s0)
unlock_file_system_type_list():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:120
	down(&file_system_type_sem);
}

static void unlock_file_system_type_list(void)
{
	up(&file_system_type_sem);
80004984:	0c00671d 	jal	80019c74 <up>
80004988:	26844508 	addiu	a0,s4,17672
register_filesystem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:174
	list_add(&file_system_type_list, &(fstype->file_system_type_link));
	unlock_file_system_type_list();
	return 0;

failed_cleanup_fstype:
	kfree(fstype);
8000498c:	0c0054b1 	jal	800152c4 <kfree>
80004990:	02602021 	move	a0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:160
	struct file_system_type *fstype;
	if ((fstype = kmalloc(sizeof(struct file_system_type))) == NULL) {
		goto failed_cleanup_name;
	}

	ret = -E_EXISTS;
80004994:	2412ffef 	li	s2,-17
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:176
	return 0;

failed_cleanup_fstype:
	kfree(fstype);
failed_cleanup_name:
	kfree(s_name);
80004998:	0c0054b1 	jal	800152c4 <kfree>
8000499c:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:178
	return ret;
}
800049a0:	8fbf002c 	lw	ra,44(sp)
800049a4:	02401021 	move	v0,s2
800049a8:	8fb50028 	lw	s5,40(sp)
800049ac:	8fb40024 	lw	s4,36(sp)
800049b0:	8fb30020 	lw	s3,32(sp)
800049b4:	8fb2001c 	lw	s2,28(sp)
800049b8:	8fb10018 	lw	s1,24(sp)
800049bc:	8fb00014 	lw	s0,20(sp)
800049c0:	03e00008 	jr	ra
800049c4:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:169
		goto failed_cleanup_fstype;
	}
	fstype->name = s_name;
	fstype->mount = mount;

	list_add(&file_system_type_list, &(fstype->file_system_type_link));
800049c8:	26620008 	addiu	v0,s3,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:166
	lock_file_system_type_list();
	if (!check_file_system_type_name_conflict(s_name)) {
		unlock_file_system_type_list();
		goto failed_cleanup_fstype;
	}
	fstype->name = s_name;
800049cc:	ae710000 	sw	s1,0(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:167
	fstype->mount = mount;
800049d0:	ae750004 	sw	s5,4(s3)
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
	elm->next = next;
800049d4:	ae63000c 	sw	v1,12(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
800049d8:	ac620000 	sw	v0,0(v1)
800049dc:	ae020004 	sw	v0,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->next = next;
	elm->prev = prev;
800049e0:	ae700008 	sw	s0,8(s3)
unlock_file_system_type_list():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:120
	down(&file_system_type_sem);
}

static void unlock_file_system_type_list(void)
{
	up(&file_system_type_sem);
800049e4:	0c00671d 	jal	80019c74 <up>
800049e8:	26844508 	addiu	a0,s4,17672
register_filesystem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:178
failed_cleanup_fstype:
	kfree(fstype);
failed_cleanup_name:
	kfree(s_name);
	return ret;
}
800049ec:	8fbf002c 	lw	ra,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:171
	fstype->name = s_name;
	fstype->mount = mount;

	list_add(&file_system_type_list, &(fstype->file_system_type_link));
	unlock_file_system_type_list();
	return 0;
800049f0:	00009021 	move	s2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:178
failed_cleanup_fstype:
	kfree(fstype);
failed_cleanup_name:
	kfree(s_name);
	return ret;
}
800049f4:	02401021 	move	v0,s2
800049f8:	8fb50028 	lw	s5,40(sp)
800049fc:	8fb40024 	lw	s4,36(sp)
80004a00:	8fb30020 	lw	s3,32(sp)
80004a04:	8fb2001c 	lw	s2,28(sp)
80004a08:	8fb10018 	lw	s1,24(sp)
80004a0c:	8fb00014 	lw	s0,20(sp)
80004a10:	03e00008 	jr	ra
80004a14:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:144
	sem_init(&file_system_type_sem, 1);
}

int register_filesystem(const char *name, int (*mount) (const char *devname))
{
	assert(name != NULL);
80004a18:	3c048002 	lui	a0,0x8002
80004a1c:	3c068002 	lui	a2,0x8002
80004a20:	3c078002 	lui	a3,0x8002
80004a24:	248417ac 	addiu	a0,a0,6060
80004a28:	24050090 	li	a1,144
80004a2c:	24c60e28 	addiu	a2,a2,3624
80004a30:	0c006b0b 	jal	8001ac2c <__panic>
80004a34:	24e717b4 	addiu	a3,a3,6068

80004a38 <unregister_filesystem>:
unregister_filesystem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:181
	kfree(s_name);
	return ret;
}

int unregister_filesystem(const char *name)
{
80004a38:	27bdffd0 	addiu	sp,sp,-48
80004a3c:	afb40028 	sw	s4,40(sp)
80004a40:	afb1001c 	sw	s1,28(sp)
lock_file_system_type_list():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:115
static list_entry_t file_system_type_list;
static semaphore_t file_system_type_sem;

static void lock_file_system_type_list(void)
{
	down(&file_system_type_sem);
80004a44:	3c148015 	lui	s4,0x8015
unregister_filesystem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:184

int unregister_filesystem(const char *name)
{
	int ret = -E_EXISTS;
	lock_file_system_type_list();
	list_entry_t *list = &file_system_type_list, *le = list;
80004a48:	3c118015 	lui	s1,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:181
	kfree(s_name);
	return ret;
}

int unregister_filesystem(const char *name)
{
80004a4c:	afb20020 	sw	s2,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:184
	int ret = -E_EXISTS;
	lock_file_system_type_list();
	list_entry_t *list = &file_system_type_list, *le = list;
80004a50:	26314500 	addiu	s1,s1,17664
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:181
	kfree(s_name);
	return ret;
}

int unregister_filesystem(const char *name)
{
80004a54:	00809021 	move	s2,a0
lock_file_system_type_list():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:115
static list_entry_t file_system_type_list;
static semaphore_t file_system_type_sem;

static void lock_file_system_type_list(void)
{
	down(&file_system_type_sem);
80004a58:	26844508 	addiu	a0,s4,17672
unregister_filesystem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:181
	kfree(s_name);
	return ret;
}

int unregister_filesystem(const char *name)
{
80004a5c:	afb00018 	sw	s0,24(sp)
80004a60:	afbf002c 	sw	ra,44(sp)
80004a64:	afb30024 	sw	s3,36(sp)
lock_file_system_type_list():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:115
static list_entry_t file_system_type_list;
static semaphore_t file_system_type_sem;

static void lock_file_system_type_list(void)
{
	down(&file_system_type_sem);
80004a68:	0c00671f 	jal	80019c7c <down>
80004a6c:	02208021 	move	s0,s1
unregister_filesystem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:185
int unregister_filesystem(const char *name)
{
	int ret = -E_EXISTS;
	lock_file_system_type_list();
	list_entry_t *list = &file_system_type_list, *le = list;
	while ((le = list_next(le)) != list) {
80004a70:	080012a3 	j	80004a8c <unregister_filesystem+0x54>
80004a74:	8e100004 	lw	s0,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:188
		struct file_system_type *fstype =
		    le2fstype(le, file_system_type_link);
		if (strcmp(fstype->name, name) == 0) {
80004a78:	0c005bb8 	jal	80016ee0 <strcmp>
80004a7c:	8e04fff8 	lw	a0,-8(s0)
80004a80:	50400012 	beqzl	v0,80004acc <unregister_filesystem+0x94>
80004a84:	8e050000 	lw	a1,0(s0)
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
80004a88:	8e100004 	lw	s0,4(s0)
unregister_filesystem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:188
80004a8c:	02402821 	move	a1,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:185
int unregister_filesystem(const char *name)
{
	int ret = -E_EXISTS;
	lock_file_system_type_list();
	list_entry_t *list = &file_system_type_list, *le = list;
	while ((le = list_next(le)) != list) {
80004a90:	1611fff9 	bne	s0,s1,80004a78 <unregister_filesystem+0x40>
80004a94:	2613fff8 	addiu	s3,s0,-8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:182
	return ret;
}

int unregister_filesystem(const char *name)
{
	int ret = -E_EXISTS;
80004a98:	2402ffef 	li	v0,-17
unlock_file_system_type_list():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:120
	down(&file_system_type_sem);
}

static void unlock_file_system_type_list(void)
{
	up(&file_system_type_sem);
80004a9c:	26844508 	addiu	a0,s4,17672
80004aa0:	0c00671d 	jal	80019c74 <up>
80004aa4:	afa20010 	sw	v0,16(sp)
unregister_filesystem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:199
		}
	}

	unlock_file_system_type_list();
	return ret;
}
80004aa8:	8fbf002c 	lw	ra,44(sp)
80004aac:	8fa20010 	lw	v0,16(sp)
80004ab0:	8fb40028 	lw	s4,40(sp)
80004ab4:	8fb30024 	lw	s3,36(sp)
80004ab8:	8fb20020 	lw	s2,32(sp)
80004abc:	8fb1001c 	lw	s1,28(sp)
80004ac0:	8fb00018 	lw	s0,24(sp)
80004ac4:	03e00008 	jr	ra
80004ac8:	27bd0030 	addiu	sp,sp,48
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
80004acc:	8e030004 	lw	v1,4(s0)
unregister_filesystem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:190
	while ((le = list_next(le)) != list) {
		struct file_system_type *fstype =
		    le2fstype(le, file_system_type_link);
		if (strcmp(fstype->name, name) == 0) {
			list_del(le);
			kfree((char *)fstype->name);
80004ad0:	8e04fff8 	lw	a0,-8(s0)
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
80004ad4:	aca30004 	sw	v1,4(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:170
	next->prev = prev;
80004ad8:	ac650000 	sw	a1,0(v1)
unregister_filesystem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:190
80004adc:	0c0054b1 	jal	800152c4 <kfree>
80004ae0:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:191
			kfree(fstype);
80004ae4:	0c0054b1 	jal	800152c4 <kfree>
80004ae8:	02602021 	move	a0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:193
			ret = 0;
			break;
80004aec:	8fa20010 	lw	v0,16(sp)
unlock_file_system_type_list():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:120
	down(&file_system_type_sem);
}

static void unlock_file_system_type_list(void)
{
	up(&file_system_type_sem);
80004af0:	26844508 	addiu	a0,s4,17672
80004af4:	0c00671d 	jal	80019c74 <up>
80004af8:	afa20010 	sw	v0,16(sp)
unregister_filesystem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:199
		}
	}

	unlock_file_system_type_list();
	return ret;
}
80004afc:	8fbf002c 	lw	ra,44(sp)
80004b00:	8fa20010 	lw	v0,16(sp)
80004b04:	8fb40028 	lw	s4,40(sp)
80004b08:	8fb30024 	lw	s3,36(sp)
80004b0c:	8fb20020 	lw	s2,32(sp)
80004b10:	8fb1001c 	lw	s1,28(sp)
80004b14:	8fb00018 	lw	s0,24(sp)
80004b18:	03e00008 	jr	ra
80004b1c:	27bd0030 	addiu	sp,sp,48

80004b20 <do_mount>:
do_mount():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:202

int do_mount(const char *devname, const char *fsname)
{
80004b20:	27bdffd0 	addiu	sp,sp,-48
80004b24:	afb30024 	sw	s3,36(sp)
80004b28:	afb1001c 	sw	s1,28(sp)
lock_file_system_type_list():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:115
static list_entry_t file_system_type_list;
static semaphore_t file_system_type_sem;

static void lock_file_system_type_list(void)
{
	down(&file_system_type_sem);
80004b2c:	3c138015 	lui	s3,0x8015
do_mount():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:205

int do_mount(const char *devname, const char *fsname)
{
	int ret = -E_EXISTS;
	lock_file_system_type_list();
	list_entry_t *list = &file_system_type_list, *le = list;
80004b30:	3c118015 	lui	s1,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:202
	unlock_file_system_type_list();
	return ret;
}

int do_mount(const char *devname, const char *fsname)
{
80004b34:	afb40028 	sw	s4,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:205
	int ret = -E_EXISTS;
	lock_file_system_type_list();
	list_entry_t *list = &file_system_type_list, *le = list;
80004b38:	26314500 	addiu	s1,s1,17664
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:202
	unlock_file_system_type_list();
	return ret;
}

int do_mount(const char *devname, const char *fsname)
{
80004b3c:	0080a021 	move	s4,a0
lock_file_system_type_list():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:115
static list_entry_t file_system_type_list;
static semaphore_t file_system_type_sem;

static void lock_file_system_type_list(void)
{
	down(&file_system_type_sem);
80004b40:	26644508 	addiu	a0,s3,17672
do_mount():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:202
	unlock_file_system_type_list();
	return ret;
}

int do_mount(const char *devname, const char *fsname)
{
80004b44:	afb20020 	sw	s2,32(sp)
80004b48:	afb00018 	sw	s0,24(sp)
80004b4c:	afbf002c 	sw	ra,44(sp)
80004b50:	00a09021 	move	s2,a1
lock_file_system_type_list():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:115
static list_entry_t file_system_type_list;
static semaphore_t file_system_type_sem;

static void lock_file_system_type_list(void)
{
	down(&file_system_type_sem);
80004b54:	0c00671f 	jal	80019c7c <down>
80004b58:	02208021 	move	s0,s1
do_mount():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:206
int do_mount(const char *devname, const char *fsname)
{
	int ret = -E_EXISTS;
	lock_file_system_type_list();
	list_entry_t *list = &file_system_type_list, *le = list;
	while ((le = list_next(le)) != list) {
80004b5c:	080012de 	j	80004b78 <do_mount+0x58>
80004b60:	8e100004 	lw	s0,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:209
		struct file_system_type *fstype =
		    le2fstype(le, file_system_type_link);
		if (strcmp(fstype->name, fsname) == 0) {
80004b64:	0c005bb8 	jal	80016ee0 <strcmp>
80004b68:	02402821 	move	a1,s2
80004b6c:	50400011 	beqzl	v0,80004bb4 <do_mount+0x94>
80004b70:	8e02fffc 	lw	v0,-4(s0)
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
80004b74:	8e100004 	lw	s0,4(s0)
do_mount():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:206
int do_mount(const char *devname, const char *fsname)
{
	int ret = -E_EXISTS;
	lock_file_system_type_list();
	list_entry_t *list = &file_system_type_list, *le = list;
	while ((le = list_next(le)) != list) {
80004b78:	5611fffa 	bnel	s0,s1,80004b64 <do_mount+0x44>
80004b7c:	8e04fff8 	lw	a0,-8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:203
	return ret;
}

int do_mount(const char *devname, const char *fsname)
{
	int ret = -E_EXISTS;
80004b80:	2402ffef 	li	v0,-17
unlock_file_system_type_list():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:120
	down(&file_system_type_sem);
}

static void unlock_file_system_type_list(void)
{
	up(&file_system_type_sem);
80004b84:	26644508 	addiu	a0,s3,17672
80004b88:	0c00671d 	jal	80019c74 <up>
80004b8c:	afa20010 	sw	v0,16(sp)
do_mount():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:217
			break;
		}
	}
	unlock_file_system_type_list();
	return ret;
}
80004b90:	8fbf002c 	lw	ra,44(sp)
80004b94:	8fa20010 	lw	v0,16(sp)
80004b98:	8fb40028 	lw	s4,40(sp)
80004b9c:	8fb30024 	lw	s3,36(sp)
80004ba0:	8fb20020 	lw	s2,32(sp)
80004ba4:	8fb1001c 	lw	s1,28(sp)
80004ba8:	8fb00018 	lw	s0,24(sp)
80004bac:	03e00008 	jr	ra
80004bb0:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:210
	list_entry_t *list = &file_system_type_list, *le = list;
	while ((le = list_next(le)) != list) {
		struct file_system_type *fstype =
		    le2fstype(le, file_system_type_link);
		if (strcmp(fstype->name, fsname) == 0) {
			assert(fstype->mount);
80004bb4:	1040000f 	beqz	v0,80004bf4 <do_mount+0xd4>
80004bb8:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:211
			ret = (fstype->mount) (devname);
80004bbc:	0040f809 	jalr	v0
80004bc0:	02802021 	move	a0,s4
unlock_file_system_type_list():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:120
	down(&file_system_type_sem);
}

static void unlock_file_system_type_list(void)
{
	up(&file_system_type_sem);
80004bc4:	26644508 	addiu	a0,s3,17672
80004bc8:	0c00671d 	jal	80019c74 <up>
80004bcc:	afa20010 	sw	v0,16(sp)
do_mount():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:217
			break;
		}
	}
	unlock_file_system_type_list();
	return ret;
}
80004bd0:	8fbf002c 	lw	ra,44(sp)
80004bd4:	8fa20010 	lw	v0,16(sp)
80004bd8:	8fb40028 	lw	s4,40(sp)
80004bdc:	8fb30024 	lw	s3,36(sp)
80004be0:	8fb20020 	lw	s2,32(sp)
80004be4:	8fb1001c 	lw	s1,28(sp)
80004be8:	8fb00018 	lw	s0,24(sp)
80004bec:	03e00008 	jr	ra
80004bf0:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:210
	list_entry_t *list = &file_system_type_list, *le = list;
	while ((le = list_next(le)) != list) {
		struct file_system_type *fstype =
		    le2fstype(le, file_system_type_link);
		if (strcmp(fstype->name, fsname) == 0) {
			assert(fstype->mount);
80004bf4:	3c068002 	lui	a2,0x8002
80004bf8:	3c078002 	lui	a3,0x8002
80004bfc:	248417ac 	addiu	a0,a0,6060
80004c00:	240500d2 	li	a1,210
80004c04:	24c60e28 	addiu	a2,a2,3624
80004c08:	0c006b0b 	jal	8001ac2c <__panic>
80004c0c:	24e717c4 	addiu	a3,a3,6084

80004c10 <do_umount>:
do_umount():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfs.c:221
	return ret;
}

int do_umount(const char *devname)
{
	return vfs_unmount(devname);
80004c10:	08001495 	j	80005254 <vfs_unmount>
80004c14:	00000000 	nop

80004c18 <lock_vdev_list>:
lock_vdev_list():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:54
static list_entry_t vdev_list;
static semaphore_t vdev_list_sem;

static void lock_vdev_list(void)
{
	down(&vdev_list_sem);
80004c18:	3c048015 	lui	a0,0x8015
80004c1c:	0800671f 	j	80019c7c <down>
80004c20:	24844524 	addiu	a0,a0,17700

80004c24 <unlock_vdev_list>:
unlock_vdev_list():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:59
}

static void unlock_vdev_list(void)
{
	up(&vdev_list_sem);
80004c24:	3c048015 	lui	a0,0x8015
80004c28:	0800671d 	j	80019c74 <up>
80004c2c:	24844524 	addiu	a0,a0,17700

80004c30 <vfs_do_add>:
vfs_do_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:211
 * to have a filesystem mounted on it.
 */
static int
vfs_do_add(const char *devname, struct inode *devnode, struct fs *fs,
	   bool mountable)
{
80004c30:	27bdffd0 	addiu	sp,sp,-48
80004c34:	afb60028 	sw	s6,40(sp)
80004c38:	afb20018 	sw	s2,24(sp)
80004c3c:	afb10014 	sw	s1,20(sp)
80004c40:	afb00010 	sw	s0,16(sp)
80004c44:	afbf002c 	sw	ra,44(sp)
80004c48:	afb50024 	sw	s5,36(sp)
80004c4c:	afb40020 	sw	s4,32(sp)
80004c50:	afb3001c 	sw	s3,28(sp)
80004c54:	00808021 	move	s0,a0
80004c58:	00a08821 	move	s1,a1
80004c5c:	00c09021 	move	s2,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:212
	assert(devname != NULL);
80004c60:	10800050 	beqz	a0,80004da4 <vfs_do_add+0x174>
80004c64:	00e0b021 	move	s6,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:213
	assert((devnode == NULL && !mountable)
80004c68:	10a00045 	beqz	a1,80004d80 <vfs_do_add+0x150>
80004c6c:	24021234 	li	v0,4660
80004c70:	8ca30038 	lw	v1,56(a1)
80004c74:	14620044 	bne	v1,v0,80004d88 <vfs_do_add+0x158>
80004c78:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:215
	       || (devnode != NULL && check_inode_type(devnode, device)));
	if (strlen(devname) > FS_MAX_DNAME_LEN) {
80004c7c:	0c005b79 	jal	80016de4 <strlen>
80004c80:	02002021 	move	a0,s0
80004c84:	2c420020 	sltiu	v0,v0,32
80004c88:	1040001c 	beqz	v0,80004cfc <vfs_do_add+0xcc>
80004c8c:	2414ffe5 	li	s4,-27
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:221
		return -E_TOO_BIG;
	}

	int ret = -E_NO_MEM;
	char *s_devname;
	if ((s_devname = strdup(devname)) == NULL) {
80004c90:	0c005917 	jal	8001645c <strdup>
80004c94:	02002021 	move	a0,s0
80004c98:	00409821 	move	s3,v0
80004c9c:	10400017 	beqz	v0,80004cfc <vfs_do_add+0xcc>
80004ca0:	2414fff4 	li	s4,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:226
		return ret;
	}

	vfs_dev_t *vdev;
	if ((vdev = kmalloc(sizeof(vfs_dev_t))) == NULL) {
80004ca4:	0c005486 	jal	80015218 <kmalloc>
80004ca8:	24040018 	li	a0,24
80004cac:	10400011 	beqz	v0,80004cf4 <vfs_do_add+0xc4>
80004cb0:	0040a821 	move	s5,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:192
	return NULL;
}

static bool check_devname_conflict(const char *devname)
{
	list_entry_t *list = &vdev_list, *le = list;
80004cb4:	3c148015 	lui	s4,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:231
	if ((vdev = kmalloc(sizeof(vfs_dev_t))) == NULL) {
		goto failed_cleanup_name;
	}

	ret = -E_EXISTS;
	lock_vdev_list();
80004cb8:	0c001306 	jal	80004c18 <lock_vdev_list>
80004cbc:	2694451c 	addiu	s4,s4,17692
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:192
	return NULL;
}

static bool check_devname_conflict(const char *devname)
{
	list_entry_t *list = &vdev_list, *le = list;
80004cc0:	02808021 	move	s0,s4
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
80004cc4:	8e100004 	lw	s0,4(s0)
check_devname_conflict():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:193
	while ((le = list_next(le)) != list) {
80004cc8:	52140017 	beql	s0,s4,80004d28 <vfs_do_add+0xf8>
80004ccc:	8e020004 	lw	v0,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:195
		vfs_dev_t *vdev = le2vdev(le, vdev_link);
		if (strcmp(vdev->devname, devname) == 0) {
80004cd0:	8e04fff0 	lw	a0,-16(s0)
80004cd4:	0c005bb8 	jal	80016ee0 <strcmp>
80004cd8:	02602821 	move	a1,s3
80004cdc:	5440fffa 	bnezl	v0,80004cc8 <vfs_do_add+0x98>
80004ce0:	8e100004 	lw	s0,4(s0)
vfs_do_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:233
	}

	ret = -E_EXISTS;
	lock_vdev_list();
	if (!check_devname_conflict(s_devname)) {
		unlock_vdev_list();
80004ce4:	0c001309 	jal	80004c24 <unlock_vdev_list>
80004ce8:	2414ffef 	li	s4,-17
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:246
	list_add(&vdev_list, &(vdev->vdev_link));
	unlock_vdev_list();
	return 0;

failed_cleanup_vdev:
	kfree(vdev);
80004cec:	0c0054b1 	jal	800152c4 <kfree>
80004cf0:	02a02021 	move	a0,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:248
failed_cleanup_name:
	kfree(s_devname);
80004cf4:	0c0054b1 	jal	800152c4 <kfree>
80004cf8:	02602021 	move	a0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:250
	return ret;
}
80004cfc:	8fbf002c 	lw	ra,44(sp)
80004d00:	02801021 	move	v0,s4
80004d04:	8fb60028 	lw	s6,40(sp)
80004d08:	8fb50024 	lw	s5,36(sp)
80004d0c:	8fb40020 	lw	s4,32(sp)
80004d10:	8fb3001c 	lw	s3,28(sp)
80004d14:	8fb20018 	lw	s2,24(sp)
80004d18:	8fb10014 	lw	s1,20(sp)
80004d1c:	8fb00010 	lw	s0,16(sp)
80004d20:	03e00008 	jr	ra
80004d24:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:241
	vdev->devname = s_devname;
	vdev->devnode = devnode;
	vdev->mountable = mountable;
	vdev->fs = fs;

	list_add(&vdev_list, &(vdev->vdev_link));
80004d28:	26a30010 	addiu	v1,s5,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:236
	lock_vdev_list();
	if (!check_devname_conflict(s_devname)) {
		unlock_vdev_list();
		goto failed_cleanup_vdev;
	}
	vdev->devname = s_devname;
80004d2c:	aeb30000 	sw	s3,0(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:237
	vdev->devnode = devnode;
80004d30:	aeb10004 	sw	s1,4(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:238
	vdev->mountable = mountable;
80004d34:	aeb6000c 	sw	s6,12(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:239
	vdev->fs = fs;
80004d38:	aeb20008 	sw	s2,8(s5)
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
	elm->next = next;
80004d3c:	aea20014 	sw	v0,20(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
80004d40:	ac430000 	sw	v1,0(v0)
80004d44:	ae030004 	sw	v1,4(s0)
vfs_do_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:242

	list_add(&vdev_list, &(vdev->vdev_link));
	unlock_vdev_list();
80004d48:	0c001309 	jal	80004c24 <unlock_vdev_list>
80004d4c:	aeb00010 	sw	s0,16(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:250
failed_cleanup_vdev:
	kfree(vdev);
failed_cleanup_name:
	kfree(s_devname);
	return ret;
}
80004d50:	8fbf002c 	lw	ra,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:243
	vdev->mountable = mountable;
	vdev->fs = fs;

	list_add(&vdev_list, &(vdev->vdev_link));
	unlock_vdev_list();
	return 0;
80004d54:	0000a021 	move	s4,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:250
failed_cleanup_vdev:
	kfree(vdev);
failed_cleanup_name:
	kfree(s_devname);
	return ret;
}
80004d58:	02801021 	move	v0,s4
80004d5c:	8fb60028 	lw	s6,40(sp)
80004d60:	8fb50024 	lw	s5,36(sp)
80004d64:	8fb40020 	lw	s4,32(sp)
80004d68:	8fb3001c 	lw	s3,28(sp)
80004d6c:	8fb20018 	lw	s2,24(sp)
80004d70:	8fb10014 	lw	s1,20(sp)
80004d74:	8fb00010 	lw	s0,16(sp)
80004d78:	03e00008 	jr	ra
80004d7c:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:213
static int
vfs_do_add(const char *devname, struct inode *devnode, struct fs *fs,
	   bool mountable)
{
	assert(devname != NULL);
	assert((devnode == NULL && !mountable)
80004d80:	10e0ffbe 	beqz	a3,80004c7c <vfs_do_add+0x4c>
80004d84:	3c048002 	lui	a0,0x8002
80004d88:	3c068002 	lui	a2,0x8002
80004d8c:	3c078002 	lui	a3,0x8002
80004d90:	248417d4 	addiu	a0,a0,6100
80004d94:	240500d6 	li	a1,214
80004d98:	24c60e28 	addiu	a2,a2,3624
80004d9c:	0c006b0b 	jal	8001ac2c <__panic>
80004da0:	24e717f0 	addiu	a3,a3,6128
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:212
 */
static int
vfs_do_add(const char *devname, struct inode *devnode, struct fs *fs,
	   bool mountable)
{
	assert(devname != NULL);
80004da4:	3c048002 	lui	a0,0x8002
80004da8:	3c068002 	lui	a2,0x8002
80004dac:	3c078002 	lui	a3,0x8002
80004db0:	248417d4 	addiu	a0,a0,6100
80004db4:	240500d4 	li	a1,212
80004db8:	24c60e28 	addiu	a2,a2,3624
80004dbc:	0c006b0b 	jal	8001ac2c <__panic>
80004dc0:	24e717e0 	addiu	a3,a3,6112

80004dc4 <find_mount>:
find_mount():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:276
/*
 * Look for a mountable device named DEVNAME.
 * Should already hold an lock::vdev_list_sem.
 */
static int find_mount(const char *devname, vfs_dev_t ** vdev_store)
{
80004dc4:	27bdffd8 	addiu	sp,sp,-40
80004dc8:	afb40020 	sw	s4,32(sp)
80004dcc:	afb3001c 	sw	s3,28(sp)
80004dd0:	afbf0024 	sw	ra,36(sp)
80004dd4:	afb20018 	sw	s2,24(sp)
80004dd8:	afb10014 	sw	s1,20(sp)
80004ddc:	afb00010 	sw	s0,16(sp)
80004de0:	00809821 	move	s3,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:277
	assert(devname != NULL);
80004de4:	10800020 	beqz	a0,80004e68 <find_mount+0xa4>
80004de8:	00a0a021 	move	s4,a1
80004dec:	3c118015 	lui	s1,0x8015
80004df0:	2631451c 	addiu	s1,s1,17692
80004df4:	02208021 	move	s0,s1
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
80004df8:	8e100004 	lw	s0,4(s0)
find_mount():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:279
	list_entry_t *list = &vdev_list, *le = list;
	while ((le = list_next(le)) != list) {
80004dfc:	12110012 	beq	s0,s1,80004e48 <find_mount+0x84>
80004e00:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:281
		vfs_dev_t *vdev = le2vdev(le, vdev_link);
		if (vdev->mountable && strcmp(vdev->devname, devname) == 0) {
80004e04:	8e02fffc 	lw	v0,-4(s0)
80004e08:	1040fffb 	beqz	v0,80004df8 <find_mount+0x34>
80004e0c:	2612fff0 	addiu	s2,s0,-16
80004e10:	8e04fff0 	lw	a0,-16(s0)
80004e14:	0c005bb8 	jal	80016ee0 <strcmp>
80004e18:	02602821 	move	a1,s3
80004e1c:	5440fff7 	bnezl	v0,80004dfc <find_mount+0x38>
80004e20:	8e100004 	lw	s0,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:287
			*vdev_store = vdev;
			return 0;
		}
	}
	return -E_NO_DEV;
}
80004e24:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:282
	assert(devname != NULL);
	list_entry_t *list = &vdev_list, *le = list;
	while ((le = list_next(le)) != list) {
		vfs_dev_t *vdev = le2vdev(le, vdev_link);
		if (vdev->mountable && strcmp(vdev->devname, devname) == 0) {
			*vdev_store = vdev;
80004e28:	ae920000 	sw	s2,0(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:287
			return 0;
		}
	}
	return -E_NO_DEV;
}
80004e2c:	8fb3001c 	lw	s3,28(sp)
80004e30:	8fb40020 	lw	s4,32(sp)
80004e34:	8fb20018 	lw	s2,24(sp)
80004e38:	8fb10014 	lw	s1,20(sp)
80004e3c:	8fb00010 	lw	s0,16(sp)
80004e40:	03e00008 	jr	ra
80004e44:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:286
		if (vdev->mountable && strcmp(vdev->devname, devname) == 0) {
			*vdev_store = vdev;
			return 0;
		}
	}
	return -E_NO_DEV;
80004e48:	2402ffed 	li	v0,-19
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:287
}
80004e4c:	8fb40020 	lw	s4,32(sp)
80004e50:	8fb3001c 	lw	s3,28(sp)
80004e54:	8fb20018 	lw	s2,24(sp)
80004e58:	8fb10014 	lw	s1,20(sp)
80004e5c:	8fb00010 	lw	s0,16(sp)
80004e60:	03e00008 	jr	ra
80004e64:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:277
 * Look for a mountable device named DEVNAME.
 * Should already hold an lock::vdev_list_sem.
 */
static int find_mount(const char *devname, vfs_dev_t ** vdev_store)
{
	assert(devname != NULL);
80004e68:	3c048002 	lui	a0,0x8002
80004e6c:	3c068002 	lui	a2,0x8002
80004e70:	3c078002 	lui	a3,0x8002
80004e74:	248417d4 	addiu	a0,a0,6100
80004e78:	24050115 	li	a1,277
80004e7c:	24c60e28 	addiu	a2,a2,3624
80004e80:	0c006b0b 	jal	8001ac2c <__panic>
80004e84:	24e717e0 	addiu	a3,a3,6112

80004e88 <vfs_devlist_init>:
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
 * list_init - initialize a new entry
 * @elm:        new entry to be initialized
 * */
static inline void list_init(list_entry_t * elm)
{
	elm->prev = elm->next = elm;
80004e88:	3c038015 	lui	v1,0x8015
vfs_devlist_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:65
}

void vfs_devlist_init(void)
{
	list_init(&vdev_list);
	sem_init(&vdev_list_sem, 1);
80004e8c:	3c048015 	lui	a0,0x8015
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
80004e90:	2462451c 	addiu	v0,v1,17692
vfs_devlist_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:65
80004e94:	24844524 	addiu	a0,a0,17700
80004e98:	24050001 	li	a1,1
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
80004e9c:	ac420004 	sw	v0,4(v0)
vfs_devlist_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:65
80004ea0:	08006717 	j	80019c5c <sem_init>
80004ea4:	ac62451c 	sw	v0,17692(v1)

80004ea8 <vfs_cleanup>:
vfs_cleanup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:72

/*
 * clean up all FS
 */
void vfs_cleanup(void)
{
80004ea8:	27bdffe0 	addiu	sp,sp,-32
80004eac:	afb10018 	sw	s1,24(sp)
list_empty():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:126
 * list_empty - tests whether a list is empty
 * @list:       the list to test.
 * */
static inline bool list_empty(list_entry_t * list)
{
	return list->next == list;
80004eb0:	3c118015 	lui	s1,0x8015
80004eb4:	2631451c 	addiu	s1,s1,17692
vfs_cleanup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:73
	if (!list_empty(&vdev_list)) {
80004eb8:	8e220004 	lw	v0,4(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:72

/*
 * clean up all FS
 */
void vfs_cleanup(void)
{
80004ebc:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:73
	if (!list_empty(&vdev_list)) {
80004ec0:	10510014 	beq	v0,s1,80004f14 <vfs_cleanup+0x6c>
80004ec4:	afb00014 	sw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:74
		lock_vdev_list();
80004ec8:	0c001306 	jal	80004c18 <lock_vdev_list>
80004ecc:	02208021 	move	s0,s1
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
80004ed0:	8e100004 	lw	s0,4(s0)
vfs_cleanup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:77
		{
			list_entry_t *list = &vdev_list, *le = list;
			while ((le = list_next(le)) != list) {
80004ed4:	1211000b 	beq	s0,s1,80004f04 <vfs_cleanup+0x5c>
80004ed8:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:79
				vfs_dev_t *vdev = le2vdev(le, vdev_link);
				if (vdev->fs != NULL) {
80004edc:	8e02fff8 	lw	v0,-8(s0)
80004ee0:	1040fffb 	beqz	v0,80004ed0 <vfs_cleanup+0x28>
80004ee4:	00402021 	move	a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:80
					fsop_cleanup(vdev->fs);
80004ee8:	8c420094 	lw	v0,148(v0)
80004eec:	0040f809 	jalr	v0
80004ef0:	00000000 	nop
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
80004ef4:	8e100004 	lw	s0,4(s0)
vfs_cleanup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:77
{
	if (!list_empty(&vdev_list)) {
		lock_vdev_list();
		{
			list_entry_t *list = &vdev_list, *le = list;
			while ((le = list_next(le)) != list) {
80004ef8:	5611fff9 	bnel	s0,s1,80004ee0 <vfs_cleanup+0x38>
80004efc:	8e02fff8 	lw	v0,-8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:86
				}
			}
		}
		unlock_vdev_list();
	}
}
80004f00:	8fbf001c 	lw	ra,28(sp)
80004f04:	8fb10018 	lw	s1,24(sp)
80004f08:	8fb00014 	lw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:84
				if (vdev->fs != NULL) {
					fsop_cleanup(vdev->fs);
				}
			}
		}
		unlock_vdev_list();
80004f0c:	08001309 	j	80004c24 <unlock_vdev_list>
80004f10:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:86
	}
}
80004f14:	8fbf001c 	lw	ra,28(sp)
80004f18:	8fb10018 	lw	s1,24(sp)
80004f1c:	8fb00014 	lw	s0,20(sp)
80004f20:	03e00008 	jr	ra
80004f24:	27bd0020 	addiu	sp,sp,32

80004f28 <vfs_sync>:
vfs_sync():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:92

/*
 * Global sync function - call fsos_sync on all devices.
 */
int vfs_sync(void)
{
80004f28:	27bdffe0 	addiu	sp,sp,-32
80004f2c:	afb10018 	sw	s1,24(sp)
list_empty():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:126
 * list_empty - tests whether a list is empty
 * @list:       the list to test.
 * */
static inline bool list_empty(list_entry_t * list)
{
	return list->next == list;
80004f30:	3c118015 	lui	s1,0x8015
80004f34:	2631451c 	addiu	s1,s1,17692
vfs_sync():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:93
	if (!list_empty(&vdev_list)) {
80004f38:	8e220004 	lw	v0,4(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:92

/*
 * Global sync function - call fsos_sync on all devices.
 */
int vfs_sync(void)
{
80004f3c:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:93
	if (!list_empty(&vdev_list)) {
80004f40:	10510011 	beq	v0,s1,80004f88 <vfs_sync+0x60>
80004f44:	afb00014 	sw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:94
		lock_vdev_list();
80004f48:	0c001306 	jal	80004c18 <lock_vdev_list>
80004f4c:	02208021 	move	s0,s1
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
80004f50:	8e100004 	lw	s0,4(s0)
vfs_sync():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:97
		{
			list_entry_t *list = &vdev_list, *le = list;
			while ((le = list_next(le)) != list) {
80004f54:	1211000a 	beq	s0,s1,80004f80 <vfs_sync+0x58>
80004f58:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:99
				vfs_dev_t *vdev = le2vdev(le, vdev_link);
				if (vdev->fs != NULL) {
80004f5c:	8e02fff8 	lw	v0,-8(s0)
80004f60:	1040fffb 	beqz	v0,80004f50 <vfs_sync+0x28>
80004f64:	00402021 	move	a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:100
					fsop_sync(vdev->fs);
80004f68:	8c420088 	lw	v0,136(v0)
80004f6c:	0040f809 	jalr	v0
80004f70:	00000000 	nop
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
80004f74:	8e100004 	lw	s0,4(s0)
vfs_sync():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:97
{
	if (!list_empty(&vdev_list)) {
		lock_vdev_list();
		{
			list_entry_t *list = &vdev_list, *le = list;
			while ((le = list_next(le)) != list) {
80004f78:	5611fff9 	bnel	s0,s1,80004f60 <vfs_sync+0x38>
80004f7c:	8e02fff8 	lw	v0,-8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:104
				if (vdev->fs != NULL) {
					fsop_sync(vdev->fs);
				}
			}
		}
		unlock_vdev_list();
80004f80:	0c001309 	jal	80004c24 <unlock_vdev_list>
80004f84:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:107
	}
	return 0;
}
80004f88:	8fbf001c 	lw	ra,28(sp)
80004f8c:	00001021 	move	v0,zero
80004f90:	8fb10018 	lw	s1,24(sp)
80004f94:	8fb00014 	lw	s0,20(sp)
80004f98:	03e00008 	jr	ra
80004f9c:	27bd0020 	addiu	sp,sp,32

80004fa0 <vfs_get_root>:
vfs_get_root():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:114
/*
 * Given a device name (lhd0, emu0, somevolname, null, etc.), hand
 * back an appropriate inode.
 */
int vfs_get_root(const char *devname, struct inode **node_store)
{
80004fa0:	27bdffd0 	addiu	sp,sp,-48
80004fa4:	afb30028 	sw	s3,40(sp)
80004fa8:	afb20024 	sw	s2,36(sp)
80004fac:	afbf002c 	sw	ra,44(sp)
80004fb0:	afb10020 	sw	s1,32(sp)
80004fb4:	afb0001c 	sw	s0,28(sp)
80004fb8:	00809021 	move	s2,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:115
	assert(devname != NULL);
80004fbc:	1080002d 	beqz	a0,80005074 <vfs_get_root+0xd4>
80004fc0:	00a09821 	move	s3,a1
list_empty():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:126
 * list_empty - tests whether a list is empty
 * @list:       the list to test.
 * */
static inline bool list_empty(list_entry_t * list)
{
	return list->next == list;
80004fc4:	3c118015 	lui	s1,0x8015
80004fc8:	2631451c 	addiu	s1,s1,17692
vfs_get_root():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:117
	int ret = -E_NO_DEV;
	if (!list_empty(&vdev_list)) {
80004fcc:	8e230004 	lw	v1,4(s1)
80004fd0:	10710010 	beq	v1,s1,80005014 <vfs_get_root+0x74>
80004fd4:	2402ffed 	li	v0,-19
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:118
		lock_vdev_list();
80004fd8:	0c001306 	jal	80004c18 <lock_vdev_list>
80004fdc:	02208021 	move	s0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:121
		{
			list_entry_t *list = &vdev_list, *le = list;
			while ((le = list_next(le)) != list) {
80004fe0:	080013ff 	j	80004ffc <vfs_get_root+0x5c>
80004fe4:	8e100004 	lw	s0,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:123
				vfs_dev_t *vdev = le2vdev(le, vdev_link);
				if (strcmp(devname, vdev->devname) == 0) {
80004fe8:	0c005bb8 	jal	80016ee0 <strcmp>
80004fec:	02402021 	move	a0,s2
80004ff0:	5040000f 	beqzl	v0,80005030 <vfs_get_root+0x90>
80004ff4:	8e04fff8 	lw	a0,-8(s0)
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
80004ff8:	8e100004 	lw	s0,4(s0)
vfs_get_root():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:121
	int ret = -E_NO_DEV;
	if (!list_empty(&vdev_list)) {
		lock_vdev_list();
		{
			list_entry_t *list = &vdev_list, *le = list;
			while ((le = list_next(le)) != list) {
80004ffc:	5611fffa 	bnel	s0,s1,80004fe8 <vfs_get_root+0x48>
80005000:	8e05fff0 	lw	a1,-16(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:116
 * back an appropriate inode.
 */
int vfs_get_root(const char *devname, struct inode **node_store)
{
	assert(devname != NULL);
	int ret = -E_NO_DEV;
80005004:	2402ffed 	li	v0,-19
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:163
				 * any of the names of this device, so go on to the
				 * next one. 
				 */
			}
		}
		unlock_vdev_list();
80005008:	0c001309 	jal	80004c24 <unlock_vdev_list>
8000500c:	afa20010 	sw	v0,16(sp)
80005010:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:166
	}
	return ret;
}
80005014:	8fbf002c 	lw	ra,44(sp)
80005018:	8fb30028 	lw	s3,40(sp)
8000501c:	8fb20024 	lw	s2,36(sp)
80005020:	8fb10020 	lw	s1,32(sp)
80005024:	8fb0001c 	lw	s0,28(sp)
80005028:	03e00008 	jr	ra
8000502c:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:135
					 *
					 * If it has no mounted filesystem, it's mountable,
					 * and DEVNAME names the device, return -E_NA_DEV.
					 */

					if (vdev->fs != NULL) {
80005030:	5080000a 	beqzl	a0,8000505c <vfs_get_root+0xbc>
80005034:	8e03fffc 	lw	v1,-4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:136
						found = fsop_get_root(vdev->fs);
80005038:	8c82008c 	lw	v0,140(a0)
8000503c:	0040f809 	jalr	v0
80005040:	00000000 	nop
80005044:	00401821 	move	v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:141
					} else if (!vdev->mountable) {
						vop_ref_inc(vdev->devnode);
						found = vdev->devnode;
					}
					if (found != NULL) {
80005048:	1060ffef 	beqz	v1,80005008 <vfs_get_root+0x68>
8000504c:	2402fff0 	li	v0,-16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:147
						/*
						 * If DEVNAME names the device, and we get here, it
						 * must have no fs and not be mountable. In this case,
						 * we return the inode of device itself--node_store.
						 */
						ret = 0, *node_store = found;
80005050:	ae630000 	sw	v1,0(s3)
80005054:	08001402 	j	80005008 <vfs_get_root+0x68>
80005058:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:137
					 * and DEVNAME names the device, return -E_NA_DEV.
					 */

					if (vdev->fs != NULL) {
						found = fsop_get_root(vdev->fs);
					} else if (!vdev->mountable) {
8000505c:	1460ffea 	bnez	v1,80005008 <vfs_get_root+0x68>
80005060:	2402fff0 	li	v0,-16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:138
						vop_ref_inc(vdev->devnode);
80005064:	0c0010b6 	jal	800042d8 <inode_ref_inc>
80005068:	8e04fff4 	lw	a0,-12(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:139
						found = vdev->devnode;
8000506c:	08001412 	j	80005048 <vfs_get_root+0xa8>
80005070:	8e03fff4 	lw	v1,-12(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:115
 * Given a device name (lhd0, emu0, somevolname, null, etc.), hand
 * back an appropriate inode.
 */
int vfs_get_root(const char *devname, struct inode **node_store)
{
	assert(devname != NULL);
80005074:	3c048002 	lui	a0,0x8002
80005078:	3c068002 	lui	a2,0x8002
8000507c:	3c078002 	lui	a3,0x8002
80005080:	248417d4 	addiu	a0,a0,6100
80005084:	24050073 	li	a1,115
80005088:	24c60e28 	addiu	a2,a2,3624
8000508c:	0c006b0b 	jal	8001ac2c <__panic>
80005090:	24e717e0 	addiu	a3,a3,6112

80005094 <vfs_get_devname>:
vfs_get_devname():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:172

/*
 * Given a filesystem, hand back the name of the device it's mounted on.
 */
const char *vfs_get_devname(struct fs *fs)
{
80005094:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:173
	assert(fs != NULL);
80005098:	10800011 	beqz	a0,800050e0 <vfs_get_devname+0x4c>
8000509c:	afbf0014 	sw	ra,20(sp)
800050a0:	3c058015 	lui	a1,0x8015
800050a4:	24a5451c 	addiu	a1,a1,17692
800050a8:	0800142e 	j	800050b8 <vfs_get_devname+0x24>
800050ac:	00a01021 	move	v0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:177
	list_entry_t *list = &vdev_list, *le = list;
	while ((le = list_next(le)) != list) {
		vfs_dev_t *vdev = le2vdev(le, vdev_link);
		if (vdev->fs == fs) {
800050b0:	10640008 	beq	v1,a0,800050d4 <vfs_get_devname+0x40>
800050b4:	8fbf0014 	lw	ra,20(sp)
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
800050b8:	8c420004 	lw	v0,4(v0)
vfs_get_devname():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:175
 */
const char *vfs_get_devname(struct fs *fs)
{
	assert(fs != NULL);
	list_entry_t *list = &vdev_list, *le = list;
	while ((le = list_next(le)) != list) {
800050bc:	5445fffc 	bnel	v0,a1,800050b0 <vfs_get_devname+0x1c>
800050c0:	8c43fff8 	lw	v1,-8(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:188
			 */
			return vdev->devname;
		}
	}
	return NULL;
}
800050c4:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:187
			 * go away until the fs goes away.
			 */
			return vdev->devname;
		}
	}
	return NULL;
800050c8:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:188
}
800050cc:	03e00008 	jr	ra
800050d0:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:184
			 * This is not a race condition: as long as the
			 * guy calling us holds a reference to the fs,
			 * the fs cannot go away, and the device can't
			 * go away until the fs goes away.
			 */
			return vdev->devname;
800050d4:	8c42fff0 	lw	v0,-16(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:188
		}
	}
	return NULL;
}
800050d8:	03e00008 	jr	ra
800050dc:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:173
/*
 * Given a filesystem, hand back the name of the device it's mounted on.
 */
const char *vfs_get_devname(struct fs *fs)
{
	assert(fs != NULL);
800050e0:	3c048002 	lui	a0,0x8002
800050e4:	3c068002 	lui	a2,0x8002
800050e8:	3c078002 	lui	a3,0x8002
800050ec:	248417d4 	addiu	a0,a0,6100
800050f0:	240500ad 	li	a1,173
800050f4:	24c60e28 	addiu	a2,a2,3624
800050f8:	0c006b0b 	jal	8001ac2c <__panic>
800050fc:	24e7184c 	addiu	a3,a3,6220

80005100 <vfs_add_fs>:
vfs_add_fs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:259
 * This is used for emufs(not implementation???), but might also be used for network
 * filesystems and the like.
 */
int vfs_add_fs(const char *devname, struct fs *fs)
{
	return vfs_do_add(devname, NULL, fs, 0);
80005100:	00a03021 	move	a2,a1
80005104:	00003821 	move	a3,zero
80005108:	0800130c 	j	80004c30 <vfs_do_add>
8000510c:	00002821 	move	a1,zero

80005110 <vfs_add_dev>:
vfs_add_dev():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:268
 * Add a new device, by name. See above for the description of
 * mountable.
 */
int vfs_add_dev(const char *devname, struct inode *devnode, bool mountable)
{
	return vfs_do_add(devname, devnode, NULL, mountable);
80005110:	00c03821 	move	a3,a2
80005114:	0800130c 	j	80004c30 <vfs_do_add>
80005118:	00003021 	move	a2,zero

8000511c <vfs_mount>:
vfs_mount():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:296
 * set up the filesystem and hand back a struct fs.
 */
int
vfs_mount(const char *devname,
	  int (*mountfunc) (struct device * dev, struct fs ** fs_store))
{
8000511c:	27bdffd0 	addiu	sp,sp,-48
80005120:	afbf002c 	sw	ra,44(sp)
80005124:	afb10028 	sw	s1,40(sp)
80005128:	afb00024 	sw	s0,36(sp)
8000512c:	00a08821 	move	s1,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:298
	int ret;
	lock_vdev_list();
80005130:	0c001306 	jal	80004c18 <lock_vdev_list>
80005134:	afa40018 	sw	a0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:300
	vfs_dev_t *vdev;
	if ((ret = find_mount(devname, &vdev)) != 0) {
80005138:	8fa40018 	lw	a0,24(sp)
8000513c:	0c001371 	jal	80004dc4 <find_mount>
80005140:	27a50010 	addiu	a1,sp,16
80005144:	1440001c 	bnez	v0,800051b8 <vfs_mount+0x9c>
80005148:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:303
		goto out;
	}
	if (vdev->fs != NULL) {
8000514c:	8fa50010 	lw	a1,16(sp)
80005150:	8ca20008 	lw	v0,8(a1)
80005154:	14400020 	bnez	v0,800051d8 <vfs_mount+0xbc>
80005158:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:307
		ret = -E_BUSY;
		goto out;
	}
	assert(vdev->devname != NULL && vdev->mountable);
8000515c:	8ca20000 	lw	v0,0(a1)
80005160:	10400025 	beqz	v0,800051f8 <vfs_mount+0xdc>
80005164:	3c048002 	lui	a0,0x8002
80005168:	8ca2000c 	lw	v0,12(a1)
8000516c:	10400023 	beqz	v0,800051fc <vfs_mount+0xe0>
80005170:	3c068002 	lui	a2,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:309

	struct device *dev = vop_info(vdev->devnode, device);
80005174:	8ca40004 	lw	a0,4(a1)
80005178:	10800026 	beqz	a0,80005214 <vfs_mount+0xf8>
8000517c:	24021234 	li	v0,4660
80005180:	8c830038 	lw	v1,56(a0)
80005184:	54620025 	bnel	v1,v0,8000521c <vfs_mount+0x100>
80005188:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:310
	if ((ret = mountfunc(dev, &(vdev->fs))) == 0) {
8000518c:	0220f809 	jalr	s1
80005190:	24a50008 	addiu	a1,a1,8
80005194:	14400008 	bnez	v0,800051b8 <vfs_mount+0x9c>
80005198:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:311
		assert(vdev->fs != NULL);
8000519c:	8fa20010 	lw	v0,16(sp)
800051a0:	8c430008 	lw	v1,8(v0)
800051a4:	10600023 	beqz	v1,80005234 <vfs_mount+0x118>
800051a8:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:312
		kprintf("vfs: mount %s.\n", vdev->devname);
800051ac:	8c450000 	lw	a1,0(v0)
800051b0:	0c007a9e 	jal	8001ea78 <kprintf>
800051b4:	24841898 	addiu	a0,a0,6296
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:316
	}

out:
	unlock_vdev_list();
800051b8:	0c001309 	jal	80004c24 <unlock_vdev_list>
800051bc:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:318
	return ret;
}
800051c0:	8fbf002c 	lw	ra,44(sp)
800051c4:	02001021 	move	v0,s0
800051c8:	8fb10028 	lw	s1,40(sp)
800051cc:	8fb00024 	lw	s0,36(sp)
800051d0:	03e00008 	jr	ra
800051d4:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:316
		assert(vdev->fs != NULL);
		kprintf("vfs: mount %s.\n", vdev->devname);
	}

out:
	unlock_vdev_list();
800051d8:	0c001309 	jal	80004c24 <unlock_vdev_list>
800051dc:	2410fff0 	li	s0,-16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:318
	return ret;
}
800051e0:	8fbf002c 	lw	ra,44(sp)
800051e4:	02001021 	move	v0,s0
800051e8:	8fb10028 	lw	s1,40(sp)
800051ec:	8fb00024 	lw	s0,36(sp)
800051f0:	03e00008 	jr	ra
800051f4:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:307
	}
	if (vdev->fs != NULL) {
		ret = -E_BUSY;
		goto out;
	}
	assert(vdev->devname != NULL && vdev->mountable);
800051f8:	3c068002 	lui	a2,0x8002
800051fc:	3c078002 	lui	a3,0x8002
80005200:	248417d4 	addiu	a0,a0,6100
80005204:	24050133 	li	a1,307
80005208:	24c60e28 	addiu	a2,a2,3624
8000520c:	0c006b0b 	jal	8001ac2c <__panic>
80005210:	24e71858 	addiu	a3,a3,6232
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:309

	struct device *dev = vop_info(vdev->devnode, device);
80005214:	3c048002 	lui	a0,0x8002
80005218:	3c068002 	lui	a2,0x8002
8000521c:	3c078002 	lui	a3,0x8002
80005220:	248417d4 	addiu	a0,a0,6100
80005224:	24050135 	li	a1,309
80005228:	24c60e28 	addiu	a2,a2,3624
8000522c:	0c006b0b 	jal	8001ac2c <__panic>
80005230:	24e70fbc 	addiu	a3,a3,4028
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:311
	if ((ret = mountfunc(dev, &(vdev->fs))) == 0) {
		assert(vdev->fs != NULL);
80005234:	3c048002 	lui	a0,0x8002
80005238:	3c068002 	lui	a2,0x8002
8000523c:	3c078002 	lui	a3,0x8002
80005240:	248417d4 	addiu	a0,a0,6100
80005244:	24050137 	li	a1,311
80005248:	24c60e28 	addiu	a2,a2,3624
8000524c:	0c006b0b 	jal	8001ac2c <__panic>
80005250:	24e71884 	addiu	a3,a3,6276

80005254 <vfs_unmount>:
vfs_unmount():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:325
/*
 * Unmount a filesystem/device by name.
 * First calls fsop_sync on the filesystem; then calls fsop_umount.
 */
int vfs_unmount(const char *devname)
{
80005254:	27bdffd8 	addiu	sp,sp,-40
80005258:	afbf0024 	sw	ra,36(sp)
8000525c:	afb00020 	sw	s0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:327
	int ret;
	lock_vdev_list();
80005260:	0c001306 	jal	80004c18 <lock_vdev_list>
80005264:	afa40018 	sw	a0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:329
	vfs_dev_t *vdev;
	if ((ret = find_mount(devname, &vdev)) != 0) {
80005268:	8fa40018 	lw	a0,24(sp)
8000526c:	0c001371 	jal	80004dc4 <find_mount>
80005270:	27a50010 	addiu	a1,sp,16
80005274:	14400010 	bnez	v0,800052b8 <vfs_unmount+0x64>
80005278:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:332
		goto out;
	}
	if (vdev->fs == NULL) {
8000527c:	8fa20010 	lw	v0,16(sp)
80005280:	8c440008 	lw	a0,8(v0)
80005284:	5080000c 	beqzl	a0,800052b8 <vfs_unmount+0x64>
80005288:	2410ffea 	li	s0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:336
		ret = -E_INVAL;
		goto out;
	}
	assert(vdev->devname != NULL && vdev->mountable);
8000528c:	8c430000 	lw	v1,0(v0)
80005290:	50600024 	beqzl	v1,80005324 <vfs_unmount+0xd0>
80005294:	3c048002 	lui	a0,0x8002
80005298:	8c42000c 	lw	v0,12(v0)
8000529c:	50400021 	beqzl	v0,80005324 <vfs_unmount+0xd0>
800052a0:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:338

	if ((ret = fsop_sync(vdev->fs)) != 0) {
800052a4:	8c820088 	lw	v0,136(a0)
800052a8:	0040f809 	jalr	v0
800052ac:	00000000 	nop
800052b0:	10400008 	beqz	v0,800052d4 <vfs_unmount+0x80>
800052b4:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:348
		vdev->fs = NULL;
		kprintf("vfs: unmount %s.\n", vdev->devname);
	}

out:
	unlock_vdev_list();
800052b8:	0c001309 	jal	80004c24 <unlock_vdev_list>
800052bc:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:350
	return ret;
}
800052c0:	8fbf0024 	lw	ra,36(sp)
800052c4:	02001021 	move	v0,s0
800052c8:	8fb00020 	lw	s0,32(sp)
800052cc:	03e00008 	jr	ra
800052d0:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:341
	assert(vdev->devname != NULL && vdev->mountable);

	if ((ret = fsop_sync(vdev->fs)) != 0) {
		goto out;
	}
	if ((ret = fsop_unmount(vdev->fs)) == 0) {
800052d4:	8fa20010 	lw	v0,16(sp)
800052d8:	8c440008 	lw	a0,8(v0)
800052dc:	8c820090 	lw	v0,144(a0)
800052e0:	0040f809 	jalr	v0
800052e4:	00000000 	nop
800052e8:	1440fff3 	bnez	v0,800052b8 <vfs_unmount+0x64>
800052ec:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:343
		/* now drop the filesystem */
		vdev->fs = NULL;
800052f0:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:344
		kprintf("vfs: unmount %s.\n", vdev->devname);
800052f4:	3c048002 	lui	a0,0x8002
800052f8:	248418a8 	addiu	a0,a0,6312
800052fc:	8c450000 	lw	a1,0(v0)
80005300:	0c007a9e 	jal	8001ea78 <kprintf>
80005304:	ac400008 	sw	zero,8(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:348
	}

out:
	unlock_vdev_list();
80005308:	0c001309 	jal	80004c24 <unlock_vdev_list>
8000530c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:350
	return ret;
}
80005310:	8fbf0024 	lw	ra,36(sp)
80005314:	02001021 	move	v0,s0
80005318:	8fb00020 	lw	s0,32(sp)
8000531c:	03e00008 	jr	ra
80005320:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:336
	}
	if (vdev->fs == NULL) {
		ret = -E_INVAL;
		goto out;
	}
	assert(vdev->devname != NULL && vdev->mountable);
80005324:	3c068002 	lui	a2,0x8002
80005328:	3c078002 	lui	a3,0x8002
8000532c:	248417d4 	addiu	a0,a0,6100
80005330:	24050150 	li	a1,336
80005334:	24c60e28 	addiu	a2,a2,3624
80005338:	0c006b0b 	jal	8001ac2c <__panic>
8000533c:	24e71858 	addiu	a3,a3,6232

80005340 <vfs_unmount_all>:
vfs_unmount_all():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:356

/*
 * Global unmount function.
 */
int vfs_unmount_all(void)
{
80005340:	27bdffd8 	addiu	sp,sp,-40
80005344:	afb10014 	sw	s1,20(sp)
list_empty():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:126
 * list_empty - tests whether a list is empty
 * @list:       the list to test.
 * */
static inline bool list_empty(list_entry_t * list)
{
	return list->next == list;
80005348:	3c118015 	lui	s1,0x8015
8000534c:	2631451c 	addiu	s1,s1,17692
vfs_unmount_all():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:357
	if (!list_empty(&vdev_list)) {
80005350:	8e220004 	lw	v0,4(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:356

/*
 * Global unmount function.
 */
int vfs_unmount_all(void)
{
80005354:	afbf0024 	sw	ra,36(sp)
80005358:	afb40020 	sw	s4,32(sp)
8000535c:	afb3001c 	sw	s3,28(sp)
80005360:	afb20018 	sw	s2,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:357
	if (!list_empty(&vdev_list)) {
80005364:	1051001e 	beq	v0,s1,800053e0 <vfs_unmount_all+0xa0>
80005368:	afb00010 	sw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:379
						     vdev->devname, ret);
						continue;
					}
					/* now drop the filesystem */
					vdev->fs = NULL;
					kprintf("vfs: unmount %s.\n",
8000536c:	3c148002 	lui	s4,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:358
 * Global unmount function.
 */
int vfs_unmount_all(void)
{
	if (!list_empty(&vdev_list)) {
		lock_vdev_list();
80005370:	0c001306 	jal	80004c18 <lock_vdev_list>
80005374:	3c138002 	lui	s3,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:360
		{
			list_entry_t *list = &vdev_list, *le = list;
80005378:	02208021 	move	s0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:379
						     vdev->devname, ret);
						continue;
					}
					/* now drop the filesystem */
					vdev->fs = NULL;
					kprintf("vfs: unmount %s.\n",
8000537c:	269418a8 	addiu	s4,s4,6312
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:373
						     vdev->devname, ret);
						continue;
					}
					if ((ret = fsop_unmount(vdev->fs)) != 0) {
						kprintf
						    ("vfs: warning: unmount failed for %s: %e.\n",
80005380:	267318e4 	addiu	s3,s3,6372
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:367
				vfs_dev_t *vdev = le2vdev(le, vdev_link);
				if (vdev->mountable && vdev->fs != NULL) {
					int ret;
					if ((ret = fsop_sync(vdev->fs)) != 0) {
						kprintf
						    ("vfs: warning: sync failed for %s: %e.\n",
80005384:	3c128002 	lui	s2,0x8002
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
80005388:	8e100004 	lw	s0,4(s0)
vfs_unmount_all():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:361
{
	if (!list_empty(&vdev_list)) {
		lock_vdev_list();
		{
			list_entry_t *list = &vdev_list, *le = list;
			while ((le = list_next(le)) != list) {
8000538c:	12110012 	beq	s0,s1,800053d8 <vfs_unmount_all+0x98>
80005390:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:363
				vfs_dev_t *vdev = le2vdev(le, vdev_link);
				if (vdev->mountable && vdev->fs != NULL) {
80005394:	8e02fffc 	lw	v0,-4(s0)
80005398:	5040fffc 	beqzl	v0,8000538c <vfs_unmount_all+0x4c>
8000539c:	8e100004 	lw	s0,4(s0)
800053a0:	8e02fff8 	lw	v0,-8(s0)
800053a4:	1040fff8 	beqz	v0,80005388 <vfs_unmount_all+0x48>
800053a8:	00402021 	move	a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:365
					int ret;
					if ((ret = fsop_sync(vdev->fs)) != 0) {
800053ac:	8c420088 	lw	v0,136(v0)
800053b0:	0040f809 	jalr	v0
800053b4:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:367
						kprintf
						    ("vfs: warning: sync failed for %s: %e.\n",
800053b8:	00403021 	move	a2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:365
			list_entry_t *list = &vdev_list, *le = list;
			while ((le = list_next(le)) != list) {
				vfs_dev_t *vdev = le2vdev(le, vdev_link);
				if (vdev->mountable && vdev->fs != NULL) {
					int ret;
					if ((ret = fsop_sync(vdev->fs)) != 0) {
800053bc:	10400011 	beqz	v0,80005404 <vfs_unmount_all+0xc4>
800053c0:	264418bc 	addiu	a0,s2,6332
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:367
						kprintf
						    ("vfs: warning: sync failed for %s: %e.\n",
800053c4:	0c007a9e 	jal	8001ea78 <kprintf>
800053c8:	8e05fff0 	lw	a1,-16(s0)
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
800053cc:	8e100004 	lw	s0,4(s0)
vfs_unmount_all():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:361
{
	if (!list_empty(&vdev_list)) {
		lock_vdev_list();
		{
			list_entry_t *list = &vdev_list, *le = list;
			while ((le = list_next(le)) != list) {
800053d0:	5611fff1 	bnel	s0,s1,80005398 <vfs_unmount_all+0x58>
800053d4:	8e02fffc 	lw	v0,-4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:384
					kprintf("vfs: unmount %s.\n",
						vdev->devname);
				}
			}
		}
		unlock_vdev_list();
800053d8:	0c001309 	jal	80004c24 <unlock_vdev_list>
800053dc:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:387
	}
	return 0;
}
800053e0:	8fbf0024 	lw	ra,36(sp)
800053e4:	00001021 	move	v0,zero
800053e8:	8fb40020 	lw	s4,32(sp)
800053ec:	8fb3001c 	lw	s3,28(sp)
800053f0:	8fb20018 	lw	s2,24(sp)
800053f4:	8fb10014 	lw	s1,20(sp)
800053f8:	8fb00010 	lw	s0,16(sp)
800053fc:	03e00008 	jr	ra
80005400:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:371
						kprintf
						    ("vfs: warning: sync failed for %s: %e.\n",
						     vdev->devname, ret);
						continue;
					}
					if ((ret = fsop_unmount(vdev->fs)) != 0) {
80005404:	8e04fff8 	lw	a0,-8(s0)
80005408:	8c820090 	lw	v0,144(a0)
8000540c:	0040f809 	jalr	v0
80005410:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:373
						kprintf
						    ("vfs: warning: unmount failed for %s: %e.\n",
80005414:	00403021 	move	a2,v0
80005418:	02602021 	move	a0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:371
						kprintf
						    ("vfs: warning: sync failed for %s: %e.\n",
						     vdev->devname, ret);
						continue;
					}
					if ((ret = fsop_unmount(vdev->fs)) != 0) {
8000541c:	10400005 	beqz	v0,80005434 <vfs_unmount_all+0xf4>
80005420:	8e05fff0 	lw	a1,-16(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:373
						kprintf
						    ("vfs: warning: unmount failed for %s: %e.\n",
80005424:	0c007a9e 	jal	8001ea78 <kprintf>
80005428:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:375
						     vdev->devname, ret);
						continue;
8000542c:	080014e3 	j	8000538c <vfs_unmount_all+0x4c>
80005430:	8e100004 	lw	s0,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:378
					}
					/* now drop the filesystem */
					vdev->fs = NULL;
80005434:	ae00fff8 	sw	zero,-8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsdev.c:379
					kprintf("vfs: unmount %s.\n",
80005438:	0c007a9e 	jal	8001ea78 <kprintf>
8000543c:	02802021 	move	a0,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
80005440:	080014e3 	j	8000538c <vfs_unmount_all+0x4c>
80005444:	8e100004 	lw	s0,4(s0)

80005448 <vfs_open>:
vfs_open():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:15
#include <error.h>
#include <assert.h>

/* Does most of the work for open(). */
int vfs_open(char *path, uint32_t open_flags, struct inode **node_store)
{
80005448:	27bdffc8 	addiu	sp,sp,-56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:17
	bool can_write = 0;
	switch (open_flags & O_ACCMODE) {
8000544c:	30a20003 	andi	v0,a1,0x3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:15
#include <error.h>
#include <assert.h>

/* Does most of the work for open(). */
int vfs_open(char *path, uint32_t open_flags, struct inode **node_store)
{
80005450:	afb2002c 	sw	s2,44(sp)
80005454:	afb00024 	sw	s0,36(sp)
80005458:	afbf0034 	sw	ra,52(sp)
8000545c:	afb30030 	sw	s3,48(sp)
80005460:	afb10028 	sw	s1,40(sp)
80005464:	00a08021 	move	s0,a1
80005468:	00c09021 	move	s2,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:17
	bool can_write = 0;
	switch (open_flags & O_ACCMODE) {
8000546c:	1040000d 	beqz	v0,800054a4 <vfs_open+0x5c>
80005470:	00001821 	move	v1,zero
80005474:	2c420003 	sltiu	v0,v0,3
80005478:	14400009 	bnez	v0,800054a0 <vfs_open+0x58>
8000547c:	2413ffea 	li	s3,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:68
			return ret;
		}
	}
	*node_store = node;
	return 0;
}
80005480:	8fbf0034 	lw	ra,52(sp)
80005484:	02601021 	move	v0,s3
80005488:	8fb2002c 	lw	s2,44(sp)
8000548c:	8fb30030 	lw	s3,48(sp)
80005490:	8fb10028 	lw	s1,40(sp)
80005494:	8fb00024 	lw	s0,36(sp)
80005498:	03e00008 	jr	ra
8000549c:	27bd0038 	addiu	sp,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:22
	switch (open_flags & O_ACCMODE) {
	case O_RDONLY:
		break;
	case O_WRONLY:
	case O_RDWR:
		can_write = 1;
800054a0:	24030001 	li	v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:28
		break;
	default:
		return -E_INVAL;
	}

	if (open_flags & O_TRUNC) {
800054a4:	32110200 	andi	s1,s0,0x200
800054a8:	12200003 	beqz	s1,800054b8 <vfs_open+0x70>
800054ac:	32020040 	andi	v0,s0,0x40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:29
		if (!can_write) {
800054b0:	1060fff3 	beqz	v1,80005480 <vfs_open+0x38>
800054b4:	2413ffea 	li	s3,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:36
		}
	}

	int ret;
	struct inode *dir, *node;
	if (open_flags & O_CREAT) {
800054b8:	10400052 	beqz	v0,80005604 <vfs_open+0x1bc>
800054bc:	27a50018 	addiu	a1,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:39
		char *name;
		bool excl = (open_flags & O_EXCL) != 0;
		if ((ret = vfs_lookup_parent(path, &dir, &name)) != 0) {
800054c0:	0c001778 	jal	80005de0 <vfs_lookup_parent>
800054c4:	27a60010 	addiu	a2,sp,16
800054c8:	1440ffed 	bnez	v0,80005480 <vfs_open+0x38>
800054cc:	00409821 	move	s3,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:42
			return ret;
		}
		ret = vop_create(dir, name, excl, &node);
800054d0:	8fb30018 	lw	s3,24(sp)
800054d4:	12600063 	beqz	s3,80005664 <vfs_open+0x21c>
800054d8:	3c048002 	lui	a0,0x8002
800054dc:	8e620048 	lw	v0,72(s3)
800054e0:	10400061 	beqz	v0,80005668 <vfs_open+0x220>
800054e4:	3c068002 	lui	a2,0x8002
800054e8:	8c42004c 	lw	v0,76(v0)
800054ec:	1040005d 	beqz	v0,80005664 <vfs_open+0x21c>
800054f0:	3c058002 	lui	a1,0x8002
800054f4:	02602021 	move	a0,s3
800054f8:	0c0010f3 	jal	800043cc <inode_check>
800054fc:	24a5196c 	addiu	a1,a1,6508
80005500:	8e620048 	lw	v0,72(s3)
80005504:	8fa40018 	lw	a0,24(sp)
80005508:	8fa50010 	lw	a1,16(sp)
8000550c:	8c42004c 	lw	v0,76(v0)
80005510:	7e0601c0 	ext	a2,s0,0x7,0x1
80005514:	0040f809 	jalr	v0
80005518:	27a70014 	addiu	a3,sp,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:43
		vop_ref_dec(dir);
8000551c:	8fa40018 	lw	a0,24(sp)
80005520:	0c001172 	jal	800045c8 <inode_ref_dec>
80005524:	00409821 	move	s3,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:48
	} else {
		ret = vfs_lookup(path, &node);
	}

	if (ret != 0) {
80005528:	1660ffd6 	bnez	s3,80005484 <vfs_open+0x3c>
8000552c:	8fbf0034 	lw	ra,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:51
		return ret;
	}
	assert(node != NULL);
80005530:	8fb30014 	lw	s3,20(sp)
80005534:	12600059 	beqz	s3,8000569c <vfs_open+0x254>
80005538:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:53

	if ((ret = vop_open(node, open_flags)) != 0) {
8000553c:	8e620048 	lw	v0,72(s3)
80005540:	10400042 	beqz	v0,8000564c <vfs_open+0x204>
80005544:	3c068002 	lui	a2,0x8002
80005548:	8c420004 	lw	v0,4(v0)
8000554c:	1040003e 	beqz	v0,80005648 <vfs_open+0x200>
80005550:	3c058002 	lui	a1,0x8002
80005554:	02602021 	move	a0,s3
80005558:	0c0010f3 	jal	800043cc <inode_check>
8000555c:	24a519c4 	addiu	a1,a1,6596
80005560:	8e620048 	lw	v0,72(s3)
80005564:	8fa40014 	lw	a0,20(sp)
80005568:	8c420004 	lw	v0,4(v0)
8000556c:	0040f809 	jalr	v0
80005570:	02002821 	move	a1,s0
80005574:	00409821 	move	s3,v0
80005578:	14400029 	bnez	v0,80005620 <vfs_open+0x1d8>
8000557c:	8fa40014 	lw	a0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:58
		vop_ref_dec(node);
		return ret;
	}

	vop_open_inc(node);
80005580:	0c0010d7 	jal	8000435c <inode_open_inc>
80005584:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:59
	if (open_flags & O_TRUNC) {
80005588:	12200015 	beqz	s1,800055e0 <vfs_open+0x198>
8000558c:	8fa20014 	lw	v0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:60
		if ((ret = vop_truncate(node, 0)) != 0) {
80005590:	8fb00014 	lw	s0,20(sp)
80005594:	1200003a 	beqz	s0,80005680 <vfs_open+0x238>
80005598:	3c048002 	lui	a0,0x8002
8000559c:	8e020048 	lw	v0,72(s0)
800055a0:	10400038 	beqz	v0,80005684 <vfs_open+0x23c>
800055a4:	3c068002 	lui	a2,0x8002
800055a8:	8c420048 	lw	v0,72(v0)
800055ac:	10400034 	beqz	v0,80005680 <vfs_open+0x238>
800055b0:	3c058002 	lui	a1,0x8002
800055b4:	02002021 	move	a0,s0
800055b8:	0c0010f3 	jal	800043cc <inode_check>
800055bc:	24a51a20 	addiu	a1,a1,6688
800055c0:	8e020048 	lw	v0,72(s0)
800055c4:	8fa40014 	lw	a0,20(sp)
800055c8:	8c420048 	lw	v0,72(v0)
800055cc:	0040f809 	jalr	v0
800055d0:	00002821 	move	a1,zero
800055d4:	1440000f 	bnez	v0,80005614 <vfs_open+0x1cc>
800055d8:	8fa40014 	lw	a0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:66
			vop_open_dec(node);
			vop_ref_dec(node);
			return ret;
		}
	}
	*node_store = node;
800055dc:	8fa20014 	lw	v0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:68
	return 0;
}
800055e0:	8fbf0034 	lw	ra,52(sp)
800055e4:	8fb10028 	lw	s1,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:66
			vop_open_dec(node);
			vop_ref_dec(node);
			return ret;
		}
	}
	*node_store = node;
800055e8:	ae420000 	sw	v0,0(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:68
	return 0;
}
800055ec:	8fb00024 	lw	s0,36(sp)
800055f0:	02601021 	move	v0,s3
800055f4:	8fb2002c 	lw	s2,44(sp)
800055f8:	8fb30030 	lw	s3,48(sp)
800055fc:	03e00008 	jr	ra
80005600:	27bd0038 	addiu	sp,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:45
			return ret;
		}
		ret = vop_create(dir, name, excl, &node);
		vop_ref_dec(dir);
	} else {
		ret = vfs_lookup(path, &node);
80005604:	0c001740 	jal	80005d00 <vfs_lookup>
80005608:	27a50014 	addiu	a1,sp,20
8000560c:	0800154a 	j	80005528 <vfs_open+0xe0>
80005610:	00409821 	move	s3,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:61
	}

	vop_open_inc(node);
	if (open_flags & O_TRUNC) {
		if ((ret = vop_truncate(node, 0)) != 0) {
			vop_open_dec(node);
80005614:	0c00112b 	jal	800044ac <inode_open_dec>
80005618:	00409821 	move	s3,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:62
			vop_ref_dec(node);
8000561c:	8fa40014 	lw	a0,20(sp)
80005620:	0c001172 	jal	800045c8 <inode_ref_dec>
80005624:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:68
			return ret;
		}
	}
	*node_store = node;
	return 0;
}
80005628:	8fbf0034 	lw	ra,52(sp)
8000562c:	02601021 	move	v0,s3
80005630:	8fb2002c 	lw	s2,44(sp)
80005634:	8fb30030 	lw	s3,48(sp)
80005638:	8fb10028 	lw	s1,40(sp)
8000563c:	8fb00024 	lw	s0,36(sp)
80005640:	03e00008 	jr	ra
80005644:	27bd0038 	addiu	sp,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:53
	if (ret != 0) {
		return ret;
	}
	assert(node != NULL);

	if ((ret = vop_open(node, open_flags)) != 0) {
80005648:	3c068002 	lui	a2,0x8002
8000564c:	3c078002 	lui	a3,0x8002
80005650:	24841910 	addiu	a0,a0,6416
80005654:	24050035 	li	a1,53
80005658:	24c60e28 	addiu	a2,a2,3624
8000565c:	0c006b0b 	jal	8001ac2c <__panic>
80005660:	24e71974 	addiu	a3,a3,6516
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:42
		char *name;
		bool excl = (open_flags & O_EXCL) != 0;
		if ((ret = vfs_lookup_parent(path, &dir, &name)) != 0) {
			return ret;
		}
		ret = vop_create(dir, name, excl, &node);
80005664:	3c068002 	lui	a2,0x8002
80005668:	3c078002 	lui	a3,0x8002
8000566c:	24841910 	addiu	a0,a0,6416
80005670:	2405002a 	li	a1,42
80005674:	24c60e28 	addiu	a2,a2,3624
80005678:	0c006b0b 	jal	8001ac2c <__panic>
8000567c:	24e7191c 	addiu	a3,a3,6428
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:60
		return ret;
	}

	vop_open_inc(node);
	if (open_flags & O_TRUNC) {
		if ((ret = vop_truncate(node, 0)) != 0) {
80005680:	3c068002 	lui	a2,0x8002
80005684:	3c078002 	lui	a3,0x8002
80005688:	24841910 	addiu	a0,a0,6416
8000568c:	2405003c 	li	a1,60
80005690:	24c60e28 	addiu	a2,a2,3624
80005694:	0c006b0b 	jal	8001ac2c <__panic>
80005698:	24e719cc 	addiu	a3,a3,6604
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:51
	}

	if (ret != 0) {
		return ret;
	}
	assert(node != NULL);
8000569c:	3c068002 	lui	a2,0x8002
800056a0:	3c078002 	lui	a3,0x8002
800056a4:	24841910 	addiu	a0,a0,6416
800056a8:	24050033 	li	a1,51
800056ac:	24c60e28 	addiu	a2,a2,3624
800056b0:	0c006b0b 	jal	8001ac2c <__panic>
800056b4:	24e725e8 	addiu	a3,a3,9704

800056b8 <vfs_close>:
vfs_close():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:72
	return 0;
}

/* Does most of the work for close(). */
int vfs_close(struct inode *node)
{
800056b8:	27bdffe8 	addiu	sp,sp,-24
800056bc:	afb00010 	sw	s0,16(sp)
800056c0:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:88
 *    (2) we're often called from places like process exit
 *        where reporting the error is impossible and
 *        meaningful recovery is entirely impractical.
 */

	vop_open_dec(node);
800056c4:	0c00112b 	jal	800044ac <inode_open_dec>
800056c8:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:89
	vop_ref_dec(node);
800056cc:	0c001172 	jal	800045c8 <inode_ref_dec>
800056d0:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:91
	return 0;
}
800056d4:	8fbf0014 	lw	ra,20(sp)
800056d8:	00001021 	move	v0,zero
800056dc:	8fb00010 	lw	s0,16(sp)
800056e0:	03e00008 	jr	ra
800056e4:	27bd0018 	addiu	sp,sp,24

800056e8 <vfs_unlink>:
vfs_unlink():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:95

/* Does most of the work for unlink(). */
int vfs_unlink(char *path)
{
800056e8:	27bdffe0 	addiu	sp,sp,-32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:99
	int ret;
	char *name;
	struct inode *dir;
	if ((ret = vfs_lookup_parent(path, &dir, &name)) != 0) {
800056ec:	27a50010 	addiu	a1,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:95
	return 0;
}

/* Does most of the work for unlink(). */
int vfs_unlink(char *path)
{
800056f0:	afb00018 	sw	s0,24(sp)
800056f4:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:99
	int ret;
	char *name;
	struct inode *dir;
	if ((ret = vfs_lookup_parent(path, &dir, &name)) != 0) {
800056f8:	0c001778 	jal	80005de0 <vfs_lookup_parent>
800056fc:	27a60014 	addiu	a2,sp,20
80005700:	14400015 	bnez	v0,80005758 <vfs_unlink+0x70>
80005704:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:102
		return ret;
	}
	ret = vop_unlink(dir, name);
80005708:	8fb00010 	lw	s0,16(sp)
8000570c:	12000017 	beqz	s0,8000576c <vfs_unlink+0x84>
80005710:	3c048002 	lui	a0,0x8002
80005714:	8e020048 	lw	v0,72(s0)
80005718:	10400015 	beqz	v0,80005770 <vfs_unlink+0x88>
8000571c:	3c068002 	lui	a2,0x8002
80005720:	8c420050 	lw	v0,80(v0)
80005724:	10400011 	beqz	v0,8000576c <vfs_unlink+0x84>
80005728:	3c058002 	lui	a1,0x8002
8000572c:	02002021 	move	a0,s0
80005730:	0c0010f3 	jal	800043cc <inode_check>
80005734:	24a51a7c 	addiu	a1,a1,6780
80005738:	8e020048 	lw	v0,72(s0)
8000573c:	8fa40010 	lw	a0,16(sp)
80005740:	8c420050 	lw	v0,80(v0)
80005744:	0040f809 	jalr	v0
80005748:	8fa50014 	lw	a1,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:103
	vop_ref_dec(dir);
8000574c:	8fa40010 	lw	a0,16(sp)
80005750:	0c001172 	jal	800045c8 <inode_ref_dec>
80005754:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:105
	return ret;
}
80005758:	8fbf001c 	lw	ra,28(sp)
8000575c:	02001021 	move	v0,s0
80005760:	8fb00018 	lw	s0,24(sp)
80005764:	03e00008 	jr	ra
80005768:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:102
	char *name;
	struct inode *dir;
	if ((ret = vfs_lookup_parent(path, &dir, &name)) != 0) {
		return ret;
	}
	ret = vop_unlink(dir, name);
8000576c:	3c068002 	lui	a2,0x8002
80005770:	3c078002 	lui	a3,0x8002
80005774:	24841910 	addiu	a0,a0,6416
80005778:	24050066 	li	a1,102
8000577c:	24c60e28 	addiu	a2,a2,3624
80005780:	0c006b0b 	jal	8001ac2c <__panic>
80005784:	24e71a2c 	addiu	a3,a3,6700

80005788 <vfs_rename>:
vfs_rename():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:109
	return ret;
}

/* Does most of the work for rename(). */
int vfs_rename(char *old_path, char *new_path)
{
80005788:	27bdffd0 	addiu	sp,sp,-48
8000578c:	afb00024 	sw	s0,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:113
	int ret;
	char *old_name, *new_name;
	struct inode *old_dir, *new_dir;
	if ((ret = vfs_lookup_parent(old_path, &old_dir, &old_name)) != 0) {
80005790:	27a6001c 	addiu	a2,sp,28
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:109
	return ret;
}

/* Does most of the work for rename(). */
int vfs_rename(char *old_path, char *new_path)
{
80005794:	00a08021 	move	s0,a1
80005798:	afb10028 	sw	s1,40(sp)
8000579c:	afbf002c 	sw	ra,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:113
	int ret;
	char *old_name, *new_name;
	struct inode *old_dir, *new_dir;
	if ((ret = vfs_lookup_parent(old_path, &old_dir, &old_name)) != 0) {
800057a0:	0c001778 	jal	80005de0 <vfs_lookup_parent>
800057a4:	27a50014 	addiu	a1,sp,20
800057a8:	10400007 	beqz	v0,800057c8 <vfs_rename+0x40>
800057ac:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:129
		ret = vop_rename(old_dir, old_name, new_dir, new_name);
	}
	vop_ref_dec(old_dir);
	vop_ref_dec(new_dir);
	return ret;
}
800057b0:	8fbf002c 	lw	ra,44(sp)
800057b4:	02201021 	move	v0,s1
800057b8:	8fb00024 	lw	s0,36(sp)
800057bc:	8fb10028 	lw	s1,40(sp)
800057c0:	03e00008 	jr	ra
800057c4:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:116
	char *old_name, *new_name;
	struct inode *old_dir, *new_dir;
	if ((ret = vfs_lookup_parent(old_path, &old_dir, &old_name)) != 0) {
		return ret;
	}
	if ((ret = vfs_lookup_parent(new_path, &new_dir, &new_name)) != 0) {
800057c8:	02002021 	move	a0,s0
800057cc:	27a50010 	addiu	a1,sp,16
800057d0:	0c001778 	jal	80005de0 <vfs_lookup_parent>
800057d4:	27a60018 	addiu	a2,sp,24
800057d8:	14400013 	bnez	v0,80005828 <vfs_rename+0xa0>
800057dc:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:121
		vop_ref_dec(old_dir);
		return ret;
	}

	if (old_dir->in_fs == NULL || old_dir->in_fs != new_dir->in_fs) {
800057e0:	8fb00014 	lw	s0,20(sp)
800057e4:	8e020044 	lw	v0,68(s0)
800057e8:	10400005 	beqz	v0,80005800 <vfs_rename+0x78>
800057ec:	2411ffee 	li	s1,-18
800057f0:	8fa30010 	lw	v1,16(sp)
800057f4:	8c630044 	lw	v1,68(v1)
800057f8:	5043000f 	beql	v0,v1,80005838 <vfs_rename+0xb0>
800057fc:	8e020048 	lw	v0,72(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:126
		ret = -E_XDEV;
	} else {
		ret = vop_rename(old_dir, old_name, new_dir, new_name);
	}
	vop_ref_dec(old_dir);
80005800:	0c001172 	jal	800045c8 <inode_ref_dec>
80005804:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:127
	vop_ref_dec(new_dir);
80005808:	0c001172 	jal	800045c8 <inode_ref_dec>
8000580c:	8fa40010 	lw	a0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:129
	return ret;
}
80005810:	8fbf002c 	lw	ra,44(sp)
80005814:	02201021 	move	v0,s1
80005818:	8fb00024 	lw	s0,36(sp)
8000581c:	8fb10028 	lw	s1,40(sp)
80005820:	03e00008 	jr	ra
80005824:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:117
	struct inode *old_dir, *new_dir;
	if ((ret = vfs_lookup_parent(old_path, &old_dir, &old_name)) != 0) {
		return ret;
	}
	if ((ret = vfs_lookup_parent(new_path, &new_dir, &new_name)) != 0) {
		vop_ref_dec(old_dir);
80005828:	0c001172 	jal	800045c8 <inode_ref_dec>
8000582c:	8fa40014 	lw	a0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:118
		return ret;
80005830:	080015ed 	j	800057b4 <vfs_rename+0x2c>
80005834:	8fbf002c 	lw	ra,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:124
	}

	if (old_dir->in_fs == NULL || old_dir->in_fs != new_dir->in_fs) {
		ret = -E_XDEV;
	} else {
		ret = vop_rename(old_dir, old_name, new_dir, new_name);
80005838:	10400011 	beqz	v0,80005880 <vfs_rename+0xf8>
8000583c:	3c048002 	lui	a0,0x8002
80005840:	8c420024 	lw	v0,36(v0)
80005844:	1040000e 	beqz	v0,80005880 <vfs_rename+0xf8>
80005848:	3c058002 	lui	a1,0x8002
8000584c:	02002021 	move	a0,s0
80005850:	0c0010f3 	jal	800043cc <inode_check>
80005854:	24a51ad4 	addiu	a1,a1,6868
80005858:	8e020048 	lw	v0,72(s0)
8000585c:	8fa40014 	lw	a0,20(sp)
80005860:	8fa5001c 	lw	a1,28(sp)
80005864:	8c420024 	lw	v0,36(v0)
80005868:	8fa60010 	lw	a2,16(sp)
8000586c:	0040f809 	jalr	v0
80005870:	8fa70018 	lw	a3,24(sp)
80005874:	00408821 	move	s1,v0
80005878:	08001600 	j	80005800 <vfs_rename+0x78>
8000587c:	8fb00014 	lw	s0,20(sp)
80005880:	3c068002 	lui	a2,0x8002
80005884:	3c078002 	lui	a3,0x8002
80005888:	24841910 	addiu	a0,a0,6416
8000588c:	2405007c 	li	a1,124
80005890:	24c60e28 	addiu	a2,a2,3624
80005894:	0c006b0b 	jal	8001ac2c <__panic>
80005898:	24e71a84 	addiu	a3,a3,6788

8000589c <vfs_link>:
vfs_link():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:133
	return ret;
}

/* Does most of the work for link(). */
int vfs_link(char *old_path, char *new_path)
{
8000589c:	27bdffd0 	addiu	sp,sp,-48
800058a0:	afb00024 	sw	s0,36(sp)
800058a4:	00a08021 	move	s0,a1
800058a8:	afb10028 	sw	s1,40(sp)
800058ac:	afbf002c 	sw	ra,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:137
	int ret;
	char *new_name;
	struct inode *old_node, *new_dir;
	if ((ret = vfs_lookup(old_path, &old_node)) != 0) {
800058b0:	0c001740 	jal	80005d00 <vfs_lookup>
800058b4:	27a50014 	addiu	a1,sp,20
800058b8:	10400007 	beqz	v0,800058d8 <vfs_link+0x3c>
800058bc:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:153
		ret = vop_link(new_dir, new_name, old_node);
	}
	vop_ref_dec(old_node);
	vop_ref_dec(new_dir);
	return ret;
}
800058c0:	8fbf002c 	lw	ra,44(sp)
800058c4:	02201021 	move	v0,s1
800058c8:	8fb00024 	lw	s0,36(sp)
800058cc:	8fb10028 	lw	s1,40(sp)
800058d0:	03e00008 	jr	ra
800058d4:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:140
	char *new_name;
	struct inode *old_node, *new_dir;
	if ((ret = vfs_lookup(old_path, &old_node)) != 0) {
		return ret;
	}
	if ((ret = vfs_lookup_parent(new_path, &new_dir, &new_name)) != 0) {
800058d8:	02002021 	move	a0,s0
800058dc:	27a50010 	addiu	a1,sp,16
800058e0:	0c001778 	jal	80005de0 <vfs_lookup_parent>
800058e4:	27a60018 	addiu	a2,sp,24
800058e8:	00408821 	move	s1,v0
800058ec:	1440000a 	bnez	v0,80005918 <vfs_link+0x7c>
800058f0:	8fa40014 	lw	a0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:145
		vop_ref_dec(old_node);
		return ret;
	}

	if (old_node->in_fs == NULL || old_node->in_fs != new_dir->in_fs) {
800058f4:	8c820044 	lw	v0,68(a0)
800058f8:	10400021 	beqz	v0,80005980 <vfs_link+0xe4>
800058fc:	8fb00010 	lw	s0,16(sp)
80005900:	8e030044 	lw	v1,68(s0)
80005904:	1043000c 	beq	v0,v1,80005938 <vfs_link+0x9c>
80005908:	2411ffee 	li	s1,-18
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:150
		ret = -E_XDEV;
	} else {
		ret = vop_link(new_dir, new_name, old_node);
	}
	vop_ref_dec(old_node);
8000590c:	0c001172 	jal	800045c8 <inode_ref_dec>
80005910:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:151
	vop_ref_dec(new_dir);
80005914:	8fa40010 	lw	a0,16(sp)
80005918:	0c001172 	jal	800045c8 <inode_ref_dec>
8000591c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:153
	return ret;
}
80005920:	8fbf002c 	lw	ra,44(sp)
80005924:	02201021 	move	v0,s1
80005928:	8fb00024 	lw	s0,36(sp)
8000592c:	8fb10028 	lw	s1,40(sp)
80005930:	03e00008 	jr	ra
80005934:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:148
	}

	if (old_node->in_fs == NULL || old_node->in_fs != new_dir->in_fs) {
		ret = -E_XDEV;
	} else {
		ret = vop_link(new_dir, new_name, old_node);
80005938:	8e020048 	lw	v0,72(s0)
8000593c:	10400012 	beqz	v0,80005988 <vfs_link+0xec>
80005940:	3c048002 	lui	a0,0x8002
80005944:	8c420020 	lw	v0,32(v0)
80005948:	1040000f 	beqz	v0,80005988 <vfs_link+0xec>
8000594c:	3c058002 	lui	a1,0x8002
80005950:	02002021 	move	a0,s0
80005954:	0c0010f3 	jal	800043cc <inode_check>
80005958:	24a51bdc 	addiu	a1,a1,7132
8000595c:	8e020048 	lw	v0,72(s0)
80005960:	8fa40010 	lw	a0,16(sp)
80005964:	8fa50018 	lw	a1,24(sp)
80005968:	8c420020 	lw	v0,32(v0)
8000596c:	0040f809 	jalr	v0
80005970:	8fa60014 	lw	a2,20(sp)
80005974:	00408821 	move	s1,v0
80005978:	08001643 	j	8000590c <vfs_link+0x70>
8000597c:	8fa40014 	lw	a0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:146
		vop_ref_dec(old_node);
		return ret;
	}

	if (old_node->in_fs == NULL || old_node->in_fs != new_dir->in_fs) {
		ret = -E_XDEV;
80005980:	08001643 	j	8000590c <vfs_link+0x70>
80005984:	2411ffee 	li	s1,-18
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:148
	} else {
		ret = vop_link(new_dir, new_name, old_node);
80005988:	3c068002 	lui	a2,0x8002
8000598c:	3c078002 	lui	a3,0x8002
80005990:	24841910 	addiu	a0,a0,6416
80005994:	24050094 	li	a1,148
80005998:	24c60e28 	addiu	a2,a2,3624
8000599c:	0c006b0b 	jal	8001ac2c <__panic>
800059a0:	24e71adc 	addiu	a3,a3,6876

800059a4 <vfs_symlink>:
vfs_symlink():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:163
 * Note, however, if you're implementing symlinks, that various
 * other parts of the VFS layer are missing crucial elements of
 * support for symlinks.
 */
int vfs_symlink(char *old_path, char *new_path)
{
800059a4:	27bdffd8 	addiu	sp,sp,-40
800059a8:	afb0001c 	sw	s0,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:167
	int ret;
	char *new_name;
	struct inode *new_dir;
	if ((ret = vfs_lookup_parent(new_path, &new_dir, &new_name)) != 0) {
800059ac:	27a60014 	addiu	a2,sp,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:163
 * Note, however, if you're implementing symlinks, that various
 * other parts of the VFS layer are missing crucial elements of
 * support for symlinks.
 */
int vfs_symlink(char *old_path, char *new_path)
{
800059b0:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:167
	int ret;
	char *new_name;
	struct inode *new_dir;
	if ((ret = vfs_lookup_parent(new_path, &new_dir, &new_name)) != 0) {
800059b4:	00a02021 	move	a0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:163
 * Note, however, if you're implementing symlinks, that various
 * other parts of the VFS layer are missing crucial elements of
 * support for symlinks.
 */
int vfs_symlink(char *old_path, char *new_path)
{
800059b8:	afb10020 	sw	s1,32(sp)
800059bc:	afbf0024 	sw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:167
	int ret;
	char *new_name;
	struct inode *new_dir;
	if ((ret = vfs_lookup_parent(new_path, &new_dir, &new_name)) != 0) {
800059c0:	0c001778 	jal	80005de0 <vfs_lookup_parent>
800059c4:	27a50010 	addiu	a1,sp,16
800059c8:	14400016 	bnez	v0,80005a24 <vfs_symlink+0x80>
800059cc:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:170
		return ret;
	}
	ret = vop_symlink(new_dir, new_name, old_path);
800059d0:	8fb10010 	lw	s1,16(sp)
800059d4:	12200019 	beqz	s1,80005a3c <vfs_symlink+0x98>
800059d8:	3c048002 	lui	a0,0x8002
800059dc:	8e220048 	lw	v0,72(s1)
800059e0:	10400017 	beqz	v0,80005a40 <vfs_symlink+0x9c>
800059e4:	3c068002 	lui	a2,0x8002
800059e8:	8c42002c 	lw	v0,44(v0)
800059ec:	10400013 	beqz	v0,80005a3c <vfs_symlink+0x98>
800059f0:	3c058002 	lui	a1,0x8002
800059f4:	02202021 	move	a0,s1
800059f8:	0c0010f3 	jal	800043cc <inode_check>
800059fc:	24a51b7c 	addiu	a1,a1,7036
80005a00:	8e220048 	lw	v0,72(s1)
80005a04:	8fa40010 	lw	a0,16(sp)
80005a08:	8fa50014 	lw	a1,20(sp)
80005a0c:	8c42002c 	lw	v0,44(v0)
80005a10:	0040f809 	jalr	v0
80005a14:	02003021 	move	a2,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:171
	vop_ref_dec(new_dir);
80005a18:	8fa40010 	lw	a0,16(sp)
80005a1c:	0c001172 	jal	800045c8 <inode_ref_dec>
80005a20:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:173
	return ret;
}
80005a24:	8fbf0024 	lw	ra,36(sp)
80005a28:	02201021 	move	v0,s1
80005a2c:	8fb0001c 	lw	s0,28(sp)
80005a30:	8fb10020 	lw	s1,32(sp)
80005a34:	03e00008 	jr	ra
80005a38:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:170
	char *new_name;
	struct inode *new_dir;
	if ((ret = vfs_lookup_parent(new_path, &new_dir, &new_name)) != 0) {
		return ret;
	}
	ret = vop_symlink(new_dir, new_name, old_path);
80005a3c:	3c068002 	lui	a2,0x8002
80005a40:	3c078002 	lui	a3,0x8002
80005a44:	24841910 	addiu	a0,a0,6416
80005a48:	240500aa 	li	a1,170
80005a4c:	24c60e28 	addiu	a2,a2,3624
80005a50:	0c006b0b 	jal	8001ac2c <__panic>
80005a54:	24e71b2c 	addiu	a3,a3,6956

80005a58 <vfs_readlink>:
vfs_readlink():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:183
 * Note, however, if you're implementing symlinks, that various
 * other parts of the VFS layer are missing crucial elements of
 * support for symlinks.
 */
int vfs_readlink(char *path, struct iobuf *iob)
{
80005a58:	27bdffd8 	addiu	sp,sp,-40
80005a5c:	afb0001c 	sw	s0,28(sp)
80005a60:	00a08021 	move	s0,a1
80005a64:	afb10020 	sw	s1,32(sp)
80005a68:	afbf0024 	sw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:186
	int ret;
	struct inode *node;
	if ((ret = vfs_lookup(path, &node)) != 0) {
80005a6c:	0c001740 	jal	80005d00 <vfs_lookup>
80005a70:	27a50010 	addiu	a1,sp,16
80005a74:	14400015 	bnez	v0,80005acc <vfs_readlink+0x74>
80005a78:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:189
		return ret;
	}
	ret = vop_readlink(node, iob);
80005a7c:	8fb10010 	lw	s1,16(sp)
80005a80:	12200018 	beqz	s1,80005ae4 <vfs_readlink+0x8c>
80005a84:	3c048002 	lui	a0,0x8002
80005a88:	8e220048 	lw	v0,72(s1)
80005a8c:	10400016 	beqz	v0,80005ae8 <vfs_readlink+0x90>
80005a90:	3c068002 	lui	a2,0x8002
80005a94:	8c420028 	lw	v0,40(v0)
80005a98:	10400012 	beqz	v0,80005ae4 <vfs_readlink+0x8c>
80005a9c:	3c058002 	lui	a1,0x8002
80005aa0:	02202021 	move	a0,s1
80005aa4:	0c0010f3 	jal	800043cc <inode_check>
80005aa8:	24a51bd8 	addiu	a1,a1,7128
80005aac:	8e220048 	lw	v0,72(s1)
80005ab0:	8fa40010 	lw	a0,16(sp)
80005ab4:	8c420028 	lw	v0,40(v0)
80005ab8:	0040f809 	jalr	v0
80005abc:	02002821 	move	a1,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:190
	vop_ref_dec(node);
80005ac0:	8fa40010 	lw	a0,16(sp)
80005ac4:	0c001172 	jal	800045c8 <inode_ref_dec>
80005ac8:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:192
	return ret;
}
80005acc:	8fbf0024 	lw	ra,36(sp)
80005ad0:	02201021 	move	v0,s1
80005ad4:	8fb0001c 	lw	s0,28(sp)
80005ad8:	8fb10020 	lw	s1,32(sp)
80005adc:	03e00008 	jr	ra
80005ae0:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:189
	int ret;
	struct inode *node;
	if ((ret = vfs_lookup(path, &node)) != 0) {
		return ret;
	}
	ret = vop_readlink(node, iob);
80005ae4:	3c068002 	lui	a2,0x8002
80005ae8:	3c078002 	lui	a3,0x8002
80005aec:	24841910 	addiu	a0,a0,6416
80005af0:	240500bd 	li	a1,189
80005af4:	24c60e28 	addiu	a2,a2,3624
80005af8:	0c006b0b 	jal	8001ac2c <__panic>
80005afc:	24e71b84 	addiu	a3,a3,7044

80005b00 <vfs_mkdir>:
vfs_mkdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:198

/*
 * Does most of the work for mkdir.
 */
int vfs_mkdir(char *path)
{
80005b00:	27bdffe0 	addiu	sp,sp,-32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:202
	int ret;
	char *name;
	struct inode *dir;
	if ((ret = vfs_lookup_parent(path, &dir, &name)) != 0) {
80005b04:	27a50010 	addiu	a1,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:198

/*
 * Does most of the work for mkdir.
 */
int vfs_mkdir(char *path)
{
80005b08:	afb00018 	sw	s0,24(sp)
80005b0c:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:202
	int ret;
	char *name;
	struct inode *dir;
	if ((ret = vfs_lookup_parent(path, &dir, &name)) != 0) {
80005b10:	0c001778 	jal	80005de0 <vfs_lookup_parent>
80005b14:	27a60014 	addiu	a2,sp,20
80005b18:	14400015 	bnez	v0,80005b70 <vfs_mkdir+0x70>
80005b1c:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:205
		return ret;
	}
	ret = vop_mkdir(dir, name);
80005b20:	8fb00010 	lw	s0,16(sp)
80005b24:	12000017 	beqz	s0,80005b84 <vfs_mkdir+0x84>
80005b28:	3c048002 	lui	a0,0x8002
80005b2c:	8e020048 	lw	v0,72(s0)
80005b30:	10400015 	beqz	v0,80005b88 <vfs_mkdir+0x88>
80005b34:	3c068002 	lui	a2,0x8002
80005b38:	8c42001c 	lw	v0,28(v0)
80005b3c:	10400011 	beqz	v0,80005b84 <vfs_mkdir+0x84>
80005b40:	3c058002 	lui	a1,0x8002
80005b44:	02002021 	move	a0,s0
80005b48:	0c0010f3 	jal	800043cc <inode_check>
80005b4c:	24a51c34 	addiu	a1,a1,7220
80005b50:	8e020048 	lw	v0,72(s0)
80005b54:	8fa40010 	lw	a0,16(sp)
80005b58:	8c42001c 	lw	v0,28(v0)
80005b5c:	0040f809 	jalr	v0
80005b60:	8fa50014 	lw	a1,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:206
	vop_ref_dec(dir);
80005b64:	8fa40010 	lw	a0,16(sp)
80005b68:	0c001172 	jal	800045c8 <inode_ref_dec>
80005b6c:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:208
	return ret;
}
80005b70:	8fbf001c 	lw	ra,28(sp)
80005b74:	02001021 	move	v0,s0
80005b78:	8fb00018 	lw	s0,24(sp)
80005b7c:	03e00008 	jr	ra
80005b80:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfsfile.c:205
	char *name;
	struct inode *dir;
	if ((ret = vfs_lookup_parent(path, &dir, &name)) != 0) {
		return ret;
	}
	ret = vop_mkdir(dir, name);
80005b84:	3c068002 	lui	a2,0x8002
80005b88:	3c078002 	lui	a3,0x8002
80005b8c:	24841910 	addiu	a0,a0,6416
80005b90:	240500cd 	li	a1,205
80005b94:	24c60e28 	addiu	a2,a2,3624
80005b98:	0c006b0b 	jal	8001ac2c <__panic>
80005b9c:	24e71be4 	addiu	a3,a3,7140

80005ba0 <get_device>:
get_device():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:17
/*
 * Common code to pull the device name, if any, off the front of a
 * path and choose the inode to begin the name lookup relative to.
 */
static int get_device(char *path, char **subpath, struct inode **node_store)
{
80005ba0:	27bdffd8 	addiu	sp,sp,-40
80005ba4:	afb00020 	sw	s0,32(sp)
80005ba8:	afbf0024 	sw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:22
	int i, slash = -1, colon = -1;
	/*
	 * Locate the first colon or slash.
	 */
	for (i = 0; path[i] != '\0'; i++) {
80005bac:	90820000 	lbu	v0,0(a0)
80005bb0:	10400011 	beqz	v0,80005bf8 <get_device+0x58>
80005bb4:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:23
		if (path[i] == ':') {
80005bb8:	2403003a 	li	v1,58
80005bbc:	10430023 	beq	v0,v1,80005c4c <get_device+0xac>
80005bc0:	2403002f 	li	v1,47
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:27
			colon = i;
			break;
		}
		if (path[i] == '/') {
80005bc4:	10430040 	beq	v0,v1,80005cc8 <get_device+0x128>
80005bc8:	24830001 	addiu	v1,a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:23
	int i, slash = -1, colon = -1;
	/*
	 * Locate the first colon or slash.
	 */
	for (i = 0; path[i] != '\0'; i++) {
		if (path[i] == ':') {
80005bcc:	2407003a 	li	a3,58
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:22
{
	int i, slash = -1, colon = -1;
	/*
	 * Locate the first colon or slash.
	 */
	for (i = 0; path[i] != '\0'; i++) {
80005bd0:	00002021 	move	a0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:27
		if (path[i] == ':') {
			colon = i;
			break;
		}
		if (path[i] == '/') {
80005bd4:	080016fb 	j	80005bec <get_device+0x4c>
80005bd8:	2408002f 	li	t0,47
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:23
	int i, slash = -1, colon = -1;
	/*
	 * Locate the first colon or slash.
	 */
	for (i = 0; path[i] != '\0'; i++) {
		if (path[i] == ':') {
80005bdc:	5047000b 	beql	v0,a3,80005c0c <get_device+0x6c>
80005be0:	24840001 	addiu	a0,a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:27
			colon = i;
			break;
		}
		if (path[i] == '/') {
80005be4:	10480004 	beq	v0,t0,80005bf8 <get_device+0x58>
80005be8:	24630001 	addiu	v1,v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:22
{
	int i, slash = -1, colon = -1;
	/*
	 * Locate the first colon or slash.
	 */
	for (i = 0; path[i] != '\0'; i++) {
80005bec:	90620000 	lbu	v0,0(v1)
80005bf0:	1440fffa 	bnez	v0,80005bdc <get_device+0x3c>
80005bf4:	24840001 	addiu	a0,a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:38
		/* *
		 * No colon before a slash, so no device name specified, and the slash isn't leading
		 * or is also absent, so this is a relative path or just a bare filename. Start from
		 * the current directory, and use the whole thing as the subpath.
		 * */
		*subpath = path;
80005bf8:	acb00000 	sw	s0,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:39
		return vfs_get_curdir(node_store);
80005bfc:	0c0017ad 	jal	80005eb4 <vfs_get_curdir>
80005c00:	00c02021 	move	a0,a2
80005c04:	08001710 	j	80005c40 <get_device+0xa0>
80005c08:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:43
	}
	if (colon > 0) {
		/* device:path - get root of device's filesystem */
		path[colon] = '\0';
80005c0c:	a0600000 	sb	zero,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:16

/*
 * Common code to pull the device name, if any, off the front of a
 * path and choose the inode to begin the name lookup relative to.
 */
static int get_device(char *path, char **subpath, struct inode **node_store)
80005c10:	02042021 	addu	a0,s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:46
	if (colon > 0) {
		/* device:path - get root of device's filesystem */
		path[colon] = '\0';

		/* device:/path - skip slash, treat as device:path */
		while (path[++colon] == '/') ;
80005c14:	2407002f 	li	a3,47
80005c18:	00801821 	move	v1,a0
80005c1c:	24840001 	addiu	a0,a0,1
80005c20:	9082ffff 	lbu	v0,-1(a0)
80005c24:	5047fffd 	beql	v0,a3,80005c1c <get_device+0x7c>
80005c28:	00801821 	move	v1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:48

		*subpath = path + colon;
80005c2c:	aca30000 	sw	v1,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:49
		return vfs_get_root(path, node_store);
80005c30:	02002021 	move	a0,s0
80005c34:	0c0013e8 	jal	80004fa0 <vfs_get_root>
80005c38:	00c02821 	move	a1,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:78

	/* ///... or :/... */
	while (*(++path) == '/') ;
	*subpath = path;
	return 0;
}
80005c3c:	8fbf0024 	lw	ra,36(sp)
80005c40:	8fb00020 	lw	s0,32(sp)
80005c44:	03e00008 	jr	ra
80005c48:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:65
			return ret;
		}
	} else {
		assert(*path == ':');
		struct inode *node;
		if ((ret = vfs_get_curdir(&node)) != 0) {
80005c4c:	27a40010 	addiu	a0,sp,16
80005c50:	afa5001c 	sw	a1,28(sp)
80005c54:	0c0017ad 	jal	80005eb4 <vfs_get_curdir>
80005c58:	afa60018 	sw	a2,24(sp)
80005c5c:	8fa5001c 	lw	a1,28(sp)
80005c60:	1440fff6 	bnez	v0,80005c3c <get_device+0x9c>
80005c64:	8fa60018 	lw	a2,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:69
			return ret;
		}
		/* The current directory may not be a device, so it must have a fs. */
		assert(node->in_fs != NULL);
80005c68:	8fa20010 	lw	v0,16(sp)
80005c6c:	8c440044 	lw	a0,68(v0)
80005c70:	5080001c 	beqzl	a0,80005ce4 <get_device+0x144>
80005c74:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:70
		*node_store = fsop_get_root(node->in_fs);
80005c78:	8c82008c 	lw	v0,140(a0)
80005c7c:	afa5001c 	sw	a1,28(sp)
80005c80:	0040f809 	jalr	v0
80005c84:	afa60018 	sw	a2,24(sp)
80005c88:	8fa60018 	lw	a2,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:71
		vop_ref_dec(node);
80005c8c:	8fa40010 	lw	a0,16(sp)
80005c90:	0c001172 	jal	800045c8 <inode_ref_dec>
80005c94:	acc20000 	sw	v0,0(a2)
80005c98:	8fa5001c 	lw	a1,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:75
	}

	/* ///... or :/... */
	while (*(++path) == '/') ;
80005c9c:	2403002f 	li	v1,47
80005ca0:	26100001 	addiu	s0,s0,1
80005ca4:	92020000 	lbu	v0,0(s0)
80005ca8:	5043fffe 	beql	v0,v1,80005ca4 <get_device+0x104>
80005cac:	26100001 	addiu	s0,s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:78
	*subpath = path;
	return 0;
}
80005cb0:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:76
		vop_ref_dec(node);
	}

	/* ///... or :/... */
	while (*(++path) == '/') ;
	*subpath = path;
80005cb4:	acb00000 	sw	s0,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:77
	return 0;
80005cb8:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:78
}
80005cbc:	8fb00020 	lw	s0,32(sp)
80005cc0:	03e00008 	jr	ra
80005cc4:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:59
	 * /path is a path relative to the root of the "boot filesystem"
	 * :path is a path relative to the root of the current filesystem
	 * */
	int ret;
	if (*path == '/') {
		if ((ret = vfs_get_bootfs(node_store)) != 0) {
80005cc8:	00c02021 	move	a0,a2
80005ccc:	0c001200 	jal	80004800 <vfs_get_bootfs>
80005cd0:	afa5001c 	sw	a1,28(sp)
80005cd4:	1040fff1 	beqz	v0,80005c9c <get_device+0xfc>
80005cd8:	8fa5001c 	lw	a1,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:78

	/* ///... or :/... */
	while (*(++path) == '/') ;
	*subpath = path;
	return 0;
}
80005cdc:	08001710 	j	80005c40 <get_device+0xa0>
80005ce0:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:69
		struct inode *node;
		if ((ret = vfs_get_curdir(&node)) != 0) {
			return ret;
		}
		/* The current directory may not be a device, so it must have a fs. */
		assert(node->in_fs != NULL);
80005ce4:	3c068002 	lui	a2,0x8002
80005ce8:	3c078002 	lui	a3,0x8002
80005cec:	24841c3c 	addiu	a0,a0,7228
80005cf0:	24050045 	li	a1,69
80005cf4:	24c60e28 	addiu	a2,a2,3624
80005cf8:	0c006b0b 	jal	8001ac2c <__panic>
80005cfc:	24e71c48 	addiu	a3,a3,7240

80005d00 <vfs_lookup>:
vfs_lookup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:86
 * Name-to-inode translation.
 * (In BSD, both of these are subsumed by namei().)
 */

int vfs_lookup(char *path, struct inode **node_store)
{
80005d00:	27bdffd8 	addiu	sp,sp,-40
80005d04:	afb0001c 	sw	s0,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:89
	int ret;
	struct inode *node;
	if ((ret = get_device(path, &path, &node)) != 0) {
80005d08:	27a60010 	addiu	a2,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:86
 * Name-to-inode translation.
 * (In BSD, both of these are subsumed by namei().)
 */

int vfs_lookup(char *path, struct inode **node_store)
{
80005d0c:	00a08021 	move	s0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:89
	int ret;
	struct inode *node;
	if ((ret = get_device(path, &path, &node)) != 0) {
80005d10:	27a50028 	addiu	a1,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:86
 * Name-to-inode translation.
 * (In BSD, both of these are subsumed by namei().)
 */

int vfs_lookup(char *path, struct inode **node_store)
{
80005d14:	afb10020 	sw	s1,32(sp)
80005d18:	afbf0024 	sw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:89
	int ret;
	struct inode *node;
	if ((ret = get_device(path, &path, &node)) != 0) {
80005d1c:	0c0016e8 	jal	80005ba0 <get_device>
80005d20:	afa40028 	sw	a0,40(sp)
80005d24:	1440001a 	bnez	v0,80005d90 <vfs_lookup+0x90>
80005d28:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:92
		return ret;
	}
	if (*path != '\0') {
80005d2c:	8fa20028 	lw	v0,40(sp)
80005d30:	90420000 	lbu	v0,0(v0)
80005d34:	1040001c 	beqz	v0,80005da8 <vfs_lookup+0xa8>
80005d38:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:93
		ret = vop_lookup(node, path, node_store);
80005d3c:	8fb10010 	lw	s1,16(sp)
80005d40:	12200020 	beqz	s1,80005dc4 <vfs_lookup+0xc4>
80005d44:	3c048002 	lui	a0,0x8002
80005d48:	8e220048 	lw	v0,72(s1)
80005d4c:	1040001e 	beqz	v0,80005dc8 <vfs_lookup+0xc8>
80005d50:	3c068002 	lui	a2,0x8002
80005d54:	8c420054 	lw	v0,84(v0)
80005d58:	1040001a 	beqz	v0,80005dc4 <vfs_lookup+0xc4>
80005d5c:	3c058002 	lui	a1,0x8002
80005d60:	02202021 	move	a0,s1
80005d64:	0c0010f3 	jal	800043cc <inode_check>
80005d68:	24a51cac 	addiu	a1,a1,7340
80005d6c:	8e220048 	lw	v0,72(s1)
80005d70:	8fa40010 	lw	a0,16(sp)
80005d74:	8fa50028 	lw	a1,40(sp)
80005d78:	8c420054 	lw	v0,84(v0)
80005d7c:	0040f809 	jalr	v0
80005d80:	02003021 	move	a2,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:94
		vop_ref_dec(node);
80005d84:	8fa40010 	lw	a0,16(sp)
80005d88:	0c001172 	jal	800045c8 <inode_ref_dec>
80005d8c:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:99
		return ret;
	}
	*node_store = node;
	return 0;
}
80005d90:	8fbf0024 	lw	ra,36(sp)
80005d94:	02201021 	move	v0,s1
80005d98:	8fb0001c 	lw	s0,28(sp)
80005d9c:	8fb10020 	lw	s1,32(sp)
80005da0:	03e00008 	jr	ra
80005da4:	27bd0028 	addiu	sp,sp,40
80005da8:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:97
	if (*path != '\0') {
		ret = vop_lookup(node, path, node_store);
		vop_ref_dec(node);
		return ret;
	}
	*node_store = node;
80005dac:	ae020000 	sw	v0,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:99
	return 0;
}
80005db0:	02201021 	move	v0,s1
80005db4:	8fb0001c 	lw	s0,28(sp)
80005db8:	8fb10020 	lw	s1,32(sp)
80005dbc:	03e00008 	jr	ra
80005dc0:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:93
	struct inode *node;
	if ((ret = get_device(path, &path, &node)) != 0) {
		return ret;
	}
	if (*path != '\0') {
		ret = vop_lookup(node, path, node_store);
80005dc4:	3c068002 	lui	a2,0x8002
80005dc8:	3c078002 	lui	a3,0x8002
80005dcc:	24841c3c 	addiu	a0,a0,7228
80005dd0:	2405005d 	li	a1,93
80005dd4:	24c60e28 	addiu	a2,a2,3624
80005dd8:	0c006b0b 	jal	8001ac2c <__panic>
80005ddc:	24e71c5c 	addiu	a3,a3,7260

80005de0 <vfs_lookup_parent>:
vfs_lookup_parent():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:102
	*node_store = node;
	return 0;
}

int vfs_lookup_parent(char *path, struct inode **node_store, char **endp)
{
80005de0:	27bdffd8 	addiu	sp,sp,-40
80005de4:	afb1001c 	sw	s1,28(sp)
80005de8:	afb00018 	sw	s0,24(sp)
80005dec:	00a08821 	move	s1,a1
80005df0:	00c08021 	move	s0,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:105
	int ret;
	struct inode *node;
	if ((ret = get_device(path, &path, &node)) != 0) {
80005df4:	27a50028 	addiu	a1,sp,40
80005df8:	27a60010 	addiu	a2,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:102
	*node_store = node;
	return 0;
}

int vfs_lookup_parent(char *path, struct inode **node_store, char **endp)
{
80005dfc:	afb20020 	sw	s2,32(sp)
80005e00:	afbf0024 	sw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:105
	int ret;
	struct inode *node;
	if ((ret = get_device(path, &path, &node)) != 0) {
80005e04:	0c0016e8 	jal	80005ba0 <get_device>
80005e08:	afa40028 	sw	a0,40(sp)
80005e0c:	1440001b 	bnez	v0,80005e7c <vfs_lookup_parent+0x9c>
80005e10:	00409021 	move	s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:109
		return ret;
	}
	ret =
	    (*path != '\0') ? vop_lookup_parent(node, path, node_store,
80005e14:	8fa20028 	lw	v0,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:110
						endp) : -E_INVAL;
80005e18:	90420000 	lbu	v0,0(v0)
80005e1c:	10400015 	beqz	v0,80005e74 <vfs_lookup_parent+0x94>
80005e20:	2412ffea 	li	s2,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:109
	struct inode *node;
	if ((ret = get_device(path, &path, &node)) != 0) {
		return ret;
	}
	ret =
	    (*path != '\0') ? vop_lookup_parent(node, path, node_store,
80005e24:	8fb20010 	lw	s2,16(sp)
80005e28:	1240001b 	beqz	s2,80005e98 <vfs_lookup_parent+0xb8>
80005e2c:	3c048002 	lui	a0,0x8002
80005e30:	8e420048 	lw	v0,72(s2)
80005e34:	10400019 	beqz	v0,80005e9c <vfs_lookup_parent+0xbc>
80005e38:	3c068002 	lui	a2,0x8002
80005e3c:	8c420058 	lw	v0,88(v0)
80005e40:	10400015 	beqz	v0,80005e98 <vfs_lookup_parent+0xb8>
80005e44:	3c058002 	lui	a1,0x8002
80005e48:	02402021 	move	a0,s2
80005e4c:	0c0010f3 	jal	800043cc <inode_check>
80005e50:	24a51d0c 	addiu	a1,a1,7436
80005e54:	8e420048 	lw	v0,72(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:110
						endp) : -E_INVAL;
80005e58:	8fa40010 	lw	a0,16(sp)
80005e5c:	8fa50028 	lw	a1,40(sp)
80005e60:	8c420058 	lw	v0,88(v0)
80005e64:	02203021 	move	a2,s1
80005e68:	0040f809 	jalr	v0
80005e6c:	02003821 	move	a3,s0
80005e70:	00409021 	move	s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:111
	vop_ref_dec(node);
80005e74:	0c001172 	jal	800045c8 <inode_ref_dec>
80005e78:	8fa40010 	lw	a0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:113
	return ret;
}
80005e7c:	8fbf0024 	lw	ra,36(sp)
80005e80:	02401021 	move	v0,s2
80005e84:	8fb1001c 	lw	s1,28(sp)
80005e88:	8fb20020 	lw	s2,32(sp)
80005e8c:	8fb00018 	lw	s0,24(sp)
80005e90:	03e00008 	jr	ra
80005e94:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfslookup.c:109
	struct inode *node;
	if ((ret = get_device(path, &path, &node)) != 0) {
		return ret;
	}
	ret =
	    (*path != '\0') ? vop_lookup_parent(node, path, node_store,
80005e98:	3c068002 	lui	a2,0x8002
80005e9c:	3c078002 	lui	a3,0x8002
80005ea0:	24841c3c 	addiu	a0,a0,7228
80005ea4:	2405006e 	li	a1,110
80005ea8:	24c60e28 	addiu	a2,a2,3624
80005eac:	0c006b0b 	jal	8001ac2c <__panic>
80005eb0:	24e71cb4 	addiu	a3,a3,7348

80005eb4 <vfs_get_curdir>:
get_cwd_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:13
#include <error.h>
#include <assert.h>

static struct inode *get_cwd_nolock(void)
{
	return pls_read(current)->fs_struct->pwd;
80005eb4:	3c028015 	lui	v0,0x8015
80005eb8:	8c4377a4 	lw	v1,30628(v0)
vfs_get_curdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:38
 * 
 * We do not synchronize current->fs_struct->pwd, because it belongs exclusively
 * to its own process(or threads) with the holding lock.
 */
int vfs_get_curdir(struct inode **dir_store)
{
80005ebc:	27bdffe0 	addiu	sp,sp,-32
80005ec0:	afb00014 	sw	s0,20(sp)
get_cwd_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:13
#include <error.h>
#include <assert.h>

static struct inode *get_cwd_nolock(void)
{
	return pls_read(current)->fs_struct->pwd;
80005ec4:	8c6300bc 	lw	v1,188(v1)
vfs_get_curdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:38
 * 
 * We do not synchronize current->fs_struct->pwd, because it belongs exclusively
 * to its own process(or threads) with the holding lock.
 */
int vfs_get_curdir(struct inode **dir_store)
{
80005ec8:	afb10018 	sw	s1,24(sp)
80005ecc:	afbf001c 	sw	ra,28(sp)
get_cwd_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:13
#include <error.h>
#include <assert.h>

static struct inode *get_cwd_nolock(void)
{
	return pls_read(current)->fs_struct->pwd;
80005ed0:	8c700000 	lw	s0,0(v1)
vfs_get_curdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:38
 * 
 * We do not synchronize current->fs_struct->pwd, because it belongs exclusively
 * to its own process(or threads) with the holding lock.
 */
int vfs_get_curdir(struct inode **dir_store)
{
80005ed4:	00808821 	move	s1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:40
	struct inode *node;
	if ((node = get_cwd_nolock()) != NULL) {
80005ed8:	12000005 	beqz	s0,80005ef0 <vfs_get_curdir+0x3c>
80005edc:	2402fffe 	li	v0,-2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:41
		vop_ref_inc(node);
80005ee0:	0c0010b6 	jal	800042d8 <inode_ref_inc>
80005ee4:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:42
		*dir_store = node;
80005ee8:	ae300000 	sw	s0,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:43
		return 0;
80005eec:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:46
	}
	return -E_NOENT;
}
80005ef0:	8fbf001c 	lw	ra,28(sp)
80005ef4:	8fb10018 	lw	s1,24(sp)
80005ef8:	8fb00014 	lw	s0,20(sp)
80005efc:	03e00008 	jr	ra
80005f00:	27bd0020 	addiu	sp,sp,32

80005f04 <vfs_set_curdir>:
vfs_set_curdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:53
/*
 * Set current directory as a vnode.
 * The passed inode must in fact be a directory.
 */
int vfs_set_curdir(struct inode *dir)
{
80005f04:	27bdffd0 	addiu	sp,sp,-48
80005f08:	afb10024 	sw	s1,36(sp)
lock_cfs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:23
	pls_read(current)->fs_struct->pwd = pwd;
}

static void lock_cfs(void)
{
	lock_fs(pls_read(current)->fs_struct);
80005f0c:	3c118015 	lui	s1,0x8015
80005f10:	8e2277a4 	lw	v0,30628(s1)
vfs_set_curdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:53
/*
 * Set current directory as a vnode.
 * The passed inode must in fact be a directory.
 */
int vfs_set_curdir(struct inode *dir)
{
80005f14:	afb00020 	sw	s0,32(sp)
80005f18:	00808021 	move	s0,a0
lock_cfs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:23
	pls_read(current)->fs_struct->pwd = pwd;
}

static void lock_cfs(void)
{
	lock_fs(pls_read(current)->fs_struct);
80005f1c:	8c4400bc 	lw	a0,188(v0)
vfs_set_curdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:53
/*
 * Set current directory as a vnode.
 * The passed inode must in fact be a directory.
 */
int vfs_set_curdir(struct inode *dir)
{
80005f20:	afb20028 	sw	s2,40(sp)
80005f24:	afbf002c 	sw	ra,44(sp)
lock_cfs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:23
	pls_read(current)->fs_struct->pwd = pwd;
}

static void lock_cfs(void)
{
	lock_fs(pls_read(current)->fs_struct);
80005f28:	0c003280 	jal	8000ca00 <lock_fs>
80005f2c:	00000000 	nop
get_cwd_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:13
#include <error.h>
#include <assert.h>

static struct inode *get_cwd_nolock(void)
{
	return pls_read(current)->fs_struct->pwd;
80005f30:	8e2277a4 	lw	v0,30628(s1)
80005f34:	8c4400bc 	lw	a0,188(v0)
80005f38:	8c920000 	lw	s2,0(a0)
vfs_set_curdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:57
int vfs_set_curdir(struct inode *dir)
{
	int ret = 0;
	lock_cfs();
	struct inode *old_dir;
	if ((old_dir = get_cwd_nolock()) != dir) {
80005f3c:	52120022 	beql	s0,s2,80005fc8 <vfs_set_curdir+0xc4>
80005f40:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:58
		if (dir != NULL) {
80005f44:	12000019 	beqz	s0,80005fac <vfs_set_curdir+0xa8>
80005f48:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:60
			uint32_t type;
			if ((ret = vop_gettype(dir, &type)) != 0) {
80005f4c:	8e020048 	lw	v0,72(s0)
80005f50:	10400047 	beqz	v0,80006070 <vfs_set_curdir+0x16c>
80005f54:	3c048002 	lui	a0,0x8002
80005f58:	8c420040 	lw	v0,64(v0)
80005f5c:	10400044 	beqz	v0,80006070 <vfs_set_curdir+0x16c>
80005f60:	3c058002 	lui	a1,0x8002
80005f64:	02002021 	move	a0,s0
80005f68:	0c0010f3 	jal	800043cc <inode_check>
80005f6c:	24a51040 	addiu	a1,a1,4160
80005f70:	8e020048 	lw	v0,72(s0)
80005f74:	02002021 	move	a0,s0
80005f78:	8c420040 	lw	v0,64(v0)
80005f7c:	0040f809 	jalr	v0
80005f80:	27a50010 	addiu	a1,sp,16
80005f84:	14400019 	bnez	v0,80005fec <vfs_set_curdir+0xe8>
80005f88:	8fa30010 	lw	v1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:63
				goto out;
			}
			if (!S_ISDIR(type)) {
80005f8c:	24024000 	li	v0,16384
80005f90:	3063f000 	andi	v1,v1,0xf000
80005f94:	1462002b 	bne	v1,v0,80006044 <vfs_set_curdir+0x140>
80005f98:	8e2377a4 	lw	v1,30628(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:67
				ret = -E_NOTDIR;
				goto out;
			}
			vop_ref_inc(dir);
80005f9c:	0c0010b6 	jal	800042d8 <inode_ref_inc>
80005fa0:	02002021 	move	a0,s0
80005fa4:	8e2277a4 	lw	v0,30628(s1)
80005fa8:	8c4400bc 	lw	a0,188(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:70
		}
		set_cwd_nolock(dir);
		if (old_dir != NULL) {
80005fac:	1240001a 	beqz	s2,80006018 <vfs_set_curdir+0x114>
80005fb0:	ac900000 	sw	s0,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:71
			vop_ref_dec(old_dir);
80005fb4:	0c001172 	jal	800045c8 <inode_ref_dec>
80005fb8:	02402021 	move	a0,s2
80005fbc:	8e2377a4 	lw	v1,30628(s1)
80005fc0:	00001021 	move	v0,zero
80005fc4:	8c6400bc 	lw	a0,188(v1)
unlock_cfs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:28
	lock_fs(pls_read(current)->fs_struct);
}

static void unlock_cfs(void)
{
	unlock_fs(pls_read(current)->fs_struct);
80005fc8:	0c003282 	jal	8000ca08 <unlock_fs>
80005fcc:	afa20018 	sw	v0,24(sp)
vfs_set_curdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:77
		}
	}
out:
	unlock_cfs();
	return ret;
}
80005fd0:	8fbf002c 	lw	ra,44(sp)
80005fd4:	8fa20018 	lw	v0,24(sp)
80005fd8:	8fb20028 	lw	s2,40(sp)
80005fdc:	8fb10024 	lw	s1,36(sp)
80005fe0:	8fb00020 	lw	s0,32(sp)
80005fe4:	03e00008 	jr	ra
80005fe8:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:60
	lock_cfs();
	struct inode *old_dir;
	if ((old_dir = get_cwd_nolock()) != dir) {
		if (dir != NULL) {
			uint32_t type;
			if ((ret = vop_gettype(dir, &type)) != 0) {
80005fec:	8e2377a4 	lw	v1,30628(s1)
80005ff0:	8c6400bc 	lw	a0,188(v1)
unlock_cfs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:28
	lock_fs(pls_read(current)->fs_struct);
}

static void unlock_cfs(void)
{
	unlock_fs(pls_read(current)->fs_struct);
80005ff4:	0c003282 	jal	8000ca08 <unlock_fs>
80005ff8:	afa20018 	sw	v0,24(sp)
vfs_set_curdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:77
		}
	}
out:
	unlock_cfs();
	return ret;
}
80005ffc:	8fbf002c 	lw	ra,44(sp)
80006000:	8fa20018 	lw	v0,24(sp)
80006004:	8fb20028 	lw	s2,40(sp)
80006008:	8fb10024 	lw	s1,36(sp)
8000600c:	8fb00020 	lw	s0,32(sp)
80006010:	03e00008 	jr	ra
80006014:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:70
				goto out;
			}
			vop_ref_inc(dir);
		}
		set_cwd_nolock(dir);
		if (old_dir != NULL) {
80006018:	8c4400bc 	lw	a0,188(v0)
8000601c:	00001021 	move	v0,zero
unlock_cfs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:28
	lock_fs(pls_read(current)->fs_struct);
}

static void unlock_cfs(void)
{
	unlock_fs(pls_read(current)->fs_struct);
80006020:	0c003282 	jal	8000ca08 <unlock_fs>
80006024:	afa20018 	sw	v0,24(sp)
vfs_set_curdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:77
		}
	}
out:
	unlock_cfs();
	return ret;
}
80006028:	8fbf002c 	lw	ra,44(sp)
8000602c:	8fa20018 	lw	v0,24(sp)
80006030:	8fb20028 	lw	s2,40(sp)
80006034:	8fb10024 	lw	s1,36(sp)
80006038:	8fb00020 	lw	s0,32(sp)
8000603c:	03e00008 	jr	ra
80006040:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:64
			uint32_t type;
			if ((ret = vop_gettype(dir, &type)) != 0) {
				goto out;
			}
			if (!S_ISDIR(type)) {
				ret = -E_NOTDIR;
80006044:	2402ffec 	li	v0,-20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:63
		if (dir != NULL) {
			uint32_t type;
			if ((ret = vop_gettype(dir, &type)) != 0) {
				goto out;
			}
			if (!S_ISDIR(type)) {
80006048:	8c6400bc 	lw	a0,188(v1)
unlock_cfs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:28
	lock_fs(pls_read(current)->fs_struct);
}

static void unlock_cfs(void)
{
	unlock_fs(pls_read(current)->fs_struct);
8000604c:	0c003282 	jal	8000ca08 <unlock_fs>
80006050:	afa20018 	sw	v0,24(sp)
vfs_set_curdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:77
		}
	}
out:
	unlock_cfs();
	return ret;
}
80006054:	8fbf002c 	lw	ra,44(sp)
80006058:	8fa20018 	lw	v0,24(sp)
8000605c:	8fb20028 	lw	s2,40(sp)
80006060:	8fb10024 	lw	s1,36(sp)
80006064:	8fb00020 	lw	s0,32(sp)
80006068:	03e00008 	jr	ra
8000606c:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:60
	lock_cfs();
	struct inode *old_dir;
	if ((old_dir = get_cwd_nolock()) != dir) {
		if (dir != NULL) {
			uint32_t type;
			if ((ret = vop_gettype(dir, &type)) != 0) {
80006070:	3c068002 	lui	a2,0x8002
80006074:	3c078002 	lui	a3,0x8002
80006078:	24841d1c 	addiu	a0,a0,7452
8000607c:	2405003c 	li	a1,60
80006080:	24c60e28 	addiu	a2,a2,3624
80006084:	0c006b0b 	jal	8001ac2c <__panic>
80006088:	24e70ff0 	addiu	a3,a3,4080

8000608c <vfs_chdir>:
vfs_chdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:84
/*
 * Set current directory, as a pathname. Use vfs_lookup to translate
 * it to a inode.
 */
int vfs_chdir(char *path)
{
8000608c:	27bdffe0 	addiu	sp,sp,-32
80006090:	afb00018 	sw	s0,24(sp)
80006094:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:87
	int ret;
	struct inode *node;
	if ((ret = vfs_lookup(path, &node)) == 0) {
80006098:	0c001740 	jal	80005d00 <vfs_lookup>
8000609c:	27a50010 	addiu	a1,sp,16
800060a0:	14400006 	bnez	v0,800060bc <vfs_chdir+0x30>
800060a4:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:88
		ret = vfs_set_curdir(node);
800060a8:	0c0017c1 	jal	80005f04 <vfs_set_curdir>
800060ac:	8fa40010 	lw	a0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:89
		vop_ref_dec(node);
800060b0:	8fa40010 	lw	a0,16(sp)
800060b4:	0c001172 	jal	800045c8 <inode_ref_dec>
800060b8:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:92
	}
	return ret;
}
800060bc:	8fbf001c 	lw	ra,28(sp)
800060c0:	02001021 	move	v0,s0
800060c4:	8fb00018 	lw	s0,24(sp)
800060c8:	03e00008 	jr	ra
800060cc:	27bd0020 	addiu	sp,sp,32

800060d0 <vfs_getcwd>:
vfs_getcwd():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:99
/*
 * Get current directory, as a pathname.
 * Use vop_namefile to get the pathname.
 */
int vfs_getcwd(struct iobuf *iob)
{
800060d0:	27bdffc8 	addiu	sp,sp,-56
800060d4:	afb0002c 	sw	s0,44(sp)
800060d8:	00808021 	move	s0,a0
800060dc:	afb10030 	sw	s1,48(sp)
800060e0:	afbf0034 	sw	ra,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:102
	int ret;
	struct inode *node;
	if ((ret = vfs_get_curdir(&node)) != 0) {
800060e4:	0c0017ad 	jal	80005eb4 <vfs_get_curdir>
800060e8:	27a4001c 	addiu	a0,sp,28
800060ec:	14400014 	bnez	v0,80006140 <vfs_getcwd+0x70>
800060f0:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:106
		return ret;
	}
	/* The current dir must be a directory, and thus it is not a device. */
	assert(node->in_fs != NULL);
800060f4:	8fa2001c 	lw	v0,28(sp)
800060f8:	8c440044 	lw	a0,68(v0)
800060fc:	5080003a 	beqzl	a0,800061e8 <vfs_getcwd+0x118>
80006100:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:108

	const char *devname = vfs_get_devname(node->in_fs);
80006104:	0c001425 	jal	80005094 <vfs_get_devname>
80006108:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:110
	if ((ret =
	     iobuf_move(iob, (char *)devname, strlen(devname), 1, NULL)) != 0) {
8000610c:	00402021 	move	a0,v0
80006110:	0c005b79 	jal	80016de4 <strlen>
80006114:	afa20020 	sw	v0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:109
	}
	/* The current dir must be a directory, and thus it is not a device. */
	assert(node->in_fs != NULL);

	const char *devname = vfs_get_devname(node->in_fs);
	if ((ret =
80006118:	8fa50020 	lw	a1,32(sp)
8000611c:	00403021 	move	a2,v0
80006120:	02002021 	move	a0,s0
80006124:	24070001 	li	a3,1
80006128:	0c003388 	jal	8000ce20 <iobuf_move>
8000612c:	afa00010 	sw	zero,16(sp)
80006130:	10400009 	beqz	v0,80006158 <vfs_getcwd+0x88>
80006134:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:120
		goto out;
	}
	ret = vop_namefile(node, iob);

out:
	vop_ref_dec(node);
80006138:	0c001172 	jal	800045c8 <inode_ref_dec>
8000613c:	8fa4001c 	lw	a0,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:122
	return ret;
}
80006140:	8fbf0034 	lw	ra,52(sp)
80006144:	02201021 	move	v0,s1
80006148:	8fb0002c 	lw	s0,44(sp)
8000614c:	8fb10030 	lw	s1,48(sp)
80006150:	03e00008 	jr	ra
80006154:	27bd0038 	addiu	sp,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:113
	const char *devname = vfs_get_devname(node->in_fs);
	if ((ret =
	     iobuf_move(iob, (char *)devname, strlen(devname), 1, NULL)) != 0) {
		goto out;
	}
	char colon = ':';
80006158:	2402003a 	li	v0,58
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:114
	if ((ret = iobuf_move(iob, &colon, sizeof(colon), 1, NULL)) != 0) {
8000615c:	02002021 	move	a0,s0
80006160:	27a50018 	addiu	a1,sp,24
80006164:	24060001 	li	a2,1
80006168:	24070001 	li	a3,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:113
	const char *devname = vfs_get_devname(node->in_fs);
	if ((ret =
	     iobuf_move(iob, (char *)devname, strlen(devname), 1, NULL)) != 0) {
		goto out;
	}
	char colon = ':';
8000616c:	a3a20018 	sb	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:114
	if ((ret = iobuf_move(iob, &colon, sizeof(colon), 1, NULL)) != 0) {
80006170:	0c003388 	jal	8000ce20 <iobuf_move>
80006174:	afa00010 	sw	zero,16(sp)
80006178:	1440ffef 	bnez	v0,80006138 <vfs_getcwd+0x68>
8000617c:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:117
		goto out;
	}
	ret = vop_namefile(node, iob);
80006180:	8fb1001c 	lw	s1,28(sp)
80006184:	12200011 	beqz	s1,800061cc <vfs_getcwd+0xfc>
80006188:	3c048002 	lui	a0,0x8002
8000618c:	8e220048 	lw	v0,72(s1)
80006190:	1040000f 	beqz	v0,800061d0 <vfs_getcwd+0x100>
80006194:	3c068002 	lui	a2,0x8002
80006198:	8c420030 	lw	v0,48(v0)
8000619c:	1040000b 	beqz	v0,800061cc <vfs_getcwd+0xfc>
800061a0:	3c058002 	lui	a1,0x8002
800061a4:	02202021 	move	a0,s1
800061a8:	0c0010f3 	jal	800043cc <inode_check>
800061ac:	24a51d7c 	addiu	a1,a1,7548
800061b0:	8e220048 	lw	v0,72(s1)
800061b4:	8fa4001c 	lw	a0,28(sp)
800061b8:	8c420030 	lw	v0,48(v0)
800061bc:	0040f809 	jalr	v0
800061c0:	02002821 	move	a1,s0
800061c4:	0800184e 	j	80006138 <vfs_getcwd+0x68>
800061c8:	00408821 	move	s1,v0
800061cc:	3c068002 	lui	a2,0x8002
800061d0:	3c078002 	lui	a3,0x8002
800061d4:	24841d1c 	addiu	a0,a0,7452
800061d8:	24050075 	li	a1,117
800061dc:	24c60e28 	addiu	a2,a2,3624
800061e0:	0c006b0b 	jal	8001ac2c <__panic>
800061e4:	24e71d28 	addiu	a3,a3,7464
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/vfs/vfspath.c:106
	struct inode *node;
	if ((ret = vfs_get_curdir(&node)) != 0) {
		return ret;
	}
	/* The current dir must be a directory, and thus it is not a device. */
	assert(node->in_fs != NULL);
800061e8:	3c068002 	lui	a2,0x8002
800061ec:	3c078002 	lui	a3,0x8002
800061f0:	24841d1c 	addiu	a0,a0,7452
800061f4:	2405006a 	li	a1,106
800061f8:	24c60e28 	addiu	a2,a2,3624
800061fc:	0c006b0b 	jal	8001ac2c <__panic>
80006200:	24e71c48 	addiu	a3,a3,7240

80006204 <bitmap_create>:
bitmap_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:18
	uint32_t nwords;
	WORD_TYPE *map;
};

struct bitmap *bitmap_create(uint32_t nbits)
{
80006204:	27bdffd8 	addiu	sp,sp,-40
80006208:	afb00018 	sw	s0,24(sp)
8000620c:	afbf0024 	sw	ra,36(sp)
80006210:	afb20020 	sw	s2,32(sp)
80006214:	afb1001c 	sw	s1,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:20
	static_assert(WORD_BITS != 0);
	assert(nbits != 0 && nbits + WORD_BITS > nbits);
80006218:	10800036 	beqz	a0,800062f4 <bitmap_create+0xf0>
8000621c:	00808021 	move	s0,a0
80006220:	24820020 	addiu	v0,a0,32
80006224:	0082102b 	sltu	v0,a0,v0
80006228:	10400033 	beqz	v0,800062f8 <bitmap_create+0xf4>
8000622c:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:23

	struct bitmap *bitmap;
	if ((bitmap = kmalloc(sizeof(struct bitmap))) == NULL) {
80006230:	0c005486 	jal	80015218 <kmalloc>
80006234:	2404000c 	li	a0,12
80006238:	10400023 	beqz	v0,800062c8 <bitmap_create+0xc4>
8000623c:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:27
		return NULL;
	}

	uint32_t nwords = ROUNDUP_DIV(nbits, WORD_BITS);
80006240:	2612001f 	addiu	s2,s0,31
80006244:	00129142 	srl	s2,s2,0x5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:29
	WORD_TYPE *map;
	if ((map = kmalloc(sizeof(WORD_TYPE) * nwords)) == NULL) {
80006248:	00123080 	sll	a2,s2,0x2
8000624c:	00c02021 	move	a0,a2
80006250:	0c005486 	jal	80015218 <kmalloc>
80006254:	afa60010 	sw	a2,16(sp)
80006258:	10400022 	beqz	v0,800062e4 <bitmap_create+0xe0>
8000625c:	8fa60010 	lw	a2,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:34
		kfree(bitmap);
		return NULL;
	}

	bitmap->nbits = nbits, bitmap->nwords = nwords;
80006260:	ae300000 	sw	s0,0(s1)
80006264:	ae320004 	sw	s2,4(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:35
	bitmap->map = memset(map, 0xFF, sizeof(WORD_TYPE) * nwords);
80006268:	00402021 	move	a0,v0
8000626c:	0c005c52 	jal	80017148 <memset>
80006270:	240500ff 	li	a1,255
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:38

	/* mark any leftover bits at the end in use(0) */
	if (nbits != nwords * WORD_BITS) {
80006274:	00121940 	sll	v1,s2,0x5
80006278:	10700013 	beq	v1,s0,800062c8 <bitmap_create+0xc4>
8000627c:	ae220008 	sw	v0,8(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:41
		uint32_t ix = nwords - 1, overbits = nbits - ix * WORD_BITS;

		assert(nbits / WORD_BITS == ix);
80006280:	00101942 	srl	v1,s0,0x5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:39
	bitmap->nbits = nbits, bitmap->nwords = nwords;
	bitmap->map = memset(map, 0xFF, sizeof(WORD_TYPE) * nwords);

	/* mark any leftover bits at the end in use(0) */
	if (nbits != nwords * WORD_BITS) {
		uint32_t ix = nwords - 1, overbits = nbits - ix * WORD_BITS;
80006284:	2652ffff 	addiu	s2,s2,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:41

		assert(nbits / WORD_BITS == ix);
80006288:	1472002a 	bne	v1,s2,80006334 <bitmap_create+0x130>
8000628c:	00032140 	sll	a0,v1,0x5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:39
	bitmap->nbits = nbits, bitmap->nwords = nwords;
	bitmap->map = memset(map, 0xFF, sizeof(WORD_TYPE) * nwords);

	/* mark any leftover bits at the end in use(0) */
	if (nbits != nwords * WORD_BITS) {
		uint32_t ix = nwords - 1, overbits = nbits - ix * WORD_BITS;
80006290:	02048023 	subu	s0,s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:42

		assert(nbits / WORD_BITS == ix);
		assert(overbits > 0 && overbits < WORD_BITS);
80006294:	2604ffff 	addiu	a0,s0,-1
80006298:	2c84001f 	sltiu	a0,a0,31
8000629c:	1080001d 	beqz	a0,80006314 <bitmap_create+0x110>
800062a0:	00031880 	sll	v1,v1,0x2
800062a4:	00431021 	addu	v0,v0,v1
800062a8:	8c430000 	lw	v1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:45

		for (; overbits < WORD_BITS; overbits++) {
			bitmap->map[ix] ^= (1 << overbits);
800062ac:	24060001 	li	a2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:44
		uint32_t ix = nwords - 1, overbits = nbits - ix * WORD_BITS;

		assert(nbits / WORD_BITS == ix);
		assert(overbits > 0 && overbits < WORD_BITS);

		for (; overbits < WORD_BITS; overbits++) {
800062b0:	24050020 	li	a1,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:45
			bitmap->map[ix] ^= (1 << overbits);
800062b4:	02062004 	sllv	a0,a2,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:44
		uint32_t ix = nwords - 1, overbits = nbits - ix * WORD_BITS;

		assert(nbits / WORD_BITS == ix);
		assert(overbits > 0 && overbits < WORD_BITS);

		for (; overbits < WORD_BITS; overbits++) {
800062b8:	26100001 	addiu	s0,s0,1
800062bc:	1605fffd 	bne	s0,a1,800062b4 <bitmap_create+0xb0>
800062c0:	00641826 	xor	v1,v1,a0
800062c4:	ac430000 	sw	v1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:49
			bitmap->map[ix] ^= (1 << overbits);
		}
	}
	return bitmap;
}
800062c8:	8fbf0024 	lw	ra,36(sp)
800062cc:	02201021 	move	v0,s1
800062d0:	8fb20020 	lw	s2,32(sp)
800062d4:	8fb1001c 	lw	s1,28(sp)
800062d8:	8fb00018 	lw	s0,24(sp)
800062dc:	03e00008 	jr	ra
800062e0:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:30
	}

	uint32_t nwords = ROUNDUP_DIV(nbits, WORD_BITS);
	WORD_TYPE *map;
	if ((map = kmalloc(sizeof(WORD_TYPE) * nwords)) == NULL) {
		kfree(bitmap);
800062e4:	0c0054b1 	jal	800152c4 <kfree>
800062e8:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:31
		return NULL;
800062ec:	080018b2 	j	800062c8 <bitmap_create+0xc4>
800062f0:	00008821 	move	s1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:20
};

struct bitmap *bitmap_create(uint32_t nbits)
{
	static_assert(WORD_BITS != 0);
	assert(nbits != 0 && nbits + WORD_BITS > nbits);
800062f4:	3c048002 	lui	a0,0x8002
800062f8:	3c068002 	lui	a2,0x8002
800062fc:	3c078002 	lui	a3,0x8002
80006300:	24841d88 	addiu	a0,a0,7560
80006304:	24050014 	li	a1,20
80006308:	24c60e28 	addiu	a2,a2,3624
8000630c:	0c006b0b 	jal	8001ac2c <__panic>
80006310:	24e71dac 	addiu	a3,a3,7596
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:42
	/* mark any leftover bits at the end in use(0) */
	if (nbits != nwords * WORD_BITS) {
		uint32_t ix = nwords - 1, overbits = nbits - ix * WORD_BITS;

		assert(nbits / WORD_BITS == ix);
		assert(overbits > 0 && overbits < WORD_BITS);
80006314:	3c048002 	lui	a0,0x8002
80006318:	3c068002 	lui	a2,0x8002
8000631c:	3c078002 	lui	a3,0x8002
80006320:	24841d88 	addiu	a0,a0,7560
80006324:	2405002a 	li	a1,42
80006328:	24c60e28 	addiu	a2,a2,3624
8000632c:	0c006b0b 	jal	8001ac2c <__panic>
80006330:	24e71dec 	addiu	a3,a3,7660
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:41

	/* mark any leftover bits at the end in use(0) */
	if (nbits != nwords * WORD_BITS) {
		uint32_t ix = nwords - 1, overbits = nbits - ix * WORD_BITS;

		assert(nbits / WORD_BITS == ix);
80006334:	3c048002 	lui	a0,0x8002
80006338:	3c068002 	lui	a2,0x8002
8000633c:	3c078002 	lui	a3,0x8002
80006340:	24841d88 	addiu	a0,a0,7560
80006344:	24050029 	li	a1,41
80006348:	24c60e28 	addiu	a2,a2,3624
8000634c:	0c006b0b 	jal	8001ac2c <__panic>
80006350:	24e71dd4 	addiu	a3,a3,7636

80006354 <bitmap_alloc>:
bitmap_alloc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:54
}

int bitmap_alloc(struct bitmap *bitmap, uint32_t * index_store)
{
	WORD_TYPE *map = bitmap->map;
	uint32_t ix, offset, nwords = bitmap->nwords;
80006354:	8c820004 	lw	v0,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:52
	}
	return bitmap;
}

int bitmap_alloc(struct bitmap *bitmap, uint32_t * index_store)
{
80006358:	27bdffe8 	addiu	sp,sp,-24
8000635c:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:55
	WORD_TYPE *map = bitmap->map;
	uint32_t ix, offset, nwords = bitmap->nwords;
	for (ix = 0; ix < nwords; ix++) {
80006360:	1040000d 	beqz	v0,80006398 <bitmap_alloc+0x44>
80006364:	8c870008 	lw	a3,8(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:56
		if (map[ix] != 0) {
80006368:	8ce60000 	lw	a2,0(a3)
8000636c:	14c0000e 	bnez	a2,800063a8 <bitmap_alloc+0x54>
80006370:	24e30004 	addiu	v1,a3,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:55

int bitmap_alloc(struct bitmap *bitmap, uint32_t * index_store)
{
	WORD_TYPE *map = bitmap->map;
	uint32_t ix, offset, nwords = bitmap->nwords;
	for (ix = 0; ix < nwords; ix++) {
80006374:	080018e3 	j	8000638c <bitmap_alloc+0x38>
80006378:	00002021 	move	a0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:56
		if (map[ix] != 0) {
8000637c:	24630004 	addiu	v1,v1,4
80006380:	8c66fffc 	lw	a2,-4(v1)
80006384:	54c0000a 	bnezl	a2,800063b0 <bitmap_alloc+0x5c>
80006388:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:55

int bitmap_alloc(struct bitmap *bitmap, uint32_t * index_store)
{
	WORD_TYPE *map = bitmap->map;
	uint32_t ix, offset, nwords = bitmap->nwords;
	for (ix = 0; ix < nwords; ix++) {
8000638c:	24840001 	addiu	a0,a0,1
80006390:	5482fffa 	bnel	a0,v0,8000637c <bitmap_alloc+0x28>
80006394:	00603821 	move	a3,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:69
			}
			assert(0);
		}
	}
	return -E_NO_MEM;
}
80006398:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:68
				}
			}
			assert(0);
		}
	}
	return -E_NO_MEM;
8000639c:	2402fff4 	li	v0,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:69
}
800063a0:	03e00008 	jr	ra
800063a4:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:55

int bitmap_alloc(struct bitmap *bitmap, uint32_t * index_store)
{
	WORD_TYPE *map = bitmap->map;
	uint32_t ix, offset, nwords = bitmap->nwords;
	for (ix = 0; ix < nwords; ix++) {
800063a8:	00002021 	move	a0,zero
800063ac:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:58
		if (map[ix] != 0) {
			for (offset = 0; offset < WORD_BITS; offset++) {
				WORD_TYPE mask = (1 << offset);
800063b0:	24090001 	li	t1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:57
{
	WORD_TYPE *map = bitmap->map;
	uint32_t ix, offset, nwords = bitmap->nwords;
	for (ix = 0; ix < nwords; ix++) {
		if (map[ix] != 0) {
			for (offset = 0; offset < WORD_BITS; offset++) {
800063b4:	080018f1 	j	800063c4 <bitmap_alloc+0x70>
800063b8:	240a0020 	li	t2,32
800063bc:	504a000e 	beql	v0,t2,800063f8 <bitmap_alloc+0xa4>
800063c0:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:58
				WORD_TYPE mask = (1 << offset);
800063c4:	00491804 	sllv	v1,t1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:59
				if (map[ix] & mask) {
800063c8:	00664024 	and	t0,v1,a2
800063cc:	5100fffb 	beqzl	t0,800063bc <bitmap_alloc+0x68>
800063d0:	24420001 	addiu	v0,v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:69
			}
			assert(0);
		}
	}
	return -E_NO_MEM;
}
800063d4:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:61
		if (map[ix] != 0) {
			for (offset = 0; offset < WORD_BITS; offset++) {
				WORD_TYPE mask = (1 << offset);
				if (map[ix] & mask) {
					map[ix] ^= mask;
					*index_store = ix * WORD_BITS + offset;
800063d8:	00042140 	sll	a0,a0,0x5
800063dc:	00442021 	addu	a0,v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:60
	for (ix = 0; ix < nwords; ix++) {
		if (map[ix] != 0) {
			for (offset = 0; offset < WORD_BITS; offset++) {
				WORD_TYPE mask = (1 << offset);
				if (map[ix] & mask) {
					map[ix] ^= mask;
800063e0:	00663026 	xor	a2,v1,a2
800063e4:	ace60000 	sw	a2,0(a3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:62
					*index_store = ix * WORD_BITS + offset;
					return 0;
800063e8:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:61
		if (map[ix] != 0) {
			for (offset = 0; offset < WORD_BITS; offset++) {
				WORD_TYPE mask = (1 << offset);
				if (map[ix] & mask) {
					map[ix] ^= mask;
					*index_store = ix * WORD_BITS + offset;
800063ec:	aca40000 	sw	a0,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:69
			}
			assert(0);
		}
	}
	return -E_NO_MEM;
}
800063f0:	03e00008 	jr	ra
800063f4:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:65
					map[ix] ^= mask;
					*index_store = ix * WORD_BITS + offset;
					return 0;
				}
			}
			assert(0);
800063f8:	3c068002 	lui	a2,0x8002
800063fc:	3c078002 	lui	a3,0x8002
80006400:	24841d88 	addiu	a0,a0,7560
80006404:	24050041 	li	a1,65
80006408:	24c60e28 	addiu	a2,a2,3624
8000640c:	0c006b0b 	jal	8001ac2c <__panic>
80006410:	24e7242c 	addiu	a3,a3,9260

80006414 <bitmap_test>:
bitmap_translate():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:75

static void
bitmap_translate(struct bitmap *bitmap, uint32_t index, WORD_TYPE ** word,
		 WORD_TYPE * mask)
{
	assert(index < bitmap->nbits);
80006414:	8c830000 	lw	v1,0(a0)
bitmap_test():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:82
	*word = bitmap->map + ix;
	*mask = (1 << offset);
}

bool bitmap_test(struct bitmap *bitmap, uint32_t index)
{
80006418:	27bdffe8 	addiu	sp,sp,-24
bitmap_translate():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:75

static void
bitmap_translate(struct bitmap *bitmap, uint32_t index, WORD_TYPE ** word,
		 WORD_TYPE * mask)
{
	assert(index < bitmap->nbits);
8000641c:	00a3182b 	sltu	v1,a1,v1
80006420:	1060000c 	beqz	v1,80006454 <bitmap_test+0x40>
80006424:	afbf0014 	sw	ra,20(sp)
bitmap_test():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:85

bool bitmap_test(struct bitmap *bitmap, uint32_t index)
{
	WORD_TYPE *word, mask;
	bitmap_translate(bitmap, index, &word, &mask);
	return (*word & mask);
80006428:	8c830008 	lw	v1,8(a0)
bitmap_translate():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:76
static void
bitmap_translate(struct bitmap *bitmap, uint32_t index, WORD_TYPE ** word,
		 WORD_TYPE * mask)
{
	assert(index < bitmap->nbits);
	uint32_t ix = index / WORD_BITS, offset = index % WORD_BITS;
8000642c:	00051142 	srl	v0,a1,0x5
bitmap_test():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:85

bool bitmap_test(struct bitmap *bitmap, uint32_t index)
{
	WORD_TYPE *word, mask;
	bitmap_translate(bitmap, index, &word, &mask);
	return (*word & mask);
80006430:	00021080 	sll	v0,v0,0x2
80006434:	00621021 	addu	v0,v1,v0
80006438:	8c430000 	lw	v1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:86
}
8000643c:	8fbf0014 	lw	ra,20(sp)
bitmap_translate():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:78
		 WORD_TYPE * mask)
{
	assert(index < bitmap->nbits);
	uint32_t ix = index / WORD_BITS, offset = index % WORD_BITS;
	*word = bitmap->map + ix;
	*mask = (1 << offset);
80006440:	24020001 	li	v0,1
80006444:	00a22804 	sllv	a1,v0,a1
bitmap_test():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:86
bool bitmap_test(struct bitmap *bitmap, uint32_t index)
{
	WORD_TYPE *word, mask;
	bitmap_translate(bitmap, index, &word, &mask);
	return (*word & mask);
}
80006448:	00a31024 	and	v0,a1,v1
8000644c:	03e00008 	jr	ra
80006450:	27bd0018 	addiu	sp,sp,24
bitmap_translate():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:75

static void
bitmap_translate(struct bitmap *bitmap, uint32_t index, WORD_TYPE ** word,
		 WORD_TYPE * mask)
{
	assert(index < bitmap->nbits);
80006454:	0c007f48 	jal	8001fd20 <bitmap_translate.part.0>
80006458:	00000000 	nop

8000645c <bitmap_free>:
8000645c:	8c820000 	lw	v0,0(a0)
bitmap_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:89
	bitmap_translate(bitmap, index, &word, &mask);
	return (*word & mask);
}

void bitmap_free(struct bitmap *bitmap, uint32_t index)
{
80006460:	27bdffe8 	addiu	sp,sp,-24
bitmap_translate():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:75

static void
bitmap_translate(struct bitmap *bitmap, uint32_t index, WORD_TYPE ** word,
		 WORD_TYPE * mask)
{
	assert(index < bitmap->nbits);
80006464:	00a2102b 	sltu	v0,a1,v0
80006468:	1040000f 	beqz	v0,800064a8 <bitmap_free+0x4c>
8000646c:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:77
	uint32_t ix = index / WORD_BITS, offset = index % WORD_BITS;
	*word = bitmap->map + ix;
80006470:	8c830008 	lw	v1,8(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:76
static void
bitmap_translate(struct bitmap *bitmap, uint32_t index, WORD_TYPE ** word,
		 WORD_TYPE * mask)
{
	assert(index < bitmap->nbits);
	uint32_t ix = index / WORD_BITS, offset = index % WORD_BITS;
80006474:	00051142 	srl	v0,a1,0x5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:77
	*word = bitmap->map + ix;
80006478:	00021080 	sll	v0,v0,0x2
8000647c:	00621021 	addu	v0,v1,v0
bitmap_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:92

void bitmap_free(struct bitmap *bitmap, uint32_t index)
{
	WORD_TYPE *word, mask;
	bitmap_translate(bitmap, index, &word, &mask);
	assert(!(*word & mask));
80006480:	8c430000 	lw	v1,0(v0)
bitmap_translate():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:78
		 WORD_TYPE * mask)
{
	assert(index < bitmap->nbits);
	uint32_t ix = index / WORD_BITS, offset = index % WORD_BITS;
	*word = bitmap->map + ix;
	*mask = (1 << offset);
80006484:	24040001 	li	a0,1
80006488:	00a42804 	sllv	a1,a0,a1
bitmap_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:92

void bitmap_free(struct bitmap *bitmap, uint32_t index)
{
	WORD_TYPE *word, mask;
	bitmap_translate(bitmap, index, &word, &mask);
	assert(!(*word & mask));
8000648c:	00a32024 	and	a0,a1,v1
80006490:	14800007 	bnez	a0,800064b0 <bitmap_free+0x54>
80006494:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:93
	*word |= mask;
80006498:	00a32825 	or	a1,a1,v1
8000649c:	ac450000 	sw	a1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:94
}
800064a0:	03e00008 	jr	ra
800064a4:	27bd0018 	addiu	sp,sp,24
bitmap_translate():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:75

static void
bitmap_translate(struct bitmap *bitmap, uint32_t index, WORD_TYPE ** word,
		 WORD_TYPE * mask)
{
	assert(index < bitmap->nbits);
800064a8:	0c007f48 	jal	8001fd20 <bitmap_translate.part.0>
800064ac:	00000000 	nop
bitmap_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:92

void bitmap_free(struct bitmap *bitmap, uint32_t index)
{
	WORD_TYPE *word, mask;
	bitmap_translate(bitmap, index, &word, &mask);
	assert(!(*word & mask));
800064b0:	3c048002 	lui	a0,0x8002
800064b4:	3c068002 	lui	a2,0x8002
800064b8:	3c078002 	lui	a3,0x8002
800064bc:	24841d88 	addiu	a0,a0,7560
800064c0:	2405005c 	li	a1,92
800064c4:	24c60e28 	addiu	a2,a2,3624
800064c8:	0c006b0b 	jal	8001ac2c <__panic>
800064cc:	24e71e14 	addiu	a3,a3,7700

800064d0 <bitmap_destroy>:
bitmap_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:97
	*word |= mask;
}

void bitmap_destroy(struct bitmap *bitmap)
{
800064d0:	27bdffe8 	addiu	sp,sp,-24
800064d4:	afb00010 	sw	s0,16(sp)
800064d8:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:98
	kfree(bitmap->map);
800064dc:	8c840008 	lw	a0,8(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:97
	assert(!(*word & mask));
	*word |= mask;
}

void bitmap_destroy(struct bitmap *bitmap)
{
800064e0:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:98
	kfree(bitmap->map);
800064e4:	0c0054b1 	jal	800152c4 <kfree>
800064e8:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:99
	kfree(bitmap);
800064ec:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:100
}
800064f0:	8fbf0014 	lw	ra,20(sp)
800064f4:	8fb00010 	lw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:99
}

void bitmap_destroy(struct bitmap *bitmap)
{
	kfree(bitmap->map);
	kfree(bitmap);
800064f8:	080054b1 	j	800152c4 <kfree>
800064fc:	27bd0018 	addiu	sp,sp,24

80006500 <bitmap_getdata>:
bitmap_getdata():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:104
}

void *bitmap_getdata(struct bitmap *bitmap, size_t * len_store)
{
	if (len_store != NULL) {
80006500:	50a00006 	beqzl	a1,8000651c <bitmap_getdata+0x1c>
80006504:	8c820008 	lw	v0,8(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:105
		*len_store = sizeof(WORD_TYPE) * bitmap->nwords;
80006508:	8c820004 	lw	v0,4(a0)
8000650c:	00021080 	sll	v0,v0,0x2
80006510:	aca20000 	sw	v0,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:108
	}
	return bitmap->map;
}
80006514:	03e00008 	jr	ra
80006518:	8c820008 	lw	v0,8(a0)
8000651c:	03e00008 	jr	ra
80006520:	00000000 	nop

80006524 <sfs_init>:
sfs_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs.c:10
#include <vfs.h>

void sfs_init(void)
{
	int ret;
	if ((ret = register_filesystem("sfs", sfs_mount)) != 0) {
80006524:	3c048002 	lui	a0,0x8002
80006528:	3c058000 	lui	a1,0x8000
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs.c:8
#include <error.h>
#include <assert.h>
#include <vfs.h>

void sfs_init(void)
{
8000652c:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs.c:10
	int ret;
	if ((ret = register_filesystem("sfs", sfs_mount)) != 0) {
80006530:	24841e24 	addiu	a0,a0,7716
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs.c:8
#include <error.h>
#include <assert.h>
#include <vfs.h>

void sfs_init(void)
{
80006534:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs.c:10
	int ret;
	if ((ret = register_filesystem("sfs", sfs_mount)) != 0) {
80006538:	0c00123a 	jal	800048e8 <register_filesystem>
8000653c:	24a56cf8 	addiu	a1,a1,27896
80006540:	14400007 	bnez	v0,80006560 <sfs_init+0x3c>
80006544:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs.c:13
		panic("failed: sfs: register_filesystem: %e.\n", ret);
	}
	if ((ret = sfs_mount("disk0")) != 0) {
80006548:	0c001b3e 	jal	80006cf8 <sfs_mount>
8000654c:	248411b0 	addiu	a0,a0,4528
80006550:	1440000a 	bnez	v0,8000657c <sfs_init+0x58>
80006554:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs.c:16
		panic("failed: sfs: sfs_mount: %e.\n", ret);
	}
}
80006558:	03e00008 	jr	ra
8000655c:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs.c:11

void sfs_init(void)
{
	int ret;
	if ((ret = register_filesystem("sfs", sfs_mount)) != 0) {
		panic("failed: sfs: register_filesystem: %e.\n", ret);
80006560:	3c048002 	lui	a0,0x8002
80006564:	3c068002 	lui	a2,0x8002
80006568:	24841e28 	addiu	a0,a0,7720
8000656c:	2405000b 	li	a1,11
80006570:	24c61e30 	addiu	a2,a2,7728
80006574:	0c006b0b 	jal	8001ac2c <__panic>
80006578:	00403821 	move	a3,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs.c:14
	}
	if ((ret = sfs_mount("disk0")) != 0) {
		panic("failed: sfs: sfs_mount: %e.\n", ret);
8000657c:	3c048002 	lui	a0,0x8002
80006580:	3c068002 	lui	a2,0x8002
80006584:	24841e28 	addiu	a0,a0,7720
80006588:	2405000e 	li	a1,14
8000658c:	24c61e58 	addiu	a2,a2,7768
80006590:	0c006b0b 	jal	8001ac2c <__panic>
80006594:	00403821 	move	a3,v0

80006598 <sfs_do_mount>:
sfs_do_mount():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:192
 * (Note: for all intents and purposes here, "sector" and
 * "block" are interchangeable terms. Technically a filesystem
 * block may be composed of several hardware sectors, but we
 * don't do that in sfs.)
 */
	if (dev->d_blocksize != SFS_BLKSIZE) {
80006598:	8c820004 	lw	v0,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:175
 * filesystem with the same name mounted at once, or two filesystems
 * mounted on the same device at once.
 */

static int sfs_do_mount(struct device *dev, struct fs **fs_store)
{
8000659c:	27bdff98 	addiu	sp,sp,-104
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:192
 * (Note: for all intents and purposes here, "sector" and
 * "block" are interchangeable terms. Technically a filesystem
 * block may be composed of several hardware sectors, but we
 * don't do that in sfs.)
 */
	if (dev->d_blocksize != SFS_BLKSIZE) {
800065a0:	24031000 	li	v1,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:175
 * filesystem with the same name mounted at once, or two filesystems
 * mounted on the same device at once.
 */

static int sfs_do_mount(struct device *dev, struct fs **fs_store)
{
800065a4:	afb7005c 	sw	s7,92(sp)
800065a8:	afb00040 	sw	s0,64(sp)
800065ac:	afbf0064 	sw	ra,100(sp)
800065b0:	afbe0060 	sw	s8,96(sp)
800065b4:	afb60058 	sw	s6,88(sp)
800065b8:	afb50054 	sw	s5,84(sp)
800065bc:	afb40050 	sw	s4,80(sp)
800065c0:	afb3004c 	sw	s3,76(sp)
800065c4:	afb20048 	sw	s2,72(sp)
800065c8:	afb10044 	sw	s1,68(sp)
800065cc:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:192
 * (Note: for all intents and purposes here, "sector" and
 * "block" are interchangeable terms. Technically a filesystem
 * block may be composed of several hardware sectors, but we
 * don't do that in sfs.)
 */
	if (dev->d_blocksize != SFS_BLKSIZE) {
800065d0:	1443008b 	bne	v0,v1,80006800 <sfs_do_mount+0x268>
800065d4:	00a0b821 	move	s7,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:198
		return -E_NA_DEV;
	}

	/* allocate fs structure */
	struct fs *fs;
	if ((fs = alloc_fs(sfs)) == NULL) {
800065d8:	0c0011bf 	jal	800046fc <__alloc_fs>
800065dc:	24045679 	li	a0,22137
800065e0:	104000cf 	beqz	v0,80006920 <sfs_do_mount+0x388>
800065e4:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:203
		return -E_NO_MEM;
	}

	/* get sfs from fs.fs_info.__sfs_info */
	struct sfs_fs *sfs = fsop_info(fs, sfs);
800065e8:	8c430084 	lw	v1,132(v0)
800065ec:	24025679 	li	v0,22137
800065f0:	146200cd 	bne	v1,v0,80006928 <sfs_do_mount+0x390>
800065f4:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:204
	sfs->dev = dev;
800065f8:	ae30002c 	sw	s0,44(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:209

	int ret = -E_NO_MEM;

	void *sfs_buffer;
	if ((sfs->sfs_buffer = sfs_buffer = kmalloc(SFS_BLKSIZE)) == NULL) {
800065fc:	0c005486 	jal	80015218 <kmalloc>
80006600:	24041000 	li	a0,4096
80006604:	00409021 	move	s2,v0
80006608:	1040008f 	beqz	v0,80006848 <sfs_do_mount+0x2b0>
8000660c:	ae220038 	sw	v0,56(s1)
sfs_init_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:138
	return ret;
}

static int sfs_init_read(struct device *dev, uint32_t blkno, void *blk_buffer)
{
	struct iobuf __iob, *iob =
80006610:	27a4001c 	addiu	a0,sp,28
80006614:	00402821 	move	a1,v0
80006618:	24061000 	li	a2,4096
8000661c:	0c003348 	jal	8000cd20 <iobuf_init>
80006620:	00003821 	move	a3,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:140
	    iobuf_init(&__iob, blk_buffer, SFS_BLKSIZE, blkno * SFS_BLKSIZE);
	return dop_io(dev, iob, 0);
80006624:	8e030028 	lw	v1,40(s0)
80006628:	02002021 	move	a0,s0
8000662c:	00402821 	move	a1,v0
80006630:	0060f809 	jalr	v1
80006634:	00003021 	move	a2,zero
sfs_do_mount():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:214
	if ((sfs->sfs_buffer = sfs_buffer = kmalloc(SFS_BLKSIZE)) == NULL) {
		goto failed_cleanup_fs;
	}

	/* load and check sfs's superblock */
	if ((ret = sfs_init_read(dev, SFS_BLKN_SUPER, sfs_buffer)) != 0) {
80006638:	14400009 	bnez	v0,80006660 <sfs_do_mount+0xc8>
8000663c:	00409821 	move	s3,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:223
	ret = -E_INVAL;

	struct sfs_super *super = sfs_buffer;

	/* Make some simple sanity checks */
	if (super->magic != SFS_MAGIC) {
80006640:	8e450000 	lw	a1,0(s2)
80006644:	3c062f8d 	lui	a2,0x2f8d
80006648:	34c6be2a 	ori	a2,a2,0xbe2a
8000664c:	10a60015 	beq	a1,a2,800066a4 <sfs_do_mount+0x10c>
80006650:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:225
		kprintf
		    ("sfs: wrong magic in superblock. (%08x should be %08x).\n",
80006654:	0c007a9e 	jal	8001ea78 <kprintf>
80006658:	24841eb0 	addiu	a0,a0,7856
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:218
	/* load and check sfs's superblock */
	if ((ret = sfs_init_read(dev, SFS_BLKN_SUPER, sfs_buffer)) != 0) {
		goto failed_cleanup_sfs_buffer;
	}

	ret = -E_INVAL;
8000665c:	2413ffea 	li	s3,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:297
failed_cleanup_freemap:
	bitmap_destroy(freemap);
failed_cleanup_hash_list:
	kfree(hash_list);
failed_cleanup_sfs_buffer:
	kfree(sfs_buffer);
80006660:	0c0054b1 	jal	800152c4 <kfree>
80006664:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:299
failed_cleanup_fs:
	kfree(fs);
80006668:	0c0054b1 	jal	800152c4 <kfree>
8000666c:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:301
	return ret;
}
80006670:	8fbf0064 	lw	ra,100(sp)
80006674:	02601021 	move	v0,s3
80006678:	8fbe0060 	lw	s8,96(sp)
8000667c:	8fb7005c 	lw	s7,92(sp)
80006680:	8fb60058 	lw	s6,88(sp)
80006684:	8fb50054 	lw	s5,84(sp)
80006688:	8fb40050 	lw	s4,80(sp)
8000668c:	8fb3004c 	lw	s3,76(sp)
80006690:	8fb20048 	lw	s2,72(sp)
80006694:	8fb10044 	lw	s1,68(sp)
80006698:	8fb00040 	lw	s0,64(sp)
8000669c:	03e00008 	jr	ra
800066a0:	27bd0068 	addiu	sp,sp,104
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:229
		kprintf
		    ("sfs: wrong magic in superblock. (%08x should be %08x).\n",
		     super->magic, SFS_MAGIC);
		goto failed_cleanup_sfs_buffer;
	}
	if (super->blocks > dev->d_blocks) {
800066a4:	8e450004 	lw	a1,4(s2)
800066a8:	8e060000 	lw	a2,0(s0)
800066ac:	00c5102b 	sltu	v0,a2,a1
800066b0:	14400061 	bnez	v0,80006838 <sfs_do_mount+0x2a0>
800066b4:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:234
		kprintf("sfs: fs has %u blocks, device has %u blocks.\n",
			super->blocks, dev->d_blocks);
		goto failed_cleanup_sfs_buffer;
	}
	super->info[SFS_MAX_INFO_LEN] = '\0';
800066b8:	a240002b 	sb	zero,43(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:235
	sfs->super = *super;
800066bc:	02401821 	move	v1,s2
800066c0:	02201021 	move	v0,s1
800066c4:	26440020 	addiu	a0,s2,32
800066c8:	8c680000 	lw	t0,0(v1)
800066cc:	8c670004 	lw	a3,4(v1)
800066d0:	8c660008 	lw	a2,8(v1)
800066d4:	8c65000c 	lw	a1,12(v1)
800066d8:	24630010 	addiu	v1,v1,16
800066dc:	ac480000 	sw	t0,0(v0)
800066e0:	ac470004 	sw	a3,4(v0)
800066e4:	ac460008 	sw	a2,8(v0)
800066e8:	ac45000c 	sw	a1,12(v0)
800066ec:	1464fff6 	bne	v1,a0,800066c8 <sfs_do_mount+0x130>
800066f0:	24420010 	addiu	v0,v0,16
800066f4:	8c660000 	lw	a2,0(v1)
800066f8:	8c650004 	lw	a1,4(v1)
800066fc:	8c630008 	lw	v1,8(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:243

	uint32_t i;

	/* alloc and initialize hash list */
	list_entry_t *hash_list;
	if ((sfs->hash_list = hash_list =
80006700:	24042000 	li	a0,8192
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:235
		kprintf("sfs: fs has %u blocks, device has %u blocks.\n",
			super->blocks, dev->d_blocks);
		goto failed_cleanup_sfs_buffer;
	}
	super->info[SFS_MAX_INFO_LEN] = '\0';
	sfs->super = *super;
80006704:	ac460000 	sw	a2,0(v0)
80006708:	ac450004 	sw	a1,4(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:243

	uint32_t i;

	/* alloc and initialize hash list */
	list_entry_t *hash_list;
	if ((sfs->hash_list = hash_list =
8000670c:	0c005486 	jal	80015218 <kmalloc>
80006710:	ac430008 	sw	v1,8(v0)
80006714:	afa20034 	sw	v0,52(sp)
80006718:	1040007d 	beqz	v0,80006910 <sfs_do_mount+0x378>
8000671c:	ae220080 	sw	v0,128(s1)
80006720:	24030400 	li	v1,1024
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
 * list_init - initialize a new entry
 * @elm:        new entry to be initialized
 * */
static inline void list_init(list_entry_t * elm)
{
	elm->prev = elm->next = elm;
80006724:	2463ffff 	addiu	v1,v1,-1
80006728:	ac420004 	sw	v0,4(v0)
8000672c:	ac420000 	sw	v0,0(v0)
sfs_do_mount():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:247
	     kmalloc(sizeof(list_entry_t) * SFS_HLIST_SIZE)) == NULL) {
		goto failed_cleanup_sfs_buffer;
	}
	for (i = 0; i < SFS_HLIST_SIZE; i++) {
80006730:	1460fffc 	bnez	v1,80006724 <sfs_do_mount+0x18c>
80006734:	24420008 	addiu	v0,v0,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:253
		list_init(hash_list + i);
	}

	/* load and check freemap (free space bitmap in disk) */
	struct bitmap *freemap;
	uint32_t freemap_size_nbits = sfs_freemap_bits(super);
80006738:	8e420004 	lw	v0,4(s2)
8000673c:	24427fff 	addiu	v0,v0,32767
80006740:	30437fff 	andi	v1,v0,0x7fff
80006744:	00431823 	subu	v1,v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:254
	if ((sfs->freemap = freemap =
80006748:	00602021 	move	a0,v1
8000674c:	0c001881 	jal	80006204 <bitmap_create>
80006750:	afa30030 	sw	v1,48(sp)
80006754:	0040f021 	move	s8,v0
80006758:	1040006f 	beqz	v0,80006918 <sfs_do_mount+0x380>
8000675c:	ae220030 	sw	v0,48(s1)
sfs_init_freemap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:148
static int
sfs_init_freemap(struct device *dev, struct bitmap *freemap, uint32_t blkno,
		 uint32_t nblks, void *blk_buffer)
{
	size_t len;
	void *data = bitmap_getdata(freemap, &len);
80006760:	00402021 	move	a0,v0
80006764:	27a50018 	addiu	a1,sp,24
80006768:	0c001940 	jal	80006500 <bitmap_getdata>
8000676c:	8e540004 	lw	s4,4(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:149
	assert(data != NULL && len == nblks * SFS_BLKSIZE);
80006770:	10400074 	beqz	v0,80006944 <sfs_do_mount+0x3ac>
80006774:	0040a821 	move	s5,v0
sfs_do_mount():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:258
	uint32_t freemap_size_nbits = sfs_freemap_bits(super);
	if ((sfs->freemap = freemap =
	     bitmap_create(freemap_size_nbits)) == NULL) {
		goto failed_cleanup_hash_list;
	}
	uint32_t freemap_size_nblks = sfs_freemap_blocks(super);
80006778:	26947fff 	addiu	s4,s4,32767
sfs_init_freemap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:149
sfs_init_freemap(struct device *dev, struct bitmap *freemap, uint32_t blkno,
		 uint32_t nblks, void *blk_buffer)
{
	size_t len;
	void *data = bitmap_getdata(freemap, &len);
	assert(data != NULL && len == nblks * SFS_BLKSIZE);
8000677c:	8fa20018 	lw	v0,24(sp)
sfs_do_mount():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:258
	uint32_t freemap_size_nbits = sfs_freemap_bits(super);
	if ((sfs->freemap = freemap =
	     bitmap_create(freemap_size_nbits)) == NULL) {
		goto failed_cleanup_hash_list;
	}
	uint32_t freemap_size_nblks = sfs_freemap_blocks(super);
80006780:	0014a3c2 	srl	s4,s4,0xf
sfs_init_freemap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:149
sfs_init_freemap(struct device *dev, struct bitmap *freemap, uint32_t blkno,
		 uint32_t nblks, void *blk_buffer)
{
	size_t len;
	void *data = bitmap_getdata(freemap, &len);
	assert(data != NULL && len == nblks * SFS_BLKSIZE);
80006784:	00141b00 	sll	v1,s4,0xc
80006788:	1462006f 	bne	v1,v0,80006948 <sfs_do_mount+0x3b0>
8000678c:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:150
	while (nblks != 0) {
80006790:	16800006 	bnez	s4,800067ac <sfs_do_mount+0x214>
80006794:	24162000 	li	s6,8192
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:266
			      freemap_size_nblks, sfs_buffer)) != 0) {
		goto failed_cleanup_freemap;
	}

	uint32_t blocks = sfs->super.blocks, unused_blocks = 0;
	for (i = 0; i < freemap_size_nbits; i++) {
80006798:	08001a15 	j	80006854 <sfs_do_mount+0x2bc>
8000679c:	8fa20030 	lw	v0,48(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:155
	while (nblks != 0) {
		int ret;
		if ((ret = sfs_init_read(dev, blkno, data)) != 0) {
			return ret;
		}
		blkno++, nblks--, data += SFS_BLKSIZE;
800067a0:	26b51000 	addiu	s5,s5,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:150
		 uint32_t nblks, void *blk_buffer)
{
	size_t len;
	void *data = bitmap_getdata(freemap, &len);
	assert(data != NULL && len == nblks * SFS_BLKSIZE);
	while (nblks != 0) {
800067a4:	1280002a 	beqz	s4,80006850 <sfs_do_mount+0x2b8>
800067a8:	26d61000 	addiu	s6,s6,4096
sfs_init_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:138
	return ret;
}

static int sfs_init_read(struct device *dev, uint32_t blkno, void *blk_buffer)
{
	struct iobuf __iob, *iob =
800067ac:	27a4001c 	addiu	a0,sp,28
800067b0:	02a02821 	move	a1,s5
800067b4:	24061000 	li	a2,4096
800067b8:	0c003348 	jal	8000cd20 <iobuf_init>
800067bc:	02c03821 	move	a3,s6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:140
	    iobuf_init(&__iob, blk_buffer, SFS_BLKSIZE, blkno * SFS_BLKSIZE);
	return dop_io(dev, iob, 0);
800067c0:	8e030028 	lw	v1,40(s0)
800067c4:	02002021 	move	a0,s0
800067c8:	00402821 	move	a1,v0
800067cc:	0060f809 	jalr	v1
800067d0:	00003021 	move	a2,zero
sfs_init_freemap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:152
	size_t len;
	void *data = bitmap_getdata(freemap, &len);
	assert(data != NULL && len == nblks * SFS_BLKSIZE);
	while (nblks != 0) {
		int ret;
		if ((ret = sfs_init_read(dev, blkno, data)) != 0) {
800067d4:	1040fff2 	beqz	v0,800067a0 <sfs_do_mount+0x208>
800067d8:	2694ffff 	addiu	s4,s4,-1
sfs_do_mount():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:293

	*fs_store = fs;
	return 0;

failed_cleanup_freemap:
	bitmap_destroy(freemap);
800067dc:	03c02021 	move	a0,s8
800067e0:	0c001934 	jal	800064d0 <bitmap_destroy>
800067e4:	afa20038 	sw	v0,56(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:140

static int sfs_init_read(struct device *dev, uint32_t blkno, void *blk_buffer)
{
	struct iobuf __iob, *iob =
	    iobuf_init(&__iob, blk_buffer, SFS_BLKSIZE, blkno * SFS_BLKSIZE);
	return dop_io(dev, iob, 0);
800067e8:	8fa20038 	lw	v0,56(sp)
800067ec:	00409821 	move	s3,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:295
	return 0;

failed_cleanup_freemap:
	bitmap_destroy(freemap);
failed_cleanup_hash_list:
	kfree(hash_list);
800067f0:	0c0054b1 	jal	800152c4 <kfree>
800067f4:	8fa40034 	lw	a0,52(sp)
800067f8:	08001998 	j	80006660 <sfs_do_mount+0xc8>
800067fc:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:301
failed_cleanup_sfs_buffer:
	kfree(sfs_buffer);
failed_cleanup_fs:
	kfree(fs);
	return ret;
}
80006800:	8fbf0064 	lw	ra,100(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:193
 * "block" are interchangeable terms. Technically a filesystem
 * block may be composed of several hardware sectors, but we
 * don't do that in sfs.)
 */
	if (dev->d_blocksize != SFS_BLKSIZE) {
		return -E_NA_DEV;
80006804:	2413fff0 	li	s3,-16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:301
failed_cleanup_sfs_buffer:
	kfree(sfs_buffer);
failed_cleanup_fs:
	kfree(fs);
	return ret;
}
80006808:	02601021 	move	v0,s3
8000680c:	8fbe0060 	lw	s8,96(sp)
80006810:	8fb7005c 	lw	s7,92(sp)
80006814:	8fb60058 	lw	s6,88(sp)
80006818:	8fb50054 	lw	s5,84(sp)
8000681c:	8fb40050 	lw	s4,80(sp)
80006820:	8fb3004c 	lw	s3,76(sp)
80006824:	8fb20048 	lw	s2,72(sp)
80006828:	8fb10044 	lw	s1,68(sp)
8000682c:	8fb00040 	lw	s0,64(sp)
80006830:	03e00008 	jr	ra
80006834:	27bd0068 	addiu	sp,sp,104
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:230
		    ("sfs: wrong magic in superblock. (%08x should be %08x).\n",
		     super->magic, SFS_MAGIC);
		goto failed_cleanup_sfs_buffer;
	}
	if (super->blocks > dev->d_blocks) {
		kprintf("sfs: fs has %u blocks, device has %u blocks.\n",
80006838:	0c007a9e 	jal	8001ea78 <kprintf>
8000683c:	24841ee8 	addiu	a0,a0,7912
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:232
			super->blocks, dev->d_blocks);
		goto failed_cleanup_sfs_buffer;
80006840:	08001998 	j	80006660 <sfs_do_mount+0xc8>
80006844:	2413ffea 	li	s3,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:206

	/* get sfs from fs.fs_info.__sfs_info */
	struct sfs_fs *sfs = fsop_info(fs, sfs);
	sfs->dev = dev;

	int ret = -E_NO_MEM;
80006848:	0800199a 	j	80006668 <sfs_do_mount+0xd0>
8000684c:	2413fff4 	li	s3,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:266
			      freemap_size_nblks, sfs_buffer)) != 0) {
		goto failed_cleanup_freemap;
	}

	uint32_t blocks = sfs->super.blocks, unused_blocks = 0;
	for (i = 0; i < freemap_size_nbits; i++) {
80006850:	8fa20030 	lw	v0,48(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:265
	     sfs_init_freemap(dev, freemap, SFS_BLKN_FREEMAP,
			      freemap_size_nblks, sfs_buffer)) != 0) {
		goto failed_cleanup_freemap;
	}

	uint32_t blocks = sfs->super.blocks, unused_blocks = 0;
80006854:	8e300004 	lw	s0,4(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:266
	for (i = 0; i < freemap_size_nbits; i++) {
80006858:	00009021 	move	s2,zero
8000685c:	1040000a 	beqz	v0,80006888 <sfs_do_mount+0x2f0>
80006860:	0000a021 	move	s4,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:267
		if (bitmap_test(freemap, i)) {
80006864:	02802821 	move	a1,s4
80006868:	0c001905 	jal	80006414 <bitmap_test>
8000686c:	03c02021 	move	a0,s8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:268
			unused_blocks++;
80006870:	0002102b 	sltu	v0,zero,v0
80006874:	02429021 	addu	s2,s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:266
			      freemap_size_nblks, sfs_buffer)) != 0) {
		goto failed_cleanup_freemap;
	}

	uint32_t blocks = sfs->super.blocks, unused_blocks = 0;
	for (i = 0; i < freemap_size_nbits; i++) {
80006878:	8fa20030 	lw	v0,48(sp)
8000687c:	26940001 	addiu	s4,s4,1
80006880:	5682fff9 	bnel	s4,v0,80006868 <sfs_do_mount+0x2d0>
80006884:	02802821 	move	a1,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:276
	//YX you can close -O2 option to enable it
	//assert(unused_blocks == sfs->super.unused_blocks);

	/* and other fields */
	sfs->super_dirty = 0;
	sem_init(&(sfs->fs_sem), 1);
80006888:	2624003c 	addiu	a0,s1,60
8000688c:	24050001 	li	a1,1
80006890:	0c006717 	jal	80019c5c <sem_init>
80006894:	ae200034 	sw	zero,52(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:277
	sem_init(&(sfs->io_sem), 1);
80006898:	26240050 	addiu	a0,s1,80
8000689c:	0c006717 	jal	80019c5c <sem_init>
800068a0:	24050001 	li	a1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:278
	sem_init(&(sfs->mutex_sem), 1);
800068a4:	26240064 	addiu	a0,s1,100
800068a8:	0c006717 	jal	80019c5c <sem_init>
800068ac:	24050001 	li	a1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:279
	list_init(&(sfs->inode_list));
800068b0:	26220078 	addiu	v0,s1,120
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:280
	kprintf("sfs: mount: '%s' (%d/%d/%d)\n", sfs->super.info,
800068b4:	3c048002 	lui	a0,0x8002
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
800068b8:	ae22007c 	sw	v0,124(s1)
800068bc:	ae220078 	sw	v0,120(s1)
sfs_do_mount():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:280
800068c0:	24841f44 	addiu	a0,a0,8004
800068c4:	2625000c 	addiu	a1,s1,12
800068c8:	02123023 	subu	a2,s0,s2
800068cc:	02403821 	move	a3,s2
800068d0:	0c007a9e 	jal	8001ea78 <kprintf>
800068d4:	afb00010 	sw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:284
		blocks - unused_blocks, unused_blocks, blocks);

	/* Set up abstract fs calls */
	fs->fs_sync = sfs_sync;
800068d8:	3c028000 	lui	v0,0x8000
800068dc:	24426964 	addiu	v0,v0,26980
800068e0:	ae220088 	sw	v0,136(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:285
	fs->fs_get_root = sfs_get_root;
800068e4:	3c028000 	lui	v0,0x8000
800068e8:	24426c84 	addiu	v0,v0,27780
800068ec:	ae22008c 	sw	v0,140(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:286
	fs->fs_unmount = sfs_unmount;
800068f0:	3c028000 	lui	v0,0x8000
800068f4:	24426b9c 	addiu	v0,v0,27548
800068f8:	ae220090 	sw	v0,144(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:287
	fs->fs_cleanup = sfs_cleanup;
800068fc:	3c028000 	lui	v0,0x8000
80006900:	24426ae0 	addiu	v0,v0,27360
80006904:	ae220094 	sw	v0,148(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:290

	*fs_store = fs;
	return 0;
80006908:	0800199c 	j	80006670 <sfs_do_mount+0xd8>
8000690c:	aef10000 	sw	s1,0(s7)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:237
		goto failed_cleanup_sfs_buffer;
	}
	super->info[SFS_MAX_INFO_LEN] = '\0';
	sfs->super = *super;

	ret = -E_NO_MEM;
80006910:	08001998 	j	80006660 <sfs_do_mount+0xc8>
80006914:	2413fff4 	li	s3,-12
80006918:	080019fc 	j	800067f0 <sfs_do_mount+0x258>
8000691c:	2413fff4 	li	s3,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:199
	}

	/* allocate fs structure */
	struct fs *fs;
	if ((fs = alloc_fs(sfs)) == NULL) {
		return -E_NO_MEM;
80006920:	0800199c 	j	80006670 <sfs_do_mount+0xd8>
80006924:	2413fff4 	li	s3,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:203
	}

	/* get sfs from fs.fs_info.__sfs_info */
	struct sfs_fs *sfs = fsop_info(fs, sfs);
80006928:	3c068002 	lui	a2,0x8002
8000692c:	3c078002 	lui	a3,0x8002
80006930:	24841e78 	addiu	a0,a0,7800
80006934:	240500cb 	li	a1,203
80006938:	24c60e28 	addiu	a2,a2,3624
8000693c:	0c006b0b 	jal	8001ac2c <__panic>
80006940:	24e71e84 	addiu	a3,a3,7812
sfs_init_freemap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:149
sfs_init_freemap(struct device *dev, struct bitmap *freemap, uint32_t blkno,
		 uint32_t nblks, void *blk_buffer)
{
	size_t len;
	void *data = bitmap_getdata(freemap, &len);
	assert(data != NULL && len == nblks * SFS_BLKSIZE);
80006944:	3c048002 	lui	a0,0x8002
80006948:	3c068002 	lui	a2,0x8002
8000694c:	3c078002 	lui	a3,0x8002
80006950:	24841e78 	addiu	a0,a0,7800
80006954:	24050095 	li	a1,149
80006958:	24c60e28 	addiu	a2,a2,3624
8000695c:	0c006b0b 	jal	8001ac2c <__panic>
80006960:	24e71f18 	addiu	a3,a3,7960

80006964 <sfs_sync>:
sfs_sync():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:23
 * Sync routine. This is what gets invoked if you do FS_SYNC on the
 * sfs filesystem structure.
 */

static int sfs_sync(struct fs *fs)
{
80006964:	27bdffd8 	addiu	sp,sp,-40
80006968:	afb3001c 	sw	s3,28(sp)
8000696c:	afbf0024 	sw	ra,36(sp)
80006970:	afb40020 	sw	s4,32(sp)
80006974:	afb20018 	sw	s2,24(sp)
80006978:	afb10014 	sw	s1,20(sp)
8000697c:	afb00010 	sw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:24
	struct sfs_fs *sfs = fsop_info(fs, sfs);
80006980:	1080004f 	beqz	a0,80006ac0 <sfs_sync+0x15c>
80006984:	00809821 	move	s3,a0
80006988:	8c830084 	lw	v1,132(a0)
8000698c:	24025679 	li	v0,22137
80006990:	5462004c 	bnel	v1,v0,80006ac4 <sfs_sync+0x160>
80006994:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:25
	lock_sfs_fs(sfs);
80006998:	0c002c4b 	jal	8000b12c <lock_sfs_fs>
8000699c:	26710078 	addiu	s1,s3,120
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
800069a0:	8e70007c 	lw	s0,124(s3)
sfs_sync():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:57
 * similar things all over the place in ucore, so taking the
 * time to straighten it out in your mind is worthwhile.
 */
	{
		list_entry_t *list = &(sfs->inode_list), *le = list;
		while ((le = list_next(le)) != list) {
800069a4:	1230001e 	beq	s1,s0,80006a20 <sfs_sync+0xbc>
800069a8:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:58
			struct sfs_inode *sin = le2sin(le, inode_link);
800069ac:	2614ffd8 	addiu	s4,s0,-40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:59
			vop_fsync(info2node(sin, sfs_inode));
800069b0:	1280003c 	beqz	s4,80006aa4 <sfs_sync+0x140>
800069b4:	3c048002 	lui	a0,0x8002
800069b8:	8e020020 	lw	v0,32(s0)
800069bc:	1040003a 	beqz	v0,80006aa8 <sfs_sync+0x144>
800069c0:	3c068002 	lui	a2,0x8002
800069c4:	8c420018 	lw	v0,24(v0)
800069c8:	10400036 	beqz	v0,80006aa4 <sfs_sync+0x140>
800069cc:	3c128002 	lui	s2,0x8002
800069d0:	08001a7e 	j	800069f8 <sfs_sync+0x94>
800069d4:	26521fb4 	addiu	s2,s2,8116
800069d8:	12800032 	beqz	s4,80006aa4 <sfs_sync+0x140>
800069dc:	3c048002 	lui	a0,0x8002
800069e0:	8e020020 	lw	v0,32(s0)
800069e4:	10400030 	beqz	v0,80006aa8 <sfs_sync+0x144>
800069e8:	3c068002 	lui	a2,0x8002
800069ec:	8c420018 	lw	v0,24(v0)
800069f0:	1040002e 	beqz	v0,80006aac <sfs_sync+0x148>
800069f4:	3c078002 	lui	a3,0x8002
800069f8:	02802021 	move	a0,s4
800069fc:	0c0010f3 	jal	800043cc <inode_check>
80006a00:	02402821 	move	a1,s2
80006a04:	8e020020 	lw	v0,32(s0)
80006a08:	8c420018 	lw	v0,24(v0)
80006a0c:	0040f809 	jalr	v0
80006a10:	02802021 	move	a0,s4
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
80006a14:	8e100004 	lw	s0,4(s0)
sfs_sync():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:57
 * similar things all over the place in ucore, so taking the
 * time to straighten it out in your mind is worthwhile.
 */
	{
		list_entry_t *list = &(sfs->inode_list), *le = list;
		while ((le = list_next(le)) != list) {
80006a18:	5630ffef 	bnel	s1,s0,800069d8 <sfs_sync+0x74>
80006a1c:	2614ffd8 	addiu	s4,s0,-40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:62
			struct sfs_inode *sin = le2sin(le, inode_link);
			vop_fsync(info2node(sin, sfs_inode));
		}
	}
	unlock_sfs_fs(sfs);
80006a20:	0c002c51 	jal	8000b144 <unlock_sfs_fs>
80006a24:	02602021 	move	a0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:65

	int ret;
	if (sfs->super_dirty) {
80006a28:	8e630034 	lw	v1,52(s3)
80006a2c:	14600009 	bnez	v1,80006a54 <sfs_sync+0xf0>
80006a30:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:79
			sfs->super_dirty = 1;
			return ret;
		}
	}
	return 0;
}
80006a34:	8fbf0024 	lw	ra,36(sp)
80006a38:	8fb40020 	lw	s4,32(sp)
80006a3c:	8fb3001c 	lw	s3,28(sp)
80006a40:	8fb20018 	lw	s2,24(sp)
80006a44:	8fb10014 	lw	s1,20(sp)
80006a48:	8fb00010 	lw	s0,16(sp)
80006a4c:	03e00008 	jr	ra
80006a50:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:66
	}
	unlock_sfs_fs(sfs);

	int ret;
	if (sfs->super_dirty) {
		sfs->super_dirty = 0;
80006a54:	ae600034 	sw	zero,52(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:68
		/* If the superblock needs to be written, write it. */
		if ((ret = sfs_sync_super(sfs)) != 0) {
80006a58:	0c002bf4 	jal	8000afd0 <sfs_sync_super>
80006a5c:	02602021 	move	a0,s3
80006a60:	1040000a 	beqz	v0,80006a8c <sfs_sync+0x128>
80006a64:	24030001 	li	v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:74
			sfs->super_dirty = 1;
			return ret;
		}
		/* If the free block map needs to be written, write it. */
		if ((ret = sfs_sync_freemap(sfs)) != 0) {
			sfs->super_dirty = 1;
80006a68:	ae630034 	sw	v1,52(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:79
			return ret;
		}
	}
	return 0;
}
80006a6c:	8fbf0024 	lw	ra,36(sp)
80006a70:	8fb40020 	lw	s4,32(sp)
80006a74:	8fb3001c 	lw	s3,28(sp)
80006a78:	8fb20018 	lw	s2,24(sp)
80006a7c:	8fb10014 	lw	s1,20(sp)
80006a80:	8fb00010 	lw	s0,16(sp)
80006a84:	03e00008 	jr	ra
80006a88:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:73
		if ((ret = sfs_sync_super(sfs)) != 0) {
			sfs->super_dirty = 1;
			return ret;
		}
		/* If the free block map needs to be written, write it. */
		if ((ret = sfs_sync_freemap(sfs)) != 0) {
80006a8c:	0c002c0f 	jal	8000b03c <sfs_sync_freemap>
80006a90:	02602021 	move	a0,s3
80006a94:	1040ffe7 	beqz	v0,80006a34 <sfs_sync+0xd0>
80006a98:	24030001 	li	v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:74
			sfs->super_dirty = 1;
80006a9c:	08001a9b 	j	80006a6c <sfs_sync+0x108>
80006aa0:	ae630034 	sw	v1,52(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:59
 */
	{
		list_entry_t *list = &(sfs->inode_list), *le = list;
		while ((le = list_next(le)) != list) {
			struct sfs_inode *sin = le2sin(le, inode_link);
			vop_fsync(info2node(sin, sfs_inode));
80006aa4:	3c068002 	lui	a2,0x8002
80006aa8:	3c078002 	lui	a3,0x8002
80006aac:	24841e78 	addiu	a0,a0,7800
80006ab0:	2405003b 	li	a1,59
80006ab4:	24c60e28 	addiu	a2,a2,3624
80006ab8:	0c006b0b 	jal	8001ac2c <__panic>
80006abc:	24e71f64 	addiu	a3,a3,8036
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:24
 * sfs filesystem structure.
 */

static int sfs_sync(struct fs *fs)
{
	struct sfs_fs *sfs = fsop_info(fs, sfs);
80006ac0:	3c048002 	lui	a0,0x8002
80006ac4:	3c068002 	lui	a2,0x8002
80006ac8:	3c078002 	lui	a3,0x8002
80006acc:	24841e78 	addiu	a0,a0,7800
80006ad0:	24050018 	li	a1,24
80006ad4:	24c60e28 	addiu	a2,a2,3624
80006ad8:	0c006b0b 	jal	8001ac2c <__panic>
80006adc:	24e71e84 	addiu	a3,a3,7812

80006ae0 <sfs_cleanup>:
sfs_cleanup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:104
 *
 * VFS calls FS_SYNC on the filesystem prior to unmounting it.
 */

static int sfs_cleanup(struct fs *fs)
{
80006ae0:	27bdffe8 	addiu	sp,sp,-24
80006ae4:	afb00010 	sw	s0,16(sp)
80006ae8:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:105
	struct sfs_fs *sfs = fsop_info(fs, sfs);
80006aec:	1080001c 	beqz	a0,80006b60 <sfs_cleanup+0x80>
80006af0:	00808021 	move	s0,a0
80006af4:	8c830084 	lw	v1,132(a0)
80006af8:	24025679 	li	v0,22137
80006afc:	14620018 	bne	v1,v0,80006b60 <sfs_cleanup+0x80>
80006b00:	24820078 	addiu	v0,a0,120
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:106
	if (!list_empty(&(sfs->inode_list))) {
80006b04:	8c83007c 	lw	v1,124(a0)
80006b08:	14620011 	bne	v1,v0,80006b50 <sfs_cleanup+0x70>
80006b0c:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:109
		return -E_BUSY;
	}
	assert(!sfs->super_dirty);
80006b10:	8c820034 	lw	v0,52(a0)
80006b14:	5440001a 	bnezl	v0,80006b80 <sfs_cleanup+0xa0>
80006b18:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:110
	bitmap_destroy(sfs->freemap);
80006b1c:	0c001934 	jal	800064d0 <bitmap_destroy>
80006b20:	8c840030 	lw	a0,48(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:111
	kfree(sfs->sfs_buffer);
80006b24:	0c0054b1 	jal	800152c4 <kfree>
80006b28:	8e040038 	lw	a0,56(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:112
	kfree(sfs->hash_list);
80006b2c:	0c0054b1 	jal	800152c4 <kfree>
80006b30:	8e040080 	lw	a0,128(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:113
	kfree(sfs);
80006b34:	0c0054b1 	jal	800152c4 <kfree>
80006b38:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:115
	return 0;
}
80006b3c:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:114
	assert(!sfs->super_dirty);
	bitmap_destroy(sfs->freemap);
	kfree(sfs->sfs_buffer);
	kfree(sfs->hash_list);
	kfree(sfs);
	return 0;
80006b40:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:115
}
80006b44:	8fb00010 	lw	s0,16(sp)
80006b48:	03e00008 	jr	ra
80006b4c:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:107

static int sfs_cleanup(struct fs *fs)
{
	struct sfs_fs *sfs = fsop_info(fs, sfs);
	if (!list_empty(&(sfs->inode_list))) {
		return -E_BUSY;
80006b50:	2402fff0 	li	v0,-16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:115
	bitmap_destroy(sfs->freemap);
	kfree(sfs->sfs_buffer);
	kfree(sfs->hash_list);
	kfree(sfs);
	return 0;
}
80006b54:	8fb00010 	lw	s0,16(sp)
80006b58:	03e00008 	jr	ra
80006b5c:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:105
 * VFS calls FS_SYNC on the filesystem prior to unmounting it.
 */

static int sfs_cleanup(struct fs *fs)
{
	struct sfs_fs *sfs = fsop_info(fs, sfs);
80006b60:	3c048002 	lui	a0,0x8002
80006b64:	3c068002 	lui	a2,0x8002
80006b68:	3c078002 	lui	a3,0x8002
80006b6c:	24841e78 	addiu	a0,a0,7800
80006b70:	24050069 	li	a1,105
80006b74:	24c60e28 	addiu	a2,a2,3624
80006b78:	0c006b0b 	jal	8001ac2c <__panic>
80006b7c:	24e71e84 	addiu	a3,a3,7812
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:109
	if (!list_empty(&(sfs->inode_list))) {
		return -E_BUSY;
	}
	assert(!sfs->super_dirty);
80006b80:	3c068002 	lui	a2,0x8002
80006b84:	3c078002 	lui	a3,0x8002
80006b88:	24841e78 	addiu	a0,a0,7800
80006b8c:	2405006d 	li	a1,109
80006b90:	24c60e28 	addiu	a2,a2,3624
80006b94:	0c006b0b 	jal	8001ac2c <__panic>
80006b98:	24e71fbc 	addiu	a3,a3,8124

80006b9c <sfs_unmount>:
sfs_unmount():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:118
	kfree(sfs);
	return 0;
}

static int sfs_unmount(struct fs *fs)
{
80006b9c:	27bdffd0 	addiu	sp,sp,-48
80006ba0:	afb10024 	sw	s1,36(sp)
80006ba4:	afbf002c 	sw	ra,44(sp)
80006ba8:	afb20028 	sw	s2,40(sp)
80006bac:	afb00020 	sw	s0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:119
	struct sfs_fs *sfs = fsop_info(fs, sfs);
80006bb0:	1080002c 	beqz	a0,80006c64 <sfs_unmount+0xc8>
80006bb4:	00808821 	move	s1,a0
80006bb8:	8c830084 	lw	v1,132(a0)
80006bbc:	24025679 	li	v0,22137
80006bc0:	14620028 	bne	v1,v0,80006c64 <sfs_unmount+0xc8>
80006bc4:	2492000c 	addiu	s2,a0,12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:120
	uint32_t blocks = sfs->super.blocks, unused_blocks =
80006bc8:	8c870008 	lw	a3,8(a0)
80006bcc:	8c820004 	lw	v0,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:122
	    sfs->super.unused_blocks;
	kprintf("sfs: unmount: '%s' (%d/%d/%d)\n", sfs->super.info,
80006bd0:	3c048002 	lui	a0,0x8002
80006bd4:	24841fd0 	addiu	a0,a0,8144
80006bd8:	02402821 	move	a1,s2
80006bdc:	00473023 	subu	a2,v0,a3
80006be0:	afa20010 	sw	v0,16(sp)
80006be4:	0c007a9e 	jal	8001ea78 <kprintf>
80006be8:	24100020 	li	s0,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:126
		blocks - unused_blocks, unused_blocks, blocks);
	int i, ret;
	for (i = 0; i < 32; i++) {
		if ((ret = fsop_sync(fs)) == 0) {
80006bec:	08001b00 	j	80006c00 <sfs_unmount+0x64>
80006bf0:	8e220088 	lw	v0,136(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:125
	uint32_t blocks = sfs->super.blocks, unused_blocks =
	    sfs->super.unused_blocks;
	kprintf("sfs: unmount: '%s' (%d/%d/%d)\n", sfs->super.info,
		blocks - unused_blocks, unused_blocks, blocks);
	int i, ret;
	for (i = 0; i < 32; i++) {
80006bf4:	1200000c 	beqz	s0,80006c28 <sfs_unmount+0x8c>
80006bf8:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:126
		if ((ret = fsop_sync(fs)) == 0) {
80006bfc:	8e220088 	lw	v0,136(s1)
80006c00:	0040f809 	jalr	v0
80006c04:	02202021 	move	a0,s1
80006c08:	1440fffa 	bnez	v0,80006bf4 <sfs_unmount+0x58>
80006c0c:	2610ffff 	addiu	s0,s0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:134
	}
	if (ret != 0) {
		warn("sfs: sync error: '%s': %e.\n", sfs->super.info, ret);
	}
	return ret;
}
80006c10:	8fbf002c 	lw	ra,44(sp)
80006c14:	8fb20028 	lw	s2,40(sp)
80006c18:	8fb10024 	lw	s1,36(sp)
80006c1c:	8fb00020 	lw	s0,32(sp)
80006c20:	03e00008 	jr	ra
80006c24:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:131
		if ((ret = fsop_sync(fs)) == 0) {
			break;
		}
	}
	if (ret != 0) {
		warn("sfs: sync error: '%s': %e.\n", sfs->super.info, ret);
80006c28:	3c068002 	lui	a2,0x8002
80006c2c:	02403821 	move	a3,s2
80006c30:	24841e78 	addiu	a0,a0,7800
80006c34:	24050083 	li	a1,131
80006c38:	24c61ff0 	addiu	a2,a2,8176
80006c3c:	afa20010 	sw	v0,16(sp)
80006c40:	0c006b2b 	jal	8001acac <__warn>
80006c44:	afa20018 	sw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:134
	}
	return ret;
}
80006c48:	8fbf002c 	lw	ra,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:131
		if ((ret = fsop_sync(fs)) == 0) {
			break;
		}
	}
	if (ret != 0) {
		warn("sfs: sync error: '%s': %e.\n", sfs->super.info, ret);
80006c4c:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:134
	}
	return ret;
}
80006c50:	8fb20028 	lw	s2,40(sp)
80006c54:	8fb10024 	lw	s1,36(sp)
80006c58:	8fb00020 	lw	s0,32(sp)
80006c5c:	03e00008 	jr	ra
80006c60:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:119
	return 0;
}

static int sfs_unmount(struct fs *fs)
{
	struct sfs_fs *sfs = fsop_info(fs, sfs);
80006c64:	3c048002 	lui	a0,0x8002
80006c68:	3c068002 	lui	a2,0x8002
80006c6c:	3c078002 	lui	a3,0x8002
80006c70:	24841e78 	addiu	a0,a0,7800
80006c74:	24050077 	li	a1,119
80006c78:	24c60e28 	addiu	a2,a2,3624
80006c7c:	0c006b0b 	jal	8001ac2c <__panic>
80006c80:	24e71e84 	addiu	a3,a3,7812

80006c84 <sfs_get_root>:
sfs_get_root():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:87
 * Get inode for the root of the filesystem.
 * The root inode is always found in block 1 (SFS_ROOT_LOCATION).
 */

static struct inode *sfs_get_root(struct fs *fs)
{
80006c84:	27bdffe0 	addiu	sp,sp,-32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:91
	struct inode *node;
	int ret;
	if ((ret =
	     sfs_load_inode(fsop_info(fs, sfs), &node, SFS_BLKN_ROOT)) != 0) {
80006c88:	1080000c 	beqz	a0,80006cbc <sfs_get_root+0x38>
80006c8c:	afbf001c 	sw	ra,28(sp)
80006c90:	8c830084 	lw	v1,132(a0)
80006c94:	24025679 	li	v0,22137
80006c98:	14620008 	bne	v1,v0,80006cbc <sfs_get_root+0x38>
80006c9c:	27a50010 	addiu	a1,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:90

static struct inode *sfs_get_root(struct fs *fs)
{
	struct inode *node;
	int ret;
	if ((ret =
80006ca0:	0c002510 	jal	80009440 <sfs_load_inode>
80006ca4:	24060001 	li	a2,1
80006ca8:	1440000c 	bnez	v0,80006cdc <sfs_get_root+0x58>
80006cac:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:95
	     sfs_load_inode(fsop_info(fs, sfs), &node, SFS_BLKN_ROOT)) != 0) {
		panic("load sfs root failed: %e", ret);
	}
	return node;
}
80006cb0:	8fa20010 	lw	v0,16(sp)
80006cb4:	03e00008 	jr	ra
80006cb8:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:91
static struct inode *sfs_get_root(struct fs *fs)
{
	struct inode *node;
	int ret;
	if ((ret =
	     sfs_load_inode(fsop_info(fs, sfs), &node, SFS_BLKN_ROOT)) != 0) {
80006cbc:	3c048002 	lui	a0,0x8002
80006cc0:	3c068002 	lui	a2,0x8002
80006cc4:	3c078002 	lui	a3,0x8002
80006cc8:	24841e78 	addiu	a0,a0,7800
80006ccc:	2405005b 	li	a1,91
80006cd0:	24c60e28 	addiu	a2,a2,3624
80006cd4:	0c006b0b 	jal	8001ac2c <__panic>
80006cd8:	24e71e84 	addiu	a3,a3,7812
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:92
		panic("load sfs root failed: %e", ret);
80006cdc:	3c048002 	lui	a0,0x8002
80006ce0:	3c068002 	lui	a2,0x8002
80006ce4:	24841e78 	addiu	a0,a0,7800
80006ce8:	2405005c 	li	a1,92
80006cec:	24c6200c 	addiu	a2,a2,8204
80006cf0:	0c006b0b 	jal	8001ac2c <__panic>
80006cf4:	00403821 	move	a3,v0

80006cf8 <sfs_mount>:
sfs_mount():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_fs.c:309
 * Actual function called from high-level code to mount an sfs.
 */

int sfs_mount(const char *devname)
{
	return vfs_mount(devname, sfs_do_mount);
80006cf8:	3c058000 	lui	a1,0x8000
80006cfc:	08001447 	j	8000511c <vfs_mount>
80006d00:	24a56598 	addiu	a1,a1,26008

80006d04 <sfs_opendir>:
sfs_opendir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:581
	return sfs_load_inode(sfs, node_store, ino);
}

static int sfs_opendir(struct inode *node, uint32_t open_flags)
{
	switch (open_flags & O_ACCMODE) {
80006d04:	30a20003 	andi	v0,a1,0x3
80006d08:	10400003 	beqz	v0,80006d18 <sfs_opendir+0x14>
80006d0c:	30a50400 	andi	a1,a1,0x400
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:593
	}
	if (open_flags & O_APPEND) {
		return -E_ISDIR;
	}
	return 0;
}
80006d10:	03e00008 	jr	ra
80006d14:	2402ffeb 	li	v0,-21
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:590
	case O_RDWR:
	default:
		return -E_ISDIR;
	}
	if (open_flags & O_APPEND) {
		return -E_ISDIR;
80006d18:	2402ffeb 	li	v0,-21
80006d1c:	03e00008 	jr	ra
80006d20:	0005100a 	movz	v0,zero,a1

80006d24 <sfs_openfile>:
sfs_openfile():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:598
}

static int sfs_openfile(struct inode *node, uint32_t open_flags)
{
	return 0;
}
80006d24:	03e00008 	jr	ra
80006d28:	00001021 	move	v0,zero

80006d2c <sfs_set_links>:
list_add_after():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:93
 * Insert the new element @elm *after* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_after(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm, listelm->next);
80006d2c:	8c83007c 	lw	v1,124(a0)
sfs_set_links():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:53
{
	return sfs->hash_list + sin_hashfn(ino);
}

static void sfs_set_links(struct sfs_fs *sfs, struct sfs_inode *sin)
{
80006d30:	27bdffe0 	addiu	sp,sp,-32
80006d34:	00801021 	move	v0,a0
sfs_hash_list():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:49
	panic("invalid file type %d.\n", type);
}

static list_entry_t *sfs_hash_list(struct sfs_fs *sfs, uint32_t ino)
{
	return sfs->hash_list + sin_hashfn(ino);
80006d38:	8ca40004 	lw	a0,4(a1)
sfs_set_links():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:53
}

static void sfs_set_links(struct sfs_fs *sfs, struct sfs_inode *sin)
{
80006d3c:	afb00014 	sw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:54
	list_add(&(sfs->inode_list), &(sin->inode_link));
80006d40:	24460078 	addiu	a2,v0,120
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:53
{
	return sfs->hash_list + sin_hashfn(ino);
}

static void sfs_set_links(struct sfs_fs *sfs, struct sfs_inode *sin)
{
80006d44:	00a08021 	move	s0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:54
	list_add(&(sfs->inode_list), &(sin->inode_link));
80006d48:	24a50028 	addiu	a1,a1,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:53
{
	return sfs->hash_list + sin_hashfn(ino);
}

static void sfs_set_links(struct sfs_fs *sfs, struct sfs_inode *sin)
{
80006d4c:	afbf001c 	sw	ra,28(sp)
80006d50:	afb10018 	sw	s1,24(sp)
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
80006d54:	ac650000 	sw	a1,0(v1)
sfs_hash_list():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:49
	panic("invalid file type %d.\n", type);
}

static list_entry_t *sfs_hash_list(struct sfs_fs *sfs, uint32_t ino)
{
	return sfs->hash_list + sin_hashfn(ino);
80006d58:	8c510080 	lw	s1,128(v0)
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
80006d5c:	ac45007c 	sw	a1,124(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->next = next;
	elm->prev = prev;
80006d60:	ae060028 	sw	a2,40(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
	elm->next = next;
80006d64:	ae03002c 	sw	v1,44(s0)
sfs_hash_list():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:49
80006d68:	0c005953 	jal	8001654c <hash32>
80006d6c:	2405000a 	li	a1,10
80006d70:	000210c0 	sll	v0,v0,0x3
80006d74:	02228821 	addu	s1,s1,v0
list_add_after():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:93
 * Insert the new element @elm *after* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_after(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm, listelm->next);
80006d78:	8e220004 	lw	v0,4(s1)
sfs_set_links():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:56

static void sfs_set_links(struct sfs_fs *sfs, struct sfs_inode *sin)
{
	list_add(&(sfs->inode_list), &(sin->inode_link));
	list_add(sfs_hash_list(sfs, sin->ino), &(sin->hash_link));
}
80006d7c:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:55
}

static void sfs_set_links(struct sfs_fs *sfs, struct sfs_inode *sin)
{
	list_add(&(sfs->inode_list), &(sin->inode_link));
	list_add(sfs_hash_list(sfs, sin->ino), &(sin->hash_link));
80006d80:	26030030 	addiu	v1,s0,48
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
80006d84:	ae230004 	sw	v1,4(s1)
80006d88:	ac430000 	sw	v1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
	elm->next = next;
80006d8c:	ae020034 	sw	v0,52(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->prev = prev;
80006d90:	ae110030 	sw	s1,48(s0)
sfs_set_links():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:56
}
80006d94:	8fb10018 	lw	s1,24(sp)
80006d98:	8fb00014 	lw	s0,20(sp)
80006d9c:	03e00008 	jr	ra
80006da0:	27bd0020 	addiu	sp,sp,32

80006da4 <sfs_lookup_subpath>:
sfs_lookup_subpath():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1367
	unlock_sfs_mutex(sfs);
	return ret;
}

static char *sfs_lookup_subpath(char *path)
{
80006da4:	27bdffe8 	addiu	sp,sp,-24
80006da8:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1368
	if ((path = strchr(path, '/')) != NULL) {
80006dac:	0c005bdf 	jal	80016f7c <strchr>
80006db0:	2405002f 	li	a1,47
80006db4:	1040000c 	beqz	v0,80006de8 <sfs_lookup_subpath+0x44>
80006db8:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1369
		while (*path == '/') {
80006dbc:	90430000 	lbu	v1,0(v0)
80006dc0:	2404002f 	li	a0,47
80006dc4:	54640008 	bnel	v1,a0,80006de8 <sfs_lookup_subpath+0x44>
80006dc8:	0003100a 	movz	v0,zero,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1370
			*path++ = '\0';
80006dcc:	a0400000 	sb	zero,0(v0)
80006dd0:	24420001 	addiu	v0,v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1369
}

static char *sfs_lookup_subpath(char *path)
{
	if ((path = strchr(path, '/')) != NULL) {
		while (*path == '/') {
80006dd4:	90430000 	lbu	v1,0(v0)
80006dd8:	5064fffd 	beql	v1,a0,80006dd0 <sfs_lookup_subpath+0x2c>
80006ddc:	a0400000 	sb	zero,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1373
			*path++ = '\0';
		}
		if (*path == '\0') {
			return NULL;
80006de0:	0003100a 	movz	v0,zero,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1377
		}
	}
	return path;
}
80006de4:	8fbf0014 	lw	ra,20(sp)
80006de8:	03e00008 	jr	ra
80006dec:	27bd0018 	addiu	sp,sp,24

80006df0 <sfs_gettype>:
sfs_gettype():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1164
	unlock_sfs_fs(sfs);
	return ret;
}

static int sfs_gettype(struct inode *node, uint32_t * type_store)
{
80006df0:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1165
	struct sfs_disk_inode *din = vop_info(node, sfs_inode)->din;
80006df4:	10800023 	beqz	a0,80006e84 <sfs_gettype+0x94>
80006df8:	afbf0014 	sw	ra,20(sp)
80006dfc:	8c830038 	lw	v1,56(a0)
80006e00:	24021237 	li	v0,4663
80006e04:	54620020 	bnel	v1,v0,80006e88 <sfs_gettype+0x98>
80006e08:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1166
	switch (din->type) {
80006e0c:	8c820000 	lw	v0,0(a0)
80006e10:	94470008 	lhu	a3,8(v0)
80006e14:	24020002 	li	v0,2
80006e18:	10e20015 	beq	a3,v0,80006e70 <sfs_gettype+0x80>
80006e1c:	8fbf0014 	lw	ra,20(sp)
80006e20:	24020003 	li	v0,3
80006e24:	10e2000e 	beq	a3,v0,80006e60 <sfs_gettype+0x70>
80006e28:	3402a000 	li	v0,0xa000
80006e2c:	24020001 	li	v0,1
80006e30:	10e20006 	beq	a3,v0,80006e4c <sfs_gettype+0x5c>
80006e34:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1177
		return 0;
	case SFS_TYPE_LINK:
		*type_store = S_IFLNK;
		return 0;
	}
	panic("invalid file type %d.\n", din->type);
80006e38:	3c068002 	lui	a2,0x8002
80006e3c:	24842028 	addiu	a0,a0,8232
80006e40:	24050499 	li	a1,1177
80006e44:	0c006b0b 	jal	8001ac2c <__panic>
80006e48:	24c6206c 	addiu	a2,a2,8300
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1171
	switch (din->type) {
	case SFS_TYPE_DIR:
		*type_store = S_IFDIR;
		return 0;
	case SFS_TYPE_FILE:
		*type_store = S_IFREG;
80006e4c:	34028000 	li	v0,0x8000
80006e50:	aca20000 	sw	v0,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1178
	case SFS_TYPE_LINK:
		*type_store = S_IFLNK;
		return 0;
	}
	panic("invalid file type %d.\n", din->type);
}
80006e54:	27bd0018 	addiu	sp,sp,24
80006e58:	03e00008 	jr	ra
80006e5c:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1174
		return 0;
	case SFS_TYPE_FILE:
		*type_store = S_IFREG;
		return 0;
	case SFS_TYPE_LINK:
		*type_store = S_IFLNK;
80006e60:	aca20000 	sw	v0,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1178
		return 0;
	}
	panic("invalid file type %d.\n", din->type);
}
80006e64:	27bd0018 	addiu	sp,sp,24
80006e68:	03e00008 	jr	ra
80006e6c:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1168
static int sfs_gettype(struct inode *node, uint32_t * type_store)
{
	struct sfs_disk_inode *din = vop_info(node, sfs_inode)->din;
	switch (din->type) {
	case SFS_TYPE_DIR:
		*type_store = S_IFDIR;
80006e70:	24024000 	li	v0,16384
80006e74:	aca20000 	sw	v0,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1178
	case SFS_TYPE_LINK:
		*type_store = S_IFLNK;
		return 0;
	}
	panic("invalid file type %d.\n", din->type);
}
80006e78:	27bd0018 	addiu	sp,sp,24
80006e7c:	03e00008 	jr	ra
80006e80:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1165
	return ret;
}

static int sfs_gettype(struct inode *node, uint32_t * type_store)
{
	struct sfs_disk_inode *din = vop_info(node, sfs_inode)->din;
80006e84:	3c048002 	lui	a0,0x8002
80006e88:	3c068002 	lui	a2,0x8002
80006e8c:	3c078002 	lui	a3,0x8002
80006e90:	24842028 	addiu	a0,a0,8232
80006e94:	2405048d 	li	a1,1165
80006e98:	24c60e28 	addiu	a2,a2,3624
80006e9c:	0c006b0b 	jal	8001ac2c <__panic>
80006ea0:	24e72034 	addiu	a3,a3,8244

80006ea4 <sfs_block_inuse>:
sfs_block_inuse():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:65
	list_del(&(sin->inode_link));
	list_del(&(sin->hash_link));
}

static bool sfs_block_inuse(struct sfs_fs *sfs, uint32_t ino)
{
80006ea4:	27bdffe0 	addiu	sp,sp,-32
80006ea8:	afbf001c 	sw	ra,28(sp)
80006eac:	00a01021 	move	v0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:66
	if (ino != 0 && ino < sfs->super.blocks) {
80006eb0:	10a0000a 	beqz	a1,80006edc <sfs_block_inuse+0x38>
80006eb4:	8c870004 	lw	a3,4(a0)
80006eb8:	00a7182b 	sltu	v1,a1,a3
80006ebc:	50600008 	beqzl	v1,80006ee0 <sfs_block_inuse+0x3c>
80006ec0:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:67
		return !bitmap_test(sfs->freemap, ino);
80006ec4:	0c001905 	jal	80006414 <bitmap_test>
80006ec8:	8c840030 	lw	a0,48(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:71
	}
	panic("sfs_block_inuse: called out of range (0, %u) %u.\n",
	      sfs->super.blocks, ino);
}
80006ecc:	8fbf001c 	lw	ra,28(sp)
80006ed0:	2c420001 	sltiu	v0,v0,1
80006ed4:	03e00008 	jr	ra
80006ed8:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:69
static bool sfs_block_inuse(struct sfs_fs *sfs, uint32_t ino)
{
	if (ino != 0 && ino < sfs->super.blocks) {
		return !bitmap_test(sfs->freemap, ino);
	}
	panic("sfs_block_inuse: called out of range (0, %u) %u.\n",
80006edc:	3c048002 	lui	a0,0x8002
80006ee0:	3c068002 	lui	a2,0x8002
80006ee4:	24842028 	addiu	a0,a0,8232
80006ee8:	24050046 	li	a1,70
80006eec:	24c62084 	addiu	a2,a2,8324
80006ef0:	0c006b0b 	jal	8001ac2c <__panic>
80006ef4:	afa20010 	sw	v0,16(sp)

80006ef8 <sfs_create_inode>:
sfs_create_inode():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:95
}

static int
sfs_create_inode(struct sfs_fs *sfs, struct sfs_disk_inode *din, uint32_t ino,
		 struct inode **node_store)
{
80006ef8:	27bdffd0 	addiu	sp,sp,-48
80006efc:	afb20024 	sw	s2,36(sp)
80006f00:	00809021 	move	s2,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:97
	struct inode *node;
	if ((node = alloc_inode(sfs_inode)) != NULL) {
80006f04:	24041237 	li	a0,4663
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:95
}

static int
sfs_create_inode(struct sfs_fs *sfs, struct sfs_disk_inode *din, uint32_t ino,
		 struct inode **node_store)
{
80006f08:	afb30028 	sw	s3,40(sp)
80006f0c:	afb10020 	sw	s1,32(sp)
80006f10:	afb0001c 	sw	s0,28(sp)
80006f14:	afbf002c 	sw	ra,44(sp)
80006f18:	00a08021 	move	s0,a1
80006f1c:	00c08821 	move	s1,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:97
	struct inode *node;
	if ((node = alloc_inode(sfs_inode)) != NULL) {
80006f20:	0c001091 	jal	80004244 <__alloc_inode>
80006f24:	00e09821 	move	s3,a3
80006f28:	1040002c 	beqz	v0,80006fdc <sfs_create_inode+0xe4>
80006f2c:	24030001 	li	v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:98
		vop_init(node, sfs_get_ops(din->type), info2fs(sfs, sfs));
80006f30:	96070008 	lhu	a3,8(s0)
sfs_get_ops():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:38
	up(&(sin->sem));
}

static const struct inode_ops *sfs_get_ops(uint16_t type)
{
	switch (type) {
80006f34:	10e30008 	beq	a3,v1,80006f58 <sfs_create_inode+0x60>
80006f38:	24030002 	li	v1,2
80006f3c:	10e30024 	beq	a3,v1,80006fd0 <sfs_create_inode+0xd8>
80006f40:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:44
	case SFS_TYPE_DIR:
		return &sfs_node_dirops;
	case SFS_TYPE_FILE:
		return &sfs_node_fileops;
	}
	panic("invalid file type %d.\n", type);
80006f44:	3c068002 	lui	a2,0x8002
80006f48:	24842028 	addiu	a0,a0,8232
80006f4c:	2405002c 	li	a1,44
80006f50:	0c006b0b 	jal	8001ac2c <__panic>
80006f54:	24c6206c 	addiu	a2,a2,8300
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:42
{
	switch (type) {
	case SFS_TYPE_DIR:
		return &sfs_node_dirops;
	case SFS_TYPE_FILE:
		return &sfs_node_fileops;
80006f58:	3c058002 	lui	a1,0x8002
80006f5c:	24a5ff70 	addiu	a1,a1,-144
sfs_create_inode():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:98
sfs_create_inode(struct sfs_fs *sfs, struct sfs_disk_inode *din, uint32_t ino,
		 struct inode **node_store)
{
	struct inode *node;
	if ((node = alloc_inode(sfs_inode)) != NULL) {
		vop_init(node, sfs_get_ops(din->type), info2fs(sfs, sfs));
80006f60:	00402021 	move	a0,v0
80006f64:	02403021 	move	a2,s2
80006f68:	0c0010d2 	jal	80004348 <inode_init>
80006f6c:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:99
		struct sfs_inode *sin = vop_info(node, sfs_inode);
80006f70:	8fa20010 	lw	v0,16(sp)
80006f74:	24031237 	li	v1,4663
80006f78:	8c440038 	lw	a0,56(v0)
80006f7c:	14830019 	bne	a0,v1,80006fe4 <sfs_create_inode+0xec>
80006f80:	24030001 	li	v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:100
		sin->din = din, sin->ino = ino, sin->dirty = 0, sin->flags =
80006f84:	ac500000 	sw	s0,0(v0)
80006f88:	ac510004 	sw	s1,4(v0)
80006f8c:	ac40000c 	sw	zero,12(v0)
80006f90:	ac400008 	sw	zero,8(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:101
		    0, sin->reclaim_count = 1;
80006f94:	ac430010 	sw	v1,16(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:102
		sem_init(&(sin->sem), 1);
80006f98:	24440014 	addiu	a0,v0,20
80006f9c:	24050001 	li	a1,1
80006fa0:	0c006717 	jal	80019c5c <sem_init>
80006fa4:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:103
		*node_store = node;
80006fa8:	8fa20010 	lw	v0,16(sp)
80006fac:	ae620000 	sw	v0,0(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:104
		return 0;
80006fb0:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:107
	}
	return -E_NO_MEM;
}
80006fb4:	8fbf002c 	lw	ra,44(sp)
80006fb8:	8fb30028 	lw	s3,40(sp)
80006fbc:	8fb20024 	lw	s2,36(sp)
80006fc0:	8fb10020 	lw	s1,32(sp)
80006fc4:	8fb0001c 	lw	s0,28(sp)
80006fc8:	03e00008 	jr	ra
80006fcc:	27bd0030 	addiu	sp,sp,48
sfs_get_ops():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:40

static const struct inode_ops *sfs_get_ops(uint16_t type)
{
	switch (type) {
	case SFS_TYPE_DIR:
		return &sfs_node_dirops;
80006fd0:	3c058002 	lui	a1,0x8002
80006fd4:	08001bd8 	j	80006f60 <sfs_create_inode+0x68>
80006fd8:	24a5ff14 	addiu	a1,a1,-236
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:106
		    0, sin->reclaim_count = 1;
		sem_init(&(sin->sem), 1);
		*node_store = node;
		return 0;
	}
	return -E_NO_MEM;
80006fdc:	08001bed 	j	80006fb4 <sfs_create_inode+0xbc>
80006fe0:	2402fff4 	li	v0,-12
sfs_create_inode():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:99
		 struct inode **node_store)
{
	struct inode *node;
	if ((node = alloc_inode(sfs_inode)) != NULL) {
		vop_init(node, sfs_get_ops(din->type), info2fs(sfs, sfs));
		struct sfs_inode *sin = vop_info(node, sfs_inode);
80006fe4:	3c048002 	lui	a0,0x8002
80006fe8:	3c068002 	lui	a2,0x8002
80006fec:	3c078002 	lui	a3,0x8002
80006ff0:	24842028 	addiu	a0,a0,8232
80006ff4:	24050063 	li	a1,99
80006ff8:	24c60e28 	addiu	a2,a2,3624
80006ffc:	0c006b0b 	jal	8001ac2c <__panic>
80007000:	24e72034 	addiu	a3,a3,8244

80007004 <sfs_block_alloc>:
sfs_block_alloc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:74
	panic("sfs_block_inuse: called out of range (0, %u) %u.\n",
	      sfs->super.blocks, ino);
}

static int sfs_block_alloc(struct sfs_fs *sfs, uint32_t * ino_store)
{
80007004:	27bdffe0 	addiu	sp,sp,-32
80007008:	afb00014 	sw	s0,20(sp)
8000700c:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:76
	int ret;
	if ((ret = bitmap_alloc(sfs->freemap, ino_store)) != 0) {
80007010:	8c840030 	lw	a0,48(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:74
	panic("sfs_block_inuse: called out of range (0, %u) %u.\n",
	      sfs->super.blocks, ino);
}

static int sfs_block_alloc(struct sfs_fs *sfs, uint32_t * ino_store)
{
80007014:	afb10018 	sw	s1,24(sp)
80007018:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:76
	int ret;
	if ((ret = bitmap_alloc(sfs->freemap, ino_store)) != 0) {
8000701c:	0c0018d5 	jal	80006354 <bitmap_alloc>
80007020:	00a08821 	move	s1,a1
80007024:	14400013 	bnez	v0,80007074 <sfs_block_alloc+0x70>
80007028:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:79
		return ret;
	}
	assert(sfs->super.unused_blocks > 0);
8000702c:	8e020008 	lw	v0,8(s0)
80007030:	1040001c 	beqz	v0,800070a4 <sfs_block_alloc+0xa0>
80007034:	2442ffff 	addiu	v0,v0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:80
	sfs->super.unused_blocks--, sfs->super_dirty = 1;
80007038:	ae020008 	sw	v0,8(s0)
8000703c:	24020001 	li	v0,1
80007040:	ae020034 	sw	v0,52(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:81
	assert(sfs_block_inuse(sfs, *ino_store));
80007044:	8e250000 	lw	a1,0(s1)
80007048:	0c001ba9 	jal	80006ea4 <sfs_block_inuse>
8000704c:	02002021 	move	a0,s0
80007050:	1040000c 	beqz	v0,80007084 <sfs_block_alloc+0x80>
80007054:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:82
	return sfs_clear_block(sfs, *ino_store, 1);
80007058:	8e250000 	lw	a1,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:83
}
8000705c:	8fbf001c 	lw	ra,28(sp)
80007060:	8fb10018 	lw	s1,24(sp)
80007064:	8fb00014 	lw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:82
		return ret;
	}
	assert(sfs->super.unused_blocks > 0);
	sfs->super.unused_blocks--, sfs->super_dirty = 1;
	assert(sfs_block_inuse(sfs, *ino_store));
	return sfs_clear_block(sfs, *ino_store, 1);
80007068:	24060001 	li	a2,1
8000706c:	08002c22 	j	8000b088 <sfs_clear_block>
80007070:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:83
}
80007074:	8fb10018 	lw	s1,24(sp)
80007078:	8fb00014 	lw	s0,20(sp)
8000707c:	03e00008 	jr	ra
80007080:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:81
	if ((ret = bitmap_alloc(sfs->freemap, ino_store)) != 0) {
		return ret;
	}
	assert(sfs->super.unused_blocks > 0);
	sfs->super.unused_blocks--, sfs->super_dirty = 1;
	assert(sfs_block_inuse(sfs, *ino_store));
80007084:	3c048002 	lui	a0,0x8002
80007088:	3c068002 	lui	a2,0x8002
8000708c:	3c078002 	lui	a3,0x8002
80007090:	24842028 	addiu	a0,a0,8232
80007094:	24050051 	li	a1,81
80007098:	24c60e28 	addiu	a2,a2,3624
8000709c:	0c006b0b 	jal	8001ac2c <__panic>
800070a0:	24e720d8 	addiu	a3,a3,8408
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:79
{
	int ret;
	if ((ret = bitmap_alloc(sfs->freemap, ino_store)) != 0) {
		return ret;
	}
	assert(sfs->super.unused_blocks > 0);
800070a4:	3c048002 	lui	a0,0x8002
800070a8:	3c068002 	lui	a2,0x8002
800070ac:	3c078002 	lui	a3,0x8002
800070b0:	24842028 	addiu	a0,a0,8232
800070b4:	2405004f 	li	a1,79
800070b8:	24c60e28 	addiu	a2,a2,3624
800070bc:	0c006b0b 	jal	8001ac2c <__panic>
800070c0:	24e720b8 	addiu	a3,a3,8376

800070c4 <sfs_block_free>:
sfs_block_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:86
	assert(sfs_block_inuse(sfs, *ino_store));
	return sfs_clear_block(sfs, *ino_store, 1);
}

static void sfs_block_free(struct sfs_fs *sfs, uint32_t ino)
{
800070c4:	27bdffe0 	addiu	sp,sp,-32
800070c8:	afb10018 	sw	s1,24(sp)
800070cc:	afb00014 	sw	s0,20(sp)
800070d0:	afbf001c 	sw	ra,28(sp)
800070d4:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:87
	assert(sfs_block_inuse(sfs, ino));
800070d8:	0c001ba9 	jal	80006ea4 <sfs_block_inuse>
800070dc:	00a08821 	move	s1,a1
800070e0:	1040000e 	beqz	v0,8000711c <sfs_block_free+0x58>
800070e4:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:88
	bitmap_free(sfs->freemap, ino);
800070e8:	8e040030 	lw	a0,48(s0)
800070ec:	0c001917 	jal	8000645c <bitmap_free>
800070f0:	02202821 	move	a1,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:89
	sfs->super.unused_blocks++, sfs->super_dirty = 1;
800070f4:	8e020008 	lw	v0,8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:90
}
800070f8:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:89

static void sfs_block_free(struct sfs_fs *sfs, uint32_t ino)
{
	assert(sfs_block_inuse(sfs, ino));
	bitmap_free(sfs->freemap, ino);
	sfs->super.unused_blocks++, sfs->super_dirty = 1;
800070fc:	24030001 	li	v1,1
80007100:	24420001 	addiu	v0,v0,1
80007104:	ae030034 	sw	v1,52(s0)
80007108:	ae020008 	sw	v0,8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:90
}
8000710c:	8fb10018 	lw	s1,24(sp)
80007110:	8fb00014 	lw	s0,20(sp)
80007114:	03e00008 	jr	ra
80007118:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:87
	return sfs_clear_block(sfs, *ino_store, 1);
}

static void sfs_block_free(struct sfs_fs *sfs, uint32_t ino)
{
	assert(sfs_block_inuse(sfs, ino));
8000711c:	3c068002 	lui	a2,0x8002
80007120:	3c078002 	lui	a3,0x8002
80007124:	24842028 	addiu	a0,a0,8232
80007128:	24050057 	li	a1,87
8000712c:	24c60e28 	addiu	a2,a2,3624
80007130:	0c006b0b 	jal	8001ac2c <__panic>
80007134:	24e72164 	addiu	a3,a3,8548

80007138 <sfs_bmap_get_sub_nolock>:
sfs_bmap_get_sub_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:167
}

static int
sfs_bmap_get_sub_nolock(struct sfs_fs *sfs, uint32_t * entp, uint32_t index,
			bool create, uint32_t * ino_store)
{
80007138:	27bdffc0 	addiu	sp,sp,-64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:168
	assert(index < SFS_BLK_NENTRY);
8000713c:	2cc20400 	sltiu	v0,a2,1024
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:167
}

static int
sfs_bmap_get_sub_nolock(struct sfs_fs *sfs, uint32_t * entp, uint32_t index,
			bool create, uint32_t * ino_store)
{
80007140:	afb30034 	sw	s3,52(sp)
80007144:	afb1002c 	sw	s1,44(sp)
80007148:	afb00028 	sw	s0,40(sp)
8000714c:	afbf003c 	sw	ra,60(sp)
80007150:	afb40038 	sw	s4,56(sp)
80007154:	afb20030 	sw	s2,48(sp)
80007158:	00809821 	move	s3,a0
8000715c:	00a08021 	move	s0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:168
	assert(index < SFS_BLK_NENTRY);
80007160:	10400047 	beqz	v0,80007280 <sfs_bmap_get_sub_nolock+0x148>
80007164:	00e08821 	move	s1,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:172
	int ret;
	uint32_t ent, ino = 0;
	off_t offset = index * sizeof(uint32_t);
	if ((ent = *entp) != 0) {
80007168:	8ca70000 	lw	a3,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:170
sfs_bmap_get_sub_nolock(struct sfs_fs *sfs, uint32_t * entp, uint32_t index,
			bool create, uint32_t * ino_store)
{
	assert(index < SFS_BLK_NENTRY);
	int ret;
	uint32_t ent, ino = 0;
8000716c:	afa00018 	sw	zero,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:171
	off_t offset = index * sizeof(uint32_t);
80007170:	00069080 	sll	s2,a2,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:172
	if ((ent = *entp) != 0) {
80007174:	14e0000e 	bnez	a3,800071b0 <sfs_bmap_get_sub_nolock+0x78>
80007178:	afa7001c 	sw	a3,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:181
		}
		if (ino != 0 || !create) {
			goto out;
		}
	} else {
		if (!create) {
8000717c:	1620001e 	bnez	s1,800071f8 <sfs_bmap_get_sub_nolock+0xc0>
80007180:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:201

out:
	if (ent != *entp) {
		*entp = ent;
	}
	*ino_store = ino;
80007184:	8fa30050 	lw	v1,80(sp)
80007188:	ac620000 	sw	v0,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:202
	return 0;
8000718c:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:209
failed_cleanup:
	if (ent != *entp) {
		sfs_block_free(sfs, ent);
	}
	return ret;
}
80007190:	8fbf003c 	lw	ra,60(sp)
80007194:	8fb40038 	lw	s4,56(sp)
80007198:	8fb30034 	lw	s3,52(sp)
8000719c:	8fb20030 	lw	s2,48(sp)
800071a0:	8fb1002c 	lw	s1,44(sp)
800071a4:	8fb00028 	lw	s0,40(sp)
800071a8:	03e00008 	jr	ra
800071ac:	27bd0040 	addiu	sp,sp,64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:173
	assert(index < SFS_BLK_NENTRY);
	int ret;
	uint32_t ent, ino = 0;
	off_t offset = index * sizeof(uint32_t);
	if ((ent = *entp) != 0) {
		if ((ret =
800071b0:	27b40018 	addiu	s4,sp,24
800071b4:	02802821 	move	a1,s4
800071b8:	24060004 	li	a2,4
800071bc:	0c002b82 	jal	8000ae08 <sfs_rbuf>
800071c0:	afb20010 	sw	s2,16(sp)
800071c4:	1440fff3 	bnez	v0,80007194 <sfs_bmap_get_sub_nolock+0x5c>
800071c8:	8fbf003c 	lw	ra,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:177
		     sfs_rbuf(sfs, &ino, sizeof(uint32_t), ent, offset)) != 0) {
			return ret;
		}
		if (ino != 0 || !create) {
800071cc:	8fa20018 	lw	v0,24(sp)
800071d0:	54400004 	bnezl	v0,800071e4 <sfs_bmap_get_sub_nolock+0xac>
800071d4:	8e040000 	lw	a0,0(s0)
800071d8:	1620000c 	bnez	s1,8000720c <sfs_bmap_get_sub_nolock+0xd4>
800071dc:	02602021 	move	a0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:194
	if ((ret = sfs_block_alloc(sfs, &ino)) != 0) {
		goto failed_cleanup;
	}
	if ((ret = sfs_wbuf(sfs, &ino, sizeof(uint32_t), ent, offset)) != 0) {
		sfs_block_free(sfs, ino);
		goto failed_cleanup;
800071e0:	8e040000 	lw	a0,0(s0)
800071e4:	8fa3001c 	lw	v1,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:198
	}

out:
	if (ent != *entp) {
800071e8:	5464ffe6 	bnel	v1,a0,80007184 <sfs_bmap_get_sub_nolock+0x4c>
800071ec:	ae030000 	sw	v1,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:201
		*entp = ent;
	}
	*ino_store = ino;
800071f0:	08001c62 	j	80007188 <sfs_bmap_get_sub_nolock+0x50>
800071f4:	8fa30050 	lw	v1,80(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:184
		}
	} else {
		if (!create) {
			goto out;
		}
		if ((ret = sfs_block_alloc(sfs, &ent)) != 0) {
800071f8:	0c001c01 	jal	80007004 <sfs_block_alloc>
800071fc:	27a5001c 	addiu	a1,sp,28
80007200:	1440ffe3 	bnez	v0,80007190 <sfs_bmap_get_sub_nolock+0x58>
80007204:	27b40018 	addiu	s4,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:189
			return ret;
		}
	}

	if ((ret = sfs_block_alloc(sfs, &ino)) != 0) {
80007208:	02602021 	move	a0,s3
8000720c:	0c001c01 	jal	80007004 <sfs_block_alloc>
80007210:	02802821 	move	a1,s4
80007214:	1040000a 	beqz	v0,80007240 <sfs_bmap_get_sub_nolock+0x108>
80007218:	8fa7001c 	lw	a3,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:205
	}
	*ino_store = ino;
	return 0;

failed_cleanup:
	if (ent != *entp) {
8000721c:	8fa5001c 	lw	a1,28(sp)
80007220:	8e030000 	lw	v1,0(s0)
80007224:	1065ffdb 	beq	v1,a1,80007194 <sfs_bmap_get_sub_nolock+0x5c>
80007228:	8fbf003c 	lw	ra,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:206
		sfs_block_free(sfs, ent);
8000722c:	02602021 	move	a0,s3
80007230:	0c001c31 	jal	800070c4 <sfs_block_free>
80007234:	afa20020 	sw	v0,32(sp)
80007238:	08001c64 	j	80007190 <sfs_bmap_get_sub_nolock+0x58>
8000723c:	8fa20020 	lw	v0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:192
	}

	if ((ret = sfs_block_alloc(sfs, &ino)) != 0) {
		goto failed_cleanup;
	}
	if ((ret = sfs_wbuf(sfs, &ino, sizeof(uint32_t), ent, offset)) != 0) {
80007240:	02602021 	move	a0,s3
80007244:	02802821 	move	a1,s4
80007248:	24060004 	li	a2,4
8000724c:	0c002bb7 	jal	8000aedc <sfs_wbuf>
80007250:	afb20010 	sw	s2,16(sp)
80007254:	14400004 	bnez	v0,80007268 <sfs_bmap_get_sub_nolock+0x130>
80007258:	8fa3001c 	lw	v1,28(sp)
8000725c:	8e040000 	lw	a0,0(s0)
80007260:	08001c7a 	j	800071e8 <sfs_bmap_get_sub_nolock+0xb0>
80007264:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:193
		sfs_block_free(sfs, ino);
80007268:	8fa50018 	lw	a1,24(sp)
8000726c:	02602021 	move	a0,s3
80007270:	0c001c31 	jal	800070c4 <sfs_block_free>
80007274:	afa20020 	sw	v0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:194
		goto failed_cleanup;
80007278:	08001c87 	j	8000721c <sfs_bmap_get_sub_nolock+0xe4>
8000727c:	8fa20020 	lw	v0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:168

static int
sfs_bmap_get_sub_nolock(struct sfs_fs *sfs, uint32_t * entp, uint32_t index,
			bool create, uint32_t * ino_store)
{
	assert(index < SFS_BLK_NENTRY);
80007280:	3c048002 	lui	a0,0x8002
80007284:	3c068002 	lui	a2,0x8002
80007288:	3c078002 	lui	a3,0x8002
8000728c:	24842028 	addiu	a0,a0,8232
80007290:	240500a8 	li	a1,168
80007294:	24c60e28 	addiu	a2,a2,3624
80007298:	0c006b0b 	jal	8001ac2c <__panic>
8000729c:	24e720fc 	addiu	a3,a3,8444

800072a0 <sfs_dirent_create_inode>:
sfs_dirent_create_inode():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:523
}

static int
sfs_dirent_create_inode(struct sfs_fs *sfs, uint16_t type,
			struct inode **node_store)
{
800072a0:	27bdffc8 	addiu	sp,sp,-56
800072a4:	afb10028 	sw	s1,40(sp)
800072a8:	00808821 	move	s1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:525
	struct sfs_disk_inode *din;
	if ((din = kmalloc(sizeof(struct sfs_disk_inode))) == NULL) {
800072ac:	24040048 	li	a0,72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:523
}

static int
sfs_dirent_create_inode(struct sfs_fs *sfs, uint16_t type,
			struct inode **node_store)
{
800072b0:	afb30030 	sw	s3,48(sp)
800072b4:	afb2002c 	sw	s2,44(sp)
800072b8:	afb00024 	sw	s0,36(sp)
800072bc:	afbf0034 	sw	ra,52(sp)
800072c0:	00c09021 	move	s2,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:525
	struct sfs_disk_inode *din;
	if ((din = kmalloc(sizeof(struct sfs_disk_inode))) == NULL) {
800072c4:	0c005486 	jal	80015218 <kmalloc>
800072c8:	00a09821 	move	s3,a1
800072cc:	10400039 	beqz	v0,800073b4 <sfs_dirent_create_inode+0x114>
800072d0:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:528
		return -E_NO_MEM;
	}
	memset(din, 0, sizeof(struct sfs_disk_inode));
800072d4:	00402021 	move	a0,v0
800072d8:	00002821 	move	a1,zero
800072dc:	0c005c52 	jal	80017148 <memset>
800072e0:	24060048 	li	a2,72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:529
	din->type = type;
800072e4:	a6130008 	sh	s3,8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:533

	int ret;
	uint32_t ino;
	if ((ret = sfs_block_alloc(sfs, &ino)) != 0) {
800072e8:	02202021 	move	a0,s1
800072ec:	0c001c01 	jal	80007004 <sfs_block_alloc>
800072f0:	27a50014 	addiu	a1,sp,20
800072f4:	14400025 	bnez	v0,8000738c <sfs_dirent_create_inode+0xec>
800072f8:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:537
		goto failed_cleanup_din;
	}
	struct inode *node;
	if ((ret = sfs_create_inode(sfs, din, ino, &node)) != 0) {
800072fc:	8fa60014 	lw	a2,20(sp)
80007300:	02202021 	move	a0,s1
80007304:	02002821 	move	a1,s0
80007308:	0c001bbe 	jal	80006ef8 <sfs_create_inode>
8000730c:	27a70010 	addiu	a3,sp,16
80007310:	14400019 	bnez	v0,80007378 <sfs_dirent_create_inode+0xd8>
80007314:	8fa50014 	lw	a1,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:540
		goto failed_cleanup_ino;
	}
	lock_sfs_fs(sfs);
80007318:	02202021 	move	a0,s1
8000731c:	0c002c4b 	jal	8000b12c <lock_sfs_fs>
80007320:	afa20018 	sw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:542
	{
		sfs_set_links(sfs, vop_info(node, sfs_inode));
80007324:	8fa50010 	lw	a1,16(sp)
80007328:	10a00024 	beqz	a1,800073bc <sfs_dirent_create_inode+0x11c>
8000732c:	8fa20018 	lw	v0,24(sp)
80007330:	8ca40038 	lw	a0,56(a1)
80007334:	24031237 	li	v1,4663
80007338:	14830020 	bne	a0,v1,800073bc <sfs_dirent_create_inode+0x11c>
8000733c:	02202021 	move	a0,s1
80007340:	0c001b4b 	jal	80006d2c <sfs_set_links>
80007344:	afa20018 	sw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:544
	}
	unlock_sfs_fs(sfs);
80007348:	0c002c51 	jal	8000b144 <unlock_sfs_fs>
8000734c:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:545
	*node_store = node;
80007350:	8fa30010 	lw	v1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:553
failed_cleanup_ino:
	sfs_block_free(sfs, ino);
failed_cleanup_din:
	kfree(din);
	return ret;
}
80007354:	8fbf0034 	lw	ra,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:546
	{
		sfs_set_links(sfs, vop_info(node, sfs_inode));
	}
	unlock_sfs_fs(sfs);
	*node_store = node;
	return 0;
80007358:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:545
	lock_sfs_fs(sfs);
	{
		sfs_set_links(sfs, vop_info(node, sfs_inode));
	}
	unlock_sfs_fs(sfs);
	*node_store = node;
8000735c:	ae430000 	sw	v1,0(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:553
failed_cleanup_ino:
	sfs_block_free(sfs, ino);
failed_cleanup_din:
	kfree(din);
	return ret;
}
80007360:	8fb30030 	lw	s3,48(sp)
80007364:	8fb2002c 	lw	s2,44(sp)
80007368:	8fb10028 	lw	s1,40(sp)
8000736c:	8fb00024 	lw	s0,36(sp)
80007370:	03e00008 	jr	ra
80007374:	27bd0038 	addiu	sp,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:549
	unlock_sfs_fs(sfs);
	*node_store = node;
	return 0;

failed_cleanup_ino:
	sfs_block_free(sfs, ino);
80007378:	02202021 	move	a0,s1
8000737c:	0c001c31 	jal	800070c4 <sfs_block_free>
80007380:	afa20018 	sw	v0,24(sp)
80007384:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:551
failed_cleanup_din:
	kfree(din);
80007388:	02002021 	move	a0,s0
8000738c:	0c0054b1 	jal	800152c4 <kfree>
80007390:	afa20018 	sw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:552
	return ret;
80007394:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:553
}
80007398:	8fbf0034 	lw	ra,52(sp)
8000739c:	8fb30030 	lw	s3,48(sp)
800073a0:	8fb2002c 	lw	s2,44(sp)
800073a4:	8fb10028 	lw	s1,40(sp)
800073a8:	8fb00024 	lw	s0,36(sp)
800073ac:	03e00008 	jr	ra
800073b0:	27bd0038 	addiu	sp,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:526
sfs_dirent_create_inode(struct sfs_fs *sfs, uint16_t type,
			struct inode **node_store)
{
	struct sfs_disk_inode *din;
	if ((din = kmalloc(sizeof(struct sfs_disk_inode))) == NULL) {
		return -E_NO_MEM;
800073b4:	08001ce6 	j	80007398 <sfs_dirent_create_inode+0xf8>
800073b8:	2402fff4 	li	v0,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:542
	if ((ret = sfs_create_inode(sfs, din, ino, &node)) != 0) {
		goto failed_cleanup_ino;
	}
	lock_sfs_fs(sfs);
	{
		sfs_set_links(sfs, vop_info(node, sfs_inode));
800073bc:	3c048002 	lui	a0,0x8002
800073c0:	3c068002 	lui	a2,0x8002
800073c4:	3c078002 	lui	a3,0x8002
800073c8:	24842028 	addiu	a0,a0,8232
800073cc:	2405021e 	li	a1,542
800073d0:	24c60e28 	addiu	a2,a2,3624
800073d4:	0c006b0b 	jal	8001ac2c <__panic>
800073d8:	24e72034 	addiu	a3,a3,8244

800073dc <sfs_bmap_load_nolock>:
sfs_bmap_load_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:340
}

static int
sfs_bmap_load_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, uint32_t index,
		     uint32_t * ino_store)
{
800073dc:	27bdffc0 	addiu	sp,sp,-64
800073e0:	afb00020 	sw	s0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:341
	struct sfs_disk_inode *din = sin->din;
800073e4:	8cb00000 	lw	s0,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:340
}

static int
sfs_bmap_load_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, uint32_t index,
		     uint32_t * ino_store)
{
800073e8:	afb20028 	sw	s2,40(sp)
800073ec:	afb40030 	sw	s4,48(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:342
	struct sfs_disk_inode *din = sin->din;
	assert(index <= din->blocks);
800073f0:	8e12000c 	lw	s2,12(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:340
}

static int
sfs_bmap_load_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, uint32_t index,
		     uint32_t * ino_store)
{
800073f4:	afb3002c 	sw	s3,44(sp)
800073f8:	afb10024 	sw	s1,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:342
	struct sfs_disk_inode *din = sin->din;
	assert(index <= din->blocks);
800073fc:	0246102b 	sltu	v0,s2,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:340
}

static int
sfs_bmap_load_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, uint32_t index,
		     uint32_t * ino_store)
{
80007400:	afbf003c 	sw	ra,60(sp)
80007404:	afb60038 	sw	s6,56(sp)
80007408:	afb50034 	sw	s5,52(sp)
8000740c:	00a08821 	move	s1,a1
80007410:	00809821 	move	s3,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:342
	struct sfs_disk_inode *din = sin->din;
	assert(index <= din->blocks);
80007414:	14400071 	bnez	v0,800075dc <sfs_bmap_load_nolock+0x200>
80007418:	00e0a021 	move	s4,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:345
	int ret;
	uint32_t ino;
	bool create = (index == din->blocks);
8000741c:	02469026 	xor	s2,s2,a2
sfs_bmap_get_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:218
		    bool create, uint32_t * ino_store)
{
	struct sfs_disk_inode *din = sin->din;
	int ret;
	uint32_t ent, ino;
	if (index < SFS_NDIRECT) {
80007420:	2cc2000c 	sltiu	v0,a2,12
80007424:	10400020 	beqz	v0,800074a8 <sfs_bmap_load_nolock+0xcc>
80007428:	2e520001 	sltiu	s2,s2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:219
		if ((ino = din->direct[index]) == 0 && create) {
8000742c:	24d50004 	addiu	s5,a2,4
80007430:	0015a880 	sll	s5,s5,0x2
80007434:	0215a821 	addu	s5,s0,s5
80007438:	8eb60000 	lw	s6,0(s5)
8000743c:	12c00058 	beqz	s6,800075a0 <sfs_bmap_load_nolock+0x1c4>
80007440:	afb60018 	sw	s6,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:266
			return ret;
		}
	}

out:
	assert(ino == 0 || sfs_block_inuse(sfs, ino));
80007444:	02602021 	move	a0,s3
80007448:	0c001ba9 	jal	80006ea4 <sfs_block_inuse>
8000744c:	02c02821 	move	a1,s6
80007450:	10400071 	beqz	v0,80007618 <sfs_bmap_load_nolock+0x23c>
80007454:	8fb60018 	lw	s6,24(sp)
sfs_bmap_load_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:349
	uint32_t ino;
	bool create = (index == din->blocks);
	if ((ret = sfs_bmap_get_nolock(sfs, sin, index, create, &ino)) != 0) {
		return ret;
	}
	assert(sfs_block_inuse(sfs, ino));
80007458:	02602021 	move	a0,s3
8000745c:	0c001ba9 	jal	80006ea4 <sfs_block_inuse>
80007460:	02c02821 	move	a1,s6
80007464:	10400065 	beqz	v0,800075fc <sfs_bmap_load_nolock+0x220>
80007468:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:350
	if (create) {
8000746c:	56400058 	bnezl	s2,800075d0 <sfs_bmap_load_nolock+0x1f4>
80007470:	8e02000c 	lw	v0,12(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:353
		din->blocks++;
	}
	if (ino_store != NULL) {
80007474:	12800002 	beqz	s4,80007480 <sfs_bmap_load_nolock+0xa4>
80007478:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:354
		*ino_store = ino;
8000747c:	ae960000 	sw	s6,0(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:357
	}
	return 0;
}
80007480:	8fbf003c 	lw	ra,60(sp)
80007484:	8fb60038 	lw	s6,56(sp)
80007488:	8fb50034 	lw	s5,52(sp)
8000748c:	8fb40030 	lw	s4,48(sp)
80007490:	8fb3002c 	lw	s3,44(sp)
80007494:	8fb20028 	lw	s2,40(sp)
80007498:	8fb10024 	lw	s1,36(sp)
8000749c:	8fb00020 	lw	s0,32(sp)
800074a0:	03e00008 	jr	ra
800074a4:	27bd0040 	addiu	sp,sp,64
sfs_bmap_get_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:229
			sin->dirty = 1;
		}
		goto out;
	}

	index -= SFS_NDIRECT;
800074a8:	24c3fff4 	addiu	v1,a2,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:230
	if (index < SFS_BLK_NENTRY) {
800074ac:	2c620400 	sltiu	v0,v1,1024
800074b0:	50400017 	beqzl	v0,80007510 <sfs_bmap_load_nolock+0x134>
800074b4:	8e020044 	lw	v0,68(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:231
		ent = din->indirect;
800074b8:	8e020040 	lw	v0,64(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:232
		if ((ret =
800074bc:	27a5001c 	addiu	a1,sp,28
800074c0:	00603021 	move	a2,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:231
		goto out;
	}

	index -= SFS_NDIRECT;
	if (index < SFS_BLK_NENTRY) {
		ent = din->indirect;
800074c4:	afa2001c 	sw	v0,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:232
		if ((ret =
800074c8:	02403821 	move	a3,s2
800074cc:	27a20018 	addiu	v0,sp,24
800074d0:	0c001c4e 	jal	80007138 <sfs_bmap_get_sub_nolock>
800074d4:	afa20010 	sw	v0,16(sp)
800074d8:	1440ffea 	bnez	v0,80007484 <sfs_bmap_load_nolock+0xa8>
800074dc:	8fbf003c 	lw	ra,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:237
		     sfs_bmap_get_sub_nolock(sfs, &ent, index, create,
					     &ino)) != 0) {
			return ret;
		}
		if (ent != din->indirect) {
800074e0:	8e030040 	lw	v1,64(s0)
800074e4:	8fa2001c 	lw	v0,28(sp)
800074e8:	10620029 	beq	v1,v0,80007590 <sfs_bmap_load_nolock+0x1b4>
800074ec:	8fb60018 	lw	s6,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:238
			assert(din->indirect == 0);
800074f0:	14600058 	bnez	v1,80007654 <sfs_bmap_load_nolock+0x278>
800074f4:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:239
			din->indirect = ent;
800074f8:	ae020040 	sw	v0,64(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:240
			sin->dirty = 1;
800074fc:	24020001 	li	v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:266
			return ret;
		}
	}

out:
	assert(ino == 0 || sfs_block_inuse(sfs, ino));
80007500:	12c0ffd5 	beqz	s6,80007458 <sfs_bmap_load_nolock+0x7c>
80007504:	ae22000c 	sw	v0,12(s1)
80007508:	08001d12 	j	80007448 <sfs_bmap_load_nolock+0x6c>
8000750c:	02602021 	move	a0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:245
			sin->dirty = 1;
		}
		goto out;
	}

	index -= SFS_BLK_NENTRY;
80007510:	24d5fbf4 	addiu	s5,a2,-1036
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:247
	ent = din->db_indirect;
	if ((ret =
80007514:	27a5001c 	addiu	a1,sp,28
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:246
		}
		goto out;
	}

	index -= SFS_BLK_NENTRY;
	ent = din->db_indirect;
80007518:	afa2001c 	sw	v0,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:247
	if ((ret =
8000751c:	00153282 	srl	a2,s5,0xa
80007520:	27a20018 	addiu	v0,sp,24
80007524:	02403821 	move	a3,s2
80007528:	0c001c4e 	jal	80007138 <sfs_bmap_get_sub_nolock>
8000752c:	afa20010 	sw	v0,16(sp)
80007530:	1440ffd4 	bnez	v0,80007484 <sfs_bmap_load_nolock+0xa8>
80007534:	8fbf003c 	lw	ra,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:252
	     sfs_bmap_get_sub_nolock(sfs, &ent, index / SFS_BLK_NENTRY, create,
				     &ino)) != 0) {
		return ret;
	}
	if (ent != din->db_indirect) {
80007538:	8e030044 	lw	v1,68(s0)
8000753c:	8fa2001c 	lw	v0,28(sp)
80007540:	50620007 	beql	v1,v0,80007560 <sfs_bmap_load_nolock+0x184>
80007544:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:253
		assert(din->db_indirect == 0);
80007548:	1460003b 	bnez	v1,80007638 <sfs_bmap_load_nolock+0x25c>
8000754c:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:254
		din->db_indirect = ent;
80007550:	ae020044 	sw	v0,68(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:255
		sin->dirty = 1;
80007554:	24020001 	li	v0,1
80007558:	ae22000c 	sw	v0,12(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:257
	}
	if ((ent = ino) != 0) {
8000755c:	8fa20018 	lw	v0,24(sp)
80007560:	0000b021 	move	s6,zero
80007564:	1040ffbc 	beqz	v0,80007458 <sfs_bmap_load_nolock+0x7c>
80007568:	afa2001c 	sw	v0,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:258
		if ((ret =
8000756c:	27a20018 	addiu	v0,sp,24
80007570:	02602021 	move	a0,s3
80007574:	27a5001c 	addiu	a1,sp,28
80007578:	32a603ff 	andi	a2,s5,0x3ff
8000757c:	02403821 	move	a3,s2
80007580:	0c001c4e 	jal	80007138 <sfs_bmap_get_sub_nolock>
80007584:	afa20010 	sw	v0,16(sp)
80007588:	1440ffbd 	bnez	v0,80007480 <sfs_bmap_load_nolock+0xa4>
8000758c:	8fb60018 	lw	s6,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:266
			return ret;
		}
	}

out:
	assert(ino == 0 || sfs_block_inuse(sfs, ino));
80007590:	12c0ffb2 	beqz	s6,8000745c <sfs_bmap_load_nolock+0x80>
80007594:	02602021 	move	a0,s3
80007598:	08001d12 	j	80007448 <sfs_bmap_load_nolock+0x6c>
8000759c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:219
{
	struct sfs_disk_inode *din = sin->din;
	int ret;
	uint32_t ent, ino;
	if (index < SFS_NDIRECT) {
		if ((ino = din->direct[index]) == 0 && create) {
800075a0:	5240ffae 	beqzl	s2,8000745c <sfs_bmap_load_nolock+0x80>
800075a4:	02602021 	move	a0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:220
			if ((ret = sfs_block_alloc(sfs, &ino)) != 0) {
800075a8:	0c001c01 	jal	80007004 <sfs_block_alloc>
800075ac:	27a50018 	addiu	a1,sp,24
800075b0:	1440ffb3 	bnez	v0,80007480 <sfs_bmap_load_nolock+0xa4>
800075b4:	8fb60018 	lw	s6,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:224
				return ret;
			}
			din->direct[index] = ino;
			sin->dirty = 1;
800075b8:	24020001 	li	v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:223
	if (index < SFS_NDIRECT) {
		if ((ino = din->direct[index]) == 0 && create) {
			if ((ret = sfs_block_alloc(sfs, &ino)) != 0) {
				return ret;
			}
			din->direct[index] = ino;
800075bc:	aeb60000 	sw	s6,0(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:266
			return ret;
		}
	}

out:
	assert(ino == 0 || sfs_block_inuse(sfs, ino));
800075c0:	12c0ffa5 	beqz	s6,80007458 <sfs_bmap_load_nolock+0x7c>
800075c4:	ae22000c 	sw	v0,12(s1)
800075c8:	08001d12 	j	80007448 <sfs_bmap_load_nolock+0x6c>
800075cc:	02602021 	move	a0,s3
sfs_bmap_load_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:351
	if ((ret = sfs_bmap_get_nolock(sfs, sin, index, create, &ino)) != 0) {
		return ret;
	}
	assert(sfs_block_inuse(sfs, ino));
	if (create) {
		din->blocks++;
800075d0:	24420001 	addiu	v0,v0,1
800075d4:	08001d1d 	j	80007474 <sfs_bmap_load_nolock+0x98>
800075d8:	ae02000c 	sw	v0,12(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:342
static int
sfs_bmap_load_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, uint32_t index,
		     uint32_t * ino_store)
{
	struct sfs_disk_inode *din = sin->din;
	assert(index <= din->blocks);
800075dc:	3c048002 	lui	a0,0x8002
800075e0:	3c068002 	lui	a2,0x8002
800075e4:	3c078002 	lui	a3,0x8002
800075e8:	24842028 	addiu	a0,a0,8232
800075ec:	24050156 	li	a1,342
800075f0:	24c60e28 	addiu	a2,a2,3624
800075f4:	0c006b0b 	jal	8001ac2c <__panic>
800075f8:	24e72114 	addiu	a3,a3,8468
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:349
	uint32_t ino;
	bool create = (index == din->blocks);
	if ((ret = sfs_bmap_get_nolock(sfs, sin, index, create, &ino)) != 0) {
		return ret;
	}
	assert(sfs_block_inuse(sfs, ino));
800075fc:	3c068002 	lui	a2,0x8002
80007600:	3c078002 	lui	a3,0x8002
80007604:	24842028 	addiu	a0,a0,8232
80007608:	2405015d 	li	a1,349
8000760c:	24c60e28 	addiu	a2,a2,3624
80007610:	0c006b0b 	jal	8001ac2c <__panic>
80007614:	24e72164 	addiu	a3,a3,8548
sfs_bmap_get_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:266
			return ret;
		}
	}

out:
	assert(ino == 0 || sfs_block_inuse(sfs, ino));
80007618:	3c048002 	lui	a0,0x8002
8000761c:	3c068002 	lui	a2,0x8002
80007620:	3c078002 	lui	a3,0x8002
80007624:	24842028 	addiu	a0,a0,8232
80007628:	2405010a 	li	a1,266
8000762c:	24c60e28 	addiu	a2,a2,3624
80007630:	0c006b0b 	jal	8001ac2c <__panic>
80007634:	24e72158 	addiu	a3,a3,8536
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:253
	     sfs_bmap_get_sub_nolock(sfs, &ent, index / SFS_BLK_NENTRY, create,
				     &ino)) != 0) {
		return ret;
	}
	if (ent != din->db_indirect) {
		assert(din->db_indirect == 0);
80007638:	3c068002 	lui	a2,0x8002
8000763c:	3c078002 	lui	a3,0x8002
80007640:	24842028 	addiu	a0,a0,8232
80007644:	240500fd 	li	a1,253
80007648:	24c60e28 	addiu	a2,a2,3624
8000764c:	0c006b0b 	jal	8001ac2c <__panic>
80007650:	24e72140 	addiu	a3,a3,8512
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:238
		     sfs_bmap_get_sub_nolock(sfs, &ent, index, create,
					     &ino)) != 0) {
			return ret;
		}
		if (ent != din->indirect) {
			assert(din->indirect == 0);
80007654:	3c068002 	lui	a2,0x8002
80007658:	3c078002 	lui	a3,0x8002
8000765c:	24842028 	addiu	a0,a0,8232
80007660:	240500ee 	li	a1,238
80007664:	24c60e28 	addiu	a2,a2,3624
80007668:	0c006b0b 	jal	8001ac2c <__panic>
8000766c:	24e7212c 	addiu	a3,a3,8492

80007670 <sfs_io_nolock>:
sfs_io_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:609

static int
sfs_io_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, void *buf,
	      off_t offset, size_t * alenp, bool write)
{
	struct sfs_disk_inode *din = sin->din;
80007670:	8ca30000 	lw	v1,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:608
}

static int
sfs_io_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, void *buf,
	      off_t offset, size_t * alenp, bool write)
{
80007674:	27bdffa8 	addiu	sp,sp,-88
80007678:	afb7004c 	sw	s7,76(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:610
	struct sfs_disk_inode *din = sin->din;
	assert(din->type != SFS_TYPE_DIR);
8000767c:	94620008 	lhu	v0,8(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:609

static int
sfs_io_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, void *buf,
	      off_t offset, size_t * alenp, bool write)
{
	struct sfs_disk_inode *din = sin->din;
80007680:	afa30020 	sw	v1,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:610
	assert(din->type != SFS_TYPE_DIR);
80007684:	24030002 	li	v1,2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:608
}

static int
sfs_io_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, void *buf,
	      off_t offset, size_t * alenp, bool write)
{
80007688:	afb50044 	sw	s5,68(sp)
8000768c:	afb3003c 	sw	s3,60(sp)
80007690:	afb20038 	sw	s2,56(sp)
80007694:	0080a821 	move	s5,a0
80007698:	afbf0054 	sw	ra,84(sp)
8000769c:	afbe0050 	sw	s8,80(sp)
800076a0:	afb60048 	sw	s6,72(sp)
800076a4:	afb40040 	sw	s4,64(sp)
800076a8:	afb10034 	sw	s1,52(sp)
800076ac:	afb00030 	sw	s0,48(sp)
800076b0:	00a0b821 	move	s7,a1
800076b4:	00c09021 	move	s2,a2
800076b8:	00e09821 	move	s3,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:610
	struct sfs_disk_inode *din = sin->din;
	assert(din->type != SFS_TYPE_DIR);
800076bc:	10430093 	beq	v0,v1,8000790c <sfs_io_nolock+0x29c>
800076c0:	8fa4006c 	lw	a0,108(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:611
	off_t endpos = offset + *alenp, blkoff;
800076c4:	8fa60068 	lw	a2,104(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:613
	*alenp = 0;
	if (offset < 0 || offset >= SFS_MAX_FILE_SIZE || offset > endpos) {
800076c8:	3c030800 	lui	v1,0x800
800076cc:	00e3282b 	sltu	a1,a3,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:611
sfs_io_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, void *buf,
	      off_t offset, size_t * alenp, bool write)
{
	struct sfs_disk_inode *din = sin->din;
	assert(din->type != SFS_TYPE_DIR);
	off_t endpos = offset + *alenp, blkoff;
800076d0:	8cd60000 	lw	s6,0(a2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:614
	*alenp = 0;
	if (offset < 0 || offset >= SFS_MAX_FILE_SIZE || offset > endpos) {
		return -E_INVAL;
800076d4:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:613
{
	struct sfs_disk_inode *din = sin->din;
	assert(din->type != SFS_TYPE_DIR);
	off_t endpos = offset + *alenp, blkoff;
	*alenp = 0;
	if (offset < 0 || offset >= SFS_MAX_FILE_SIZE || offset > endpos) {
800076d8:	10a00036 	beqz	a1,800077b4 <sfs_io_nolock+0x144>
800076dc:	acc00000 	sw	zero,0(a2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:611
sfs_io_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, void *buf,
	      off_t offset, size_t * alenp, bool write)
{
	struct sfs_disk_inode *din = sin->din;
	assert(din->type != SFS_TYPE_DIR);
	off_t endpos = offset + *alenp, blkoff;
800076e0:	02c7b021 	addu	s6,s6,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:613
	*alenp = 0;
	if (offset < 0 || offset >= SFS_MAX_FILE_SIZE || offset > endpos) {
800076e4:	02c7282a 	slt	a1,s6,a3
800076e8:	54a00033 	bnezl	a1,800077b8 <sfs_io_nolock+0x148>
800076ec:	8fbf0054 	lw	ra,84(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:616
		return -E_INVAL;
	}
	if (offset == endpos) {
800076f0:	10f60030 	beq	a3,s6,800077b4 <sfs_io_nolock+0x144>
800076f4:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:619
		return 0;
	}
	if (endpos > SFS_MAX_FILE_SIZE) {
800076f8:	24620001 	addiu	v0,v1,1
800076fc:	02c2102b 	sltu	v0,s6,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:622
		endpos = SFS_MAX_FILE_SIZE;
	}
	if (!write) {
80007700:	10800071 	beqz	a0,800078c8 <sfs_io_nolock+0x258>
80007704:	0062b00a 	movz	s6,v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:636
	int (*sfs_buf_op) (struct sfs_fs * sfs, void *buf, size_t len,
			   uint32_t blkno, off_t offset);
	int (*sfs_block_op) (struct sfs_fs * sfs, void *buf, uint32_t blkno,
			     uint32_t nblks);
	if (write) {
		sfs_buf_op = sfs_wbuf, sfs_block_op = sfs_wblock;
80007708:	3c028001 	lui	v0,0x8001
8000770c:	3c1e8001 	lui	s8,0x8001
80007710:	2442aedc 	addiu	v0,v0,-20772
80007714:	27deade8 	addiu	s8,s8,-21016
80007718:	afa20024 	sw	v0,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:647
	size_t size, alen = 0;
	uint32_t ino;
	uint32_t blkno = offset / SFS_BLKSIZE;
	uint32_t nblks = endpos / SFS_BLKSIZE - blkno;

	if ((blkoff = offset % SFS_BLKSIZE) != 0) {
8000771c:	001317c3 	sra	v0,s3,0x1f
80007720:	00021502 	srl	v0,v0,0x14
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:644
	}

	int ret = 0;
	size_t size, alen = 0;
	uint32_t ino;
	uint32_t blkno = offset / SFS_BLKSIZE;
80007724:	2a700000 	slti	s0,s3,0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:645
	uint32_t nblks = endpos / SFS_BLKSIZE - blkno;
80007728:	2ad10000 	slti	s1,s6,0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:644
	}

	int ret = 0;
	size_t size, alen = 0;
	uint32_t ino;
	uint32_t blkno = offset / SFS_BLKSIZE;
8000772c:	26650fff 	addiu	a1,s3,4095
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:645
	uint32_t nblks = endpos / SFS_BLKSIZE - blkno;
80007730:	26c40fff 	addiu	a0,s6,4095
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:647

	if ((blkoff = offset % SFS_BLKSIZE) != 0) {
80007734:	02621821 	addu	v1,s3,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:644
	}

	int ret = 0;
	size_t size, alen = 0;
	uint32_t ino;
	uint32_t blkno = offset / SFS_BLKSIZE;
80007738:	0270280a 	movz	a1,s3,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:645
	uint32_t nblks = endpos / SFS_BLKSIZE - blkno;
8000773c:	02d1200a 	movz	a0,s6,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:647

	if ((blkoff = offset % SFS_BLKSIZE) != 0) {
80007740:	30630fff 	andi	v1,v1,0xfff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:644
	}

	int ret = 0;
	size_t size, alen = 0;
	uint32_t ino;
	uint32_t blkno = offset / SFS_BLKSIZE;
80007744:	00058303 	sra	s0,a1,0xc
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:645
	uint32_t nblks = endpos / SFS_BLKSIZE - blkno;
80007748:	00048b03 	sra	s1,a0,0xc
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:647

	if ((blkoff = offset % SFS_BLKSIZE) != 0) {
8000774c:	00621823 	subu	v1,v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:645

	int ret = 0;
	size_t size, alen = 0;
	uint32_t ino;
	uint32_t blkno = offset / SFS_BLKSIZE;
	uint32_t nblks = endpos / SFS_BLKSIZE - blkno;
80007750:	02308823 	subu	s1,s1,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:647

	if ((blkoff = offset % SFS_BLKSIZE) != 0) {
80007754:	10600031 	beqz	v1,8000781c <sfs_io_nolock+0x1ac>
80007758:	0000a021 	move	s4,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:649
		size =
		    (nblks != 0) ? (SFS_BLKSIZE - blkoff) : (endpos - offset);
8000775c:	02d32023 	subu	a0,s6,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:648
	uint32_t ino;
	uint32_t blkno = offset / SFS_BLKSIZE;
	uint32_t nblks = endpos / SFS_BLKSIZE - blkno;

	if ((blkoff = offset % SFS_BLKSIZE) != 0) {
		size =
80007760:	16200066 	bnez	s1,800078fc <sfs_io_nolock+0x28c>
80007764:	afa40028 	sw	a0,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:650
		    (nblks != 0) ? (SFS_BLKSIZE - blkoff) : (endpos - offset);
		if ((ret = sfs_bmap_load_nolock(sfs, sin, blkno, &ino)) != 0) {
80007768:	02a02021 	move	a0,s5
8000776c:	02e02821 	move	a1,s7
80007770:	02003021 	move	a2,s0
80007774:	27a70018 	addiu	a3,sp,24
80007778:	0c001cf7 	jal	800073dc <sfs_bmap_load_nolock>
8000777c:	afa3002c 	sw	v1,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:642
	} else {
		sfs_buf_op = sfs_rbuf, sfs_block_op = sfs_rblock;
	}

	int ret = 0;
	size_t size, alen = 0;
80007780:	0000a021 	move	s4,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:650
	uint32_t nblks = endpos / SFS_BLKSIZE - blkno;

	if ((blkoff = offset % SFS_BLKSIZE) != 0) {
		size =
		    (nblks != 0) ? (SFS_BLKSIZE - blkoff) : (endpos - offset);
		if ((ret = sfs_bmap_load_nolock(sfs, sin, blkno, &ino)) != 0) {
80007784:	10400017 	beqz	v0,800077e4 <sfs_io_nolock+0x174>
80007788:	8fa3002c 	lw	v1,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:685
		}
		alen += size;
	}

out:
	*alenp = alen;
8000778c:	8fa30068 	lw	v1,104(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:686
	if (offset + alen > din->fileinfo.size) {
80007790:	8fa40020 	lw	a0,32(sp)
80007794:	02939821 	addu	s3,s4,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:685
		}
		alen += size;
	}

out:
	*alenp = alen;
80007798:	ac740000 	sw	s4,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:686
	if (offset + alen > din->fileinfo.size) {
8000779c:	8c830000 	lw	v1,0(a0)
800077a0:	0073182b 	sltu	v1,v1,s3
800077a4:	10600003 	beqz	v1,800077b4 <sfs_io_nolock+0x144>
800077a8:	24030001 	li	v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:687
		din->fileinfo.size = offset + alen;
800077ac:	ac930000 	sw	s3,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:688
		sin->dirty = 1;
800077b0:	aee3000c 	sw	v1,12(s7)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:691
	}
	return ret;
}
800077b4:	8fbf0054 	lw	ra,84(sp)
800077b8:	8fbe0050 	lw	s8,80(sp)
800077bc:	8fb7004c 	lw	s7,76(sp)
800077c0:	8fb60048 	lw	s6,72(sp)
800077c4:	8fb50044 	lw	s5,68(sp)
800077c8:	8fb40040 	lw	s4,64(sp)
800077cc:	8fb3003c 	lw	s3,60(sp)
800077d0:	8fb20038 	lw	s2,56(sp)
800077d4:	8fb10034 	lw	s1,52(sp)
800077d8:	8fb00030 	lw	s0,48(sp)
800077dc:	03e00008 	jr	ra
800077e0:	27bd0058 	addiu	sp,sp,88
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:653
		size =
		    (nblks != 0) ? (SFS_BLKSIZE - blkoff) : (endpos - offset);
		if ((ret = sfs_bmap_load_nolock(sfs, sin, blkno, &ino)) != 0) {
			goto out;
		}
		if ((ret = sfs_buf_op(sfs, buf, size, ino, blkoff)) != 0) {
800077e4:	afa30010 	sw	v1,16(sp)
800077e8:	8fa60028 	lw	a2,40(sp)
800077ec:	8fa70018 	lw	a3,24(sp)
800077f0:	8fa30024 	lw	v1,36(sp)
800077f4:	02a02021 	move	a0,s5
800077f8:	0060f809 	jalr	v1
800077fc:	02402821 	move	a1,s2
80007800:	1440ffe3 	bnez	v0,80007790 <sfs_io_nolock+0x120>
80007804:	8fa30068 	lw	v1,104(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:657
			goto out;
		}
		alen += size;
		if (nblks == 0) {
80007808:	1220ffe1 	beqz	s1,80007790 <sfs_io_nolock+0x120>
8000780c:	8fb40028 	lw	s4,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:660
			goto out;
		}
		buf += size, blkno++, nblks--;
80007810:	02549021 	addu	s2,s2,s4
80007814:	26100001 	addiu	s0,s0,1
80007818:	2631ffff 	addiu	s1,s1,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:664
	}

	size = SFS_BLKSIZE;
	while (nblks != 0) {
8000781c:	12200013 	beqz	s1,8000786c <sfs_io_nolock+0x1fc>
80007820:	001617c3 	sra	v0,s6,0x1f
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:665
		if ((ret = sfs_bmap_load_nolock(sfs, sin, blkno, &ino)) != 0) {
80007824:	02a02021 	move	a0,s5
80007828:	02e02821 	move	a1,s7
8000782c:	02003021 	move	a2,s0
80007830:	0c001cf7 	jal	800073dc <sfs_bmap_load_nolock>
80007834:	27a70018 	addiu	a3,sp,24
80007838:	1440ffd4 	bnez	v0,8000778c <sfs_io_nolock+0x11c>
8000783c:	8fa60018 	lw	a2,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:668
			goto out;
		}
		if ((ret = sfs_block_op(sfs, buf, ino, 1)) != 0) {
80007840:	02a02021 	move	a0,s5
80007844:	02402821 	move	a1,s2
80007848:	03c0f809 	jalr	s8
8000784c:	24070001 	li	a3,1
80007850:	1440ffce 	bnez	v0,8000778c <sfs_io_nolock+0x11c>
80007854:	2631ffff 	addiu	s1,s1,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:671
			goto out;
		}
		alen += size, buf += size, blkno++, nblks--;
80007858:	26941000 	addiu	s4,s4,4096
8000785c:	26521000 	addiu	s2,s2,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:664
		}
		buf += size, blkno++, nblks--;
	}

	size = SFS_BLKSIZE;
	while (nblks != 0) {
80007860:	1620fff0 	bnez	s1,80007824 <sfs_io_nolock+0x1b4>
80007864:	26100001 	addiu	s0,s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:674
			goto out;
		}
		alen += size, buf += size, blkno++, nblks--;
	}

	if ((size = endpos % SFS_BLKSIZE) != 0) {
80007868:	001617c3 	sra	v0,s6,0x1f
8000786c:	00021502 	srl	v0,v0,0x14
80007870:	02c2b021 	addu	s6,s6,v0
80007874:	32d60fff 	andi	s6,s6,0xfff
80007878:	02c2b023 	subu	s6,s6,v0
8000787c:	12c0ffc3 	beqz	s6,8000778c <sfs_io_nolock+0x11c>
80007880:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:675
		if ((ret = sfs_bmap_load_nolock(sfs, sin, blkno, &ino)) != 0) {
80007884:	02a02021 	move	a0,s5
80007888:	02e02821 	move	a1,s7
8000788c:	02003021 	move	a2,s0
80007890:	0c001cf7 	jal	800073dc <sfs_bmap_load_nolock>
80007894:	27a70018 	addiu	a3,sp,24
80007898:	1440ffbd 	bnez	v0,80007790 <sfs_io_nolock+0x120>
8000789c:	8fa30068 	lw	v1,104(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:678
			goto out;
		}
		if ((ret = sfs_buf_op(sfs, buf, size, ino, 0)) != 0) {
800078a0:	8fa70018 	lw	a3,24(sp)
800078a4:	8fa30024 	lw	v1,36(sp)
800078a8:	02c03021 	move	a2,s6
800078ac:	afa00010 	sw	zero,16(sp)
800078b0:	02a02021 	move	a0,s5
800078b4:	0060f809 	jalr	v1
800078b8:	02402821 	move	a1,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:681
			goto out;
		}
		alen += size;
800078bc:	0296b021 	addu	s6,s4,s6
800078c0:	08001de3 	j	8000778c <sfs_io_nolock+0x11c>
800078c4:	02c2a00a 	movz	s4,s6,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:623
	}
	if (endpos > SFS_MAX_FILE_SIZE) {
		endpos = SFS_MAX_FILE_SIZE;
	}
	if (!write) {
		if (offset >= din->fileinfo.size) {
800078c8:	8fa20020 	lw	v0,32(sp)
800078cc:	8c430000 	lw	v1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:624
			return 0;
800078d0:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:623
	}
	if (endpos > SFS_MAX_FILE_SIZE) {
		endpos = SFS_MAX_FILE_SIZE;
	}
	if (!write) {
		if (offset >= din->fileinfo.size) {
800078d4:	00e3202b 	sltu	a0,a3,v1
800078d8:	1080ffb6 	beqz	a0,800077b4 <sfs_io_nolock+0x144>
800078dc:	3c1e8001 	lui	s8,0x8001
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:626
			return 0;
		}
		if (endpos > din->fileinfo.size) {
800078e0:	0076102b 	sltu	v0,v1,s6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:627
			endpos = din->fileinfo.size;
800078e4:	0062b00b 	movn	s6,v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:638
	int (*sfs_block_op) (struct sfs_fs * sfs, void *buf, uint32_t blkno,
			     uint32_t nblks);
	if (write) {
		sfs_buf_op = sfs_wbuf, sfs_block_op = sfs_wblock;
	} else {
		sfs_buf_op = sfs_rbuf, sfs_block_op = sfs_rblock;
800078e8:	3c028001 	lui	v0,0x8001
800078ec:	2442ae08 	addiu	v0,v0,-20984
800078f0:	27deadcc 	addiu	s8,s8,-21044
800078f4:	08001dc7 	j	8000771c <sfs_io_nolock+0xac>
800078f8:	afa20024 	sw	v0,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:649
	uint32_t blkno = offset / SFS_BLKSIZE;
	uint32_t nblks = endpos / SFS_BLKSIZE - blkno;

	if ((blkoff = offset % SFS_BLKSIZE) != 0) {
		size =
		    (nblks != 0) ? (SFS_BLKSIZE - blkoff) : (endpos - offset);
800078fc:	24021000 	li	v0,4096
80007900:	00431023 	subu	v0,v0,v1
80007904:	08001dda 	j	80007768 <sfs_io_nolock+0xf8>
80007908:	afa20028 	sw	v0,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:610
static int
sfs_io_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, void *buf,
	      off_t offset, size_t * alenp, bool write)
{
	struct sfs_disk_inode *din = sin->din;
	assert(din->type != SFS_TYPE_DIR);
8000790c:	3c048002 	lui	a0,0x8002
80007910:	3c068002 	lui	a2,0x8002
80007914:	3c078002 	lui	a3,0x8002
80007918:	24842028 	addiu	a0,a0,8232
8000791c:	24050262 	li	a1,610
80007920:	24c60e28 	addiu	a2,a2,3624
80007924:	0c006b0b 	jal	8001ac2c <__panic>
80007928:	24e72180 	addiu	a3,a3,8576

8000792c <sfs_dirent_read_nolock>:
sfs_dirent_read_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:376

static int
sfs_dirent_read_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, int slot,
		       struct sfs_disk_entry *entry)
{
	assert(sin->din->type == SFS_TYPE_DIR
8000792c:	8ca20000 	lw	v0,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:375
}

static int
sfs_dirent_read_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, int slot,
		       struct sfs_disk_entry *entry)
{
80007930:	27bdffd0 	addiu	sp,sp,-48
80007934:	afb10028 	sw	s1,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:376
	assert(sin->din->type == SFS_TYPE_DIR
80007938:	94480008 	lhu	t0,8(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:375
}

static int
sfs_dirent_read_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, int slot,
		       struct sfs_disk_entry *entry)
{
8000793c:	00e08821 	move	s1,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:376
	assert(sin->din->type == SFS_TYPE_DIR
80007940:	24070002 	li	a3,2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:375
}

static int
sfs_dirent_read_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, int slot,
		       struct sfs_disk_entry *entry)
{
80007944:	afb00024 	sw	s0,36(sp)
80007948:	afbf002c 	sw	ra,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:376
	assert(sin->din->type == SFS_TYPE_DIR
8000794c:	15070021 	bne	t0,a3,800079d4 <sfs_dirent_read_nolock+0xa8>
80007950:	00808021 	move	s0,a0
80007954:	04c20020 	bltzl	a2,800079d8 <sfs_dirent_read_nolock+0xac>
80007958:	3c048002 	lui	a0,0x8002
8000795c:	8c42000c 	lw	v0,12(v0)
80007960:	00c2182b 	sltu	v1,a2,v0
80007964:	5060001c 	beqzl	v1,800079d8 <sfs_dirent_read_nolock+0xac>
80007968:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:380
	       && (slot >= 0 && slot < sin->din->blocks));
	int ret;
	uint32_t ino;
	if ((ret = sfs_bmap_load_nolock(sfs, sin, slot, &ino)) != 0) {
8000796c:	0c001cf7 	jal	800073dc <sfs_bmap_load_nolock>
80007970:	27a70018 	addiu	a3,sp,24
80007974:	10400006 	beqz	v0,80007990 <sfs_dirent_read_nolock+0x64>
80007978:	8fa50018 	lw	a1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:391
		      0)) != 0) {
		return ret;
	}
	entry->name[SFS_MAX_FNAME_LEN] = '\0';
	return 0;
}
8000797c:	8fbf002c 	lw	ra,44(sp)
80007980:	8fb10028 	lw	s1,40(sp)
80007984:	8fb00024 	lw	s0,36(sp)
80007988:	03e00008 	jr	ra
8000798c:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:383
	int ret;
	uint32_t ino;
	if ((ret = sfs_bmap_load_nolock(sfs, sin, slot, &ino)) != 0) {
		return ret;
	}
	assert(sfs_block_inuse(sfs, ino));
80007990:	0c001ba9 	jal	80006ea4 <sfs_block_inuse>
80007994:	02002021 	move	a0,s0
80007998:	10400016 	beqz	v0,800079f4 <sfs_dirent_read_nolock+0xc8>
8000799c:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:384
	if ((ret =
800079a0:	8fa70018 	lw	a3,24(sp)
800079a4:	02202821 	move	a1,s1
800079a8:	24060104 	li	a2,260
800079ac:	0c002b82 	jal	8000ae08 <sfs_rbuf>
800079b0:	afa00010 	sw	zero,16(sp)
800079b4:	1440fff2 	bnez	v0,80007980 <sfs_dirent_read_nolock+0x54>
800079b8:	8fbf002c 	lw	ra,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:389
	     sfs_rbuf(sfs, entry, sizeof(struct sfs_disk_entry), ino,
		      0)) != 0) {
		return ret;
	}
	entry->name[SFS_MAX_FNAME_LEN] = '\0';
800079bc:	a2200103 	sb	zero,259(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:391
	return 0;
}
800079c0:	8fbf002c 	lw	ra,44(sp)
800079c4:	8fb10028 	lw	s1,40(sp)
800079c8:	8fb00024 	lw	s0,36(sp)
800079cc:	03e00008 	jr	ra
800079d0:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:376

static int
sfs_dirent_read_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, int slot,
		       struct sfs_disk_entry *entry)
{
	assert(sin->din->type == SFS_TYPE_DIR
800079d4:	3c048002 	lui	a0,0x8002
800079d8:	3c068002 	lui	a2,0x8002
800079dc:	3c078002 	lui	a3,0x8002
800079e0:	24842028 	addiu	a0,a0,8232
800079e4:	24050179 	li	a1,377
800079e8:	24c60e28 	addiu	a2,a2,3624
800079ec:	0c006b0b 	jal	8001ac2c <__panic>
800079f0:	24e7219c 	addiu	a3,a3,8604
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:383
	int ret;
	uint32_t ino;
	if ((ret = sfs_bmap_load_nolock(sfs, sin, slot, &ino)) != 0) {
		return ret;
	}
	assert(sfs_block_inuse(sfs, ino));
800079f4:	3c048002 	lui	a0,0x8002
800079f8:	3c068002 	lui	a2,0x8002
800079fc:	3c078002 	lui	a3,0x8002
80007a00:	24842028 	addiu	a0,a0,8232
80007a04:	2405017f 	li	a1,383
80007a08:	24c60e28 	addiu	a2,a2,3624
80007a0c:	0c006b0b 	jal	8001ac2c <__panic>
80007a10:	24e72164 	addiu	a3,a3,8548

80007a14 <sfs_dirent_search_nolock>:
sfs_dirent_search_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:474

static int
sfs_dirent_search_nolock(struct sfs_fs *sfs, struct sfs_inode *sin,
			 const char *name, uint32_t * ino_store, int *slot,
			 int *empty_slot)
{
80007a14:	27bdffc0 	addiu	sp,sp,-64
80007a18:	afb5002c 	sw	s5,44(sp)
80007a1c:	0080a821 	move	s5,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:475
	assert(strlen(name) <= SFS_MAX_FNAME_LEN);
80007a20:	00c02021 	move	a0,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:474

static int
sfs_dirent_search_nolock(struct sfs_fs *sfs, struct sfs_inode *sin,
			 const char *name, uint32_t * ino_store, int *slot,
			 int *empty_slot)
{
80007a24:	afbe0038 	sw	s8,56(sp)
80007a28:	afb60030 	sw	s6,48(sp)
80007a2c:	afb40028 	sw	s4,40(sp)
80007a30:	afb20020 	sw	s2,32(sp)
80007a34:	afbf003c 	sw	ra,60(sp)
80007a38:	afb70034 	sw	s7,52(sp)
80007a3c:	afb30024 	sw	s3,36(sp)
80007a40:	afb1001c 	sw	s1,28(sp)
80007a44:	afb00018 	sw	s0,24(sp)
80007a48:	00c0b021 	move	s6,a2
80007a4c:	00a0a021 	move	s4,a1
80007a50:	00e0f021 	move	s8,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:475
	assert(strlen(name) <= SFS_MAX_FNAME_LEN);
80007a54:	0c005b79 	jal	80016de4 <strlen>
80007a58:	8fb20054 	lw	s2,84(sp)
80007a5c:	2c420100 	sltiu	v0,v0,256
80007a60:	10400040 	beqz	v0,80007b64 <sfs_dirent_search_nolock+0x150>
80007a64:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:477
	struct sfs_disk_entry *entry;
	if ((entry = kmalloc(sizeof(struct sfs_disk_entry))) == NULL) {
80007a68:	0c005486 	jal	80015218 <kmalloc>
80007a6c:	24040104 	li	a0,260
80007a70:	00408821 	move	s1,v0
80007a74:	10400029 	beqz	v0,80007b1c <sfs_dirent_search_nolock+0x108>
80007a78:	2403fff4 	li	v1,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:481
		return -E_NO_MEM;
	}
#define set_pvalue(x, v)            do { if ((x) != NULL) { *(x) = (v); } } while (0)
	int ret, i, nslots = sin->din->blocks;
80007a7c:	8e820000 	lw	v0,0(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:482
	set_pvalue(empty_slot, nslots);
80007a80:	12400002 	beqz	s2,80007a8c <sfs_dirent_search_nolock+0x78>
80007a84:	8c53000c 	lw	s3,12(v0)
80007a88:	ae530000 	sw	s3,0(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:483
	for (i = 0; i < nslots; i++) {
80007a8c:	1a60001f 	blez	s3,80007b0c <sfs_dirent_search_nolock+0xf8>
80007a90:	2403fffe 	li	v1,-2
80007a94:	00008021 	move	s0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:491
		}
		if (entry->ino == 0) {
			set_pvalue(empty_slot, i);
			continue;
		}
		if (strcmp(name, entry->name) == 0) {
80007a98:	08001ead 	j	80007ab4 <sfs_dirent_search_nolock+0xa0>
80007a9c:	26370004 	addiu	s7,s1,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:488
	for (i = 0; i < nslots; i++) {
		if ((ret = sfs_dirent_read_nolock(sfs, sin, i, entry)) != 0) {
			goto out;
		}
		if (entry->ino == 0) {
			set_pvalue(empty_slot, i);
80007aa0:	56400001 	bnezl	s2,80007aa8 <sfs_dirent_search_nolock+0x94>
80007aa4:	ae500000 	sw	s0,0(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:483
		return -E_NO_MEM;
	}
#define set_pvalue(x, v)            do { if ((x) != NULL) { *(x) = (v); } } while (0)
	int ret, i, nslots = sin->din->blocks;
	set_pvalue(empty_slot, nslots);
	for (i = 0; i < nslots; i++) {
80007aa8:	26100001 	addiu	s0,s0,1
80007aac:	12700028 	beq	s3,s0,80007b50 <sfs_dirent_search_nolock+0x13c>
80007ab0:	2403fffe 	li	v1,-2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:484
		if ((ret = sfs_dirent_read_nolock(sfs, sin, i, entry)) != 0) {
80007ab4:	02a02021 	move	a0,s5
80007ab8:	02802821 	move	a1,s4
80007abc:	02003021 	move	a2,s0
80007ac0:	0c001e4b 	jal	8000792c <sfs_dirent_read_nolock>
80007ac4:	02203821 	move	a3,s1
80007ac8:	14400010 	bnez	v0,80007b0c <sfs_dirent_search_nolock+0xf8>
80007acc:	00401821 	move	v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:487
			goto out;
		}
		if (entry->ino == 0) {
80007ad0:	8e220000 	lw	v0,0(s1)
80007ad4:	1040fff2 	beqz	v0,80007aa0 <sfs_dirent_search_nolock+0x8c>
80007ad8:	02c02021 	move	a0,s6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:491
			set_pvalue(empty_slot, i);
			continue;
		}
		if (strcmp(name, entry->name) == 0) {
80007adc:	02e02821 	move	a1,s7
80007ae0:	0c005bb8 	jal	80016ee0 <strcmp>
80007ae4:	afa30010 	sw	v1,16(sp)
80007ae8:	1440ffef 	bnez	v0,80007aa8 <sfs_dirent_search_nolock+0x94>
80007aec:	8fa30010 	lw	v1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:492
			set_pvalue(slot, i);
80007af0:	8fa20050 	lw	v0,80(sp)
80007af4:	54400001 	bnezl	v0,80007afc <sfs_dirent_search_nolock+0xe8>
80007af8:	ac500000 	sw	s0,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:493
			set_pvalue(ino_store, entry->ino);
80007afc:	13c00004 	beqz	s8,80007b10 <sfs_dirent_search_nolock+0xfc>
80007b00:	02202021 	move	a0,s1
80007b04:	8e220000 	lw	v0,0(s1)
80007b08:	afc20000 	sw	v0,0(s8)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:500
		}
	}
#undef set_pvalue
	ret = -E_NOENT;
out:
	kfree(entry);
80007b0c:	02202021 	move	a0,s1
80007b10:	0c0054b1 	jal	800152c4 <kfree>
80007b14:	afa30010 	sw	v1,16(sp)
80007b18:	8fa30010 	lw	v1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:502
	return ret;
}
80007b1c:	8fbf003c 	lw	ra,60(sp)
80007b20:	00601021 	move	v0,v1
80007b24:	8fbe0038 	lw	s8,56(sp)
80007b28:	8fb70034 	lw	s7,52(sp)
80007b2c:	8fb60030 	lw	s6,48(sp)
80007b30:	8fb5002c 	lw	s5,44(sp)
80007b34:	8fb40028 	lw	s4,40(sp)
80007b38:	8fb30024 	lw	s3,36(sp)
80007b3c:	8fb20020 	lw	s2,32(sp)
80007b40:	8fb1001c 	lw	s1,28(sp)
80007b44:	8fb00018 	lw	s0,24(sp)
80007b48:	03e00008 	jr	ra
80007b4c:	27bd0040 	addiu	sp,sp,64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:500
		}
	}
#undef set_pvalue
	ret = -E_NOENT;
out:
	kfree(entry);
80007b50:	02202021 	move	a0,s1
80007b54:	0c0054b1 	jal	800152c4 <kfree>
80007b58:	afa30010 	sw	v1,16(sp)
80007b5c:	08001ec7 	j	80007b1c <sfs_dirent_search_nolock+0x108>
80007b60:	8fa30010 	lw	v1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:475
static int
sfs_dirent_search_nolock(struct sfs_fs *sfs, struct sfs_inode *sin,
			 const char *name, uint32_t * ino_store, int *slot,
			 int *empty_slot)
{
	assert(strlen(name) <= SFS_MAX_FNAME_LEN);
80007b64:	3c068002 	lui	a2,0x8002
80007b68:	3c078002 	lui	a3,0x8002
80007b6c:	24842028 	addiu	a0,a0,8232
80007b70:	240501db 	li	a1,475
80007b74:	24c60e28 	addiu	a2,a2,3624
80007b78:	0c006b0b 	jal	8001ac2c <__panic>
80007b7c:	24e721e8 	addiu	a3,a3,8680

80007b80 <sfs_dirent_write_nolock>:
sfs_dirent_write_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:397

static int
sfs_dirent_write_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, int slot,
			uint32_t ino, const char *name)
{
	assert(sin->din->type == SFS_TYPE_DIR
80007b80:	8ca20000 	lw	v0,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:396
}

static int
sfs_dirent_write_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, int slot,
			uint32_t ino, const char *name)
{
80007b84:	27bdffc8 	addiu	sp,sp,-56
80007b88:	afb3002c 	sw	s3,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:397
	assert(sin->din->type == SFS_TYPE_DIR
80007b8c:	94430008 	lhu	v1,8(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:396
}

static int
sfs_dirent_write_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, int slot,
			uint32_t ino, const char *name)
{
80007b90:	00809821 	move	s3,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:397
	assert(sin->din->type == SFS_TYPE_DIR
80007b94:	24040002 	li	a0,2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:396
}

static int
sfs_dirent_write_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, int slot,
			uint32_t ino, const char *name)
{
80007b98:	afb40030 	sw	s4,48(sp)
80007b9c:	afb20028 	sw	s2,40(sp)
80007ba0:	afb10024 	sw	s1,36(sp)
80007ba4:	afbf0034 	sw	ra,52(sp)
80007ba8:	afb00020 	sw	s0,32(sp)
80007bac:	00a09021 	move	s2,a1
80007bb0:	00c08821 	move	s1,a2
80007bb4:	afa70044 	sw	a3,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:397
	assert(sin->din->type == SFS_TYPE_DIR
80007bb8:	1464003b 	bne	v1,a0,80007ca8 <sfs_dirent_write_nolock+0x128>
80007bbc:	8fb40048 	lw	s4,72(sp)
80007bc0:	04c0003a 	bltz	a2,80007cac <sfs_dirent_write_nolock+0x12c>
80007bc4:	3c048002 	lui	a0,0x8002
80007bc8:	8c42000c 	lw	v0,12(v0)
80007bcc:	0046102b 	sltu	v0,v0,a2
80007bd0:	14400037 	bnez	v0,80007cb0 <sfs_dirent_write_nolock+0x130>
80007bd4:	3c068002 	lui	a2,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:400
	       && (slot >= 0 && slot <= sin->din->blocks));
	struct sfs_disk_entry *entry;
	if ((entry = kmalloc(sizeof(struct sfs_disk_entry))) == NULL) {
80007bd8:	0c005486 	jal	80015218 <kmalloc>
80007bdc:	24040104 	li	a0,260
80007be0:	1040002f 	beqz	v0,80007ca0 <sfs_dirent_write_nolock+0x120>
80007be4:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:403
		return -E_NO_MEM;
	}
	memset(entry, 0, sizeof(struct sfs_disk_entry));
80007be8:	00402021 	move	a0,v0
80007bec:	00002821 	move	a1,zero
80007bf0:	0c005c52 	jal	80017148 <memset>
80007bf4:	24060104 	li	a2,260
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:405

	if (ino != 0) {
80007bf8:	8fa20044 	lw	v0,68(sp)
80007bfc:	1040000b 	beqz	v0,80007c2c <sfs_dirent_write_nolock+0xac>
80007c00:	02602021 	move	a0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:406
		assert(strlen(name) <= SFS_MAX_FNAME_LEN);
80007c04:	0c005b79 	jal	80016de4 <strlen>
80007c08:	02802021 	move	a0,s4
80007c0c:	2c420100 	sltiu	v0,v0,256
80007c10:	1040002d 	beqz	v0,80007cc8 <sfs_dirent_write_nolock+0x148>
80007c14:	8fa20044 	lw	v0,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:407
		entry->ino = ino, strcpy(entry->name, name);
80007c18:	26040004 	addiu	a0,s0,4
80007c1c:	02802821 	move	a1,s4
80007c20:	0c005b92 	jal	80016e48 <strcpy>
80007c24:	ae020000 	sw	v0,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:410
	}
	int ret;
	if ((ret = sfs_bmap_load_nolock(sfs, sin, slot, &ino)) != 0) {
80007c28:	02602021 	move	a0,s3
80007c2c:	02402821 	move	a1,s2
80007c30:	02203021 	move	a2,s1
80007c34:	0c001cf7 	jal	800073dc <sfs_bmap_load_nolock>
80007c38:	27a70044 	addiu	a3,sp,68
80007c3c:	1040000d 	beqz	v0,80007c74 <sfs_dirent_write_nolock+0xf4>
80007c40:	8fa50044 	lw	a1,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:416
		goto out;
	}
	assert(sfs_block_inuse(sfs, ino));
	ret = sfs_wbuf(sfs, entry, sizeof(struct sfs_disk_entry), ino, 0);
out:
	kfree(entry);
80007c44:	02002021 	move	a0,s0
80007c48:	0c0054b1 	jal	800152c4 <kfree>
80007c4c:	afa20018 	sw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:417
	return ret;
80007c50:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:418
}
80007c54:	8fbf0034 	lw	ra,52(sp)
80007c58:	8fb40030 	lw	s4,48(sp)
80007c5c:	8fb3002c 	lw	s3,44(sp)
80007c60:	8fb20028 	lw	s2,40(sp)
80007c64:	8fb10024 	lw	s1,36(sp)
80007c68:	8fb00020 	lw	s0,32(sp)
80007c6c:	03e00008 	jr	ra
80007c70:	27bd0038 	addiu	sp,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:413
	}
	int ret;
	if ((ret = sfs_bmap_load_nolock(sfs, sin, slot, &ino)) != 0) {
		goto out;
	}
	assert(sfs_block_inuse(sfs, ino));
80007c74:	0c001ba9 	jal	80006ea4 <sfs_block_inuse>
80007c78:	02602021 	move	a0,s3
80007c7c:	1040001a 	beqz	v0,80007ce8 <sfs_dirent_write_nolock+0x168>
80007c80:	02602021 	move	a0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:414
	ret = sfs_wbuf(sfs, entry, sizeof(struct sfs_disk_entry), ino, 0);
80007c84:	8fa70044 	lw	a3,68(sp)
80007c88:	02002821 	move	a1,s0
80007c8c:	24060104 	li	a2,260
80007c90:	0c002bb7 	jal	8000aedc <sfs_wbuf>
80007c94:	afa00010 	sw	zero,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:416
out:
	kfree(entry);
80007c98:	08001f12 	j	80007c48 <sfs_dirent_write_nolock+0xc8>
80007c9c:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:401
{
	assert(sin->din->type == SFS_TYPE_DIR
	       && (slot >= 0 && slot <= sin->din->blocks));
	struct sfs_disk_entry *entry;
	if ((entry = kmalloc(sizeof(struct sfs_disk_entry))) == NULL) {
		return -E_NO_MEM;
80007ca0:	08001f15 	j	80007c54 <sfs_dirent_write_nolock+0xd4>
80007ca4:	2402fff4 	li	v0,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:397

static int
sfs_dirent_write_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, int slot,
			uint32_t ino, const char *name)
{
	assert(sin->din->type == SFS_TYPE_DIR
80007ca8:	3c048002 	lui	a0,0x8002
80007cac:	3c068002 	lui	a2,0x8002
80007cb0:	3c078002 	lui	a3,0x8002
80007cb4:	24842028 	addiu	a0,a0,8232
80007cb8:	2405018e 	li	a1,398
80007cbc:	24c60e28 	addiu	a2,a2,3624
80007cc0:	0c006b0b 	jal	8001ac2c <__panic>
80007cc4:	24e7220c 	addiu	a3,a3,8716
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:406
		return -E_NO_MEM;
	}
	memset(entry, 0, sizeof(struct sfs_disk_entry));

	if (ino != 0) {
		assert(strlen(name) <= SFS_MAX_FNAME_LEN);
80007cc8:	3c048002 	lui	a0,0x8002
80007ccc:	3c068002 	lui	a2,0x8002
80007cd0:	3c078002 	lui	a3,0x8002
80007cd4:	24842028 	addiu	a0,a0,8232
80007cd8:	24050196 	li	a1,406
80007cdc:	24c60e28 	addiu	a2,a2,3624
80007ce0:	0c006b0b 	jal	8001ac2c <__panic>
80007ce4:	24e721e8 	addiu	a3,a3,8680
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:413
	}
	int ret;
	if ((ret = sfs_bmap_load_nolock(sfs, sin, slot, &ino)) != 0) {
		goto out;
	}
	assert(sfs_block_inuse(sfs, ino));
80007ce8:	3c048002 	lui	a0,0x8002
80007cec:	3c068002 	lui	a2,0x8002
80007cf0:	3c078002 	lui	a3,0x8002
80007cf4:	24842028 	addiu	a0,a0,8232
80007cf8:	2405019d 	li	a1,413
80007cfc:	24c60e28 	addiu	a2,a2,3624
80007d00:	0c006b0b 	jal	8001ac2c <__panic>
80007d04:	24e72164 	addiu	a3,a3,8548

80007d08 <sfs_bmap_free_sub_nolock>:
sfs_bmap_free_sub_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:273
	return 0;
}

static int
sfs_bmap_free_sub_nolock(struct sfs_fs *sfs, uint32_t ent, uint32_t index)
{
80007d08:	27bdffc8 	addiu	sp,sp,-56
80007d0c:	afb1002c 	sw	s1,44(sp)
80007d10:	afb00028 	sw	s0,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:274
	assert(sfs_block_inuse(sfs, ent) && index < SFS_BLK_NENTRY);
80007d14:	afa60020 	sw	a2,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:273
	return 0;
}

static int
sfs_bmap_free_sub_nolock(struct sfs_fs *sfs, uint32_t ent, uint32_t index)
{
80007d18:	afbf0034 	sw	ra,52(sp)
80007d1c:	afb20030 	sw	s2,48(sp)
80007d20:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:274
	assert(sfs_block_inuse(sfs, ent) && index < SFS_BLK_NENTRY);
80007d24:	0c001ba9 	jal	80006ea4 <sfs_block_inuse>
80007d28:	00a08821 	move	s1,a1
80007d2c:	10400022 	beqz	v0,80007db8 <sfs_bmap_free_sub_nolock+0xb0>
80007d30:	8fa60020 	lw	a2,32(sp)
80007d34:	2cc20400 	sltiu	v0,a2,1024
80007d38:	1040001f 	beqz	v0,80007db8 <sfs_bmap_free_sub_nolock+0xb0>
80007d3c:	00069080 	sll	s2,a2,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:278
	int ret;
	uint32_t ino, zero = 0;
	off_t offset = index * sizeof(uint32_t);
	if ((ret = sfs_rbuf(sfs, &ino, sizeof(uint32_t), ent, offset)) != 0) {
80007d40:	02002021 	move	a0,s0
80007d44:	27a5001c 	addiu	a1,sp,28
80007d48:	24060004 	li	a2,4
80007d4c:	02203821 	move	a3,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:276
static int
sfs_bmap_free_sub_nolock(struct sfs_fs *sfs, uint32_t ent, uint32_t index)
{
	assert(sfs_block_inuse(sfs, ent) && index < SFS_BLK_NENTRY);
	int ret;
	uint32_t ino, zero = 0;
80007d50:	afa00018 	sw	zero,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:278
	off_t offset = index * sizeof(uint32_t);
	if ((ret = sfs_rbuf(sfs, &ino, sizeof(uint32_t), ent, offset)) != 0) {
80007d54:	0c002b82 	jal	8000ae08 <sfs_rbuf>
80007d58:	afb20010 	sw	s2,16(sp)
80007d5c:	14400003 	bnez	v0,80007d6c <sfs_bmap_free_sub_nolock+0x64>
80007d60:	8fa3001c 	lw	v1,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:281
		return ret;
	}
	if (ino != 0) {
80007d64:	14600007 	bnez	v1,80007d84 <sfs_bmap_free_sub_nolock+0x7c>
80007d68:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:290
			return ret;
		}
		sfs_block_free(sfs, ino);
	}
	return 0;
}
80007d6c:	8fbf0034 	lw	ra,52(sp)
80007d70:	8fb20030 	lw	s2,48(sp)
80007d74:	8fb1002c 	lw	s1,44(sp)
80007d78:	8fb00028 	lw	s0,40(sp)
80007d7c:	03e00008 	jr	ra
80007d80:	27bd0038 	addiu	sp,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:282
	off_t offset = index * sizeof(uint32_t);
	if ((ret = sfs_rbuf(sfs, &ino, sizeof(uint32_t), ent, offset)) != 0) {
		return ret;
	}
	if (ino != 0) {
		if ((ret =
80007d84:	27a50018 	addiu	a1,sp,24
80007d88:	24060004 	li	a2,4
80007d8c:	02203821 	move	a3,s1
80007d90:	0c002bb7 	jal	8000aedc <sfs_wbuf>
80007d94:	afb20010 	sw	s2,16(sp)
80007d98:	1440fff5 	bnez	v0,80007d70 <sfs_bmap_free_sub_nolock+0x68>
80007d9c:	8fbf0034 	lw	ra,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:287
		     sfs_wbuf(sfs, &zero, sizeof(uint32_t), ent,
			      offset)) != 0) {
			return ret;
		}
		sfs_block_free(sfs, ino);
80007da0:	8fa5001c 	lw	a1,28(sp)
80007da4:	02002021 	move	a0,s0
80007da8:	0c001c31 	jal	800070c4 <sfs_block_free>
80007dac:	afa20020 	sw	v0,32(sp)
80007db0:	08001f5b 	j	80007d6c <sfs_bmap_free_sub_nolock+0x64>
80007db4:	8fa20020 	lw	v0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:274
}

static int
sfs_bmap_free_sub_nolock(struct sfs_fs *sfs, uint32_t ent, uint32_t index)
{
	assert(sfs_block_inuse(sfs, ent) && index < SFS_BLK_NENTRY);
80007db8:	3c048002 	lui	a0,0x8002
80007dbc:	3c068002 	lui	a2,0x8002
80007dc0:	3c078002 	lui	a3,0x8002
80007dc4:	24842028 	addiu	a0,a0,8232
80007dc8:	24050112 	li	a1,274
80007dcc:	24c60e28 	addiu	a2,a2,3624
80007dd0:	0c006b0b 	jal	8001ac2c <__panic>
80007dd4:	24e72258 	addiu	a3,a3,8792

80007dd8 <sfs_bmap_truncate_nolock>:
sfs_bmap_truncate_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:360
	}
	return 0;
}

static int sfs_bmap_truncate_nolock(struct sfs_fs *sfs, struct sfs_inode *sin)
{
80007dd8:	27bdffc8 	addiu	sp,sp,-56
80007ddc:	afb00024 	sw	s0,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:361
	struct sfs_disk_inode *din = sin->din;
80007de0:	8cb00000 	lw	s0,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:360
	}
	return 0;
}

static int sfs_bmap_truncate_nolock(struct sfs_fs *sfs, struct sfs_inode *sin)
{
80007de4:	afb30030 	sw	s3,48(sp)
80007de8:	afb2002c 	sw	s2,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:362
	struct sfs_disk_inode *din = sin->din;
	assert(din->blocks != 0);
80007dec:	8e13000c 	lw	s3,12(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:360
	}
	return 0;
}

static int sfs_bmap_truncate_nolock(struct sfs_fs *sfs, struct sfs_inode *sin)
{
80007df0:	afb10028 	sw	s1,40(sp)
80007df4:	afbf0034 	sw	ra,52(sp)
80007df8:	00a08821 	move	s1,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:362
	struct sfs_disk_inode *din = sin->din;
	assert(din->blocks != 0);
80007dfc:	1260003a 	beqz	s3,80007ee8 <sfs_bmap_truncate_nolock+0x110>
80007e00:	00809021 	move	s2,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:364
	int ret;
	if ((ret = sfs_bmap_free_nolock(sfs, sin, din->blocks - 1)) != 0) {
80007e04:	2662ffff 	addiu	v0,s3,-1
sfs_bmap_free_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:298
sfs_bmap_free_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, uint32_t index)
{
	struct sfs_disk_inode *din = sin->din;
	int ret;
	uint32_t ent, ino;
	if (index < SFS_NDIRECT) {
80007e08:	2c43000c 	sltiu	v1,v0,12
80007e0c:	10600012 	beqz	v1,80007e58 <sfs_bmap_truncate_nolock+0x80>
80007e10:	2666fff3 	addiu	a2,s3,-13
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:299
		if ((ino = din->direct[index]) != 0) {
80007e14:	26730003 	addiu	s3,s3,3
80007e18:	00139080 	sll	s2,s3,0x2
80007e1c:	02129021 	addu	s2,s0,s2
80007e20:	8e450000 	lw	a1,0(s2)
80007e24:	14a0002a 	bnez	a1,80007ed0 <sfs_bmap_truncate_nolock+0xf8>
80007e28:	afa50018 	sw	a1,24(sp)
sfs_bmap_truncate_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:368
	int ret;
	if ((ret = sfs_bmap_free_nolock(sfs, sin, din->blocks - 1)) != 0) {
		return ret;
	}
	din->blocks--;
	sin->dirty = 1;
80007e2c:	24030001 	li	v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:367
	assert(din->blocks != 0);
	int ret;
	if ((ret = sfs_bmap_free_nolock(sfs, sin, din->blocks - 1)) != 0) {
		return ret;
	}
	din->blocks--;
80007e30:	ae02000c 	sw	v0,12(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:369
	sin->dirty = 1;
	return 0;
80007e34:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:368
	int ret;
	if ((ret = sfs_bmap_free_nolock(sfs, sin, din->blocks - 1)) != 0) {
		return ret;
	}
	din->blocks--;
	sin->dirty = 1;
80007e38:	ae23000c 	sw	v1,12(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:370
	return 0;
}
80007e3c:	8fbf0034 	lw	ra,52(sp)
80007e40:	8fb30030 	lw	s3,48(sp)
80007e44:	8fb2002c 	lw	s2,44(sp)
80007e48:	8fb10028 	lw	s1,40(sp)
80007e4c:	8fb00024 	lw	s0,36(sp)
80007e50:	03e00008 	jr	ra
80007e54:	27bd0038 	addiu	sp,sp,56
sfs_bmap_free_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:308
		}
		return 0;
	}

	index -= SFS_NDIRECT;
	if (index < SFS_BLK_NENTRY) {
80007e58:	2cc30400 	sltiu	v1,a2,1024
80007e5c:	5060000b 	beqzl	v1,80007e8c <sfs_bmap_truncate_nolock+0xb4>
80007e60:	8e030044 	lw	v1,68(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:309
		if ((ent = din->indirect) != 0) {
80007e64:	8e050040 	lw	a1,64(s0)
80007e68:	10a0fff0 	beqz	a1,80007e2c <sfs_bmap_truncate_nolock+0x54>
80007e6c:	afa5001c 	sw	a1,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:326
		     sfs_bmap_get_sub_nolock(sfs, &ent, index / SFS_BLK_NENTRY,
					     0, &ino)) != 0) {
			return ret;
		}
		if ((ent = ino) != 0) {
			if ((ret =
80007e70:	0c001f42 	jal	80007d08 <sfs_bmap_free_sub_nolock>
80007e74:	00000000 	nop
80007e78:	1440fff1 	bnez	v0,80007e40 <sfs_bmap_truncate_nolock+0x68>
80007e7c:	8fbf0034 	lw	ra,52(sp)
80007e80:	8e13000c 	lw	s3,12(s0)
80007e84:	08001f8b 	j	80007e2c <sfs_bmap_truncate_nolock+0x54>
80007e88:	2662ffff 	addiu	v0,s3,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:319
		}
		return 0;
	}

	index -= SFS_BLK_NENTRY;
	if ((ent = din->db_indirect) != 0) {
80007e8c:	1060ffe7 	beqz	v1,80007e2c <sfs_bmap_truncate_nolock+0x54>
80007e90:	afa3001c 	sw	v1,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:318
			}
		}
		return 0;
	}

	index -= SFS_BLK_NENTRY;
80007e94:	2673fbf3 	addiu	s3,s3,-1037
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:320
	if ((ent = din->db_indirect) != 0) {
		if ((ret =
80007e98:	27a20018 	addiu	v0,sp,24
80007e9c:	27a5001c 	addiu	a1,sp,28
80007ea0:	00133282 	srl	a2,s3,0xa
80007ea4:	00003821 	move	a3,zero
80007ea8:	0c001c4e 	jal	80007138 <sfs_bmap_get_sub_nolock>
80007eac:	afa20010 	sw	v0,16(sp)
80007eb0:	1440ffe3 	bnez	v0,80007e40 <sfs_bmap_truncate_nolock+0x68>
80007eb4:	8fbf0034 	lw	ra,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:325
		     sfs_bmap_get_sub_nolock(sfs, &ent, index / SFS_BLK_NENTRY,
					     0, &ino)) != 0) {
			return ret;
		}
		if ((ent = ino) != 0) {
80007eb8:	8fa50018 	lw	a1,24(sp)
80007ebc:	10a0fff0 	beqz	a1,80007e80 <sfs_bmap_truncate_nolock+0xa8>
80007ec0:	afa5001c 	sw	a1,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:326
			if ((ret =
80007ec4:	02402021 	move	a0,s2
80007ec8:	08001f9c 	j	80007e70 <sfs_bmap_truncate_nolock+0x98>
80007ecc:	326603ff 	andi	a2,s3,0x3ff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:300
	struct sfs_disk_inode *din = sin->din;
	int ret;
	uint32_t ent, ino;
	if (index < SFS_NDIRECT) {
		if ((ino = din->direct[index]) != 0) {
			sfs_block_free(sfs, ino);
80007ed0:	0c001c31 	jal	800070c4 <sfs_block_free>
80007ed4:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:301
			din->direct[index] = 0;
80007ed8:	8e13000c 	lw	s3,12(s0)
80007edc:	ae400000 	sw	zero,0(s2)
80007ee0:	08001f8b 	j	80007e2c <sfs_bmap_truncate_nolock+0x54>
80007ee4:	2662ffff 	addiu	v0,s3,-1
sfs_bmap_truncate_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:362
}

static int sfs_bmap_truncate_nolock(struct sfs_fs *sfs, struct sfs_inode *sin)
{
	struct sfs_disk_inode *din = sin->din;
	assert(din->blocks != 0);
80007ee8:	3c048002 	lui	a0,0x8002
80007eec:	3c068002 	lui	a2,0x8002
80007ef0:	3c078002 	lui	a3,0x8002
80007ef4:	24842028 	addiu	a0,a0,8232
80007ef8:	2405016a 	li	a1,362
80007efc:	24c60e28 	addiu	a2,a2,3624
80007f00:	0c006b0b 	jal	8001ac2c <__panic>
80007f04:	24e7228c 	addiu	a3,a3,8844

80007f08 <sfs_reclaim>:
sfs_reclaim():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1113
	kfree(entry);
	return ret;
}

static int sfs_reclaim(struct inode *node)
{
80007f08:	27bdffd0 	addiu	sp,sp,-48
80007f0c:	afb1001c 	sw	s1,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1114
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
80007f10:	8c910044 	lw	s1,68(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1113
	kfree(entry);
	return ret;
}

static int sfs_reclaim(struct inode *node)
{
80007f14:	afb20020 	sw	s2,32(sp)
80007f18:	afbf002c 	sw	ra,44(sp)
80007f1c:	afb40028 	sw	s4,40(sp)
80007f20:	afb30024 	sw	s3,36(sp)
80007f24:	afb00018 	sw	s0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1114
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
80007f28:	12200077 	beqz	s1,80008108 <sfs_reclaim+0x200>
80007f2c:	00809021 	move	s2,a0
80007f30:	8e230084 	lw	v1,132(s1)
80007f34:	24025679 	li	v0,22137
80007f38:	14620073 	bne	v1,v0,80008108 <sfs_reclaim+0x200>
80007f3c:	24021237 	li	v0,4663
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1115
	struct sfs_inode *sin = vop_info(node, sfs_inode);
80007f40:	8c830038 	lw	v1,56(a0)
80007f44:	14620078 	bne	v1,v0,80008128 <sfs_reclaim+0x220>
80007f48:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1117

	lock_sfs_fs(sfs);
80007f4c:	0c002c4b 	jal	8000b12c <lock_sfs_fs>
80007f50:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1120

	int ret = -E_BUSY;
	assert(sin->reclaim_count > 0);
80007f54:	8e420010 	lw	v0,16(s2)
80007f58:	1840007a 	blez	v0,80008144 <sfs_reclaim+0x23c>
80007f5c:	2442ffff 	addiu	v0,v0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1121
	if ((--sin->reclaim_count) != 0) {
80007f60:	14400042 	bnez	v0,8000806c <sfs_reclaim+0x164>
80007f64:	ae420010 	sw	v0,16(s2)
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
 *
 * Atomically reads the value of @v.
 * */
static __always_inline int atomic_read(const atomic_t * v)
{
	return v->counter;
80007f68:	8e42003c 	lw	v0,60(s2)
sfs_reclaim():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1124
		goto failed_unlock;
	}
	assert(inode_ref_count(node) == 0 && inode_open_count(node) == 0);
80007f6c:	54400084 	bnezl	v0,80008180 <sfs_reclaim+0x278>
80007f70:	3c048002 	lui	a0,0x8002
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
80007f74:	8e420040 	lw	v0,64(s2)
sfs_reclaim():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1124
80007f78:	54400081 	bnezl	v0,80008180 <sfs_reclaim+0x278>
80007f7c:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1126

	if (sin->din->nlinks == 0) {
80007f80:	8e420000 	lw	v0,0(s2)
80007f84:	9443000a 	lhu	v1,10(v0)
80007f88:	54600025 	bnezl	v1,80008020 <sfs_reclaim+0x118>
80007f8c:	8e42000c 	lw	v0,12(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1128
		uint32_t nblks;
		for (nblks = sin->din->blocks; nblks != 0; nblks--) {
80007f90:	8c50000c 	lw	s0,12(v0)
80007f94:	52000008 	beqzl	s0,80007fb8 <sfs_reclaim+0xb0>
80007f98:	8e430028 	lw	v1,40(s2)
80007f9c:	2610ffff 	addiu	s0,s0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1129
			sfs_bmap_truncate_nolock(sfs, sin);
80007fa0:	02202021 	move	a0,s1
80007fa4:	0c001f76 	jal	80007dd8 <sfs_bmap_truncate_nolock>
80007fa8:	02402821 	move	a1,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1128
	}
	assert(inode_ref_count(node) == 0 && inode_open_count(node) == 0);

	if (sin->din->nlinks == 0) {
		uint32_t nblks;
		for (nblks = sin->din->blocks; nblks != 0; nblks--) {
80007fac:	5600fffc 	bnezl	s0,80007fa0 <sfs_reclaim+0x98>
80007fb0:	2610ffff 	addiu	s0,s0,-1
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
80007fb4:	8e430028 	lw	v1,40(s2)
80007fb8:	8e42002c 	lw	v0,44(s2)
sfs_reclaim():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1138
			goto failed_unlock;
		}
	}

	sfs_remove_links(sin);
	unlock_sfs_fs(sfs);
80007fbc:	02202021 	move	a0,s1
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
80007fc0:	ac620004 	sw	v0,4(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:170
	next->prev = prev;
80007fc4:	ac430000 	sw	v1,0(v0)
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
80007fc8:	8e430030 	lw	v1,48(s2)
80007fcc:	8e420034 	lw	v0,52(s2)
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
80007fd0:	ac620004 	sw	v0,4(v1)
sfs_reclaim():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1138
80007fd4:	0c002c51 	jal	8000b144 <unlock_sfs_fs>
80007fd8:	ac430000 	sw	v1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1140

	if (sin->din->nlinks == 0) {
80007fdc:	8e440000 	lw	a0,0(s2)
80007fe0:	9482000a 	lhu	v0,10(a0)
80007fe4:	5040002e 	beqzl	v0,800080a0 <sfs_reclaim+0x198>
80007fe8:	8e450004 	lw	a1,4(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1154
				sfs_bmap_free_sub_nolock(sfs, ent, i);
			}
			sfs_block_free(sfs, ent);
		}
	}
	kfree(sin->din);
80007fec:	0c0054b1 	jal	800152c4 <kfree>
80007ff0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1155
	vop_kill(node);
80007ff4:	0c00109d 	jal	80004274 <inode_kill>
80007ff8:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1161
	return 0;

failed_unlock:
	unlock_sfs_fs(sfs);
	return ret;
}
80007ffc:	8fbf002c 	lw	ra,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1156
			sfs_block_free(sfs, ent);
		}
	}
	kfree(sin->din);
	vop_kill(node);
	return 0;
80008000:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1161

failed_unlock:
	unlock_sfs_fs(sfs);
	return ret;
}
80008004:	8fb40028 	lw	s4,40(sp)
80008008:	8fb30024 	lw	s3,36(sp)
8000800c:	8fb20020 	lw	s2,32(sp)
80008010:	8fb1001c 	lw	s1,28(sp)
80008014:	8fb00018 	lw	s0,24(sp)
80008018:	03e00008 	jr	ra
8000801c:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1131
	if (sin->din->nlinks == 0) {
		uint32_t nblks;
		for (nblks = sin->din->blocks; nblks != 0; nblks--) {
			sfs_bmap_truncate_nolock(sfs, sin);
		}
	} else if (sin->dirty) {
80008020:	5040ffe5 	beqzl	v0,80007fb8 <sfs_reclaim+0xb0>
80008024:	8e430028 	lw	v1,40(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1132
		if ((ret = vop_fsync(node)) != 0) {
80008028:	8e420048 	lw	v0,72(s2)
8000802c:	1040004d 	beqz	v0,80008164 <sfs_reclaim+0x25c>
80008030:	3c048002 	lui	a0,0x8002
80008034:	8c420018 	lw	v0,24(v0)
80008038:	1040004a 	beqz	v0,80008164 <sfs_reclaim+0x25c>
8000803c:	3c058002 	lui	a1,0x8002
80008040:	02402021 	move	a0,s2
80008044:	0c0010f3 	jal	800043cc <inode_check>
80008048:	24a51fb4 	addiu	a1,a1,8116
8000804c:	8e420048 	lw	v0,72(s2)
80008050:	8c420018 	lw	v0,24(v0)
80008054:	0040f809 	jalr	v0
80008058:	02402021 	move	a0,s2
8000805c:	14400005 	bnez	v0,80008074 <sfs_reclaim+0x16c>
80008060:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
80008064:	08001fee 	j	80007fb8 <sfs_reclaim+0xb0>
80008068:	8e430028 	lw	v1,40(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1119
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
	struct sfs_inode *sin = vop_info(node, sfs_inode);

	lock_sfs_fs(sfs);

	int ret = -E_BUSY;
8000806c:	2402fff0 	li	v0,-16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1159
	kfree(sin->din);
	vop_kill(node);
	return 0;

failed_unlock:
	unlock_sfs_fs(sfs);
80008070:	02202021 	move	a0,s1
80008074:	0c002c51 	jal	8000b144 <unlock_sfs_fs>
80008078:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1161
	return ret;
}
8000807c:	8fbf002c 	lw	ra,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1159
	kfree(sin->din);
	vop_kill(node);
	return 0;

failed_unlock:
	unlock_sfs_fs(sfs);
80008080:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1161
	return ret;
}
80008084:	8fb40028 	lw	s4,40(sp)
80008088:	8fb30024 	lw	s3,36(sp)
8000808c:	8fb20020 	lw	s2,32(sp)
80008090:	8fb1001c 	lw	s1,28(sp)
80008094:	8fb00018 	lw	s0,24(sp)
80008098:	03e00008 	jr	ra
8000809c:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1141

	sfs_remove_links(sin);
	unlock_sfs_fs(sfs);

	if (sin->din->nlinks == 0) {
		sfs_block_free(sfs, sin->ino);
800080a0:	0c001c31 	jal	800070c4 <sfs_block_free>
800080a4:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1143
		uint32_t ent;
		if ((ent = sin->din->indirect) != 0) {
800080a8:	8e440000 	lw	a0,0(s2)
800080ac:	8c850040 	lw	a1,64(a0)
800080b0:	14a00011 	bnez	a1,800080f8 <sfs_reclaim+0x1f0>
800080b4:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1146
			sfs_block_free(sfs, ent);
		}
		if ((ent = sin->din->db_indirect) != 0) {
800080b8:	8c930044 	lw	s3,68(a0)
800080bc:	1260ffcb 	beqz	s3,80007fec <sfs_reclaim+0xe4>
800080c0:	00003021 	move	a2,zero
800080c4:	00008021 	move	s0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1148
			int i;
			for (i = 0; i < SFS_BLK_NENTRY; i++) {
800080c8:	24140400 	li	s4,1024
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1149
				sfs_bmap_free_sub_nolock(sfs, ent, i);
800080cc:	02202021 	move	a0,s1
800080d0:	02602821 	move	a1,s3
800080d4:	0c001f42 	jal	80007d08 <sfs_bmap_free_sub_nolock>
800080d8:	26100001 	addiu	s0,s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1148
		if ((ent = sin->din->indirect) != 0) {
			sfs_block_free(sfs, ent);
		}
		if ((ent = sin->din->db_indirect) != 0) {
			int i;
			for (i = 0; i < SFS_BLK_NENTRY; i++) {
800080dc:	1614fffb 	bne	s0,s4,800080cc <sfs_reclaim+0x1c4>
800080e0:	02003021 	move	a2,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1151
				sfs_bmap_free_sub_nolock(sfs, ent, i);
			}
			sfs_block_free(sfs, ent);
800080e4:	02202021 	move	a0,s1
800080e8:	0c001c31 	jal	800070c4 <sfs_block_free>
800080ec:	02602821 	move	a1,s3
800080f0:	08001ffb 	j	80007fec <sfs_reclaim+0xe4>
800080f4:	8e440000 	lw	a0,0(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1144

	if (sin->din->nlinks == 0) {
		sfs_block_free(sfs, sin->ino);
		uint32_t ent;
		if ((ent = sin->din->indirect) != 0) {
			sfs_block_free(sfs, ent);
800080f8:	0c001c31 	jal	800070c4 <sfs_block_free>
800080fc:	02202021 	move	a0,s1
80008100:	0800202e 	j	800080b8 <sfs_reclaim+0x1b0>
80008104:	8e440000 	lw	a0,0(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1114
	return ret;
}

static int sfs_reclaim(struct inode *node)
{
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
80008108:	3c048002 	lui	a0,0x8002
8000810c:	3c068002 	lui	a2,0x8002
80008110:	3c078002 	lui	a3,0x8002
80008114:	24842028 	addiu	a0,a0,8232
80008118:	2405045a 	li	a1,1114
8000811c:	24c60e28 	addiu	a2,a2,3624
80008120:	0c006b0b 	jal	8001ac2c <__panic>
80008124:	24e71e84 	addiu	a3,a3,7812
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1115
	struct sfs_inode *sin = vop_info(node, sfs_inode);
80008128:	3c068002 	lui	a2,0x8002
8000812c:	3c078002 	lui	a3,0x8002
80008130:	24842028 	addiu	a0,a0,8232
80008134:	2405045b 	li	a1,1115
80008138:	24c60e28 	addiu	a2,a2,3624
8000813c:	0c006b0b 	jal	8001ac2c <__panic>
80008140:	24e72034 	addiu	a3,a3,8244
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1120

	lock_sfs_fs(sfs);

	int ret = -E_BUSY;
	assert(sin->reclaim_count > 0);
80008144:	3c048002 	lui	a0,0x8002
80008148:	3c068002 	lui	a2,0x8002
8000814c:	3c078002 	lui	a3,0x8002
80008150:	24842028 	addiu	a0,a0,8232
80008154:	24050460 	li	a1,1120
80008158:	24c60e28 	addiu	a2,a2,3624
8000815c:	0c006b0b 	jal	8001ac2c <__panic>
80008160:	24e722a0 	addiu	a3,a3,8864
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1132
		uint32_t nblks;
		for (nblks = sin->din->blocks; nblks != 0; nblks--) {
			sfs_bmap_truncate_nolock(sfs, sin);
		}
	} else if (sin->dirty) {
		if ((ret = vop_fsync(node)) != 0) {
80008164:	3c068002 	lui	a2,0x8002
80008168:	3c078002 	lui	a3,0x8002
8000816c:	24842028 	addiu	a0,a0,8232
80008170:	2405046c 	li	a1,1132
80008174:	24c60e28 	addiu	a2,a2,3624
80008178:	0c006b0b 	jal	8001ac2c <__panic>
8000817c:	24e71f64 	addiu	a3,a3,8036
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1124
	int ret = -E_BUSY;
	assert(sin->reclaim_count > 0);
	if ((--sin->reclaim_count) != 0) {
		goto failed_unlock;
	}
	assert(inode_ref_count(node) == 0 && inode_open_count(node) == 0);
80008180:	3c068002 	lui	a2,0x8002
80008184:	3c078002 	lui	a3,0x8002
80008188:	24842028 	addiu	a0,a0,8232
8000818c:	24050464 	li	a1,1124
80008190:	24c60e28 	addiu	a2,a2,3624
80008194:	0c006b0b 	jal	8001ac2c <__panic>
80008198:	24e722b8 	addiu	a3,a3,8888

8000819c <sfs_tryseek>:
sfs_tryseek():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1182
	panic("invalid file type %d.\n", din->type);
}

static int sfs_tryseek(struct inode *node, off_t pos)
{
	if (pos < 0 || pos >= SFS_MAX_FILE_SIZE) {
8000819c:	3c020800 	lui	v0,0x800
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1181
	}
	panic("invalid file type %d.\n", din->type);
}

static int sfs_tryseek(struct inode *node, off_t pos)
{
800081a0:	27bdffe0 	addiu	sp,sp,-32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1182
	if (pos < 0 || pos >= SFS_MAX_FILE_SIZE) {
800081a4:	00a2102b 	sltu	v0,a1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1181
	}
	panic("invalid file type %d.\n", din->type);
}

static int sfs_tryseek(struct inode *node, off_t pos)
{
800081a8:	afb10018 	sw	s1,24(sp)
800081ac:	afb00014 	sw	s0,20(sp)
800081b0:	afbf001c 	sw	ra,28(sp)
800081b4:	00a08821 	move	s1,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1182
	if (pos < 0 || pos >= SFS_MAX_FILE_SIZE) {
800081b8:	10400021 	beqz	v0,80008240 <sfs_tryseek+0xa4>
800081bc:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1185
		return -E_INVAL;
	}
	struct sfs_disk_inode *din = vop_info(node, sfs_inode)->din;
800081c0:	10800021 	beqz	a0,80008248 <sfs_tryseek+0xac>
800081c4:	24021237 	li	v0,4663
800081c8:	8c830038 	lw	v1,56(a0)
800081cc:	5462001f 	bnel	v1,v0,8000824c <sfs_tryseek+0xb0>
800081d0:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1186
	if (pos > din->fileinfo.size) {
800081d4:	8c820000 	lw	v0,0(a0)
800081d8:	8c420000 	lw	v0,0(v0)
800081dc:	0045102b 	sltu	v0,v0,a1
800081e0:	10400012 	beqz	v0,8000822c <sfs_tryseek+0x90>
800081e4:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1187
		return vop_truncate(node, pos);
800081e8:	8c820048 	lw	v0,72(a0)
800081ec:	5040001f 	beqzl	v0,8000826c <sfs_tryseek+0xd0>
800081f0:	3c048002 	lui	a0,0x8002
800081f4:	8c420048 	lw	v0,72(v0)
800081f8:	1040001b 	beqz	v0,80008268 <sfs_tryseek+0xcc>
800081fc:	3c058002 	lui	a1,0x8002
80008200:	0c0010f3 	jal	800043cc <inode_check>
80008204:	24a51a20 	addiu	a1,a1,6688
80008208:	8e020048 	lw	v0,72(s0)
8000820c:	02002021 	move	a0,s0
80008210:	02202821 	move	a1,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1190
	}
	return 0;
}
80008214:	8fbf001c 	lw	ra,28(sp)
80008218:	8fb10018 	lw	s1,24(sp)
8000821c:	8fb00014 	lw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1187
	if (pos < 0 || pos >= SFS_MAX_FILE_SIZE) {
		return -E_INVAL;
	}
	struct sfs_disk_inode *din = vop_info(node, sfs_inode)->din;
	if (pos > din->fileinfo.size) {
		return vop_truncate(node, pos);
80008220:	8c590048 	lw	t9,72(v0)
80008224:	03200008 	jr	t9
80008228:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1190
	}
	return 0;
}
8000822c:	8fbf001c 	lw	ra,28(sp)
80008230:	8fb10018 	lw	s1,24(sp)
80008234:	8fb00014 	lw	s0,20(sp)
80008238:	03e00008 	jr	ra
8000823c:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1183
}

static int sfs_tryseek(struct inode *node, off_t pos)
{
	if (pos < 0 || pos >= SFS_MAX_FILE_SIZE) {
		return -E_INVAL;
80008240:	0800208b 	j	8000822c <sfs_tryseek+0x90>
80008244:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1185
	}
	struct sfs_disk_inode *din = vop_info(node, sfs_inode)->din;
80008248:	3c048002 	lui	a0,0x8002
8000824c:	3c068002 	lui	a2,0x8002
80008250:	3c078002 	lui	a3,0x8002
80008254:	24842028 	addiu	a0,a0,8232
80008258:	240504a1 	li	a1,1185
8000825c:	24c60e28 	addiu	a2,a2,3624
80008260:	0c006b0b 	jal	8001ac2c <__panic>
80008264:	24e72034 	addiu	a3,a3,8244
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1187
	if (pos > din->fileinfo.size) {
		return vop_truncate(node, pos);
80008268:	3c048002 	lui	a0,0x8002
8000826c:	3c068002 	lui	a2,0x8002
80008270:	3c078002 	lui	a3,0x8002
80008274:	24842028 	addiu	a0,a0,8232
80008278:	240504a3 	li	a1,1187
8000827c:	24c60e28 	addiu	a2,a2,3624
80008280:	0c006b0b 	jal	8001ac2c <__panic>
80008284:	24e719cc 	addiu	a3,a3,6604

80008288 <sfs_close>:
sfs_close():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:601
{
	return 0;
}

static int sfs_close(struct inode *node)
{
80008288:	27bdffe8 	addiu	sp,sp,-24
8000828c:	afb00010 	sw	s0,16(sp)
80008290:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:602
	return vop_fsync(node);
80008294:	10800010 	beqz	a0,800082d8 <sfs_close+0x50>
80008298:	00808021 	move	s0,a0
8000829c:	8c820048 	lw	v0,72(a0)
800082a0:	5040000e 	beqzl	v0,800082dc <sfs_close+0x54>
800082a4:	3c048002 	lui	a0,0x8002
800082a8:	8c420018 	lw	v0,24(v0)
800082ac:	1040000a 	beqz	v0,800082d8 <sfs_close+0x50>
800082b0:	3c058002 	lui	a1,0x8002
800082b4:	0c0010f3 	jal	800043cc <inode_check>
800082b8:	24a51fb4 	addiu	a1,a1,8116
800082bc:	8e020048 	lw	v0,72(s0)
800082c0:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:603
}
800082c4:	8fbf0014 	lw	ra,20(sp)
800082c8:	8fb00010 	lw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:602
	return 0;
}

static int sfs_close(struct inode *node)
{
	return vop_fsync(node);
800082cc:	8c590018 	lw	t9,24(v0)
800082d0:	03200008 	jr	t9
800082d4:	27bd0018 	addiu	sp,sp,24
800082d8:	3c048002 	lui	a0,0x8002
800082dc:	3c068002 	lui	a2,0x8002
800082e0:	3c078002 	lui	a3,0x8002
800082e4:	24842028 	addiu	a0,a0,8232
800082e8:	2405025a 	li	a1,602
800082ec:	24c60e28 	addiu	a2,a2,3624
800082f0:	0c006b0b 	jal	8001ac2c <__panic>
800082f4:	24e71f64 	addiu	a3,a3,8036

800082f8 <sfs_fstat>:
sfs_fstat():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:722
{
	return sfs_io(node, iob, 1);
}

static int sfs_fstat(struct inode *node, struct stat *stat)
{
800082f8:	27bdffe0 	addiu	sp,sp,-32
800082fc:	afb10018 	sw	s1,24(sp)
80008300:	00a08821 	move	s1,a1
80008304:	afb00014 	sw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:724
	int ret;
	memset(stat, 0, sizeof(struct stat));
80008308:	00002821 	move	a1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:722
{
	return sfs_io(node, iob, 1);
}

static int sfs_fstat(struct inode *node, struct stat *stat)
{
8000830c:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:724
	int ret;
	memset(stat, 0, sizeof(struct stat));
80008310:	24060010 	li	a2,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:722
{
	return sfs_io(node, iob, 1);
}

static int sfs_fstat(struct inode *node, struct stat *stat)
{
80008314:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:724
	int ret;
	memset(stat, 0, sizeof(struct stat));
80008318:	0c005c52 	jal	80017148 <memset>
8000831c:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:725
	if ((ret = vop_gettype(node, &(stat->st_mode))) != 0) {
80008320:	12000026 	beqz	s0,800083bc <sfs_fstat+0xc4>
80008324:	3c048002 	lui	a0,0x8002
80008328:	8e020048 	lw	v0,72(s0)
8000832c:	10400024 	beqz	v0,800083c0 <sfs_fstat+0xc8>
80008330:	3c068002 	lui	a2,0x8002
80008334:	8c420040 	lw	v0,64(v0)
80008338:	10400020 	beqz	v0,800083bc <sfs_fstat+0xc4>
8000833c:	3c058002 	lui	a1,0x8002
80008340:	02002021 	move	a0,s0
80008344:	0c0010f3 	jal	800043cc <inode_check>
80008348:	24a51040 	addiu	a1,a1,4160
8000834c:	8e020048 	lw	v0,72(s0)
80008350:	02002021 	move	a0,s0
80008354:	8c420040 	lw	v0,64(v0)
80008358:	0040f809 	jalr	v0
8000835c:	02202821 	move	a1,s1
80008360:	1440000e 	bnez	v0,8000839c <sfs_fstat+0xa4>
80008364:	24031237 	li	v1,4663
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:728
		return ret;
	}
	struct sfs_disk_inode *din = vop_info(node, sfs_inode)->din;
80008368:	8e040038 	lw	a0,56(s0)
8000836c:	1483001a 	bne	a0,v1,800083d8 <sfs_fstat+0xe0>
80008370:	3c048002 	lui	a0,0x8002
80008374:	8e030000 	lw	v1,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:730
	stat->st_nlinks = din->nlinks;
	stat->st_blocks = din->blocks;
80008378:	8c64000c 	lw	a0,12(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:729
	memset(stat, 0, sizeof(struct stat));
	if ((ret = vop_gettype(node, &(stat->st_mode))) != 0) {
		return ret;
	}
	struct sfs_disk_inode *din = vop_info(node, sfs_inode)->din;
	stat->st_nlinks = din->nlinks;
8000837c:	9466000a 	lhu	a2,10(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:731
	stat->st_blocks = din->blocks;
	if (din->type != SFS_TYPE_DIR) {
80008380:	94650008 	lhu	a1,8(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:730
	if ((ret = vop_gettype(node, &(stat->st_mode))) != 0) {
		return ret;
	}
	struct sfs_disk_inode *din = vop_info(node, sfs_inode)->din;
	stat->st_nlinks = din->nlinks;
	stat->st_blocks = din->blocks;
80008384:	ae240008 	sw	a0,8(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:729
	memset(stat, 0, sizeof(struct stat));
	if ((ret = vop_gettype(node, &(stat->st_mode))) != 0) {
		return ret;
	}
	struct sfs_disk_inode *din = vop_info(node, sfs_inode)->din;
	stat->st_nlinks = din->nlinks;
80008388:	ae260004 	sw	a2,4(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:731
	stat->st_blocks = din->blocks;
	if (din->type != SFS_TYPE_DIR) {
8000838c:	24040002 	li	a0,2
80008390:	10a40007 	beq	a1,a0,800083b0 <sfs_fstat+0xb8>
80008394:	8c630000 	lw	v1,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:734
		stat->st_size = din->fileinfo.size;
	} else {
		stat->st_size = (din->dirinfo.slots + 2) * sfs_dentry_size;
80008398:	ae23000c 	sw	v1,12(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:737
	}
	return 0;
}
8000839c:	8fbf001c 	lw	ra,28(sp)
800083a0:	8fb10018 	lw	s1,24(sp)
800083a4:	8fb00014 	lw	s0,20(sp)
800083a8:	03e00008 	jr	ra
800083ac:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:734
	stat->st_nlinks = din->nlinks;
	stat->st_blocks = din->blocks;
	if (din->type != SFS_TYPE_DIR) {
		stat->st_size = din->fileinfo.size;
	} else {
		stat->st_size = (din->dirinfo.slots + 2) * sfs_dentry_size;
800083b0:	24630002 	addiu	v1,v1,2
800083b4:	080020e6 	j	80008398 <sfs_fstat+0xa0>
800083b8:	00031a00 	sll	v1,v1,0x8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:725

static int sfs_fstat(struct inode *node, struct stat *stat)
{
	int ret;
	memset(stat, 0, sizeof(struct stat));
	if ((ret = vop_gettype(node, &(stat->st_mode))) != 0) {
800083bc:	3c068002 	lui	a2,0x8002
800083c0:	3c078002 	lui	a3,0x8002
800083c4:	24842028 	addiu	a0,a0,8232
800083c8:	240502d5 	li	a1,725
800083cc:	24c60e28 	addiu	a2,a2,3624
800083d0:	0c006b0b 	jal	8001ac2c <__panic>
800083d4:	24e70ff0 	addiu	a3,a3,4080
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:728
		return ret;
	}
	struct sfs_disk_inode *din = vop_info(node, sfs_inode)->din;
800083d8:	3c068002 	lui	a2,0x8002
800083dc:	3c078002 	lui	a3,0x8002
800083e0:	24842028 	addiu	a0,a0,8232
800083e4:	240502d8 	li	a1,728
800083e8:	24c60e28 	addiu	a2,a2,3624
800083ec:	0c006b0b 	jal	8001ac2c <__panic>
800083f0:	24e72034 	addiu	a3,a3,8244

800083f4 <sfs_dirent_unlink_nolock>:
sfs_dirent_unlink_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:439
}

static int
sfs_dirent_unlink_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, int slot,
			 struct sfs_inode *lnksin)
{
800083f4:	27bdffd8 	addiu	sp,sp,-40
800083f8:	afb10020 	sw	s1,32(sp)
800083fc:	00e08821 	move	s1,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:441
	int ret;
	if ((ret = sfs_dirent_write_nolock(sfs, sin, slot, 0, NULL)) != 0) {
80008400:	00003821 	move	a3,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:439
}

static int
sfs_dirent_unlink_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, int slot,
			 struct sfs_inode *lnksin)
{
80008404:	afb0001c 	sw	s0,28(sp)
80008408:	afbf0024 	sw	ra,36(sp)
8000840c:	00a08021 	move	s0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:441
	int ret;
	if ((ret = sfs_dirent_write_nolock(sfs, sin, slot, 0, NULL)) != 0) {
80008410:	0c001ee0 	jal	80007b80 <sfs_dirent_write_nolock>
80008414:	afa00010 	sw	zero,16(sp)
80008418:	14400010 	bnez	v0,8000845c <sfs_dirent_unlink_nolock+0x68>
8000841c:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:444
		return ret;
	}
	assert(sin->din->dirinfo.slots != 0 && lnksin->din->nlinks != 0);
80008420:	8e030000 	lw	v1,0(s0)
80008424:	8c640000 	lw	a0,0(v1)
80008428:	50800011 	beqzl	a0,80008470 <sfs_dirent_unlink_nolock+0x7c>
8000842c:	3c048002 	lui	a0,0x8002
80008430:	8e250000 	lw	a1,0(s1)
80008434:	94a7000a 	lhu	a3,10(a1)
80008438:	10e0000c 	beqz	a3,8000846c <sfs_dirent_unlink_nolock+0x78>
8000843c:	24060001 	li	a2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:446
	sin->dirty = 1;
	sin->din->dirinfo.slots--;
80008440:	2484ffff 	addiu	a0,a0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:448
	lnksin->dirty = 1;
	lnksin->din->nlinks--;
80008444:	24e7ffff 	addiu	a3,a3,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:445
	int ret;
	if ((ret = sfs_dirent_write_nolock(sfs, sin, slot, 0, NULL)) != 0) {
		return ret;
	}
	assert(sin->din->dirinfo.slots != 0 && lnksin->din->nlinks != 0);
	sin->dirty = 1;
80008448:	ae06000c 	sw	a2,12(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:446
	sin->din->dirinfo.slots--;
8000844c:	ac640000 	sw	a0,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:447
	lnksin->dirty = 1;
80008450:	ae26000c 	sw	a2,12(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:448
	lnksin->din->nlinks--;
80008454:	a4a7000a 	sh	a3,10(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:450
	return 0;
}
80008458:	8fbf0024 	lw	ra,36(sp)
8000845c:	8fb10020 	lw	s1,32(sp)
80008460:	8fb0001c 	lw	s0,28(sp)
80008464:	03e00008 	jr	ra
80008468:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:444
{
	int ret;
	if ((ret = sfs_dirent_write_nolock(sfs, sin, slot, 0, NULL)) != 0) {
		return ret;
	}
	assert(sin->din->dirinfo.slots != 0 && lnksin->din->nlinks != 0);
8000846c:	3c048002 	lui	a0,0x8002
80008470:	3c068002 	lui	a2,0x8002
80008474:	3c078002 	lui	a3,0x8002
80008478:	24842028 	addiu	a0,a0,8232
8000847c:	240501bc 	li	a1,444
80008480:	24c60e28 	addiu	a2,a2,3624
80008484:	0c006b0b 	jal	8001ac2c <__panic>
80008488:	24e722f4 	addiu	a3,a3,8948

8000848c <sfs_dirent_link_nolock>:
sfs_dirent_link_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:423
}

static int
sfs_dirent_link_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, int slot,
		       struct sfs_inode *lnksin, const char *name)
{
8000848c:	27bdffd8 	addiu	sp,sp,-40
80008490:	afb0001c 	sw	s0,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:425
	int ret;
	if ((ret =
80008494:	8fa20038 	lw	v0,56(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:423
}

static int
sfs_dirent_link_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, int slot,
		       struct sfs_inode *lnksin, const char *name)
{
80008498:	00e08021 	move	s0,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:425
	int ret;
	if ((ret =
8000849c:	8ce70004 	lw	a3,4(a3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:423
}

static int
sfs_dirent_link_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, int slot,
		       struct sfs_inode *lnksin, const char *name)
{
800084a0:	afb10020 	sw	s1,32(sp)
800084a4:	afbf0024 	sw	ra,36(sp)
800084a8:	00a08821 	move	s1,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:425
	int ret;
	if ((ret =
800084ac:	0c001ee0 	jal	80007b80 <sfs_dirent_write_nolock>
800084b0:	afa20010 	sw	v0,16(sp)
800084b4:	1440000b 	bnez	v0,800084e4 <sfs_dirent_link_nolock+0x58>
800084b8:	24040001 	li	a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:430
	     sfs_dirent_write_nolock(sfs, sin, slot, lnksin->ino, name)) != 0) {
		return ret;
	}
	sin->dirty = 1;
	sin->din->dirinfo.slots++;
800084bc:	8e230000 	lw	v1,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:429
	int ret;
	if ((ret =
	     sfs_dirent_write_nolock(sfs, sin, slot, lnksin->ino, name)) != 0) {
		return ret;
	}
	sin->dirty = 1;
800084c0:	ae24000c 	sw	a0,12(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:430
	sin->din->dirinfo.slots++;
800084c4:	8c650000 	lw	a1,0(v1)
800084c8:	24a50001 	addiu	a1,a1,1
800084cc:	ac650000 	sw	a1,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:432
	lnksin->dirty = 1;
	lnksin->din->nlinks++;
800084d0:	8e030000 	lw	v1,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:431
	     sfs_dirent_write_nolock(sfs, sin, slot, lnksin->ino, name)) != 0) {
		return ret;
	}
	sin->dirty = 1;
	sin->din->dirinfo.slots++;
	lnksin->dirty = 1;
800084d4:	ae04000c 	sw	a0,12(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:432
	lnksin->din->nlinks++;
800084d8:	9464000a 	lhu	a0,10(v1)
800084dc:	24840001 	addiu	a0,a0,1
800084e0:	a464000a 	sh	a0,10(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:434
	return 0;
}
800084e4:	8fbf0024 	lw	ra,36(sp)
800084e8:	8fb10020 	lw	s1,32(sp)
800084ec:	8fb0001c 	lw	s0,28(sp)
800084f0:	03e00008 	jr	ra
800084f4:	27bd0028 	addiu	sp,sp,40

800084f8 <sfs_write>:
sfs_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:717
{
	return sfs_io(node, iob, 0);
}

static int sfs_write(struct inode *node, struct iobuf *iob)
{
800084f8:	27bdffc0 	addiu	sp,sp,-64
800084fc:	afb30034 	sw	s3,52(sp)
sfs_io():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:695
	return ret;
}

static inline int sfs_io(struct inode *node, struct iobuf *iob, bool write)
{
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
80008500:	8c930044 	lw	s3,68(a0)
sfs_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:717
{
	return sfs_io(node, iob, 0);
}

static int sfs_write(struct inode *node, struct iobuf *iob)
{
80008504:	afb20030 	sw	s2,48(sp)
80008508:	afb00028 	sw	s0,40(sp)
8000850c:	afbf003c 	sw	ra,60(sp)
80008510:	afb40038 	sw	s4,56(sp)
80008514:	afb1002c 	sw	s1,44(sp)
80008518:	00809021 	move	s2,a0
sfs_io():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:695
	return ret;
}

static inline int sfs_io(struct inode *node, struct iobuf *iob, bool write)
{
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
8000851c:	1260004a 	beqz	s3,80008648 <sfs_write+0x150>
80008520:	00a08021 	move	s0,a1
80008524:	8e630084 	lw	v1,132(s3)
80008528:	24025679 	li	v0,22137
8000852c:	14620046 	bne	v1,v0,80008648 <sfs_write+0x150>
80008530:	24021237 	li	v0,4663
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:696
	struct sfs_inode *sin = vop_info(node, sfs_inode);
80008534:	8c830038 	lw	v1,56(a0)
80008538:	5462004b 	bnel	v1,v0,80008668 <sfs_write+0x170>
8000853c:	3c048002 	lui	a0,0x8002
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80008540:	40026000 	mfc0	v0,c0_status
80008544:	30420001 	andi	v0,v0,0x1
80008548:	14400029 	bnez	v0,800085f0 <sfs_write+0xf8>
8000854c:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
80008550:	8c910008 	lw	s1,8(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
80008554:	32310001 	andi	s1,s1,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:21
static const struct inode_ops sfs_node_dirops;
static const struct inode_ops sfs_node_fileops;

static inline int trylock_sin(struct sfs_inode *sin)
{
	if (!SFSInodeRemoved(sin)) {
80008558:	1620001d 	bnez	s1,800085d0 <sfs_write+0xd8>
8000855c:	2402fffe 	li	v0,-2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:22
		down(&(sin->sem));
80008560:	26510014 	addiu	s1,s2,20
80008564:	0c00671f 	jal	80019c7c <down>
80008568:	02202021 	move	a0,s1
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8000856c:	40026000 	mfc0	v0,c0_status
80008570:	30420001 	andi	v0,v0,0x1
80008574:	14400025 	bnez	v0,8000860c <sfs_write+0x114>
80008578:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8000857c:	8e540008 	lw	s4,8(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
80008580:	32940001 	andi	s4,s4,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:23
		if (!SFSInodeRemoved(sin)) {
80008584:	1680002c 	bnez	s4,80008638 <sfs_write+0x140>
80008588:	02402821 	move	a1,s2
sfs_io():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:701
	struct sfs_inode *sin = vop_info(node, sfs_inode);
	int ret;
	if ((ret = trylock_sin(sin)) != 0) {
		return ret;
	}
	size_t alen = iob->io_resid;
8000858c:	8e02000c 	lw	v0,12(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:702
	ret =
80008590:	8e060000 	lw	a2,0(s0)
80008594:	8e070004 	lw	a3,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:701
	struct sfs_inode *sin = vop_info(node, sfs_inode);
	int ret;
	if ((ret = trylock_sin(sin)) != 0) {
		return ret;
	}
	size_t alen = iob->io_resid;
80008598:	afa20018 	sw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:702
	ret =
8000859c:	27a20018 	addiu	v0,sp,24
800085a0:	afa20010 	sw	v0,16(sp)
800085a4:	02602021 	move	a0,s3
800085a8:	24020001 	li	v0,1
800085ac:	0c001d9c 	jal	80007670 <sfs_io_nolock>
800085b0:	afa20014 	sw	v0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:704
	    sfs_io_nolock(sfs, sin, iob->io_base, iob->io_offset, &alen, write);
	if (alen != 0) {
800085b4:	8fa50018 	lw	a1,24(sp)
800085b8:	14a0001b 	bnez	a1,80008628 <sfs_write+0x130>
800085bc:	02002021 	move	a0,s0
unlock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:33
	return -E_NOENT;
}

static inline void unlock_sin(struct sfs_inode *sin)
{
	up(&(sin->sem));
800085c0:	02202021 	move	a0,s1
800085c4:	0c00671d 	jal	80019c74 <up>
800085c8:	afa20020 	sw	v0,32(sp)
800085cc:	8fa20020 	lw	v0,32(sp)
sfs_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:719
}

static int sfs_write(struct inode *node, struct iobuf *iob)
{
	return sfs_io(node, iob, 1);
}
800085d0:	8fbf003c 	lw	ra,60(sp)
800085d4:	8fb40038 	lw	s4,56(sp)
800085d8:	8fb30034 	lw	s3,52(sp)
800085dc:	8fb20030 	lw	s2,48(sp)
800085e0:	8fb1002c 	lw	s1,44(sp)
800085e4:	8fb00028 	lw	s0,40(sp)
800085e8:	03e00008 	jr	ra
800085ec:	27bd0040 	addiu	sp,sp,64
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
800085f0:	0c006d04 	jal	8001b410 <intr_disable>
800085f4:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
800085f8:	8e510008 	lw	s1,8(s2)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
800085fc:	0c006d00 	jal	8001b400 <intr_enable>
80008600:	32310001 	andi	s1,s1,0x1
80008604:	08002156 	j	80008558 <sfs_write+0x60>
80008608:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8000860c:	0c006d04 	jal	8001b410 <intr_disable>
80008610:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
80008614:	8e540008 	lw	s4,8(s2)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80008618:	0c006d00 	jal	8001b400 <intr_enable>
8000861c:	32940001 	andi	s4,s4,0x1
80008620:	08002161 	j	80008584 <sfs_write+0x8c>
80008624:	00000000 	nop
sfs_io():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:705
	}
	size_t alen = iob->io_resid;
	ret =
	    sfs_io_nolock(sfs, sin, iob->io_base, iob->io_offset, &alen, write);
	if (alen != 0) {
		iobuf_skip(iob, alen);
80008628:	0c00334e 	jal	8000cd38 <iobuf_skip>
8000862c:	afa20020 	sw	v0,32(sp)
80008630:	08002170 	j	800085c0 <sfs_write+0xc8>
80008634:	8fa20020 	lw	v0,32(sp)
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:26
	if (!SFSInodeRemoved(sin)) {
		down(&(sin->sem));
		if (!SFSInodeRemoved(sin)) {
			return 0;
		}
		up(&(sin->sem));
80008638:	0c00671d 	jal	80019c74 <up>
8000863c:	02202021 	move	a0,s1
80008640:	08002174 	j	800085d0 <sfs_write+0xd8>
80008644:	2402fffe 	li	v0,-2
sfs_io():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:695
	return ret;
}

static inline int sfs_io(struct inode *node, struct iobuf *iob, bool write)
{
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
80008648:	3c048002 	lui	a0,0x8002
8000864c:	3c068002 	lui	a2,0x8002
80008650:	3c078002 	lui	a3,0x8002
80008654:	24842028 	addiu	a0,a0,8232
80008658:	240502b7 	li	a1,695
8000865c:	24c60e28 	addiu	a2,a2,3624
80008660:	0c006b0b 	jal	8001ac2c <__panic>
80008664:	24e71e84 	addiu	a3,a3,7812
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:696
	struct sfs_inode *sin = vop_info(node, sfs_inode);
80008668:	3c068002 	lui	a2,0x8002
8000866c:	3c078002 	lui	a3,0x8002
80008670:	24842028 	addiu	a0,a0,8232
80008674:	240502b8 	li	a1,696
80008678:	24c60e28 	addiu	a2,a2,3624
8000867c:	0c006b0b 	jal	8001ac2c <__panic>
80008680:	24e72034 	addiu	a3,a3,8244

80008684 <sfs_read>:
sfs_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:712
	unlock_sin(sin);
	return ret;
}

static int sfs_read(struct inode *node, struct iobuf *iob)
{
80008684:	27bdffc0 	addiu	sp,sp,-64
80008688:	afb30034 	sw	s3,52(sp)
sfs_io():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:695
	return ret;
}

static inline int sfs_io(struct inode *node, struct iobuf *iob, bool write)
{
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
8000868c:	8c930044 	lw	s3,68(a0)
sfs_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:712
	unlock_sin(sin);
	return ret;
}

static int sfs_read(struct inode *node, struct iobuf *iob)
{
80008690:	afb20030 	sw	s2,48(sp)
80008694:	afb00028 	sw	s0,40(sp)
80008698:	afbf003c 	sw	ra,60(sp)
8000869c:	afb40038 	sw	s4,56(sp)
800086a0:	afb1002c 	sw	s1,44(sp)
800086a4:	00809021 	move	s2,a0
sfs_io():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:695
	return ret;
}

static inline int sfs_io(struct inode *node, struct iobuf *iob, bool write)
{
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
800086a8:	12600049 	beqz	s3,800087d0 <sfs_read+0x14c>
800086ac:	00a08021 	move	s0,a1
800086b0:	8e630084 	lw	v1,132(s3)
800086b4:	24025679 	li	v0,22137
800086b8:	14620045 	bne	v1,v0,800087d0 <sfs_read+0x14c>
800086bc:	24021237 	li	v0,4663
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:696
	struct sfs_inode *sin = vop_info(node, sfs_inode);
800086c0:	8c830038 	lw	v1,56(a0)
800086c4:	5462004a 	bnel	v1,v0,800087f0 <sfs_read+0x16c>
800086c8:	3c048002 	lui	a0,0x8002
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
800086cc:	40026000 	mfc0	v0,c0_status
800086d0:	30420001 	andi	v0,v0,0x1
800086d4:	14400028 	bnez	v0,80008778 <sfs_read+0xf4>
800086d8:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
800086dc:	8c910008 	lw	s1,8(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
800086e0:	32310001 	andi	s1,s1,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:21
static const struct inode_ops sfs_node_dirops;
static const struct inode_ops sfs_node_fileops;

static inline int trylock_sin(struct sfs_inode *sin)
{
	if (!SFSInodeRemoved(sin)) {
800086e4:	1620001c 	bnez	s1,80008758 <sfs_read+0xd4>
800086e8:	2402fffe 	li	v0,-2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:22
		down(&(sin->sem));
800086ec:	26510014 	addiu	s1,s2,20
800086f0:	0c00671f 	jal	80019c7c <down>
800086f4:	02202021 	move	a0,s1
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
800086f8:	40026000 	mfc0	v0,c0_status
800086fc:	30420001 	andi	v0,v0,0x1
80008700:	14400024 	bnez	v0,80008794 <sfs_read+0x110>
80008704:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
80008708:	8e540008 	lw	s4,8(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8000870c:	32940001 	andi	s4,s4,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:23
		if (!SFSInodeRemoved(sin)) {
80008710:	1680002b 	bnez	s4,800087c0 <sfs_read+0x13c>
80008714:	02402821 	move	a1,s2
sfs_io():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:701
	struct sfs_inode *sin = vop_info(node, sfs_inode);
	int ret;
	if ((ret = trylock_sin(sin)) != 0) {
		return ret;
	}
	size_t alen = iob->io_resid;
80008718:	8e02000c 	lw	v0,12(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:702
	ret =
8000871c:	8e060000 	lw	a2,0(s0)
80008720:	8e070004 	lw	a3,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:701
	struct sfs_inode *sin = vop_info(node, sfs_inode);
	int ret;
	if ((ret = trylock_sin(sin)) != 0) {
		return ret;
	}
	size_t alen = iob->io_resid;
80008724:	afa20018 	sw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:702
	ret =
80008728:	02602021 	move	a0,s3
8000872c:	27a20018 	addiu	v0,sp,24
80008730:	afa20010 	sw	v0,16(sp)
80008734:	0c001d9c 	jal	80007670 <sfs_io_nolock>
80008738:	afa00014 	sw	zero,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:704
	    sfs_io_nolock(sfs, sin, iob->io_base, iob->io_offset, &alen, write);
	if (alen != 0) {
8000873c:	8fa50018 	lw	a1,24(sp)
80008740:	14a0001b 	bnez	a1,800087b0 <sfs_read+0x12c>
80008744:	02002021 	move	a0,s0
unlock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:33
	return -E_NOENT;
}

static inline void unlock_sin(struct sfs_inode *sin)
{
	up(&(sin->sem));
80008748:	02202021 	move	a0,s1
8000874c:	0c00671d 	jal	80019c74 <up>
80008750:	afa20020 	sw	v0,32(sp)
80008754:	8fa20020 	lw	v0,32(sp)
sfs_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:714
}

static int sfs_read(struct inode *node, struct iobuf *iob)
{
	return sfs_io(node, iob, 0);
}
80008758:	8fbf003c 	lw	ra,60(sp)
8000875c:	8fb40038 	lw	s4,56(sp)
80008760:	8fb30034 	lw	s3,52(sp)
80008764:	8fb20030 	lw	s2,48(sp)
80008768:	8fb1002c 	lw	s1,44(sp)
8000876c:	8fb00028 	lw	s0,40(sp)
80008770:	03e00008 	jr	ra
80008774:	27bd0040 	addiu	sp,sp,64
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80008778:	0c006d04 	jal	8001b410 <intr_disable>
8000877c:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
80008780:	8e510008 	lw	s1,8(s2)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80008784:	0c006d00 	jal	8001b400 <intr_enable>
80008788:	32310001 	andi	s1,s1,0x1
8000878c:	080021b9 	j	800086e4 <sfs_read+0x60>
80008790:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
80008794:	0c006d04 	jal	8001b410 <intr_disable>
80008798:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
8000879c:	8e540008 	lw	s4,8(s2)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
800087a0:	0c006d00 	jal	8001b400 <intr_enable>
800087a4:	32940001 	andi	s4,s4,0x1
800087a8:	080021c4 	j	80008710 <sfs_read+0x8c>
800087ac:	00000000 	nop
sfs_io():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:705
	}
	size_t alen = iob->io_resid;
	ret =
	    sfs_io_nolock(sfs, sin, iob->io_base, iob->io_offset, &alen, write);
	if (alen != 0) {
		iobuf_skip(iob, alen);
800087b0:	0c00334e 	jal	8000cd38 <iobuf_skip>
800087b4:	afa20020 	sw	v0,32(sp)
800087b8:	080021d2 	j	80008748 <sfs_read+0xc4>
800087bc:	8fa20020 	lw	v0,32(sp)
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:26
	if (!SFSInodeRemoved(sin)) {
		down(&(sin->sem));
		if (!SFSInodeRemoved(sin)) {
			return 0;
		}
		up(&(sin->sem));
800087c0:	0c00671d 	jal	80019c74 <up>
800087c4:	02202021 	move	a0,s1
800087c8:	080021d6 	j	80008758 <sfs_read+0xd4>
800087cc:	2402fffe 	li	v0,-2
sfs_io():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:695
	return ret;
}

static inline int sfs_io(struct inode *node, struct iobuf *iob, bool write)
{
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
800087d0:	3c048002 	lui	a0,0x8002
800087d4:	3c068002 	lui	a2,0x8002
800087d8:	3c078002 	lui	a3,0x8002
800087dc:	24842028 	addiu	a0,a0,8232
800087e0:	240502b7 	li	a1,695
800087e4:	24c60e28 	addiu	a2,a2,3624
800087e8:	0c006b0b 	jal	8001ac2c <__panic>
800087ec:	24e71e84 	addiu	a3,a3,7812
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:696
	struct sfs_inode *sin = vop_info(node, sfs_inode);
800087f0:	3c068002 	lui	a2,0x8002
800087f4:	3c078002 	lui	a3,0x8002
800087f8:	24842028 	addiu	a0,a0,8232
800087fc:	240502b8 	li	a1,696
80008800:	24c60e28 	addiu	a2,a2,3624
80008804:	0c006b0b 	jal	8001ac2c <__panic>
80008808:	24e72034 	addiu	a3,a3,8244

8000880c <sfs_mkdir>:
sfs_mkdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:816
	vop_ref_dec(link_node);
	return ret;
}

static int sfs_mkdir(struct inode *node, const char *name)
{
8000880c:	27bdffc0 	addiu	sp,sp,-64
80008810:	afb00024 	sw	s0,36(sp)
80008814:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:817
	if (strlen(name) > SFS_MAX_FNAME_LEN) {
80008818:	00a02021 	move	a0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:816
	vop_ref_dec(link_node);
	return ret;
}

static int sfs_mkdir(struct inode *node, const char *name)
{
8000881c:	afb10028 	sw	s1,40(sp)
80008820:	afbf003c 	sw	ra,60(sp)
80008824:	afb50038 	sw	s5,56(sp)
80008828:	afb40034 	sw	s4,52(sp)
8000882c:	afb30030 	sw	s3,48(sp)
80008830:	afb2002c 	sw	s2,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:817
	if (strlen(name) > SFS_MAX_FNAME_LEN) {
80008834:	0c005b79 	jal	80016de4 <strlen>
80008838:	00a08821 	move	s1,a1
8000883c:	2c420100 	sltiu	v0,v0,256
80008840:	10400057 	beqz	v0,800089a0 <sfs_mkdir+0x194>
80008844:	3c058002 	lui	a1,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:820
		return -E_TOO_BIG;
	}
	if (strcmp(name, ".") == 0 || strcmp(name, "..") == 0) {
80008848:	02202021 	move	a0,s1
8000884c:	0c005bb8 	jal	80016ee0 <strcmp>
80008850:	24a53e28 	addiu	a1,a1,15912
80008854:	10400047 	beqz	v0,80008974 <sfs_mkdir+0x168>
80008858:	3c058002 	lui	a1,0x8002
8000885c:	02202021 	move	a0,s1
80008860:	0c005bb8 	jal	80016ee0 <strcmp>
80008864:	24a52330 	addiu	a1,a1,9008
80008868:	10400043 	beqz	v0,80008978 <sfs_mkdir+0x16c>
8000886c:	8fbf003c 	lw	ra,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:823
		return -E_EXISTS;
	}
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
80008870:	8e120044 	lw	s2,68(s0)
80008874:	12400085 	beqz	s2,80008a8c <sfs_mkdir+0x280>
80008878:	24025679 	li	v0,22137
8000887c:	8e430084 	lw	v1,132(s2)
80008880:	14620082 	bne	v1,v0,80008a8c <sfs_mkdir+0x280>
80008884:	24021237 	li	v0,4663
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:824
	struct sfs_inode *sin = vop_info(node, sfs_inode);
80008888:	8e030038 	lw	v1,56(s0)
8000888c:	14620087 	bne	v1,v0,80008aac <sfs_mkdir+0x2a0>
80008890:	3c048002 	lui	a0,0x8002
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80008894:	40026000 	mfc0	v0,c0_status
80008898:	30420001 	andi	v0,v0,0x1
8000889c:	14400027 	bnez	v0,8000893c <sfs_mkdir+0x130>
800088a0:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
800088a4:	8e130008 	lw	s3,8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
800088a8:	32730001 	andi	s3,s3,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:21
static const struct inode_ops sfs_node_dirops;
static const struct inode_ops sfs_node_fileops;

static inline int trylock_sin(struct sfs_inode *sin)
{
	if (!SFSInodeRemoved(sin)) {
800088ac:	1660003e 	bnez	s3,800089a8 <sfs_mkdir+0x19c>
800088b0:	26130014 	addiu	s3,s0,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:22
		down(&(sin->sem));
800088b4:	0c00671f 	jal	80019c7c <down>
800088b8:	02602021 	move	a0,s3
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
800088bc:	40026000 	mfc0	v0,c0_status
800088c0:	30420001 	andi	v0,v0,0x1
800088c4:	14400024 	bnez	v0,80008958 <sfs_mkdir+0x14c>
800088c8:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
800088cc:	8e140008 	lw	s4,8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
800088d0:	32940001 	andi	s4,s4,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:23
		if (!SFSInodeRemoved(sin)) {
800088d4:	16800058 	bnez	s4,80008a38 <sfs_mkdir+0x22c>
800088d8:	27a2001c 	addiu	v0,sp,28
sfs_mkdir_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:784

static int
sfs_mkdir_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, const char *name)
{
	int ret, slot;
	if ((ret =
800088dc:	02402021 	move	a0,s2
800088e0:	02002821 	move	a1,s0
800088e4:	02203021 	move	a2,s1
800088e8:	00003821 	move	a3,zero
800088ec:	afa00010 	sw	zero,16(sp)
800088f0:	0c001e85 	jal	80007a14 <sfs_dirent_search_nolock>
800088f4:	afa20014 	sw	v0,20(sp)
800088f8:	0040a821 	move	s5,v0
800088fc:	2402fffe 	li	v0,-2
80008900:	12a2002b 	beq	s5,v0,800089b0 <sfs_mkdir+0x1a4>
80008904:	2402ffef 	li	v0,-17
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:787
	     sfs_dirent_search_nolock(sfs, sin, name, NULL, NULL,
				      &slot)) != -E_NOENT) {
		return (ret != 0) ? ret : -E_EXISTS;
80008908:	0055a80a 	movz	s5,v0,s5
unlock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:33
	return -E_NOENT;
}

static inline void unlock_sin(struct sfs_inode *sin)
{
	up(&(sin->sem));
8000890c:	0c00671d 	jal	80019c74 <up>
80008910:	02602021 	move	a0,s3
sfs_mkdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:831
	if ((ret = trylock_sin(sin)) == 0) {
		ret = sfs_mkdir_nolock(sfs, sin, name);
		unlock_sin(sin);
	}
	return ret;
}
80008914:	8fbf003c 	lw	ra,60(sp)
80008918:	02a01021 	move	v0,s5
8000891c:	8fb40034 	lw	s4,52(sp)
80008920:	8fb50038 	lw	s5,56(sp)
80008924:	8fb30030 	lw	s3,48(sp)
80008928:	8fb2002c 	lw	s2,44(sp)
8000892c:	8fb10028 	lw	s1,40(sp)
80008930:	8fb00024 	lw	s0,36(sp)
80008934:	03e00008 	jr	ra
80008938:	27bd0040 	addiu	sp,sp,64
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8000893c:	0c006d04 	jal	8001b410 <intr_disable>
80008940:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
80008944:	8e130008 	lw	s3,8(s0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80008948:	0c006d00 	jal	8001b400 <intr_enable>
8000894c:	32730001 	andi	s3,s3,0x1
80008950:	0800222b 	j	800088ac <sfs_mkdir+0xa0>
80008954:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
80008958:	0c006d04 	jal	8001b410 <intr_disable>
8000895c:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
80008960:	8e140008 	lw	s4,8(s0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80008964:	0c006d00 	jal	8001b400 <intr_enable>
80008968:	32940001 	andi	s4,s4,0x1
8000896c:	08002235 	j	800088d4 <sfs_mkdir+0xc8>
80008970:	00000000 	nop
sfs_mkdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:831
80008974:	8fbf003c 	lw	ra,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:821
{
	if (strlen(name) > SFS_MAX_FNAME_LEN) {
		return -E_TOO_BIG;
	}
	if (strcmp(name, ".") == 0 || strcmp(name, "..") == 0) {
		return -E_EXISTS;
80008978:	2415ffef 	li	s5,-17
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:831
	if ((ret = trylock_sin(sin)) == 0) {
		ret = sfs_mkdir_nolock(sfs, sin, name);
		unlock_sin(sin);
	}
	return ret;
}
8000897c:	02a01021 	move	v0,s5
80008980:	8fb40034 	lw	s4,52(sp)
80008984:	8fb50038 	lw	s5,56(sp)
80008988:	8fb30030 	lw	s3,48(sp)
8000898c:	8fb2002c 	lw	s2,44(sp)
80008990:	8fb10028 	lw	s1,40(sp)
80008994:	8fb00024 	lw	s0,36(sp)
80008998:	03e00008 	jr	ra
8000899c:	27bd0040 	addiu	sp,sp,64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:818
}

static int sfs_mkdir(struct inode *node, const char *name)
{
	if (strlen(name) > SFS_MAX_FNAME_LEN) {
		return -E_TOO_BIG;
800089a0:	08002245 	j	80008914 <sfs_mkdir+0x108>
800089a4:	2415ffe5 	li	s5,-27
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:21
static const struct inode_ops sfs_node_dirops;
static const struct inode_ops sfs_node_fileops;

static inline int trylock_sin(struct sfs_inode *sin)
{
	if (!SFSInodeRemoved(sin)) {
800089a8:	08002245 	j	80008914 <sfs_mkdir+0x108>
800089ac:	2415fffe 	li	s5,-2
sfs_mkdir_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:790
	     sfs_dirent_search_nolock(sfs, sin, name, NULL, NULL,
				      &slot)) != -E_NOENT) {
		return (ret != 0) ? ret : -E_EXISTS;
	}
	struct inode *link_node;
	if ((ret = sfs_dirent_create_inode(sfs, SFS_TYPE_DIR, &link_node)) != 0) {
800089b0:	02402021 	move	a0,s2
800089b4:	24050002 	li	a1,2
800089b8:	0c001ca8 	jal	800072a0 <sfs_dirent_create_inode>
800089bc:	27a60018 	addiu	a2,sp,24
800089c0:	1440ffd2 	bnez	v0,8000890c <sfs_mkdir+0x100>
800089c4:	0040a821 	move	s5,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:793
		return ret;
	}
	struct sfs_inode *lnksin = vop_info(link_node, sfs_inode);
800089c8:	8fb40018 	lw	s4,24(sp)
800089cc:	1280003e 	beqz	s4,80008ac8 <sfs_mkdir+0x2bc>
800089d0:	24021237 	li	v0,4663
800089d4:	8e830038 	lw	v1,56(s4)
800089d8:	1462003b 	bne	v1,v0,80008ac8 <sfs_mkdir+0x2bc>
800089dc:	8fa6001c 	lw	a2,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:794
	if ((ret = sfs_dirent_link_nolock(sfs, sin, slot, lnksin, name)) != 0) {
800089e0:	02402021 	move	a0,s2
800089e4:	02002821 	move	a1,s0
800089e8:	02803821 	move	a3,s4
800089ec:	0c002123 	jal	8000848c <sfs_dirent_link_nolock>
800089f0:	afb10010 	sw	s1,16(sp)
800089f4:	10400014 	beqz	v0,80008a48 <sfs_mkdir+0x23c>
800089f8:	0040a821 	move	s5,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:795
		assert(lnksin->din->nlinks == 0);
800089fc:	8e820000 	lw	v0,0(s4)
80008a00:	9442000a 	lhu	v0,10(v0)
80008a04:	14400034 	bnez	v0,80008ad8 <sfs_mkdir+0x2cc>
80008a08:	8fa40018 	lw	a0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:796
		assert(inode_ref_count(link_node) == 1
80008a0c:	24020001 	li	v0,1
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
 *
 * Atomically reads the value of @v.
 * */
static __always_inline int atomic_read(const atomic_t * v)
{
	return v->counter;
80008a10:	8c83003c 	lw	v1,60(a0)
sfs_mkdir_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:796
80008a14:	54620038 	bnel	v1,v0,80008af8 <sfs_mkdir+0x2ec>
80008a18:	3c048002 	lui	a0,0x8002
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
80008a1c:	8c820040 	lw	v0,64(a0)
sfs_mkdir_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:796
80008a20:	54400035 	bnezl	v0,80008af8 <sfs_mkdir+0x2ec>
80008a24:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:811

	/* add '..' link to parent */
	sfs_nlinks_inc_nolock(sin);

out:
	vop_ref_dec(link_node);
80008a28:	0c001172 	jal	800045c8 <inode_ref_dec>
80008a2c:	00000000 	nop
80008a30:	08002243 	j	8000890c <sfs_mkdir+0x100>
80008a34:	00000000 	nop
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:26
	if (!SFSInodeRemoved(sin)) {
		down(&(sin->sem));
		if (!SFSInodeRemoved(sin)) {
			return 0;
		}
		up(&(sin->sem));
80008a38:	0c00671d 	jal	80019c74 <up>
80008a3c:	02602021 	move	a0,s3
80008a40:	08002245 	j	80008914 <sfs_mkdir+0x108>
80008a44:	2415fffe 	li	s5,-2
sfs_dirinfo_set_parent():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:754

static inline void
sfs_dirinfo_set_parent(struct sfs_inode *sin, struct sfs_inode *parent)
{
	sin->dirty = 1;
	sin->din->dirinfo.parent = parent->ino;
80008a48:	8e820000 	lw	v0,0(s4)
80008a4c:	8e030004 	lw	v1,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:753
}

static inline void
sfs_dirinfo_set_parent(struct sfs_inode *sin, struct sfs_inode *parent)
{
	sin->dirty = 1;
80008a50:	24050001 	li	a1,1
sfs_nlinks_inc_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:741
	return 0;
}

static inline void sfs_nlinks_inc_nolock(struct sfs_inode *sin)
{
	sin->dirty = 1, ++sin->din->nlinks;
80008a54:	9444000a 	lhu	a0,10(v0)
sfs_dirinfo_set_parent():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:753
}

static inline void
sfs_dirinfo_set_parent(struct sfs_inode *sin, struct sfs_inode *parent)
{
	sin->dirty = 1;
80008a58:	ae85000c 	sw	a1,12(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:754
	sin->din->dirinfo.parent = parent->ino;
80008a5c:	ac430004 	sw	v1,4(v0)
sfs_nlinks_inc_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:741
	return 0;
}

static inline void sfs_nlinks_inc_nolock(struct sfs_inode *sin)
{
	sin->dirty = 1, ++sin->din->nlinks;
80008a60:	8e030000 	lw	v1,0(s0)
80008a64:	24840001 	addiu	a0,a0,1
80008a68:	a444000a 	sh	a0,10(v0)
80008a6c:	9462000a 	lhu	v0,10(v1)
80008a70:	8fa40018 	lw	a0,24(sp)
80008a74:	ae05000c 	sw	a1,12(s0)
80008a78:	24420001 	addiu	v0,v0,1
sfs_mkdir_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:811

	/* add '..' link to parent */
	sfs_nlinks_inc_nolock(sin);

out:
	vop_ref_dec(link_node);
80008a7c:	0c001172 	jal	800045c8 <inode_ref_dec>
80008a80:	a462000a 	sh	v0,10(v1)
80008a84:	08002243 	j	8000890c <sfs_mkdir+0x100>
80008a88:	00000000 	nop
sfs_mkdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:823
		return -E_TOO_BIG;
	}
	if (strcmp(name, ".") == 0 || strcmp(name, "..") == 0) {
		return -E_EXISTS;
	}
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
80008a8c:	3c048002 	lui	a0,0x8002
80008a90:	3c068002 	lui	a2,0x8002
80008a94:	3c078002 	lui	a3,0x8002
80008a98:	24842028 	addiu	a0,a0,8232
80008a9c:	24050337 	li	a1,823
80008aa0:	24c60e28 	addiu	a2,a2,3624
80008aa4:	0c006b0b 	jal	8001ac2c <__panic>
80008aa8:	24e71e84 	addiu	a3,a3,7812
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:824
	struct sfs_inode *sin = vop_info(node, sfs_inode);
80008aac:	24842028 	addiu	a0,a0,8232
80008ab0:	24050338 	li	a1,824
sfs_mkdir_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:793
	}
	struct inode *link_node;
	if ((ret = sfs_dirent_create_inode(sfs, SFS_TYPE_DIR, &link_node)) != 0) {
		return ret;
	}
	struct sfs_inode *lnksin = vop_info(link_node, sfs_inode);
80008ab4:	3c068002 	lui	a2,0x8002
80008ab8:	3c078002 	lui	a3,0x8002
80008abc:	24c60e28 	addiu	a2,a2,3624
80008ac0:	0c006b0b 	jal	8001ac2c <__panic>
80008ac4:	24e72034 	addiu	a3,a3,8244
80008ac8:	3c048002 	lui	a0,0x8002
80008acc:	24842028 	addiu	a0,a0,8232
80008ad0:	080022ad 	j	80008ab4 <sfs_mkdir+0x2a8>
80008ad4:	24050319 	li	a1,793
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:795
	if ((ret = sfs_dirent_link_nolock(sfs, sin, slot, lnksin, name)) != 0) {
		assert(lnksin->din->nlinks == 0);
80008ad8:	3c048002 	lui	a0,0x8002
80008adc:	3c068002 	lui	a2,0x8002
80008ae0:	3c078002 	lui	a3,0x8002
80008ae4:	24842028 	addiu	a0,a0,8232
80008ae8:	2405031b 	li	a1,795
80008aec:	24c60e28 	addiu	a2,a2,3624
80008af0:	0c006b0b 	jal	8001ac2c <__panic>
80008af4:	24e72334 	addiu	a3,a3,9012
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:796
		assert(inode_ref_count(link_node) == 1
80008af8:	3c068002 	lui	a2,0x8002
80008afc:	3c078002 	lui	a3,0x8002
80008b00:	24842028 	addiu	a0,a0,8232
80008b04:	2405031d 	li	a1,797
80008b08:	24c60e28 	addiu	a2,a2,3624
80008b0c:	0c006b0b 	jal	8001ac2c <__panic>
80008b10:	24e72350 	addiu	a3,a3,9040

80008b14 <sfs_link>:
sfs_link():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:848
	return sfs_dirent_link_nolock(sfs, sin, slot, lnksin, name);
}

static int
sfs_link(struct inode *node, const char *name, struct inode *link_node)
{
80008b14:	27bdffb8 	addiu	sp,sp,-72
80008b18:	afb0002c 	sw	s0,44(sp)
80008b1c:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:849
	if (strlen(name) > SFS_MAX_FNAME_LEN) {
80008b20:	00a02021 	move	a0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:848
	return sfs_dirent_link_nolock(sfs, sin, slot, lnksin, name);
}

static int
sfs_link(struct inode *node, const char *name, struct inode *link_node)
{
80008b24:	afb20034 	sw	s2,52(sp)
80008b28:	afb10030 	sw	s1,48(sp)
80008b2c:	afbf0044 	sw	ra,68(sp)
80008b30:	afb50040 	sw	s5,64(sp)
80008b34:	afb4003c 	sw	s4,60(sp)
80008b38:	afb30038 	sw	s3,56(sp)
80008b3c:	00a08821 	move	s1,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:849
	if (strlen(name) > SFS_MAX_FNAME_LEN) {
80008b40:	0c005b79 	jal	80016de4 <strlen>
80008b44:	00c09021 	move	s2,a2
80008b48:	2c420100 	sltiu	v0,v0,256
80008b4c:	10400061 	beqz	v0,80008cd4 <sfs_link+0x1c0>
80008b50:	3c058002 	lui	a1,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:852
		return -E_TOO_BIG;
	}
	if (strcmp(name, ".") == 0 || strcmp(name, "..") == 0) {
80008b54:	02202021 	move	a0,s1
80008b58:	0c005bb8 	jal	80016ee0 <strcmp>
80008b5c:	24a53e28 	addiu	a1,a1,15912
80008b60:	10400052 	beqz	v0,80008cac <sfs_link+0x198>
80008b64:	3c058002 	lui	a1,0x8002
80008b68:	02202021 	move	a0,s1
80008b6c:	0c005bb8 	jal	80016ee0 <strcmp>
80008b70:	24a52330 	addiu	a1,a1,9008
80008b74:	1040004e 	beqz	v0,80008cb0 <sfs_link+0x19c>
80008b78:	8fbf0044 	lw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:855
		return -E_EXISTS;
	}
	struct sfs_inode *lnksin = vop_info(link_node, sfs_inode);
80008b7c:	1240006b 	beqz	s2,80008d2c <sfs_link+0x218>
80008b80:	24031237 	li	v1,4663
80008b84:	8e420038 	lw	v0,56(s2)
80008b88:	14430069 	bne	v0,v1,80008d30 <sfs_link+0x21c>
80008b8c:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:856
	if (lnksin->din->type == SFS_TYPE_DIR) {
80008b90:	8e430000 	lw	v1,0(s2)
80008b94:	94640008 	lhu	a0,8(v1)
80008b98:	24030002 	li	v1,2
80008b9c:	5083002d 	beql	a0,v1,80008c54 <sfs_link+0x140>
80008ba0:	2402ffeb 	li	v0,-21
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:859
		return -E_ISDIR;
	}
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
80008ba4:	8e130044 	lw	s3,68(s0)
80008ba8:	12600058 	beqz	s3,80008d0c <sfs_link+0x1f8>
80008bac:	24035679 	li	v1,22137
80008bb0:	8e640084 	lw	a0,132(s3)
80008bb4:	54830056 	bnel	a0,v1,80008d10 <sfs_link+0x1fc>
80008bb8:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:860
	struct sfs_inode *sin = vop_info(node, sfs_inode);
80008bbc:	8e030038 	lw	v1,56(s0)
80008bc0:	54620062 	bnel	v1,v0,80008d4c <sfs_link+0x238>
80008bc4:	3c048002 	lui	a0,0x8002
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80008bc8:	40026000 	mfc0	v0,c0_status
80008bcc:	30420001 	andi	v0,v0,0x1
80008bd0:	14400028 	bnez	v0,80008c74 <sfs_link+0x160>
80008bd4:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
80008bd8:	8e140008 	lw	s4,8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
80008bdc:	32940001 	andi	s4,s4,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:21
static const struct inode_ops sfs_node_dirops;
static const struct inode_ops sfs_node_fileops;

static inline int trylock_sin(struct sfs_inode *sin)
{
	if (!SFSInodeRemoved(sin)) {
80008be0:	1680001b 	bnez	s4,80008c50 <sfs_link+0x13c>
80008be4:	2402fffe 	li	v0,-2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:22
		down(&(sin->sem));
80008be8:	26140014 	addiu	s4,s0,20
80008bec:	0c00671f 	jal	80019c7c <down>
80008bf0:	02802021 	move	a0,s4
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
80008bf4:	40026000 	mfc0	v0,c0_status
80008bf8:	30420001 	andi	v0,v0,0x1
80008bfc:	14400024 	bnez	v0,80008c90 <sfs_link+0x17c>
80008c00:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
80008c04:	8e150008 	lw	s5,8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
80008c08:	32b50001 	andi	s5,s5,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:23
		if (!SFSInodeRemoved(sin)) {
80008c0c:	16a0003b 	bnez	s5,80008cfc <sfs_link+0x1e8>
80008c10:	02602021 	move	a0,s3
sfs_link_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:838
static int
sfs_link_nolock(struct sfs_fs *sfs, struct sfs_inode *sin,
		struct sfs_inode *lnksin, const char *name)
{
	int ret, slot;
	if ((ret =
80008c14:	27a20018 	addiu	v0,sp,24
80008c18:	02002821 	move	a1,s0
80008c1c:	02203021 	move	a2,s1
80008c20:	00003821 	move	a3,zero
80008c24:	afa00010 	sw	zero,16(sp)
80008c28:	0c001e85 	jal	80007a14 <sfs_dirent_search_nolock>
80008c2c:	afa20014 	sw	v0,20(sp)
80008c30:	2403fffe 	li	v1,-2
80008c34:	10430029 	beq	v0,v1,80008cdc <sfs_link+0x1c8>
80008c38:	2403ffef 	li	v1,-17
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:841
	     sfs_dirent_search_nolock(sfs, sin, name, NULL, NULL,
				      &slot)) != -E_NOENT) {
		return (ret != 0) ? ret : -E_EXISTS;
80008c3c:	0062100a 	movz	v0,v1,v0
unlock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:33
	return -E_NOENT;
}

static inline void unlock_sin(struct sfs_inode *sin)
{
	up(&(sin->sem));
80008c40:	02802021 	move	a0,s4
80008c44:	0c00671d 	jal	80019c74 <up>
80008c48:	afa20020 	sw	v0,32(sp)
80008c4c:	8fa20020 	lw	v0,32(sp)
sfs_link():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:867
	if ((ret = trylock_sin(sin)) == 0) {
		ret = sfs_link_nolock(sfs, sin, lnksin, name);
		unlock_sin(sin);
	}
	return ret;
}
80008c50:	8fbf0044 	lw	ra,68(sp)
80008c54:	8fb50040 	lw	s5,64(sp)
80008c58:	8fb4003c 	lw	s4,60(sp)
80008c5c:	8fb30038 	lw	s3,56(sp)
80008c60:	8fb20034 	lw	s2,52(sp)
80008c64:	8fb10030 	lw	s1,48(sp)
80008c68:	8fb0002c 	lw	s0,44(sp)
80008c6c:	03e00008 	jr	ra
80008c70:	27bd0048 	addiu	sp,sp,72
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80008c74:	0c006d04 	jal	8001b410 <intr_disable>
80008c78:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
80008c7c:	8e140008 	lw	s4,8(s0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80008c80:	0c006d00 	jal	8001b400 <intr_enable>
80008c84:	32940001 	andi	s4,s4,0x1
80008c88:	080022f8 	j	80008be0 <sfs_link+0xcc>
80008c8c:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
80008c90:	0c006d04 	jal	8001b410 <intr_disable>
80008c94:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
80008c98:	8e150008 	lw	s5,8(s0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80008c9c:	0c006d00 	jal	8001b400 <intr_enable>
80008ca0:	32b50001 	andi	s5,s5,0x1
80008ca4:	08002303 	j	80008c0c <sfs_link+0xf8>
80008ca8:	00000000 	nop
sfs_link():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:867
80008cac:	8fbf0044 	lw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:853
{
	if (strlen(name) > SFS_MAX_FNAME_LEN) {
		return -E_TOO_BIG;
	}
	if (strcmp(name, ".") == 0 || strcmp(name, "..") == 0) {
		return -E_EXISTS;
80008cb0:	2402ffef 	li	v0,-17
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:867
	if ((ret = trylock_sin(sin)) == 0) {
		ret = sfs_link_nolock(sfs, sin, lnksin, name);
		unlock_sin(sin);
	}
	return ret;
}
80008cb4:	8fb50040 	lw	s5,64(sp)
80008cb8:	8fb4003c 	lw	s4,60(sp)
80008cbc:	8fb30038 	lw	s3,56(sp)
80008cc0:	8fb20034 	lw	s2,52(sp)
80008cc4:	8fb10030 	lw	s1,48(sp)
80008cc8:	8fb0002c 	lw	s0,44(sp)
80008ccc:	03e00008 	jr	ra
80008cd0:	27bd0048 	addiu	sp,sp,72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:850

static int
sfs_link(struct inode *node, const char *name, struct inode *link_node)
{
	if (strlen(name) > SFS_MAX_FNAME_LEN) {
		return -E_TOO_BIG;
80008cd4:	08002314 	j	80008c50 <sfs_link+0x13c>
80008cd8:	2402ffe5 	li	v0,-27
sfs_link_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:843
	if ((ret =
	     sfs_dirent_search_nolock(sfs, sin, name, NULL, NULL,
				      &slot)) != -E_NOENT) {
		return (ret != 0) ? ret : -E_EXISTS;
	}
	return sfs_dirent_link_nolock(sfs, sin, slot, lnksin, name);
80008cdc:	8fa60018 	lw	a2,24(sp)
80008ce0:	02602021 	move	a0,s3
80008ce4:	02002821 	move	a1,s0
80008ce8:	02403821 	move	a3,s2
80008cec:	0c002123 	jal	8000848c <sfs_dirent_link_nolock>
80008cf0:	afb10010 	sw	s1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:33
	return -E_NOENT;
}

static inline void unlock_sin(struct sfs_inode *sin)
{
	up(&(sin->sem));
80008cf4:	08002311 	j	80008c44 <sfs_link+0x130>
80008cf8:	02802021 	move	a0,s4
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:26
	if (!SFSInodeRemoved(sin)) {
		down(&(sin->sem));
		if (!SFSInodeRemoved(sin)) {
			return 0;
		}
		up(&(sin->sem));
80008cfc:	0c00671d 	jal	80019c74 <up>
80008d00:	02802021 	move	a0,s4
80008d04:	08002314 	j	80008c50 <sfs_link+0x13c>
80008d08:	2402fffe 	li	v0,-2
sfs_link():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:859
	}
	struct sfs_inode *lnksin = vop_info(link_node, sfs_inode);
	if (lnksin->din->type == SFS_TYPE_DIR) {
		return -E_ISDIR;
	}
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
80008d0c:	3c048002 	lui	a0,0x8002
80008d10:	3c068002 	lui	a2,0x8002
80008d14:	3c078002 	lui	a3,0x8002
80008d18:	24842028 	addiu	a0,a0,8232
80008d1c:	2405035b 	li	a1,859
80008d20:	24c60e28 	addiu	a2,a2,3624
80008d24:	0c006b0b 	jal	8001ac2c <__panic>
80008d28:	24e71e84 	addiu	a3,a3,7812
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:855
		return -E_TOO_BIG;
	}
	if (strcmp(name, ".") == 0 || strcmp(name, "..") == 0) {
		return -E_EXISTS;
	}
	struct sfs_inode *lnksin = vop_info(link_node, sfs_inode);
80008d2c:	3c048002 	lui	a0,0x8002
80008d30:	24842028 	addiu	a0,a0,8232
80008d34:	24050357 	li	a1,855
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:860
	if (lnksin->din->type == SFS_TYPE_DIR) {
		return -E_ISDIR;
	}
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
	struct sfs_inode *sin = vop_info(node, sfs_inode);
80008d38:	3c068002 	lui	a2,0x8002
80008d3c:	3c078002 	lui	a3,0x8002
80008d40:	24c60e28 	addiu	a2,a2,3624
80008d44:	0c006b0b 	jal	8001ac2c <__panic>
80008d48:	24e72034 	addiu	a3,a3,8244
80008d4c:	24842028 	addiu	a0,a0,8232
80008d50:	0800234e 	j	80008d38 <sfs_link+0x224>
80008d54:	2405035c 	li	a1,860

80008d58 <sfs_truncfile>:
sfs_truncfile():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1194
	return 0;
}

static int sfs_truncfile(struct inode *node, off_t len)
{
	if (len < 0 || len > SFS_MAX_FILE_SIZE) {
80008d58:	3c020800 	lui	v0,0x800
80008d5c:	24420001 	addiu	v0,v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1193
	}
	return 0;
}

static int sfs_truncfile(struct inode *node, off_t len)
{
80008d60:	27bdffc8 	addiu	sp,sp,-56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1194
	if (len < 0 || len > SFS_MAX_FILE_SIZE) {
80008d64:	00a2102b 	sltu	v0,a1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1193
	}
	return 0;
}

static int sfs_truncfile(struct inode *node, off_t len)
{
80008d68:	afb40028 	sw	s4,40(sp)
80008d6c:	afb1001c 	sw	s1,28(sp)
80008d70:	afbf0034 	sw	ra,52(sp)
80008d74:	afb60030 	sw	s6,48(sp)
80008d78:	afb5002c 	sw	s5,44(sp)
80008d7c:	afb30024 	sw	s3,36(sp)
80008d80:	afb20020 	sw	s2,32(sp)
80008d84:	afb00018 	sw	s0,24(sp)
80008d88:	00a0a021 	move	s4,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1194
	if (len < 0 || len > SFS_MAX_FILE_SIZE) {
80008d8c:	1040006e 	beqz	v0,80008f48 <sfs_truncfile+0x1f0>
80008d90:	00808821 	move	s1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1197
		return -E_INVAL;
	}
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
80008d94:	8c920044 	lw	s2,68(a0)
80008d98:	12400071 	beqz	s2,80008f60 <sfs_truncfile+0x208>
80008d9c:	24025679 	li	v0,22137
80008da0:	8e430084 	lw	v1,132(s2)
80008da4:	1462006e 	bne	v1,v0,80008f60 <sfs_truncfile+0x208>
80008da8:	24021237 	li	v0,4663
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1198
	struct sfs_inode *sin = vop_info(node, sfs_inode);
80008dac:	8c830038 	lw	v1,56(a0)
80008db0:	14620073 	bne	v1,v0,80008f80 <sfs_truncfile+0x228>
80008db4:	24020002 	li	v0,2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1199
	struct sfs_disk_inode *din = sin->din;
80008db8:	8c950000 	lw	s5,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1200
	assert(din->type != SFS_TYPE_DIR);
80008dbc:	96a30008 	lhu	v1,8(s5)
80008dc0:	10620077 	beq	v1,v0,80008fa0 <sfs_truncfile+0x248>
80008dc4:	24b30fff 	addiu	s3,a1,4095
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1204

	int ret = 0;
	uint32_t nblks, tblks = ROUNDUP_DIV(len, SFS_BLKSIZE);
	if (din->fileinfo.size == len) {
80008dc8:	8ea20000 	lw	v0,0(s5)
80008dcc:	10a2002d 	beq	a1,v0,80008e84 <sfs_truncfile+0x12c>
80008dd0:	00139b02 	srl	s3,s3,0xc
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80008dd4:	40026000 	mfc0	v0,c0_status
80008dd8:	30420001 	andi	v0,v0,0x1
80008ddc:	14400048 	bnez	v0,80008f00 <sfs_truncfile+0x1a8>
80008de0:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
80008de4:	8c900008 	lw	s0,8(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
80008de8:	32100001 	andi	s0,s0,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:21
static const struct inode_ops sfs_node_dirops;
static const struct inode_ops sfs_node_fileops;

static inline int trylock_sin(struct sfs_inode *sin)
{
	if (!SFSInodeRemoved(sin)) {
80008dec:	16000054 	bnez	s0,80008f40 <sfs_truncfile+0x1e8>
80008df0:	26360014 	addiu	s6,s1,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:22
		down(&(sin->sem));
80008df4:	0c00671f 	jal	80019c7c <down>
80008df8:	02c02021 	move	a0,s6
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
80008dfc:	40026000 	mfc0	v0,c0_status
80008e00:	30420001 	andi	v0,v0,0x1
80008e04:	14400045 	bnez	v0,80008f1c <sfs_truncfile+0x1c4>
80008e08:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
80008e0c:	8e300008 	lw	s0,8(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
80008e10:	32100001 	andi	s0,s0,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:23
		if (!SFSInodeRemoved(sin)) {
80008e14:	1600004e 	bnez	s0,80008f50 <sfs_truncfile+0x1f8>
80008e18:	00000000 	nop
sfs_truncfile():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1212
	}

	if ((ret = trylock_sin(sin)) != 0) {
		return ret;
	}
	nblks = din->blocks;
80008e1c:	8eb0000c 	lw	s0,12(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1213
	if (nblks < tblks) {
80008e20:	0213102b 	sltu	v0,s0,s3
80008e24:	14400026 	bnez	v0,80008ec0 <sfs_truncfile+0x168>
80008e28:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1222
						  NULL)) != 0) {
				goto out_unlock;
			}
			nblks++;
		}
	} else if (tblks < nblks) {
80008e2c:	0270102b 	sltu	v0,s3,s0
80008e30:	1440002d 	bnez	v0,80008ee8 <sfs_truncfile+0x190>
80008e34:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1230
				goto out_unlock;
			}
			nblks--;
		}
	}
	assert(din->blocks == tblks);
80008e38:	16700069 	bne	s3,s0,80008fe0 <sfs_truncfile+0x288>
80008e3c:	24030001 	li	v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1231
	din->fileinfo.size = len;
80008e40:	aeb40000 	sw	s4,0(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1232
	sin->dirty = 1;
80008e44:	00001021 	move	v0,zero
80008e48:	ae23000c 	sw	v1,12(s1)
unlock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:33
	return -E_NOENT;
}

static inline void unlock_sin(struct sfs_inode *sin)
{
	up(&(sin->sem));
80008e4c:	02c02021 	move	a0,s6
80008e50:	0c00671d 	jal	80019c74 <up>
80008e54:	afa20010 	sw	v0,16(sp)
sfs_truncfile():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1237
	sin->dirty = 1;

out_unlock:
	unlock_sin(sin);
	return ret;
}
80008e58:	8fbf0034 	lw	ra,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1236
	din->fileinfo.size = len;
	sin->dirty = 1;

out_unlock:
	unlock_sin(sin);
	return ret;
80008e5c:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1237
}
80008e60:	8fb60030 	lw	s6,48(sp)
80008e64:	8fb5002c 	lw	s5,44(sp)
80008e68:	8fb40028 	lw	s4,40(sp)
80008e6c:	8fb30024 	lw	s3,36(sp)
80008e70:	8fb20020 	lw	s2,32(sp)
80008e74:	8fb1001c 	lw	s1,28(sp)
80008e78:	8fb00018 	lw	s0,24(sp)
80008e7c:	03e00008 	jr	ra
80008e80:	27bd0038 	addiu	sp,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1205
	assert(din->type != SFS_TYPE_DIR);

	int ret = 0;
	uint32_t nblks, tblks = ROUNDUP_DIV(len, SFS_BLKSIZE);
	if (din->fileinfo.size == len) {
		assert(tblks == din->blocks);
80008e84:	8ea3000c 	lw	v1,12(s5)
80008e88:	1663004d 	bne	s3,v1,80008fc0 <sfs_truncfile+0x268>
80008e8c:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1237
	sin->dirty = 1;

out_unlock:
	unlock_sin(sin);
	return ret;
}
80008e90:	8fbf0034 	lw	ra,52(sp)
80008e94:	8fb60030 	lw	s6,48(sp)
80008e98:	8fb5002c 	lw	s5,44(sp)
80008e9c:	8fb40028 	lw	s4,40(sp)
80008ea0:	8fb30024 	lw	s3,36(sp)
80008ea4:	8fb20020 	lw	s2,32(sp)
80008ea8:	8fb1001c 	lw	s1,28(sp)
80008eac:	8fb00018 	lw	s0,24(sp)
80008eb0:	03e00008 	jr	ra
80008eb4:	27bd0038 	addiu	sp,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1214
	if ((ret = trylock_sin(sin)) != 0) {
		return ret;
	}
	nblks = din->blocks;
	if (nblks < tblks) {
		while (nblks != tblks) {
80008eb8:	1213001f 	beq	s0,s3,80008f38 <sfs_truncfile+0x1e0>
80008ebc:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1215
			if ((ret =
80008ec0:	02202821 	move	a1,s1
80008ec4:	02003021 	move	a2,s0
80008ec8:	0c001cf7 	jal	800073dc <sfs_bmap_load_nolock>
80008ecc:	00003821 	move	a3,zero
80008ed0:	1040fff9 	beqz	v0,80008eb8 <sfs_truncfile+0x160>
80008ed4:	26100001 	addiu	s0,s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:33
	return -E_NOENT;
}

static inline void unlock_sin(struct sfs_inode *sin)
{
	up(&(sin->sem));
80008ed8:	08002394 	j	80008e50 <sfs_truncfile+0xf8>
80008edc:	02c02021 	move	a0,s6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1223
				goto out_unlock;
			}
			nblks++;
		}
	} else if (tblks < nblks) {
		while (tblks != nblks) {
80008ee0:	12130015 	beq	s0,s3,80008f38 <sfs_truncfile+0x1e0>
80008ee4:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1224
			if ((ret = sfs_bmap_truncate_nolock(sfs, sin)) != 0) {
80008ee8:	0c001f76 	jal	80007dd8 <sfs_bmap_truncate_nolock>
80008eec:	02202821 	move	a1,s1
80008ef0:	1040fffb 	beqz	v0,80008ee0 <sfs_truncfile+0x188>
80008ef4:	2610ffff 	addiu	s0,s0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:33
	return -E_NOENT;
}

static inline void unlock_sin(struct sfs_inode *sin)
{
	up(&(sin->sem));
80008ef8:	08002394 	j	80008e50 <sfs_truncfile+0xf8>
80008efc:	02c02021 	move	a0,s6
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80008f00:	0c006d04 	jal	8001b410 <intr_disable>
80008f04:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
80008f08:	8e300008 	lw	s0,8(s1)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80008f0c:	0c006d00 	jal	8001b400 <intr_enable>
80008f10:	32100001 	andi	s0,s0,0x1
80008f14:	0800237b 	j	80008dec <sfs_truncfile+0x94>
80008f18:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
80008f1c:	0c006d04 	jal	8001b410 <intr_disable>
80008f20:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
80008f24:	8e300008 	lw	s0,8(s1)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80008f28:	0c006d00 	jal	8001b400 <intr_enable>
80008f2c:	32100001 	andi	s0,s0,0x1
80008f30:	08002385 	j	80008e14 <sfs_truncfile+0xbc>
80008f34:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1223
				goto out_unlock;
			}
			nblks++;
		}
	} else if (tblks < nblks) {
		while (tblks != nblks) {
80008f38:	0800238e 	j	80008e38 <sfs_truncfile+0xe0>
80008f3c:	8eb0000c 	lw	s0,12(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:21
static const struct inode_ops sfs_node_dirops;
static const struct inode_ops sfs_node_fileops;

static inline int trylock_sin(struct sfs_inode *sin)
{
	if (!SFSInodeRemoved(sin)) {
80008f40:	080023a4 	j	80008e90 <sfs_truncfile+0x138>
80008f44:	2402fffe 	li	v0,-2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1195
}

static int sfs_truncfile(struct inode *node, off_t len)
{
	if (len < 0 || len > SFS_MAX_FILE_SIZE) {
		return -E_INVAL;
80008f48:	080023a4 	j	80008e90 <sfs_truncfile+0x138>
80008f4c:	2402ffea 	li	v0,-22
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:26
	if (!SFSInodeRemoved(sin)) {
		down(&(sin->sem));
		if (!SFSInodeRemoved(sin)) {
			return 0;
		}
		up(&(sin->sem));
80008f50:	0c00671d 	jal	80019c74 <up>
80008f54:	02c02021 	move	a0,s6
80008f58:	080023a4 	j	80008e90 <sfs_truncfile+0x138>
80008f5c:	2402fffe 	li	v0,-2
sfs_truncfile():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1197
static int sfs_truncfile(struct inode *node, off_t len)
{
	if (len < 0 || len > SFS_MAX_FILE_SIZE) {
		return -E_INVAL;
	}
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
80008f60:	3c048002 	lui	a0,0x8002
80008f64:	3c068002 	lui	a2,0x8002
80008f68:	3c078002 	lui	a3,0x8002
80008f6c:	24842028 	addiu	a0,a0,8232
80008f70:	240504ad 	li	a1,1197
80008f74:	24c60e28 	addiu	a2,a2,3624
80008f78:	0c006b0b 	jal	8001ac2c <__panic>
80008f7c:	24e71e84 	addiu	a3,a3,7812
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1198
	struct sfs_inode *sin = vop_info(node, sfs_inode);
80008f80:	3c048002 	lui	a0,0x8002
80008f84:	3c068002 	lui	a2,0x8002
80008f88:	3c078002 	lui	a3,0x8002
80008f8c:	24842028 	addiu	a0,a0,8232
80008f90:	240504ae 	li	a1,1198
80008f94:	24c60e28 	addiu	a2,a2,3624
80008f98:	0c006b0b 	jal	8001ac2c <__panic>
80008f9c:	24e72034 	addiu	a3,a3,8244
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1200
	struct sfs_disk_inode *din = sin->din;
	assert(din->type != SFS_TYPE_DIR);
80008fa0:	3c048002 	lui	a0,0x8002
80008fa4:	3c068002 	lui	a2,0x8002
80008fa8:	3c078002 	lui	a3,0x8002
80008fac:	24842028 	addiu	a0,a0,8232
80008fb0:	240504b0 	li	a1,1200
80008fb4:	24c60e28 	addiu	a2,a2,3624
80008fb8:	0c006b0b 	jal	8001ac2c <__panic>
80008fbc:	24e72180 	addiu	a3,a3,8576
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1205

	int ret = 0;
	uint32_t nblks, tblks = ROUNDUP_DIV(len, SFS_BLKSIZE);
	if (din->fileinfo.size == len) {
		assert(tblks == din->blocks);
80008fc0:	3c048002 	lui	a0,0x8002
80008fc4:	3c068002 	lui	a2,0x8002
80008fc8:	3c078002 	lui	a3,0x8002
80008fcc:	24842028 	addiu	a0,a0,8232
80008fd0:	240504b5 	li	a1,1205
80008fd4:	24c60e28 	addiu	a2,a2,3624
80008fd8:	0c006b0b 	jal	8001ac2c <__panic>
80008fdc:	24e72394 	addiu	a3,a3,9108
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1230
				goto out_unlock;
			}
			nblks--;
		}
	}
	assert(din->blocks == tblks);
80008fe0:	3c048002 	lui	a0,0x8002
80008fe4:	3c068002 	lui	a2,0x8002
80008fe8:	3c078002 	lui	a3,0x8002
80008fec:	24842028 	addiu	a0,a0,8232
80008ff0:	240504ce 	li	a1,1230
80008ff4:	24c60e28 	addiu	a2,a2,3624
80008ff8:	0c006b0b 	jal	8001ac2c <__panic>
80008ffc:	24e723ac 	addiu	a3,a3,9132

80009000 <sfs_getdirentry>:
sfs_getdirentry():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1069
	}
	return -E_NOENT;
}

static int sfs_getdirentry(struct inode *node, struct iobuf *iob)
{
80009000:	27bdffb8 	addiu	sp,sp,-72
80009004:	afb2002c 	sw	s2,44(sp)
80009008:	00809021 	move	s2,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1071
	struct sfs_disk_entry *entry;
	if ((entry = kmalloc(sizeof(struct sfs_disk_entry))) == NULL) {
8000900c:	24040104 	li	a0,260
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1069
	}
	return -E_NOENT;
}

static int sfs_getdirentry(struct inode *node, struct iobuf *iob)
{
80009010:	afb50038 	sw	s5,56(sp)
80009014:	afb10028 	sw	s1,40(sp)
80009018:	afbf0044 	sw	ra,68(sp)
8000901c:	afb70040 	sw	s7,64(sp)
80009020:	afb6003c 	sw	s6,60(sp)
80009024:	afb40034 	sw	s4,52(sp)
80009028:	afb30030 	sw	s3,48(sp)
8000902c:	afb00024 	sw	s0,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1071
	struct sfs_disk_entry *entry;
	if ((entry = kmalloc(sizeof(struct sfs_disk_entry))) == NULL) {
80009030:	0c005486 	jal	80015218 <kmalloc>
80009034:	00a0a821 	move	s5,a1
80009038:	10400085 	beqz	v0,80009250 <sfs_getdirentry+0x250>
8000903c:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1075
		return -E_NO_MEM;
	}

	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
80009040:	8e530044 	lw	s3,68(s2)
80009044:	1260008b 	beqz	s3,80009274 <sfs_getdirentry+0x274>
80009048:	24025679 	li	v0,22137
8000904c:	8e630084 	lw	v1,132(s3)
80009050:	14620088 	bne	v1,v0,80009274 <sfs_getdirentry+0x274>
80009054:	24021237 	li	v0,4663
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1076
	struct sfs_inode *sin = vop_info(node, sfs_inode);
80009058:	8e430038 	lw	v1,56(s2)
8000905c:	1462007e 	bne	v1,v0,80009258 <sfs_getdirentry+0x258>
80009060:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1078

	off_t offset = iob->io_offset;
80009064:	8eb40004 	lw	s4,4(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1079
	if (offset < 0 || offset % sfs_dentry_size != 0) {
80009068:	06800069 	bltz	s4,80009210 <sfs_getdirentry+0x210>
8000906c:	00000000 	nop
80009070:	328200ff 	andi	v0,s4,0xff
80009074:	14400066 	bnez	v0,80009210 <sfs_getdirentry+0x210>
80009078:	0014a202 	srl	s4,s4,0x8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1085
		kfree(entry);
		return -E_INVAL;
	}

	int ret, slot = offset / sfs_dentry_size;
	if (slot >= sin->din->dirinfo.slots + 2) {
8000907c:	8e420000 	lw	v0,0(s2)
80009080:	8c420000 	lw	v0,0(v0)
80009084:	24420002 	addiu	v0,v0,2
80009088:	0282102b 	sltu	v0,s4,v0
8000908c:	1040006c 	beqz	v0,80009240 <sfs_getdirentry+0x240>
80009090:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1089
		kfree(entry);
		return -E_NOENT;
	}
	switch (slot) {
80009094:	1680001b 	bnez	s4,80009104 <sfs_getdirentry+0x104>
80009098:	24020001 	li	v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1091
	case 0:
		strcpy(entry->name, ".");
8000909c:	26300004 	addiu	s0,s1,4
800090a0:	3c058002 	lui	a1,0x8002
800090a4:	02002021 	move	a0,s0
800090a8:	0c005b92 	jal	80016e48 <strcpy>
800090ac:	24a53e28 	addiu	a1,a1,15912
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1106
		unlock_sin(sin);
		if (ret != 0) {
			goto out;
		}
	}
	ret = iobuf_move(iob, entry->name, sfs_dentry_size, 1, NULL);
800090b0:	02a02021 	move	a0,s5
800090b4:	02002821 	move	a1,s0
800090b8:	24060100 	li	a2,256
800090bc:	24070001 	li	a3,1
800090c0:	0c003388 	jal	8000ce20 <iobuf_move>
800090c4:	afa00010 	sw	zero,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1108
out:
	kfree(entry);
800090c8:	02202021 	move	a0,s1
800090cc:	0c0054b1 	jal	800152c4 <kfree>
800090d0:	afa20018 	sw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1109
	return ret;
800090d4:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1110
}
800090d8:	8fbf0044 	lw	ra,68(sp)
800090dc:	8fb70040 	lw	s7,64(sp)
800090e0:	8fb6003c 	lw	s6,60(sp)
800090e4:	8fb50038 	lw	s5,56(sp)
800090e8:	8fb40034 	lw	s4,52(sp)
800090ec:	8fb30030 	lw	s3,48(sp)
800090f0:	8fb2002c 	lw	s2,44(sp)
800090f4:	8fb10028 	lw	s1,40(sp)
800090f8:	8fb00024 	lw	s0,36(sp)
800090fc:	03e00008 	jr	ra
80009100:	27bd0048 	addiu	sp,sp,72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1089
	int ret, slot = offset / sfs_dentry_size;
	if (slot >= sin->din->dirinfo.slots + 2) {
		kfree(entry);
		return -E_NOENT;
	}
	switch (slot) {
80009104:	1282002c 	beq	s4,v0,800091b8 <sfs_getdirentry+0x1b8>
80009108:	26300004 	addiu	s0,s1,4
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8000910c:	40026000 	mfc0	v0,c0_status
80009110:	30420001 	andi	v0,v0,0x1
80009114:	1440002e 	bnez	v0,800091d0 <sfs_getdirentry+0x1d0>
80009118:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
8000911c:	8e500008 	lw	s0,8(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
80009120:	32100001 	andi	s0,s0,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:21
static const struct inode_ops sfs_node_dirops;
static const struct inode_ops sfs_node_fileops;

static inline int trylock_sin(struct sfs_inode *sin)
{
	if (!SFSInodeRemoved(sin)) {
80009124:	16000044 	bnez	s0,80009238 <sfs_getdirentry+0x238>
80009128:	26570014 	addiu	s7,s2,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:22
		down(&(sin->sem));
8000912c:	0c00671f 	jal	80019c7c <down>
80009130:	02e02021 	move	a0,s7
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
80009134:	40026000 	mfc0	v0,c0_status
80009138:	30420001 	andi	v0,v0,0x1
8000913c:	1440002b 	bnez	v0,800091ec <sfs_getdirentry+0x1ec>
80009140:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
80009144:	8e500008 	lw	s0,8(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
80009148:	32100001 	andi	s0,s0,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:23
		if (!SFSInodeRemoved(sin)) {
8000914c:	16000038 	bnez	s0,80009230 <sfs_getdirentry+0x230>
80009150:	00000000 	nop
sfs_getdirentry_sub_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1053

static int
sfs_getdirentry_sub_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, int slot,
			   struct sfs_disk_entry *entry)
{
	int ret, i, nslots = sin->din->blocks;
80009154:	8e420000 	lw	v0,0(s2)
80009158:	8c56000c 	lw	s6,12(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1054
	for (i = 0; i < nslots; i++) {
8000915c:	1ac0002a 	blez	s6,80009208 <sfs_getdirentry+0x208>
80009160:	2694fffe 	addiu	s4,s4,-2
80009164:	08002462 	j	80009188 <sfs_getdirentry+0x188>
80009168:	00008021 	move	s0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1058
		if ((ret = sfs_dirent_read_nolock(sfs, sin, i, entry)) != 0) {
			return ret;
		}
		if (entry->ino != 0) {
8000916c:	50400004 	beqzl	v0,80009180 <sfs_getdirentry+0x180>
80009170:	26100001 	addiu	s0,s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1059
			if (slot == 0) {
80009174:	1280002a 	beqz	s4,80009220 <sfs_getdirentry+0x220>
80009178:	2694ffff 	addiu	s4,s4,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1054
static int
sfs_getdirentry_sub_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, int slot,
			   struct sfs_disk_entry *entry)
{
	int ret, i, nslots = sin->din->blocks;
	for (i = 0; i < nslots; i++) {
8000917c:	26100001 	addiu	s0,s0,1
80009180:	12d00008 	beq	s6,s0,800091a4 <sfs_getdirentry+0x1a4>
80009184:	2402fffe 	li	v0,-2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1055
		if ((ret = sfs_dirent_read_nolock(sfs, sin, i, entry)) != 0) {
80009188:	02602021 	move	a0,s3
8000918c:	02402821 	move	a1,s2
80009190:	02003021 	move	a2,s0
80009194:	0c001e4b 	jal	8000792c <sfs_dirent_read_nolock>
80009198:	02203821 	move	a3,s1
8000919c:	5040fff3 	beqzl	v0,8000916c <sfs_getdirentry+0x16c>
800091a0:	8e220000 	lw	v0,0(s1)
unlock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:33
	return -E_NOENT;
}

static inline void unlock_sin(struct sfs_inode *sin)
{
	up(&(sin->sem));
800091a4:	02e02021 	move	a0,s7
800091a8:	0c00671d 	jal	80019c74 <up>
800091ac:	afa20018 	sw	v0,24(sp)
800091b0:	08002432 	j	800090c8 <sfs_getdirentry+0xc8>
800091b4:	8fa20018 	lw	v0,24(sp)
sfs_getdirentry():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1094
	switch (slot) {
	case 0:
		strcpy(entry->name, ".");
		break;
	case 1:
		strcpy(entry->name, "..");
800091b8:	3c058002 	lui	a1,0x8002
800091bc:	02002021 	move	a0,s0
800091c0:	0c005b92 	jal	80016e48 <strcpy>
800091c4:	24a52330 	addiu	a1,a1,9008
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1095
		break;
800091c8:	0800242d 	j	800090b4 <sfs_getdirentry+0xb4>
800091cc:	02a02021 	move	a0,s5
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
800091d0:	0c006d04 	jal	8001b410 <intr_disable>
800091d4:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
800091d8:	8e500008 	lw	s0,8(s2)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
800091dc:	0c006d00 	jal	8001b400 <intr_enable>
800091e0:	32100001 	andi	s0,s0,0x1
800091e4:	08002449 	j	80009124 <sfs_getdirentry+0x124>
800091e8:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
800091ec:	0c006d04 	jal	8001b410 <intr_disable>
800091f0:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
800091f4:	8e500008 	lw	s0,8(s2)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
800091f8:	0c006d00 	jal	8001b400 <intr_enable>
800091fc:	32100001 	andi	s0,s0,0x1
80009200:	08002453 	j	8000914c <sfs_getdirentry+0x14c>
80009204:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1065
				return 0;
			}
			slot--;
		}
	}
	return -E_NOENT;
80009208:	08002469 	j	800091a4 <sfs_getdirentry+0x1a4>
8000920c:	2402fffe 	li	v0,-2
sfs_getdirentry():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1080
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
	struct sfs_inode *sin = vop_info(node, sfs_inode);

	off_t offset = iob->io_offset;
	if (offset < 0 || offset % sfs_dentry_size != 0) {
		kfree(entry);
80009210:	0c0054b1 	jal	800152c4 <kfree>
80009214:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1081
		return -E_INVAL;
80009218:	08002436 	j	800090d8 <sfs_getdirentry+0xd8>
8000921c:	2402ffea 	li	v0,-22
unlock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:33
	return -E_NOENT;
}

static inline void unlock_sin(struct sfs_inode *sin)
{
	up(&(sin->sem));
80009220:	0c00671d 	jal	80019c74 <up>
80009224:	02e02021 	move	a0,s7
80009228:	0800242c 	j	800090b0 <sfs_getdirentry+0xb0>
8000922c:	26300004 	addiu	s0,s1,4
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:26
	if (!SFSInodeRemoved(sin)) {
		down(&(sin->sem));
		if (!SFSInodeRemoved(sin)) {
			return 0;
		}
		up(&(sin->sem));
80009230:	0c00671d 	jal	80019c74 <up>
80009234:	02e02021 	move	a0,s7
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1065
				return 0;
			}
			slot--;
		}
	}
	return -E_NOENT;
80009238:	08002432 	j	800090c8 <sfs_getdirentry+0xc8>
8000923c:	2402fffe 	li	v0,-2
sfs_getdirentry():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1086
		return -E_INVAL;
	}

	int ret, slot = offset / sfs_dentry_size;
	if (slot >= sin->din->dirinfo.slots + 2) {
		kfree(entry);
80009240:	0c0054b1 	jal	800152c4 <kfree>
80009244:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1087
		return -E_NOENT;
80009248:	08002436 	j	800090d8 <sfs_getdirentry+0xd8>
8000924c:	2402fffe 	li	v0,-2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1072

static int sfs_getdirentry(struct inode *node, struct iobuf *iob)
{
	struct sfs_disk_entry *entry;
	if ((entry = kmalloc(sizeof(struct sfs_disk_entry))) == NULL) {
		return -E_NO_MEM;
80009250:	08002436 	j	800090d8 <sfs_getdirentry+0xd8>
80009254:	2402fff4 	li	v0,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1076
	}

	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
	struct sfs_inode *sin = vop_info(node, sfs_inode);
80009258:	3c068002 	lui	a2,0x8002
8000925c:	3c078002 	lui	a3,0x8002
80009260:	24842028 	addiu	a0,a0,8232
80009264:	24050434 	li	a1,1076
80009268:	24c60e28 	addiu	a2,a2,3624
8000926c:	0c006b0b 	jal	8001ac2c <__panic>
80009270:	24e72034 	addiu	a3,a3,8244
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1075
	struct sfs_disk_entry *entry;
	if ((entry = kmalloc(sizeof(struct sfs_disk_entry))) == NULL) {
		return -E_NO_MEM;
	}

	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
80009274:	3c048002 	lui	a0,0x8002
80009278:	3c068002 	lui	a2,0x8002
8000927c:	3c078002 	lui	a3,0x8002
80009280:	24842028 	addiu	a0,a0,8232
80009284:	24050433 	li	a1,1075
80009288:	24c60e28 	addiu	a2,a2,3624
8000928c:	0c006b0b 	jal	8001ac2c <__panic>
80009290:	24e71e84 	addiu	a3,a3,7812

80009294 <sfs_fsync>:
sfs_fsync():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:758
	sin->dirty = 1;
	sin->din->dirinfo.parent = parent->ino;
}

static int sfs_fsync(struct inode *node)
{
80009294:	27bdffc8 	addiu	sp,sp,-56
80009298:	afb2002c 	sw	s2,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:759
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
8000929c:	8c920044 	lw	s2,68(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:758
	sin->dirty = 1;
	sin->din->dirinfo.parent = parent->ino;
}

static int sfs_fsync(struct inode *node)
{
800092a0:	afb00024 	sw	s0,36(sp)
800092a4:	afbf0034 	sw	ra,52(sp)
800092a8:	afb30030 	sw	s3,48(sp)
800092ac:	afb10028 	sw	s1,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:759
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
800092b0:	1240005b 	beqz	s2,80009420 <sfs_fsync+0x18c>
800092b4:	00808021 	move	s0,a0
800092b8:	8e430084 	lw	v1,132(s2)
800092bc:	24025679 	li	v0,22137
800092c0:	14620057 	bne	v1,v0,80009420 <sfs_fsync+0x18c>
800092c4:	24021237 	li	v0,4663
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:760
	struct sfs_inode *sin = vop_info(node, sfs_inode);
800092c8:	8c830038 	lw	v1,56(a0)
800092cc:	5462004d 	bnel	v1,v0,80009404 <sfs_fsync+0x170>
800092d0:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:761
	if (sin->din->nlinks == 0 || !sin->dirty) {
800092d4:	8c830000 	lw	v1,0(a0)
800092d8:	9463000a 	lhu	v1,10(v1)
800092dc:	10600004 	beqz	v1,800092f0 <sfs_fsync+0x5c>
800092e0:	00001021 	move	v0,zero
800092e4:	8c83000c 	lw	v1,12(a0)
800092e8:	14600008 	bnez	v1,8000930c <sfs_fsync+0x78>
800092ec:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:778
			sin->dirty = 1;
		}
	}
	unlock_sin(sin);
	return ret;
}
800092f0:	8fbf0034 	lw	ra,52(sp)
800092f4:	8fb30030 	lw	s3,48(sp)
800092f8:	8fb2002c 	lw	s2,44(sp)
800092fc:	8fb10028 	lw	s1,40(sp)
80009300:	8fb00024 	lw	s0,36(sp)
80009304:	03e00008 	jr	ra
80009308:	27bd0038 	addiu	sp,sp,56
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8000930c:	40026000 	mfc0	v0,c0_status
80009310:	30420001 	andi	v0,v0,0x1
80009314:	1440001e 	bnez	v0,80009390 <sfs_fsync+0xfc>
80009318:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
8000931c:	8c910008 	lw	s1,8(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
80009320:	32310001 	andi	s1,s1,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:21
static const struct inode_ops sfs_node_dirops;
static const struct inode_ops sfs_node_fileops;

static inline int trylock_sin(struct sfs_inode *sin)
{
	if (!SFSInodeRemoved(sin)) {
80009324:	1620fff2 	bnez	s1,800092f0 <sfs_fsync+0x5c>
80009328:	2402fffe 	li	v0,-2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:22
		down(&(sin->sem));
8000932c:	26110014 	addiu	s1,s0,20
80009330:	0c00671f 	jal	80019c7c <down>
80009334:	02202021 	move	a0,s1
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
80009338:	40026000 	mfc0	v0,c0_status
8000933c:	30420001 	andi	v0,v0,0x1
80009340:	1440001a 	bnez	v0,800093ac <sfs_fsync+0x118>
80009344:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
80009348:	8e130008 	lw	s3,8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8000934c:	32730001 	andi	s3,s3,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:23
		if (!SFSInodeRemoved(sin)) {
80009350:	16600028 	bnez	s3,800093f4 <sfs_fsync+0x160>
80009354:	00000000 	nop
sfs_fsync():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:768
	}
	int ret;
	if ((ret = trylock_sin(sin)) != 0) {
		return ret;
	}
	if (sin->dirty) {
80009358:	8e02000c 	lw	v0,12(s0)
8000935c:	5440001a 	bnezl	v0,800093c8 <sfs_fsync+0x134>
80009360:	8e050000 	lw	a1,0(s0)
unlock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:33
	return -E_NOENT;
}

static inline void unlock_sin(struct sfs_inode *sin)
{
	up(&(sin->sem));
80009364:	02202021 	move	a0,s1
80009368:	0c00671d 	jal	80019c74 <up>
8000936c:	afa20018 	sw	v0,24(sp)
sfs_fsync():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:778
			sin->dirty = 1;
		}
	}
	unlock_sin(sin);
	return ret;
}
80009370:	8fbf0034 	lw	ra,52(sp)
unlock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:33
	return -E_NOENT;
}

static inline void unlock_sin(struct sfs_inode *sin)
{
	up(&(sin->sem));
80009374:	8fa20018 	lw	v0,24(sp)
sfs_fsync():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:778
			sin->dirty = 1;
		}
	}
	unlock_sin(sin);
	return ret;
}
80009378:	8fb30030 	lw	s3,48(sp)
8000937c:	8fb2002c 	lw	s2,44(sp)
80009380:	8fb10028 	lw	s1,40(sp)
80009384:	8fb00024 	lw	s0,36(sp)
80009388:	03e00008 	jr	ra
8000938c:	27bd0038 	addiu	sp,sp,56
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80009390:	0c006d04 	jal	8001b410 <intr_disable>
80009394:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
80009398:	8e110008 	lw	s1,8(s0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000939c:	0c006d00 	jal	8001b400 <intr_enable>
800093a0:	32310001 	andi	s1,s1,0x1
800093a4:	080024c9 	j	80009324 <sfs_fsync+0x90>
800093a8:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
800093ac:	0c006d04 	jal	8001b410 <intr_disable>
800093b0:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
800093b4:	8e130008 	lw	s3,8(s0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
800093b8:	0c006d00 	jal	8001b400 <intr_enable>
800093bc:	32730001 	andi	s3,s3,0x1
800093c0:	080024d4 	j	80009350 <sfs_fsync+0xbc>
800093c4:	00000000 	nop
sfs_fsync():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:770
	if ((ret = trylock_sin(sin)) != 0) {
		return ret;
	}
	if (sin->dirty) {
		sin->dirty = 0;
		if ((ret =
800093c8:	8e070004 	lw	a3,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:769
	int ret;
	if ((ret = trylock_sin(sin)) != 0) {
		return ret;
	}
	if (sin->dirty) {
		sin->dirty = 0;
800093cc:	ae00000c 	sw	zero,12(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:770
		if ((ret =
800093d0:	02402021 	move	a0,s2
800093d4:	24060048 	li	a2,72
800093d8:	0c002bb7 	jal	8000aedc <sfs_wbuf>
800093dc:	afa00010 	sw	zero,16(sp)
800093e0:	1040ffe1 	beqz	v0,80009368 <sfs_fsync+0xd4>
800093e4:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:773
		     sfs_wbuf(sfs, sin->din, sizeof(struct sfs_disk_inode),
			      sin->ino, 0)) != 0) {
			sin->dirty = 1;
800093e8:	24030001 	li	v1,1
800093ec:	080024da 	j	80009368 <sfs_fsync+0xd4>
800093f0:	ae03000c 	sw	v1,12(s0)
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:26
	if (!SFSInodeRemoved(sin)) {
		down(&(sin->sem));
		if (!SFSInodeRemoved(sin)) {
			return 0;
		}
		up(&(sin->sem));
800093f4:	0c00671d 	jal	80019c74 <up>
800093f8:	02202021 	move	a0,s1
800093fc:	080024bc 	j	800092f0 <sfs_fsync+0x5c>
80009400:	2402fffe 	li	v0,-2
sfs_fsync():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:760
}

static int sfs_fsync(struct inode *node)
{
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
	struct sfs_inode *sin = vop_info(node, sfs_inode);
80009404:	3c068002 	lui	a2,0x8002
80009408:	3c078002 	lui	a3,0x8002
8000940c:	24842028 	addiu	a0,a0,8232
80009410:	240502f8 	li	a1,760
80009414:	24c60e28 	addiu	a2,a2,3624
80009418:	0c006b0b 	jal	8001ac2c <__panic>
8000941c:	24e72034 	addiu	a3,a3,8244
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:759
	sin->din->dirinfo.parent = parent->ino;
}

static int sfs_fsync(struct inode *node)
{
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
80009420:	3c048002 	lui	a0,0x8002
80009424:	3c068002 	lui	a2,0x8002
80009428:	3c078002 	lui	a3,0x8002
8000942c:	24842028 	addiu	a0,a0,8232
80009430:	240502f7 	li	a1,759
80009434:	24c60e28 	addiu	a2,a2,3624
80009438:	0c006b0b 	jal	8001ac2c <__panic>
8000943c:	24e71e84 	addiu	a3,a3,7812

80009440 <sfs_load_inode>:
sfs_load_inode():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:127
	}
	return NULL;
}

int sfs_load_inode(struct sfs_fs *sfs, struct inode **node_store, uint32_t ino)
{
80009440:	27bdffc0 	addiu	sp,sp,-64
80009444:	afb1002c 	sw	s1,44(sp)
80009448:	afb00028 	sw	s0,40(sp)
8000944c:	00808821 	move	s1,a0
80009450:	00c08021 	move	s0,a2
80009454:	afbf003c 	sw	ra,60(sp)
80009458:	afb40038 	sw	s4,56(sp)
8000945c:	afb30034 	sw	s3,52(sp)
80009460:	afb20030 	sw	s2,48(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:128
	lock_sfs_fs(sfs);
80009464:	0c002c4b 	jal	8000b12c <lock_sfs_fs>
80009468:	00a09021 	move	s2,a1
sfs_hash_list():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:49
	panic("invalid file type %d.\n", type);
}

static list_entry_t *sfs_hash_list(struct sfs_fs *sfs, uint32_t ino)
{
	return sfs->hash_list + sin_hashfn(ino);
8000946c:	8e330080 	lw	s3,128(s1)
80009470:	02002021 	move	a0,s0
80009474:	0c005953 	jal	8001654c <hash32>
80009478:	2405000a 	li	a1,10
8000947c:	000210c0 	sll	v0,v0,0x3
80009480:	02629821 	addu	s3,s3,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:112
}

static struct inode *lookup_sfs_nolock(struct sfs_fs *sfs, uint32_t ino)
{
	struct inode *node;
	list_entry_t *list = sfs_hash_list(sfs, ino), *le = list;
80009484:	0260a021 	move	s4,s3
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
80009488:	8e940004 	lw	s4,4(s4)
lookup_sfs_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:113
	while ((le = list_next(le)) != list) {
8000948c:	52740019 	beql	s3,s4,800094f4 <sfs_load_inode+0xb4>
80009490:	afa00018 	sw	zero,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:115
		struct sfs_inode *sin = le2sin(le, hash_link);
		if (sin->ino == ino) {
80009494:	8e83ffd4 	lw	v1,-44(s4)
80009498:	5603fffc 	bnel	s0,v1,8000948c <sfs_load_inode+0x4c>
8000949c:	8e940004 	lw	s4,4(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:114
static struct inode *lookup_sfs_nolock(struct sfs_fs *sfs, uint32_t ino)
{
	struct inode *node;
	list_entry_t *list = sfs_hash_list(sfs, ino), *le = list;
	while ((le = list_next(le)) != list) {
		struct sfs_inode *sin = le2sin(le, hash_link);
800094a0:	2693ffd0 	addiu	s3,s4,-48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:117
		if (sin->ino == ino) {
			node = info2node(sin, sfs_inode);
			if (vop_ref_inc(node) == 1) {
800094a4:	0c0010b6 	jal	800042d8 <inode_ref_inc>
800094a8:	02602021 	move	a0,s3
800094ac:	24030001 	li	v1,1
800094b0:	50430033 	beql	v0,v1,80009580 <sfs_load_inode+0x140>
800094b4:	8e82ffe0 	lw	v0,-32(s4)
sfs_load_inode():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:130

int sfs_load_inode(struct sfs_fs *sfs, struct inode **node_store, uint32_t ino)
{
	lock_sfs_fs(sfs);
	struct inode *node;
	if ((node = lookup_sfs_nolock(sfs, ino)) != NULL) {
800094b8:	1260000e 	beqz	s3,800094f4 <sfs_load_inode+0xb4>
800094bc:	afb30018 	sw	s3,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:153
		goto failed_cleanup_din;
	}
	sfs_set_links(sfs, vop_info(node, sfs_inode));

out_unlock:
	unlock_sfs_fs(sfs);
800094c0:	0c002c51 	jal	8000b144 <unlock_sfs_fs>
800094c4:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:154
	*node_store = node;
800094c8:	8fa30018 	lw	v1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:162
failed_cleanup_din:
	kfree(din);
failed_unlock:
	unlock_sfs_fs(sfs);
	return ret;
}
800094cc:	8fbf003c 	lw	ra,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:155
	sfs_set_links(sfs, vop_info(node, sfs_inode));

out_unlock:
	unlock_sfs_fs(sfs);
	*node_store = node;
	return 0;
800094d0:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:154
	}
	sfs_set_links(sfs, vop_info(node, sfs_inode));

out_unlock:
	unlock_sfs_fs(sfs);
	*node_store = node;
800094d4:	ae430000 	sw	v1,0(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:162
failed_cleanup_din:
	kfree(din);
failed_unlock:
	unlock_sfs_fs(sfs);
	return ret;
}
800094d8:	8fb40038 	lw	s4,56(sp)
800094dc:	8fb30034 	lw	s3,52(sp)
800094e0:	8fb20030 	lw	s2,48(sp)
800094e4:	8fb1002c 	lw	s1,44(sp)
800094e8:	8fb00028 	lw	s0,40(sp)
800094ec:	03e00008 	jr	ra
800094f0:	27bd0040 	addiu	sp,sp,64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:136
		goto out_unlock;
	}

	int ret = -E_NO_MEM;
	struct sfs_disk_inode *din;
	if ((din = kmalloc(sizeof(struct sfs_disk_inode))) == NULL) {
800094f4:	0c005486 	jal	80015218 <kmalloc>
800094f8:	24040048 	li	a0,72
800094fc:	10400032 	beqz	v0,800095c8 <sfs_load_inode+0x188>
80009500:	00409821 	move	s3,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:140
		goto failed_unlock;
	}

	assert(sfs_block_inuse(sfs, ino));
80009504:	02202021 	move	a0,s1
80009508:	0c001ba9 	jal	80006ea4 <sfs_block_inuse>
8000950c:	02002821 	move	a1,s0
80009510:	1040003f 	beqz	v0,80009610 <sfs_load_inode+0x1d0>
80009514:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:141
	if ((ret =
80009518:	02602821 	move	a1,s3
8000951c:	24060048 	li	a2,72
80009520:	02003821 	move	a3,s0
80009524:	0c002b82 	jal	8000ae08 <sfs_rbuf>
80009528:	afa00010 	sw	zero,16(sp)
8000952c:	14400017 	bnez	v0,8000958c <sfs_load_inode+0x14c>
80009530:	02602021 	move	a0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:146
	     sfs_rbuf(sfs, din, sizeof(struct sfs_disk_inode), ino, 0)) != 0) {
		goto failed_cleanup_din;
	}

	assert(din->nlinks != 0);
80009534:	9662000a 	lhu	v0,10(s3)
80009538:	1040002d 	beqz	v0,800095f0 <sfs_load_inode+0x1b0>
8000953c:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:147
	if ((ret = sfs_create_inode(sfs, din, ino, &node)) != 0) {
80009540:	02602821 	move	a1,s3
80009544:	02003021 	move	a2,s0
80009548:	0c001bbe 	jal	80006ef8 <sfs_create_inode>
8000954c:	27a70018 	addiu	a3,sp,24
80009550:	1440000e 	bnez	v0,8000958c <sfs_load_inode+0x14c>
80009554:	02602021 	move	a0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:150
		goto failed_cleanup_din;
	}
	sfs_set_links(sfs, vop_info(node, sfs_inode));
80009558:	8fa50018 	lw	a1,24(sp)
8000955c:	10a0001c 	beqz	a1,800095d0 <sfs_load_inode+0x190>
80009560:	24021237 	li	v0,4663
80009564:	8ca30038 	lw	v1,56(a1)
80009568:	1462001a 	bne	v1,v0,800095d4 <sfs_load_inode+0x194>
8000956c:	3c048002 	lui	a0,0x8002
80009570:	0c001b4b 	jal	80006d2c <sfs_set_links>
80009574:	02202021 	move	a0,s1
80009578:	08002530 	j	800094c0 <sfs_load_inode+0x80>
8000957c:	00000000 	nop
lookup_sfs_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:118
	while ((le = list_next(le)) != list) {
		struct sfs_inode *sin = le2sin(le, hash_link);
		if (sin->ino == ino) {
			node = info2node(sin, sfs_inode);
			if (vop_ref_inc(node) == 1) {
				sin->reclaim_count++;
80009580:	24420001 	addiu	v0,v0,1
80009584:	0800252e 	j	800094b8 <sfs_load_inode+0x78>
80009588:	ae82ffe0 	sw	v0,-32(s4)
sfs_load_inode():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:158
	unlock_sfs_fs(sfs);
	*node_store = node;
	return 0;

failed_cleanup_din:
	kfree(din);
8000958c:	0c0054b1 	jal	800152c4 <kfree>
80009590:	afa20020 	sw	v0,32(sp)
80009594:	8fa20020 	lw	v0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:160
failed_unlock:
	unlock_sfs_fs(sfs);
80009598:	02202021 	move	a0,s1
8000959c:	0c002c51 	jal	8000b144 <unlock_sfs_fs>
800095a0:	afa20020 	sw	v0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:162
	return ret;
}
800095a4:	8fbf003c 	lw	ra,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:160
	return 0;

failed_cleanup_din:
	kfree(din);
failed_unlock:
	unlock_sfs_fs(sfs);
800095a8:	8fa20020 	lw	v0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:162
	return ret;
}
800095ac:	8fb40038 	lw	s4,56(sp)
800095b0:	8fb30034 	lw	s3,52(sp)
800095b4:	8fb20030 	lw	s2,48(sp)
800095b8:	8fb1002c 	lw	s1,44(sp)
800095bc:	8fb00028 	lw	s0,40(sp)
800095c0:	03e00008 	jr	ra
800095c4:	27bd0040 	addiu	sp,sp,64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:134
	struct inode *node;
	if ((node = lookup_sfs_nolock(sfs, ino)) != NULL) {
		goto out_unlock;
	}

	int ret = -E_NO_MEM;
800095c8:	08002566 	j	80009598 <sfs_load_inode+0x158>
800095cc:	2402fff4 	li	v0,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:150

	assert(din->nlinks != 0);
	if ((ret = sfs_create_inode(sfs, din, ino, &node)) != 0) {
		goto failed_cleanup_din;
	}
	sfs_set_links(sfs, vop_info(node, sfs_inode));
800095d0:	3c048002 	lui	a0,0x8002
800095d4:	3c068002 	lui	a2,0x8002
800095d8:	3c078002 	lui	a3,0x8002
800095dc:	24842028 	addiu	a0,a0,8232
800095e0:	24050096 	li	a1,150
800095e4:	24c60e28 	addiu	a2,a2,3624
800095e8:	0c006b0b 	jal	8001ac2c <__panic>
800095ec:	24e72034 	addiu	a3,a3,8244
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:146
	if ((ret =
	     sfs_rbuf(sfs, din, sizeof(struct sfs_disk_inode), ino, 0)) != 0) {
		goto failed_cleanup_din;
	}

	assert(din->nlinks != 0);
800095f0:	3c048002 	lui	a0,0x8002
800095f4:	3c068002 	lui	a2,0x8002
800095f8:	3c078002 	lui	a3,0x8002
800095fc:	24842028 	addiu	a0,a0,8232
80009600:	24050092 	li	a1,146
80009604:	24c60e28 	addiu	a2,a2,3624
80009608:	0c006b0b 	jal	8001ac2c <__panic>
8000960c:	24e7231c 	addiu	a3,a3,8988
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:140
	struct sfs_disk_inode *din;
	if ((din = kmalloc(sizeof(struct sfs_disk_inode))) == NULL) {
		goto failed_unlock;
	}

	assert(sfs_block_inuse(sfs, ino));
80009610:	3c048002 	lui	a0,0x8002
80009614:	3c068002 	lui	a2,0x8002
80009618:	3c078002 	lui	a3,0x8002
8000961c:	24842028 	addiu	a0,a0,8232
80009620:	2405008c 	li	a1,140
80009624:	24c60e28 	addiu	a2,a2,3624
80009628:	0c006b0b 	jal	8001ac2c <__panic>
8000962c:	24e72164 	addiu	a3,a3,8548

80009630 <sfs_namefile>:
sfs_namefile():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:992
}

static int sfs_namefile(struct inode *node, struct iobuf *iob)
{
	struct sfs_disk_entry *entry;
	if (iob->io_resid <= 2
80009630:	8ca2000c 	lw	v0,12(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:990
	unlock_sfs_mutex(sfs);
	return ret;
}

static int sfs_namefile(struct inode *node, struct iobuf *iob)
{
80009634:	27bdffb8 	addiu	sp,sp,-72
80009638:	afb10024 	sw	s1,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:992
	struct sfs_disk_entry *entry;
	if (iob->io_resid <= 2
8000963c:	2c420003 	sltiu	v0,v0,3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:990
	unlock_sfs_mutex(sfs);
	return ret;
}

static int sfs_namefile(struct inode *node, struct iobuf *iob)
{
80009640:	afbf0044 	sw	ra,68(sp)
80009644:	afbe0040 	sw	s8,64(sp)
80009648:	afb7003c 	sw	s7,60(sp)
8000964c:	afb60038 	sw	s6,56(sp)
80009650:	afb50034 	sw	s5,52(sp)
80009654:	afb40030 	sw	s4,48(sp)
80009658:	afb3002c 	sw	s3,44(sp)
8000965c:	afb20028 	sw	s2,40(sp)
80009660:	afb00020 	sw	s0,32(sp)
80009664:	afa5004c 	sw	a1,76(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:992
	struct sfs_disk_entry *entry;
	if (iob->io_resid <= 2
80009668:	144000b8 	bnez	v0,8000994c <sfs_namefile+0x31c>
8000966c:	00808821 	move	s1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:993
	    || (entry = kmalloc(sizeof(struct sfs_disk_entry))) == NULL) {
80009670:	0c005486 	jal	80015218 <kmalloc>
80009674:	24040104 	li	a0,260
80009678:	104000b4 	beqz	v0,8000994c <sfs_namefile+0x31c>
8000967c:	00409021 	move	s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:997
		return -E_NO_MEM;
	}

	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
80009680:	8e340044 	lw	s4,68(s1)
80009684:	128000d1 	beqz	s4,800099cc <sfs_namefile+0x39c>
80009688:	24025679 	li	v0,22137
8000968c:	8e830084 	lw	v1,132(s4)
80009690:	146200ce 	bne	v1,v0,800099cc <sfs_namefile+0x39c>
80009694:	24021237 	li	v0,4663
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:998
	struct sfs_inode *sin = vop_info(node, sfs_inode);
80009698:	8e230038 	lw	v1,56(s1)
8000969c:	146200d3 	bne	v1,v0,800099ec <sfs_namefile+0x3bc>
800096a0:	8fa3004c 	lw	v1,76(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1005
	int ret;
	uint32_t ino;
	char *ptr = iob->io_base + iob->io_resid;
	size_t alen, resid = iob->io_resid - 2;

	vop_ref_inc(node);
800096a4:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1002
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
	struct sfs_inode *sin = vop_info(node, sfs_inode);

	int ret;
	uint32_t ino;
	char *ptr = iob->io_base + iob->io_resid;
800096a8:	8c62000c 	lw	v0,12(v1)
800096ac:	8c760000 	lw	s6,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1003
	size_t alen, resid = iob->io_resid - 2;
800096b0:	245efffe 	addiu	s8,v0,-2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1005

	vop_ref_inc(node);
800096b4:	0c0010b6 	jal	800042d8 <inode_ref_inc>
800096b8:	02c2b021 	addu	s6,s6,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1006
	while ((ino = sin->ino) != SFS_BLKN_ROOT) {
800096bc:	8e330004 	lw	s3,4(s1)
800096c0:	24020001 	li	v0,1
800096c4:	1262007f 	beq	s3,v0,800098c4 <sfs_namefile+0x294>
800096c8:	26430004 	addiu	v1,s2,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1026

		if (ret != 0) {
			goto failed;
		}

		if ((alen = strlen(entry->name) + 1) > resid) {
800096cc:	afa30018 	sw	v1,24(sp)
sfs_load_parent():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:559

static int
sfs_load_parent(struct sfs_fs *sfs, struct sfs_inode *sin,
		struct inode **parent_store)
{
	return sfs_load_inode(sfs, parent_store, sin->din->dirinfo.parent);
800096d0:	8e220000 	lw	v0,0(s1)
800096d4:	02802021 	move	a0,s4
800096d8:	27a50010 	addiu	a1,sp,16
800096dc:	0c002510 	jal	80009440 <sfs_load_inode>
800096e0:	8c460004 	lw	a2,4(v0)
sfs_namefile():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1008
	size_t alen, resid = iob->io_resid - 2;

	vop_ref_inc(node);
	while ((ino = sin->ino) != SFS_BLKN_ROOT) {
		struct inode *parent;
		if ((ret = sfs_load_parent(sfs, sin, &parent)) != 0) {
800096e4:	14400039 	bnez	v0,800097cc <sfs_namefile+0x19c>
800096e8:	00401821 	move	v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1011
			goto failed;
		}
		vop_ref_dec(node);
800096ec:	0c001172 	jal	800045c8 <inode_ref_dec>
800096f0:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1013

		node = parent, sin = vop_info(node, sfs_inode);
800096f4:	8fb10010 	lw	s1,16(sp)
800096f8:	122000ac 	beqz	s1,800099ac <sfs_namefile+0x37c>
800096fc:	24031237 	li	v1,4663
80009700:	8e220038 	lw	v0,56(s1)
80009704:	544300aa 	bnel	v0,v1,800099b0 <sfs_namefile+0x380>
80009708:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1014
		assert(ino != sin->ino && sin->din->type == SFS_TYPE_DIR);
8000970c:	8e220004 	lw	v0,4(s1)
80009710:	1053009e 	beq	v0,s3,8000998c <sfs_namefile+0x35c>
80009714:	24030002 	li	v1,2
80009718:	8e220000 	lw	v0,0(s1)
8000971c:	94420008 	lhu	v0,8(v0)
80009720:	5443009b 	bnel	v0,v1,80009990 <sfs_namefile+0x360>
80009724:	3c048002 	lui	a0,0x8002
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80009728:	40026000 	mfc0	v0,c0_status
8000972c:	30420001 	andi	v0,v0,0x1
80009730:	14400039 	bnez	v0,80009818 <sfs_namefile+0x1e8>
80009734:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
80009738:	8e300008 	lw	s0,8(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8000973c:	32100001 	andi	s0,s0,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:21
static const struct inode_ops sfs_node_dirops;
static const struct inode_ops sfs_node_fileops;

static inline int trylock_sin(struct sfs_inode *sin)
{
	if (!SFSInodeRemoved(sin)) {
80009740:	16000022 	bnez	s0,800097cc <sfs_namefile+0x19c>
80009744:	2403fffe 	li	v1,-2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:22
		down(&(sin->sem));
80009748:	26370014 	addiu	s7,s1,20
8000974c:	0c00671f 	jal	80019c7c <down>
80009750:	02e02021 	move	a0,s7
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
80009754:	40026000 	mfc0	v0,c0_status
80009758:	30420001 	andi	v0,v0,0x1
8000975c:	14400037 	bnez	v0,8000983c <sfs_namefile+0x20c>
80009760:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
80009764:	8e300008 	lw	s0,8(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
80009768:	32100001 	andi	s0,s0,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:23
		if (!SFSInodeRemoved(sin)) {
8000976c:	1600003a 	bnez	s0,80009858 <sfs_namefile+0x228>
80009770:	00000000 	nop
sfs_dirent_findino_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:508

static int
sfs_dirent_findino_nolock(struct sfs_fs *sfs, struct sfs_inode *sin,
			  uint32_t ino, struct sfs_disk_entry *entry)
{
	int ret, i, nslots = sin->din->blocks;
80009774:	8e220000 	lw	v0,0(s1)
80009778:	8c55000c 	lw	s5,12(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:509
	for (i = 0; i < nslots; i++) {
8000977c:	1aa0003a 	blez	s5,80009868 <sfs_namefile+0x238>
80009780:	00008021 	move	s0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:510
		if ((ret = sfs_dirent_read_nolock(sfs, sin, i, entry)) != 0) {
80009784:	080025e9 	j	800097a4 <sfs_namefile+0x174>
80009788:	02802021 	move	a0,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:513
			return ret;
		}
		if (entry->ino == ino) {
8000978c:	8e420000 	lw	v0,0(s2)
80009790:	12620037 	beq	s3,v0,80009870 <sfs_namefile+0x240>
80009794:	26100001 	addiu	s0,s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:509
static int
sfs_dirent_findino_nolock(struct sfs_fs *sfs, struct sfs_inode *sin,
			  uint32_t ino, struct sfs_disk_entry *entry)
{
	int ret, i, nslots = sin->din->blocks;
	for (i = 0; i < nslots; i++) {
80009798:	12b00008 	beq	s5,s0,800097bc <sfs_namefile+0x18c>
8000979c:	2403fffe 	li	v1,-2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:510
		if ((ret = sfs_dirent_read_nolock(sfs, sin, i, entry)) != 0) {
800097a0:	02802021 	move	a0,s4
800097a4:	02202821 	move	a1,s1
800097a8:	02003021 	move	a2,s0
800097ac:	0c001e4b 	jal	8000792c <sfs_dirent_read_nolock>
800097b0:	02403821 	move	a3,s2
800097b4:	1040fff5 	beqz	v0,8000978c <sfs_namefile+0x15c>
800097b8:	00401821 	move	v1,v0
unlock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:33
	return -E_NOENT;
}

static inline void unlock_sin(struct sfs_inode *sin)
{
	up(&(sin->sem));
800097bc:	02e02021 	move	a0,s7
800097c0:	0c00671d 	jal	80019c74 <up>
800097c4:	afa3001c 	sw	v1,28(sp)
800097c8:	8fa3001c 	lw	v1,28(sp)
sfs_namefile():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1044
	return 0;

failed_nomem:
	ret = -E_NO_MEM;
failed:
	vop_ref_dec(node);
800097cc:	02202021 	move	a0,s1
800097d0:	0c001172 	jal	800045c8 <inode_ref_dec>
800097d4:	afa3001c 	sw	v1,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1045
	kfree(entry);
800097d8:	0c0054b1 	jal	800152c4 <kfree>
800097dc:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1046
	return ret;
800097e0:	8fa3001c 	lw	v1,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1047
}
800097e4:	8fbf0044 	lw	ra,68(sp)
800097e8:	8fbe0040 	lw	s8,64(sp)
800097ec:	00601021 	move	v0,v1
800097f0:	8fb7003c 	lw	s7,60(sp)
800097f4:	8fb60038 	lw	s6,56(sp)
800097f8:	8fb50034 	lw	s5,52(sp)
800097fc:	8fb40030 	lw	s4,48(sp)
80009800:	8fb3002c 	lw	s3,44(sp)
80009804:	8fb20028 	lw	s2,40(sp)
80009808:	8fb10024 	lw	s1,36(sp)
8000980c:	8fb00020 	lw	s0,32(sp)
80009810:	03e00008 	jr	ra
80009814:	27bd0048 	addiu	sp,sp,72
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80009818:	0c006d04 	jal	8001b410 <intr_disable>
8000981c:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
80009820:	8e300008 	lw	s0,8(s1)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80009824:	0c006d00 	jal	8001b400 <intr_enable>
80009828:	32100001 	andi	s0,s0,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:21
static const struct inode_ops sfs_node_dirops;
static const struct inode_ops sfs_node_fileops;

static inline int trylock_sin(struct sfs_inode *sin)
{
	if (!SFSInodeRemoved(sin)) {
8000982c:	1200ffc7 	beqz	s0,8000974c <sfs_namefile+0x11c>
80009830:	26370014 	addiu	s7,s1,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:517
		}
		if (entry->ino == ino) {
			return 0;
		}
	}
	return -E_NOENT;
80009834:	080025f3 	j	800097cc <sfs_namefile+0x19c>
80009838:	2403fffe 	li	v1,-2
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8000983c:	0c006d04 	jal	8001b410 <intr_disable>
80009840:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
80009844:	8e300008 	lw	s0,8(s1)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80009848:	0c006d00 	jal	8001b400 <intr_enable>
8000984c:	32100001 	andi	s0,s0,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:23

static inline int trylock_sin(struct sfs_inode *sin)
{
	if (!SFSInodeRemoved(sin)) {
		down(&(sin->sem));
		if (!SFSInodeRemoved(sin)) {
80009850:	5200ffc9 	beqzl	s0,80009778 <sfs_namefile+0x148>
80009854:	8e220000 	lw	v0,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:26
			return 0;
		}
		up(&(sin->sem));
80009858:	0c00671d 	jal	80019c74 <up>
8000985c:	02e02021 	move	a0,s7
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:517
		}
		if (entry->ino == ino) {
			return 0;
		}
	}
	return -E_NOENT;
80009860:	080025f3 	j	800097cc <sfs_namefile+0x19c>
80009864:	2403fffe 	li	v1,-2
80009868:	080025ef 	j	800097bc <sfs_namefile+0x18c>
8000986c:	2403fffe 	li	v1,-2
unlock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:33
	return -E_NOENT;
}

static inline void unlock_sin(struct sfs_inode *sin)
{
	up(&(sin->sem));
80009870:	0c00671d 	jal	80019c74 <up>
80009874:	02e02021 	move	a0,s7
sfs_namefile():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1026

		if (ret != 0) {
			goto failed;
		}

		if ((alen = strlen(entry->name) + 1) > resid) {
80009878:	0c005b79 	jal	80016de4 <strlen>
8000987c:	8fa40018 	lw	a0,24(sp)
80009880:	00408021 	move	s0,v0
80009884:	24420001 	addiu	v0,v0,1
80009888:	03c2182b 	sltu	v1,s8,v0
8000988c:	1460003d 	bnez	v1,80009984 <sfs_namefile+0x354>
80009890:	8fa50018 	lw	a1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1029
			goto failed_nomem;
		}
		resid -= alen, ptr -= alen;
80009894:	02c2b023 	subu	s6,s6,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1030
		memcpy(ptr, entry->name, alen - 1);
80009898:	02003021 	move	a2,s0
8000989c:	02c02021 	move	a0,s6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1029
		}

		if ((alen = strlen(entry->name) + 1) > resid) {
			goto failed_nomem;
		}
		resid -= alen, ptr -= alen;
800098a0:	03c2f023 	subu	s8,s8,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1030
		memcpy(ptr, entry->name, alen - 1);
800098a4:	0c005c7c 	jal	800171f0 <memcpy>
800098a8:	02d08021 	addu	s0,s6,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1031
		ptr[alen - 1] = '/';
800098ac:	2402002f 	li	v0,47
800098b0:	a2020000 	sb	v0,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1006
	uint32_t ino;
	char *ptr = iob->io_base + iob->io_resid;
	size_t alen, resid = iob->io_resid - 2;

	vop_ref_inc(node);
	while ((ino = sin->ino) != SFS_BLKN_ROOT) {
800098b4:	8e330004 	lw	s3,4(s1)
800098b8:	24030001 	li	v1,1
800098bc:	5663ff85 	bnel	s3,v1,800096d4 <sfs_namefile+0xa4>
800098c0:	8e220000 	lw	v0,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1033
		}
		resid -= alen, ptr -= alen;
		memcpy(ptr, entry->name, alen - 1);
		ptr[alen - 1] = '/';
	}
	vop_ref_dec(node);
800098c4:	0c001172 	jal	800045c8 <inode_ref_dec>
800098c8:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1034
	alen = iob->io_resid - resid - 2;
800098cc:	8fa3004c 	lw	v1,76(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1035
	ptr = memmove(iob->io_base + 1, ptr, alen);
800098d0:	02c02821 	move	a1,s6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1034
		resid -= alen, ptr -= alen;
		memcpy(ptr, entry->name, alen - 1);
		ptr[alen - 1] = '/';
	}
	vop_ref_dec(node);
	alen = iob->io_resid - resid - 2;
800098d4:	8c62000c 	lw	v0,12(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1035
	ptr = memmove(iob->io_base + 1, ptr, alen);
800098d8:	8c640000 	lw	a0,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1034
		resid -= alen, ptr -= alen;
		memcpy(ptr, entry->name, alen - 1);
		ptr[alen - 1] = '/';
	}
	vop_ref_dec(node);
	alen = iob->io_resid - resid - 2;
800098dc:	2442fffe 	addiu	v0,v0,-2
800098e0:	005ef023 	subu	s8,v0,s8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1035
	ptr = memmove(iob->io_base + 1, ptr, alen);
800098e4:	03c03021 	move	a2,s8
800098e8:	0c005c5c 	jal	80017170 <memmove>
800098ec:	24840001 	addiu	a0,a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1036
	ptr[-1] = '/', ptr[alen] = '\0';
800098f0:	2404002f 	li	a0,47
800098f4:	a044ffff 	sb	a0,-1(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1037
	iobuf_skip(iob, alen);
800098f8:	8fa4004c 	lw	a0,76(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1036
		ptr[alen - 1] = '/';
	}
	vop_ref_dec(node);
	alen = iob->io_resid - resid - 2;
	ptr = memmove(iob->io_base + 1, ptr, alen);
	ptr[-1] = '/', ptr[alen] = '\0';
800098fc:	005e1821 	addu	v1,v0,s8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1037
	iobuf_skip(iob, alen);
80009900:	03c02821 	move	a1,s8
80009904:	0c00334e 	jal	8000cd38 <iobuf_skip>
80009908:	a0600000 	sb	zero,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1038
	kfree(entry);
8000990c:	0c0054b1 	jal	800152c4 <kfree>
80009910:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1047
	ret = -E_NO_MEM;
failed:
	vop_ref_dec(node);
	kfree(entry);
	return ret;
}
80009914:	8fbf0044 	lw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1039
	alen = iob->io_resid - resid - 2;
	ptr = memmove(iob->io_base + 1, ptr, alen);
	ptr[-1] = '/', ptr[alen] = '\0';
	iobuf_skip(iob, alen);
	kfree(entry);
	return 0;
80009918:	00001821 	move	v1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1047
	ret = -E_NO_MEM;
failed:
	vop_ref_dec(node);
	kfree(entry);
	return ret;
}
8000991c:	00601021 	move	v0,v1
80009920:	8fbe0040 	lw	s8,64(sp)
80009924:	8fb7003c 	lw	s7,60(sp)
80009928:	8fb60038 	lw	s6,56(sp)
8000992c:	8fb50034 	lw	s5,52(sp)
80009930:	8fb40030 	lw	s4,48(sp)
80009934:	8fb3002c 	lw	s3,44(sp)
80009938:	8fb20028 	lw	s2,40(sp)
8000993c:	8fb10024 	lw	s1,36(sp)
80009940:	8fb00020 	lw	s0,32(sp)
80009944:	03e00008 	jr	ra
80009948:	27bd0048 	addiu	sp,sp,72
8000994c:	8fbf0044 	lw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:994
static int sfs_namefile(struct inode *node, struct iobuf *iob)
{
	struct sfs_disk_entry *entry;
	if (iob->io_resid <= 2
	    || (entry = kmalloc(sizeof(struct sfs_disk_entry))) == NULL) {
		return -E_NO_MEM;
80009950:	2403fff4 	li	v1,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1047
	ret = -E_NO_MEM;
failed:
	vop_ref_dec(node);
	kfree(entry);
	return ret;
}
80009954:	00601021 	move	v0,v1
80009958:	8fbe0040 	lw	s8,64(sp)
8000995c:	8fb7003c 	lw	s7,60(sp)
80009960:	8fb60038 	lw	s6,56(sp)
80009964:	8fb50034 	lw	s5,52(sp)
80009968:	8fb40030 	lw	s4,48(sp)
8000996c:	8fb3002c 	lw	s3,44(sp)
80009970:	8fb20028 	lw	s2,40(sp)
80009974:	8fb10024 	lw	s1,36(sp)
80009978:	8fb00020 	lw	s0,32(sp)
8000997c:	03e00008 	jr	ra
80009980:	27bd0048 	addiu	sp,sp,72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1042
	iobuf_skip(iob, alen);
	kfree(entry);
	return 0;

failed_nomem:
	ret = -E_NO_MEM;
80009984:	080025f3 	j	800097cc <sfs_namefile+0x19c>
80009988:	2403fff4 	li	v1,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1014
			goto failed;
		}
		vop_ref_dec(node);

		node = parent, sin = vop_info(node, sfs_inode);
		assert(ino != sin->ino && sin->din->type == SFS_TYPE_DIR);
8000998c:	3c048002 	lui	a0,0x8002
80009990:	3c068002 	lui	a2,0x8002
80009994:	3c078002 	lui	a3,0x8002
80009998:	24842028 	addiu	a0,a0,8232
8000999c:	240503f6 	li	a1,1014
800099a0:	24c60e28 	addiu	a2,a2,3624
800099a4:	0c006b0b 	jal	8001ac2c <__panic>
800099a8:	24e723c4 	addiu	a3,a3,9156
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1013
		if ((ret = sfs_load_parent(sfs, sin, &parent)) != 0) {
			goto failed;
		}
		vop_ref_dec(node);

		node = parent, sin = vop_info(node, sfs_inode);
800099ac:	3c048002 	lui	a0,0x8002
800099b0:	24842028 	addiu	a0,a0,8232
800099b4:	240503f5 	li	a1,1013
800099b8:	3c068002 	lui	a2,0x8002
800099bc:	3c078002 	lui	a3,0x8002
800099c0:	24c60e28 	addiu	a2,a2,3624
800099c4:	0c006b0b 	jal	8001ac2c <__panic>
800099c8:	24e72034 	addiu	a3,a3,8244
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:997
	if (iob->io_resid <= 2
	    || (entry = kmalloc(sizeof(struct sfs_disk_entry))) == NULL) {
		return -E_NO_MEM;
	}

	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
800099cc:	3c048002 	lui	a0,0x8002
800099d0:	3c068002 	lui	a2,0x8002
800099d4:	3c078002 	lui	a3,0x8002
800099d8:	24842028 	addiu	a0,a0,8232
800099dc:	240503e5 	li	a1,997
800099e0:	24c60e28 	addiu	a2,a2,3624
800099e4:	0c006b0b 	jal	8001ac2c <__panic>
800099e8:	24e71e84 	addiu	a3,a3,7812
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:998
	struct sfs_inode *sin = vop_info(node, sfs_inode);
800099ec:	3c048002 	lui	a0,0x8002
800099f0:	24842028 	addiu	a0,a0,8232
800099f4:	0800266e 	j	800099b8 <sfs_namefile+0x388>
800099f8:	240503e6 	li	a1,998

800099fc <sfs_lookup_parent>:
sfs_lookup_parent():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1426
}

static int
sfs_lookup_parent(struct inode *node, char *path, struct inode **node_store,
		  char **endp)
{
800099fc:	27bdffb0 	addiu	sp,sp,-80
80009a00:	afb40038 	sw	s4,56(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1427
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
80009a04:	8c940044 	lw	s4,68(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1426
}

static int
sfs_lookup_parent(struct inode *node, char *path, struct inode **node_store,
		  char **endp)
{
80009a08:	afbe0048 	sw	s8,72(sp)
80009a0c:	afb70044 	sw	s7,68(sp)
80009a10:	afb20030 	sw	s2,48(sp)
80009a14:	afb00028 	sw	s0,40(sp)
80009a18:	afbf004c 	sw	ra,76(sp)
80009a1c:	afb60040 	sw	s6,64(sp)
80009a20:	afb5003c 	sw	s5,60(sp)
80009a24:	afb30034 	sw	s3,52(sp)
80009a28:	afb1002c 	sw	s1,44(sp)
80009a2c:	00809021 	move	s2,a0
80009a30:	00a08021 	move	s0,a1
80009a34:	00c0f021 	move	s8,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1427
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
80009a38:	128000b7 	beqz	s4,80009d18 <sfs_lookup_parent+0x31c>
80009a3c:	00e0b821 	move	s7,a3
80009a40:	8e830084 	lw	v1,132(s4)
80009a44:	24025679 	li	v0,22137
80009a48:	546200b4 	bnel	v1,v0,80009d1c <sfs_lookup_parent+0x320>
80009a4c:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1428
	assert(*path != '\0' && *path != '/');
80009a50:	90a20000 	lbu	v0,0(a1)
80009a54:	104000a8 	beqz	v0,80009cf8 <sfs_lookup_parent+0x2fc>
80009a58:	2403002f 	li	v1,47
80009a5c:	504300a7 	beql	v0,v1,80009cfc <sfs_lookup_parent+0x300>
80009a60:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1429
	vop_ref_inc(node);
80009a64:	0c0010b6 	jal	800042d8 <inode_ref_inc>
80009a68:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1431
	while (1) {
		struct sfs_inode *sin = vop_info(node, sfs_inode);
80009a6c:	8e430038 	lw	v1,56(s2)
80009a70:	24021237 	li	v0,4663
80009a74:	14620099 	bne	v1,v0,80009cdc <sfs_lookup_parent+0x2e0>
80009a78:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1432
		if (sin->din->type != SFS_TYPE_DIR) {
80009a7c:	8e420000 	lw	v0,0(s2)
80009a80:	94430008 	lhu	v1,8(v0)
80009a84:	24020002 	li	v0,2
80009a88:	1462003a 	bne	v1,v0,80009b74 <sfs_lookup_parent+0x178>
80009a8c:	3c138002 	lui	s3,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1439
			return -E_NOTDIR;
		}

		char *subpath;
next:
		if ((subpath = sfs_lookup_subpath(path)) == NULL) {
80009a90:	02002021 	move	a0,s0
80009a94:	0c001b69 	jal	80006da4 <sfs_lookup_subpath>
80009a98:	3c158002 	lui	s5,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1443
			*node_store = node, *endp = path;
			return 0;
		}
		if (strcmp(path, ".") == 0) {
80009a9c:	26733e28 	addiu	s3,s3,15912
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1450
			goto next;
		}

		int ret;
		struct inode *subnode;
		if (strcmp(path, "..") == 0) {
80009aa0:	26b52330 	addiu	s5,s5,9008
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1439
			return -E_NOTDIR;
		}

		char *subpath;
next:
		if ((subpath = sfs_lookup_subpath(path)) == NULL) {
80009aa4:	1040000b 	beqz	v0,80009ad4 <sfs_lookup_parent+0xd8>
80009aa8:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1443
			*node_store = node, *endp = path;
			return 0;
		}
		if (strcmp(path, ".") == 0) {
80009aac:	02002021 	move	a0,s0
80009ab0:	0c005bb8 	jal	80016ee0 <strcmp>
80009ab4:	02602821 	move	a1,s3
80009ab8:	14400016 	bnez	v0,80009b14 <sfs_lookup_parent+0x118>
80009abc:	02002021 	move	a0,s0
80009ac0:	02208021 	move	s0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1439
			return -E_NOTDIR;
		}

		char *subpath;
next:
		if ((subpath = sfs_lookup_subpath(path)) == NULL) {
80009ac4:	0c001b69 	jal	80006da4 <sfs_lookup_subpath>
80009ac8:	02002021 	move	a0,s0
80009acc:	1440fff7 	bnez	v0,80009aac <sfs_lookup_parent+0xb0>
80009ad0:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1466
		if (ret != 0) {
			return ret;
		}
		node = subnode, path = subpath;
	}
}
80009ad4:	8fbf004c 	lw	ra,76(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1441

		char *subpath;
next:
		if ((subpath = sfs_lookup_subpath(path)) == NULL) {
			*node_store = node, *endp = path;
			return 0;
80009ad8:	afa00020 	sw	zero,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1440
		}

		char *subpath;
next:
		if ((subpath = sfs_lookup_subpath(path)) == NULL) {
			*node_store = node, *endp = path;
80009adc:	afd20000 	sw	s2,0(s8)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1466
		if (ret != 0) {
			return ret;
		}
		node = subnode, path = subpath;
	}
}
80009ae0:	8fa20020 	lw	v0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1440
		}

		char *subpath;
next:
		if ((subpath = sfs_lookup_subpath(path)) == NULL) {
			*node_store = node, *endp = path;
80009ae4:	aef00000 	sw	s0,0(s7)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1466
		if (ret != 0) {
			return ret;
		}
		node = subnode, path = subpath;
	}
}
80009ae8:	8fbe0048 	lw	s8,72(sp)
80009aec:	8fb70044 	lw	s7,68(sp)
80009af0:	8fb60040 	lw	s6,64(sp)
80009af4:	8fb5003c 	lw	s5,60(sp)
80009af8:	8fb40038 	lw	s4,56(sp)
80009afc:	8fb30034 	lw	s3,52(sp)
80009b00:	8fb20030 	lw	s2,48(sp)
80009b04:	8fb1002c 	lw	s1,44(sp)
80009b08:	8fb00028 	lw	s0,40(sp)
80009b0c:	03e00008 	jr	ra
80009b10:	27bd0050 	addiu	sp,sp,80
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1450
			goto next;
		}

		int ret;
		struct inode *subnode;
		if (strcmp(path, "..") == 0) {
80009b14:	0c005bb8 	jal	80016ee0 <strcmp>
80009b18:	02a02821 	move	a1,s5
80009b1c:	1440001a 	bnez	v0,80009b88 <sfs_lookup_parent+0x18c>
80009b20:	02802021 	move	a0,s4
sfs_load_parent():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:559

static int
sfs_load_parent(struct sfs_fs *sfs, struct sfs_inode *sin,
		struct inode **parent_store)
{
	return sfs_load_inode(sfs, parent_store, sin->din->dirinfo.parent);
80009b24:	8e420000 	lw	v0,0(s2)
80009b28:	27a5001c 	addiu	a1,sp,28
80009b2c:	0c002510 	jal	80009440 <sfs_load_inode>
80009b30:	8c460004 	lw	a2,4(v0)
80009b34:	afa20020 	sw	v0,32(sp)
sfs_lookup_parent():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1460
				return -E_TOO_BIG;
			}
			ret = sfs_lookup_once(sfs, sin, path, &subnode, NULL);
		}

		vop_ref_dec(node);
80009b38:	0c001172 	jal	800045c8 <inode_ref_dec>
80009b3c:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1461
		if (ret != 0) {
80009b40:	8fa20020 	lw	v0,32(sp)
80009b44:	14400036 	bnez	v0,80009c20 <sfs_lookup_parent+0x224>
80009b48:	8fb2001c 	lw	s2,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1431
{
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
	assert(*path != '\0' && *path != '/');
	vop_ref_inc(node);
	while (1) {
		struct sfs_inode *sin = vop_info(node, sfs_inode);
80009b4c:	12400062 	beqz	s2,80009cd8 <sfs_lookup_parent+0x2dc>
80009b50:	24021237 	li	v0,4663
80009b54:	8e430038 	lw	v1,56(s2)
80009b58:	14620060 	bne	v1,v0,80009cdc <sfs_lookup_parent+0x2e0>
80009b5c:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1432
		if (sin->din->type != SFS_TYPE_DIR) {
80009b60:	8e420000 	lw	v0,0(s2)
80009b64:	94430008 	lhu	v1,8(v0)
80009b68:	24020002 	li	v0,2
80009b6c:	1062ffd5 	beq	v1,v0,80009ac4 <sfs_lookup_parent+0xc8>
80009b70:	02208021 	move	s0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1433
			vop_ref_dec(node);
80009b74:	0c001172 	jal	800045c8 <inode_ref_dec>
80009b78:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1434
			return -E_NOTDIR;
80009b7c:	2402ffec 	li	v0,-20
80009b80:	08002708 	j	80009c20 <sfs_lookup_parent+0x224>
80009b84:	afa20020 	sw	v0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1453
		int ret;
		struct inode *subnode;
		if (strcmp(path, "..") == 0) {
			ret = sfs_load_parent(sfs, sin, &subnode);
		} else {
			if (strlen(path) > SFS_MAX_FNAME_LEN) {
80009b88:	0c005b79 	jal	80016de4 <strlen>
80009b8c:	02002021 	move	a0,s0
80009b90:	2c420100 	sltiu	v0,v0,256
80009b94:	10400046 	beqz	v0,80009cb0 <sfs_lookup_parent+0x2b4>
80009b98:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80009b9c:	40026000 	mfc0	v0,c0_status
80009ba0:	30420001 	andi	v0,v0,0x1
80009ba4:	1440002b 	bnez	v0,80009c54 <sfs_lookup_parent+0x258>
80009ba8:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
80009bac:	8e560008 	lw	s6,8(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
80009bb0:	32d60001 	andi	s6,s6,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:21
static const struct inode_ops sfs_node_dirops;
static const struct inode_ops sfs_node_fileops;

static inline int trylock_sin(struct sfs_inode *sin)
{
	if (!SFSInodeRemoved(sin)) {
80009bb4:	16c0002f 	bnez	s6,80009c74 <sfs_lookup_parent+0x278>
80009bb8:	2402fffe 	li	v0,-2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:22
		down(&(sin->sem));
80009bbc:	26560014 	addiu	s6,s2,20
80009bc0:	0c00671f 	jal	80019c7c <down>
80009bc4:	02c02021 	move	a0,s6
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
80009bc8:	40026000 	mfc0	v0,c0_status
80009bcc:	30420001 	andi	v0,v0,0x1
80009bd0:	1440002a 	bnez	v0,80009c7c <sfs_lookup_parent+0x280>
80009bd4:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
80009bd8:	8e420008 	lw	v0,8(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
80009bdc:	30420001 	andi	v0,v0,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:23
		if (!SFSInodeRemoved(sin)) {
80009be0:	14400038 	bnez	v0,80009cc4 <sfs_lookup_parent+0x2c8>
80009be4:	02802021 	move	a0,s4
sfs_lookup_once():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:571
	int ret;
	if ((ret = trylock_sin(sin)) != 0) {
		return ret;
	}
	uint32_t ino;
	ret = sfs_dirent_search_nolock(sfs, sin, name, &ino, slot, NULL);
80009be8:	02402821 	move	a1,s2
80009bec:	02003021 	move	a2,s0
80009bf0:	27a70018 	addiu	a3,sp,24
80009bf4:	afa00010 	sw	zero,16(sp)
80009bf8:	0c001e85 	jal	80007a14 <sfs_dirent_search_nolock>
80009bfc:	afa00014 	sw	zero,20(sp)
unlock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:33
	return -E_NOENT;
}

static inline void unlock_sin(struct sfs_inode *sin)
{
	up(&(sin->sem));
80009c00:	02c02021 	move	a0,s6
80009c04:	0c00671d 	jal	80019c74 <up>
80009c08:	afa20020 	sw	v0,32(sp)
sfs_lookup_once():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:573
		return ret;
	}
	uint32_t ino;
	ret = sfs_dirent_search_nolock(sfs, sin, name, &ino, slot, NULL);
	unlock_sin(sin);
	if (ret != 0) {
80009c0c:	8fa20020 	lw	v0,32(sp)
80009c10:	10400022 	beqz	v0,80009c9c <sfs_lookup_parent+0x2a0>
80009c14:	8fa60018 	lw	a2,24(sp)
sfs_lookup_parent():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1460
				return -E_TOO_BIG;
			}
			ret = sfs_lookup_once(sfs, sin, path, &subnode, NULL);
		}

		vop_ref_dec(node);
80009c18:	0c001172 	jal	800045c8 <inode_ref_dec>
80009c1c:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1466
		if (ret != 0) {
			return ret;
		}
		node = subnode, path = subpath;
	}
}
80009c20:	8fbf004c 	lw	ra,76(sp)
80009c24:	8fa20020 	lw	v0,32(sp)
80009c28:	8fbe0048 	lw	s8,72(sp)
80009c2c:	8fb70044 	lw	s7,68(sp)
80009c30:	8fb60040 	lw	s6,64(sp)
80009c34:	8fb5003c 	lw	s5,60(sp)
80009c38:	8fb40038 	lw	s4,56(sp)
80009c3c:	8fb30034 	lw	s3,52(sp)
80009c40:	8fb20030 	lw	s2,48(sp)
80009c44:	8fb1002c 	lw	s1,44(sp)
80009c48:	8fb00028 	lw	s0,40(sp)
80009c4c:	03e00008 	jr	ra
80009c50:	27bd0050 	addiu	sp,sp,80
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80009c54:	0c006d04 	jal	8001b410 <intr_disable>
80009c58:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
80009c5c:	8e560008 	lw	s6,8(s2)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80009c60:	0c006d00 	jal	8001b400 <intr_enable>
80009c64:	32d60001 	andi	s6,s6,0x1
sfs_lookup_once():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:21
static const struct inode_ops sfs_node_dirops;
static const struct inode_ops sfs_node_fileops;

static inline int trylock_sin(struct sfs_inode *sin)
{
	if (!SFSInodeRemoved(sin)) {
80009c68:	12c0ffd5 	beqz	s6,80009bc0 <sfs_lookup_parent+0x1c4>
80009c6c:	26560014 	addiu	s6,s2,20
sfs_lookup_parent():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1455
		if (strcmp(path, "..") == 0) {
			ret = sfs_load_parent(sfs, sin, &subnode);
		} else {
			if (strlen(path) > SFS_MAX_FNAME_LEN) {
				vop_ref_dec(node);
				return -E_TOO_BIG;
80009c70:	2402fffe 	li	v0,-2
80009c74:	08002706 	j	80009c18 <sfs_lookup_parent+0x21c>
80009c78:	afa20020 	sw	v0,32(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
80009c7c:	0c006d04 	jal	8001b410 <intr_disable>
80009c80:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
80009c84:	8e420008 	lw	v0,8(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
80009c88:	30420001 	andi	v0,v0,0x1
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80009c8c:	0c006d00 	jal	8001b400 <intr_enable>
80009c90:	afa20024 	sw	v0,36(sp)
80009c94:	080026f8 	j	80009be0 <sfs_lookup_parent+0x1e4>
80009c98:	8fa20024 	lw	v0,36(sp)
sfs_lookup_once():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:576
	ret = sfs_dirent_search_nolock(sfs, sin, name, &ino, slot, NULL);
	unlock_sin(sin);
	if (ret != 0) {
		return ret;
	}
	return sfs_load_inode(sfs, node_store, ino);
80009c9c:	02802021 	move	a0,s4
80009ca0:	0c002510 	jal	80009440 <sfs_load_inode>
80009ca4:	27a5001c 	addiu	a1,sp,28
80009ca8:	080026ce 	j	80009b38 <sfs_lookup_parent+0x13c>
80009cac:	afa20020 	sw	v0,32(sp)
sfs_lookup_parent():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1454
		struct inode *subnode;
		if (strcmp(path, "..") == 0) {
			ret = sfs_load_parent(sfs, sin, &subnode);
		} else {
			if (strlen(path) > SFS_MAX_FNAME_LEN) {
				vop_ref_dec(node);
80009cb0:	0c001172 	jal	800045c8 <inode_ref_dec>
80009cb4:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1455
				return -E_TOO_BIG;
80009cb8:	2402ffe5 	li	v0,-27
80009cbc:	08002708 	j	80009c20 <sfs_lookup_parent+0x224>
80009cc0:	afa20020 	sw	v0,32(sp)
sfs_lookup_once():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:26
	if (!SFSInodeRemoved(sin)) {
		down(&(sin->sem));
		if (!SFSInodeRemoved(sin)) {
			return 0;
		}
		up(&(sin->sem));
80009cc4:	0c00671d 	jal	80019c74 <up>
80009cc8:	02c02021 	move	a0,s6
sfs_lookup_parent():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1455
		if (strcmp(path, "..") == 0) {
			ret = sfs_load_parent(sfs, sin, &subnode);
		} else {
			if (strlen(path) > SFS_MAX_FNAME_LEN) {
				vop_ref_dec(node);
				return -E_TOO_BIG;
80009ccc:	2402fffe 	li	v0,-2
80009cd0:	08002706 	j	80009c18 <sfs_lookup_parent+0x21c>
80009cd4:	afa20020 	sw	v0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1431
{
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
	assert(*path != '\0' && *path != '/');
	vop_ref_inc(node);
	while (1) {
		struct sfs_inode *sin = vop_info(node, sfs_inode);
80009cd8:	3c048002 	lui	a0,0x8002
80009cdc:	3c068002 	lui	a2,0x8002
80009ce0:	3c078002 	lui	a3,0x8002
80009ce4:	24842028 	addiu	a0,a0,8232
80009ce8:	24050597 	li	a1,1431
80009cec:	24c60e28 	addiu	a2,a2,3624
80009cf0:	0c006b0b 	jal	8001ac2c <__panic>
80009cf4:	24e72034 	addiu	a3,a3,8244
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1428
static int
sfs_lookup_parent(struct inode *node, char *path, struct inode **node_store,
		  char **endp)
{
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
	assert(*path != '\0' && *path != '/');
80009cf8:	3c048002 	lui	a0,0x8002
80009cfc:	3c068002 	lui	a2,0x8002
80009d00:	3c078002 	lui	a3,0x8002
80009d04:	24842028 	addiu	a0,a0,8232
80009d08:	24050594 	li	a1,1428
80009d0c:	24c60e28 	addiu	a2,a2,3624
80009d10:	0c006b0b 	jal	8001ac2c <__panic>
80009d14:	24e723f8 	addiu	a3,a3,9208
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1427

static int
sfs_lookup_parent(struct inode *node, char *path, struct inode **node_store,
		  char **endp)
{
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
80009d18:	3c048002 	lui	a0,0x8002
80009d1c:	3c068002 	lui	a2,0x8002
80009d20:	3c078002 	lui	a3,0x8002
80009d24:	24842028 	addiu	a0,a0,8232
80009d28:	24050593 	li	a1,1427
80009d2c:	24c60e28 	addiu	a2,a2,3624
80009d30:	0c006b0b 	jal	8001ac2c <__panic>
80009d34:	24e71e84 	addiu	a3,a3,7812

80009d38 <sfs_lookup>:
sfs_lookup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1380
	}
	return path;
}

static int sfs_lookup(struct inode *node, char *path, struct inode **node_store)
{
80009d38:	27bdffb8 	addiu	sp,sp,-72
80009d3c:	afb3002c 	sw	s3,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1381
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
80009d40:	8c930044 	lw	s3,68(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1380
	}
	return path;
}

static int sfs_lookup(struct inode *node, char *path, struct inode **node_store)
{
80009d44:	afb7003c 	sw	s7,60(sp)
80009d48:	afb40030 	sw	s4,48(sp)
80009d4c:	afb20028 	sw	s2,40(sp)
80009d50:	afbf0044 	sw	ra,68(sp)
80009d54:	afbe0040 	sw	s8,64(sp)
80009d58:	afb60038 	sw	s6,56(sp)
80009d5c:	afb50034 	sw	s5,52(sp)
80009d60:	afb10024 	sw	s1,36(sp)
80009d64:	afb00020 	sw	s0,32(sp)
80009d68:	00809021 	move	s2,a0
80009d6c:	00a0b821 	move	s7,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1381
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
80009d70:	126000ab 	beqz	s3,8000a020 <sfs_lookup+0x2e8>
80009d74:	00c0a021 	move	s4,a2
80009d78:	8e630084 	lw	v1,132(s3)
80009d7c:	24025679 	li	v0,22137
80009d80:	546200a8 	bnel	v1,v0,8000a024 <sfs_lookup+0x2ec>
80009d84:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1382
	assert(*path != '\0' && *path != '/');
80009d88:	90a20000 	lbu	v0,0(a1)
80009d8c:	1040009c 	beqz	v0,8000a000 <sfs_lookup+0x2c8>
80009d90:	2403002f 	li	v1,47
80009d94:	5043009b 	beql	v0,v1,8000a004 <sfs_lookup+0x2cc>
80009d98:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1383
	vop_ref_inc(node);
80009d9c:	0c0010b6 	jal	800042d8 <inode_ref_inc>
80009da0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1385
	do {
		struct sfs_inode *sin = vop_info(node, sfs_inode);
80009da4:	8e430038 	lw	v1,56(s2)
80009da8:	24021237 	li	v0,4663
80009dac:	146200a5 	bne	v1,v0,8000a044 <sfs_lookup+0x30c>
80009db0:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1386
		if (sin->din->type != SFS_TYPE_DIR) {
80009db4:	8e420000 	lw	v0,0(s2)
80009db8:	94430008 	lhu	v1,8(v0)
80009dbc:	24020002 	li	v0,2
80009dc0:	14620030 	bne	v1,v0,80009e84 <sfs_lookup+0x14c>
80009dc4:	3c118002 	lui	s1,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1393
			return -E_NOTDIR;
		}

		char *subpath;
next:
		subpath = sfs_lookup_subpath(path);
80009dc8:	02e02021 	move	a0,s7
80009dcc:	0c001b69 	jal	80006da4 <sfs_lookup_subpath>
80009dd0:	26313e28 	addiu	s1,s1,15912
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1403
			break;
		}

		int ret;
		struct inode *subnode;
		if (strcmp(path, "..") == 0) {
80009dd4:	3c158002 	lui	s5,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1394
		}

		char *subpath;
next:
		subpath = sfs_lookup_subpath(path);
		if (strcmp(path, ".") == 0) {
80009dd8:	02e02021 	move	a0,s7
80009ddc:	02202821 	move	a1,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1403
			break;
		}

		int ret;
		struct inode *subnode;
		if (strcmp(path, "..") == 0) {
80009de0:	26b52330 	addiu	s5,s5,9008
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1394
		}

		char *subpath;
next:
		subpath = sfs_lookup_subpath(path);
		if (strcmp(path, ".") == 0) {
80009de4:	0c005bb8 	jal	80016ee0 <strcmp>
80009de8:	00408021 	move	s0,v0
80009dec:	1440000c 	bnez	v0,80009e20 <sfs_lookup+0xe8>
80009df0:	02e02021 	move	a0,s7
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1395
			if ((path = subpath) != NULL) {
80009df4:	52000028 	beqzl	s0,80009e98 <sfs_lookup+0x160>
80009df8:	ae920000 	sw	s2,0(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1393
			return -E_NOTDIR;
		}

		char *subpath;
next:
		subpath = sfs_lookup_subpath(path);
80009dfc:	0200b821 	move	s7,s0
80009e00:	0c001b69 	jal	80006da4 <sfs_lookup_subpath>
80009e04:	02e02021 	move	a0,s7
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1394
		if (strcmp(path, ".") == 0) {
80009e08:	02e02021 	move	a0,s7
80009e0c:	02202821 	move	a1,s1
80009e10:	0c005bb8 	jal	80016ee0 <strcmp>
80009e14:	00408021 	move	s0,v0
80009e18:	1040fff6 	beqz	v0,80009df4 <sfs_lookup+0xbc>
80009e1c:	02e02021 	move	a0,s7
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1403
			break;
		}

		int ret;
		struct inode *subnode;
		if (strcmp(path, "..") == 0) {
80009e20:	0c005bb8 	jal	80016ee0 <strcmp>
80009e24:	02a02821 	move	a1,s5
80009e28:	14400029 	bnez	v0,80009ed0 <sfs_lookup+0x198>
80009e2c:	02602021 	move	a0,s3
sfs_load_parent():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:559

static int
sfs_load_parent(struct sfs_fs *sfs, struct sfs_inode *sin,
		struct inode **parent_store)
{
	return sfs_load_inode(sfs, parent_store, sin->din->dirinfo.parent);
80009e30:	8e420000 	lw	v0,0(s2)
80009e34:	27a5001c 	addiu	a1,sp,28
80009e38:	0c002510 	jal	80009440 <sfs_load_inode>
80009e3c:	8c460004 	lw	a2,4(v0)
80009e40:	0040b821 	move	s7,v0
sfs_lookup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1413
				return -E_TOO_BIG;
			}
			ret = sfs_lookup_once(sfs, sin, path, &subnode, NULL);
		}

		vop_ref_dec(node);
80009e44:	0c001172 	jal	800045c8 <inode_ref_dec>
80009e48:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1414
		if (ret != 0) {
80009e4c:	16e00014 	bnez	s7,80009ea0 <sfs_lookup+0x168>
80009e50:	8fbf0044 	lw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1418
			return ret;
		}
		node = subnode, path = subpath;
	} while (path != NULL);
80009e54:	1200000f 	beqz	s0,80009e94 <sfs_lookup+0x15c>
80009e58:	8fb2001c 	lw	s2,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1385
{
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
	assert(*path != '\0' && *path != '/');
	vop_ref_inc(node);
	do {
		struct sfs_inode *sin = vop_info(node, sfs_inode);
80009e5c:	12400078 	beqz	s2,8000a040 <sfs_lookup+0x308>
80009e60:	24021237 	li	v0,4663
80009e64:	8e430038 	lw	v1,56(s2)
80009e68:	14620076 	bne	v1,v0,8000a044 <sfs_lookup+0x30c>
80009e6c:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1386
		if (sin->din->type != SFS_TYPE_DIR) {
80009e70:	8e420000 	lw	v0,0(s2)
80009e74:	94430008 	lhu	v1,8(v0)
80009e78:	24020002 	li	v0,2
80009e7c:	5062ffe0 	beql	v1,v0,80009e00 <sfs_lookup+0xc8>
80009e80:	0200b821 	move	s7,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1387
			vop_ref_dec(node);
80009e84:	0c001172 	jal	800045c8 <inode_ref_dec>
80009e88:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1388
			return -E_NOTDIR;
80009e8c:	080027a7 	j	80009e9c <sfs_lookup+0x164>
80009e90:	2417ffec 	li	s7,-20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1419
		if (ret != 0) {
			return ret;
		}
		node = subnode, path = subpath;
	} while (path != NULL);
	*node_store = node;
80009e94:	ae920000 	sw	s2,0(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1420
	return 0;
80009e98:	0000b821 	move	s7,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1421
}
80009e9c:	8fbf0044 	lw	ra,68(sp)
80009ea0:	02e01021 	move	v0,s7
80009ea4:	8fbe0040 	lw	s8,64(sp)
80009ea8:	8fb7003c 	lw	s7,60(sp)
80009eac:	8fb60038 	lw	s6,56(sp)
80009eb0:	8fb50034 	lw	s5,52(sp)
80009eb4:	8fb40030 	lw	s4,48(sp)
80009eb8:	8fb3002c 	lw	s3,44(sp)
80009ebc:	8fb20028 	lw	s2,40(sp)
80009ec0:	8fb10024 	lw	s1,36(sp)
80009ec4:	8fb00020 	lw	s0,32(sp)
80009ec8:	03e00008 	jr	ra
80009ecc:	27bd0048 	addiu	sp,sp,72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1406
		int ret;
		struct inode *subnode;
		if (strcmp(path, "..") == 0) {
			ret = sfs_load_parent(sfs, sin, &subnode);
		} else {
			if (strlen(path) > SFS_MAX_FNAME_LEN) {
80009ed0:	0c005b79 	jal	80016de4 <strlen>
80009ed4:	02e02021 	move	a0,s7
80009ed8:	2c420100 	sltiu	v0,v0,256
80009edc:	10400044 	beqz	v0,80009ff0 <sfs_lookup+0x2b8>
80009ee0:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80009ee4:	40026000 	mfc0	v0,c0_status
80009ee8:	30420001 	andi	v0,v0,0x1
80009eec:	14400029 	bnez	v0,80009f94 <sfs_lookup+0x25c>
80009ef0:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
80009ef4:	8e560008 	lw	s6,8(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
80009ef8:	32d60001 	andi	s6,s6,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:21
static const struct inode_ops sfs_node_dirops;
static const struct inode_ops sfs_node_fileops;

static inline int trylock_sin(struct sfs_inode *sin)
{
	if (!SFSInodeRemoved(sin)) {
80009efc:	16c00035 	bnez	s6,80009fd4 <sfs_lookup+0x29c>
80009f00:	26560014 	addiu	s6,s2,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:22
		down(&(sin->sem));
80009f04:	0c00671f 	jal	80019c7c <down>
80009f08:	02c02021 	move	a0,s6
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
80009f0c:	40026000 	mfc0	v0,c0_status
80009f10:	30420001 	andi	v0,v0,0x1
80009f14:	14400026 	bnez	v0,80009fb0 <sfs_lookup+0x278>
80009f18:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
80009f1c:	8e5e0008 	lw	s8,8(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
80009f20:	33de0001 	andi	s8,s8,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:23
		if (!SFSInodeRemoved(sin)) {
80009f24:	17c00029 	bnez	s8,80009fcc <sfs_lookup+0x294>
80009f28:	02602021 	move	a0,s3
sfs_lookup_once():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:571
	int ret;
	if ((ret = trylock_sin(sin)) != 0) {
		return ret;
	}
	uint32_t ino;
	ret = sfs_dirent_search_nolock(sfs, sin, name, &ino, slot, NULL);
80009f2c:	02e03021 	move	a2,s7
80009f30:	02402821 	move	a1,s2
80009f34:	27a70018 	addiu	a3,sp,24
80009f38:	afa00010 	sw	zero,16(sp)
80009f3c:	0c001e85 	jal	80007a14 <sfs_dirent_search_nolock>
80009f40:	afa00014 	sw	zero,20(sp)
80009f44:	0040b821 	move	s7,v0
unlock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:33
	return -E_NOENT;
}

static inline void unlock_sin(struct sfs_inode *sin)
{
	up(&(sin->sem));
80009f48:	0c00671d 	jal	80019c74 <up>
80009f4c:	02c02021 	move	a0,s6
sfs_lookup_once():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:573
		return ret;
	}
	uint32_t ino;
	ret = sfs_dirent_search_nolock(sfs, sin, name, &ino, slot, NULL);
	unlock_sin(sin);
	if (ret != 0) {
80009f50:	12e00022 	beqz	s7,80009fdc <sfs_lookup+0x2a4>
80009f54:	8fa60018 	lw	a2,24(sp)
sfs_lookup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1413
				return -E_TOO_BIG;
			}
			ret = sfs_lookup_once(sfs, sin, path, &subnode, NULL);
		}

		vop_ref_dec(node);
80009f58:	0c001172 	jal	800045c8 <inode_ref_dec>
80009f5c:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1421
		}
		node = subnode, path = subpath;
	} while (path != NULL);
	*node_store = node;
	return 0;
}
80009f60:	8fbf0044 	lw	ra,68(sp)
80009f64:	02e01021 	move	v0,s7
80009f68:	8fbe0040 	lw	s8,64(sp)
80009f6c:	8fb7003c 	lw	s7,60(sp)
80009f70:	8fb60038 	lw	s6,56(sp)
80009f74:	8fb50034 	lw	s5,52(sp)
80009f78:	8fb40030 	lw	s4,48(sp)
80009f7c:	8fb3002c 	lw	s3,44(sp)
80009f80:	8fb20028 	lw	s2,40(sp)
80009f84:	8fb10024 	lw	s1,36(sp)
80009f88:	8fb00020 	lw	s0,32(sp)
80009f8c:	03e00008 	jr	ra
80009f90:	27bd0048 	addiu	sp,sp,72
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80009f94:	0c006d04 	jal	8001b410 <intr_disable>
80009f98:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
80009f9c:	8e560008 	lw	s6,8(s2)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80009fa0:	0c006d00 	jal	8001b400 <intr_enable>
80009fa4:	32d60001 	andi	s6,s6,0x1
80009fa8:	080027bf 	j	80009efc <sfs_lookup+0x1c4>
80009fac:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
80009fb0:	0c006d04 	jal	8001b410 <intr_disable>
80009fb4:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
80009fb8:	8e5e0008 	lw	s8,8(s2)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80009fbc:	0c006d00 	jal	8001b400 <intr_enable>
80009fc0:	33de0001 	andi	s8,s8,0x1
80009fc4:	080027c9 	j	80009f24 <sfs_lookup+0x1ec>
80009fc8:	00000000 	nop
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:26
	if (!SFSInodeRemoved(sin)) {
		down(&(sin->sem));
		if (!SFSInodeRemoved(sin)) {
			return 0;
		}
		up(&(sin->sem));
80009fcc:	0c00671d 	jal	80019c74 <up>
80009fd0:	02c02021 	move	a0,s6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1420
			return ret;
		}
		node = subnode, path = subpath;
	} while (path != NULL);
	*node_store = node;
	return 0;
80009fd4:	080027d6 	j	80009f58 <sfs_lookup+0x220>
80009fd8:	2417fffe 	li	s7,-2
sfs_lookup_once():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:576
	ret = sfs_dirent_search_nolock(sfs, sin, name, &ino, slot, NULL);
	unlock_sin(sin);
	if (ret != 0) {
		return ret;
	}
	return sfs_load_inode(sfs, node_store, ino);
80009fdc:	02602021 	move	a0,s3
80009fe0:	0c002510 	jal	80009440 <sfs_load_inode>
80009fe4:	27a5001c 	addiu	a1,sp,28
80009fe8:	08002791 	j	80009e44 <sfs_lookup+0x10c>
80009fec:	0040b821 	move	s7,v0
sfs_lookup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1407
		struct inode *subnode;
		if (strcmp(path, "..") == 0) {
			ret = sfs_load_parent(sfs, sin, &subnode);
		} else {
			if (strlen(path) > SFS_MAX_FNAME_LEN) {
				vop_ref_dec(node);
80009ff0:	0c001172 	jal	800045c8 <inode_ref_dec>
80009ff4:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1408
				return -E_TOO_BIG;
80009ff8:	080027a7 	j	80009e9c <sfs_lookup+0x164>
80009ffc:	2417ffe5 	li	s7,-27
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1382
}

static int sfs_lookup(struct inode *node, char *path, struct inode **node_store)
{
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
	assert(*path != '\0' && *path != '/');
8000a000:	3c048002 	lui	a0,0x8002
8000a004:	3c068002 	lui	a2,0x8002
8000a008:	3c078002 	lui	a3,0x8002
8000a00c:	24842028 	addiu	a0,a0,8232
8000a010:	24050566 	li	a1,1382
8000a014:	24c60e28 	addiu	a2,a2,3624
8000a018:	0c006b0b 	jal	8001ac2c <__panic>
8000a01c:	24e723f8 	addiu	a3,a3,9208
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1381
	return path;
}

static int sfs_lookup(struct inode *node, char *path, struct inode **node_store)
{
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
8000a020:	3c048002 	lui	a0,0x8002
8000a024:	3c068002 	lui	a2,0x8002
8000a028:	3c078002 	lui	a3,0x8002
8000a02c:	24842028 	addiu	a0,a0,8232
8000a030:	24050565 	li	a1,1381
8000a034:	24c60e28 	addiu	a2,a2,3624
8000a038:	0c006b0b 	jal	8001ac2c <__panic>
8000a03c:	24e71e84 	addiu	a3,a3,7812
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1385
	assert(*path != '\0' && *path != '/');
	vop_ref_inc(node);
	do {
		struct sfs_inode *sin = vop_info(node, sfs_inode);
8000a040:	3c048002 	lui	a0,0x8002
8000a044:	3c068002 	lui	a2,0x8002
8000a048:	3c078002 	lui	a3,0x8002
8000a04c:	24842028 	addiu	a0,a0,8232
8000a050:	24050569 	li	a1,1385
8000a054:	24c60e28 	addiu	a2,a2,3624
8000a058:	0c006b0b 	jal	8001ac2c <__panic>
8000a05c:	24e72034 	addiu	a3,a3,8244

8000a060 <sfs_unlink>:
sfs_unlink():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1345
	vop_ref_dec(link_node);
	return ret;
}

static int sfs_unlink(struct inode *node, const char *name)
{
8000a060:	27bdffb8 	addiu	sp,sp,-72
8000a064:	afb0002c 	sw	s0,44(sp)
8000a068:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1346
	if (strlen(name) > SFS_MAX_FNAME_LEN) {
8000a06c:	00a02021 	move	a0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1345
	vop_ref_dec(link_node);
	return ret;
}

static int sfs_unlink(struct inode *node, const char *name)
{
8000a070:	afb30038 	sw	s3,56(sp)
8000a074:	afbf0044 	sw	ra,68(sp)
8000a078:	afb50040 	sw	s5,64(sp)
8000a07c:	afb4003c 	sw	s4,60(sp)
8000a080:	afb20034 	sw	s2,52(sp)
8000a084:	afb10030 	sw	s1,48(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1346
	if (strlen(name) > SFS_MAX_FNAME_LEN) {
8000a088:	0c005b79 	jal	80016de4 <strlen>
8000a08c:	00a09821 	move	s3,a1
8000a090:	2c420100 	sltiu	v0,v0,256
8000a094:	10400058 	beqz	v0,8000a1f8 <sfs_unlink+0x198>
8000a098:	3c058002 	lui	a1,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1349
		return -E_TOO_BIG;
	}
	if (strcmp(name, ".") == 0 || strcmp(name, "..") == 0) {
8000a09c:	02602021 	move	a0,s3
8000a0a0:	0c005bb8 	jal	80016ee0 <strcmp>
8000a0a4:	24a53e28 	addiu	a1,a1,15912
8000a0a8:	10400048 	beqz	v0,8000a1cc <sfs_unlink+0x16c>
8000a0ac:	3c058002 	lui	a1,0x8002
8000a0b0:	02602021 	move	a0,s3
8000a0b4:	0c005bb8 	jal	80016ee0 <strcmp>
8000a0b8:	24a52330 	addiu	a1,a1,9008
8000a0bc:	10400044 	beqz	v0,8000a1d0 <sfs_unlink+0x170>
8000a0c0:	8fbf0044 	lw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1352
		return -E_ISDIR;
	}
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
8000a0c4:	8e110044 	lw	s1,68(s0)
8000a0c8:	122000ba 	beqz	s1,8000a3b4 <sfs_unlink+0x354>
8000a0cc:	24025679 	li	v0,22137
8000a0d0:	8e230084 	lw	v1,132(s1)
8000a0d4:	146200b7 	bne	v1,v0,8000a3b4 <sfs_unlink+0x354>
8000a0d8:	24021237 	li	v0,4663
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1353
	struct sfs_inode *sin = vop_info(node, sfs_inode);
8000a0dc:	8e030038 	lw	v1,56(s0)
8000a0e0:	146200ad 	bne	v1,v0,8000a398 <sfs_unlink+0x338>
8000a0e4:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1355
	int ret;
	lock_sfs_mutex(sfs);
8000a0e8:	0c002c4f 	jal	8000b13c <lock_sfs_mutex>
8000a0ec:	02202021 	move	a0,s1
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8000a0f0:	40026000 	mfc0	v0,c0_status
8000a0f4:	30420001 	andi	v0,v0,0x1
8000a0f8:	14400026 	bnez	v0,8000a194 <sfs_unlink+0x134>
8000a0fc:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
8000a100:	8e120008 	lw	s2,8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8000a104:	32520001 	andi	s2,s2,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:21
static const struct inode_ops sfs_node_dirops;
static const struct inode_ops sfs_node_fileops;

static inline int trylock_sin(struct sfs_inode *sin)
{
	if (!SFSInodeRemoved(sin)) {
8000a108:	16400059 	bnez	s2,8000a270 <sfs_unlink+0x210>
8000a10c:	26120014 	addiu	s2,s0,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:22
		down(&(sin->sem));
8000a110:	0c00671f 	jal	80019c7c <down>
8000a114:	02402021 	move	a0,s2
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8000a118:	40026000 	mfc0	v0,c0_status
8000a11c:	30420001 	andi	v0,v0,0x1
8000a120:	14400023 	bnez	v0,8000a1b0 <sfs_unlink+0x150>
8000a124:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8000a128:	8e140008 	lw	s4,8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8000a12c:	32940001 	andi	s4,s4,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:23
		if (!SFSInodeRemoved(sin)) {
8000a130:	1680004d 	bnez	s4,8000a268 <sfs_unlink+0x208>
8000a134:	27a20020 	addiu	v0,sp,32
sfs_unlink_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1308
static int
sfs_unlink_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, const char *name)
{
	int ret, slot;
	uint32_t ino;
	if ((ret =
8000a138:	02202021 	move	a0,s1
8000a13c:	02002821 	move	a1,s0
8000a140:	02603021 	move	a2,s3
8000a144:	27a7001c 	addiu	a3,sp,28
8000a148:	afa20010 	sw	v0,16(sp)
8000a14c:	0c001e85 	jal	80007a14 <sfs_dirent_search_nolock>
8000a150:	afa00014 	sw	zero,20(sp)
8000a154:	1040002a 	beqz	v0,8000a200 <sfs_unlink+0x1a0>
8000a158:	0040a821 	move	s5,v0
unlock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:33
	return -E_NOENT;
}

static inline void unlock_sin(struct sfs_inode *sin)
{
	up(&(sin->sem));
8000a15c:	0c00671d 	jal	80019c74 <up>
8000a160:	02402021 	move	a0,s2
sfs_unlink():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1362
		if ((ret = trylock_sin(sin)) == 0) {
			ret = sfs_unlink_nolock(sfs, sin, name);
			unlock_sin(sin);
		}
	}
	unlock_sfs_mutex(sfs);
8000a164:	0c002c55 	jal	8000b154 <unlock_sfs_mutex>
8000a168:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1364
	return ret;
}
8000a16c:	8fbf0044 	lw	ra,68(sp)
8000a170:	02a01021 	move	v0,s5
8000a174:	8fb4003c 	lw	s4,60(sp)
8000a178:	8fb50040 	lw	s5,64(sp)
8000a17c:	8fb30038 	lw	s3,56(sp)
8000a180:	8fb20034 	lw	s2,52(sp)
8000a184:	8fb10030 	lw	s1,48(sp)
8000a188:	8fb0002c 	lw	s0,44(sp)
8000a18c:	03e00008 	jr	ra
8000a190:	27bd0048 	addiu	sp,sp,72
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8000a194:	0c006d04 	jal	8001b410 <intr_disable>
8000a198:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8000a19c:	8e120008 	lw	s2,8(s0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000a1a0:	0c006d00 	jal	8001b400 <intr_enable>
8000a1a4:	32520001 	andi	s2,s2,0x1
8000a1a8:	08002842 	j	8000a108 <sfs_unlink+0xa8>
8000a1ac:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8000a1b0:	0c006d04 	jal	8001b410 <intr_disable>
8000a1b4:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
8000a1b8:	8e140008 	lw	s4,8(s0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000a1bc:	0c006d00 	jal	8001b400 <intr_enable>
8000a1c0:	32940001 	andi	s4,s4,0x1
8000a1c4:	0800284c 	j	8000a130 <sfs_unlink+0xd0>
8000a1c8:	00000000 	nop
sfs_unlink():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1364
8000a1cc:	8fbf0044 	lw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1350
{
	if (strlen(name) > SFS_MAX_FNAME_LEN) {
		return -E_TOO_BIG;
	}
	if (strcmp(name, ".") == 0 || strcmp(name, "..") == 0) {
		return -E_ISDIR;
8000a1d0:	2415ffeb 	li	s5,-21
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1364
			unlock_sin(sin);
		}
	}
	unlock_sfs_mutex(sfs);
	return ret;
}
8000a1d4:	02a01021 	move	v0,s5
8000a1d8:	8fb4003c 	lw	s4,60(sp)
8000a1dc:	8fb50040 	lw	s5,64(sp)
8000a1e0:	8fb30038 	lw	s3,56(sp)
8000a1e4:	8fb20034 	lw	s2,52(sp)
8000a1e8:	8fb10030 	lw	s1,48(sp)
8000a1ec:	8fb0002c 	lw	s0,44(sp)
8000a1f0:	03e00008 	jr	ra
8000a1f4:	27bd0048 	addiu	sp,sp,72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1347
}

static int sfs_unlink(struct inode *node, const char *name)
{
	if (strlen(name) > SFS_MAX_FNAME_LEN) {
		return -E_TOO_BIG;
8000a1f8:	0800285b 	j	8000a16c <sfs_unlink+0x10c>
8000a1fc:	2415ffe5 	li	s5,-27
sfs_unlink_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1314
	     sfs_dirent_search_nolock(sfs, sin, name, &ino, &slot,
				      NULL)) != 0) {
		return ret;
	}
	struct inode *link_node;
	if ((ret = sfs_load_inode(sfs, &link_node, ino)) != 0) {
8000a200:	8fa6001c 	lw	a2,28(sp)
8000a204:	02202021 	move	a0,s1
8000a208:	0c002510 	jal	80009440 <sfs_load_inode>
8000a20c:	27a50018 	addiu	a1,sp,24
8000a210:	1440ffd2 	bnez	v0,8000a15c <sfs_unlink+0xfc>
8000a214:	0040a821 	move	s5,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1317
		return ret;
	}
	struct sfs_inode *lnksin = vop_info(link_node, sfs_inode);
8000a218:	8fb30018 	lw	s3,24(sp)
8000a21c:	12600076 	beqz	s3,8000a3f8 <sfs_unlink+0x398>
8000a220:	24021237 	li	v0,4663
8000a224:	8e630038 	lw	v1,56(s3)
8000a228:	14620074 	bne	v1,v0,8000a3fc <sfs_unlink+0x39c>
8000a22c:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1318
	if (lnksin->din->type != SFS_TYPE_DIR) {
8000a230:	8e620000 	lw	v0,0(s3)
8000a234:	94430008 	lhu	v1,8(v0)
8000a238:	24020002 	li	v0,2
8000a23c:	1062000e 	beq	v1,v0,8000a278 <sfs_unlink+0x218>
8000a240:	8fa60020 	lw	a2,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1319
		ret = sfs_dirent_unlink_nolock(sfs, sin, slot, lnksin);
8000a244:	02202021 	move	a0,s1
8000a248:	02002821 	move	a1,s0
8000a24c:	0c0020fd 	jal	800083f4 <sfs_dirent_unlink_nolock>
8000a250:	02603821 	move	a3,s3
8000a254:	0040a821 	move	s5,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1340
				sfs_nlinks_dec_nolock(sin);
			}
			unlock_sin(lnksin);
		}
	}
	vop_ref_dec(link_node);
8000a258:	0c001172 	jal	800045c8 <inode_ref_dec>
8000a25c:	8fa40018 	lw	a0,24(sp)
8000a260:	08002857 	j	8000a15c <sfs_unlink+0xfc>
8000a264:	00000000 	nop
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:26
	if (!SFSInodeRemoved(sin)) {
		down(&(sin->sem));
		if (!SFSInodeRemoved(sin)) {
			return 0;
		}
		up(&(sin->sem));
8000a268:	0c00671d 	jal	80019c74 <up>
8000a26c:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1323
	if (lnksin->din->type != SFS_TYPE_DIR) {
		ret = sfs_dirent_unlink_nolock(sfs, sin, slot, lnksin);
	} else {
		if ((ret = trylock_sin(lnksin)) == 0) {
			if (lnksin->din->dirinfo.slots != 0) {
				ret = -E_NOTEMPTY;
8000a270:	08002859 	j	8000a164 <sfs_unlink+0x104>
8000a274:	2415fffe 	li	s5,-2
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8000a278:	40026000 	mfc0	v0,c0_status
8000a27c:	30420001 	andi	v0,v0,0x1
8000a280:	14400017 	bnez	v0,8000a2e0 <sfs_unlink+0x280>
8000a284:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
8000a288:	8e740008 	lw	s4,8(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8000a28c:	32940001 	andi	s4,s4,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:21
static const struct inode_ops sfs_node_dirops;
static const struct inode_ops sfs_node_fileops;

static inline int trylock_sin(struct sfs_inode *sin)
{
	if (!SFSInodeRemoved(sin)) {
8000a290:	1680003f 	bnez	s4,8000a390 <sfs_unlink+0x330>
8000a294:	26740014 	addiu	s4,s3,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:22
		down(&(sin->sem));
8000a298:	0c00671f 	jal	80019c7c <down>
8000a29c:	02802021 	move	a0,s4
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8000a2a0:	40026000 	mfc0	v0,c0_status
8000a2a4:	30420001 	andi	v0,v0,0x1
8000a2a8:	14400014 	bnez	v0,8000a2fc <sfs_unlink+0x29c>
8000a2ac:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8000a2b0:	8e750008 	lw	s5,8(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8000a2b4:	32b50001 	andi	s5,s5,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:23
		if (!SFSInodeRemoved(sin)) {
8000a2b8:	16a00033 	bnez	s5,8000a388 <sfs_unlink+0x328>
8000a2bc:	00000000 	nop
sfs_unlink_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1322
	struct sfs_inode *lnksin = vop_info(link_node, sfs_inode);
	if (lnksin->din->type != SFS_TYPE_DIR) {
		ret = sfs_dirent_unlink_nolock(sfs, sin, slot, lnksin);
	} else {
		if ((ret = trylock_sin(lnksin)) == 0) {
			if (lnksin->din->dirinfo.slots != 0) {
8000a2c0:	8e620000 	lw	v0,0(s3)
8000a2c4:	8c420000 	lw	v0,0(v0)
8000a2c8:	10400013 	beqz	v0,8000a318 <sfs_unlink+0x2b8>
8000a2cc:	2415ffeb 	li	s5,-21
unlock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:33
	return -E_NOENT;
}

static inline void unlock_sin(struct sfs_inode *sin)
{
	up(&(sin->sem));
8000a2d0:	0c00671d 	jal	80019c74 <up>
8000a2d4:	02802021 	move	a0,s4
8000a2d8:	08002896 	j	8000a258 <sfs_unlink+0x1f8>
8000a2dc:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8000a2e0:	0c006d04 	jal	8001b410 <intr_disable>
8000a2e4:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8000a2e8:	8e740008 	lw	s4,8(s3)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000a2ec:	0c006d00 	jal	8001b400 <intr_enable>
8000a2f0:	32940001 	andi	s4,s4,0x1
8000a2f4:	080028a4 	j	8000a290 <sfs_unlink+0x230>
8000a2f8:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8000a2fc:	0c006d04 	jal	8001b410 <intr_disable>
8000a300:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
8000a304:	8e750008 	lw	s5,8(s3)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000a308:	0c006d00 	jal	8001b400 <intr_enable>
8000a30c:	32b50001 	andi	s5,s5,0x1
8000a310:	080028ae 	j	8000a2b8 <sfs_unlink+0x258>
8000a314:	00000000 	nop
sfs_unlink_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1325
	} else {
		if ((ret = trylock_sin(lnksin)) == 0) {
			if (lnksin->din->dirinfo.slots != 0) {
				ret = -E_NOTEMPTY;
			} else
			    if ((ret =
8000a318:	8fa60020 	lw	a2,32(sp)
8000a31c:	02202021 	move	a0,s1
8000a320:	02002821 	move	a1,s0
8000a324:	0c0020fd 	jal	800083f4 <sfs_dirent_unlink_nolock>
8000a328:	02603821 	move	a3,s3
8000a32c:	1440ffe8 	bnez	v0,8000a2d0 <sfs_unlink+0x270>
8000a330:	0040a821 	move	s5,v0
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8000a334:	40026000 	mfc0	v0,c0_status
8000a338:	30420001 	andi	v0,v0,0x1
8000a33c:	14400025 	bnez	v0,8000a3d4 <sfs_unlink+0x374>
8000a340:	00000000 	nop
set_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:185
 * */
static __always_inline void set_bit(int nr, volatile uint32_t * addr)
{
	int intr_flag;
	local_intr_save(intr_flag);
	*addr |= (1 << nr);
8000a344:	8e620008 	lw	v0,8(s3)
8000a348:	34420001 	ori	v0,v0,0x1
8000a34c:	ae620008 	sw	v0,8(s3)
sfs_nlinks_dec_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:746
	sin->dirty = 1, ++sin->din->nlinks;
}

static inline void sfs_nlinks_dec_nolock(struct sfs_inode *sin)
{
	assert(sin->din->nlinks != 0);
8000a350:	8e640000 	lw	a0,0(s3)
8000a354:	9485000a 	lhu	a1,10(a0)
8000a358:	10a0002b 	beqz	a1,8000a408 <sfs_unlink+0x3a8>
8000a35c:	24030001 	li	v1,1
8000a360:	8e020000 	lw	v0,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:747
	sin->dirty = 1, --sin->din->nlinks;
8000a364:	24a5ffff 	addiu	a1,a1,-1
8000a368:	ae63000c 	sw	v1,12(s3)
8000a36c:	a485000a 	sh	a1,10(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:746
	sin->dirty = 1, ++sin->din->nlinks;
}

static inline void sfs_nlinks_dec_nolock(struct sfs_inode *sin)
{
	assert(sin->din->nlinks != 0);
8000a370:	9444000a 	lhu	a0,10(v0)
8000a374:	10800024 	beqz	a0,8000a408 <sfs_unlink+0x3a8>
8000a378:	2484ffff 	addiu	a0,a0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:747
	sin->dirty = 1, --sin->din->nlinks;
8000a37c:	ae03000c 	sw	v1,12(s0)
8000a380:	080028b4 	j	8000a2d0 <sfs_unlink+0x270>
8000a384:	a444000a 	sh	a0,10(v0)
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:26
	if (!SFSInodeRemoved(sin)) {
		down(&(sin->sem));
		if (!SFSInodeRemoved(sin)) {
			return 0;
		}
		up(&(sin->sem));
8000a388:	0c00671d 	jal	80019c74 <up>
8000a38c:	02802021 	move	a0,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1323
	if (lnksin->din->type != SFS_TYPE_DIR) {
		ret = sfs_dirent_unlink_nolock(sfs, sin, slot, lnksin);
	} else {
		if ((ret = trylock_sin(lnksin)) == 0) {
			if (lnksin->din->dirinfo.slots != 0) {
				ret = -E_NOTEMPTY;
8000a390:	08002896 	j	8000a258 <sfs_unlink+0x1f8>
8000a394:	2415fffe 	li	s5,-2
sfs_unlink():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1353
	}
	if (strcmp(name, ".") == 0 || strcmp(name, "..") == 0) {
		return -E_ISDIR;
	}
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
	struct sfs_inode *sin = vop_info(node, sfs_inode);
8000a398:	24842028 	addiu	a0,a0,8232
8000a39c:	24050549 	li	a1,1353
sfs_unlink_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1317
	}
	struct inode *link_node;
	if ((ret = sfs_load_inode(sfs, &link_node, ino)) != 0) {
		return ret;
	}
	struct sfs_inode *lnksin = vop_info(link_node, sfs_inode);
8000a3a0:	3c068002 	lui	a2,0x8002
8000a3a4:	3c078002 	lui	a3,0x8002
8000a3a8:	24c60e28 	addiu	a2,a2,3624
8000a3ac:	0c006b0b 	jal	8001ac2c <__panic>
8000a3b0:	24e72034 	addiu	a3,a3,8244
sfs_unlink():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1352
		return -E_TOO_BIG;
	}
	if (strcmp(name, ".") == 0 || strcmp(name, "..") == 0) {
		return -E_ISDIR;
	}
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
8000a3b4:	3c048002 	lui	a0,0x8002
8000a3b8:	3c068002 	lui	a2,0x8002
8000a3bc:	3c078002 	lui	a3,0x8002
8000a3c0:	24842028 	addiu	a0,a0,8232
8000a3c4:	24050548 	li	a1,1352
8000a3c8:	24c60e28 	addiu	a2,a2,3624
8000a3cc:	0c006b0b 	jal	8001ac2c <__panic>
8000a3d0:	24e71e84 	addiu	a3,a3,7812
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8000a3d4:	0c006d04 	jal	8001b410 <intr_disable>
8000a3d8:	00000000 	nop
set_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:185
8000a3dc:	8e620008 	lw	v0,8(s3)
8000a3e0:	34420001 	ori	v0,v0,0x1
8000a3e4:	ae620008 	sw	v0,8(s3)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000a3e8:	0c006d00 	jal	8001b400 <intr_enable>
8000a3ec:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:746
	sin->dirty = 1, ++sin->din->nlinks;
}

static inline void sfs_nlinks_dec_nolock(struct sfs_inode *sin)
{
	assert(sin->din->nlinks != 0);
8000a3f0:	080028d5 	j	8000a354 <sfs_unlink+0x2f4>
8000a3f4:	8e640000 	lw	a0,0(s3)
sfs_unlink_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1317
	}
	struct inode *link_node;
	if ((ret = sfs_load_inode(sfs, &link_node, ino)) != 0) {
		return ret;
	}
	struct sfs_inode *lnksin = vop_info(link_node, sfs_inode);
8000a3f8:	3c048002 	lui	a0,0x8002
8000a3fc:	24842028 	addiu	a0,a0,8232
8000a400:	080028e8 	j	8000a3a0 <sfs_unlink+0x340>
8000a404:	24050525 	li	a1,1317
sfs_nlinks_dec_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:746
	sin->dirty = 1, ++sin->din->nlinks;
}

static inline void sfs_nlinks_dec_nolock(struct sfs_inode *sin)
{
	assert(sin->din->nlinks != 0);
8000a408:	3c048002 	lui	a0,0x8002
8000a40c:	3c068002 	lui	a2,0x8002
8000a410:	3c078002 	lui	a3,0x8002
8000a414:	24842028 	addiu	a0,a0,8232
8000a418:	240502ea 	li	a1,746
8000a41c:	24c60e28 	addiu	a2,a2,3624
8000a420:	0c006b0b 	jal	8001ac2c <__panic>
8000a424:	24e72418 	addiu	a3,a3,9240

8000a428 <sfs_create>:
sfs_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1286
}

static int
sfs_create(struct inode *node, const char *name, bool excl,
	   struct inode **node_store)
{
8000a428:	27bdffb8 	addiu	sp,sp,-72
8000a42c:	afb00028 	sw	s0,40(sp)
8000a430:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1287
	if (strlen(name) > SFS_MAX_FNAME_LEN) {
8000a434:	00a02021 	move	a0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1286
}

static int
sfs_create(struct inode *node, const char *name, bool excl,
	   struct inode **node_store)
{
8000a438:	afb5003c 	sw	s5,60(sp)
8000a43c:	afb40038 	sw	s4,56(sp)
8000a440:	afb1002c 	sw	s1,44(sp)
8000a444:	afbf0044 	sw	ra,68(sp)
8000a448:	afb60040 	sw	s6,64(sp)
8000a44c:	afb30034 	sw	s3,52(sp)
8000a450:	afb20030 	sw	s2,48(sp)
8000a454:	00a08821 	move	s1,a1
8000a458:	00c0a021 	move	s4,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1287
	if (strlen(name) > SFS_MAX_FNAME_LEN) {
8000a45c:	0c005b79 	jal	80016de4 <strlen>
8000a460:	00e0a821 	move	s5,a3
8000a464:	2c420100 	sltiu	v0,v0,256
8000a468:	1040006e 	beqz	v0,8000a624 <sfs_create+0x1fc>
8000a46c:	3c058002 	lui	a1,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1290
		return -E_TOO_BIG;
	}
	if (strcmp(name, ".") == 0 || strcmp(name, "..") == 0) {
8000a470:	02202021 	move	a0,s1
8000a474:	0c005bb8 	jal	80016ee0 <strcmp>
8000a478:	24a53e28 	addiu	a1,a1,15912
8000a47c:	1040005d 	beqz	v0,8000a5f4 <sfs_create+0x1cc>
8000a480:	3c058002 	lui	a1,0x8002
8000a484:	02202021 	move	a0,s1
8000a488:	0c005bb8 	jal	80016ee0 <strcmp>
8000a48c:	24a52330 	addiu	a1,a1,9008
8000a490:	10400059 	beqz	v0,8000a5f8 <sfs_create+0x1d0>
8000a494:	8fbf0044 	lw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1293
		return -E_EXISTS;
	}
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
8000a498:	8e120044 	lw	s2,68(s0)
8000a49c:	12400085 	beqz	s2,8000a6b4 <sfs_create+0x28c>
8000a4a0:	24025679 	li	v0,22137
8000a4a4:	8e430084 	lw	v1,132(s2)
8000a4a8:	14620082 	bne	v1,v0,8000a6b4 <sfs_create+0x28c>
8000a4ac:	24021237 	li	v0,4663
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1294
	struct sfs_inode *sin = vop_info(node, sfs_inode);
8000a4b0:	8e030038 	lw	v1,56(s0)
8000a4b4:	14620087 	bne	v1,v0,8000a6d4 <sfs_create+0x2ac>
8000a4b8:	3c048002 	lui	a0,0x8002
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8000a4bc:	40026000 	mfc0	v0,c0_status
8000a4c0:	30420001 	andi	v0,v0,0x1
8000a4c4:	1440003d 	bnez	v0,8000a5bc <sfs_create+0x194>
8000a4c8:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8000a4cc:	8e130008 	lw	s3,8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8000a4d0:	32730001 	andi	s3,s3,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:21
static const struct inode_ops sfs_node_dirops;
static const struct inode_ops sfs_node_fileops;

static inline int trylock_sin(struct sfs_inode *sin)
{
	if (!SFSInodeRemoved(sin)) {
8000a4d4:	16600055 	bnez	s3,8000a62c <sfs_create+0x204>
8000a4d8:	26130014 	addiu	s3,s0,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:22
		down(&(sin->sem));
8000a4dc:	0c00671f 	jal	80019c7c <down>
8000a4e0:	02602021 	move	a0,s3
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8000a4e4:	40026000 	mfc0	v0,c0_status
8000a4e8:	30420001 	andi	v0,v0,0x1
8000a4ec:	1440003a 	bnez	v0,8000a5d8 <sfs_create+0x1b0>
8000a4f0:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8000a4f4:	8e160008 	lw	s6,8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8000a4f8:	32d60001 	andi	s6,s6,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:23
		if (!SFSInodeRemoved(sin)) {
8000a4fc:	16c00067 	bnez	s6,8000a69c <sfs_create+0x274>
8000a500:	27a20020 	addiu	v0,sp,32
sfs_create_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1246
		  bool excl, struct inode **node_store)
{
	int ret, slot;
	uint32_t ino;
	struct inode *link_node;
	if ((ret =
8000a504:	02402021 	move	a0,s2
8000a508:	02002821 	move	a1,s0
8000a50c:	02203021 	move	a2,s1
8000a510:	27a7001c 	addiu	a3,sp,28
8000a514:	afa00010 	sw	zero,16(sp)
8000a518:	0c001e85 	jal	80007a14 <sfs_dirent_search_nolock>
8000a51c:	afa20014 	sw	v0,20(sp)
8000a520:	0040b021 	move	s6,v0
8000a524:	2402fffe 	li	v0,-2
8000a528:	12c20046 	beq	s6,v0,8000a644 <sfs_create+0x21c>
8000a52c:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1249
	     sfs_dirent_search_nolock(sfs, sin, name, &ino, NULL,
				      &slot)) != -E_NOENT) {
		if (ret != 0) {
8000a530:	16c00015 	bnez	s6,8000a588 <sfs_create+0x160>
8000a534:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1252
			return ret;
		}
		if (!excl) {
8000a538:	1680005c 	bnez	s4,8000a6ac <sfs_create+0x284>
8000a53c:	8fa6001c 	lw	a2,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1253
			if ((ret = sfs_load_inode(sfs, &link_node, ino)) != 0) {
8000a540:	02402021 	move	a0,s2
8000a544:	0c002510 	jal	80009440 <sfs_load_inode>
8000a548:	27a50018 	addiu	a1,sp,24
8000a54c:	1440000e 	bnez	v0,8000a588 <sfs_create+0x160>
8000a550:	0040b021 	move	s6,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1256
				return ret;
			}
			if (vop_info(link_node, sfs_inode)->din->type ==
8000a554:	8fa40018 	lw	a0,24(sp)
8000a558:	10800065 	beqz	a0,8000a6f0 <sfs_create+0x2c8>
8000a55c:	24021237 	li	v0,4663
8000a560:	8c830038 	lw	v1,56(a0)
8000a564:	54620063 	bnel	v1,v0,8000a6f4 <sfs_create+0x2cc>
8000a568:	3c048002 	lui	a0,0x8002
8000a56c:	8c820000 	lw	v0,0(a0)
8000a570:	94430008 	lhu	v1,8(v0)
8000a574:	24020001 	li	v0,1
8000a578:	1462002e 	bne	v1,v0,8000a634 <sfs_create+0x20c>
8000a57c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1279
			return ret;
		}
	}

out:
	*node_store = link_node;
8000a580:	aea40000 	sw	a0,0(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1280
	return 0;
8000a584:	0000b021 	move	s6,zero
unlock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:33
	return -E_NOENT;
}

static inline void unlock_sin(struct sfs_inode *sin)
{
	up(&(sin->sem));
8000a588:	0c00671d 	jal	80019c74 <up>
8000a58c:	02602021 	move	a0,s3
sfs_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1301
	if ((ret = trylock_sin(sin)) == 0) {
		ret = sfs_create_nolock(sfs, sin, name, excl, node_store);
		unlock_sin(sin);
	}
	return ret;
}
8000a590:	8fbf0044 	lw	ra,68(sp)
8000a594:	02c01021 	move	v0,s6
8000a598:	8fb5003c 	lw	s5,60(sp)
8000a59c:	8fb60040 	lw	s6,64(sp)
8000a5a0:	8fb40038 	lw	s4,56(sp)
8000a5a4:	8fb30034 	lw	s3,52(sp)
8000a5a8:	8fb20030 	lw	s2,48(sp)
8000a5ac:	8fb1002c 	lw	s1,44(sp)
8000a5b0:	8fb00028 	lw	s0,40(sp)
8000a5b4:	03e00008 	jr	ra
8000a5b8:	27bd0048 	addiu	sp,sp,72
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8000a5bc:	0c006d04 	jal	8001b410 <intr_disable>
8000a5c0:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8000a5c4:	8e130008 	lw	s3,8(s0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000a5c8:	0c006d00 	jal	8001b400 <intr_enable>
8000a5cc:	32730001 	andi	s3,s3,0x1
8000a5d0:	08002935 	j	8000a4d4 <sfs_create+0xac>
8000a5d4:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8000a5d8:	0c006d04 	jal	8001b410 <intr_disable>
8000a5dc:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
8000a5e0:	8e160008 	lw	s6,8(s0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000a5e4:	0c006d00 	jal	8001b400 <intr_enable>
8000a5e8:	32d60001 	andi	s6,s6,0x1
8000a5ec:	0800293f 	j	8000a4fc <sfs_create+0xd4>
8000a5f0:	00000000 	nop
sfs_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1301
8000a5f4:	8fbf0044 	lw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1291
{
	if (strlen(name) > SFS_MAX_FNAME_LEN) {
		return -E_TOO_BIG;
	}
	if (strcmp(name, ".") == 0 || strcmp(name, "..") == 0) {
		return -E_EXISTS;
8000a5f8:	2416ffef 	li	s6,-17
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1301
	if ((ret = trylock_sin(sin)) == 0) {
		ret = sfs_create_nolock(sfs, sin, name, excl, node_store);
		unlock_sin(sin);
	}
	return ret;
}
8000a5fc:	02c01021 	move	v0,s6
8000a600:	8fb5003c 	lw	s5,60(sp)
8000a604:	8fb60040 	lw	s6,64(sp)
8000a608:	8fb40038 	lw	s4,56(sp)
8000a60c:	8fb30034 	lw	s3,52(sp)
8000a610:	8fb20030 	lw	s2,48(sp)
8000a614:	8fb1002c 	lw	s1,44(sp)
8000a618:	8fb00028 	lw	s0,40(sp)
8000a61c:	03e00008 	jr	ra
8000a620:	27bd0048 	addiu	sp,sp,72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1288
static int
sfs_create(struct inode *node, const char *name, bool excl,
	   struct inode **node_store)
{
	if (strlen(name) > SFS_MAX_FNAME_LEN) {
		return -E_TOO_BIG;
8000a624:	08002964 	j	8000a590 <sfs_create+0x168>
8000a628:	2416ffe5 	li	s6,-27
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:21
static const struct inode_ops sfs_node_dirops;
static const struct inode_ops sfs_node_fileops;

static inline int trylock_sin(struct sfs_inode *sin)
{
	if (!SFSInodeRemoved(sin)) {
8000a62c:	08002964 	j	8000a590 <sfs_create+0x168>
8000a630:	2416fffe 	li	s6,-2
sfs_create_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1260
			}
			if (vop_info(link_node, sfs_inode)->din->type ==
			    SFS_TYPE_FILE) {
				goto out;
			}
			vop_ref_dec(link_node);
8000a634:	0c001172 	jal	800045c8 <inode_ref_dec>
8000a638:	2416ffef 	li	s6,-17
8000a63c:	08002962 	j	8000a588 <sfs_create+0x160>
8000a640:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1264
		}
		return -E_EXISTS;
	} else {
		if ((ret =
8000a644:	24050001 	li	a1,1
8000a648:	0c001ca8 	jal	800072a0 <sfs_dirent_create_inode>
8000a64c:	27a60018 	addiu	a2,sp,24
8000a650:	1440ffcd 	bnez	v0,8000a588 <sfs_create+0x160>
8000a654:	0040b021 	move	s6,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1271
					     &link_node)) != 0) {
			return ret;
		}
		if ((ret =
		     sfs_dirent_link_nolock(sfs, sin, slot,
					    vop_info(link_node, sfs_inode),
8000a658:	8fa70018 	lw	a3,24(sp)
8000a65c:	10e00028 	beqz	a3,8000a700 <sfs_create+0x2d8>
8000a660:	8fa60020 	lw	a2,32(sp)
8000a664:	8ce30038 	lw	v1,56(a3)
8000a668:	24021237 	li	v0,4663
8000a66c:	14620024 	bne	v1,v0,8000a700 <sfs_create+0x2d8>
8000a670:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1269
		if ((ret =
		     sfs_dirent_create_inode(sfs, SFS_TYPE_FILE,
					     &link_node)) != 0) {
			return ret;
		}
		if ((ret =
8000a674:	02002821 	move	a1,s0
8000a678:	0c002123 	jal	8000848c <sfs_dirent_link_nolock>
8000a67c:	afb10010 	sw	s1,16(sp)
8000a680:	0040b021 	move	s6,v0
8000a684:	1040ffbe 	beqz	v0,8000a580 <sfs_create+0x158>
8000a688:	8fa40018 	lw	a0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1273
		     sfs_dirent_link_nolock(sfs, sin, slot,
					    vop_info(link_node, sfs_inode),
					    name)) != 0) {
			vop_ref_dec(link_node);
8000a68c:	0c001172 	jal	800045c8 <inode_ref_dec>
8000a690:	00000000 	nop
8000a694:	08002962 	j	8000a588 <sfs_create+0x160>
8000a698:	00000000 	nop
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:26
	if (!SFSInodeRemoved(sin)) {
		down(&(sin->sem));
		if (!SFSInodeRemoved(sin)) {
			return 0;
		}
		up(&(sin->sem));
8000a69c:	0c00671d 	jal	80019c74 <up>
8000a6a0:	02602021 	move	a0,s3
8000a6a4:	08002964 	j	8000a590 <sfs_create+0x168>
8000a6a8:	2416fffe 	li	s6,-2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1262
			    SFS_TYPE_FILE) {
				goto out;
			}
			vop_ref_dec(link_node);
		}
		return -E_EXISTS;
8000a6ac:	08002962 	j	8000a588 <sfs_create+0x160>
8000a6b0:	2416ffef 	li	s6,-17
sfs_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1293
		return -E_TOO_BIG;
	}
	if (strcmp(name, ".") == 0 || strcmp(name, "..") == 0) {
		return -E_EXISTS;
	}
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
8000a6b4:	3c048002 	lui	a0,0x8002
8000a6b8:	3c068002 	lui	a2,0x8002
8000a6bc:	3c078002 	lui	a3,0x8002
8000a6c0:	24842028 	addiu	a0,a0,8232
8000a6c4:	2405050d 	li	a1,1293
8000a6c8:	24c60e28 	addiu	a2,a2,3624
8000a6cc:	0c006b0b 	jal	8001ac2c <__panic>
8000a6d0:	24e71e84 	addiu	a3,a3,7812
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1294
	struct sfs_inode *sin = vop_info(node, sfs_inode);
8000a6d4:	24842028 	addiu	a0,a0,8232
8000a6d8:	2405050e 	li	a1,1294
sfs_create_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1256
		}
		if (!excl) {
			if ((ret = sfs_load_inode(sfs, &link_node, ino)) != 0) {
				return ret;
			}
			if (vop_info(link_node, sfs_inode)->din->type ==
8000a6dc:	3c068002 	lui	a2,0x8002
8000a6e0:	3c078002 	lui	a3,0x8002
8000a6e4:	24c60e28 	addiu	a2,a2,3624
8000a6e8:	0c006b0b 	jal	8001ac2c <__panic>
8000a6ec:	24e72034 	addiu	a3,a3,8244
8000a6f0:	3c048002 	lui	a0,0x8002
8000a6f4:	24842028 	addiu	a0,a0,8232
8000a6f8:	080029b7 	j	8000a6dc <sfs_create+0x2b4>
8000a6fc:	240504e8 	li	a1,1256
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:1271
					     &link_node)) != 0) {
			return ret;
		}
		if ((ret =
		     sfs_dirent_link_nolock(sfs, sin, slot,
					    vop_info(link_node, sfs_inode),
8000a700:	3c048002 	lui	a0,0x8002
8000a704:	24842028 	addiu	a0,a0,8232
8000a708:	080029b7 	j	8000a6dc <sfs_create+0x2b4>
8000a70c:	240504f7 	li	a1,1271

8000a710 <sfs_rename>:
sfs_rename():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:954
}

static int
sfs_rename(struct inode *node, const char *name, struct inode *new_node,
	   const char *new_name)
{
8000a710:	27bdffa8 	addiu	sp,sp,-88
8000a714:	afb00030 	sw	s0,48(sp)
8000a718:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:955
	if (strlen(name) > SFS_MAX_FNAME_LEN
8000a71c:	00a02021 	move	a0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:954
}

static int
sfs_rename(struct inode *node, const char *name, struct inode *new_node,
	   const char *new_name)
{
8000a720:	afb3003c 	sw	s3,60(sp)
8000a724:	afb20038 	sw	s2,56(sp)
8000a728:	afb10034 	sw	s1,52(sp)
8000a72c:	afbf0054 	sw	ra,84(sp)
8000a730:	afbe0050 	sw	s8,80(sp)
8000a734:	afb7004c 	sw	s7,76(sp)
8000a738:	afb60048 	sw	s6,72(sp)
8000a73c:	afb50044 	sw	s5,68(sp)
8000a740:	afb40040 	sw	s4,64(sp)
8000a744:	00a08821 	move	s1,a1
8000a748:	00c09021 	move	s2,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:955
	if (strlen(name) > SFS_MAX_FNAME_LEN
8000a74c:	0c005b79 	jal	80016de4 <strlen>
8000a750:	00e09821 	move	s3,a3
8000a754:	2c420100 	sltiu	v0,v0,256
8000a758:	10400081 	beqz	v0,8000a960 <sfs_rename+0x250>
8000a75c:	8fbf0054 	lw	ra,84(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:956
	    || strlen(new_name) > SFS_MAX_FNAME_LEN) {
8000a760:	0c005b79 	jal	80016de4 <strlen>
8000a764:	02602021 	move	a0,s3
8000a768:	2c420100 	sltiu	v0,v0,256
8000a76c:	1040007b 	beqz	v0,8000a95c <sfs_rename+0x24c>
8000a770:	3c148002 	lui	s4,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:959
		return -E_TOO_BIG;
	}
	if (strcmp(name, ".") == 0 || strcmp(name, "..") == 0) {
8000a774:	02202021 	move	a0,s1
8000a778:	0c005bb8 	jal	80016ee0 <strcmp>
8000a77c:	26853e28 	addiu	a1,s4,15912
8000a780:	10400084 	beqz	v0,8000a994 <sfs_rename+0x284>
8000a784:	3c158002 	lui	s5,0x8002
8000a788:	02202021 	move	a0,s1
8000a78c:	0c005bb8 	jal	80016ee0 <strcmp>
8000a790:	26a52330 	addiu	a1,s5,9008
8000a794:	1040007f 	beqz	v0,8000a994 <sfs_rename+0x284>
8000a798:	02602021 	move	a0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:962
		return -E_INVAL;
	}
	if (strcmp(new_name, ".") == 0 || strcmp(new_name, "..") == 0) {
8000a79c:	0c005bb8 	jal	80016ee0 <strcmp>
8000a7a0:	26853e28 	addiu	a1,s4,15912
8000a7a4:	5040004b 	beqzl	v0,8000a8d4 <sfs_rename+0x1c4>
8000a7a8:	2415ffef 	li	s5,-17
8000a7ac:	02602021 	move	a0,s3
8000a7b0:	0c005bb8 	jal	80016ee0 <strcmp>
8000a7b4:	26a52330 	addiu	a1,s5,9008
8000a7b8:	50400046 	beqzl	v0,8000a8d4 <sfs_rename+0x1c4>
8000a7bc:	2415ffef 	li	s5,-17
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:965
		return -E_EXISTS;
	}
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
8000a7c0:	8e140044 	lw	s4,68(s0)
8000a7c4:	128000f9 	beqz	s4,8000abac <sfs_rename+0x49c>
8000a7c8:	24025679 	li	v0,22137
8000a7cc:	8e830084 	lw	v1,132(s4)
8000a7d0:	146200f6 	bne	v1,v0,8000abac <sfs_rename+0x49c>
8000a7d4:	24021237 	li	v0,4663
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:966
	struct sfs_inode *sin = vop_info(node, sfs_inode), *newsin =
8000a7d8:	8e030038 	lw	v1,56(s0)
8000a7dc:	146200ec 	bne	v1,v0,8000ab90 <sfs_rename+0x480>
8000a7e0:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:967
	    vop_info(new_node, sfs_inode);
8000a7e4:	124000fa 	beqz	s2,8000abd0 <sfs_rename+0x4c0>
8000a7e8:	24842028 	addiu	a0,a0,8232
8000a7ec:	8e430038 	lw	v1,56(s2)
8000a7f0:	146200f6 	bne	v1,v0,8000abcc <sfs_rename+0x4bc>
8000a7f4:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:969
	int ret;
	lock_sfs_mutex(sfs);
8000a7f8:	0c002c4f 	jal	8000b13c <lock_sfs_mutex>
8000a7fc:	02802021 	move	a0,s4
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8000a800:	40026000 	mfc0	v0,c0_status
8000a804:	30420001 	andi	v0,v0,0x1
8000a808:	1440003f 	bnez	v0,8000a908 <sfs_rename+0x1f8>
8000a80c:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
8000a810:	8e150008 	lw	s5,8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8000a814:	32b50001 	andi	s5,s5,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:21
static const struct inode_ops sfs_node_dirops;
static const struct inode_ops sfs_node_fileops;

static inline int trylock_sin(struct sfs_inode *sin)
{
	if (!SFSInodeRemoved(sin)) {
8000a818:	16a00075 	bnez	s5,8000a9f0 <sfs_rename+0x2e0>
8000a81c:	26160014 	addiu	s6,s0,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:22
		down(&(sin->sem));
8000a820:	0c00671f 	jal	80019c7c <down>
8000a824:	02c02021 	move	a0,s6
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8000a828:	40026000 	mfc0	v0,c0_status
8000a82c:	30420001 	andi	v0,v0,0x1
8000a830:	1440003c 	bnez	v0,8000a924 <sfs_rename+0x214>
8000a834:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8000a838:	8e150008 	lw	s5,8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8000a83c:	32b50001 	andi	s5,s5,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:23
		if (!SFSInodeRemoved(sin)) {
8000a840:	16a00069 	bnez	s5,8000a9e8 <sfs_rename+0x2d8>
8000a844:	00000000 	nop
sfs_rename():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:972
	    vop_info(new_node, sfs_inode);
	int ret;
	lock_sfs_mutex(sfs);
	{
		if ((ret = trylock_sin(sin)) == 0) {
			if (sin == newsin) {
8000a848:	5212006b 	beql	s0,s2,8000a9f8 <sfs_rename+0x2e8>
8000a84c:	02202021 	move	a0,s1
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8000a850:	40026000 	mfc0	v0,c0_status
8000a854:	30420001 	andi	v0,v0,0x1
8000a858:	14400039 	bnez	v0,8000a940 <sfs_rename+0x230>
8000a85c:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8000a860:	8e550008 	lw	s5,8(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8000a864:	32b50001 	andi	s5,s5,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:21
static const struct inode_ops sfs_node_dirops;
static const struct inode_ops sfs_node_fileops;

static inline int trylock_sin(struct sfs_inode *sin)
{
	if (!SFSInodeRemoved(sin)) {
8000a868:	16a0008e 	bnez	s5,8000aaa4 <sfs_rename+0x394>
8000a86c:	26570014 	addiu	s7,s2,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:22
		down(&(sin->sem));
8000a870:	0c00671f 	jal	80019c7c <down>
8000a874:	02e02021 	move	a0,s7
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8000a878:	40026000 	mfc0	v0,c0_status
8000a87c:	30420001 	andi	v0,v0,0x1
8000a880:	14400052 	bnez	v0,8000a9cc <sfs_rename+0x2bc>
8000a884:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8000a888:	8e550008 	lw	s5,8(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8000a88c:	32b50001 	andi	s5,s5,0x1
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:23
		if (!SFSInodeRemoved(sin)) {
8000a890:	16a00082 	bnez	s5,8000aa9c <sfs_rename+0x38c>
8000a894:	27a20024 	addiu	v0,sp,36
sfs_rename2_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:897
sfs_rename2_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, const char *name,
		   struct sfs_inode *newsin, const char *new_name)
{
	uint32_t ino;
	int ret, slot1, slot2;
	if ((ret =
8000a898:	02802021 	move	a0,s4
8000a89c:	02002821 	move	a1,s0
8000a8a0:	02203021 	move	a2,s1
8000a8a4:	27a70020 	addiu	a3,sp,32
8000a8a8:	afa20010 	sw	v0,16(sp)
8000a8ac:	0c001e85 	jal	80007a14 <sfs_dirent_search_nolock>
8000a8b0:	afa00014 	sw	zero,20(sp)
8000a8b4:	1040006b 	beqz	v0,8000aa64 <sfs_rename+0x354>
8000a8b8:	0040a821 	move	s5,v0
unlock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:33
	return -E_NOENT;
}

static inline void unlock_sin(struct sfs_inode *sin)
{
	up(&(sin->sem));
8000a8bc:	0c00671d 	jal	80019c74 <up>
8000a8c0:	02e02021 	move	a0,s7
8000a8c4:	0c00671d 	jal	80019c74 <up>
8000a8c8:	02c02021 	move	a0,s6
sfs_rename():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:985
				unlock_sin(newsin);
			}
			unlock_sin(sin);
		}
	}
	unlock_sfs_mutex(sfs);
8000a8cc:	0c002c55 	jal	8000b154 <unlock_sfs_mutex>
8000a8d0:	02802021 	move	a0,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:987
	return ret;
}
8000a8d4:	8fbf0054 	lw	ra,84(sp)
8000a8d8:	02a01021 	move	v0,s5
8000a8dc:	8fbe0050 	lw	s8,80(sp)
8000a8e0:	8fb7004c 	lw	s7,76(sp)
8000a8e4:	8fb60048 	lw	s6,72(sp)
8000a8e8:	8fb50044 	lw	s5,68(sp)
8000a8ec:	8fb40040 	lw	s4,64(sp)
8000a8f0:	8fb3003c 	lw	s3,60(sp)
8000a8f4:	8fb20038 	lw	s2,56(sp)
8000a8f8:	8fb10034 	lw	s1,52(sp)
8000a8fc:	8fb00030 	lw	s0,48(sp)
8000a900:	03e00008 	jr	ra
8000a904:	27bd0058 	addiu	sp,sp,88
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8000a908:	0c006d04 	jal	8001b410 <intr_disable>
8000a90c:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8000a910:	8e150008 	lw	s5,8(s0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000a914:	0c006d00 	jal	8001b400 <intr_enable>
8000a918:	32b50001 	andi	s5,s5,0x1
8000a91c:	08002a06 	j	8000a818 <sfs_rename+0x108>
8000a920:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8000a924:	0c006d04 	jal	8001b410 <intr_disable>
8000a928:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
8000a92c:	8e150008 	lw	s5,8(s0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000a930:	0c006d00 	jal	8001b400 <intr_enable>
8000a934:	32b50001 	andi	s5,s5,0x1
8000a938:	08002a10 	j	8000a840 <sfs_rename+0x130>
8000a93c:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8000a940:	0c006d04 	jal	8001b410 <intr_disable>
8000a944:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
8000a948:	8e550008 	lw	s5,8(s2)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000a94c:	0c006d00 	jal	8001b400 <intr_enable>
8000a950:	32b50001 	andi	s5,s5,0x1
8000a954:	08002a1a 	j	8000a868 <sfs_rename+0x158>
8000a958:	00000000 	nop
sfs_rename():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:987
8000a95c:	8fbf0054 	lw	ra,84(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:957
sfs_rename(struct inode *node, const char *name, struct inode *new_node,
	   const char *new_name)
{
	if (strlen(name) > SFS_MAX_FNAME_LEN
	    || strlen(new_name) > SFS_MAX_FNAME_LEN) {
		return -E_TOO_BIG;
8000a960:	2415ffe5 	li	s5,-27
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:987
			unlock_sin(sin);
		}
	}
	unlock_sfs_mutex(sfs);
	return ret;
}
8000a964:	02a01021 	move	v0,s5
8000a968:	8fbe0050 	lw	s8,80(sp)
8000a96c:	8fb7004c 	lw	s7,76(sp)
8000a970:	8fb60048 	lw	s6,72(sp)
8000a974:	8fb50044 	lw	s5,68(sp)
8000a978:	8fb40040 	lw	s4,64(sp)
8000a97c:	8fb3003c 	lw	s3,60(sp)
8000a980:	8fb20038 	lw	s2,56(sp)
8000a984:	8fb10034 	lw	s1,52(sp)
8000a988:	8fb00030 	lw	s0,48(sp)
8000a98c:	03e00008 	jr	ra
8000a990:	27bd0058 	addiu	sp,sp,88
8000a994:	8fbf0054 	lw	ra,84(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:960
	if (strlen(name) > SFS_MAX_FNAME_LEN
	    || strlen(new_name) > SFS_MAX_FNAME_LEN) {
		return -E_TOO_BIG;
	}
	if (strcmp(name, ".") == 0 || strcmp(name, "..") == 0) {
		return -E_INVAL;
8000a998:	2415ffea 	li	s5,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:987
			unlock_sin(sin);
		}
	}
	unlock_sfs_mutex(sfs);
	return ret;
}
8000a99c:	02a01021 	move	v0,s5
8000a9a0:	8fbe0050 	lw	s8,80(sp)
8000a9a4:	8fb7004c 	lw	s7,76(sp)
8000a9a8:	8fb60048 	lw	s6,72(sp)
8000a9ac:	8fb50044 	lw	s5,68(sp)
8000a9b0:	8fb40040 	lw	s4,64(sp)
8000a9b4:	8fb3003c 	lw	s3,60(sp)
8000a9b8:	8fb20038 	lw	s2,56(sp)
8000a9bc:	8fb10034 	lw	s1,52(sp)
8000a9c0:	8fb00030 	lw	s0,48(sp)
8000a9c4:	03e00008 	jr	ra
8000a9c8:	27bd0058 	addiu	sp,sp,88
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8000a9cc:	0c006d04 	jal	8001b410 <intr_disable>
8000a9d0:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
8000a9d4:	8e550008 	lw	s5,8(s2)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000a9d8:	0c006d00 	jal	8001b400 <intr_enable>
8000a9dc:	32b50001 	andi	s5,s5,0x1
8000a9e0:	08002a24 	j	8000a890 <sfs_rename+0x180>
8000a9e4:	00000000 	nop
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:26
	if (!SFSInodeRemoved(sin)) {
		down(&(sin->sem));
		if (!SFSInodeRemoved(sin)) {
			return 0;
		}
		up(&(sin->sem));
8000a9e8:	0c00671d 	jal	80019c74 <up>
8000a9ec:	02c02021 	move	a0,s6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:905
		return ret;
	}
	if ((ret =
	     sfs_dirent_search_nolock(sfs, newsin, new_name, NULL, NULL,
				      &slot2)) != -E_NOENT) {
		return (ret != 0) ? ret : -E_EXISTS;
8000a9f0:	08002a33 	j	8000a8cc <sfs_rename+0x1bc>
8000a9f4:	2415fffe 	li	s5,-2
sfs_rename1_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:873

static int
sfs_rename1_nolock(struct sfs_fs *sfs, struct sfs_inode *sin, const char *name,
		   const char *new_name)
{
	if (strcmp(name, new_name) == 0) {
8000a9f8:	0c005bb8 	jal	80016ee0 <strcmp>
8000a9fc:	02602821 	move	a1,s3
8000aa00:	1040ffb0 	beqz	v0,8000a8c4 <sfs_rename+0x1b4>
8000aa04:	0000a821 	move	s5,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:878
		return 0;
	}
	int ret, slot;
	uint32_t ino;
	if ((ret =
8000aa08:	27a20024 	addiu	v0,sp,36
8000aa0c:	02802021 	move	a0,s4
8000aa10:	02002821 	move	a1,s0
8000aa14:	02203021 	move	a2,s1
8000aa18:	27a70020 	addiu	a3,sp,32
8000aa1c:	afa20010 	sw	v0,16(sp)
8000aa20:	0c001e85 	jal	80007a14 <sfs_dirent_search_nolock>
8000aa24:	afa00014 	sw	zero,20(sp)
8000aa28:	1440ffa6 	bnez	v0,8000a8c4 <sfs_rename+0x1b4>
8000aa2c:	0040a821 	move	s5,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:883
	     sfs_dirent_search_nolock(sfs, sin, name, &ino, &slot,
				      NULL)) != 0) {
		return ret;
	}
	if ((ret =
8000aa30:	02802021 	move	a0,s4
8000aa34:	02002821 	move	a1,s0
8000aa38:	02603021 	move	a2,s3
8000aa3c:	00003821 	move	a3,zero
8000aa40:	afa00010 	sw	zero,16(sp)
8000aa44:	0c001e85 	jal	80007a14 <sfs_dirent_search_nolock>
8000aa48:	afa00014 	sw	zero,20(sp)
8000aa4c:	0040a821 	move	s5,v0
8000aa50:	2402fffe 	li	v0,-2
8000aa54:	12a20046 	beq	s5,v0,8000ab70 <sfs_rename+0x460>
8000aa58:	2402ffef 	li	v0,-17
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:886
	     sfs_dirent_search_nolock(sfs, sin, new_name, NULL, NULL,
				      NULL)) != -E_NOENT) {
		return (ret != 0) ? ret : -E_EXISTS;
8000aa5c:	08002a31 	j	8000a8c4 <sfs_rename+0x1b4>
8000aa60:	0055a80a 	movz	s5,v0,s5
sfs_rename2_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:902
	if ((ret =
	     sfs_dirent_search_nolock(sfs, sin, name, &ino, &slot1,
				      NULL)) != 0) {
		return ret;
	}
	if ((ret =
8000aa64:	27a2001c 	addiu	v0,sp,28
8000aa68:	02802021 	move	a0,s4
8000aa6c:	02402821 	move	a1,s2
8000aa70:	02603021 	move	a2,s3
8000aa74:	00003821 	move	a3,zero
8000aa78:	afa00010 	sw	zero,16(sp)
8000aa7c:	0c001e85 	jal	80007a14 <sfs_dirent_search_nolock>
8000aa80:	afa20014 	sw	v0,20(sp)
8000aa84:	0040a821 	move	s5,v0
8000aa88:	2402fffe 	li	v0,-2
8000aa8c:	12a20007 	beq	s5,v0,8000aaac <sfs_rename+0x39c>
8000aa90:	2402ffef 	li	v0,-17
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:905
	     sfs_dirent_search_nolock(sfs, newsin, new_name, NULL, NULL,
				      &slot2)) != -E_NOENT) {
		return (ret != 0) ? ret : -E_EXISTS;
8000aa94:	08002a2f 	j	8000a8bc <sfs_rename+0x1ac>
8000aa98:	0055a80a 	movz	s5,v0,s5
trylock_sin():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:26
	if (!SFSInodeRemoved(sin)) {
		down(&(sin->sem));
		if (!SFSInodeRemoved(sin)) {
			return 0;
		}
		up(&(sin->sem));
8000aa9c:	0c00671d 	jal	80019c74 <up>
8000aaa0:	02e02021 	move	a0,s7
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:905
		return ret;
	}
	if ((ret =
	     sfs_dirent_search_nolock(sfs, newsin, new_name, NULL, NULL,
				      &slot2)) != -E_NOENT) {
		return (ret != 0) ? ret : -E_EXISTS;
8000aaa4:	08002a31 	j	8000a8c4 <sfs_rename+0x1b4>
8000aaa8:	2415fffe 	li	s5,-2
sfs_rename2_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:909
	}

	struct inode *link_node;
	if ((ret = sfs_load_inode(sfs, &link_node, ino)) != 0) {
8000aaac:	8fa60020 	lw	a2,32(sp)
8000aab0:	02802021 	move	a0,s4
8000aab4:	0c002510 	jal	80009440 <sfs_load_inode>
8000aab8:	27a50018 	addiu	a1,sp,24
8000aabc:	1440ff7f 	bnez	v0,8000a8bc <sfs_rename+0x1ac>
8000aac0:	0040a821 	move	s5,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:913
		return ret;
	}

	struct sfs_inode *lnksin = vop_info(link_node, sfs_inode);
8000aac4:	8fbe0018 	lw	s8,24(sp)
8000aac8:	13c00063 	beqz	s8,8000ac58 <sfs_rename+0x548>
8000aacc:	24021237 	li	v0,4663
8000aad0:	8fc30038 	lw	v1,56(s8)
8000aad4:	14620060 	bne	v1,v0,8000ac58 <sfs_rename+0x548>
8000aad8:	8fa60024 	lw	a2,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:914
	if ((ret = sfs_dirent_unlink_nolock(sfs, sin, slot1, lnksin)) != 0) {
8000aadc:	02802021 	move	a0,s4
8000aae0:	02002821 	move	a1,s0
8000aae4:	0c0020fd 	jal	800083f4 <sfs_dirent_unlink_nolock>
8000aae8:	03c03821 	move	a3,s8
8000aaec:	1440001c 	bnez	v0,8000ab60 <sfs_rename+0x450>
8000aaf0:	0040a821 	move	s5,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:918
		goto out;
	}

	int isdir = (lnksin->din->type == SFS_TYPE_DIR);
8000aaf4:	8fc20000 	lw	v0,0(s8)
8000aaf8:	94430008 	lhu	v1,8(v0)
8000aafc:	38630002 	xori	v1,v1,0x2
8000ab00:	2c630001 	sltiu	v1,v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:921

	/* remove '..' link from old parent */
	if (isdir) {
8000ab04:	54600044 	bnezl	v1,8000ac18 <sfs_rename+0x508>
8000ab08:	8e020000 	lw	v0,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:926
		sfs_nlinks_dec_nolock(sin);
	}

	/* if link fails try to recover its old link */
	if ((ret =
8000ab0c:	8fa6001c 	lw	a2,28(sp)
8000ab10:	02802021 	move	a0,s4
8000ab14:	02402821 	move	a1,s2
8000ab18:	03c03821 	move	a3,s8
8000ab1c:	afa30028 	sw	v1,40(sp)
8000ab20:	0c002123 	jal	8000848c <sfs_dirent_link_nolock>
8000ab24:	afb30010 	sw	s3,16(sp)
8000ab28:	0040a821 	move	s5,v0
8000ab2c:	1440002a 	bnez	v0,8000abd8 <sfs_rename+0x4c8>
8000ab30:	8fa30028 	lw	v1,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:938
			}
		}
		goto out;
	}

	if (isdir) {
8000ab34:	1060000a 	beqz	v1,8000ab60 <sfs_rename+0x450>
8000ab38:	24020001 	li	v0,1
sfs_nlinks_inc_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:741
	return 0;
}

static inline void sfs_nlinks_inc_nolock(struct sfs_inode *sin)
{
	sin->dirty = 1, ++sin->din->nlinks;
8000ab3c:	8e430000 	lw	v1,0(s2)
sfs_dirinfo_set_parent():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:754

static inline void
sfs_dirinfo_set_parent(struct sfs_inode *sin, struct sfs_inode *parent)
{
	sin->dirty = 1;
	sin->din->dirinfo.parent = parent->ino;
8000ab40:	8fc40000 	lw	a0,0(s8)
8000ab44:	8e450004 	lw	a1,4(s2)
sfs_nlinks_inc_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:741
	return 0;
}

static inline void sfs_nlinks_inc_nolock(struct sfs_inode *sin)
{
	sin->dirty = 1, ++sin->din->nlinks;
8000ab48:	9466000a 	lhu	a2,10(v1)
8000ab4c:	ae42000c 	sw	v0,12(s2)
8000ab50:	24c60001 	addiu	a2,a2,1
8000ab54:	a466000a 	sh	a2,10(v1)
sfs_dirinfo_set_parent():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:753
}

static inline void
sfs_dirinfo_set_parent(struct sfs_inode *sin, struct sfs_inode *parent)
{
	sin->dirty = 1;
8000ab58:	afc2000c 	sw	v0,12(s8)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:754
	sin->din->dirinfo.parent = parent->ino;
8000ab5c:	ac850004 	sw	a1,4(a0)
sfs_rename2_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:947
		/* update parent relationship */
		sfs_dirinfo_set_parent(lnksin, newsin);
	}

out:
	vop_ref_dec(link_node);
8000ab60:	0c001172 	jal	800045c8 <inode_ref_dec>
8000ab64:	8fa40018 	lw	a0,24(sp)
8000ab68:	08002a2f 	j	8000a8bc <sfs_rename+0x1ac>
8000ab6c:	00000000 	nop
sfs_rename1_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:888
	if ((ret =
	     sfs_dirent_search_nolock(sfs, sin, new_name, NULL, NULL,
				      NULL)) != -E_NOENT) {
		return (ret != 0) ? ret : -E_EXISTS;
	}
	return sfs_dirent_write_nolock(sfs, sin, slot, ino, new_name);
8000ab70:	8fa60024 	lw	a2,36(sp)
8000ab74:	8fa70020 	lw	a3,32(sp)
8000ab78:	02802021 	move	a0,s4
8000ab7c:	02002821 	move	a1,s0
8000ab80:	0c001ee0 	jal	80007b80 <sfs_dirent_write_nolock>
8000ab84:	afb30010 	sw	s3,16(sp)
8000ab88:	08002a31 	j	8000a8c4 <sfs_rename+0x1b4>
8000ab8c:	0040a821 	move	s5,v0
sfs_rename():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:966
	}
	if (strcmp(new_name, ".") == 0 || strcmp(new_name, "..") == 0) {
		return -E_EXISTS;
	}
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
	struct sfs_inode *sin = vop_info(node, sfs_inode), *newsin =
8000ab90:	24842028 	addiu	a0,a0,8232
8000ab94:	240503c6 	li	a1,966
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:967
	    vop_info(new_node, sfs_inode);
8000ab98:	3c068002 	lui	a2,0x8002
8000ab9c:	3c078002 	lui	a3,0x8002
8000aba0:	24c60e28 	addiu	a2,a2,3624
8000aba4:	0c006b0b 	jal	8001ac2c <__panic>
8000aba8:	24e72034 	addiu	a3,a3,8244
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:965
		return -E_INVAL;
	}
	if (strcmp(new_name, ".") == 0 || strcmp(new_name, "..") == 0) {
		return -E_EXISTS;
	}
	struct sfs_fs *sfs = fsop_info(vop_fs(node), sfs);
8000abac:	3c048002 	lui	a0,0x8002
8000abb0:	3c068002 	lui	a2,0x8002
8000abb4:	3c078002 	lui	a3,0x8002
8000abb8:	24842028 	addiu	a0,a0,8232
8000abbc:	240503c5 	li	a1,965
8000abc0:	24c60e28 	addiu	a2,a2,3624
8000abc4:	0c006b0b 	jal	8001ac2c <__panic>
8000abc8:	24e71e84 	addiu	a3,a3,7812
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:967
	struct sfs_inode *sin = vop_info(node, sfs_inode), *newsin =
	    vop_info(new_node, sfs_inode);
8000abcc:	24842028 	addiu	a0,a0,8232
8000abd0:	08002ae6 	j	8000ab98 <sfs_rename+0x488>
8000abd4:	240503c7 	li	a1,967
sfs_rename2_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:929

	/* if link fails try to recover its old link */
	if ((ret =
	     sfs_dirent_link_nolock(sfs, newsin, slot2, lnksin,
				    new_name)) != 0) {
		if (sfs_dirent_link_nolock_check(sfs, sin, slot1, lnksin, name)
8000abd8:	8fa60024 	lw	a2,36(sp)
8000abdc:	02802021 	move	a0,s4
8000abe0:	02002821 	move	a1,s0
8000abe4:	03c03821 	move	a3,s8
8000abe8:	0c002123 	jal	8000848c <sfs_dirent_link_nolock>
8000abec:	afb10010 	sw	s1,16(sp)
8000abf0:	14400010 	bnez	v0,8000ac34 <sfs_rename+0x524>
8000abf4:	8fa30028 	lw	v1,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:931
		    == 0) {
			if (isdir) {
8000abf8:	1060ffd9 	beqz	v1,8000ab60 <sfs_rename+0x450>
8000abfc:	24030001 	li	v1,1
sfs_nlinks_inc_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:741
	return 0;
}

static inline void sfs_nlinks_inc_nolock(struct sfs_inode *sin)
{
	sin->dirty = 1, ++sin->din->nlinks;
8000ac00:	8e020000 	lw	v0,0(s0)
8000ac04:	ae03000c 	sw	v1,12(s0)
8000ac08:	9443000a 	lhu	v1,10(v0)
8000ac0c:	24630001 	addiu	v1,v1,1
8000ac10:	08002ad8 	j	8000ab60 <sfs_rename+0x450>
8000ac14:	a443000a 	sh	v1,10(v0)
sfs_nlinks_dec_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:746
}

static inline void sfs_nlinks_dec_nolock(struct sfs_inode *sin)
{
	assert(sin->din->nlinks != 0);
8000ac18:	9444000a 	lhu	a0,10(v0)
8000ac1c:	10800012 	beqz	a0,8000ac68 <sfs_rename+0x558>
8000ac20:	2484ffff 	addiu	a0,a0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:747
	sin->dirty = 1, --sin->din->nlinks;
8000ac24:	24050001 	li	a1,1
8000ac28:	ae05000c 	sw	a1,12(s0)
8000ac2c:	08002ac3 	j	8000ab0c <sfs_rename+0x3fc>
8000ac30:	a444000a 	sh	a0,10(v0)
sfs_rename2_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:929

	/* if link fails try to recover its old link */
	if ((ret =
	     sfs_dirent_link_nolock(sfs, newsin, slot2, lnksin,
				    new_name)) != 0) {
		if (sfs_dirent_link_nolock_check(sfs, sin, slot1, lnksin, name)
8000ac34:	3c048002 	lui	a0,0x8002
8000ac38:	3c068002 	lui	a2,0x8002
8000ac3c:	24842028 	addiu	a0,a0,8232
8000ac40:	240503a1 	li	a1,929
8000ac44:	24c62430 	addiu	a2,a2,9264
8000ac48:	0c006b2b 	jal	8001acac <__warn>
8000ac4c:	00403821 	move	a3,v0
8000ac50:	08002ad8 	j	8000ab60 <sfs_rename+0x450>
8000ac54:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:913
	struct inode *link_node;
	if ((ret = sfs_load_inode(sfs, &link_node, ino)) != 0) {
		return ret;
	}

	struct sfs_inode *lnksin = vop_info(link_node, sfs_inode);
8000ac58:	3c048002 	lui	a0,0x8002
8000ac5c:	24842028 	addiu	a0,a0,8232
8000ac60:	08002ae6 	j	8000ab98 <sfs_rename+0x488>
8000ac64:	24050391 	li	a1,913
sfs_nlinks_dec_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_inode.c:746
	sin->dirty = 1, ++sin->din->nlinks;
}

static inline void sfs_nlinks_dec_nolock(struct sfs_inode *sin)
{
	assert(sin->din->nlinks != 0);
8000ac68:	3c048002 	lui	a0,0x8002
8000ac6c:	3c068002 	lui	a2,0x8002
8000ac70:	3c078002 	lui	a3,0x8002
8000ac74:	24842028 	addiu	a0,a0,8232
8000ac78:	240502ea 	li	a1,746
8000ac7c:	24c60e28 	addiu	a2,a2,3624
8000ac80:	0c006b0b 	jal	8001ac2c <__panic>
8000ac84:	24e72418 	addiu	a3,a3,9240

8000ac88 <sfs_rwblock_nolock>:
sfs_rwblock_nolock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:12
#include <assert.h>

static int
sfs_rwblock_nolock(struct sfs_fs *sfs, void *buf, uint32_t blkno, bool write,
		   bool check)
{
8000ac88:	27bdffd0 	addiu	sp,sp,-48
8000ac8c:	afb10028 	sw	s1,40(sp)
8000ac90:	afb00024 	sw	s0,36(sp)
8000ac94:	afbf002c 	sw	ra,44(sp)
8000ac98:	00c01021 	move	v0,a2
8000ac9c:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:13
	assert((blkno != 0 || !check) && blkno < sfs->super.blocks);
8000aca0:	14c00004 	bnez	a2,8000acb4 <sfs_rwblock_nolock+0x2c>
8000aca4:	00e08821 	move	s1,a3
8000aca8:	8fa30040 	lw	v1,64(sp)
8000acac:	14600013 	bnez	v1,8000acfc <sfs_rwblock_nolock+0x74>
8000acb0:	3c048002 	lui	a0,0x8002
8000acb4:	8e030004 	lw	v1,4(s0)
8000acb8:	0043182b 	sltu	v1,v0,v1
8000acbc:	1060000e 	beqz	v1,8000acf8 <sfs_rwblock_nolock+0x70>
8000acc0:	27a40010 	addiu	a0,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:14
	struct iobuf __iob, *iob =
8000acc4:	24061000 	li	a2,4096
8000acc8:	0c003348 	jal	8000cd20 <iobuf_init>
8000accc:	00023b00 	sll	a3,v0,0xc
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:16
	    iobuf_init(&__iob, buf, SFS_BLKSIZE, blkno * SFS_BLKSIZE);
	return dop_io(sfs->dev, iob, write);
8000acd0:	8e04002c 	lw	a0,44(s0)
8000acd4:	00402821 	move	a1,v0
8000acd8:	8c820028 	lw	v0,40(a0)
8000acdc:	0040f809 	jalr	v0
8000ace0:	02203021 	move	a2,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:17
}
8000ace4:	8fbf002c 	lw	ra,44(sp)
8000ace8:	8fb10028 	lw	s1,40(sp)
8000acec:	8fb00024 	lw	s0,36(sp)
8000acf0:	03e00008 	jr	ra
8000acf4:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:13

static int
sfs_rwblock_nolock(struct sfs_fs *sfs, void *buf, uint32_t blkno, bool write,
		   bool check)
{
	assert((blkno != 0 || !check) && blkno < sfs->super.blocks);
8000acf8:	3c048002 	lui	a0,0x8002
8000acfc:	3c068002 	lui	a2,0x8002
8000ad00:	3c078002 	lui	a3,0x8002
8000ad04:	2484244c 	addiu	a0,a0,9292
8000ad08:	2405000d 	li	a1,13
8000ad0c:	24c60e28 	addiu	a2,a2,3624
8000ad10:	0c006b0b 	jal	8001ac2c <__panic>
8000ad14:	24e72458 	addiu	a3,a3,9304

8000ad18 <sfs_rwblock>:
sfs_rwblock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:22
}

static int
sfs_rwblock(struct sfs_fs *sfs, void *buf, uint32_t blkno, uint32_t nblks,
	    bool write)
{
8000ad18:	27bdffc0 	addiu	sp,sp,-64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:23
	int ret = 0;
8000ad1c:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:22
}

static int
sfs_rwblock(struct sfs_fs *sfs, void *buf, uint32_t blkno, uint32_t nblks,
	    bool write)
{
8000ad20:	afb30030 	sw	s3,48(sp)
8000ad24:	afb2002c 	sw	s2,44(sp)
8000ad28:	afb10028 	sw	s1,40(sp)
8000ad2c:	afb00024 	sw	s0,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:24
	int ret = 0;
	lock_sfs_io(sfs);
8000ad30:	afa2001c 	sw	v0,28(sp)
8000ad34:	afa70018 	sw	a3,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:22
}

static int
sfs_rwblock(struct sfs_fs *sfs, void *buf, uint32_t blkno, uint32_t nblks,
	    bool write)
{
8000ad38:	afbf003c 	sw	ra,60(sp)
8000ad3c:	afb50038 	sw	s5,56(sp)
8000ad40:	afb40034 	sw	s4,52(sp)
8000ad44:	00809021 	move	s2,a0
8000ad48:	00a08821 	move	s1,a1
8000ad4c:	00c08021 	move	s0,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:24
	int ret = 0;
	lock_sfs_io(sfs);
8000ad50:	0c002c4d 	jal	8000b134 <lock_sfs_io>
8000ad54:	8fb30050 	lw	s3,80(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:26
	{
		while (nblks != 0) {
8000ad58:	8fa70018 	lw	a3,24(sp)
8000ad5c:	10e0000e 	beqz	a3,8000ad98 <sfs_rwblock+0x80>
8000ad60:	8fa2001c 	lw	v0,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:20
	    iobuf_init(&__iob, buf, SFS_BLKSIZE, blkno * SFS_BLKSIZE);
	return dop_io(sfs->dev, iob, write);
}

static int
sfs_rwblock(struct sfs_fs *sfs, void *buf, uint32_t blkno, uint32_t nblks,
8000ad64:	00f0a821 	addu	s5,a3,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:27
{
	int ret = 0;
	lock_sfs_io(sfs);
	{
		while (nblks != 0) {
			if ((ret =
8000ad68:	08002b5e 	j	8000ad78 <sfs_rwblock+0x60>
8000ad6c:	24140001 	li	s4,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:26
	    bool write)
{
	int ret = 0;
	lock_sfs_io(sfs);
	{
		while (nblks != 0) {
8000ad70:	12150009 	beq	s0,s5,8000ad98 <sfs_rwblock+0x80>
8000ad74:	26311000 	addiu	s1,s1,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:27
			if ((ret =
8000ad78:	02003021 	move	a2,s0
8000ad7c:	02202821 	move	a1,s1
8000ad80:	02402021 	move	a0,s2
8000ad84:	02603821 	move	a3,s3
8000ad88:	0c002b22 	jal	8000ac88 <sfs_rwblock_nolock>
8000ad8c:	afb40010 	sw	s4,16(sp)
8000ad90:	1040fff7 	beqz	v0,8000ad70 <sfs_rwblock+0x58>
8000ad94:	26100001 	addiu	s0,s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:36
			}
			blkno++, nblks--;
			buf += SFS_BLKSIZE;
		}
	}
	unlock_sfs_io(sfs);
8000ad98:	02402021 	move	a0,s2
8000ad9c:	0c002c53 	jal	8000b14c <unlock_sfs_io>
8000ada0:	afa2001c 	sw	v0,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:38
	return ret;
}
8000ada4:	8fbf003c 	lw	ra,60(sp)
8000ada8:	8fa2001c 	lw	v0,28(sp)
8000adac:	8fb50038 	lw	s5,56(sp)
8000adb0:	8fb40034 	lw	s4,52(sp)
8000adb4:	8fb30030 	lw	s3,48(sp)
8000adb8:	8fb2002c 	lw	s2,44(sp)
8000adbc:	8fb10028 	lw	s1,40(sp)
8000adc0:	8fb00024 	lw	s0,36(sp)
8000adc4:	03e00008 	jr	ra
8000adc8:	27bd0040 	addiu	sp,sp,64

8000adcc <sfs_rblock>:
sfs_rblock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:41

int sfs_rblock(struct sfs_fs *sfs, void *buf, uint32_t blkno, uint32_t nblks)
{
8000adcc:	27bdffe0 	addiu	sp,sp,-32
8000add0:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:42
	return sfs_rwblock(sfs, buf, blkno, nblks, 0);
8000add4:	0c002b46 	jal	8000ad18 <sfs_rwblock>
8000add8:	afa00010 	sw	zero,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:43
}
8000addc:	8fbf001c 	lw	ra,28(sp)
8000ade0:	03e00008 	jr	ra
8000ade4:	27bd0020 	addiu	sp,sp,32

8000ade8 <sfs_wblock>:
sfs_wblock():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:46

int sfs_wblock(struct sfs_fs *sfs, void *buf, uint32_t blkno, uint32_t nblks)
{
8000ade8:	27bdffe0 	addiu	sp,sp,-32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:47
	return sfs_rwblock(sfs, buf, blkno, nblks, 1);
8000adec:	24020001 	li	v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:46
{
	return sfs_rwblock(sfs, buf, blkno, nblks, 0);
}

int sfs_wblock(struct sfs_fs *sfs, void *buf, uint32_t blkno, uint32_t nblks)
{
8000adf0:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:47
	return sfs_rwblock(sfs, buf, blkno, nblks, 1);
8000adf4:	0c002b46 	jal	8000ad18 <sfs_rwblock>
8000adf8:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:48
}
8000adfc:	8fbf001c 	lw	ra,28(sp)
8000ae00:	03e00008 	jr	ra
8000ae04:	27bd0020 	addiu	sp,sp,32

8000ae08 <sfs_rbuf>:
sfs_rbuf():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:53

int
sfs_rbuf(struct sfs_fs *sfs, void *buf, size_t len, uint32_t blkno,
	 off_t offset)
{
8000ae08:	27bdffc8 	addiu	sp,sp,-56
8000ae0c:	afb10024 	sw	s1,36(sp)
8000ae10:	8fb10048 	lw	s1,72(sp)
8000ae14:	afb3002c 	sw	s3,44(sp)
8000ae18:	afb20028 	sw	s2,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:54
	assert(offset >= 0 && offset < SFS_BLKSIZE
8000ae1c:	2e221000 	sltiu	v0,s1,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:53
}

int
sfs_rbuf(struct sfs_fs *sfs, void *buf, size_t len, uint32_t blkno,
	 off_t offset)
{
8000ae20:	afb00020 	sw	s0,32(sp)
8000ae24:	afbf0034 	sw	ra,52(sp)
8000ae28:	afb40030 	sw	s4,48(sp)
8000ae2c:	00808021 	move	s0,a0
8000ae30:	00a09821 	move	s3,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:54
	assert(offset >= 0 && offset < SFS_BLKSIZE
8000ae34:	10400021 	beqz	v0,8000aebc <sfs_rbuf+0xb4>
8000ae38:	00c09021 	move	s2,a2
8000ae3c:	02261021 	addu	v0,s1,a2
8000ae40:	2c421001 	sltiu	v0,v0,4097
8000ae44:	5040001e 	beqzl	v0,8000aec0 <sfs_rbuf+0xb8>
8000ae48:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:57
	       && offset + len <= SFS_BLKSIZE);
	int ret;
	lock_sfs_io(sfs);
8000ae4c:	0c002c4d 	jal	8000b134 <lock_sfs_io>
8000ae50:	afa70018 	sw	a3,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:59
	{
		if ((ret =
8000ae54:	8fa70018 	lw	a3,24(sp)
8000ae58:	8e050038 	lw	a1,56(s0)
8000ae5c:	24020001 	li	v0,1
8000ae60:	00e03021 	move	a2,a3
8000ae64:	02002021 	move	a0,s0
8000ae68:	00003821 	move	a3,zero
8000ae6c:	0c002b22 	jal	8000ac88 <sfs_rwblock_nolock>
8000ae70:	afa20010 	sw	v0,16(sp)
8000ae74:	14400006 	bnez	v0,8000ae90 <sfs_rbuf+0x88>
8000ae78:	0040a021 	move	s4,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:62
		     sfs_rwblock_nolock(sfs, sfs->sfs_buffer, blkno, 0,
					1)) == 0) {
			memcpy(buf, sfs->sfs_buffer + offset, len);
8000ae7c:	8e050038 	lw	a1,56(s0)
8000ae80:	02602021 	move	a0,s3
8000ae84:	02403021 	move	a2,s2
8000ae88:	0c005c7c 	jal	800171f0 <memcpy>
8000ae8c:	00b12821 	addu	a1,a1,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:65
		}
	}
	unlock_sfs_io(sfs);
8000ae90:	0c002c53 	jal	8000b14c <unlock_sfs_io>
8000ae94:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:67
	return ret;
}
8000ae98:	8fbf0034 	lw	ra,52(sp)
8000ae9c:	02801021 	move	v0,s4
8000aea0:	8fb3002c 	lw	s3,44(sp)
8000aea4:	8fb40030 	lw	s4,48(sp)
8000aea8:	8fb20028 	lw	s2,40(sp)
8000aeac:	8fb10024 	lw	s1,36(sp)
8000aeb0:	8fb00020 	lw	s0,32(sp)
8000aeb4:	03e00008 	jr	ra
8000aeb8:	27bd0038 	addiu	sp,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:54

int
sfs_rbuf(struct sfs_fs *sfs, void *buf, size_t len, uint32_t blkno,
	 off_t offset)
{
	assert(offset >= 0 && offset < SFS_BLKSIZE
8000aebc:	3c048002 	lui	a0,0x8002
8000aec0:	3c068002 	lui	a2,0x8002
8000aec4:	3c078002 	lui	a3,0x8002
8000aec8:	2484244c 	addiu	a0,a0,9292
8000aecc:	24050037 	li	a1,55
8000aed0:	24c60e28 	addiu	a2,a2,3624
8000aed4:	0c006b0b 	jal	8001ac2c <__panic>
8000aed8:	24e7248c 	addiu	a3,a3,9356

8000aedc <sfs_wbuf>:
sfs_wbuf():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:72
}

int
sfs_wbuf(struct sfs_fs *sfs, void *buf, size_t len, uint32_t blkno,
	 off_t offset)
{
8000aedc:	27bdffc0 	addiu	sp,sp,-64
8000aee0:	afb10028 	sw	s1,40(sp)
8000aee4:	8fb10050 	lw	s1,80(sp)
8000aee8:	afb50038 	sw	s5,56(sp)
8000aeec:	afb30030 	sw	s3,48(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:73
	assert(offset >= 0 && offset < SFS_BLKSIZE
8000aef0:	2e221000 	sltiu	v0,s1,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:72
}

int
sfs_wbuf(struct sfs_fs *sfs, void *buf, size_t len, uint32_t blkno,
	 off_t offset)
{
8000aef4:	afb2002c 	sw	s2,44(sp)
8000aef8:	afb00024 	sw	s0,36(sp)
8000aefc:	afbf003c 	sw	ra,60(sp)
8000af00:	afb40034 	sw	s4,52(sp)
8000af04:	00808021 	move	s0,a0
8000af08:	00a0a821 	move	s5,a1
8000af0c:	00c09821 	move	s3,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:73
	assert(offset >= 0 && offset < SFS_BLKSIZE
8000af10:	10400027 	beqz	v0,8000afb0 <sfs_wbuf+0xd4>
8000af14:	00e09021 	move	s2,a3
8000af18:	02261021 	addu	v0,s1,a2
8000af1c:	2c421001 	sltiu	v0,v0,4097
8000af20:	50400024 	beqzl	v0,8000afb4 <sfs_wbuf+0xd8>
8000af24:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:76
	       && offset + len <= SFS_BLKSIZE);
	int ret;
	lock_sfs_io(sfs);
8000af28:	0c002c4d 	jal	8000b134 <lock_sfs_io>
8000af2c:	24140001 	li	s4,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:78
	{
		if ((ret =
8000af30:	8e050038 	lw	a1,56(s0)
8000af34:	02002021 	move	a0,s0
8000af38:	02403021 	move	a2,s2
8000af3c:	00003821 	move	a3,zero
8000af40:	0c002b22 	jal	8000ac88 <sfs_rwblock_nolock>
8000af44:	afb40010 	sw	s4,16(sp)
8000af48:	5440000d 	bnezl	v0,8000af80 <sfs_wbuf+0xa4>
8000af4c:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:81
		     sfs_rwblock_nolock(sfs, sfs->sfs_buffer, blkno, 0,
					1)) == 0) {
			memcpy(sfs->sfs_buffer + offset, buf, len);
8000af50:	8e040038 	lw	a0,56(s0)
8000af54:	02a02821 	move	a1,s5
8000af58:	02603021 	move	a2,s3
8000af5c:	0c005c7c 	jal	800171f0 <memcpy>
8000af60:	00912021 	addu	a0,a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:82
			ret =
8000af64:	8e050038 	lw	a1,56(s0)
8000af68:	02002021 	move	a0,s0
8000af6c:	02403021 	move	a2,s2
8000af70:	24070001 	li	a3,1
8000af74:	0c002b22 	jal	8000ac88 <sfs_rwblock_nolock>
8000af78:	afb40010 	sw	s4,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:87
			    sfs_rwblock_nolock(sfs, sfs->sfs_buffer, blkno, 1,
					       1);
		}
	}
	unlock_sfs_io(sfs);
8000af7c:	02002021 	move	a0,s0
8000af80:	0c002c53 	jal	8000b14c <unlock_sfs_io>
8000af84:	afa20018 	sw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:89
	return ret;
}
8000af88:	8fbf003c 	lw	ra,60(sp)
8000af8c:	8fa20018 	lw	v0,24(sp)
8000af90:	8fb50038 	lw	s5,56(sp)
8000af94:	8fb40034 	lw	s4,52(sp)
8000af98:	8fb30030 	lw	s3,48(sp)
8000af9c:	8fb2002c 	lw	s2,44(sp)
8000afa0:	8fb10028 	lw	s1,40(sp)
8000afa4:	8fb00024 	lw	s0,36(sp)
8000afa8:	03e00008 	jr	ra
8000afac:	27bd0040 	addiu	sp,sp,64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:73

int
sfs_wbuf(struct sfs_fs *sfs, void *buf, size_t len, uint32_t blkno,
	 off_t offset)
{
	assert(offset >= 0 && offset < SFS_BLKSIZE
8000afb0:	3c048002 	lui	a0,0x8002
8000afb4:	3c068002 	lui	a2,0x8002
8000afb8:	3c078002 	lui	a3,0x8002
8000afbc:	2484244c 	addiu	a0,a0,9292
8000afc0:	2405004a 	li	a1,74
8000afc4:	24c60e28 	addiu	a2,a2,3624
8000afc8:	0c006b0b 	jal	8001ac2c <__panic>
8000afcc:	24e7248c 	addiu	a3,a3,9356

8000afd0 <sfs_sync_super>:
sfs_sync_super():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:92
	unlock_sfs_io(sfs);
	return ret;
}

int sfs_sync_super(struct sfs_fs *sfs)
{
8000afd0:	27bdffd8 	addiu	sp,sp,-40
8000afd4:	afb00020 	sw	s0,32(sp)
8000afd8:	afbf0024 	sw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:94
	int ret;
	lock_sfs_io(sfs);
8000afdc:	0c002c4d 	jal	8000b134 <lock_sfs_io>
8000afe0:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:96
	{
		memset(sfs->sfs_buffer, 0, SFS_BLKSIZE);
8000afe4:	8e040038 	lw	a0,56(s0)
8000afe8:	00002821 	move	a1,zero
8000afec:	0c005c52 	jal	80017148 <memset>
8000aff0:	24061000 	li	a2,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:97
		memcpy(sfs->sfs_buffer, &(sfs->super), sizeof(sfs->super));
8000aff4:	8e040038 	lw	a0,56(s0)
8000aff8:	02002821 	move	a1,s0
8000affc:	0c005c7c 	jal	800171f0 <memcpy>
8000b000:	2406002c 	li	a2,44
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:98
		ret =
8000b004:	8e050038 	lw	a1,56(s0)
8000b008:	02002021 	move	a0,s0
8000b00c:	00003021 	move	a2,zero
8000b010:	24070001 	li	a3,1
8000b014:	0c002b22 	jal	8000ac88 <sfs_rwblock_nolock>
8000b018:	afa00010 	sw	zero,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:102
		    sfs_rwblock_nolock(sfs, sfs->sfs_buffer, SFS_BLKN_SUPER, 1,
				       0);
	}
	unlock_sfs_io(sfs);
8000b01c:	02002021 	move	a0,s0
8000b020:	0c002c53 	jal	8000b14c <unlock_sfs_io>
8000b024:	afa20018 	sw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:104
	return ret;
}
8000b028:	8fbf0024 	lw	ra,36(sp)
8000b02c:	8fa20018 	lw	v0,24(sp)
8000b030:	8fb00020 	lw	s0,32(sp)
8000b034:	03e00008 	jr	ra
8000b038:	27bd0028 	addiu	sp,sp,40

8000b03c <sfs_sync_freemap>:
sfs_sync_freemap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:108

int sfs_sync_freemap(struct sfs_fs *sfs)
{
	uint32_t nblks = sfs_freemap_blocks(&(sfs->super));
8000b03c:	8c870004 	lw	a3,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:107
	unlock_sfs_io(sfs);
	return ret;
}

int sfs_sync_freemap(struct sfs_fs *sfs)
{
8000b040:	27bdffe0 	addiu	sp,sp,-32
8000b044:	afb00018 	sw	s0,24(sp)
8000b048:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:109
	uint32_t nblks = sfs_freemap_blocks(&(sfs->super));
	return sfs_wblock(sfs, bitmap_getdata(sfs->freemap, NULL),
8000b04c:	8c840030 	lw	a0,48(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:108
	return ret;
}

int sfs_sync_freemap(struct sfs_fs *sfs)
{
	uint32_t nblks = sfs_freemap_blocks(&(sfs->super));
8000b050:	24e77fff 	addiu	a3,a3,32767
8000b054:	00073bc2 	srl	a3,a3,0xf
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:109
	return sfs_wblock(sfs, bitmap_getdata(sfs->freemap, NULL),
8000b058:	00002821 	move	a1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:107
	unlock_sfs_io(sfs);
	return ret;
}

int sfs_sync_freemap(struct sfs_fs *sfs)
{
8000b05c:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:109
	uint32_t nblks = sfs_freemap_blocks(&(sfs->super));
	return sfs_wblock(sfs, bitmap_getdata(sfs->freemap, NULL),
8000b060:	0c001940 	jal	80006500 <bitmap_getdata>
8000b064:	afa70010 	sw	a3,16(sp)
8000b068:	02002021 	move	a0,s0
8000b06c:	8fa70010 	lw	a3,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:111
			  SFS_BLKN_FREEMAP, nblks);
}
8000b070:	8fbf001c 	lw	ra,28(sp)
8000b074:	8fb00018 	lw	s0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:109
}

int sfs_sync_freemap(struct sfs_fs *sfs)
{
	uint32_t nblks = sfs_freemap_blocks(&(sfs->super));
	return sfs_wblock(sfs, bitmap_getdata(sfs->freemap, NULL),
8000b078:	00402821 	move	a1,v0
8000b07c:	24060002 	li	a2,2
8000b080:	08002b7a 	j	8000ade8 <sfs_wblock>
8000b084:	27bd0020 	addiu	sp,sp,32

8000b088 <sfs_clear_block>:
sfs_clear_block():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:114
			  SFS_BLKN_FREEMAP, nblks);
}

int sfs_clear_block(struct sfs_fs *sfs, uint32_t blkno, uint32_t nblks)
{
8000b088:	27bdffd0 	addiu	sp,sp,-48
8000b08c:	afb1001c 	sw	s1,28(sp)
8000b090:	00808821 	move	s1,a0
8000b094:	afb30024 	sw	s3,36(sp)
8000b098:	afb00018 	sw	s0,24(sp)
8000b09c:	00c09821 	move	s3,a2
8000b0a0:	afbf002c 	sw	ra,44(sp)
8000b0a4:	afb40028 	sw	s4,40(sp)
8000b0a8:	afb20020 	sw	s2,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:116
	int ret;
	lock_sfs_io(sfs);
8000b0ac:	0c002c4d 	jal	8000b134 <lock_sfs_io>
8000b0b0:	00a08021 	move	s0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:118
	{
		memset(sfs->sfs_buffer, 0, SFS_BLKSIZE);
8000b0b4:	8e240038 	lw	a0,56(s1)
8000b0b8:	00002821 	move	a1,zero
8000b0bc:	0c005c52 	jal	80017148 <memset>
8000b0c0:	24061000 	li	a2,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:119
		while (nblks != 0) {
8000b0c4:	1260000e 	beqz	s3,8000b100 <sfs_clear_block+0x78>
8000b0c8:	02709821 	addu	s3,s3,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:120
			if ((ret =
8000b0cc:	08002c37 	j	8000b0dc <sfs_clear_block+0x54>
8000b0d0:	24120001 	li	s2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:119
{
	int ret;
	lock_sfs_io(sfs);
	{
		memset(sfs->sfs_buffer, 0, SFS_BLKSIZE);
		while (nblks != 0) {
8000b0d4:	1213000a 	beq	s0,s3,8000b100 <sfs_clear_block+0x78>
8000b0d8:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:120
			if ((ret =
8000b0dc:	8e250038 	lw	a1,56(s1)
8000b0e0:	02003021 	move	a2,s0
8000b0e4:	02202021 	move	a0,s1
8000b0e8:	24070001 	li	a3,1
8000b0ec:	0c002b22 	jal	8000ac88 <sfs_rwblock_nolock>
8000b0f0:	afb20010 	sw	s2,16(sp)
8000b0f4:	0040a021 	move	s4,v0
8000b0f8:	1040fff6 	beqz	v0,8000b0d4 <sfs_clear_block+0x4c>
8000b0fc:	26100001 	addiu	s0,s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:128
				break;
			}
			blkno++, nblks--;
		}
	}
	unlock_sfs_io(sfs);
8000b100:	0c002c53 	jal	8000b14c <unlock_sfs_io>
8000b104:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_io.c:130
	return ret;
}
8000b108:	8fbf002c 	lw	ra,44(sp)
8000b10c:	02801021 	move	v0,s4
8000b110:	8fb30024 	lw	s3,36(sp)
8000b114:	8fb40028 	lw	s4,40(sp)
8000b118:	8fb20020 	lw	s2,32(sp)
8000b11c:	8fb1001c 	lw	s1,28(sp)
8000b120:	8fb00018 	lw	s0,24(sp)
8000b124:	03e00008 	jr	ra
8000b128:	27bd0030 	addiu	sp,sp,48

8000b12c <lock_sfs_fs>:
lock_sfs_fs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_lock.c:7
#include <sem.h>
#include <sfs.h>

void lock_sfs_fs(struct sfs_fs *sfs)
{
	down(&(sfs->fs_sem));
8000b12c:	0800671f 	j	80019c7c <down>
8000b130:	2484003c 	addiu	a0,a0,60

8000b134 <lock_sfs_io>:
lock_sfs_io():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_lock.c:12
}

void lock_sfs_io(struct sfs_fs *sfs)
{
	down(&(sfs->io_sem));
8000b134:	0800671f 	j	80019c7c <down>
8000b138:	24840050 	addiu	a0,a0,80

8000b13c <lock_sfs_mutex>:
lock_sfs_mutex():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_lock.c:17
}

void lock_sfs_mutex(struct sfs_fs *sfs)
{
	down(&(sfs->mutex_sem));
8000b13c:	0800671f 	j	80019c7c <down>
8000b140:	24840064 	addiu	a0,a0,100

8000b144 <unlock_sfs_fs>:
unlock_sfs_fs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_lock.c:22
}

void unlock_sfs_fs(struct sfs_fs *sfs)
{
	up(&(sfs->fs_sem));
8000b144:	0800671d 	j	80019c74 <up>
8000b148:	2484003c 	addiu	a0,a0,60

8000b14c <unlock_sfs_io>:
unlock_sfs_io():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_lock.c:27
}

void unlock_sfs_io(struct sfs_fs *sfs)
{
	up(&(sfs->io_sem));
8000b14c:	0800671d 	j	80019c74 <up>
8000b150:	24840050 	addiu	a0,a0,80

8000b154 <unlock_sfs_mutex>:
unlock_sfs_mutex():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/sfs_lock.c:32
}

void unlock_sfs_mutex(struct sfs_fs *sfs)
{
	up(&(sfs->mutex_sem));
8000b154:	0800671d 	j	80019c74 <up>
8000b158:	24840064 	addiu	a0,a0,100

8000b15c <get_filemap>:
get_filemap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:21

#define testfd(fd)                          ((fd) >= 0 && (fd) < FS_STRUCT_NENTRY)

static struct file *get_filemap(void)
{
	struct fs_struct *fs_struct = pls_read(current)->fs_struct;
8000b15c:	3c028015 	lui	v0,0x8015
8000b160:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:20
#include <vmm.h>

#define testfd(fd)                          ((fd) >= 0 && (fd) < FS_STRUCT_NENTRY)

static struct file *get_filemap(void)
{
8000b164:	27bdffe8 	addiu	sp,sp,-24
8000b168:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:21
	struct fs_struct *fs_struct = pls_read(current)->fs_struct;
8000b16c:	8c4200bc 	lw	v0,188(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:22
	assert(fs_struct != NULL && fs_count(fs_struct) > 0);
8000b170:	10400007 	beqz	v0,8000b190 <get_filemap+0x34>
8000b174:	3c048002 	lui	a0,0x8002
atomic_read():
 *
 * Atomically reads the value of @v.
 * */
static __always_inline int atomic_read(const atomic_t * v)
{
	return v->counter;
8000b178:	8c430008 	lw	v1,8(v0)
get_filemap():
8000b17c:	18600004 	blez	v1,8000b190 <get_filemap+0x34>
8000b180:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:24
	return fs_struct->filemap;
}
8000b184:	8c420004 	lw	v0,4(v0)
8000b188:	03e00008 	jr	ra
8000b18c:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:22
#define testfd(fd)                          ((fd) >= 0 && (fd) < FS_STRUCT_NENTRY)

static struct file *get_filemap(void)
{
	struct fs_struct *fs_struct = pls_read(current)->fs_struct;
	assert(fs_struct != NULL && fs_count(fs_struct) > 0);
8000b190:	3c068002 	lui	a2,0x8002
8000b194:	3c078002 	lui	a3,0x8002
8000b198:	248424d0 	addiu	a0,a0,9424
8000b19c:	24050016 	li	a1,22
8000b1a0:	24c60e28 	addiu	a2,a2,3624
8000b1a4:	0c006b0b 	jal	8001ac2c <__panic>
8000b1a8:	24e724d8 	addiu	a3,a3,9432

8000b1ac <filemap_alloc>:
filemap_alloc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:37
		file->status = FD_NONE, file->fd = fd;
	}
}

static int filemap_alloc(int fd, struct file **file_store)
{
8000b1ac:	27bdffe0 	addiu	sp,sp,-32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:38
	struct file *file = get_filemap();
8000b1b0:	afa40010 	sw	a0,16(sp)
8000b1b4:	afa50014 	sw	a1,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:37
		file->status = FD_NONE, file->fd = fd;
	}
}

static int filemap_alloc(int fd, struct file **file_store)
{
8000b1b8:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:38
	struct file *file = get_filemap();
8000b1bc:	0c002c57 	jal	8000b15c <get_filemap>
8000b1c0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:39
	if (fd == NO_FD) {
8000b1c4:	8fa40010 	lw	a0,16(sp)
8000b1c8:	3c03ffff 	lui	v1,0xffff
8000b1cc:	24636ad9 	addiu	v1,v1,27353
8000b1d0:	10830014 	beq	a0,v1,8000b224 <filemap_alloc+0x78>
8000b1d4:	8fa50014 	lw	a1,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:47
				goto found;
			}
		}
		return -E_MAX_OPEN;
	} else {
		if (testfd(fd)) {
8000b1d8:	2c830123 	sltiu	v1,a0,291
8000b1dc:	1060001e 	beqz	v1,8000b258 <filemap_alloc+0xac>
8000b1e0:	00041880 	sll	v1,a0,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:48
			file += fd;
8000b1e4:	00042140 	sll	a0,a0,0x5
8000b1e8:	00832023 	subu	a0,a0,v1
8000b1ec:	00442021 	addu	a0,v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:49
			if (file->status == FD_NONE) {
8000b1f0:	8c820000 	lw	v0,0(a0)
8000b1f4:	14400008 	bnez	v0,8000b218 <filemap_alloc+0x6c>
8000b1f8:	2402fff0 	li	v0,-16
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
8000b1fc:	8c820018 	lw	v0,24(a0)
filemap_alloc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:57
			return -E_BUSY;
		}
		return -E_INVAL;
	}
found:
	assert(fopen_count(file) == 0);
8000b200:	14400017 	bnez	v0,8000b260 <filemap_alloc+0xb4>
8000b204:	24020001 	li	v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:58
	file->status = FD_INIT, file->node = NULL;
8000b208:	ac820000 	sw	v0,0(a0)
8000b20c:	ac800014 	sw	zero,20(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:60
	*file_store = file;
	return 0;
8000b210:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:59
		return -E_INVAL;
	}
found:
	assert(fopen_count(file) == 0);
	file->status = FD_INIT, file->node = NULL;
	*file_store = file;
8000b214:	aca40000 	sw	a0,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:61
	return 0;
}
8000b218:	8fbf001c 	lw	ra,28(sp)
8000b21c:	03e00008 	jr	ra
8000b220:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:41
static int filemap_alloc(int fd, struct file **file_store)
{
	struct file *file = get_filemap();
	if (fd == NO_FD) {
		for (fd = 0; fd < FS_STRUCT_NENTRY; fd++, file++) {
			if (file->status == FD_NONE) {
8000b224:	8c430000 	lw	v1,0(v0)
8000b228:	1060fff4 	beqz	v1,8000b1fc <filemap_alloc+0x50>
8000b22c:	00402021 	move	a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:40

static int filemap_alloc(int fd, struct file **file_store)
{
	struct file *file = get_filemap();
	if (fd == NO_FD) {
		for (fd = 0; fd < FS_STRUCT_NENTRY; fd++, file++) {
8000b230:	2444001c 	addiu	a0,v0,28
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:36
		atomic_set(&(file->open_count), 0);
		file->status = FD_NONE, file->fd = fd;
	}
}

static int filemap_alloc(int fd, struct file **file_store)
8000b234:	24421fd4 	addiu	v0,v0,8148
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:41
{
	struct file *file = get_filemap();
	if (fd == NO_FD) {
		for (fd = 0; fd < FS_STRUCT_NENTRY; fd++, file++) {
			if (file->status == FD_NONE) {
8000b238:	8c830000 	lw	v1,0(a0)
8000b23c:	1060ffef 	beqz	v1,8000b1fc <filemap_alloc+0x50>
8000b240:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:40

static int filemap_alloc(int fd, struct file **file_store)
{
	struct file *file = get_filemap();
	if (fd == NO_FD) {
		for (fd = 0; fd < FS_STRUCT_NENTRY; fd++, file++) {
8000b244:	2484001c 	addiu	a0,a0,28
8000b248:	5482fffc 	bnel	a0,v0,8000b23c <filemap_alloc+0x90>
8000b24c:	8c830000 	lw	v1,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:45
			if (file->status == FD_NONE) {
				goto found;
			}
		}
		return -E_MAX_OPEN;
8000b250:	08002c86 	j	8000b218 <filemap_alloc+0x6c>
8000b254:	2402ffe8 	li	v0,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:54
			if (file->status == FD_NONE) {
				goto found;
			}
			return -E_BUSY;
		}
		return -E_INVAL;
8000b258:	08002c86 	j	8000b218 <filemap_alloc+0x6c>
8000b25c:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:57
	}
found:
	assert(fopen_count(file) == 0);
8000b260:	3c048002 	lui	a0,0x8002
8000b264:	3c068002 	lui	a2,0x8002
8000b268:	3c078002 	lui	a3,0x8002
8000b26c:	248424d0 	addiu	a0,a0,9424
8000b270:	24050039 	li	a1,57
8000b274:	24c60e28 	addiu	a2,a2,3624
8000b278:	0c006b0b 	jal	8001ac2c <__panic>
8000b27c:	24e72508 	addiu	a3,a3,9480

8000b280 <filemap_free>:
filemap_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:65
	return 0;
}

static void filemap_free(struct file *file)
{
	assert(file->status == FD_INIT || file->status == FD_CLOSED);
8000b280:	8c820000 	lw	v0,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:64
	*file_store = file;
	return 0;
}

static void filemap_free(struct file *file)
{
8000b284:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:65
	assert(file->status == FD_INIT || file->status == FD_CLOSED);
8000b288:	24030001 	li	v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:64
	*file_store = file;
	return 0;
}

static void filemap_free(struct file *file)
{
8000b28c:	afb00010 	sw	s0,16(sp)
8000b290:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:65
	assert(file->status == FD_INIT || file->status == FD_CLOSED);
8000b294:	10430004 	beq	v0,v1,8000b2a8 <filemap_free+0x28>
8000b298:	00808021 	move	s0,a0
8000b29c:	24030003 	li	v1,3
8000b2a0:	54430019 	bnel	v0,v1,8000b308 <filemap_free+0x88>
8000b2a4:	3c048002 	lui	a0,0x8002
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
8000b2a8:	8e030018 	lw	v1,24(s0)
filemap_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:66
	assert(fopen_count(file) == 0);
8000b2ac:	1460000e 	bnez	v1,8000b2e8 <filemap_free+0x68>
8000b2b0:	24030003 	li	v1,3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:67
	if (file->status == FD_CLOSED) {
8000b2b4:	10430005 	beq	v0,v1,8000b2cc <filemap_free+0x4c>
8000b2b8:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:70
		vfs_close(file->node);
	}
	file->status = FD_NONE;
8000b2bc:	ae000000 	sw	zero,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:71
}
8000b2c0:	8fb00010 	lw	s0,16(sp)
8000b2c4:	03e00008 	jr	ra
8000b2c8:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:68
static void filemap_free(struct file *file)
{
	assert(file->status == FD_INIT || file->status == FD_CLOSED);
	assert(fopen_count(file) == 0);
	if (file->status == FD_CLOSED) {
		vfs_close(file->node);
8000b2cc:	0c0015ae 	jal	800056b8 <vfs_close>
8000b2d0:	8e040014 	lw	a0,20(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:71
	}
	file->status = FD_NONE;
}
8000b2d4:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:70
	assert(file->status == FD_INIT || file->status == FD_CLOSED);
	assert(fopen_count(file) == 0);
	if (file->status == FD_CLOSED) {
		vfs_close(file->node);
	}
	file->status = FD_NONE;
8000b2d8:	ae000000 	sw	zero,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:71
}
8000b2dc:	8fb00010 	lw	s0,16(sp)
8000b2e0:	03e00008 	jr	ra
8000b2e4:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:66
}

static void filemap_free(struct file *file)
{
	assert(file->status == FD_INIT || file->status == FD_CLOSED);
	assert(fopen_count(file) == 0);
8000b2e8:	3c048002 	lui	a0,0x8002
8000b2ec:	3c068002 	lui	a2,0x8002
8000b2f0:	3c078002 	lui	a3,0x8002
8000b2f4:	248424d0 	addiu	a0,a0,9424
8000b2f8:	24050042 	li	a1,66
8000b2fc:	24c60e28 	addiu	a2,a2,3624
8000b300:	0c006b0b 	jal	8001ac2c <__panic>
8000b304:	24e72508 	addiu	a3,a3,9480
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:65
	return 0;
}

static void filemap_free(struct file *file)
{
	assert(file->status == FD_INIT || file->status == FD_CLOSED);
8000b308:	3c068002 	lui	a2,0x8002
8000b30c:	3c078002 	lui	a3,0x8002
8000b310:	248424d0 	addiu	a0,a0,9424
8000b314:	24050041 	li	a1,65
8000b318:	24c60e28 	addiu	a2,a2,3624
8000b31c:	0c006b0b 	jal	8001ac2c <__panic>
8000b320:	24e72520 	addiu	a3,a3,9504

8000b324 <filemap_init>:
filemap_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:30

void filemap_init(struct file *filemap)
{
	int fd;
	struct file *file = filemap;
	for (fd = 0; fd < FS_STRUCT_NENTRY; fd++, file++) {
8000b324:	00001021 	move	v0,zero
8000b328:	24030123 	li	v1,291
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:32
		atomic_set(&(file->open_count), 0);
		file->status = FD_NONE, file->fd = fd;
8000b32c:	ac82000c 	sw	v0,12(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:30

void filemap_init(struct file *filemap)
{
	int fd;
	struct file *file = filemap;
	for (fd = 0; fd < FS_STRUCT_NENTRY; fd++, file++) {
8000b330:	24420001 	addiu	v0,v0,1
atomic_set():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:34
 *
 * Atomically sets the value of @v to @i.
 * */
static __always_inline void atomic_set(atomic_t * v, int i)
{
	v->counter = i;
8000b334:	ac800018 	sw	zero,24(a0)
filemap_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:32
		atomic_set(&(file->open_count), 0);
		file->status = FD_NONE, file->fd = fd;
8000b338:	ac800000 	sw	zero,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:30

void filemap_init(struct file *filemap)
{
	int fd;
	struct file *file = filemap;
	for (fd = 0; fd < FS_STRUCT_NENTRY; fd++, file++) {
8000b33c:	1443fffb 	bne	v0,v1,8000b32c <filemap_init+0x8>
8000b340:	2484001c 	addiu	a0,a0,28
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:34
		atomic_set(&(file->open_count), 0);
		file->status = FD_NONE, file->fd = fd;
	}
}
8000b344:	03e00008 	jr	ra
8000b348:	00000000 	nop

8000b34c <filemap_acquire>:
filemap_acquire():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:75
	file->status = FD_NONE;
}

void filemap_acquire(struct file *file)
{
	assert(file->status == FD_OPENED || file->status == FD_CLOSED);
8000b34c:	8c820000 	lw	v0,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:74
	}
	file->status = FD_NONE;
}

void filemap_acquire(struct file *file)
{
8000b350:	27bdffe0 	addiu	sp,sp,-32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:75
	assert(file->status == FD_OPENED || file->status == FD_CLOSED);
8000b354:	2442fffe 	addiu	v0,v0,-2
8000b358:	2c420002 	sltiu	v0,v0,2
8000b35c:	1040001b 	beqz	v0,8000b3cc <filemap_acquire+0x80>
8000b360:	afbf001c 	sw	ra,28(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8000b364:	40026000 	mfc0	v0,c0_status
8000b368:	30420001 	andi	v0,v0,0x1
8000b36c:	14400009 	bnez	v0,8000b394 <filemap_acquire+0x48>
8000b370:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8000b374:	8c820018 	lw	v0,24(a0)
filemap_acquire():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:77
	fopen_count_inc(file);
}
8000b378:	8fbf001c 	lw	ra,28(sp)
8000b37c:	27bd0020 	addiu	sp,sp,32
fopen_count_inc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
8000b380:	24420001 	addiu	v0,v0,1
8000b384:	ac820018 	sw	v0,24(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
8000b388:	8c820018 	lw	v0,24(a0)
filemap_acquire():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:77
8000b38c:	03e00008 	jr	ra
8000b390:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8000b394:	0c006d04 	jal	8001b410 <intr_disable>
8000b398:	afa40010 	sw	a0,16(sp)
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8000b39c:	8fa40010 	lw	a0,16(sp)
8000b3a0:	8c820018 	lw	v0,24(a0)
8000b3a4:	24420001 	addiu	v0,v0,1
8000b3a8:	ac820018 	sw	v0,24(a0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000b3ac:	0c006d00 	jal	8001b400 <intr_enable>
8000b3b0:	00000000 	nop
8000b3b4:	8fa40010 	lw	a0,16(sp)
filemap_acquire():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:77
8000b3b8:	8fbf001c 	lw	ra,28(sp)
8000b3bc:	27bd0020 	addiu	sp,sp,32
fopen_count_inc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
8000b3c0:	8c820018 	lw	v0,24(a0)
filemap_acquire():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:77
8000b3c4:	03e00008 	jr	ra
8000b3c8:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:75
	file->status = FD_NONE;
}

void filemap_acquire(struct file *file)
{
	assert(file->status == FD_OPENED || file->status == FD_CLOSED);
8000b3cc:	3c048002 	lui	a0,0x8002
8000b3d0:	3c068002 	lui	a2,0x8002
8000b3d4:	3c078002 	lui	a3,0x8002
8000b3d8:	248424d0 	addiu	a0,a0,9424
8000b3dc:	2405004b 	li	a1,75
8000b3e0:	24c60e28 	addiu	a2,a2,3624
8000b3e4:	0c006b0b 	jal	8001ac2c <__panic>
8000b3e8:	24e72558 	addiu	a3,a3,9560

8000b3ec <filemap_release>:
filemap_release():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:81
	fopen_count_inc(file);
}

void filemap_release(struct file *file)
{
	assert(file->status == FD_OPENED || file->status == FD_CLOSED);
8000b3ec:	8c820000 	lw	v0,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:80
	assert(file->status == FD_OPENED || file->status == FD_CLOSED);
	fopen_count_inc(file);
}

void filemap_release(struct file *file)
{
8000b3f0:	27bdffe0 	addiu	sp,sp,-32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:81
	assert(file->status == FD_OPENED || file->status == FD_CLOSED);
8000b3f4:	2442fffe 	addiu	v0,v0,-2
8000b3f8:	2c420002 	sltiu	v0,v0,2
8000b3fc:	10400025 	beqz	v0,8000b494 <filemap_release+0xa8>
8000b400:	afbf001c 	sw	ra,28(sp)
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
 *
 * Atomically reads the value of @v.
 * */
static __always_inline int atomic_read(const atomic_t * v)
{
	return v->counter;
8000b404:	8c820018 	lw	v0,24(a0)
filemap_release():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:82
	assert(fopen_count(file) > 0);
8000b408:	5840001b 	blezl	v0,8000b478 <filemap_release+0x8c>
8000b40c:	3c048002 	lui	a0,0x8002
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8000b410:	40026000 	mfc0	v0,c0_status
8000b414:	30420001 	andi	v0,v0,0x1
8000b418:	14400009 	bnez	v0,8000b440 <filemap_release+0x54>
8000b41c:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8000b420:	8c820018 	lw	v0,24(a0)
8000b424:	2442ffff 	addiu	v0,v0,-1
8000b428:	ac820018 	sw	v0,24(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
8000b42c:	8c820018 	lw	v0,24(a0)
filemap_release():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:83
	if (fopen_count_dec(file) == 0) {
8000b430:	1040000f 	beqz	v0,8000b470 <filemap_release+0x84>
8000b434:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:86
		filemap_free(file);
	}
}
8000b438:	03e00008 	jr	ra
8000b43c:	27bd0020 	addiu	sp,sp,32
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8000b440:	0c006d04 	jal	8001b410 <intr_disable>
8000b444:	afa40010 	sw	a0,16(sp)
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8000b448:	8fa40010 	lw	a0,16(sp)
8000b44c:	8c820018 	lw	v0,24(a0)
8000b450:	2442ffff 	addiu	v0,v0,-1
8000b454:	ac820018 	sw	v0,24(a0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000b458:	0c006d00 	jal	8001b400 <intr_enable>
8000b45c:	00000000 	nop
8000b460:	8fa40010 	lw	a0,16(sp)
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
8000b464:	8c820018 	lw	v0,24(a0)
filemap_release():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:83

void filemap_release(struct file *file)
{
	assert(file->status == FD_OPENED || file->status == FD_CLOSED);
	assert(fopen_count(file) > 0);
	if (fopen_count_dec(file) == 0) {
8000b468:	1440fff3 	bnez	v0,8000b438 <filemap_release+0x4c>
8000b46c:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:84
		filemap_free(file);
8000b470:	08002ca0 	j	8000b280 <filemap_free>
8000b474:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:82
}

void filemap_release(struct file *file)
{
	assert(file->status == FD_OPENED || file->status == FD_CLOSED);
	assert(fopen_count(file) > 0);
8000b478:	3c068002 	lui	a2,0x8002
8000b47c:	3c078002 	lui	a3,0x8002
8000b480:	248424d0 	addiu	a0,a0,9424
8000b484:	24050052 	li	a1,82
8000b488:	24c60e28 	addiu	a2,a2,3624
8000b48c:	0c006b0b 	jal	8001ac2c <__panic>
8000b490:	24e72590 	addiu	a3,a3,9616
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:81
	fopen_count_inc(file);
}

void filemap_release(struct file *file)
{
	assert(file->status == FD_OPENED || file->status == FD_CLOSED);
8000b494:	3c048002 	lui	a0,0x8002
8000b498:	3c068002 	lui	a2,0x8002
8000b49c:	3c078002 	lui	a3,0x8002
8000b4a0:	248424d0 	addiu	a0,a0,9424
8000b4a4:	24050051 	li	a1,81
8000b4a8:	24c60e28 	addiu	a2,a2,3624
8000b4ac:	0c006b0b 	jal	8001ac2c <__panic>
8000b4b0:	24e72558 	addiu	a3,a3,9560

8000b4b4 <filemap_open>:
filemap_open():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:90
	}
}

void filemap_open(struct file *file)
{
	assert((file->status == FD_INIT || file->status == FD_OPENED)
8000b4b4:	8c820000 	lw	v0,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:89
		filemap_free(file);
	}
}

void filemap_open(struct file *file)
{
8000b4b8:	27bdffe0 	addiu	sp,sp,-32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:90
	assert((file->status == FD_INIT || file->status == FD_OPENED)
8000b4bc:	2442ffff 	addiu	v0,v0,-1
8000b4c0:	2c420002 	sltiu	v0,v0,2
8000b4c4:	1040001f 	beqz	v0,8000b544 <filemap_open+0x90>
8000b4c8:	afbf001c 	sw	ra,28(sp)
8000b4cc:	8c820014 	lw	v0,20(a0)
8000b4d0:	1040001c 	beqz	v0,8000b544 <filemap_open+0x90>
8000b4d4:	24020002 	li	v0,2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:92
	       && file->node != NULL);
	file->status = FD_OPENED;
8000b4d8:	ac820000 	sw	v0,0(a0)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8000b4dc:	40026000 	mfc0	v0,c0_status
8000b4e0:	30420001 	andi	v0,v0,0x1
8000b4e4:	14400009 	bnez	v0,8000b50c <filemap_open+0x58>
8000b4e8:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8000b4ec:	8c820018 	lw	v0,24(a0)
filemap_open():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:94
	fopen_count_inc(file);
}
8000b4f0:	8fbf001c 	lw	ra,28(sp)
8000b4f4:	27bd0020 	addiu	sp,sp,32
fopen_count_inc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
8000b4f8:	24420001 	addiu	v0,v0,1
8000b4fc:	ac820018 	sw	v0,24(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
8000b500:	8c820018 	lw	v0,24(a0)
filemap_open():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:94
8000b504:	03e00008 	jr	ra
8000b508:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8000b50c:	0c006d04 	jal	8001b410 <intr_disable>
8000b510:	afa40010 	sw	a0,16(sp)
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8000b514:	8fa40010 	lw	a0,16(sp)
8000b518:	8c820018 	lw	v0,24(a0)
8000b51c:	24420001 	addiu	v0,v0,1
8000b520:	ac820018 	sw	v0,24(a0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000b524:	0c006d00 	jal	8001b400 <intr_enable>
8000b528:	00000000 	nop
8000b52c:	8fa40010 	lw	a0,16(sp)
filemap_open():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:94
8000b530:	8fbf001c 	lw	ra,28(sp)
8000b534:	27bd0020 	addiu	sp,sp,32
fopen_count_inc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
8000b538:	8c820018 	lw	v0,24(a0)
filemap_open():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:94
8000b53c:	03e00008 	jr	ra
8000b540:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:90
	}
}

void filemap_open(struct file *file)
{
	assert((file->status == FD_INIT || file->status == FD_OPENED)
8000b544:	3c048002 	lui	a0,0x8002
8000b548:	3c068002 	lui	a2,0x8002
8000b54c:	3c078002 	lui	a3,0x8002
8000b550:	248424d0 	addiu	a0,a0,9424
8000b554:	2405005b 	li	a1,91
8000b558:	24c60e28 	addiu	a2,a2,3624
8000b55c:	0c006b0b 	jal	8001ac2c <__panic>
8000b560:	24e725a8 	addiu	a3,a3,9640

8000b564 <filemap_close>:
filemap_close():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:98
	fopen_count_inc(file);
}

void filemap_close(struct file *file)
{
	assert(file->status == FD_OPENED);
8000b564:	8c830000 	lw	v1,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:97
	file->status = FD_OPENED;
	fopen_count_inc(file);
}

void filemap_close(struct file *file)
{
8000b568:	27bdffe0 	addiu	sp,sp,-32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:98
	assert(file->status == FD_OPENED);
8000b56c:	24020002 	li	v0,2
8000b570:	14620027 	bne	v1,v0,8000b610 <filemap_close+0xac>
8000b574:	afbf001c 	sw	ra,28(sp)
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
 *
 * Atomically reads the value of @v.
 * */
static __always_inline int atomic_read(const atomic_t * v)
{
	return v->counter;
8000b578:	8c820018 	lw	v0,24(a0)
filemap_close():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:99
	assert(fopen_count(file) > 0);
8000b57c:	1840001c 	blez	v0,8000b5f0 <filemap_close+0x8c>
8000b580:	24020003 	li	v0,3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:100
	file->status = FD_CLOSED;
8000b584:	ac820000 	sw	v0,0(a0)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8000b588:	40026000 	mfc0	v0,c0_status
8000b58c:	30420001 	andi	v0,v0,0x1
8000b590:	14400009 	bnez	v0,8000b5b8 <filemap_close+0x54>
8000b594:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8000b598:	8c820018 	lw	v0,24(a0)
8000b59c:	2442ffff 	addiu	v0,v0,-1
8000b5a0:	ac820018 	sw	v0,24(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
8000b5a4:	8c820018 	lw	v0,24(a0)
filemap_close():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:101
	if (fopen_count_dec(file) == 0) {
8000b5a8:	1040000f 	beqz	v0,8000b5e8 <filemap_close+0x84>
8000b5ac:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:104
		filemap_free(file);
	}
}
8000b5b0:	03e00008 	jr	ra
8000b5b4:	27bd0020 	addiu	sp,sp,32
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8000b5b8:	0c006d04 	jal	8001b410 <intr_disable>
8000b5bc:	afa40010 	sw	a0,16(sp)
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8000b5c0:	8fa40010 	lw	a0,16(sp)
8000b5c4:	8c820018 	lw	v0,24(a0)
8000b5c8:	2442ffff 	addiu	v0,v0,-1
8000b5cc:	ac820018 	sw	v0,24(a0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000b5d0:	0c006d00 	jal	8001b400 <intr_enable>
8000b5d4:	00000000 	nop
8000b5d8:	8fa40010 	lw	a0,16(sp)
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
8000b5dc:	8c820018 	lw	v0,24(a0)
filemap_close():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:101
void filemap_close(struct file *file)
{
	assert(file->status == FD_OPENED);
	assert(fopen_count(file) > 0);
	file->status = FD_CLOSED;
	if (fopen_count_dec(file) == 0) {
8000b5e0:	1440fff3 	bnez	v0,8000b5b0 <filemap_close+0x4c>
8000b5e4:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:102
		filemap_free(file);
8000b5e8:	08002ca0 	j	8000b280 <filemap_free>
8000b5ec:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:99
}

void filemap_close(struct file *file)
{
	assert(file->status == FD_OPENED);
	assert(fopen_count(file) > 0);
8000b5f0:	3c048002 	lui	a0,0x8002
8000b5f4:	3c068002 	lui	a2,0x8002
8000b5f8:	3c078002 	lui	a3,0x8002
8000b5fc:	248424d0 	addiu	a0,a0,9424
8000b600:	24050063 	li	a1,99
8000b604:	24c60e28 	addiu	a2,a2,3624
8000b608:	0c006b0b 	jal	8001ac2c <__panic>
8000b60c:	24e72590 	addiu	a3,a3,9616
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:98
	fopen_count_inc(file);
}

void filemap_close(struct file *file)
{
	assert(file->status == FD_OPENED);
8000b610:	3c048002 	lui	a0,0x8002
8000b614:	3c068002 	lui	a2,0x8002
8000b618:	3c078002 	lui	a3,0x8002
8000b61c:	248424d0 	addiu	a0,a0,9424
8000b620:	24050062 	li	a1,98
8000b624:	24c60e28 	addiu	a2,a2,3624
8000b628:	0c006b0b 	jal	8001ac2c <__panic>
8000b62c:	24e725f8 	addiu	a3,a3,9720

8000b630 <filemap_dup>:
filemap_dup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:108
	}
}

void filemap_dup(struct file *to, struct file *from)
{
	assert(to->status == FD_INIT && from->status == FD_OPENED);
8000b630:	8c820000 	lw	v0,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:107
		filemap_free(file);
	}
}

void filemap_dup(struct file *to, struct file *from)
{
8000b634:	27bdffe0 	addiu	sp,sp,-32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:108
	assert(to->status == FD_INIT && from->status == FD_OPENED);
8000b638:	24030001 	li	v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:107
		filemap_free(file);
	}
}

void filemap_dup(struct file *to, struct file *from)
{
8000b63c:	afb00014 	sw	s0,20(sp)
8000b640:	afbf001c 	sw	ra,28(sp)
8000b644:	afb10018 	sw	s1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:108
	assert(to->status == FD_INIT && from->status == FD_OPENED);
8000b648:	14430017 	bne	v0,v1,8000b6a8 <filemap_dup+0x78>
8000b64c:	00808021 	move	s0,a0
8000b650:	8ca30000 	lw	v1,0(a1)
8000b654:	24020002 	li	v0,2
8000b658:	54620014 	bnel	v1,v0,8000b6ac <filemap_dup+0x7c>
8000b65c:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:112
	to->pos = from->pos;
	to->readable = from->readable;
	to->writable = from->writable;
	struct inode *node = from->node;
8000b660:	8cb10014 	lw	s1,20(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:109
}

void filemap_dup(struct file *to, struct file *from)
{
	assert(to->status == FD_INIT && from->status == FD_OPENED);
	to->pos = from->pos;
8000b664:	8ca40010 	lw	a0,16(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:110
	to->readable = from->readable;
8000b668:	8ca30004 	lw	v1,4(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:111
	to->writable = from->writable;
8000b66c:	8ca20008 	lw	v0,8(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:109
}

void filemap_dup(struct file *to, struct file *from)
{
	assert(to->status == FD_INIT && from->status == FD_OPENED);
	to->pos = from->pos;
8000b670:	ae040010 	sw	a0,16(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:110
	to->readable = from->readable;
8000b674:	ae030004 	sw	v1,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:113
	to->writable = from->writable;
	struct inode *node = from->node;
	vop_ref_inc(node), vop_open_inc(node);
8000b678:	02202021 	move	a0,s1
8000b67c:	0c0010b6 	jal	800042d8 <inode_ref_inc>
8000b680:	ae020008 	sw	v0,8(s0)
8000b684:	0c0010d7 	jal	8000435c <inode_open_inc>
8000b688:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:114
	to->node = node;
8000b68c:	ae110014 	sw	s1,20(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:115
	filemap_open(to);
8000b690:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:116
}
8000b694:	8fbf001c 	lw	ra,28(sp)
8000b698:	8fb10018 	lw	s1,24(sp)
8000b69c:	8fb00014 	lw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:115
	to->readable = from->readable;
	to->writable = from->writable;
	struct inode *node = from->node;
	vop_ref_inc(node), vop_open_inc(node);
	to->node = node;
	filemap_open(to);
8000b6a0:	08002d2d 	j	8000b4b4 <filemap_open>
8000b6a4:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:108
	}
}

void filemap_dup(struct file *to, struct file *from)
{
	assert(to->status == FD_INIT && from->status == FD_OPENED);
8000b6a8:	3c048002 	lui	a0,0x8002
8000b6ac:	3c068002 	lui	a2,0x8002
8000b6b0:	3c078002 	lui	a3,0x8002
8000b6b4:	248424d0 	addiu	a0,a0,9424
8000b6b8:	2405006c 	li	a1,108
8000b6bc:	24c60e28 	addiu	a2,a2,3624
8000b6c0:	0c006b0b 	jal	8001ac2c <__panic>
8000b6c4:	24e72614 	addiu	a3,a3,9748

8000b6c8 <filemap_dup_close>:
filemap_dup_close():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:120
	filemap_open(to);
}

void filemap_dup_close(struct file *to, struct file *from)
{
	assert(to->status == FD_CLOSED && from->status == FD_CLOSED);
8000b6c8:	8c820000 	lw	v0,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:119
	to->node = node;
	filemap_open(to);
}

void filemap_dup_close(struct file *to, struct file *from)
{
8000b6cc:	27bdffe0 	addiu	sp,sp,-32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:120
	assert(to->status == FD_CLOSED && from->status == FD_CLOSED);
8000b6d0:	24030003 	li	v1,3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:119
	to->node = node;
	filemap_open(to);
}

void filemap_dup_close(struct file *to, struct file *from)
{
8000b6d4:	afb00014 	sw	s0,20(sp)
8000b6d8:	afbf001c 	sw	ra,28(sp)
8000b6dc:	afb10018 	sw	s1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:120
	assert(to->status == FD_CLOSED && from->status == FD_CLOSED);
8000b6e0:	14430015 	bne	v0,v1,8000b738 <filemap_dup_close+0x70>
8000b6e4:	00808021 	move	s0,a0
8000b6e8:	8ca30000 	lw	v1,0(a1)
8000b6ec:	54620013 	bnel	v1,v0,8000b73c <filemap_dup_close+0x74>
8000b6f0:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:124
	to->pos = from->pos;
	to->readable = from->readable;
	to->writable = from->writable;
	struct inode *node = from->node;
8000b6f4:	8cb10014 	lw	s1,20(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:121
}

void filemap_dup_close(struct file *to, struct file *from)
{
	assert(to->status == FD_CLOSED && from->status == FD_CLOSED);
	to->pos = from->pos;
8000b6f8:	8ca40010 	lw	a0,16(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:122
	to->readable = from->readable;
8000b6fc:	8ca30004 	lw	v1,4(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:123
	to->writable = from->writable;
8000b700:	8ca20008 	lw	v0,8(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:121
}

void filemap_dup_close(struct file *to, struct file *from)
{
	assert(to->status == FD_CLOSED && from->status == FD_CLOSED);
	to->pos = from->pos;
8000b704:	ae040010 	sw	a0,16(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:122
	to->readable = from->readable;
8000b708:	ae030004 	sw	v1,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:125
	to->writable = from->writable;
	struct inode *node = from->node;
	vop_ref_inc(node), vop_open_inc(node);
8000b70c:	02202021 	move	a0,s1
8000b710:	0c0010b6 	jal	800042d8 <inode_ref_inc>
8000b714:	ae020008 	sw	v0,8(s0)
8000b718:	0c0010d7 	jal	8000435c <inode_open_inc>
8000b71c:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:127
	to->node = node;
}
8000b720:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:126
	to->pos = from->pos;
	to->readable = from->readable;
	to->writable = from->writable;
	struct inode *node = from->node;
	vop_ref_inc(node), vop_open_inc(node);
	to->node = node;
8000b724:	ae110014 	sw	s1,20(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:127
}
8000b728:	8fb10018 	lw	s1,24(sp)
8000b72c:	8fb00014 	lw	s0,20(sp)
8000b730:	03e00008 	jr	ra
8000b734:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:120
	filemap_open(to);
}

void filemap_dup_close(struct file *to, struct file *from)
{
	assert(to->status == FD_CLOSED && from->status == FD_CLOSED);
8000b738:	3c048002 	lui	a0,0x8002
8000b73c:	3c068002 	lui	a2,0x8002
8000b740:	3c078002 	lui	a3,0x8002
8000b744:	248424d0 	addiu	a0,a0,9424
8000b748:	24050078 	li	a1,120
8000b74c:	24c60e28 	addiu	a2,a2,3624
8000b750:	0c006b0b 	jal	8001ac2c <__panic>
8000b754:	24e72648 	addiu	a3,a3,9800

8000b758 <file_testfd>:
file_testfd():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:158
	return NULL;
}
#endif //UCONFIG_BIONIC_LIBC

bool file_testfd(int fd, bool readable, bool writable)
{
8000b758:	27bdffd8 	addiu	sp,sp,-40
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000b75c:	2c820123 	sltiu	v0,a0,291
file_testfd():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:158
	return NULL;
}
#endif //UCONFIG_BIONIC_LIBC

bool file_testfd(int fd, bool readable, bool writable)
{
8000b760:	afb00020 	sw	s0,32(sp)
8000b764:	afbf0024 	sw	ra,36(sp)
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000b768:	10400018 	beqz	v0,8000b7cc <file_testfd+0x74>
8000b76c:	00008021 	move	s0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:132
		struct file *file = get_filemap() + fd;
8000b770:	afa40010 	sw	a0,16(sp)
8000b774:	afa50014 	sw	a1,20(sp)
8000b778:	0c002c57 	jal	8000b15c <get_filemap>
8000b77c:	afa60018 	sw	a2,24(sp)
8000b780:	8fa40010 	lw	a0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:133
		if (file->status == FD_OPENED && file->fd == fd) {
8000b784:	8fa50014 	lw	a1,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:132
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
		struct file *file = get_filemap() + fd;
8000b788:	00043940 	sll	a3,a0,0x5
8000b78c:	00041880 	sll	v1,a0,0x2
8000b790:	00e31823 	subu	v1,a3,v1
8000b794:	00431021 	addu	v0,v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:133
		if (file->status == FD_OPENED && file->fd == fd) {
8000b798:	8c470000 	lw	a3,0(v0)
8000b79c:	24030002 	li	v1,2
8000b7a0:	14e3000a 	bne	a3,v1,8000b7cc <file_testfd+0x74>
8000b7a4:	8fa60018 	lw	a2,24(sp)
8000b7a8:	8c43000c 	lw	v1,12(v0)
8000b7ac:	14830008 	bne	a0,v1,8000b7d0 <file_testfd+0x78>
8000b7b0:	8fbf0024 	lw	ra,36(sp)
file_testfd():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:164
	int ret;
	struct file *file;
	if ((ret = fd2file(fd, &file)) != 0) {
		return 0;
	}
	if (readable && !file->readable) {
8000b7b4:	54a0000a 	bnezl	a1,8000b7e0 <file_testfd+0x88>
8000b7b8:	8c430004 	lw	v1,4(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:167
		return 0;
	}
	if (writable && !file->writable) {
8000b7bc:	10c00003 	beqz	a2,8000b7cc <file_testfd+0x74>
8000b7c0:	24100001 	li	s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:157
	}
	return NULL;
}
#endif //UCONFIG_BIONIC_LIBC

bool file_testfd(int fd, bool readable, bool writable)
8000b7c4:	8c500008 	lw	s0,8(v0)
8000b7c8:	0010802b 	sltu	s0,zero,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:171
	}
	if (writable && !file->writable) {
		return 0;
	}
	return 1;
}
8000b7cc:	8fbf0024 	lw	ra,36(sp)
8000b7d0:	02001021 	move	v0,s0
8000b7d4:	8fb00020 	lw	s0,32(sp)
8000b7d8:	03e00008 	jr	ra
8000b7dc:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:164
	int ret;
	struct file *file;
	if ((ret = fd2file(fd, &file)) != 0) {
		return 0;
	}
	if (readable && !file->readable) {
8000b7e0:	1460fff6 	bnez	v1,8000b7bc <file_testfd+0x64>
8000b7e4:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:171
	}
	if (writable && !file->writable) {
		return 0;
	}
	return 1;
}
8000b7e8:	02001021 	move	v0,s0
8000b7ec:	8fb00020 	lw	s0,32(sp)
8000b7f0:	03e00008 	jr	ra
8000b7f4:	27bd0028 	addiu	sp,sp,40

8000b7f8 <file_open>:
file_open():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:174

int file_open(char *path, uint32_t open_flags)
{
8000b7f8:	27bdffc0 	addiu	sp,sp,-64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:176
	bool readable = 0, writable = 0;
	switch (open_flags & O_ACCMODE) {
8000b7fc:	30a20003 	andi	v0,a1,0x3
8000b800:	24030001 	li	v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:174
	}
	return 1;
}

int file_open(char *path, uint32_t open_flags)
{
8000b804:	afb30034 	sw	s3,52(sp)
8000b808:	afb00028 	sw	s0,40(sp)
8000b80c:	afbf003c 	sw	ra,60(sp)
8000b810:	afb40038 	sw	s4,56(sp)
8000b814:	afb20030 	sw	s2,48(sp)
8000b818:	afb1002c 	sw	s1,44(sp)
8000b81c:	00a08021 	move	s0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:176
	bool readable = 0, writable = 0;
	switch (open_flags & O_ACCMODE) {
8000b820:	10430046 	beq	v0,v1,8000b93c <file_open+0x144>
8000b824:	00809821 	move	s3,a0
8000b828:	14400039 	bnez	v0,8000b910 <file_open+0x118>
8000b82c:	24030002 	li	v1,2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:175
	return 1;
}

int file_open(char *path, uint32_t open_flags)
{
	bool readable = 0, writable = 0;
8000b830:	00008821 	move	s1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:178
	switch (open_flags & O_ACCMODE) {
	case O_RDONLY:
		readable = 1;
8000b834:	24120001 	li	s2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:192
		return -E_INVAL;
	}

	int ret;
	struct file *file;
	if ((ret = filemap_alloc(NO_FD, &file)) != 0) {
8000b838:	3c04ffff 	lui	a0,0xffff
8000b83c:	24846ad9 	addiu	a0,a0,27353
8000b840:	0c002c6b 	jal	8000b1ac <filemap_alloc>
8000b844:	27a50014 	addiu	a1,sp,20
8000b848:	14400033 	bnez	v0,8000b918 <file_open+0x120>
8000b84c:	0040a021 	move	s4,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:197
		return ret;
	}

	struct inode *node;
	if ((ret = vfs_open(path, open_flags, &node)) != 0) {
8000b850:	02602021 	move	a0,s3
8000b854:	02002821 	move	a1,s0
8000b858:	0c001512 	jal	80005448 <vfs_open>
8000b85c:	27a60010 	addiu	a2,sp,16
8000b860:	0040a021 	move	s4,v0
8000b864:	1440003e 	bnez	v0,8000b960 <file_open+0x168>
8000b868:	8fa40014 	lw	a0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:203
		filemap_free(file);
		return ret;
	}

	file->pos = 0;
	if (open_flags & O_APPEND) {
8000b86c:	32100400 	andi	s0,s0,0x400
8000b870:	12000017 	beqz	s0,8000b8d0 <file_open+0xd8>
8000b874:	ac800010 	sw	zero,16(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:205
		struct stat __stat, *stat = &__stat;
		if ((ret = vop_fstat(node, stat)) != 0) {
8000b878:	8fb00010 	lw	s0,16(sp)
8000b87c:	1200003c 	beqz	s0,8000b970 <file_open+0x178>
8000b880:	3c048002 	lui	a0,0x8002
8000b884:	8e020048 	lw	v0,72(s0)
8000b888:	1040003a 	beqz	v0,8000b974 <file_open+0x17c>
8000b88c:	3c068002 	lui	a2,0x8002
8000b890:	8c420014 	lw	v0,20(v0)
8000b894:	10400036 	beqz	v0,8000b970 <file_open+0x178>
8000b898:	3c058002 	lui	a1,0x8002
8000b89c:	02002021 	move	a0,s0
8000b8a0:	0c0010f3 	jal	800043cc <inode_check>
8000b8a4:	24a526d0 	addiu	a1,a1,9936
8000b8a8:	8e020048 	lw	v0,72(s0)
8000b8ac:	8fa40010 	lw	a0,16(sp)
8000b8b0:	8c420014 	lw	v0,20(v0)
8000b8b4:	0040f809 	jalr	v0
8000b8b8:	27a50018 	addiu	a1,sp,24
8000b8bc:	14400025 	bnez	v0,8000b954 <file_open+0x15c>
8000b8c0:	0040a021 	move	s4,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:210
			vfs_close(node);
			filemap_free(file);
			return ret;
		}
		file->pos = stat->st_size;
8000b8c4:	8fa40014 	lw	a0,20(sp)
8000b8c8:	8fa20024 	lw	v0,36(sp)
8000b8cc:	ac820010 	sw	v0,16(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:213
	}

	file->node = node;
8000b8d0:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:214
	file->readable = readable;
8000b8d4:	ac920004 	sw	s2,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:215
	file->writable = writable;
8000b8d8:	ac910008 	sw	s1,8(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:216
	filemap_open(file);
8000b8dc:	0c002d2d 	jal	8000b4b4 <filemap_open>
8000b8e0:	ac820014 	sw	v0,20(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:217
	return file->fd;
8000b8e4:	8fa20014 	lw	v0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:218
}
8000b8e8:	8fbf003c 	lw	ra,60(sp)
8000b8ec:	8fb30034 	lw	s3,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:217

	file->node = node;
	file->readable = readable;
	file->writable = writable;
	filemap_open(file);
	return file->fd;
8000b8f0:	8c54000c 	lw	s4,12(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:218
}
8000b8f4:	8fb20030 	lw	s2,48(sp)
8000b8f8:	8fb1002c 	lw	s1,44(sp)
8000b8fc:	02801021 	move	v0,s4
8000b900:	8fb00028 	lw	s0,40(sp)
8000b904:	8fb40038 	lw	s4,56(sp)
8000b908:	03e00008 	jr	ra
8000b90c:	27bd0040 	addiu	sp,sp,64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:176
}

int file_open(char *path, uint32_t open_flags)
{
	bool readable = 0, writable = 0;
	switch (open_flags & O_ACCMODE) {
8000b910:	1043000d 	beq	v0,v1,8000b948 <file_open+0x150>
8000b914:	2414ffea 	li	s4,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:218
	file->node = node;
	file->readable = readable;
	file->writable = writable;
	filemap_open(file);
	return file->fd;
}
8000b918:	8fbf003c 	lw	ra,60(sp)
8000b91c:	02801021 	move	v0,s4
8000b920:	8fb30034 	lw	s3,52(sp)
8000b924:	8fb40038 	lw	s4,56(sp)
8000b928:	8fb20030 	lw	s2,48(sp)
8000b92c:	8fb1002c 	lw	s1,44(sp)
8000b930:	8fb00028 	lw	s0,40(sp)
8000b934:	03e00008 	jr	ra
8000b938:	27bd0040 	addiu	sp,sp,64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:181
	switch (open_flags & O_ACCMODE) {
	case O_RDONLY:
		readable = 1;
		break;
	case O_WRONLY:
		writable = 1;
8000b93c:	24110001 	li	s1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:175
	return 1;
}

int file_open(char *path, uint32_t open_flags)
{
	bool readable = 0, writable = 0;
8000b940:	08002e0e 	j	8000b838 <file_open+0x40>
8000b944:	00009021 	move	s2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:184
		break;
	case O_WRONLY:
		writable = 1;
		break;
	case O_RDWR:
		readable = writable = 1;
8000b948:	24110001 	li	s1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:185
		break;
8000b94c:	08002e0e 	j	8000b838 <file_open+0x40>
8000b950:	24120001 	li	s2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:206

	file->pos = 0;
	if (open_flags & O_APPEND) {
		struct stat __stat, *stat = &__stat;
		if ((ret = vop_fstat(node, stat)) != 0) {
			vfs_close(node);
8000b954:	0c0015ae 	jal	800056b8 <vfs_close>
8000b958:	8fa40010 	lw	a0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:207
			filemap_free(file);
8000b95c:	8fa40014 	lw	a0,20(sp)
8000b960:	0c002ca0 	jal	8000b280 <filemap_free>
8000b964:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:208
			return ret;
8000b968:	08002e47 	j	8000b91c <file_open+0x124>
8000b96c:	8fbf003c 	lw	ra,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:205
	}

	file->pos = 0;
	if (open_flags & O_APPEND) {
		struct stat __stat, *stat = &__stat;
		if ((ret = vop_fstat(node, stat)) != 0) {
8000b970:	3c068002 	lui	a2,0x8002
8000b974:	3c078002 	lui	a3,0x8002
8000b978:	248424d0 	addiu	a0,a0,9424
8000b97c:	240500cd 	li	a1,205
8000b980:	24c60e28 	addiu	a2,a2,3624
8000b984:	0c006b0b 	jal	8001ac2c <__panic>
8000b988:	24e72680 	addiu	a3,a3,9856

8000b98c <file_close>:
file_close():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:221
	filemap_open(file);
	return file->fd;
}

int file_close(int fd)
{
8000b98c:	27bdffe0 	addiu	sp,sp,-32
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000b990:	2c820123 	sltiu	v0,a0,291
file_close():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:221
	filemap_open(file);
	return file->fd;
}

int file_close(int fd)
{
8000b994:	afb10018 	sw	s1,24(sp)
8000b998:	afb00014 	sw	s0,20(sp)
8000b99c:	afbf001c 	sw	ra,28(sp)
8000b9a0:	00808021 	move	s0,a0
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000b9a4:	10400010 	beqz	v0,8000b9e8 <file_close+0x5c>
8000b9a8:	2411ffea 	li	s1,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:132
		struct file *file = get_filemap() + fd;
8000b9ac:	0c002c57 	jal	8000b15c <get_filemap>
8000b9b0:	00000000 	nop
8000b9b4:	00101940 	sll	v1,s0,0x5
8000b9b8:	00102080 	sll	a0,s0,0x2
8000b9bc:	00642023 	subu	a0,v1,a0
8000b9c0:	00442021 	addu	a0,v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:133
		if (file->status == FD_OPENED && file->fd == fd) {
8000b9c4:	8c830000 	lw	v1,0(a0)
8000b9c8:	24020002 	li	v0,2
8000b9cc:	14620007 	bne	v1,v0,8000b9ec <file_close+0x60>
8000b9d0:	8fbf001c 	lw	ra,28(sp)
8000b9d4:	8c82000c 	lw	v0,12(a0)
8000b9d8:	16020005 	bne	s0,v0,8000b9f0 <file_close+0x64>
8000b9dc:	02201021 	move	v0,s1
file_close():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:227
	int ret;
	struct file *file;
	if ((ret = fd2file(fd, &file)) != 0) {
		return ret;
	}
	filemap_close(file);
8000b9e0:	0c002d59 	jal	8000b564 <filemap_close>
8000b9e4:	00008821 	move	s1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:229
	return 0;
}
8000b9e8:	8fbf001c 	lw	ra,28(sp)
8000b9ec:	02201021 	move	v0,s1
8000b9f0:	8fb00014 	lw	s0,20(sp)
8000b9f4:	8fb10018 	lw	s1,24(sp)
8000b9f8:	03e00008 	jr	ra
8000b9fc:	27bd0020 	addiu	sp,sp,32

8000ba00 <file_read>:
file_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:232

int file_read(int fd, void *base, size_t len, size_t * copied_store)
{
8000ba00:	27bdffb8 	addiu	sp,sp,-72
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000ba04:	2c820123 	sltiu	v0,a0,291
file_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:232
	filemap_close(file);
	return 0;
}

int file_read(int fd, void *base, size_t len, size_t * copied_store)
{
8000ba08:	afb10034 	sw	s1,52(sp)
8000ba0c:	afbf0044 	sw	ra,68(sp)
8000ba10:	afb40040 	sw	s4,64(sp)
8000ba14:	afb3003c 	sw	s3,60(sp)
8000ba18:	afb20038 	sw	s2,56(sp)
8000ba1c:	afb00030 	sw	s0,48(sp)
8000ba20:	00e08821 	move	s1,a3
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000ba24:	10400040 	beqz	v0,8000bb28 <file_read+0x128>
8000ba28:	ace00000 	sw	zero,0(a3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:132
		struct file *file = get_filemap() + fd;
8000ba2c:	afa40020 	sw	a0,32(sp)
8000ba30:	afa50024 	sw	a1,36(sp)
8000ba34:	0c002c57 	jal	8000b15c <get_filemap>
8000ba38:	afa60028 	sw	a2,40(sp)
8000ba3c:	8fa40020 	lw	a0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:133
		if (file->status == FD_OPENED && file->fd == fd) {
8000ba40:	8fa50024 	lw	a1,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:132
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
		struct file *file = get_filemap() + fd;
8000ba44:	00048080 	sll	s0,a0,0x2
8000ba48:	00041940 	sll	v1,a0,0x5
8000ba4c:	00708023 	subu	s0,v1,s0
8000ba50:	00508021 	addu	s0,v0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:133
		if (file->status == FD_OPENED && file->fd == fd) {
8000ba54:	8e120000 	lw	s2,0(s0)
8000ba58:	24020002 	li	v0,2
8000ba5c:	16420032 	bne	s2,v0,8000bb28 <file_read+0x128>
8000ba60:	8fa60028 	lw	a2,40(sp)
8000ba64:	8e02000c 	lw	v0,12(s0)
8000ba68:	14820030 	bne	a0,v0,8000bb2c <file_read+0x12c>
8000ba6c:	8fbf0044 	lw	ra,68(sp)
file_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:239
	struct file *file;
	*copied_store = 0;
	if ((ret = fd2file(fd, &file)) != 0) {
		return ret;
	}
	if (!file->readable) {
8000ba70:	8e020004 	lw	v0,4(s0)
8000ba74:	1040002d 	beqz	v0,8000bb2c <file_read+0x12c>
8000ba78:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:242
		return -E_INVAL;
	}
	filemap_acquire(file);
8000ba7c:	afa50024 	sw	a1,36(sp)
8000ba80:	0c002cd3 	jal	8000b34c <filemap_acquire>
8000ba84:	afa60028 	sw	a2,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:244

	struct iobuf __iob, *iob = iobuf_init(&__iob, base, len, file->pos);
8000ba88:	8e070010 	lw	a3,16(s0)
8000ba8c:	8fa50024 	lw	a1,36(sp)
8000ba90:	8fa60028 	lw	a2,40(sp)
8000ba94:	0c003348 	jal	8000cd20 <iobuf_init>
8000ba98:	27a40010 	addiu	a0,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:245
	ret = vop_read(file->node, iob);
8000ba9c:	8e140014 	lw	s4,20(s0)
8000baa0:	1280002e 	beqz	s4,8000bb5c <file_read+0x15c>
8000baa4:	00409821 	move	s3,v0
8000baa8:	8e820048 	lw	v0,72(s4)
8000baac:	1040002c 	beqz	v0,8000bb60 <file_read+0x160>
8000bab0:	3c048002 	lui	a0,0x8002
8000bab4:	8c42000c 	lw	v0,12(v0)
8000bab8:	10400029 	beqz	v0,8000bb60 <file_read+0x160>
8000babc:	3c058002 	lui	a1,0x8002
8000bac0:	02802021 	move	a0,s4
8000bac4:	0c0010f3 	jal	800043cc <inode_check>
8000bac8:	24a52728 	addiu	a1,a1,10024
8000bacc:	8e820048 	lw	v0,72(s4)
8000bad0:	8e040014 	lw	a0,20(s0)
8000bad4:	8c42000c 	lw	v0,12(v0)
8000bad8:	0040f809 	jalr	v0
8000badc:	02602821 	move	a1,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:247

	size_t copied = iobuf_used(iob);
8000bae0:	8e650008 	lw	a1,8(s3)
8000bae4:	8e63000c 	lw	v1,12(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:248
	if (file->status == FD_OPENED) {
8000bae8:	8e040000 	lw	a0,0(s0)
8000baec:	10920017 	beq	a0,s2,8000bb4c <file_read+0x14c>
8000baf0:	00a31823 	subu	v1,a1,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:251
		file->pos += copied;
	}
	*copied_store = copied;
8000baf4:	ae230000 	sw	v1,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:252
	filemap_release(file);
8000baf8:	02002021 	move	a0,s0
8000bafc:	0c002cfb 	jal	8000b3ec <filemap_release>
8000bb00:	afa20020 	sw	v0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:254
	return ret;
}
8000bb04:	8fbf0044 	lw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:253
	if (file->status == FD_OPENED) {
		file->pos += copied;
	}
	*copied_store = copied;
	filemap_release(file);
	return ret;
8000bb08:	8fa20020 	lw	v0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:254
}
8000bb0c:	8fb40040 	lw	s4,64(sp)
8000bb10:	8fb3003c 	lw	s3,60(sp)
8000bb14:	8fb20038 	lw	s2,56(sp)
8000bb18:	8fb10034 	lw	s1,52(sp)
8000bb1c:	8fb00030 	lw	s0,48(sp)
8000bb20:	03e00008 	jr	ra
8000bb24:	27bd0048 	addiu	sp,sp,72
8000bb28:	8fbf0044 	lw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:240
	*copied_store = 0;
	if ((ret = fd2file(fd, &file)) != 0) {
		return ret;
	}
	if (!file->readable) {
		return -E_INVAL;
8000bb2c:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:254
		file->pos += copied;
	}
	*copied_store = copied;
	filemap_release(file);
	return ret;
}
8000bb30:	8fb40040 	lw	s4,64(sp)
8000bb34:	8fb3003c 	lw	s3,60(sp)
8000bb38:	8fb20038 	lw	s2,56(sp)
8000bb3c:	8fb10034 	lw	s1,52(sp)
8000bb40:	8fb00030 	lw	s0,48(sp)
8000bb44:	03e00008 	jr	ra
8000bb48:	27bd0048 	addiu	sp,sp,72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:249
	struct iobuf __iob, *iob = iobuf_init(&__iob, base, len, file->pos);
	ret = vop_read(file->node, iob);

	size_t copied = iobuf_used(iob);
	if (file->status == FD_OPENED) {
		file->pos += copied;
8000bb4c:	8e040010 	lw	a0,16(s0)
8000bb50:	00832021 	addu	a0,a0,v1
8000bb54:	08002ebd 	j	8000baf4 <file_read+0xf4>
8000bb58:	ae040010 	sw	a0,16(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:245
		return -E_INVAL;
	}
	filemap_acquire(file);

	struct iobuf __iob, *iob = iobuf_init(&__iob, base, len, file->pos);
	ret = vop_read(file->node, iob);
8000bb5c:	3c048002 	lui	a0,0x8002
8000bb60:	3c068002 	lui	a2,0x8002
8000bb64:	3c078002 	lui	a3,0x8002
8000bb68:	248424d0 	addiu	a0,a0,9424
8000bb6c:	240500f5 	li	a1,245
8000bb70:	24c60e28 	addiu	a2,a2,3624
8000bb74:	0c006b0b 	jal	8001ac2c <__panic>
8000bb78:	24e726d8 	addiu	a3,a3,9944

8000bb7c <file_write>:
file_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:257
	filemap_release(file);
	return ret;
}

int file_write(int fd, void *base, size_t len, size_t * copied_store)
{
8000bb7c:	27bdffb8 	addiu	sp,sp,-72
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000bb80:	2c820123 	sltiu	v0,a0,291
file_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:257
	filemap_release(file);
	return ret;
}

int file_write(int fd, void *base, size_t len, size_t * copied_store)
{
8000bb84:	afb10034 	sw	s1,52(sp)
8000bb88:	afbf0044 	sw	ra,68(sp)
8000bb8c:	afb40040 	sw	s4,64(sp)
8000bb90:	afb3003c 	sw	s3,60(sp)
8000bb94:	afb20038 	sw	s2,56(sp)
8000bb98:	afb00030 	sw	s0,48(sp)
8000bb9c:	00e08821 	move	s1,a3
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000bba0:	10400040 	beqz	v0,8000bca4 <file_write+0x128>
8000bba4:	ace00000 	sw	zero,0(a3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:132
		struct file *file = get_filemap() + fd;
8000bba8:	afa40020 	sw	a0,32(sp)
8000bbac:	afa50024 	sw	a1,36(sp)
8000bbb0:	0c002c57 	jal	8000b15c <get_filemap>
8000bbb4:	afa60028 	sw	a2,40(sp)
8000bbb8:	8fa40020 	lw	a0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:133
		if (file->status == FD_OPENED && file->fd == fd) {
8000bbbc:	8fa50024 	lw	a1,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:132
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
		struct file *file = get_filemap() + fd;
8000bbc0:	00048080 	sll	s0,a0,0x2
8000bbc4:	00041940 	sll	v1,a0,0x5
8000bbc8:	00708023 	subu	s0,v1,s0
8000bbcc:	00508021 	addu	s0,v0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:133
		if (file->status == FD_OPENED && file->fd == fd) {
8000bbd0:	8e120000 	lw	s2,0(s0)
8000bbd4:	24020002 	li	v0,2
8000bbd8:	16420032 	bne	s2,v0,8000bca4 <file_write+0x128>
8000bbdc:	8fa60028 	lw	a2,40(sp)
8000bbe0:	8e02000c 	lw	v0,12(s0)
8000bbe4:	14820030 	bne	a0,v0,8000bca8 <file_write+0x12c>
8000bbe8:	8fbf0044 	lw	ra,68(sp)
file_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:264
	struct file *file;
	*copied_store = 0;
	if ((ret = fd2file(fd, &file)) != 0) {
		return ret;
	}
	if (!file->writable) {
8000bbec:	8e020008 	lw	v0,8(s0)
8000bbf0:	1040002d 	beqz	v0,8000bca8 <file_write+0x12c>
8000bbf4:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:267
		return -E_INVAL;
	}
	filemap_acquire(file);
8000bbf8:	afa50024 	sw	a1,36(sp)
8000bbfc:	0c002cd3 	jal	8000b34c <filemap_acquire>
8000bc00:	afa60028 	sw	a2,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:269

	struct iobuf __iob, *iob = iobuf_init(&__iob, base, len, file->pos);
8000bc04:	8e070010 	lw	a3,16(s0)
8000bc08:	8fa50024 	lw	a1,36(sp)
8000bc0c:	8fa60028 	lw	a2,40(sp)
8000bc10:	0c003348 	jal	8000cd20 <iobuf_init>
8000bc14:	27a40010 	addiu	a0,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:270
	ret = vop_write(file->node, iob);
8000bc18:	8e140014 	lw	s4,20(s0)
8000bc1c:	1280002e 	beqz	s4,8000bcd8 <file_write+0x15c>
8000bc20:	00409821 	move	s3,v0
8000bc24:	8e820048 	lw	v0,72(s4)
8000bc28:	1040002c 	beqz	v0,8000bcdc <file_write+0x160>
8000bc2c:	3c048002 	lui	a0,0x8002
8000bc30:	8c420010 	lw	v0,16(v0)
8000bc34:	10400029 	beqz	v0,8000bcdc <file_write+0x160>
8000bc38:	3c058002 	lui	a1,0x8002
8000bc3c:	02802021 	move	a0,s4
8000bc40:	0c0010f3 	jal	800043cc <inode_check>
8000bc44:	24a52780 	addiu	a1,a1,10112
8000bc48:	8e820048 	lw	v0,72(s4)
8000bc4c:	8e040014 	lw	a0,20(s0)
8000bc50:	8c420010 	lw	v0,16(v0)
8000bc54:	0040f809 	jalr	v0
8000bc58:	02602821 	move	a1,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:272

	size_t copied = iobuf_used(iob);
8000bc5c:	8e650008 	lw	a1,8(s3)
8000bc60:	8e63000c 	lw	v1,12(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:273
	if (file->status == FD_OPENED) {
8000bc64:	8e040000 	lw	a0,0(s0)
8000bc68:	10920017 	beq	a0,s2,8000bcc8 <file_write+0x14c>
8000bc6c:	00a31823 	subu	v1,a1,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:276
		file->pos += copied;
	}
	*copied_store = copied;
8000bc70:	ae230000 	sw	v1,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:277
	filemap_release(file);
8000bc74:	02002021 	move	a0,s0
8000bc78:	0c002cfb 	jal	8000b3ec <filemap_release>
8000bc7c:	afa20020 	sw	v0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:279
	return ret;
}
8000bc80:	8fbf0044 	lw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:278
	if (file->status == FD_OPENED) {
		file->pos += copied;
	}
	*copied_store = copied;
	filemap_release(file);
	return ret;
8000bc84:	8fa20020 	lw	v0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:279
}
8000bc88:	8fb40040 	lw	s4,64(sp)
8000bc8c:	8fb3003c 	lw	s3,60(sp)
8000bc90:	8fb20038 	lw	s2,56(sp)
8000bc94:	8fb10034 	lw	s1,52(sp)
8000bc98:	8fb00030 	lw	s0,48(sp)
8000bc9c:	03e00008 	jr	ra
8000bca0:	27bd0048 	addiu	sp,sp,72
8000bca4:	8fbf0044 	lw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:265
	*copied_store = 0;
	if ((ret = fd2file(fd, &file)) != 0) {
		return ret;
	}
	if (!file->writable) {
		return -E_INVAL;
8000bca8:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:279
		file->pos += copied;
	}
	*copied_store = copied;
	filemap_release(file);
	return ret;
}
8000bcac:	8fb40040 	lw	s4,64(sp)
8000bcb0:	8fb3003c 	lw	s3,60(sp)
8000bcb4:	8fb20038 	lw	s2,56(sp)
8000bcb8:	8fb10034 	lw	s1,52(sp)
8000bcbc:	8fb00030 	lw	s0,48(sp)
8000bcc0:	03e00008 	jr	ra
8000bcc4:	27bd0048 	addiu	sp,sp,72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:274
	struct iobuf __iob, *iob = iobuf_init(&__iob, base, len, file->pos);
	ret = vop_write(file->node, iob);

	size_t copied = iobuf_used(iob);
	if (file->status == FD_OPENED) {
		file->pos += copied;
8000bcc8:	8e040010 	lw	a0,16(s0)
8000bccc:	00832021 	addu	a0,a0,v1
8000bcd0:	08002f1c 	j	8000bc70 <file_write+0xf4>
8000bcd4:	ae040010 	sw	a0,16(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:270
		return -E_INVAL;
	}
	filemap_acquire(file);

	struct iobuf __iob, *iob = iobuf_init(&__iob, base, len, file->pos);
	ret = vop_write(file->node, iob);
8000bcd8:	3c048002 	lui	a0,0x8002
8000bcdc:	3c068002 	lui	a2,0x8002
8000bce0:	3c078002 	lui	a3,0x8002
8000bce4:	248424d0 	addiu	a0,a0,9424
8000bce8:	2405010e 	li	a1,270
8000bcec:	24c60e28 	addiu	a2,a2,3624
8000bcf0:	0c006b0b 	jal	8001ac2c <__panic>
8000bcf4:	24e72730 	addiu	a3,a3,10032

8000bcf8 <file_seek>:
file_seek():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:282
	filemap_release(file);
	return ret;
}

int file_seek(int fd, off_t pos, int whence)
{
8000bcf8:	27bdffc0 	addiu	sp,sp,-64
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000bcfc:	2c820123 	sltiu	v0,a0,291
file_seek():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:282
	filemap_release(file);
	return ret;
}

int file_seek(int fd, off_t pos, int whence)
{
8000bd00:	afb30034 	sw	s3,52(sp)
8000bd04:	afb1002c 	sw	s1,44(sp)
8000bd08:	afb00028 	sw	s0,40(sp)
8000bd0c:	afbf003c 	sw	ra,60(sp)
8000bd10:	afb40038 	sw	s4,56(sp)
8000bd14:	afb20030 	sw	s2,48(sp)
8000bd18:	00808821 	move	s1,a0
8000bd1c:	00a08021 	move	s0,a1
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000bd20:	10400035 	beqz	v0,8000bdf8 <file_seek+0x100>
8000bd24:	00c09821 	move	s3,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:132
		struct file *file = get_filemap() + fd;
8000bd28:	0c002c57 	jal	8000b15c <get_filemap>
8000bd2c:	00119080 	sll	s2,s1,0x2
8000bd30:	00111940 	sll	v1,s1,0x5
8000bd34:	00729023 	subu	s2,v1,s2
8000bd38:	00529021 	addu	s2,v0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:133
		if (file->status == FD_OPENED && file->fd == fd) {
8000bd3c:	8e540000 	lw	s4,0(s2)
8000bd40:	24020002 	li	v0,2
8000bd44:	1682002d 	bne	s4,v0,8000bdfc <file_seek+0x104>
8000bd48:	8fbf003c 	lw	ra,60(sp)
8000bd4c:	8e42000c 	lw	v0,12(s2)
8000bd50:	1622002b 	bne	s1,v0,8000be00 <file_seek+0x108>
8000bd54:	2402ffea 	li	v0,-22
file_seek():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:289
	int ret;
	struct file *file;
	if ((ret = fd2file(fd, &file)) != 0) {
		return ret;
	}
	filemap_acquire(file);
8000bd58:	0c002cd3 	jal	8000b34c <filemap_acquire>
8000bd5c:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:291

	switch (whence) {
8000bd60:	24020001 	li	v0,1
8000bd64:	52620042 	beql	s3,v0,8000be70 <file_seek+0x178>
8000bd68:	8e420010 	lw	v0,16(s2)
8000bd6c:	5274002b 	beql	s3,s4,8000be1c <file_seek+0x124>
8000bd70:	8e510014 	lw	s1,20(s2)
8000bd74:	16600014 	bnez	s3,8000bdc8 <file_seek+0xd0>
8000bd78:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:307
	default:
		ret = -E_INVAL;
	}

	if (ret == 0) {
		if ((ret = vop_tryseek(file->node, pos)) == 0) {
8000bd7c:	8e510014 	lw	s1,20(s2)
8000bd80:	1220003d 	beqz	s1,8000be78 <file_seek+0x180>
8000bd84:	3c048002 	lui	a0,0x8002
8000bd88:	8e220048 	lw	v0,72(s1)
8000bd8c:	1040003b 	beqz	v0,8000be7c <file_seek+0x184>
8000bd90:	3c068002 	lui	a2,0x8002
8000bd94:	8c420044 	lw	v0,68(v0)
8000bd98:	10400037 	beqz	v0,8000be78 <file_seek+0x180>
8000bd9c:	3c058002 	lui	a1,0x8002
8000bda0:	02202021 	move	a0,s1
8000bda4:	0c0010f3 	jal	800043cc <inode_check>
8000bda8:	24a527d8 	addiu	a1,a1,10200
8000bdac:	8e220048 	lw	v0,72(s1)
8000bdb0:	8e440014 	lw	a0,20(s2)
8000bdb4:	8c420044 	lw	v0,68(v0)
8000bdb8:	0040f809 	jalr	v0
8000bdbc:	02002821 	move	a1,s0
8000bdc0:	50400001 	beqzl	v0,8000bdc8 <file_seek+0xd0>
8000bdc4:	ae500010 	sw	s0,16(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:311
			file->pos = pos;
		}
	}
	filemap_release(file);
8000bdc8:	02402021 	move	a0,s2
8000bdcc:	0c002cfb 	jal	8000b3ec <filemap_release>
8000bdd0:	afa20020 	sw	v0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:313
	return ret;
}
8000bdd4:	8fbf003c 	lw	ra,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:312
		if ((ret = vop_tryseek(file->node, pos)) == 0) {
			file->pos = pos;
		}
	}
	filemap_release(file);
	return ret;
8000bdd8:	8fa20020 	lw	v0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:313
}
8000bddc:	8fb40038 	lw	s4,56(sp)
8000bde0:	8fb30034 	lw	s3,52(sp)
8000bde4:	8fb20030 	lw	s2,48(sp)
8000bde8:	8fb1002c 	lw	s1,44(sp)
8000bdec:	8fb00028 	lw	s0,40(sp)
8000bdf0:	03e00008 	jr	ra
8000bdf4:	27bd0040 	addiu	sp,sp,64
8000bdf8:	8fbf003c 	lw	ra,60(sp)
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:133

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
		struct file *file = get_filemap() + fd;
		if (file->status == FD_OPENED && file->fd == fd) {
8000bdfc:	2402ffea 	li	v0,-22
file_seek():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:313
			file->pos = pos;
		}
	}
	filemap_release(file);
	return ret;
}
8000be00:	8fb40038 	lw	s4,56(sp)
8000be04:	8fb30034 	lw	s3,52(sp)
8000be08:	8fb20030 	lw	s2,48(sp)
8000be0c:	8fb1002c 	lw	s1,44(sp)
8000be10:	8fb00028 	lw	s0,40(sp)
8000be14:	03e00008 	jr	ra
8000be18:	27bd0040 	addiu	sp,sp,64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:298
		break;
	case LSEEK_CUR:
		pos += file->pos;
		break;
	case LSEEK_END:
		if ((ret = vop_fstat(file->node, stat)) == 0) {
8000be1c:	1220001d 	beqz	s1,8000be94 <file_seek+0x19c>
8000be20:	3c048002 	lui	a0,0x8002
8000be24:	8e220048 	lw	v0,72(s1)
8000be28:	1040001b 	beqz	v0,8000be98 <file_seek+0x1a0>
8000be2c:	3c068002 	lui	a2,0x8002
8000be30:	8c420014 	lw	v0,20(v0)
8000be34:	10400017 	beqz	v0,8000be94 <file_seek+0x19c>
8000be38:	3c058002 	lui	a1,0x8002
8000be3c:	02202021 	move	a0,s1
8000be40:	0c0010f3 	jal	800043cc <inode_check>
8000be44:	24a526d0 	addiu	a1,a1,9936
8000be48:	8e220048 	lw	v0,72(s1)
8000be4c:	8e440014 	lw	a0,20(s2)
8000be50:	8c420014 	lw	v0,20(v0)
8000be54:	0040f809 	jalr	v0
8000be58:	27a50010 	addiu	a1,sp,16
8000be5c:	5440ffdb 	bnezl	v0,8000bdcc <file_seek+0xd4>
8000be60:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:299
			pos += stat->st_size;
8000be64:	8fa2001c 	lw	v0,28(sp)
8000be68:	08002f5f 	j	8000bd7c <file_seek+0x84>
8000be6c:	02028021 	addu	s0,s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:296
	switch (whence) {
	case LSEEK_SET:
		break;
	case LSEEK_CUR:
		pos += file->pos;
		break;
8000be70:	08002f5f 	j	8000bd7c <file_seek+0x84>
8000be74:	02028021 	addu	s0,s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:307
	default:
		ret = -E_INVAL;
	}

	if (ret == 0) {
		if ((ret = vop_tryseek(file->node, pos)) == 0) {
8000be78:	3c068002 	lui	a2,0x8002
8000be7c:	3c078002 	lui	a3,0x8002
8000be80:	248424d0 	addiu	a0,a0,9424
8000be84:	24050133 	li	a1,307
8000be88:	24c60e28 	addiu	a2,a2,3624
8000be8c:	0c006b0b 	jal	8001ac2c <__panic>
8000be90:	24e72788 	addiu	a3,a3,10120
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:298
		break;
	case LSEEK_CUR:
		pos += file->pos;
		break;
	case LSEEK_END:
		if ((ret = vop_fstat(file->node, stat)) == 0) {
8000be94:	3c068002 	lui	a2,0x8002
8000be98:	3c078002 	lui	a3,0x8002
8000be9c:	248424d0 	addiu	a0,a0,9424
8000bea0:	2405012a 	li	a1,298
8000bea4:	24c60e28 	addiu	a2,a2,3624
8000bea8:	0c006b0b 	jal	8001ac2c <__panic>
8000beac:	24e72680 	addiu	a3,a3,9856

8000beb0 <file_fstat>:
file_fstat():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:316
	filemap_release(file);
	return ret;
}

int file_fstat(int fd, struct stat *stat)
{
8000beb0:	27bdffd8 	addiu	sp,sp,-40
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000beb4:	2c820123 	sltiu	v0,a0,291
file_fstat():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:316
	filemap_release(file);
	return ret;
}

int file_fstat(int fd, struct stat *stat)
{
8000beb8:	afb1001c 	sw	s1,28(sp)
8000bebc:	afbf0024 	sw	ra,36(sp)
8000bec0:	afb20020 	sw	s2,32(sp)
8000bec4:	afb00018 	sw	s0,24(sp)
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000bec8:	1040002c 	beqz	v0,8000bf7c <file_fstat+0xcc>
8000becc:	00a08821 	move	s1,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:132
		struct file *file = get_filemap() + fd;
8000bed0:	0c002c57 	jal	8000b15c <get_filemap>
8000bed4:	afa40010 	sw	a0,16(sp)
8000bed8:	8fa40010 	lw	a0,16(sp)
8000bedc:	00041940 	sll	v1,a0,0x5
8000bee0:	00048080 	sll	s0,a0,0x2
8000bee4:	00708023 	subu	s0,v1,s0
8000bee8:	00508021 	addu	s0,v0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:133
		if (file->status == FD_OPENED && file->fd == fd) {
8000beec:	8e030000 	lw	v1,0(s0)
8000bef0:	24020002 	li	v0,2
8000bef4:	14620022 	bne	v1,v0,8000bf80 <file_fstat+0xd0>
8000bef8:	8fbf0024 	lw	ra,36(sp)
8000befc:	8e02000c 	lw	v0,12(s0)
8000bf00:	14820020 	bne	a0,v0,8000bf84 <file_fstat+0xd4>
8000bf04:	2402ffea 	li	v0,-22
file_fstat():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:322
	int ret;
	struct file *file;
	if ((ret = fd2file(fd, &file)) != 0) {
		return ret;
	}
	filemap_acquire(file);
8000bf08:	0c002cd3 	jal	8000b34c <filemap_acquire>
8000bf0c:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:323
	ret = vop_fstat(file->node, stat);
8000bf10:	8e120014 	lw	s2,20(s0)
8000bf14:	12400020 	beqz	s2,8000bf98 <file_fstat+0xe8>
8000bf18:	3c048002 	lui	a0,0x8002
8000bf1c:	8e420048 	lw	v0,72(s2)
8000bf20:	1040001e 	beqz	v0,8000bf9c <file_fstat+0xec>
8000bf24:	3c068002 	lui	a2,0x8002
8000bf28:	8c420014 	lw	v0,20(v0)
8000bf2c:	1040001a 	beqz	v0,8000bf98 <file_fstat+0xe8>
8000bf30:	3c058002 	lui	a1,0x8002
8000bf34:	02402021 	move	a0,s2
8000bf38:	0c0010f3 	jal	800043cc <inode_check>
8000bf3c:	24a526d0 	addiu	a1,a1,9936
8000bf40:	8e420048 	lw	v0,72(s2)
8000bf44:	8e040014 	lw	a0,20(s0)
8000bf48:	8c420014 	lw	v0,20(v0)
8000bf4c:	0040f809 	jalr	v0
8000bf50:	02202821 	move	a1,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:324
	filemap_release(file);
8000bf54:	02002021 	move	a0,s0
8000bf58:	0c002cfb 	jal	8000b3ec <filemap_release>
8000bf5c:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:326
	return ret;
}
8000bf60:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:325
		return ret;
	}
	filemap_acquire(file);
	ret = vop_fstat(file->node, stat);
	filemap_release(file);
	return ret;
8000bf64:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:326
}
8000bf68:	8fb20020 	lw	s2,32(sp)
8000bf6c:	8fb1001c 	lw	s1,28(sp)
8000bf70:	8fb00018 	lw	s0,24(sp)
8000bf74:	03e00008 	jr	ra
8000bf78:	27bd0028 	addiu	sp,sp,40
8000bf7c:	8fbf0024 	lw	ra,36(sp)
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:133

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
		struct file *file = get_filemap() + fd;
		if (file->status == FD_OPENED && file->fd == fd) {
8000bf80:	2402ffea 	li	v0,-22
file_fstat():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:326
	}
	filemap_acquire(file);
	ret = vop_fstat(file->node, stat);
	filemap_release(file);
	return ret;
}
8000bf84:	8fb20020 	lw	s2,32(sp)
8000bf88:	8fb1001c 	lw	s1,28(sp)
8000bf8c:	8fb00018 	lw	s0,24(sp)
8000bf90:	03e00008 	jr	ra
8000bf94:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:323
	struct file *file;
	if ((ret = fd2file(fd, &file)) != 0) {
		return ret;
	}
	filemap_acquire(file);
	ret = vop_fstat(file->node, stat);
8000bf98:	3c068002 	lui	a2,0x8002
8000bf9c:	3c078002 	lui	a3,0x8002
8000bfa0:	248424d0 	addiu	a0,a0,9424
8000bfa4:	24050143 	li	a1,323
8000bfa8:	24c60e28 	addiu	a2,a2,3624
8000bfac:	0c006b0b 	jal	8001ac2c <__panic>
8000bfb0:	24e72680 	addiu	a3,a3,9856

8000bfb4 <file_fsync>:
file_fsync():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:329
	filemap_release(file);
	return ret;
}

int file_fsync(int fd)
{
8000bfb4:	27bdffd8 	addiu	sp,sp,-40
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000bfb8:	2c820123 	sltiu	v0,a0,291
file_fsync():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:329
	filemap_release(file);
	return ret;
}

int file_fsync(int fd)
{
8000bfbc:	afbf0024 	sw	ra,36(sp)
8000bfc0:	afb10020 	sw	s1,32(sp)
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000bfc4:	1040002a 	beqz	v0,8000c070 <file_fsync+0xbc>
8000bfc8:	afb0001c 	sw	s0,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:132
		struct file *file = get_filemap() + fd;
8000bfcc:	0c002c57 	jal	8000b15c <get_filemap>
8000bfd0:	afa40010 	sw	a0,16(sp)
8000bfd4:	8fa40010 	lw	a0,16(sp)
8000bfd8:	00041940 	sll	v1,a0,0x5
8000bfdc:	00048080 	sll	s0,a0,0x2
8000bfe0:	00708023 	subu	s0,v1,s0
8000bfe4:	00508021 	addu	s0,v0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:133
		if (file->status == FD_OPENED && file->fd == fd) {
8000bfe8:	8e030000 	lw	v1,0(s0)
8000bfec:	24020002 	li	v0,2
8000bff0:	14620020 	bne	v1,v0,8000c074 <file_fsync+0xc0>
8000bff4:	8fbf0024 	lw	ra,36(sp)
8000bff8:	8e02000c 	lw	v0,12(s0)
8000bffc:	1482001e 	bne	a0,v0,8000c078 <file_fsync+0xc4>
8000c000:	2402ffea 	li	v0,-22
file_fsync():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:335
	int ret;
	struct file *file;
	if ((ret = fd2file(fd, &file)) != 0) {
		return ret;
	}
	filemap_acquire(file);
8000c004:	0c002cd3 	jal	8000b34c <filemap_acquire>
8000c008:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:336
	ret = vop_fsync(file->node);
8000c00c:	8e110014 	lw	s1,20(s0)
8000c010:	5220001e 	beqzl	s1,8000c08c <file_fsync+0xd8>
8000c014:	3c048002 	lui	a0,0x8002
8000c018:	8e220048 	lw	v0,72(s1)
8000c01c:	5040001b 	beqzl	v0,8000c08c <file_fsync+0xd8>
8000c020:	3c048002 	lui	a0,0x8002
8000c024:	8c420018 	lw	v0,24(v0)
8000c028:	10400017 	beqz	v0,8000c088 <file_fsync+0xd4>
8000c02c:	3c058002 	lui	a1,0x8002
8000c030:	02202021 	move	a0,s1
8000c034:	0c0010f3 	jal	800043cc <inode_check>
8000c038:	24a51fb4 	addiu	a1,a1,8116
8000c03c:	8e220048 	lw	v0,72(s1)
8000c040:	8c420018 	lw	v0,24(v0)
8000c044:	0040f809 	jalr	v0
8000c048:	8e040014 	lw	a0,20(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:337
	filemap_release(file);
8000c04c:	02002021 	move	a0,s0
8000c050:	0c002cfb 	jal	8000b3ec <filemap_release>
8000c054:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:339
	return ret;
}
8000c058:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:338
		return ret;
	}
	filemap_acquire(file);
	ret = vop_fsync(file->node);
	filemap_release(file);
	return ret;
8000c05c:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:339
}
8000c060:	8fb10020 	lw	s1,32(sp)
8000c064:	8fb0001c 	lw	s0,28(sp)
8000c068:	03e00008 	jr	ra
8000c06c:	27bd0028 	addiu	sp,sp,40
8000c070:	8fbf0024 	lw	ra,36(sp)
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:133

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
		struct file *file = get_filemap() + fd;
		if (file->status == FD_OPENED && file->fd == fd) {
8000c074:	2402ffea 	li	v0,-22
file_fsync():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:339
	}
	filemap_acquire(file);
	ret = vop_fsync(file->node);
	filemap_release(file);
	return ret;
}
8000c078:	8fb10020 	lw	s1,32(sp)
8000c07c:	8fb0001c 	lw	s0,28(sp)
8000c080:	03e00008 	jr	ra
8000c084:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:336
	struct file *file;
	if ((ret = fd2file(fd, &file)) != 0) {
		return ret;
	}
	filemap_acquire(file);
	ret = vop_fsync(file->node);
8000c088:	3c048002 	lui	a0,0x8002
8000c08c:	3c068002 	lui	a2,0x8002
8000c090:	3c078002 	lui	a3,0x8002
8000c094:	248424d0 	addiu	a0,a0,9424
8000c098:	24050150 	li	a1,336
8000c09c:	24c60e28 	addiu	a2,a2,3624
8000c0a0:	0c006b0b 	jal	8001ac2c <__panic>
8000c0a4:	24e71f64 	addiu	a3,a3,8036

8000c0a8 <file_getdirentry>:
file_getdirentry():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:342
	filemap_release(file);
	return ret;
}

int file_getdirentry(int fd, struct dirent *direntp)
{
8000c0a8:	27bdffc0 	addiu	sp,sp,-64
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000c0ac:	2c820123 	sltiu	v0,a0,291
file_getdirentry():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:342
	filemap_release(file);
	return ret;
}

int file_getdirentry(int fd, struct dirent *direntp)
{
8000c0b0:	afb10030 	sw	s1,48(sp)
8000c0b4:	afbf003c 	sw	ra,60(sp)
8000c0b8:	afb30038 	sw	s3,56(sp)
8000c0bc:	afb20034 	sw	s2,52(sp)
8000c0c0:	afb0002c 	sw	s0,44(sp)
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000c0c4:	10400034 	beqz	v0,8000c198 <file_getdirentry+0xf0>
8000c0c8:	00a08821 	move	s1,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:132
		struct file *file = get_filemap() + fd;
8000c0cc:	0c002c57 	jal	8000b15c <get_filemap>
8000c0d0:	afa40020 	sw	a0,32(sp)
8000c0d4:	8fa40020 	lw	a0,32(sp)
8000c0d8:	00041940 	sll	v1,a0,0x5
8000c0dc:	00048080 	sll	s0,a0,0x2
8000c0e0:	00708023 	subu	s0,v1,s0
8000c0e4:	00508021 	addu	s0,v0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:133
		if (file->status == FD_OPENED && file->fd == fd) {
8000c0e8:	8e030000 	lw	v1,0(s0)
8000c0ec:	24020002 	li	v0,2
8000c0f0:	1462002a 	bne	v1,v0,8000c19c <file_getdirentry+0xf4>
8000c0f4:	8fbf003c 	lw	ra,60(sp)
8000c0f8:	8e02000c 	lw	v0,12(s0)
8000c0fc:	14820028 	bne	a0,v0,8000c1a0 <file_getdirentry+0xf8>
8000c100:	2402ffea 	li	v0,-22
file_getdirentry():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:348
	int ret;
	struct file *file;
	if ((ret = fd2file(fd, &file)) != 0) {
		return ret;
	}
	filemap_acquire(file);
8000c104:	0c002cd3 	jal	8000b34c <filemap_acquire>
8000c108:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:350

	struct iobuf __iob, *iob =
8000c10c:	8e270004 	lw	a3,4(s1)
8000c110:	27a40010 	addiu	a0,sp,16
8000c114:	2625000a 	addiu	a1,s1,10
8000c118:	0c003348 	jal	8000cd20 <iobuf_init>
8000c11c:	24060100 	li	a2,256
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:353
	    iobuf_init(&__iob, direntp->d_name, sizeof(direntp->d_name),
		       direntp->d_off);
	if ((ret = vop_getdirentry(file->node, iob)) == 0) {
8000c120:	8e130014 	lw	s3,20(s0)
8000c124:	1260002a 	beqz	s3,8000c1d0 <file_getdirentry+0x128>
8000c128:	00409021 	move	s2,v0
8000c12c:	8e620048 	lw	v0,72(s3)
8000c130:	10400028 	beqz	v0,8000c1d4 <file_getdirentry+0x12c>
8000c134:	3c048002 	lui	a0,0x8002
8000c138:	8c420034 	lw	v0,52(v0)
8000c13c:	10400025 	beqz	v0,8000c1d4 <file_getdirentry+0x12c>
8000c140:	3c058002 	lui	a1,0x8002
8000c144:	02602021 	move	a0,s3
8000c148:	0c0010f3 	jal	800043cc <inode_check>
8000c14c:	24a52834 	addiu	a1,a1,10292
8000c150:	8e620048 	lw	v0,72(s3)
8000c154:	8e040014 	lw	a0,20(s0)
8000c158:	8c420034 	lw	v0,52(v0)
8000c15c:	0040f809 	jalr	v0
8000c160:	02402821 	move	a1,s2
8000c164:	50400014 	beqzl	v0,8000c1b8 <file_getdirentry+0x110>
8000c168:	8e450008 	lw	a1,8(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:356
		direntp->d_off += iobuf_used(iob);
	}
	filemap_release(file);
8000c16c:	02002021 	move	a0,s0
8000c170:	0c002cfb 	jal	8000b3ec <filemap_release>
8000c174:	afa20020 	sw	v0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:358
	return ret;
}
8000c178:	8fbf003c 	lw	ra,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:357
		       direntp->d_off);
	if ((ret = vop_getdirentry(file->node, iob)) == 0) {
		direntp->d_off += iobuf_used(iob);
	}
	filemap_release(file);
	return ret;
8000c17c:	8fa20020 	lw	v0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:358
}
8000c180:	8fb30038 	lw	s3,56(sp)
8000c184:	8fb20034 	lw	s2,52(sp)
8000c188:	8fb10030 	lw	s1,48(sp)
8000c18c:	8fb0002c 	lw	s0,44(sp)
8000c190:	03e00008 	jr	ra
8000c194:	27bd0040 	addiu	sp,sp,64
8000c198:	8fbf003c 	lw	ra,60(sp)
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:133

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
		struct file *file = get_filemap() + fd;
		if (file->status == FD_OPENED && file->fd == fd) {
8000c19c:	2402ffea 	li	v0,-22
file_getdirentry():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:358
	if ((ret = vop_getdirentry(file->node, iob)) == 0) {
		direntp->d_off += iobuf_used(iob);
	}
	filemap_release(file);
	return ret;
}
8000c1a0:	8fb30038 	lw	s3,56(sp)
8000c1a4:	8fb20034 	lw	s2,52(sp)
8000c1a8:	8fb10030 	lw	s1,48(sp)
8000c1ac:	8fb0002c 	lw	s0,44(sp)
8000c1b0:	03e00008 	jr	ra
8000c1b4:	27bd0040 	addiu	sp,sp,64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:354

	struct iobuf __iob, *iob =
	    iobuf_init(&__iob, direntp->d_name, sizeof(direntp->d_name),
		       direntp->d_off);
	if ((ret = vop_getdirentry(file->node, iob)) == 0) {
		direntp->d_off += iobuf_used(iob);
8000c1b8:	8e230004 	lw	v1,4(s1)
8000c1bc:	8e44000c 	lw	a0,12(s2)
8000c1c0:	00a31821 	addu	v1,a1,v1
8000c1c4:	00641823 	subu	v1,v1,a0
8000c1c8:	0800305b 	j	8000c16c <file_getdirentry+0xc4>
8000c1cc:	ae230004 	sw	v1,4(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:353
	filemap_acquire(file);

	struct iobuf __iob, *iob =
	    iobuf_init(&__iob, direntp->d_name, sizeof(direntp->d_name),
		       direntp->d_off);
	if ((ret = vop_getdirentry(file->node, iob)) == 0) {
8000c1d0:	3c048002 	lui	a0,0x8002
8000c1d4:	3c068002 	lui	a2,0x8002
8000c1d8:	3c078002 	lui	a3,0x8002
8000c1dc:	248424d0 	addiu	a0,a0,9424
8000c1e0:	24050161 	li	a1,353
8000c1e4:	24c60e28 	addiu	a2,a2,3624
8000c1e8:	0c006b0b 	jal	8001ac2c <__panic>
8000c1ec:	24e727e0 	addiu	a3,a3,10208

8000c1f0 <file_dup>:
file_dup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:361
	filemap_release(file);
	return ret;
}

int file_dup(int fd1, int fd2)
{
8000c1f0:	27bdffd0 	addiu	sp,sp,-48
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000c1f4:	2c820123 	sltiu	v0,a0,291
file_dup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:361
	filemap_release(file);
	return ret;
}

int file_dup(int fd1, int fd2)
{
8000c1f8:	afb20028 	sw	s2,40(sp)
8000c1fc:	afb10024 	sw	s1,36(sp)
8000c200:	afbf002c 	sw	ra,44(sp)
8000c204:	afb00020 	sw	s0,32(sp)
8000c208:	00808821 	move	s1,a0
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000c20c:	10400012 	beqz	v0,8000c258 <file_dup+0x68>
8000c210:	2412ffea 	li	s2,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:132
		struct file *file = get_filemap() + fd;
8000c214:	afa50018 	sw	a1,24(sp)
8000c218:	0c002c57 	jal	8000b15c <get_filemap>
8000c21c:	00118080 	sll	s0,s1,0x2
8000c220:	00111940 	sll	v1,s1,0x5
8000c224:	00708023 	subu	s0,v1,s0
8000c228:	00508021 	addu	s0,v0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:133
		if (file->status == FD_OPENED && file->fd == fd) {
8000c22c:	8e030000 	lw	v1,0(s0)
8000c230:	24020002 	li	v0,2
8000c234:	14620008 	bne	v1,v0,8000c258 <file_dup+0x68>
8000c238:	8fa50018 	lw	a1,24(sp)
8000c23c:	8e02000c 	lw	v0,12(s0)
8000c240:	16220005 	bne	s1,v0,8000c258 <file_dup+0x68>
8000c244:	00a02021 	move	a0,a1
file_dup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:367
	int ret;
	struct file *file1, *file2;
	if ((ret = fd2file(fd1, &file1)) != 0) {
		return ret;
	}
	if ((ret = filemap_alloc(fd2, &file2)) != 0) {
8000c248:	0c002c6b 	jal	8000b1ac <filemap_alloc>
8000c24c:	27a50010 	addiu	a1,sp,16
8000c250:	10400008 	beqz	v0,8000c274 <file_dup+0x84>
8000c254:	00409021 	move	s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:372
		return ret;
	}
	filemap_dup(file2, file1);
	return file2->fd;
}
8000c258:	8fbf002c 	lw	ra,44(sp)
8000c25c:	02401021 	move	v0,s2
8000c260:	8fb10024 	lw	s1,36(sp)
8000c264:	8fb20028 	lw	s2,40(sp)
8000c268:	8fb00020 	lw	s0,32(sp)
8000c26c:	03e00008 	jr	ra
8000c270:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:370
		return ret;
	}
	if ((ret = filemap_alloc(fd2, &file2)) != 0) {
		return ret;
	}
	filemap_dup(file2, file1);
8000c274:	8fa40010 	lw	a0,16(sp)
8000c278:	0c002d8c 	jal	8000b630 <filemap_dup>
8000c27c:	02002821 	move	a1,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:371
	return file2->fd;
8000c280:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:372
}
8000c284:	8fbf002c 	lw	ra,44(sp)
8000c288:	8fb10024 	lw	s1,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:371
	}
	if ((ret = filemap_alloc(fd2, &file2)) != 0) {
		return ret;
	}
	filemap_dup(file2, file1);
	return file2->fd;
8000c28c:	8c52000c 	lw	s2,12(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:372
}
8000c290:	8fb00020 	lw	s0,32(sp)
8000c294:	02401021 	move	v0,s2
8000c298:	8fb20028 	lw	s2,40(sp)
8000c29c:	03e00008 	jr	ra
8000c2a0:	27bd0030 	addiu	sp,sp,48

8000c2a4 <file_pipe>:
file_pipe():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:375

int file_pipe(int fd[])
{
8000c2a4:	27bdffd0 	addiu	sp,sp,-48
8000c2a8:	afb00024 	sw	s0,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:378
	int ret;
	struct file *file[2] = { NULL, NULL };
	if ((ret = filemap_alloc(NO_FD, &file[0])) != 0) {
8000c2ac:	3c10ffff 	lui	s0,0xffff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:375
	filemap_dup(file2, file1);
	return file2->fd;
}

int file_pipe(int fd[])
{
8000c2b0:	afb10028 	sw	s1,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:378
	int ret;
	struct file *file[2] = { NULL, NULL };
	if ((ret = filemap_alloc(NO_FD, &file[0])) != 0) {
8000c2b4:	27a50010 	addiu	a1,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:375
	filemap_dup(file2, file1);
	return file2->fd;
}

int file_pipe(int fd[])
{
8000c2b8:	00808821 	move	s1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:378
	int ret;
	struct file *file[2] = { NULL, NULL };
	if ((ret = filemap_alloc(NO_FD, &file[0])) != 0) {
8000c2bc:	26046ad9 	addiu	a0,s0,27353
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:375
	filemap_dup(file2, file1);
	return file2->fd;
}

int file_pipe(int fd[])
{
8000c2c0:	afbf002c 	sw	ra,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:377
	int ret;
	struct file *file[2] = { NULL, NULL };
8000c2c4:	afa00010 	sw	zero,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:378
	if ((ret = filemap_alloc(NO_FD, &file[0])) != 0) {
8000c2c8:	0c002c6b 	jal	8000b1ac <filemap_alloc>
8000c2cc:	afa00014 	sw	zero,20(sp)
8000c2d0:	10400012 	beqz	v0,8000c31c <file_pipe+0x78>
8000c2d4:	36046ad9 	ori	a0,s0,0x6ad9
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:400

	fd[0] = file[0]->fd, fd[1] = file[1]->fd;
	return 0;

failed_cleanup:
	if (file[0] != NULL) {
8000c2d8:	8fa40010 	lw	a0,16(sp)
8000c2dc:	50800005 	beqzl	a0,8000c2f4 <file_pipe+0x50>
8000c2e0:	8fa40014 	lw	a0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:401
		filemap_free(file[0]);
8000c2e4:	0c002ca0 	jal	8000b280 <filemap_free>
8000c2e8:	afa20018 	sw	v0,24(sp)
8000c2ec:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:403
	}
	if (file[1] != NULL) {
8000c2f0:	8fa40014 	lw	a0,20(sp)
8000c2f4:	10800005 	beqz	a0,8000c30c <file_pipe+0x68>
8000c2f8:	8fbf002c 	lw	ra,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:404
		filemap_free(file[1]);
8000c2fc:	0c002ca0 	jal	8000b280 <filemap_free>
8000c300:	afa20018 	sw	v0,24(sp)
8000c304:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:407
	}
	return ret;
}
8000c308:	8fbf002c 	lw	ra,44(sp)
8000c30c:	8fb10028 	lw	s1,40(sp)
8000c310:	8fb00024 	lw	s0,36(sp)
8000c314:	03e00008 	jr	ra
8000c318:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:381
	int ret;
	struct file *file[2] = { NULL, NULL };
	if ((ret = filemap_alloc(NO_FD, &file[0])) != 0) {
		goto failed_cleanup;
	}
	if ((ret = filemap_alloc(NO_FD, &file[1])) != 0) {
8000c31c:	0c002c6b 	jal	8000b1ac <filemap_alloc>
8000c320:	27a50014 	addiu	a1,sp,20
8000c324:	1440ffed 	bnez	v0,8000c2dc <file_pipe+0x38>
8000c328:	8fa40010 	lw	a0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:385
		goto failed_cleanup;
	}

	if ((ret = pipe_open(&(file[0]->node), &(file[1]->node))) != 0) {
8000c32c:	8fa50014 	lw	a1,20(sp)
8000c330:	24840014 	addiu	a0,a0,20
8000c334:	0c000d72 	jal	800035c8 <pipe_open>
8000c338:	24a50014 	addiu	a1,a1,20
8000c33c:	1440ffe7 	bnez	v0,8000c2dc <file_pipe+0x38>
8000c340:	8fa40010 	lw	a0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:388
		goto failed_cleanup;
	}
	file[0]->pos = 0;
8000c344:	8fa30010 	lw	v1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:389
	file[0]->readable = 1, file[0]->writable = 0;
8000c348:	24100001 	li	s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:390
	filemap_open(file[0]);
8000c34c:	00602021 	move	a0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:388
	}

	if ((ret = pipe_open(&(file[0]->node), &(file[1]->node))) != 0) {
		goto failed_cleanup;
	}
	file[0]->pos = 0;
8000c350:	ac600010 	sw	zero,16(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:389
	file[0]->readable = 1, file[0]->writable = 0;
8000c354:	ac700004 	sw	s0,4(v1)
8000c358:	ac600008 	sw	zero,8(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:390
	filemap_open(file[0]);
8000c35c:	0c002d2d 	jal	8000b4b4 <filemap_open>
8000c360:	afa20018 	sw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:392

	file[1]->pos = 0;
8000c364:	8fa40014 	lw	a0,20(sp)
8000c368:	ac800010 	sw	zero,16(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:393
	file[1]->readable = 0, file[1]->writable = 1;
8000c36c:	ac800004 	sw	zero,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:394
	filemap_open(file[1]);
8000c370:	0c002d2d 	jal	8000b4b4 <filemap_open>
8000c374:	ac900008 	sw	s0,8(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:396

	fd[0] = file[0]->fd, fd[1] = file[1]->fd;
8000c378:	8fa30010 	lw	v1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:397
	return 0;
8000c37c:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:396

	file[1]->pos = 0;
	file[1]->readable = 0, file[1]->writable = 1;
	filemap_open(file[1]);

	fd[0] = file[0]->fd, fd[1] = file[1]->fd;
8000c380:	8c63000c 	lw	v1,12(v1)
8000c384:	ae230000 	sw	v1,0(s1)
8000c388:	8fa30014 	lw	v1,20(sp)
8000c38c:	8c63000c 	lw	v1,12(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:397
	return 0;
8000c390:	080030c2 	j	8000c308 <file_pipe+0x64>
8000c394:	ae230004 	sw	v1,4(s1)

8000c398 <file_mkfifo>:
file_mkfifo():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:410
	}
	return ret;
}

int file_mkfifo(const char *__name, uint32_t open_flags)
{
8000c398:	27bdffd0 	addiu	sp,sp,-48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:412
	bool readonly = 0;
	switch (open_flags & O_ACCMODE) {
8000c39c:	30a20003 	andi	v0,a1,0x3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:410
	}
	return ret;
}

int file_mkfifo(const char *__name, uint32_t open_flags)
{
8000c3a0:	afb20028 	sw	s2,40(sp)
8000c3a4:	afb10024 	sw	s1,36(sp)
8000c3a8:	afb00020 	sw	s0,32(sp)
8000c3ac:	afbf002c 	sw	ra,44(sp)
8000c3b0:	00a09021 	move	s2,a1
8000c3b4:	00808821 	move	s1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:412
	bool readonly = 0;
	switch (open_flags & O_ACCMODE) {
8000c3b8:	1040000a 	beqz	v0,8000c3e4 <file_mkfifo+0x4c>
8000c3bc:	24100001 	li	s0,1
8000c3c0:	10500007 	beq	v0,s0,8000c3e0 <file_mkfifo+0x48>
8000c3c4:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:449
failed_cleanup_name:
	kfree(name);
failed_cleanup_file:
	filemap_free(file);
	return ret;
}
8000c3c8:	8fbf002c 	lw	ra,44(sp)
8000c3cc:	8fb20028 	lw	s2,40(sp)
8000c3d0:	8fb10024 	lw	s1,36(sp)
8000c3d4:	8fb00020 	lw	s0,32(sp)
8000c3d8:	03e00008 	jr	ra
8000c3dc:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:411
	return ret;
}

int file_mkfifo(const char *__name, uint32_t open_flags)
{
	bool readonly = 0;
8000c3e0:	00008021 	move	s0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:423
		return -E_INVAL;
	}

	int ret;
	struct file *file;
	if ((ret = filemap_alloc(NO_FD, &file)) != 0) {
8000c3e4:	3c04ffff 	lui	a0,0xffff
8000c3e8:	24846ad9 	addiu	a0,a0,27353
8000c3ec:	0c002c6b 	jal	8000b1ac <filemap_alloc>
8000c3f0:	27a50010 	addiu	a1,sp,16
8000c3f4:	1440fff5 	bnez	v0,8000c3cc <file_mkfifo+0x34>
8000c3f8:	8fbf002c 	lw	ra,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:428
		return ret;
	}

	char *name;
	const char *device = readonly ? "pipe:r_" : "pipe:w_";
8000c3fc:	1200001c 	beqz	s0,8000c470 <file_mkfifo+0xd8>
8000c400:	3c048002 	lui	a0,0x8002
8000c404:	3c048002 	lui	a0,0x8002
8000c408:	24842840 	addiu	a0,a0,10304
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:430

	if ((name = stradd(device, __name)) == NULL) {
8000c40c:	0c00592e 	jal	800164b8 <stradd>
8000c410:	02202821 	move	a1,s1
8000c414:	10400027 	beqz	v0,8000c4b4 <file_mkfifo+0x11c>
8000c418:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:435
		ret = -E_NO_MEM;
		goto failed_cleanup_file;
	}

	if ((ret = vfs_open(name, open_flags, &(file->node))) != 0) {
8000c41c:	8fa60010 	lw	a2,16(sp)
8000c420:	00402021 	move	a0,v0
8000c424:	02402821 	move	a1,s2
8000c428:	0c001512 	jal	80005448 <vfs_open>
8000c42c:	24c60014 	addiu	a2,a2,20
8000c430:	10400011 	beqz	v0,8000c478 <file_mkfifo+0xe0>
8000c434:	8fa40010 	lw	a0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:445
	filemap_open(file);
	kfree(name);
	return file->fd;

failed_cleanup_name:
	kfree(name);
8000c438:	02202021 	move	a0,s1
8000c43c:	0c0054b1 	jal	800152c4 <kfree>
8000c440:	afa20018 	sw	v0,24(sp)
8000c444:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:447
failed_cleanup_file:
	filemap_free(file);
8000c448:	8fa40010 	lw	a0,16(sp)
8000c44c:	0c002ca0 	jal	8000b280 <filemap_free>
8000c450:	afa20018 	sw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:449
	return ret;
}
8000c454:	8fbf002c 	lw	ra,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:448

failed_cleanup_name:
	kfree(name);
failed_cleanup_file:
	filemap_free(file);
	return ret;
8000c458:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:449
}
8000c45c:	8fb20028 	lw	s2,40(sp)
8000c460:	8fb10024 	lw	s1,36(sp)
8000c464:	8fb00020 	lw	s0,32(sp)
8000c468:	03e00008 	jr	ra
8000c46c:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:428
	if ((ret = filemap_alloc(NO_FD, &file)) != 0) {
		return ret;
	}

	char *name;
	const char *device = readonly ? "pipe:r_" : "pipe:w_";
8000c470:	08003103 	j	8000c40c <file_mkfifo+0x74>
8000c474:	24842848 	addiu	a0,a0,10312
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:439

	if ((ret = vfs_open(name, open_flags, &(file->node))) != 0) {
		goto failed_cleanup_name;
	}
	file->pos = 0;
	file->readable = readonly, file->writable = !readonly;
8000c478:	3a020001 	xori	v0,s0,0x1
8000c47c:	ac820008 	sw	v0,8(a0)
8000c480:	ac900004 	sw	s0,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:440
	filemap_open(file);
8000c484:	0c002d2d 	jal	8000b4b4 <filemap_open>
8000c488:	ac800010 	sw	zero,16(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:441
	kfree(name);
8000c48c:	0c0054b1 	jal	800152c4 <kfree>
8000c490:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:442
	return file->fd;
8000c494:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:449
failed_cleanup_name:
	kfree(name);
failed_cleanup_file:
	filemap_free(file);
	return ret;
}
8000c498:	8fbf002c 	lw	ra,44(sp)
8000c49c:	8fb20028 	lw	s2,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:442
	}
	file->pos = 0;
	file->readable = readonly, file->writable = !readonly;
	filemap_open(file);
	kfree(name);
	return file->fd;
8000c4a0:	8c42000c 	lw	v0,12(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:449
failed_cleanup_name:
	kfree(name);
failed_cleanup_file:
	filemap_free(file);
	return ret;
}
8000c4a4:	8fb10024 	lw	s1,36(sp)
8000c4a8:	8fb00020 	lw	s0,32(sp)
8000c4ac:	03e00008 	jr	ra
8000c4b0:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:431

	char *name;
	const char *device = readonly ? "pipe:r_" : "pipe:w_";

	if ((name = stradd(device, __name)) == NULL) {
		ret = -E_NO_MEM;
8000c4b4:	08003112 	j	8000c448 <file_mkfifo+0xb0>
8000c4b8:	2402fff4 	li	v0,-12

8000c4bc <__is_linux_devfile>:
__is_linux_devfile():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:453
	return ret;
}

/* linux devfile adaptor */
bool __is_linux_devfile(int fd)
{
8000c4bc:	27bdffe0 	addiu	sp,sp,-32
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000c4c0:	2c820123 	sltiu	v0,a0,291
__is_linux_devfile():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:453
	return ret;
}

/* linux devfile adaptor */
bool __is_linux_devfile(int fd)
{
8000c4c4:	afb00018 	sw	s0,24(sp)
8000c4c8:	afbf001c 	sw	ra,28(sp)
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000c4cc:	10400015 	beqz	v0,8000c524 <__is_linux_devfile+0x68>
8000c4d0:	00008021 	move	s0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:132
		struct file *file = get_filemap() + fd;
8000c4d4:	0c002c57 	jal	8000b15c <get_filemap>
8000c4d8:	afa40010 	sw	a0,16(sp)
8000c4dc:	8fa40010 	lw	a0,16(sp)
8000c4e0:	00042940 	sll	a1,a0,0x5
8000c4e4:	00041880 	sll	v1,a0,0x2
8000c4e8:	00a31823 	subu	v1,a1,v1
8000c4ec:	00431021 	addu	v0,v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:133
		if (file->status == FD_OPENED && file->fd == fd) {
8000c4f0:	8c450000 	lw	a1,0(v0)
8000c4f4:	24030002 	li	v1,2
8000c4f8:	14a3000b 	bne	a1,v1,8000c528 <__is_linux_devfile+0x6c>
8000c4fc:	8fbf001c 	lw	ra,28(sp)
8000c500:	8c43000c 	lw	v1,12(v0)
8000c504:	54830009 	bnel	a0,v1,8000c52c <__is_linux_devfile+0x70>
8000c508:	02001021 	move	v0,s0
__is_linux_devfile():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:460
	int ret = -E_INVAL;
	struct file *file;
	if ((ret = fd2file(fd, &file)) != 0) {
		return 0;
	}
	if (file->node && check_inode_type(file->node, device)
8000c50c:	8c420014 	lw	v0,20(v0)
8000c510:	10400005 	beqz	v0,8000c528 <__is_linux_devfile+0x6c>
8000c514:	24031234 	li	v1,4660
8000c518:	8c440038 	lw	a0,56(v0)
8000c51c:	50830006 	beql	a0,v1,8000c538 <__is_linux_devfile+0x7c>
8000c520:	8c50000c 	lw	s0,12(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:464
	    && dev_is_linux_dev(vop_info(file->node, device)))
		return 1;
	return 0;
}
8000c524:	8fbf001c 	lw	ra,28(sp)
8000c528:	02001021 	move	v0,s0
8000c52c:	8fb00018 	lw	s0,24(sp)
8000c530:	03e00008 	jr	ra
8000c534:	27bd0020 	addiu	sp,sp,32
8000c538:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:452
	filemap_free(file);
	return ret;
}

/* linux devfile adaptor */
bool __is_linux_devfile(int fd)
8000c53c:	0010802b 	sltu	s0,zero,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:464
	}
	if (file->node && check_inode_type(file->node, device)
	    && dev_is_linux_dev(vop_info(file->node, device)))
		return 1;
	return 0;
}
8000c540:	02001021 	move	v0,s0
8000c544:	8fb00018 	lw	s0,24(sp)
8000c548:	03e00008 	jr	ra
8000c54c:	27bd0020 	addiu	sp,sp,32

8000c550 <linux_devfile_read>:
linux_devfile_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:467

int linux_devfile_read(int fd, void *base, size_t len, size_t * copied_store)
{
8000c550:	27bdffc8 	addiu	sp,sp,-56
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000c554:	2c820123 	sltiu	v0,a0,291
linux_devfile_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:467
		return 1;
	return 0;
}

int linux_devfile_read(int fd, void *base, size_t len, size_t * copied_store)
{
8000c558:	afb10030 	sw	s1,48(sp)
8000c55c:	afbf0034 	sw	ra,52(sp)
8000c560:	afb0002c 	sw	s0,44(sp)
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000c564:	10400036 	beqz	v0,8000c640 <linux_devfile_read+0xf0>
8000c568:	00e08821 	move	s1,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:132
		struct file *file = get_filemap() + fd;
8000c56c:	afa40018 	sw	a0,24(sp)
8000c570:	afa5001c 	sw	a1,28(sp)
8000c574:	0c002c57 	jal	8000b15c <get_filemap>
8000c578:	afa60020 	sw	a2,32(sp)
8000c57c:	8fa40018 	lw	a0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:133
		if (file->status == FD_OPENED && file->fd == fd) {
8000c580:	8fa5001c 	lw	a1,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:132
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
		struct file *file = get_filemap() + fd;
8000c584:	00041940 	sll	v1,a0,0x5
8000c588:	00048080 	sll	s0,a0,0x2
8000c58c:	00708023 	subu	s0,v1,s0
8000c590:	00508021 	addu	s0,v0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:133
		if (file->status == FD_OPENED && file->fd == fd) {
8000c594:	8e030000 	lw	v1,0(s0)
8000c598:	24020002 	li	v0,2
8000c59c:	14620028 	bne	v1,v0,8000c640 <linux_devfile_read+0xf0>
8000c5a0:	8fa60020 	lw	a2,32(sp)
8000c5a4:	8e02000c 	lw	v0,12(s0)
8000c5a8:	14820026 	bne	a0,v0,8000c644 <linux_devfile_read+0xf4>
8000c5ac:	8fbf0034 	lw	ra,52(sp)
linux_devfile_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:478
	int64_t offset;
	if ((ret = fd2file(fd, &file)) != 0) {
		return 0;
	}

	if (!file->readable) {
8000c5b0:	8e020004 	lw	v0,4(s0)
8000c5b4:	10400028 	beqz	v0,8000c658 <linux_devfile_read+0x108>
8000c5b8:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:481
		return -E_INVAL;
	}
	filemap_acquire(file);
8000c5bc:	afa5001c 	sw	a1,28(sp)
8000c5c0:	0c002cd3 	jal	8000b34c <filemap_acquire>
8000c5c4:	afa60020 	sw	a2,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:482
	offset = file->pos;
8000c5c8:	8e020010 	lw	v0,16(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:483
	struct device *dev = vop_info(file->node, device);
8000c5cc:	8e040014 	lw	a0,20(s0)
8000c5d0:	8fa5001c 	lw	a1,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:482

	if (!file->readable) {
		return -E_INVAL;
	}
	filemap_acquire(file);
	offset = file->pos;
8000c5d4:	00021fc3 	sra	v1,v0,0x1f
8000c5d8:	afa20010 	sw	v0,16(sp)
8000c5dc:	afa30014 	sw	v1,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:483
	struct device *dev = vop_info(file->node, device);
8000c5e0:	1080001f 	beqz	a0,8000c660 <linux_devfile_read+0x110>
8000c5e4:	8fa60020 	lw	a2,32(sp)
8000c5e8:	8c830038 	lw	v1,56(a0)
8000c5ec:	24021234 	li	v0,4660
8000c5f0:	5462001c 	bnel	v1,v0,8000c664 <linux_devfile_read+0x114>
8000c5f4:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:485
	assert(dev);
	ret = dev->d_linux_read(dev, base, len, (size_t *) & offset);
8000c5f8:	8c820010 	lw	v0,16(a0)
8000c5fc:	0040f809 	jalr	v0
8000c600:	27a70010 	addiu	a3,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:486
	if (ret >= 0) {
8000c604:	04400006 	bltz	v0,8000c620 <linux_devfile_read+0xd0>
8000c608:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:487
		*copied_store = (size_t) ret;
8000c60c:	ae220000 	sw	v0,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:488
		file->pos += ret;
8000c610:	8e030010 	lw	v1,16(s0)
8000c614:	00621021 	addu	v0,v1,v0
8000c618:	ae020010 	sw	v0,16(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:489
		ret = 0;
8000c61c:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:491
	}
	filemap_release(file);
8000c620:	0c002cfb 	jal	8000b3ec <filemap_release>
8000c624:	afa20018 	sw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:492
	return ret;
8000c628:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:493
}
8000c62c:	8fbf0034 	lw	ra,52(sp)
8000c630:	8fb10030 	lw	s1,48(sp)
8000c634:	8fb0002c 	lw	s0,44(sp)
8000c638:	03e00008 	jr	ra
8000c63c:	27bd0038 	addiu	sp,sp,56
8000c640:	8fbf0034 	lw	ra,52(sp)
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:475
	struct file *file;
	/* use 8byte int, in case of 64bit off_t
	 * config in linux kernel */
	int64_t offset;
	if ((ret = fd2file(fd, &file)) != 0) {
		return 0;
8000c644:	00001021 	move	v0,zero
linux_devfile_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:493
		file->pos += ret;
		ret = 0;
	}
	filemap_release(file);
	return ret;
}
8000c648:	8fb10030 	lw	s1,48(sp)
8000c64c:	8fb0002c 	lw	s0,44(sp)
8000c650:	03e00008 	jr	ra
8000c654:	27bd0038 	addiu	sp,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:479
	if ((ret = fd2file(fd, &file)) != 0) {
		return 0;
	}

	if (!file->readable) {
		return -E_INVAL;
8000c658:	0800318b 	j	8000c62c <linux_devfile_read+0xdc>
8000c65c:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:483
	}
	filemap_acquire(file);
	offset = file->pos;
	struct device *dev = vop_info(file->node, device);
8000c660:	3c048002 	lui	a0,0x8002
8000c664:	3c068002 	lui	a2,0x8002
8000c668:	3c078002 	lui	a3,0x8002
8000c66c:	248424d0 	addiu	a0,a0,9424
8000c670:	240501e3 	li	a1,483
8000c674:	24c60e28 	addiu	a2,a2,3624
8000c678:	0c006b0b 	jal	8001ac2c <__panic>
8000c67c:	24e70fbc 	addiu	a3,a3,4028

8000c680 <linux_devfile_write>:
linux_devfile_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:496
	filemap_release(file);
	return ret;
}

int linux_devfile_write(int fd, void *base, size_t len, size_t * copied_store)
{
8000c680:	27bdffc8 	addiu	sp,sp,-56
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000c684:	2c820123 	sltiu	v0,a0,291
linux_devfile_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:496
	filemap_release(file);
	return ret;
}

int linux_devfile_write(int fd, void *base, size_t len, size_t * copied_store)
{
8000c688:	afb10030 	sw	s1,48(sp)
8000c68c:	afbf0034 	sw	ra,52(sp)
8000c690:	afb0002c 	sw	s0,44(sp)
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000c694:	10400036 	beqz	v0,8000c770 <linux_devfile_write+0xf0>
8000c698:	00e08821 	move	s1,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:132
		struct file *file = get_filemap() + fd;
8000c69c:	afa40018 	sw	a0,24(sp)
8000c6a0:	afa5001c 	sw	a1,28(sp)
8000c6a4:	0c002c57 	jal	8000b15c <get_filemap>
8000c6a8:	afa60020 	sw	a2,32(sp)
8000c6ac:	8fa40018 	lw	a0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:133
		if (file->status == FD_OPENED && file->fd == fd) {
8000c6b0:	8fa5001c 	lw	a1,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:132
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
		struct file *file = get_filemap() + fd;
8000c6b4:	00041940 	sll	v1,a0,0x5
8000c6b8:	00048080 	sll	s0,a0,0x2
8000c6bc:	00708023 	subu	s0,v1,s0
8000c6c0:	00508021 	addu	s0,v0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:133
		if (file->status == FD_OPENED && file->fd == fd) {
8000c6c4:	8e030000 	lw	v1,0(s0)
8000c6c8:	24020002 	li	v0,2
8000c6cc:	14620028 	bne	v1,v0,8000c770 <linux_devfile_write+0xf0>
8000c6d0:	8fa60020 	lw	a2,32(sp)
8000c6d4:	8e02000c 	lw	v0,12(s0)
8000c6d8:	14820026 	bne	a0,v0,8000c774 <linux_devfile_write+0xf4>
8000c6dc:	8fbf0034 	lw	ra,52(sp)
linux_devfile_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:506
	int64_t offset;
	if ((ret = fd2file(fd, &file)) != 0) {
		return 0;
	}

	if (!file->writable) {
8000c6e0:	8e020008 	lw	v0,8(s0)
8000c6e4:	10400028 	beqz	v0,8000c788 <linux_devfile_write+0x108>
8000c6e8:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:509
		return -E_INVAL;
	}
	filemap_acquire(file);
8000c6ec:	afa5001c 	sw	a1,28(sp)
8000c6f0:	0c002cd3 	jal	8000b34c <filemap_acquire>
8000c6f4:	afa60020 	sw	a2,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:510
	offset = file->pos;
8000c6f8:	8e020010 	lw	v0,16(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:511
	struct device *dev = vop_info(file->node, device);
8000c6fc:	8e040014 	lw	a0,20(s0)
8000c700:	8fa5001c 	lw	a1,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:510

	if (!file->writable) {
		return -E_INVAL;
	}
	filemap_acquire(file);
	offset = file->pos;
8000c704:	00021fc3 	sra	v1,v0,0x1f
8000c708:	afa20010 	sw	v0,16(sp)
8000c70c:	afa30014 	sw	v1,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:511
	struct device *dev = vop_info(file->node, device);
8000c710:	1080001f 	beqz	a0,8000c790 <linux_devfile_write+0x110>
8000c714:	8fa60020 	lw	a2,32(sp)
8000c718:	8c830038 	lw	v1,56(a0)
8000c71c:	24021234 	li	v0,4660
8000c720:	5462001c 	bnel	v1,v0,8000c794 <linux_devfile_write+0x114>
8000c724:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:513
	assert(dev);
	ret = dev->d_linux_write(dev, base, len, (size_t *) & offset);
8000c728:	8c820014 	lw	v0,20(a0)
8000c72c:	0040f809 	jalr	v0
8000c730:	27a70010 	addiu	a3,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:514
	if (ret >= 0) {
8000c734:	04400006 	bltz	v0,8000c750 <linux_devfile_write+0xd0>
8000c738:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:515
		*copied_store = (size_t) ret;
8000c73c:	ae220000 	sw	v0,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:516
		file->pos += ret;
8000c740:	8e030010 	lw	v1,16(s0)
8000c744:	00621021 	addu	v0,v1,v0
8000c748:	ae020010 	sw	v0,16(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:517
		ret = 0;
8000c74c:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:519
	}
	filemap_release(file);
8000c750:	0c002cfb 	jal	8000b3ec <filemap_release>
8000c754:	afa20018 	sw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:520
	return ret;
8000c758:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:521
}
8000c75c:	8fbf0034 	lw	ra,52(sp)
8000c760:	8fb10030 	lw	s1,48(sp)
8000c764:	8fb0002c 	lw	s0,44(sp)
8000c768:	03e00008 	jr	ra
8000c76c:	27bd0038 	addiu	sp,sp,56
8000c770:	8fbf0034 	lw	ra,52(sp)
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:503
	struct file *file;
	/* use 8byte int, in case of 64bit off_t
	 * config in linux kernel */
	int64_t offset;
	if ((ret = fd2file(fd, &file)) != 0) {
		return 0;
8000c774:	00001021 	move	v0,zero
linux_devfile_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:521
		file->pos += ret;
		ret = 0;
	}
	filemap_release(file);
	return ret;
}
8000c778:	8fb10030 	lw	s1,48(sp)
8000c77c:	8fb0002c 	lw	s0,44(sp)
8000c780:	03e00008 	jr	ra
8000c784:	27bd0038 	addiu	sp,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:507
	if ((ret = fd2file(fd, &file)) != 0) {
		return 0;
	}

	if (!file->writable) {
		return -E_INVAL;
8000c788:	080031d7 	j	8000c75c <linux_devfile_write+0xdc>
8000c78c:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:511
	}
	filemap_acquire(file);
	offset = file->pos;
	struct device *dev = vop_info(file->node, device);
8000c790:	3c048002 	lui	a0,0x8002
8000c794:	3c068002 	lui	a2,0x8002
8000c798:	3c078002 	lui	a3,0x8002
8000c79c:	248424d0 	addiu	a0,a0,9424
8000c7a0:	240501ff 	li	a1,511
8000c7a4:	24c60e28 	addiu	a2,a2,3624
8000c7a8:	0c006b0b 	jal	8001ac2c <__panic>
8000c7ac:	24e70fbc 	addiu	a3,a3,4028

8000c7b0 <linux_devfile_ioctl>:
linux_devfile_ioctl():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:524
	filemap_release(file);
	return ret;
}

int linux_devfile_ioctl(int fd, unsigned int cmd, unsigned long arg)
{
8000c7b0:	27bdffd8 	addiu	sp,sp,-40
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000c7b4:	2c820123 	sltiu	v0,a0,291
linux_devfile_ioctl():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:524
	filemap_release(file);
	return ret;
}

int linux_devfile_ioctl(int fd, unsigned int cmd, unsigned long arg)
{
8000c7b8:	afbf0024 	sw	ra,36(sp)
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000c7bc:	10400028 	beqz	v0,8000c860 <linux_devfile_ioctl+0xb0>
8000c7c0:	afb00020 	sw	s0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:132
		struct file *file = get_filemap() + fd;
8000c7c4:	afa40010 	sw	a0,16(sp)
8000c7c8:	afa50014 	sw	a1,20(sp)
8000c7cc:	0c002c57 	jal	8000b15c <get_filemap>
8000c7d0:	afa60018 	sw	a2,24(sp)
8000c7d4:	8fa40010 	lw	a0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:133
		if (file->status == FD_OPENED && file->fd == fd) {
8000c7d8:	8fa50014 	lw	a1,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:132
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
		struct file *file = get_filemap() + fd;
8000c7dc:	00041940 	sll	v1,a0,0x5
8000c7e0:	00048080 	sll	s0,a0,0x2
8000c7e4:	00708023 	subu	s0,v1,s0
8000c7e8:	00508021 	addu	s0,v0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:133
		if (file->status == FD_OPENED && file->fd == fd) {
8000c7ec:	8e030000 	lw	v1,0(s0)
8000c7f0:	24020002 	li	v0,2
8000c7f4:	1462001a 	bne	v1,v0,8000c860 <linux_devfile_ioctl+0xb0>
8000c7f8:	8fa60018 	lw	a2,24(sp)
8000c7fc:	8e02000c 	lw	v0,12(s0)
8000c800:	14820017 	bne	a0,v0,8000c860 <linux_devfile_ioctl+0xb0>
8000c804:	02002021 	move	a0,s0
linux_devfile_ioctl():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:530
	int ret = -E_INVAL;
	struct file *file;
	if ((ret = fd2file(fd, &file)) != 0) {
		return 0;
	}
	filemap_acquire(file);
8000c808:	afa50014 	sw	a1,20(sp)
8000c80c:	0c002cd3 	jal	8000b34c <filemap_acquire>
8000c810:	afa60018 	sw	a2,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:531
	struct device *dev = vop_info(file->node, device);
8000c814:	8e040014 	lw	a0,20(s0)
8000c818:	8fa50014 	lw	a1,20(sp)
8000c81c:	10800015 	beqz	a0,8000c874 <linux_devfile_ioctl+0xc4>
8000c820:	8fa60018 	lw	a2,24(sp)
8000c824:	8c830038 	lw	v1,56(a0)
8000c828:	24021234 	li	v0,4660
8000c82c:	54620012 	bnel	v1,v0,8000c878 <linux_devfile_ioctl+0xc8>
8000c830:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:533
	assert(dev);
	ret = dev->d_linux_ioctl(dev, cmd, arg);
8000c834:	8c820018 	lw	v0,24(a0)
8000c838:	0040f809 	jalr	v0
8000c83c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:534
	filemap_release(file);
8000c840:	02002021 	move	a0,s0
8000c844:	0c002cfb 	jal	8000b3ec <filemap_release>
8000c848:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:536
	return ret;
}
8000c84c:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:535
	filemap_acquire(file);
	struct device *dev = vop_info(file->node, device);
	assert(dev);
	ret = dev->d_linux_ioctl(dev, cmd, arg);
	filemap_release(file);
	return ret;
8000c850:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:536
}
8000c854:	8fb00020 	lw	s0,32(sp)
8000c858:	03e00008 	jr	ra
8000c85c:	27bd0028 	addiu	sp,sp,40
8000c860:	8fbf0024 	lw	ra,36(sp)
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:528
int linux_devfile_ioctl(int fd, unsigned int cmd, unsigned long arg)
{
	int ret = -E_INVAL;
	struct file *file;
	if ((ret = fd2file(fd, &file)) != 0) {
		return 0;
8000c864:	00001021 	move	v0,zero
linux_devfile_ioctl():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:536
	struct device *dev = vop_info(file->node, device);
	assert(dev);
	ret = dev->d_linux_ioctl(dev, cmd, arg);
	filemap_release(file);
	return ret;
}
8000c868:	8fb00020 	lw	s0,32(sp)
8000c86c:	03e00008 	jr	ra
8000c870:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:531
	struct file *file;
	if ((ret = fd2file(fd, &file)) != 0) {
		return 0;
	}
	filemap_acquire(file);
	struct device *dev = vop_info(file->node, device);
8000c874:	3c048002 	lui	a0,0x8002
8000c878:	3c068002 	lui	a2,0x8002
8000c87c:	3c078002 	lui	a3,0x8002
8000c880:	248424d0 	addiu	a0,a0,9424
8000c884:	24050213 	li	a1,531
8000c888:	24c60e28 	addiu	a2,a2,3624
8000c88c:	0c006b0b 	jal	8001ac2c <__panic>
8000c890:	24e70fbc 	addiu	a3,a3,4028

8000c894 <linux_devfile_mmap2>:
linux_devfile_mmap2():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:540
	return ret;
}

void *linux_devfile_mmap2(void *addr, size_t len, int prot, int flags, int fd,
			  size_t pgoff)
{
8000c894:	27bdffc0 	addiu	sp,sp,-64
8000c898:	afb10028 	sw	s1,40(sp)
8000c89c:	8fb10050 	lw	s1,80(sp)
8000c8a0:	afb50038 	sw	s5,56(sp)
8000c8a4:	afb40034 	sw	s4,52(sp)
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000c8a8:	2e220123 	sltiu	v0,s1,291
linux_devfile_mmap2():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:540
	return ret;
}

void *linux_devfile_mmap2(void *addr, size_t len, int prot, int flags, int fd,
			  size_t pgoff)
{
8000c8ac:	afb30030 	sw	s3,48(sp)
8000c8b0:	afb2002c 	sw	s2,44(sp)
8000c8b4:	afbf003c 	sw	ra,60(sp)
8000c8b8:	afb00024 	sw	s0,36(sp)
8000c8bc:	00809021 	move	s2,a0
8000c8c0:	00a09821 	move	s3,a1
8000c8c4:	00c0a021 	move	s4,a2
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:131
	to->node = node;
}

static inline int fd2file(int fd, struct file **file_store)
{
	if (testfd(fd)) {
8000c8c8:	10400029 	beqz	v0,8000c970 <linux_devfile_mmap2+0xdc>
8000c8cc:	00e0a821 	move	s5,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:132
		struct file *file = get_filemap() + fd;
8000c8d0:	0c002c57 	jal	8000b15c <get_filemap>
8000c8d4:	00118080 	sll	s0,s1,0x2
8000c8d8:	00111940 	sll	v1,s1,0x5
8000c8dc:	00708023 	subu	s0,v1,s0
8000c8e0:	00508021 	addu	s0,v0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:133
		if (file->status == FD_OPENED && file->fd == fd) {
8000c8e4:	8e030000 	lw	v1,0(s0)
8000c8e8:	24020002 	li	v0,2
8000c8ec:	14620021 	bne	v1,v0,8000c974 <linux_devfile_mmap2+0xe0>
8000c8f0:	8fbf003c 	lw	ra,60(sp)
8000c8f4:	8e02000c 	lw	v0,12(s0)
8000c8f8:	1622001f 	bne	s1,v0,8000c978 <linux_devfile_mmap2+0xe4>
8000c8fc:	00001021 	move	v0,zero
linux_devfile_mmap2():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:546
	int ret = -E_INVAL;
	struct file *file;
	if ((ret = fd2file(fd, &file)) != 0) {
		return NULL;
	}
	filemap_acquire(file);
8000c900:	0c002cd3 	jal	8000b34c <filemap_acquire>
8000c904:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:547
	struct device *dev = vop_info(file->node, device);
8000c908:	8e040014 	lw	a0,20(s0)
8000c90c:	10800022 	beqz	a0,8000c998 <linux_devfile_mmap2+0x104>
8000c910:	24021234 	li	v0,4660
8000c914:	8c830038 	lw	v1,56(a0)
8000c918:	1462001f 	bne	v1,v0,8000c998 <linux_devfile_mmap2+0x104>
8000c91c:	8fa20054 	lw	v0,84(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:549
	assert(dev);
	void *r = dev->d_linux_mmap(dev, addr, len, prot, flags, pgoff);
8000c920:	afb50010 	sw	s5,16(sp)
8000c924:	02402821 	move	a1,s2
8000c928:	afa20014 	sw	v0,20(sp)
8000c92c:	8c82001c 	lw	v0,28(a0)
8000c930:	02603021 	move	a2,s3
8000c934:	0040f809 	jalr	v0
8000c938:	02803821 	move	a3,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:550
	filemap_release(file);
8000c93c:	02002021 	move	a0,s0
8000c940:	0c002cfb 	jal	8000b3ec <filemap_release>
8000c944:	afa20018 	sw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:552
	return r;
}
8000c948:	8fbf003c 	lw	ra,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:551
	filemap_acquire(file);
	struct device *dev = vop_info(file->node, device);
	assert(dev);
	void *r = dev->d_linux_mmap(dev, addr, len, prot, flags, pgoff);
	filemap_release(file);
	return r;
8000c94c:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:552
}
8000c950:	8fb50038 	lw	s5,56(sp)
8000c954:	8fb40034 	lw	s4,52(sp)
8000c958:	8fb30030 	lw	s3,48(sp)
8000c95c:	8fb2002c 	lw	s2,44(sp)
8000c960:	8fb10028 	lw	s1,40(sp)
8000c964:	8fb00024 	lw	s0,36(sp)
8000c968:	03e00008 	jr	ra
8000c96c:	27bd0040 	addiu	sp,sp,64
8000c970:	8fbf003c 	lw	ra,60(sp)
fd2file():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:544
			  size_t pgoff)
{
	int ret = -E_INVAL;
	struct file *file;
	if ((ret = fd2file(fd, &file)) != 0) {
		return NULL;
8000c974:	00001021 	move	v0,zero
linux_devfile_mmap2():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:552
	struct device *dev = vop_info(file->node, device);
	assert(dev);
	void *r = dev->d_linux_mmap(dev, addr, len, prot, flags, pgoff);
	filemap_release(file);
	return r;
}
8000c978:	8fb50038 	lw	s5,56(sp)
8000c97c:	8fb40034 	lw	s4,52(sp)
8000c980:	8fb30030 	lw	s3,48(sp)
8000c984:	8fb2002c 	lw	s2,44(sp)
8000c988:	8fb10028 	lw	s1,40(sp)
8000c98c:	8fb00024 	lw	s0,36(sp)
8000c990:	03e00008 	jr	ra
8000c994:	27bd0040 	addiu	sp,sp,64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/file.c:547
	struct file *file;
	if ((ret = fd2file(fd, &file)) != 0) {
		return NULL;
	}
	filemap_acquire(file);
	struct device *dev = vop_info(file->node, device);
8000c998:	3c048002 	lui	a0,0x8002
8000c99c:	3c068002 	lui	a2,0x8002
8000c9a0:	3c078002 	lui	a3,0x8002
8000c9a4:	248424d0 	addiu	a0,a0,9424
8000c9a8:	24050223 	li	a1,547
8000c9ac:	24c60e28 	addiu	a2,a2,3624
8000c9b0:	0c006b0b 	jal	8001ac2c <__panic>
8000c9b4:	24e70fbc 	addiu	a3,a3,4028

8000c9b8 <fs_init>:
fs_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:13
#include <sfs.h>
#include <inode.h>
#include <assert.h>

void fs_init(void)
{
8000c9b8:	27bdffe8 	addiu	sp,sp,-24
8000c9bc:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:14
	vfs_init();
8000c9c0:	0c00122f 	jal	800048bc <vfs_init>
8000c9c4:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:15
	dev_init();
8000c9c8:	0c000877 	jal	800021dc <dev_init>
8000c9cc:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:16
	pipe_init();
8000c9d0:	0c000b92 	jal	80002e48 <pipe_init>
8000c9d4:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:18
	sfs_init();
}
8000c9d8:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:17
void fs_init(void)
{
	vfs_init();
	dev_init();
	pipe_init();
	sfs_init();
8000c9dc:	08001949 	j	80006524 <sfs_init>
8000c9e0:	27bd0018 	addiu	sp,sp,24

8000c9e4 <fs_cleanup>:
fs_cleanup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:21
}

void fs_cleanup(void)
{
8000c9e4:	27bdffe8 	addiu	sp,sp,-24
8000c9e8:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:22
	vfs_unmount_all();
8000c9ec:	0c0014d0 	jal	80005340 <vfs_unmount_all>
8000c9f0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:24
	vfs_cleanup();
}
8000c9f4:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:23
}

void fs_cleanup(void)
{
	vfs_unmount_all();
	vfs_cleanup();
8000c9f8:	080013aa 	j	80004ea8 <vfs_cleanup>
8000c9fc:	27bd0018 	addiu	sp,sp,24

8000ca00 <lock_fs>:
lock_fs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:28
}

void lock_fs(struct fs_struct *fs_struct)
{
	down(&(fs_struct->fs_sem));
8000ca00:	0800671f 	j	80019c7c <down>
8000ca04:	2484000c 	addiu	a0,a0,12

8000ca08 <unlock_fs>:
unlock_fs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:33
}

void unlock_fs(struct fs_struct *fs_struct)
{
	up(&(fs_struct->fs_sem));
8000ca08:	0800671d 	j	80019c74 <up>
8000ca0c:	2484000c 	addiu	a0,a0,12

8000ca10 <fs_create>:
fs_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:37
}

struct fs_struct *fs_create(void)
{
8000ca10:	27bdffe0 	addiu	sp,sp,-32
8000ca14:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:40
	static_assert((int)FS_STRUCT_NENTRY > 128);
	struct fs_struct *fs_struct;
	if ((fs_struct =
8000ca18:	0c005486 	jal	80015218 <kmalloc>
8000ca1c:	24042000 	li	a0,8192
8000ca20:	1040000c 	beqz	v0,8000ca54 <fs_create+0x44>
8000ca24:	24430020 	addiu	v1,v0,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:43
	     kmalloc(sizeof(struct fs_struct) + FS_STRUCT_BUFSIZE)) != NULL) {
		fs_struct->pwd = NULL;
		fs_struct->filemap = (void *)(fs_struct + 1);
8000ca28:	ac430004 	sw	v1,4(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:45
		atomic_set(&(fs_struct->fs_count), 0);
		sem_init(&(fs_struct->fs_sem), 1);
8000ca2c:	2444000c 	addiu	a0,v0,12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:42
{
	static_assert((int)FS_STRUCT_NENTRY > 128);
	struct fs_struct *fs_struct;
	if ((fs_struct =
	     kmalloc(sizeof(struct fs_struct) + FS_STRUCT_BUFSIZE)) != NULL) {
		fs_struct->pwd = NULL;
8000ca30:	ac400000 	sw	zero,0(v0)
atomic_set():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:34
 *
 * Atomically sets the value of @v to @i.
 * */
static __always_inline void atomic_set(atomic_t * v, int i)
{
	v->counter = i;
8000ca34:	ac400008 	sw	zero,8(v0)
fs_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:45
		fs_struct->filemap = (void *)(fs_struct + 1);
		atomic_set(&(fs_struct->fs_count), 0);
		sem_init(&(fs_struct->fs_sem), 1);
8000ca38:	24050001 	li	a1,1
8000ca3c:	0c006717 	jal	80019c5c <sem_init>
8000ca40:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:46
		filemap_init(fs_struct->filemap);
8000ca44:	8fa20010 	lw	v0,16(sp)
8000ca48:	0c002cc9 	jal	8000b324 <filemap_init>
8000ca4c:	8c440004 	lw	a0,4(v0)
8000ca50:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:49
	}
	return fs_struct;
}
8000ca54:	8fbf001c 	lw	ra,28(sp)
8000ca58:	03e00008 	jr	ra
8000ca5c:	27bd0020 	addiu	sp,sp,32

8000ca60 <fs_destroy>:
fs_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:52

void fs_destroy(struct fs_struct *fs_struct)
{
8000ca60:	27bdffd8 	addiu	sp,sp,-40
8000ca64:	afb40020 	sw	s4,32(sp)
8000ca68:	afbf0024 	sw	ra,36(sp)
8000ca6c:	afb3001c 	sw	s3,28(sp)
8000ca70:	afb20018 	sw	s2,24(sp)
8000ca74:	afb10014 	sw	s1,20(sp)
8000ca78:	afb00010 	sw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:53
	assert(fs_struct != NULL && fs_count(fs_struct) == 0);
8000ca7c:	10800032 	beqz	a0,8000cb48 <fs_destroy+0xe8>
8000ca80:	0080a021 	move	s4,a0
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
 *
 * Atomically reads the value of @v.
 * */
static __always_inline int atomic_read(const atomic_t * v)
{
	return v->counter;
8000ca84:	8c820008 	lw	v0,8(a0)
fs_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:53
8000ca88:	54400030 	bnezl	v0,8000cb4c <fs_destroy+0xec>
8000ca8c:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:54
	if (fs_struct->pwd != NULL) {
8000ca90:	8c840000 	lw	a0,0(a0)
8000ca94:	50800004 	beqzl	a0,8000caa8 <fs_destroy+0x48>
8000ca98:	8e900004 	lw	s0,4(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:55
		vop_ref_dec(fs_struct->pwd);
8000ca9c:	0c001172 	jal	800045c8 <inode_ref_dec>
8000caa0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:58
	}
	int i;
	struct file *file = fs_struct->filemap;
8000caa4:	8e900004 	lw	s0,4(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:64
	for (i = 0; i < FS_STRUCT_NENTRY; i++, file++) {
		if (file->status == FD_OPENED) {
			filemap_close(file);
		}
		if (file->status != FD_NONE)
			kprintf("file->fd:%d\n", file->fd);
8000caa8:	3c138002 	lui	s3,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:60
		vop_ref_dec(fs_struct->pwd);
	}
	int i;
	struct file *file = fs_struct->filemap;
	for (i = 0; i < FS_STRUCT_NENTRY; i++, file++) {
		if (file->status == FD_OPENED) {
8000caac:	24110002 	li	s1,2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:51
		filemap_init(fs_struct->filemap);
	}
	return fs_struct;
}

void fs_destroy(struct fs_struct *fs_struct)
8000cab0:	26121fd4 	addiu	s2,s0,8148
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:64
	for (i = 0; i < FS_STRUCT_NENTRY; i++, file++) {
		if (file->status == FD_OPENED) {
			filemap_close(file);
		}
		if (file->status != FD_NONE)
			kprintf("file->fd:%d\n", file->fd);
8000cab4:	26732880 	addiu	s3,s3,10368
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:60
		vop_ref_dec(fs_struct->pwd);
	}
	int i;
	struct file *file = fs_struct->filemap;
	for (i = 0; i < FS_STRUCT_NENTRY; i++, file++) {
		if (file->status == FD_OPENED) {
8000cab8:	8e020000 	lw	v0,0(s0)
8000cabc:	1051000f 	beq	v0,s1,8000cafc <fs_destroy+0x9c>
8000cac0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:63
			filemap_close(file);
		}
		if (file->status != FD_NONE)
8000cac4:	54400013 	bnezl	v0,8000cb14 <fs_destroy+0xb4>
8000cac8:	8e05000c 	lw	a1,12(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:59
	if (fs_struct->pwd != NULL) {
		vop_ref_dec(fs_struct->pwd);
	}
	int i;
	struct file *file = fs_struct->filemap;
	for (i = 0; i < FS_STRUCT_NENTRY; i++, file++) {
8000cacc:	2610001c 	addiu	s0,s0,28
8000cad0:	5612fffa 	bnel	s0,s2,8000cabc <fs_destroy+0x5c>
8000cad4:	8e020000 	lw	v0,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:67
		}
		if (file->status != FD_NONE)
			kprintf("file->fd:%d\n", file->fd);
		assert(file->status == FD_NONE);
	}
	kfree(fs_struct);
8000cad8:	02802021 	move	a0,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:68
}
8000cadc:	8fbf0024 	lw	ra,36(sp)
8000cae0:	8fb40020 	lw	s4,32(sp)
8000cae4:	8fb3001c 	lw	s3,28(sp)
8000cae8:	8fb20018 	lw	s2,24(sp)
8000caec:	8fb10014 	lw	s1,20(sp)
8000caf0:	8fb00010 	lw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:67
		}
		if (file->status != FD_NONE)
			kprintf("file->fd:%d\n", file->fd);
		assert(file->status == FD_NONE);
	}
	kfree(fs_struct);
8000caf4:	080054b1 	j	800152c4 <kfree>
8000caf8:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:61
	}
	int i;
	struct file *file = fs_struct->filemap;
	for (i = 0; i < FS_STRUCT_NENTRY; i++, file++) {
		if (file->status == FD_OPENED) {
			filemap_close(file);
8000cafc:	0c002d59 	jal	8000b564 <filemap_close>
8000cb00:	02002021 	move	a0,s0
8000cb04:	8e020000 	lw	v0,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:63
		}
		if (file->status != FD_NONE)
8000cb08:	5040fff1 	beqzl	v0,8000cad0 <fs_destroy+0x70>
8000cb0c:	2610001c 	addiu	s0,s0,28
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:64
			kprintf("file->fd:%d\n", file->fd);
8000cb10:	8e05000c 	lw	a1,12(s0)
8000cb14:	0c007a9e 	jal	8001ea78 <kprintf>
8000cb18:	02602021 	move	a0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:65
		assert(file->status == FD_NONE);
8000cb1c:	8e020000 	lw	v0,0(s0)
8000cb20:	5040ffeb 	beqzl	v0,8000cad0 <fs_destroy+0x70>
8000cb24:	2610001c 	addiu	s0,s0,28
8000cb28:	3c048002 	lui	a0,0x8002
8000cb2c:	3c068002 	lui	a2,0x8002
8000cb30:	3c078002 	lui	a3,0x8002
8000cb34:	24841e7c 	addiu	a0,a0,7804
8000cb38:	24050041 	li	a1,65
8000cb3c:	24c60e28 	addiu	a2,a2,3624
8000cb40:	0c006b0b 	jal	8001ac2c <__panic>
8000cb44:	24e72890 	addiu	a3,a3,10384
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:53
	return fs_struct;
}

void fs_destroy(struct fs_struct *fs_struct)
{
	assert(fs_struct != NULL && fs_count(fs_struct) == 0);
8000cb48:	3c048002 	lui	a0,0x8002
8000cb4c:	3c068002 	lui	a2,0x8002
8000cb50:	3c078002 	lui	a3,0x8002
8000cb54:	24841e7c 	addiu	a0,a0,7804
8000cb58:	24050035 	li	a1,53
8000cb5c:	24c60e28 	addiu	a2,a2,3624
8000cb60:	0c006b0b 	jal	8001ac2c <__panic>
8000cb64:	24e72850 	addiu	a3,a3,10320

8000cb68 <fs_closeall>:
fs_closeall():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:71
	}
	kfree(fs_struct);
}

void fs_closeall(struct fs_struct *fs_struct)
{
8000cb68:	27bdffe0 	addiu	sp,sp,-32
8000cb6c:	afbf001c 	sw	ra,28(sp)
8000cb70:	afb20018 	sw	s2,24(sp)
8000cb74:	afb10014 	sw	s1,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:72
	assert(fs_struct != NULL && fs_count(fs_struct) > 0);
8000cb78:	10800018 	beqz	a0,8000cbdc <fs_closeall+0x74>
8000cb7c:	afb00010 	sw	s0,16(sp)
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
8000cb80:	8c820008 	lw	v0,8(a0)
fs_closeall():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:72
8000cb84:	18400015 	blez	v0,8000cbdc <fs_closeall+0x74>
8000cb88:	24120002 	li	s2,2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:74
	int i;
	struct file *file = fs_struct->filemap;
8000cb8c:	8c910004 	lw	s1,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:75
	for (i = 3, file += 2; i < FS_STRUCT_NENTRY; i++, file++) {
8000cb90:	26300038 	addiu	s0,s1,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:70
		assert(file->status == FD_NONE);
	}
	kfree(fs_struct);
}

void fs_closeall(struct fs_struct *fs_struct)
8000cb94:	080032e9 	j	8000cba4 <fs_closeall+0x3c>
8000cb98:	26311fb8 	addiu	s1,s1,8120
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:75
{
	assert(fs_struct != NULL && fs_count(fs_struct) > 0);
	int i;
	struct file *file = fs_struct->filemap;
	for (i = 3, file += 2; i < FS_STRUCT_NENTRY; i++, file++) {
8000cb9c:	1211000a 	beq	s0,s1,8000cbc8 <fs_closeall+0x60>
8000cba0:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:76
		if (file->status == FD_OPENED) {
8000cba4:	8e020000 	lw	v0,0(s0)
8000cba8:	5452fffc 	bnel	v0,s2,8000cb9c <fs_closeall+0x34>
8000cbac:	2610001c 	addiu	s0,s0,28
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:77
			filemap_close(file);
8000cbb0:	02002021 	move	a0,s0
8000cbb4:	0c002d59 	jal	8000b564 <filemap_close>
8000cbb8:	2610001c 	addiu	s0,s0,28
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:75
void fs_closeall(struct fs_struct *fs_struct)
{
	assert(fs_struct != NULL && fs_count(fs_struct) > 0);
	int i;
	struct file *file = fs_struct->filemap;
	for (i = 3, file += 2; i < FS_STRUCT_NENTRY; i++, file++) {
8000cbbc:	5611fffa 	bnel	s0,s1,8000cba8 <fs_closeall+0x40>
8000cbc0:	8e020000 	lw	v0,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:80
		if (file->status == FD_OPENED) {
			filemap_close(file);
		}
	}
}
8000cbc4:	8fbf001c 	lw	ra,28(sp)
8000cbc8:	8fb20018 	lw	s2,24(sp)
8000cbcc:	8fb10014 	lw	s1,20(sp)
8000cbd0:	8fb00010 	lw	s0,16(sp)
8000cbd4:	03e00008 	jr	ra
8000cbd8:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:72
	kfree(fs_struct);
}

void fs_closeall(struct fs_struct *fs_struct)
{
	assert(fs_struct != NULL && fs_count(fs_struct) > 0);
8000cbdc:	3c048002 	lui	a0,0x8002
8000cbe0:	3c068002 	lui	a2,0x8002
8000cbe4:	3c078002 	lui	a3,0x8002
8000cbe8:	24841e7c 	addiu	a0,a0,7804
8000cbec:	24050048 	li	a1,72
8000cbf0:	24c60e28 	addiu	a2,a2,3624
8000cbf4:	0c006b0b 	jal	8001ac2c <__panic>
8000cbf8:	24e724d8 	addiu	a3,a3,9432

8000cbfc <dup_fs>:
dup_fs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:83
		}
	}
}

int dup_fs(struct fs_struct *to, struct fs_struct *from)
{
8000cbfc:	27bdffd0 	addiu	sp,sp,-48
8000cc00:	afb1001c 	sw	s1,28(sp)
8000cc04:	afbf002c 	sw	ra,44(sp)
8000cc08:	afb40028 	sw	s4,40(sp)
8000cc0c:	afb30024 	sw	s3,36(sp)
8000cc10:	afb20020 	sw	s2,32(sp)
8000cc14:	afb00018 	sw	s0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:84
	assert(to != NULL && from != NULL);
8000cc18:	10800039 	beqz	a0,8000cd00 <dup_fs+0x104>
8000cc1c:	00808821 	move	s1,a0
8000cc20:	50a00038 	beqzl	a1,8000cd04 <dup_fs+0x108>
8000cc24:	3c048002 	lui	a0,0x8002
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
8000cc28:	8c820008 	lw	v0,8(a0)
dup_fs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:85
	assert(fs_count(to) == 0 && fs_count(from) > 0);
8000cc2c:	1440002d 	bnez	v0,8000cce4 <dup_fs+0xe8>
8000cc30:	3c048002 	lui	a0,0x8002
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
8000cc34:	8ca20008 	lw	v0,8(a1)
dup_fs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:85
8000cc38:	1840002b 	blez	v0,8000cce8 <dup_fs+0xec>
8000cc3c:	3c068002 	lui	a2,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:86
	if ((to->pwd = from->pwd) != NULL) {
8000cc40:	8ca40000 	lw	a0,0(a1)
8000cc44:	10800004 	beqz	a0,8000cc58 <dup_fs+0x5c>
8000cc48:	ae240000 	sw	a0,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:87
		vop_ref_inc(to->pwd);
8000cc4c:	0c0010b6 	jal	800042d8 <inode_ref_inc>
8000cc50:	afa50010 	sw	a1,16(sp)
8000cc54:	8fa50010 	lw	a1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:90
	}
	int i;
	struct file *to_file = to->filemap, *from_file = from->filemap;
8000cc58:	8cb00004 	lw	s0,4(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:92
	for (i = 0; i < FS_STRUCT_NENTRY; i++, to_file++, from_file++) {
		if (from_file->status == FD_OPENED) {
8000cc5c:	24130002 	li	s3,2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:90
	assert(fs_count(to) == 0 && fs_count(from) > 0);
	if ((to->pwd = from->pwd) != NULL) {
		vop_ref_inc(to->pwd);
	}
	int i;
	struct file *to_file = to->filemap, *from_file = from->filemap;
8000cc60:	8e310004 	lw	s1,4(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:92
	for (i = 0; i < FS_STRUCT_NENTRY; i++, to_file++, from_file++) {
		if (from_file->status == FD_OPENED) {
8000cc64:	8e020000 	lw	v0,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:82
			filemap_close(file);
		}
	}
}

int dup_fs(struct fs_struct *to, struct fs_struct *from)
8000cc68:	26121fd4 	addiu	s2,s0,8148
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:92
		vop_ref_inc(to->pwd);
	}
	int i;
	struct file *to_file = to->filemap, *from_file = from->filemap;
	for (i = 0; i < FS_STRUCT_NENTRY; i++, to_file++, from_file++) {
		if (from_file->status == FD_OPENED) {
8000cc6c:	1453000b 	bne	v0,s3,8000cc9c <dup_fs+0xa0>
8000cc70:	24140001 	li	s4,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:94
			/* alloc_fd first */
			to_file->status = FD_INIT;
8000cc74:	ae340000 	sw	s4,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:95
			filemap_dup(to_file, from_file);
8000cc78:	02202021 	move	a0,s1
8000cc7c:	0c002d8c 	jal	8000b630 <filemap_dup>
8000cc80:	02002821 	move	a1,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:91
	if ((to->pwd = from->pwd) != NULL) {
		vop_ref_inc(to->pwd);
	}
	int i;
	struct file *to_file = to->filemap, *from_file = from->filemap;
	for (i = 0; i < FS_STRUCT_NENTRY; i++, to_file++, from_file++) {
8000cc84:	2610001c 	addiu	s0,s0,28
8000cc88:	1212000d 	beq	s0,s2,8000ccc0 <dup_fs+0xc4>
8000cc8c:	2631001c 	addiu	s1,s1,28
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:92
		if (from_file->status == FD_OPENED) {
8000cc90:	8e020000 	lw	v0,0(s0)
8000cc94:	5053fff8 	beql	v0,s3,8000cc78 <dup_fs+0x7c>
8000cc98:	ae340000 	sw	s4,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:97
			/* alloc_fd first */
			to_file->status = FD_INIT;
			filemap_dup(to_file, from_file);
		}
		else if(from_file->status != FD_NONE) {
8000cc9c:	5040fffa 	beqzl	v0,8000cc88 <dup_fs+0x8c>
8000cca0:	2610001c 	addiu	s0,s0,28
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:98
			to_file->status = from_file->status;
8000cca4:	ae220000 	sw	v0,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:99
			filemap_dup_close(to_file, from_file);
8000cca8:	02202021 	move	a0,s1
8000ccac:	02002821 	move	a1,s0
8000ccb0:	0c002db2 	jal	8000b6c8 <filemap_dup_close>
8000ccb4:	2610001c 	addiu	s0,s0,28
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:91
	if ((to->pwd = from->pwd) != NULL) {
		vop_ref_inc(to->pwd);
	}
	int i;
	struct file *to_file = to->filemap, *from_file = from->filemap;
	for (i = 0; i < FS_STRUCT_NENTRY; i++, to_file++, from_file++) {
8000ccb8:	1612fff5 	bne	s0,s2,8000cc90 <dup_fs+0x94>
8000ccbc:	2631001c 	addiu	s1,s1,28
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:103
			to_file->status = from_file->status;
			filemap_dup_close(to_file, from_file);
		}
	}
	return 0;
}
8000ccc0:	8fbf002c 	lw	ra,44(sp)
8000ccc4:	00001021 	move	v0,zero
8000ccc8:	8fb40028 	lw	s4,40(sp)
8000cccc:	8fb30024 	lw	s3,36(sp)
8000ccd0:	8fb20020 	lw	s2,32(sp)
8000ccd4:	8fb1001c 	lw	s1,28(sp)
8000ccd8:	8fb00018 	lw	s0,24(sp)
8000ccdc:	03e00008 	jr	ra
8000cce0:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:85
}

int dup_fs(struct fs_struct *to, struct fs_struct *from)
{
	assert(to != NULL && from != NULL);
	assert(fs_count(to) == 0 && fs_count(from) > 0);
8000cce4:	3c068002 	lui	a2,0x8002
8000cce8:	3c078002 	lui	a3,0x8002
8000ccec:	24841e7c 	addiu	a0,a0,7804
8000ccf0:	24050055 	li	a1,85
8000ccf4:	24c60e28 	addiu	a2,a2,3624
8000ccf8:	0c006b0b 	jal	8001ac2c <__panic>
8000ccfc:	24e728c4 	addiu	a3,a3,10436
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/fs.c:84
	}
}

int dup_fs(struct fs_struct *to, struct fs_struct *from)
{
	assert(to != NULL && from != NULL);
8000cd00:	3c048002 	lui	a0,0x8002
8000cd04:	3c068002 	lui	a2,0x8002
8000cd08:	3c078002 	lui	a3,0x8002
8000cd0c:	24841e7c 	addiu	a0,a0,7804
8000cd10:	24050054 	li	a1,84
8000cd14:	24c60e28 	addiu	a2,a2,3624
8000cd18:	0c006b0b 	jal	8001ac2c <__panic>
8000cd1c:	24e728a8 	addiu	a3,a3,10408

8000cd20 <iobuf_init>:
iobuf_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:9
#include <error.h>
#include <assert.h>

struct iobuf *iobuf_init(struct iobuf *iob, void *base, size_t len,
			 off_t offset)
{
8000cd20:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:10
	iob->io_base = base;
8000cd24:	ac850000 	sw	a1,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:11
	iob->io_offset = offset;
8000cd28:	ac870004 	sw	a3,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:12
	iob->io_len = iob->io_resid = len;
8000cd2c:	ac86000c 	sw	a2,12(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:14
	return iob;
}
8000cd30:	03e00008 	jr	ra
8000cd34:	ac860008 	sw	a2,8(a0)

8000cd38 <iobuf_skip>:
iobuf_skip():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:57
	return (len == 0) ? 0 : -E_NO_MEM;
}

void iobuf_skip(struct iobuf *iob, size_t n)
{
	assert(iob->io_resid >= n);
8000cd38:	8c82000c 	lw	v0,12(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:56
	}
	return (len == 0) ? 0 : -E_NO_MEM;
}

void iobuf_skip(struct iobuf *iob, size_t n)
{
8000cd3c:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:57
	assert(iob->io_resid >= n);
8000cd40:	0045182b 	sltu	v1,v0,a1
8000cd44:	1460000c 	bnez	v1,8000cd78 <iobuf_skip+0x40>
8000cd48:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:58
	iob->io_base += n, iob->io_offset += n, iob->io_resid -= n;
8000cd4c:	8c830000 	lw	v1,0(a0)
8000cd50:	8c860004 	lw	a2,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:59
}
8000cd54:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:58
}

void iobuf_skip(struct iobuf *iob, size_t n)
{
	assert(iob->io_resid >= n);
	iob->io_base += n, iob->io_offset += n, iob->io_resid -= n;
8000cd58:	00451023 	subu	v0,v0,a1
8000cd5c:	00651821 	addu	v1,v1,a1
8000cd60:	00c52821 	addu	a1,a2,a1
8000cd64:	ac830000 	sw	v1,0(a0)
8000cd68:	ac850004 	sw	a1,4(a0)
8000cd6c:	ac82000c 	sw	v0,12(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:59
}
8000cd70:	03e00008 	jr	ra
8000cd74:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:57
	return (len == 0) ? 0 : -E_NO_MEM;
}

void iobuf_skip(struct iobuf *iob, size_t n)
{
	assert(iob->io_resid >= n);
8000cd78:	3c048002 	lui	a0,0x8002
8000cd7c:	3c068002 	lui	a2,0x8002
8000cd80:	3c078002 	lui	a3,0x8002
8000cd84:	248428ec 	addiu	a0,a0,10476
8000cd88:	24050039 	li	a1,57
8000cd8c:	24c60e28 	addiu	a2,a2,3624
8000cd90:	0c006b0b 	jal	8001ac2c <__panic>
8000cd94:	24e728f4 	addiu	a3,a3,10484

8000cd98 <iobuf_move_zeros>:
iobuf_move_zeros():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:42
}

int iobuf_move_zeros(struct iobuf *iob, size_t len, size_t * copiedp)
{
	size_t alen;
	if ((alen = iob->io_resid) > len) {
8000cd98:	8c82000c 	lw	v0,12(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:40
	}
	return (len == 0) ? 0 : -E_NO_MEM;
}

int iobuf_move_zeros(struct iobuf *iob, size_t len, size_t * copiedp)
{
8000cd9c:	27bdffd8 	addiu	sp,sp,-40
8000cda0:	afb10018 	sw	s1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:42
	size_t alen;
	if ((alen = iob->io_resid) > len) {
8000cda4:	0045882b 	sltu	s1,v0,a1
8000cda8:	00b1100a 	movz	v0,a1,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:40
	}
	return (len == 0) ? 0 : -E_NO_MEM;
}

int iobuf_move_zeros(struct iobuf *iob, size_t len, size_t * copiedp)
{
8000cdac:	afb30020 	sw	s3,32(sp)
8000cdb0:	afb2001c 	sw	s2,28(sp)
8000cdb4:	afb00014 	sw	s0,20(sp)
8000cdb8:	afbf0024 	sw	ra,36(sp)
8000cdbc:	00809821 	move	s3,a0
8000cdc0:	00a08021 	move	s0,a1
8000cdc4:	00c09021 	move	s2,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:45
	size_t alen;
	if ((alen = iob->io_resid) > len) {
		alen = len;
	}
	if (alen > 0) {
8000cdc8:	1440000c 	bnez	v0,8000cdfc <iobuf_move_zeros+0x64>
8000cdcc:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:49
		memset(iob->io_base, 0, alen);
		iobuf_skip(iob, alen), len -= alen;
	}
	if (copiedp != NULL) {
8000cdd0:	56400001 	bnezl	s2,8000cdd8 <iobuf_move_zeros+0x40>
8000cdd4:	ae510000 	sw	s1,0(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:53
		*copiedp = alen;
	}
	return (len == 0) ? 0 : -E_NO_MEM;
}
8000cdd8:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:52
		iobuf_skip(iob, alen), len -= alen;
	}
	if (copiedp != NULL) {
		*copiedp = alen;
	}
	return (len == 0) ? 0 : -E_NO_MEM;
8000cddc:	2402fff4 	li	v0,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:53
}
8000cde0:	0010100a 	movz	v0,zero,s0
8000cde4:	8fb30020 	lw	s3,32(sp)
8000cde8:	8fb2001c 	lw	s2,28(sp)
8000cdec:	8fb10018 	lw	s1,24(sp)
8000cdf0:	8fb00014 	lw	s0,20(sp)
8000cdf4:	03e00008 	jr	ra
8000cdf8:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:46
	size_t alen;
	if ((alen = iob->io_resid) > len) {
		alen = len;
	}
	if (alen > 0) {
		memset(iob->io_base, 0, alen);
8000cdfc:	8c840000 	lw	a0,0(a0)
8000ce00:	00403021 	move	a2,v0
8000ce04:	0c005c52 	jal	80017148 <memset>
8000ce08:	00002821 	move	a1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:47
		iobuf_skip(iob, alen), len -= alen;
8000ce0c:	02602021 	move	a0,s3
8000ce10:	0c00334e 	jal	8000cd38 <iobuf_skip>
8000ce14:	02202821 	move	a1,s1
8000ce18:	08003374 	j	8000cdd0 <iobuf_move_zeros+0x38>
8000ce1c:	02118023 	subu	s0,s0,s1

8000ce20 <iobuf_move>:
iobuf_move():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:21
int
iobuf_move(struct iobuf *iob, void *data, size_t len, bool m2b,
	   size_t * copiedp)
{
	size_t alen;
	if ((alen = iob->io_resid) > len) {
8000ce20:	8c82000c 	lw	v0,12(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:19
}

int
iobuf_move(struct iobuf *iob, void *data, size_t len, bool m2b,
	   size_t * copiedp)
{
8000ce24:	27bdffd8 	addiu	sp,sp,-40
8000ce28:	afb10018 	sw	s1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:21
	size_t alen;
	if ((alen = iob->io_resid) > len) {
8000ce2c:	0046882b 	sltu	s1,v0,a2
8000ce30:	00d1100a 	movz	v0,a2,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:19
}

int
iobuf_move(struct iobuf *iob, void *data, size_t len, bool m2b,
	   size_t * copiedp)
{
8000ce34:	afb30020 	sw	s3,32(sp)
8000ce38:	afb2001c 	sw	s2,28(sp)
8000ce3c:	afb00014 	sw	s0,20(sp)
8000ce40:	afbf0024 	sw	ra,36(sp)
8000ce44:	00809021 	move	s2,a0
8000ce48:	00c08021 	move	s0,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:21
	size_t alen;
	if ((alen = iob->io_resid) > len) {
8000ce4c:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:24
		alen = len;
	}
	if (alen > 0) {
8000ce50:	1040000b 	beqz	v0,8000ce80 <iobuf_move+0x60>
8000ce54:	8fb30038 	lw	s3,56(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:25
		void *src = iob->io_base, *dst = data;
8000ce58:	8c820000 	lw	v0,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:26
		if (m2b) {
8000ce5c:	14e00013 	bnez	a3,8000ceac <iobuf_move+0x8c>
8000ce60:	00a02021 	move	a0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:30
			void *tmp = src;
			src = dst, dst = tmp;
		}
		memmove(dst, src, alen);
8000ce64:	02203021 	move	a2,s1
8000ce68:	0c005c5c 	jal	80017170 <memmove>
8000ce6c:	00402821 	move	a1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:31
		iobuf_skip(iob, alen), len -= alen;
8000ce70:	02402021 	move	a0,s2
8000ce74:	0c00334e 	jal	8000cd38 <iobuf_skip>
8000ce78:	02202821 	move	a1,s1
8000ce7c:	02118023 	subu	s0,s0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:33
	}
	if (copiedp != NULL) {
8000ce80:	56600001 	bnezl	s3,8000ce88 <iobuf_move+0x68>
8000ce84:	ae710000 	sw	s1,0(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:37
		*copiedp = alen;
	}
	return (len == 0) ? 0 : -E_NO_MEM;
}
8000ce88:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:36
		iobuf_skip(iob, alen), len -= alen;
	}
	if (copiedp != NULL) {
		*copiedp = alen;
	}
	return (len == 0) ? 0 : -E_NO_MEM;
8000ce8c:	2402fff4 	li	v0,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:37
}
8000ce90:	0010100a 	movz	v0,zero,s0
8000ce94:	8fb30020 	lw	s3,32(sp)
8000ce98:	8fb2001c 	lw	s2,28(sp)
8000ce9c:	8fb10018 	lw	s1,24(sp)
8000cea0:	8fb00014 	lw	s0,20(sp)
8000cea4:	03e00008 	jr	ra
8000cea8:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:28
	}
	if (alen > 0) {
		void *src = iob->io_base, *dst = data;
		if (m2b) {
			void *tmp = src;
			src = dst, dst = tmp;
8000ceac:	00402021 	move	a0,v0
8000ceb0:	00a01021 	move	v0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:30
		}
		memmove(dst, src, alen);
8000ceb4:	02203021 	move	a2,s1
8000ceb8:	0c005c5c 	jal	80017170 <memmove>
8000cebc:	00402821 	move	a1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/iobuf.c:31
		iobuf_skip(iob, alen), len -= alen;
8000cec0:	02402021 	move	a0,s2
8000cec4:	0c00334e 	jal	8000cd38 <iobuf_skip>
8000cec8:	02202821 	move	a1,s1
8000cecc:	080033a0 	j	8000ce80 <iobuf_move+0x60>
8000ced0:	02118023 	subu	s0,s0,s1

8000ced4 <copy_path>:
copy_path():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:21

#define IOBUF_SIZE                          4096

static int copy_path(char **to, const char *from)
{
	struct mm_struct *mm = pls_read(current)->mm;
8000ced4:	3c028015 	lui	v0,0x8015
8000ced8:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:20
#include <mips_io.h>

#define IOBUF_SIZE                          4096

static int copy_path(char **to, const char *from)
{
8000cedc:	27bdffd8 	addiu	sp,sp,-40
8000cee0:	afb2001c 	sw	s2,28(sp)
8000cee4:	00809021 	move	s2,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:23
	struct mm_struct *mm = pls_read(current)->mm;
	char *buffer;
	if ((buffer = kmalloc(FS_MAX_FPATH_LEN + 1)) == NULL) {
8000cee8:	24041000 	li	a0,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:20
#include <mips_io.h>

#define IOBUF_SIZE                          4096

static int copy_path(char **to, const char *from)
{
8000ceec:	afb30020 	sw	s3,32(sp)
8000cef0:	afb10018 	sw	s1,24(sp)
8000cef4:	afb00014 	sw	s0,20(sp)
8000cef8:	afbf0024 	sw	ra,36(sp)
8000cefc:	00a09821 	move	s3,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:23
	struct mm_struct *mm = pls_read(current)->mm;
	char *buffer;
	if ((buffer = kmalloc(FS_MAX_FPATH_LEN + 1)) == NULL) {
8000cf00:	0c005486 	jal	80015218 <kmalloc>
8000cf04:	8c510020 	lw	s1,32(v0)
8000cf08:	00408021 	move	s0,v0
8000cf0c:	1200000e 	beqz	s0,8000cf48 <copy_path+0x74>
8000cf10:	2402fff4 	li	v0,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:26
		return -E_NO_MEM;
	}
	lock_mm(mm);
8000cf14:	0c004c26 	jal	80013098 <lock_mm>
8000cf18:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:27
	if (!copy_string(mm, buffer, from, FS_MAX_FPATH_LEN + 1)) {
8000cf1c:	02202021 	move	a0,s1
8000cf20:	02002821 	move	a1,s0
8000cf24:	02603021 	move	a2,s3
8000cf28:	0c007961 	jal	8001e584 <copy_string>
8000cf2c:	24071000 	li	a3,4096
8000cf30:	1040000c 	beqz	v0,8000cf64 <copy_path+0x90>
8000cf34:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:31
		unlock_mm(mm);
		goto failed_cleanup;
	}
	unlock_mm(mm);
8000cf38:	0c004c37 	jal	800130dc <unlock_mm>
8000cf3c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:32
	*to = buffer;
8000cf40:	ae500000 	sw	s0,0(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:33
	return 0;
8000cf44:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:38

failed_cleanup:
	kfree(buffer);
	return -E_INVAL;
}
8000cf48:	8fbf0024 	lw	ra,36(sp)
8000cf4c:	8fb30020 	lw	s3,32(sp)
8000cf50:	8fb2001c 	lw	s2,28(sp)
8000cf54:	8fb10018 	lw	s1,24(sp)
8000cf58:	8fb00014 	lw	s0,20(sp)
8000cf5c:	03e00008 	jr	ra
8000cf60:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:28
	if ((buffer = kmalloc(FS_MAX_FPATH_LEN + 1)) == NULL) {
		return -E_NO_MEM;
	}
	lock_mm(mm);
	if (!copy_string(mm, buffer, from, FS_MAX_FPATH_LEN + 1)) {
		unlock_mm(mm);
8000cf64:	0c004c37 	jal	800130dc <unlock_mm>
8000cf68:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:36
	unlock_mm(mm);
	*to = buffer;
	return 0;

failed_cleanup:
	kfree(buffer);
8000cf6c:	0c0054b1 	jal	800152c4 <kfree>
8000cf70:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:37
	return -E_INVAL;
8000cf74:	080033d2 	j	8000cf48 <copy_path+0x74>
8000cf78:	2402ffea 	li	v0,-22

8000cf7c <sysfile_open>:
sysfile_open():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:41
}

int sysfile_open(const char *__path, uint32_t open_flags)
{
8000cf7c:	27bdffd8 	addiu	sp,sp,-40
8000cf80:	00801021 	move	v0,a0
8000cf84:	afb00020 	sw	s0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:44
	int ret;
	char *path;
	if ((ret = copy_path(&path, __path)) != 0) {
8000cf88:	27a40010 	addiu	a0,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:41
	kfree(buffer);
	return -E_INVAL;
}

int sysfile_open(const char *__path, uint32_t open_flags)
{
8000cf8c:	00a08021 	move	s0,a1
8000cf90:	afbf0024 	sw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:44
	int ret;
	char *path;
	if ((ret = copy_path(&path, __path)) != 0) {
8000cf94:	0c0033b5 	jal	8000ced4 <copy_path>
8000cf98:	00402821 	move	a1,v0
8000cf9c:	14400009 	bnez	v0,8000cfc4 <sysfile_open+0x48>
8000cfa0:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:47
		return ret;
	}
	ret = file_open(path, open_flags);
8000cfa4:	8fa40010 	lw	a0,16(sp)
8000cfa8:	0c002dfe 	jal	8000b7f8 <file_open>
8000cfac:	02002821 	move	a1,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:48
	kfree(path);
8000cfb0:	8fa40010 	lw	a0,16(sp)
8000cfb4:	0c0054b1 	jal	800152c4 <kfree>
8000cfb8:	afa20018 	sw	v0,24(sp)
8000cfbc:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:50
	return ret;
}
8000cfc0:	8fbf0024 	lw	ra,36(sp)
8000cfc4:	8fb00020 	lw	s0,32(sp)
8000cfc8:	03e00008 	jr	ra
8000cfcc:	27bd0028 	addiu	sp,sp,40

8000cfd0 <sysfile_close>:
sysfile_close():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:54

int sysfile_close(int fd)
{
	return file_close(fd);
8000cfd0:	08002e63 	j	8000b98c <file_close>
8000cfd4:	00000000 	nop

8000cfd8 <sysfile_read>:
sysfile_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:62
int sysfile_read(int fd, void *base, size_t len)
{
	int ret = 0;
	//kprintf("*base=%d\n\r",*(int*)base);
	//kprintf("len=%d\n\r",len);
	struct mm_struct *mm = pls_read(current)->mm;
8000cfd8:	3c028015 	lui	v0,0x8015
8000cfdc:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:58
{
	return file_close(fd);
}

int sysfile_read(int fd, void *base, size_t len)
{
8000cfe0:	27bdffc0 	addiu	sp,sp,-64
8000cfe4:	afb5002c 	sw	s5,44(sp)
8000cfe8:	afb30024 	sw	s3,36(sp)
8000cfec:	afb20020 	sw	s2,32(sp)
8000cff0:	afb1001c 	sw	s1,28(sp)
8000cff4:	afb00018 	sw	s0,24(sp)
8000cff8:	afbf003c 	sw	ra,60(sp)
8000cffc:	afbe0038 	sw	s8,56(sp)
8000d000:	afb70034 	sw	s7,52(sp)
8000d004:	afb60030 	sw	s6,48(sp)
8000d008:	afb40028 	sw	s4,40(sp)
8000d00c:	00c08021 	move	s0,a2
8000d010:	00809021 	move	s2,a0
8000d014:	00a0a821 	move	s5,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:62
	int ret = 0;
	//kprintf("*base=%d\n\r",*(int*)base);
	//kprintf("len=%d\n\r",len);
	struct mm_struct *mm = pls_read(current)->mm;
8000d018:	8c530020 	lw	s3,32(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:64
	//kprintf("ok1\n\r");
	if (len == 0) {
8000d01c:	14c0000e 	bnez	a2,8000d058 <sysfile_read+0x80>
8000d020:	00008821 	move	s1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:115
	kfree(buffer);
	if (copied != 0) {
		return copied;
	}
	return ret;
}
8000d024:	8fbf003c 	lw	ra,60(sp)
8000d028:	02201021 	move	v0,s1
8000d02c:	8fbe0038 	lw	s8,56(sp)
8000d030:	8fb70034 	lw	s7,52(sp)
8000d034:	8fb60030 	lw	s6,48(sp)
8000d038:	8fb5002c 	lw	s5,44(sp)
8000d03c:	8fb40028 	lw	s4,40(sp)
8000d040:	8fb30024 	lw	s3,36(sp)
8000d044:	8fb20020 	lw	s2,32(sp)
8000d048:	8fb1001c 	lw	s1,28(sp)
8000d04c:	8fb00018 	lw	s0,24(sp)
8000d050:	03e00008 	jr	ra
8000d054:	27bd0040 	addiu	sp,sp,64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:68
	//kprintf("ok1\n\r");
	if (len == 0) {
		return 0;
	}

	if (!file_testfd(fd, 1, 0)) {
8000d058:	24050001 	li	a1,1
8000d05c:	0c002dd6 	jal	8000b758 <file_testfd>
8000d060:	00003021 	move	a2,zero
8000d064:	1040ffef 	beqz	v0,8000d024 <sysfile_read+0x4c>
8000d068:	2411ffea 	li	s1,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:73
		return -E_INVAL;
	}
	//kprintf("ok2\n\r");
	/* for linux inode */
	if (__is_linux_devfile(fd)) {
8000d06c:	0c00312f 	jal	8000c4bc <__is_linux_devfile>
8000d070:	02402021 	move	a0,s2
8000d074:	1440003f 	bnez	v0,8000d174 <sysfile_read+0x19c>
8000d078:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:81
		if (ret)
			return ret;
		return alen;
	}
	void *buffer;
	if ((buffer = kmalloc(IOBUF_SIZE)) == NULL) {
8000d07c:	0c005486 	jal	80015218 <kmalloc>
8000d080:	24041000 	li	a0,4096
8000d084:	1040004f 	beqz	v0,8000d1c4 <sysfile_read+0x1ec>
8000d088:	0040a021 	move	s4,v0
8000d08c:	0000b821 	move	s7,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:87
		return -E_NO_MEM;
	}

	size_t copied = 0, alen;
	while (len != 0) {
		if ((alen = IOBUF_SIZE) > len) {
8000d090:	24161000 	li	s6,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:99
				if (copy_to_user(mm, base, buffer, alen)) {
					assert(len >= alen);
					base += alen, len -= alen, copied +=
					    alen;
				} else if (ret == 0) {
					ret = -E_INVAL;
8000d094:	241effea 	li	s8,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:87
		return -E_NO_MEM;
	}

	size_t copied = 0, alen;
	while (len != 0) {
		if ((alen = IOBUF_SIZE) > len) {
8000d098:	2e021000 	sltiu	v0,s0,4096
8000d09c:	afb60010 	sw	s6,16(sp)
8000d0a0:	10400003 	beqz	v0,8000d0b0 <sysfile_read+0xd8>
8000d0a4:	24061000 	li	a2,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:88
			alen = len;
8000d0a8:	afb00010 	sw	s0,16(sp)
8000d0ac:	02003021 	move	a2,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:90
		}
		ret = file_read(fd, buffer, alen, &alen);
8000d0b0:	02402021 	move	a0,s2
8000d0b4:	02802821 	move	a1,s4
8000d0b8:	0c002e80 	jal	8000ba00 <file_read>
8000d0bc:	27a70010 	addiu	a3,sp,16
8000d0c0:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:91
		if (alen != 0) {
8000d0c4:	8fa20010 	lw	v0,16(sp)
8000d0c8:	14400017 	bnez	v0,8000d128 <sysfile_read+0x150>
8000d0cc:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:104
					ret = -E_INVAL;
				}
			}
			unlock_mm(mm);
		}
		if (ret != 0 || alen == 0) {
8000d0d0:	16200005 	bnez	s1,8000d0e8 <sysfile_read+0x110>
8000d0d4:	8fa20010 	lw	v0,16(sp)
8000d0d8:	10400003 	beqz	v0,8000d0e8 <sysfile_read+0x110>
8000d0dc:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:86
	if ((buffer = kmalloc(IOBUF_SIZE)) == NULL) {
		return -E_NO_MEM;
	}

	size_t copied = 0, alen;
	while (len != 0) {
8000d0e0:	1600ffee 	bnez	s0,8000d09c <sysfile_read+0xc4>
8000d0e4:	2e021000 	sltiu	v0,s0,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:110
			goto out;
		}
	}

out:
	kfree(buffer);
8000d0e8:	0c0054b1 	jal	800152c4 <kfree>
8000d0ec:	02802021 	move	a0,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:115
	if (copied != 0) {
		return copied;
	}
	return ret;
}
8000d0f0:	8fbf003c 	lw	ra,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:112
	}

out:
	kfree(buffer);
	if (copied != 0) {
		return copied;
8000d0f4:	02f7880b 	movn	s1,s7,s7
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:115
	}
	return ret;
}
8000d0f8:	02201021 	move	v0,s1
8000d0fc:	8fbe0038 	lw	s8,56(sp)
8000d100:	8fb70034 	lw	s7,52(sp)
8000d104:	8fb60030 	lw	s6,48(sp)
8000d108:	8fb5002c 	lw	s5,44(sp)
8000d10c:	8fb40028 	lw	s4,40(sp)
8000d110:	8fb30024 	lw	s3,36(sp)
8000d114:	8fb20020 	lw	s2,32(sp)
8000d118:	8fb1001c 	lw	s1,28(sp)
8000d11c:	8fb00018 	lw	s0,24(sp)
8000d120:	03e00008 	jr	ra
8000d124:	27bd0040 	addiu	sp,sp,64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:92
		if ((alen = IOBUF_SIZE) > len) {
			alen = len;
		}
		ret = file_read(fd, buffer, alen, &alen);
		if (alen != 0) {
			lock_mm(mm);
8000d128:	0c004c26 	jal	80013098 <lock_mm>
8000d12c:	02602021 	move	a0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:94
			{
				if (copy_to_user(mm, base, buffer, alen)) {
8000d130:	8fa70010 	lw	a3,16(sp)
8000d134:	02602021 	move	a0,s3
8000d138:	02a02821 	move	a1,s5
8000d13c:	0c007948 	jal	8001e520 <copy_to_user>
8000d140:	02803021 	move	a2,s4
8000d144:	50400007 	beqzl	v0,8000d164 <sysfile_read+0x18c>
8000d148:	03d1880a 	movz	s1,s8,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:95
					assert(len >= alen);
8000d14c:	8fa20010 	lw	v0,16(sp)
8000d150:	0202182b 	sltu	v1,s0,v0
8000d154:	1460001d 	bnez	v1,8000d1cc <sysfile_read+0x1f4>
8000d158:	02a2a821 	addu	s5,s5,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:96
					base += alen, len -= alen, copied +=
8000d15c:	02028023 	subu	s0,s0,v0
8000d160:	02e2b821 	addu	s7,s7,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:102
					    alen;
				} else if (ret == 0) {
					ret = -E_INVAL;
				}
			}
			unlock_mm(mm);
8000d164:	0c004c37 	jal	800130dc <unlock_mm>
8000d168:	02602021 	move	a0,s3
8000d16c:	08003434 	j	8000d0d0 <sysfile_read+0xf8>
8000d170:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:75
	}
	//kprintf("ok2\n\r");
	/* for linux inode */
	if (__is_linux_devfile(fd)) {
		size_t alen = 0;//kprintf("ok2\n\r");
		ret = linux_devfile_read(fd, base, len, &alen);
8000d174:	02a02821 	move	a1,s5
8000d178:	02003021 	move	a2,s0
8000d17c:	27a70014 	addiu	a3,sp,20
8000d180:	0c003154 	jal	8000c550 <linux_devfile_read>
8000d184:	afa00014 	sw	zero,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:78
		if (ret)
			return ret;
		return alen;
8000d188:	8fb10014 	lw	s1,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:115
	kfree(buffer);
	if (copied != 0) {
		return copied;
	}
	return ret;
}
8000d18c:	8fbf003c 	lw	ra,60(sp)
8000d190:	8fbe0038 	lw	s8,56(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:78
	if (__is_linux_devfile(fd)) {
		size_t alen = 0;//kprintf("ok2\n\r");
		ret = linux_devfile_read(fd, base, len, &alen);
		if (ret)
			return ret;
		return alen;
8000d194:	0042880b 	movn	s1,v0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:115
	kfree(buffer);
	if (copied != 0) {
		return copied;
	}
	return ret;
}
8000d198:	02201021 	move	v0,s1
8000d19c:	8fb70034 	lw	s7,52(sp)
8000d1a0:	8fb60030 	lw	s6,48(sp)
8000d1a4:	8fb5002c 	lw	s5,44(sp)
8000d1a8:	8fb40028 	lw	s4,40(sp)
8000d1ac:	8fb30024 	lw	s3,36(sp)
8000d1b0:	8fb20020 	lw	s2,32(sp)
8000d1b4:	8fb1001c 	lw	s1,28(sp)
8000d1b8:	8fb00018 	lw	s0,24(sp)
8000d1bc:	03e00008 	jr	ra
8000d1c0:	27bd0040 	addiu	sp,sp,64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:82
			return ret;
		return alen;
	}
	void *buffer;
	if ((buffer = kmalloc(IOBUF_SIZE)) == NULL) {
		return -E_NO_MEM;
8000d1c4:	08003409 	j	8000d024 <sysfile_read+0x4c>
8000d1c8:	2411fff4 	li	s1,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:95
		ret = file_read(fd, buffer, alen, &alen);
		if (alen != 0) {
			lock_mm(mm);
			{
				if (copy_to_user(mm, base, buffer, alen)) {
					assert(len >= alen);
8000d1cc:	3c048002 	lui	a0,0x8002
8000d1d0:	3c068002 	lui	a2,0x8002
8000d1d4:	3c078002 	lui	a3,0x8002
8000d1d8:	24842908 	addiu	a0,a0,10504
8000d1dc:	2405005f 	li	a1,95
8000d1e0:	24c60e28 	addiu	a2,a2,3624
8000d1e4:	0c006b0b 	jal	8001ac2c <__panic>
8000d1e8:	24e72914 	addiu	a3,a3,10516

8000d1ec <sysfile_write>:
sysfile_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:120
}

int sysfile_write(int fd, void *base, size_t len)
{
	int ret = 0;
	struct mm_struct *mm = pls_read(current)->mm;
8000d1ec:	3c028015 	lui	v0,0x8015
8000d1f0:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:118
	}
	return ret;
}

int sysfile_write(int fd, void *base, size_t len)
{
8000d1f4:	27bdffb8 	addiu	sp,sp,-72
8000d1f8:	afb70040 	sw	s7,64(sp)
8000d1fc:	afb30030 	sw	s3,48(sp)
8000d200:	afb2002c 	sw	s2,44(sp)
8000d204:	afb10028 	sw	s1,40(sp)
8000d208:	afb00024 	sw	s0,36(sp)
8000d20c:	afbf0044 	sw	ra,68(sp)
8000d210:	afb6003c 	sw	s6,60(sp)
8000d214:	afb50038 	sw	s5,56(sp)
8000d218:	afb40034 	sw	s4,52(sp)
8000d21c:	00c08021 	move	s0,a2
8000d220:	00809821 	move	s3,a0
8000d224:	00a09021 	move	s2,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:120
	int ret = 0;
	struct mm_struct *mm = pls_read(current)->mm;
8000d228:	8c510020 	lw	s1,32(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:121
	if (len == 0) {
8000d22c:	14c0000d 	bnez	a2,8000d264 <sysfile_write+0x78>
8000d230:	0000b821 	move	s7,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:172
	kfree(buffer);
	if (copied != 0) {
		return copied;
	}
	return ret;
}
8000d234:	8fbf0044 	lw	ra,68(sp)
8000d238:	02e01021 	move	v0,s7
8000d23c:	8fb6003c 	lw	s6,60(sp)
8000d240:	8fb70040 	lw	s7,64(sp)
8000d244:	8fb50038 	lw	s5,56(sp)
8000d248:	8fb40034 	lw	s4,52(sp)
8000d24c:	8fb30030 	lw	s3,48(sp)
8000d250:	8fb2002c 	lw	s2,44(sp)
8000d254:	8fb10028 	lw	s1,40(sp)
8000d258:	8fb00024 	lw	s0,36(sp)
8000d25c:	03e00008 	jr	ra
8000d260:	27bd0048 	addiu	sp,sp,72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:124
	int ret = 0;
	struct mm_struct *mm = pls_read(current)->mm;
	if (len == 0) {
		return 0;
	}
	if (!file_testfd(fd, 0, 1)) {
8000d264:	00002821 	move	a1,zero
8000d268:	0c002dd6 	jal	8000b758 <file_testfd>
8000d26c:	24060001 	li	a2,1
8000d270:	1040fff0 	beqz	v0,8000d234 <sysfile_write+0x48>
8000d274:	2417ffea 	li	s7,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:128
		return -E_INVAL;
	}
	/* for linux inode */
	if (__is_linux_devfile(fd)) {
8000d278:	0c00312f 	jal	8000c4bc <__is_linux_devfile>
8000d27c:	02602021 	move	a0,s3
8000d280:	14400039 	bnez	v0,8000d368 <sysfile_write+0x17c>
8000d284:	02602021 	move	a0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:138
		if (ret)
			return ret;
		return alen;
	}
	void *buffer;
	if ((buffer = kmalloc(IOBUF_SIZE)) == NULL) {
8000d288:	0c005486 	jal	80015218 <kmalloc>
8000d28c:	24041000 	li	a0,4096
8000d290:	1040004e 	beqz	v0,8000d3cc <sysfile_write+0x1e0>
8000d294:	0040a021 	move	s4,v0
8000d298:	0000b021 	move	s6,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:144
		return -E_NO_MEM;
	}

	size_t copied = 0, alen;
	while (len != 0) {
		if ((alen = IOBUF_SIZE) > len) {
8000d29c:	24151000 	li	s5,4096
8000d2a0:	2e021000 	sltiu	v0,s0,4096
8000d2a4:	10400002 	beqz	v0,8000d2b0 <sysfile_write+0xc4>
8000d2a8:	afb50018 	sw	s5,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:145
			alen = len;
8000d2ac:	afb00018 	sw	s0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:147
		}
		lock_mm(mm);
8000d2b0:	0c004c26 	jal	80013098 <lock_mm>
8000d2b4:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:149
		{
			if (!copy_from_user(mm, buffer, base, alen, 0)) {
8000d2b8:	8fa70018 	lw	a3,24(sp)
8000d2bc:	02202021 	move	a0,s1
8000d2c0:	02802821 	move	a1,s4
8000d2c4:	02403021 	move	a2,s2
8000d2c8:	0c00792e 	jal	8001e4b8 <copy_from_user>
8000d2cc:	afa00010 	sw	zero,16(sp)
8000d2d0:	10400038 	beqz	v0,8000d3b4 <sysfile_write+0x1c8>
8000d2d4:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:153
				ret = -E_INVAL;
			}
		}
		unlock_mm(mm);
8000d2d8:	0c004c37 	jal	800130dc <unlock_mm>
8000d2dc:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:155
		if (ret == 0) {
			ret = file_write(fd, buffer, alen, &alen);
8000d2e0:	8fa60018 	lw	a2,24(sp)
8000d2e4:	02602021 	move	a0,s3
8000d2e8:	02802821 	move	a1,s4
8000d2ec:	0c002edf 	jal	8000bb7c <file_write>
8000d2f0:	27a70018 	addiu	a3,sp,24
8000d2f4:	0040b821 	move	s7,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:156
			if (alen != 0) {
8000d2f8:	8fa20018 	lw	v0,24(sp)
8000d2fc:	10400005 	beqz	v0,8000d314 <sysfile_write+0x128>
8000d300:	0202182b 	sltu	v1,s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:157
				assert(len >= alen);
8000d304:	14600033 	bnez	v1,8000d3d4 <sysfile_write+0x1e8>
8000d308:	02429021 	addu	s2,s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:158
				base += alen, len -= alen, copied += alen;
8000d30c:	02028023 	subu	s0,s0,v0
8000d310:	02c2b021 	addu	s6,s6,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:161
			}
		}
		if (ret != 0 || alen == 0) {
8000d314:	16e00005 	bnez	s7,8000d32c <sysfile_write+0x140>
8000d318:	00000000 	nop
8000d31c:	10400003 	beqz	v0,8000d32c <sysfile_write+0x140>
8000d320:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:143
	if ((buffer = kmalloc(IOBUF_SIZE)) == NULL) {
		return -E_NO_MEM;
	}

	size_t copied = 0, alen;
	while (len != 0) {
8000d324:	1600ffdf 	bnez	s0,8000d2a4 <sysfile_write+0xb8>
8000d328:	2e021000 	sltiu	v0,s0,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:167
			goto out;
		}
	}

out:
	kfree(buffer);
8000d32c:	0c0054b1 	jal	800152c4 <kfree>
8000d330:	02802021 	move	a0,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:169
	if (copied != 0) {
		return copied;
8000d334:	02d6b80b 	movn	s7,s6,s6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:172
	}
	return ret;
}
8000d338:	8fbf0044 	lw	ra,68(sp)
8000d33c:	02e01021 	move	v0,s7
8000d340:	8fb6003c 	lw	s6,60(sp)
8000d344:	8fb70040 	lw	s7,64(sp)
8000d348:	8fb50038 	lw	s5,56(sp)
8000d34c:	8fb40034 	lw	s4,52(sp)
8000d350:	8fb30030 	lw	s3,48(sp)
8000d354:	8fb2002c 	lw	s2,44(sp)
8000d358:	8fb10028 	lw	s1,40(sp)
8000d35c:	8fb00024 	lw	s0,36(sp)
8000d360:	03e00008 	jr	ra
8000d364:	27bd0048 	addiu	sp,sp,72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:132
	/* for linux inode */
	if (__is_linux_devfile(fd)) {
		/* use 8byte int, in case of 64bit off_t
		 * config in linux kernel */
		size_t alen = 0;
		ret = linux_devfile_write(fd, base, len, &alen);
8000d368:	02402821 	move	a1,s2
8000d36c:	02003021 	move	a2,s0
8000d370:	27a7001c 	addiu	a3,sp,28
8000d374:	0c0031a0 	jal	8000c680 <linux_devfile_write>
8000d378:	afa0001c 	sw	zero,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:135
		if (ret)
			return ret;
		return alen;
8000d37c:	8fb7001c 	lw	s7,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:172
	kfree(buffer);
	if (copied != 0) {
		return copied;
	}
	return ret;
}
8000d380:	8fbf0044 	lw	ra,68(sp)
8000d384:	8fb6003c 	lw	s6,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:135
		 * config in linux kernel */
		size_t alen = 0;
		ret = linux_devfile_write(fd, base, len, &alen);
		if (ret)
			return ret;
		return alen;
8000d388:	0042b80b 	movn	s7,v0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:172
	kfree(buffer);
	if (copied != 0) {
		return copied;
	}
	return ret;
}
8000d38c:	02e01021 	move	v0,s7
8000d390:	8fb50038 	lw	s5,56(sp)
8000d394:	8fb70040 	lw	s7,64(sp)
8000d398:	8fb40034 	lw	s4,52(sp)
8000d39c:	8fb30030 	lw	s3,48(sp)
8000d3a0:	8fb2002c 	lw	s2,44(sp)
8000d3a4:	8fb10028 	lw	s1,40(sp)
8000d3a8:	8fb00024 	lw	s0,36(sp)
8000d3ac:	03e00008 	jr	ra
8000d3b0:	27bd0048 	addiu	sp,sp,72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:153
		{
			if (!copy_from_user(mm, buffer, base, alen, 0)) {
				ret = -E_INVAL;
			}
		}
		unlock_mm(mm);
8000d3b4:	0c004c37 	jal	800130dc <unlock_mm>
8000d3b8:	2417ffea 	li	s7,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:167
			goto out;
		}
	}

out:
	kfree(buffer);
8000d3bc:	0c0054b1 	jal	800152c4 <kfree>
8000d3c0:	02802021 	move	a0,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:169
	if (copied != 0) {
		return copied;
8000d3c4:	080034ce 	j	8000d338 <sysfile_write+0x14c>
8000d3c8:	02d6b80b 	movn	s7,s6,s6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:139
			return ret;
		return alen;
	}
	void *buffer;
	if ((buffer = kmalloc(IOBUF_SIZE)) == NULL) {
		return -E_NO_MEM;
8000d3cc:	0800348d 	j	8000d234 <sysfile_write+0x48>
8000d3d0:	2417fff4 	li	s7,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:157
		}
		unlock_mm(mm);
		if (ret == 0) {
			ret = file_write(fd, buffer, alen, &alen);
			if (alen != 0) {
				assert(len >= alen);
8000d3d4:	3c048002 	lui	a0,0x8002
8000d3d8:	3c068002 	lui	a2,0x8002
8000d3dc:	3c078002 	lui	a3,0x8002
8000d3e0:	24842908 	addiu	a0,a0,10504
8000d3e4:	2405009d 	li	a1,157
8000d3e8:	24c60e28 	addiu	a2,a2,3624
8000d3ec:	0c006b0b 	jal	8001ac2c <__panic>
8000d3f0:	24e72914 	addiu	a3,a3,10516

8000d3f4 <sysfile_writev>:
sysfile_writev():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:175
	}
	return ret;
}

int sysfile_writev(int fd, struct iovec __user * iov, int iovcnt)
{
8000d3f4:	27bdffc0 	addiu	sp,sp,-64
8000d3f8:	afb50038 	sw	s5,56(sp)
8000d3fc:	afb40034 	sw	s4,52(sp)
8000d400:	afb00024 	sw	s0,36(sp)
8000d404:	0080a821 	move	s5,a0
8000d408:	00a08021 	move	s0,a1
8000d40c:	00c0a021 	move	s4,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:177
	/* do nothing but return 0 */
	kprintf("writev: fd=%08x iov=%08x iovcnt=%d\n", fd, iov, iovcnt);
8000d410:	3c048002 	lui	a0,0x8002
8000d414:	24842920 	addiu	a0,a0,10528
8000d418:	02a02821 	move	a1,s5
8000d41c:	02003021 	move	a2,s0
8000d420:	02803821 	move	a3,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:175
	}
	return ret;
}

int sysfile_writev(int fd, struct iovec __user * iov, int iovcnt)
{
8000d424:	afb30030 	sw	s3,48(sp)
8000d428:	afbf003c 	sw	ra,60(sp)
8000d42c:	afb2002c 	sw	s2,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:177
	/* do nothing but return 0 */
	kprintf("writev: fd=%08x iov=%08x iovcnt=%d\n", fd, iov, iovcnt);
8000d430:	0c007a9e 	jal	8001ea78 <kprintf>
8000d434:	afb10028 	sw	s1,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:180
	struct iovec *tv;
	int rcode = 0, count = 0, i;
	struct mm_struct *mm = pls_read(current)->mm;
8000d438:	3c028015 	lui	v0,0x8015
8000d43c:	8c4377a4 	lw	v1,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:179
int sysfile_writev(int fd, struct iovec __user * iov, int iovcnt)
{
	/* do nothing but return 0 */
	kprintf("writev: fd=%08x iov=%08x iovcnt=%d\n", fd, iov, iovcnt);
	struct iovec *tv;
	int rcode = 0, count = 0, i;
8000d440:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:181
	struct mm_struct *mm = pls_read(current)->mm;
	for (i = 0; i < iovcnt; ++i) {
8000d444:	1a80001b 	blez	s4,8000d4b4 <sysfile_writev+0xc0>
8000d448:	8c730020 	lw	s3,32(v1)
8000d44c:	00008821 	move	s1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:179
int sysfile_writev(int fd, struct iovec __user * iov, int iovcnt)
{
	/* do nothing but return 0 */
	kprintf("writev: fd=%08x iov=%08x iovcnt=%d\n", fd, iov, iovcnt);
	struct iovec *tv;
	int rcode = 0, count = 0, i;
8000d450:	08003518 	j	8000d460 <sysfile_writev+0x6c>
8000d454:	00009021 	move	s2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:181
	struct mm_struct *mm = pls_read(current)->mm;
	for (i = 0; i < iovcnt; ++i) {
8000d458:	12340015 	beq	s1,s4,8000d4b0 <sysfile_writev+0xbc>
8000d45c:	02429021 	addu	s2,s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:185
		char *pbase;
		size_t plen;

		copy_from_user(mm, &pbase, &(iov[i].iov_base), sizeof(char *),
8000d460:	02003021 	move	a2,s0
8000d464:	02602021 	move	a0,s3
8000d468:	27a5001c 	addiu	a1,sp,28
8000d46c:	24070004 	li	a3,4
8000d470:	0c00792e 	jal	8001e4b8 <copy_from_user>
8000d474:	afa00010 	sw	zero,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:187
			       0);
		copy_from_user(mm, &plen, &(iov[i].iov_len), sizeof(size_t), 0);
8000d478:	26060004 	addiu	a2,s0,4
8000d47c:	27a50018 	addiu	a1,sp,24
8000d480:	02602021 	move	a0,s3
8000d484:	24070004 	li	a3,4
8000d488:	0c00792e 	jal	8001e4b8 <copy_from_user>
8000d48c:	afa00010 	sw	zero,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:189

		rcode = sysfile_write(fd, pbase, plen);
8000d490:	8fa5001c 	lw	a1,28(sp)
8000d494:	8fa60018 	lw	a2,24(sp)
8000d498:	02a02021 	move	a0,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:181
	/* do nothing but return 0 */
	kprintf("writev: fd=%08x iov=%08x iovcnt=%d\n", fd, iov, iovcnt);
	struct iovec *tv;
	int rcode = 0, count = 0, i;
	struct mm_struct *mm = pls_read(current)->mm;
	for (i = 0; i < iovcnt; ++i) {
8000d49c:	26310001 	addiu	s1,s1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:189

		copy_from_user(mm, &pbase, &(iov[i].iov_base), sizeof(char *),
			       0);
		copy_from_user(mm, &plen, &(iov[i].iov_len), sizeof(size_t), 0);

		rcode = sysfile_write(fd, pbase, plen);
8000d4a0:	0c00347b 	jal	8000d1ec <sysfile_write>
8000d4a4:	26100008 	addiu	s0,s0,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:190
		if (rcode < 0)
8000d4a8:	0441ffeb 	bgez	v0,8000d458 <sysfile_writev+0x64>
8000d4ac:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:194
			break;
		count += rcode;
	}
	if (count == 0)
8000d4b0:	0252100b 	movn	v0,s2,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:198
		return (rcode);
	else
		return (count);
}
8000d4b4:	8fbf003c 	lw	ra,60(sp)
8000d4b8:	8fb50038 	lw	s5,56(sp)
8000d4bc:	8fb40034 	lw	s4,52(sp)
8000d4c0:	8fb30030 	lw	s3,48(sp)
8000d4c4:	8fb2002c 	lw	s2,44(sp)
8000d4c8:	8fb10028 	lw	s1,40(sp)
8000d4cc:	8fb00024 	lw	s0,36(sp)
8000d4d0:	03e00008 	jr	ra
8000d4d4:	27bd0040 	addiu	sp,sp,64

8000d4d8 <sysfile_seek>:
sysfile_seek():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:202

int sysfile_seek(int fd, off_t pos, int whence)
{
	return file_seek(fd, pos, whence);
8000d4d8:	08002f3e 	j	8000bcf8 <file_seek>
8000d4dc:	00000000 	nop

8000d4e0 <sysfile_fstat>:
sysfile_fstat():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:207
}

int sysfile_fstat(int fd, struct stat *__stat)
{
	struct mm_struct *mm = pls_read(current)->mm;
8000d4e0:	3c028015 	lui	v0,0x8015
8000d4e4:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:206
{
	return file_seek(fd, pos, whence);
}

int sysfile_fstat(int fd, struct stat *__stat)
{
8000d4e8:	27bdffd0 	addiu	sp,sp,-48
8000d4ec:	afb20028 	sw	s2,40(sp)
8000d4f0:	00a09021 	move	s2,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:210
	struct mm_struct *mm = pls_read(current)->mm;
	int ret;
	struct stat __local_stat, *stat = &__local_stat;
	if ((ret = file_fstat(fd, stat)) != 0) {
8000d4f4:	27a50010 	addiu	a1,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:206
{
	return file_seek(fd, pos, whence);
}

int sysfile_fstat(int fd, struct stat *__stat)
{
8000d4f8:	afb10024 	sw	s1,36(sp)
8000d4fc:	afb00020 	sw	s0,32(sp)
8000d500:	afbf002c 	sw	ra,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:210
	struct mm_struct *mm = pls_read(current)->mm;
	int ret;
	struct stat __local_stat, *stat = &__local_stat;
	if ((ret = file_fstat(fd, stat)) != 0) {
8000d504:	0c002fac 	jal	8000beb0 <file_fstat>
8000d508:	8c510020 	lw	s1,32(v0)
8000d50c:	1440000c 	bnez	v0,8000d540 <sysfile_fstat+0x60>
8000d510:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:214
		return ret;
	}

	lock_mm(mm);
8000d514:	0c004c26 	jal	80013098 <lock_mm>
8000d518:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:216
	{
		if (!copy_to_user(mm, __stat, stat, sizeof(struct stat))) {
8000d51c:	02202021 	move	a0,s1
8000d520:	02402821 	move	a1,s2
8000d524:	27a60010 	addiu	a2,sp,16
8000d528:	0c007948 	jal	8001e520 <copy_to_user>
8000d52c:	24070010 	li	a3,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:217
			ret = -E_INVAL;
8000d530:	2403ffea 	li	v1,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:220
		}
	}
	unlock_mm(mm);
8000d534:	02202021 	move	a0,s1
8000d538:	0c004c37 	jal	800130dc <unlock_mm>
8000d53c:	0062800a 	movz	s0,v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:222
	return ret;
}
8000d540:	8fbf002c 	lw	ra,44(sp)
8000d544:	02001021 	move	v0,s0
8000d548:	8fb20028 	lw	s2,40(sp)
8000d54c:	8fb10024 	lw	s1,36(sp)
8000d550:	8fb00020 	lw	s0,32(sp)
8000d554:	03e00008 	jr	ra
8000d558:	27bd0030 	addiu	sp,sp,48

8000d55c <sysfile_linux_fstat>:
sysfile_linux_fstat():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:226

int sysfile_linux_fstat(int fd, struct linux_stat __user * buf)
{
	struct mm_struct *mm = pls_read(current)->mm;
8000d55c:	3c028015 	lui	v0,0x8015
8000d560:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:225
	unlock_mm(mm);
	return ret;
}

int sysfile_linux_fstat(int fd, struct linux_stat __user * buf)
{
8000d564:	27bdffc8 	addiu	sp,sp,-56
8000d568:	afb2002c 	sw	s2,44(sp)
8000d56c:	00a09021 	move	s2,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:229
	struct mm_struct *mm = pls_read(current)->mm;
	int ret;
	struct stat __local_stat, *kstat = &__local_stat;
	if ((ret = file_fstat(fd, kstat)) != 0) {
8000d570:	27a50010 	addiu	a1,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:225
	unlock_mm(mm);
	return ret;
}

int sysfile_linux_fstat(int fd, struct linux_stat __user * buf)
{
8000d574:	afb30030 	sw	s3,48(sp)
8000d578:	afb10028 	sw	s1,40(sp)
8000d57c:	afbf0034 	sw	ra,52(sp)
8000d580:	afb00024 	sw	s0,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:229
	struct mm_struct *mm = pls_read(current)->mm;
	int ret;
	struct stat __local_stat, *kstat = &__local_stat;
	if ((ret = file_fstat(fd, kstat)) != 0) {
8000d584:	0c002fac 	jal	8000beb0 <file_fstat>
8000d588:	8c510020 	lw	s1,32(v0)
8000d58c:	14400022 	bnez	v0,8000d618 <sysfile_linux_fstat+0xbc>
8000d590:	2413ffff 	li	s3,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:232
		return -1;
	}
	struct linux_stat *kls = kmalloc(sizeof(struct linux_stat));
8000d594:	0c005486 	jal	80015218 <kmalloc>
8000d598:	24040040 	li	a0,64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:233
	if (!kls) {
8000d59c:	1040001e 	beqz	v0,8000d618 <sysfile_linux_fstat+0xbc>
8000d5a0:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:236
		return -1;
	}
	memset(kls, 0, sizeof(struct linux_stat));
8000d5a4:	00002821 	move	a1,zero
8000d5a8:	24060040 	li	a2,64
8000d5ac:	0c005c52 	jal	80017148 <memset>
8000d5b0:	00402021 	move	a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:239
	kls->st_ino = 1;
	/* ucore never check access permision */
	kls->st_mode = kstat->st_mode | 0777;
8000d5b4:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:237
	struct linux_stat *kls = kmalloc(sizeof(struct linux_stat));
	if (!kls) {
		return -1;
	}
	memset(kls, 0, sizeof(struct linux_stat));
	kls->st_ino = 1;
8000d5b8:	24030001 	li	v1,1
8000d5bc:	ae030004 	sw	v1,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:239
	/* ucore never check access permision */
	kls->st_mode = kstat->st_mode | 0777;
8000d5c0:	344201ff 	ori	v0,v0,0x1ff
8000d5c4:	a6020008 	sh	v0,8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:240
	kls->st_nlink = kstat->st_nlinks;
8000d5c8:	8fa20014 	lw	v0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:246
	kls->st_blksize = 512;
	kls->st_blocks = kstat->st_blocks;
	kls->st_size = kstat->st_size;

	ret = 0;
	lock_mm(mm);
8000d5cc:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:240
	}
	memset(kls, 0, sizeof(struct linux_stat));
	kls->st_ino = 1;
	/* ucore never check access permision */
	kls->st_mode = kstat->st_mode | 0777;
	kls->st_nlink = kstat->st_nlinks;
8000d5d0:	a602000a 	sh	v0,10(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:241
	kls->st_blksize = 512;
8000d5d4:	24020200 	li	v0,512
8000d5d8:	ae020018 	sw	v0,24(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:242
	kls->st_blocks = kstat->st_blocks;
8000d5dc:	8fa20018 	lw	v0,24(sp)
8000d5e0:	ae02001c 	sw	v0,28(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:243
	kls->st_size = kstat->st_size;
8000d5e4:	8fa2001c 	lw	v0,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:246

	ret = 0;
	lock_mm(mm);
8000d5e8:	0c004c26 	jal	80013098 <lock_mm>
8000d5ec:	ae020014 	sw	v0,20(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:248
	{
		if (!copy_to_user(mm, buf, kls, sizeof(struct linux_stat))) {
8000d5f0:	02202021 	move	a0,s1
8000d5f4:	02402821 	move	a1,s2
8000d5f8:	02003021 	move	a2,s0
8000d5fc:	0c007948 	jal	8001e520 <copy_to_user>
8000d600:	24070040 	li	a3,64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:252
			ret = -1;
		}
	}
	unlock_mm(mm);
8000d604:	02202021 	move	a0,s1
8000d608:	0c004c37 	jal	800130dc <unlock_mm>
8000d60c:	0002980b 	movn	s3,zero,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:253
	kfree(kls);
8000d610:	0c0054b1 	jal	800152c4 <kfree>
8000d614:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:255
	return ret;
}
8000d618:	8fbf0034 	lw	ra,52(sp)
8000d61c:	02601021 	move	v0,s3
8000d620:	8fb2002c 	lw	s2,44(sp)
8000d624:	8fb30030 	lw	s3,48(sp)
8000d628:	8fb10028 	lw	s1,40(sp)
8000d62c:	8fb00024 	lw	s0,36(sp)
8000d630:	03e00008 	jr	ra
8000d634:	27bd0038 	addiu	sp,sp,56

8000d638 <sysfile_linux_fstat64>:
sysfile_linux_fstat64():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:259

int sysfile_linux_fstat64(int fd, struct linux_stat64 __user * buf)
{
	struct mm_struct *mm = pls_read(current)->mm;
8000d638:	3c028015 	lui	v0,0x8015
8000d63c:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:258
	kfree(kls);
	return ret;
}

int sysfile_linux_fstat64(int fd, struct linux_stat64 __user * buf)
{
8000d640:	27bdffc8 	addiu	sp,sp,-56
8000d644:	afb2002c 	sw	s2,44(sp)
8000d648:	00a09021 	move	s2,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:262
	struct mm_struct *mm = pls_read(current)->mm;
	int ret;
	struct stat __local_stat, *kstat = &__local_stat;
	if ((ret = file_fstat(fd, kstat)) != 0) {
8000d64c:	27a50010 	addiu	a1,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:258
	kfree(kls);
	return ret;
}

int sysfile_linux_fstat64(int fd, struct linux_stat64 __user * buf)
{
8000d650:	afb30030 	sw	s3,48(sp)
8000d654:	afb10028 	sw	s1,40(sp)
8000d658:	afbf0034 	sw	ra,52(sp)
8000d65c:	afb00024 	sw	s0,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:262
	struct mm_struct *mm = pls_read(current)->mm;
	int ret;
	struct stat __local_stat, *kstat = &__local_stat;
	if ((ret = file_fstat(fd, kstat)) != 0) {
8000d660:	0c002fac 	jal	8000beb0 <file_fstat>
8000d664:	8c510020 	lw	s1,32(v0)
8000d668:	14400026 	bnez	v0,8000d704 <sysfile_linux_fstat64+0xcc>
8000d66c:	2413ffff 	li	s3,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:265
		return -1;
	}
	struct linux_stat64 *kls = kmalloc(sizeof(struct linux_stat64));
8000d670:	0c005486 	jal	80015218 <kmalloc>
8000d674:	24040068 	li	a0,104
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:266
	if (!kls) {
8000d678:	10400022 	beqz	v0,8000d704 <sysfile_linux_fstat64+0xcc>
8000d67c:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:269
		return -1;
	}
	memset(kls, 0, sizeof(struct linux_stat64));
8000d680:	00002821 	move	a1,zero
8000d684:	24060068 	li	a2,104
8000d688:	0c005c52 	jal	80017148 <memset>
8000d68c:	00402021 	move	a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:272
	kls->st_ino = 1;
	/* ucore never check access permision */
	kls->st_mode = kstat->st_mode | 0777;
8000d690:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:270
	struct linux_stat64 *kls = kmalloc(sizeof(struct linux_stat64));
	if (!kls) {
		return -1;
	}
	memset(kls, 0, sizeof(struct linux_stat64));
	kls->st_ino = 1;
8000d694:	24080001 	li	t0,1
8000d698:	00004821 	move	t1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:272
	/* ucore never check access permision */
	kls->st_mode = kstat->st_mode | 0777;
8000d69c:	344201ff 	ori	v0,v0,0x1ff
8000d6a0:	ae020010 	sw	v0,16(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:273
	kls->st_nlink = kstat->st_nlinks;
8000d6a4:	8fa20014 	lw	v0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:270
	struct linux_stat64 *kls = kmalloc(sizeof(struct linux_stat64));
	if (!kls) {
		return -1;
	}
	memset(kls, 0, sizeof(struct linux_stat64));
	kls->st_ino = 1;
8000d6a8:	ae080060 	sw	t0,96(s0)
8000d6ac:	ae090064 	sw	t1,100(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:273
	/* ucore never check access permision */
	kls->st_mode = kstat->st_mode | 0777;
	kls->st_nlink = kstat->st_nlinks;
8000d6b0:	ae020014 	sw	v0,20(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:274
	kls->st_blksize = 512;
8000d6b4:	24020200 	li	v0,512
8000d6b8:	ae020038 	sw	v0,56(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:275
	kls->st_blocks = kstat->st_blocks;
8000d6bc:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:279
	kls->st_size = kstat->st_size;

	ret = 0;
	lock_mm(mm);
8000d6c0:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:275
	kls->st_ino = 1;
	/* ucore never check access permision */
	kls->st_mode = kstat->st_mode | 0777;
	kls->st_nlink = kstat->st_nlinks;
	kls->st_blksize = 512;
	kls->st_blocks = kstat->st_blocks;
8000d6c4:	ae000044 	sw	zero,68(s0)
8000d6c8:	ae020040 	sw	v0,64(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:276
	kls->st_size = kstat->st_size;
8000d6cc:	8fa2001c 	lw	v0,28(sp)
8000d6d0:	ae000034 	sw	zero,52(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:279

	ret = 0;
	lock_mm(mm);
8000d6d4:	0c004c26 	jal	80013098 <lock_mm>
8000d6d8:	ae020030 	sw	v0,48(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:281
	{
		if (!copy_to_user(mm, buf, kls, sizeof(struct linux_stat64))) {
8000d6dc:	02202021 	move	a0,s1
8000d6e0:	02402821 	move	a1,s2
8000d6e4:	02003021 	move	a2,s0
8000d6e8:	0c007948 	jal	8001e520 <copy_to_user>
8000d6ec:	24070068 	li	a3,104
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:285
			ret = -1;
		}
	}
	unlock_mm(mm);
8000d6f0:	02202021 	move	a0,s1
8000d6f4:	0c004c37 	jal	800130dc <unlock_mm>
8000d6f8:	0002980b 	movn	s3,zero,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:286
	kfree(kls);
8000d6fc:	0c0054b1 	jal	800152c4 <kfree>
8000d700:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:288
	return ret;
}
8000d704:	8fbf0034 	lw	ra,52(sp)
8000d708:	02601021 	move	v0,s3
8000d70c:	8fb2002c 	lw	s2,44(sp)
8000d710:	8fb30030 	lw	s3,48(sp)
8000d714:	8fb10028 	lw	s1,40(sp)
8000d718:	8fb00024 	lw	s0,36(sp)
8000d71c:	03e00008 	jr	ra
8000d720:	27bd0038 	addiu	sp,sp,56

8000d724 <sysfile_linux_fcntl64>:
sysfile_linux_fcntl64():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:291

int sysfile_linux_fcntl64(int fd, int cmd, int arg)
{
8000d724:	00801821 	move	v1,a0
8000d728:	00a01021 	move	v0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:292
	kprintf("sysfile_linux_fcntl64:fd=%08x cmd=%08x arg=%08x\n", fd, cmd,
8000d72c:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:291
	kfree(kls);
	return ret;
}

int sysfile_linux_fcntl64(int fd, int cmd, int arg)
{
8000d730:	27bdffe8 	addiu	sp,sp,-24
8000d734:	00c03821 	move	a3,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:292
	kprintf("sysfile_linux_fcntl64:fd=%08x cmd=%08x arg=%08x\n", fd, cmd,
8000d738:	24842944 	addiu	a0,a0,10564
8000d73c:	00602821 	move	a1,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:291
	kfree(kls);
	return ret;
}

int sysfile_linux_fcntl64(int fd, int cmd, int arg)
{
8000d740:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:292
	kprintf("sysfile_linux_fcntl64:fd=%08x cmd=%08x arg=%08x\n", fd, cmd,
8000d744:	0c007a9e 	jal	8001ea78 <kprintf>
8000d748:	00403021 	move	a2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:295
		arg);
	return 0;
}
8000d74c:	8fbf0014 	lw	ra,20(sp)
8000d750:	00001021 	move	v0,zero
8000d754:	03e00008 	jr	ra
8000d758:	27bd0018 	addiu	sp,sp,24

8000d75c <sysfile_linux_stat>:
sysfile_linux_stat():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:298

int sysfile_linux_stat(const char __user * fn, struct linux_stat *__user buf)
{
8000d75c:	27bdffe0 	addiu	sp,sp,-32
8000d760:	afb10014 	sw	s1,20(sp)
8000d764:	00a08821 	move	s1,a1
8000d768:	afb20018 	sw	s2,24(sp)
8000d76c:	afb00010 	sw	s0,16(sp)
8000d770:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:299
	int fd = sysfile_open(fn, O_RDONLY);
8000d774:	0c0033df 	jal	8000cf7c <sysfile_open>
8000d778:	00002821 	move	a1,zero
8000d77c:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:300
	if (fd < 0)
8000d780:	04400007 	bltz	v0,8000d7a0 <sysfile_linux_stat+0x44>
8000d784:	2412ffff 	li	s2,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:302
		return -1;
	int ret = sysfile_linux_fstat(fd, buf);
8000d788:	00402021 	move	a0,v0
8000d78c:	0c003557 	jal	8000d55c <sysfile_linux_fstat>
8000d790:	02202821 	move	a1,s1
sysfile_close():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:54
	return ret;
}

int sysfile_close(int fd)
{
	return file_close(fd);
8000d794:	02002021 	move	a0,s0
8000d798:	0c002e63 	jal	8000b98c <file_close>
8000d79c:	00409021 	move	s2,v0
sysfile_linux_stat():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:306
		return -1;
	int ret = sysfile_linux_fstat(fd, buf);
	sysfile_close(fd);

	return ret;
}
8000d7a0:	8fbf001c 	lw	ra,28(sp)
8000d7a4:	02401021 	move	v0,s2
8000d7a8:	8fb10014 	lw	s1,20(sp)
8000d7ac:	8fb20018 	lw	s2,24(sp)
8000d7b0:	8fb00010 	lw	s0,16(sp)
8000d7b4:	03e00008 	jr	ra
8000d7b8:	27bd0020 	addiu	sp,sp,32

8000d7bc <sysfile_linux_stat64>:
sysfile_linux_stat64():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:310

int
sysfile_linux_stat64(const char __user * fn, struct linux_stat64 *__user buf)
{
8000d7bc:	27bdffe0 	addiu	sp,sp,-32
8000d7c0:	afb10014 	sw	s1,20(sp)
8000d7c4:	00a08821 	move	s1,a1
8000d7c8:	afb20018 	sw	s2,24(sp)
8000d7cc:	afb00010 	sw	s0,16(sp)
8000d7d0:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:311
	int fd = sysfile_open(fn, O_RDONLY);
8000d7d4:	0c0033df 	jal	8000cf7c <sysfile_open>
8000d7d8:	00002821 	move	a1,zero
8000d7dc:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:312
	if (fd < 0)
8000d7e0:	04400007 	bltz	v0,8000d800 <sysfile_linux_stat64+0x44>
8000d7e4:	2412ffff 	li	s2,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:314
		return -1;
	int ret = sysfile_linux_fstat64(fd, buf);
8000d7e8:	00402021 	move	a0,v0
8000d7ec:	0c00358e 	jal	8000d638 <sysfile_linux_fstat64>
8000d7f0:	02202821 	move	a1,s1
sysfile_close():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:54
	return ret;
}

int sysfile_close(int fd)
{
	return file_close(fd);
8000d7f4:	02002021 	move	a0,s0
8000d7f8:	0c002e63 	jal	8000b98c <file_close>
8000d7fc:	00409021 	move	s2,v0
sysfile_linux_stat64():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:318
		return -1;
	int ret = sysfile_linux_fstat64(fd, buf);
	sysfile_close(fd);

	return ret;
}
8000d800:	8fbf001c 	lw	ra,28(sp)
8000d804:	02401021 	move	v0,s2
8000d808:	8fb10014 	lw	s1,20(sp)
8000d80c:	8fb20018 	lw	s2,24(sp)
8000d810:	8fb00010 	lw	s0,16(sp)
8000d814:	03e00008 	jr	ra
8000d818:	27bd0020 	addiu	sp,sp,32

8000d81c <sysfile_fsync>:
sysfile_fsync():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:322

int sysfile_fsync(int fd)
{
	return file_fsync(fd);
8000d81c:	08002fed 	j	8000bfb4 <file_fsync>
8000d820:	00000000 	nop

8000d824 <sysfile_chdir>:
sysfile_chdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:326
}

int sysfile_chdir(const char *__path)
{
8000d824:	27bdffd8 	addiu	sp,sp,-40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:329
	int ret;
	char *path;
	if ((ret = copy_path(&path, __path)) != 0) {
8000d828:	00802821 	move	a1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:326
{
	return file_fsync(fd);
}

int sysfile_chdir(const char *__path)
{
8000d82c:	afbf0024 	sw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:329
	int ret;
	char *path;
	if ((ret = copy_path(&path, __path)) != 0) {
8000d830:	0c0033b5 	jal	8000ced4 <copy_path>
8000d834:	27a40010 	addiu	a0,sp,16
8000d838:	14400008 	bnez	v0,8000d85c <sysfile_chdir+0x38>
8000d83c:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:332
		return ret;
	}
	ret = vfs_chdir(path);
8000d840:	0c001823 	jal	8000608c <vfs_chdir>
8000d844:	8fa40010 	lw	a0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:333
	kfree(path);
8000d848:	8fa40010 	lw	a0,16(sp)
8000d84c:	0c0054b1 	jal	800152c4 <kfree>
8000d850:	afa20018 	sw	v0,24(sp)
8000d854:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:335
	return ret;
}
8000d858:	8fbf0024 	lw	ra,36(sp)
8000d85c:	03e00008 	jr	ra
8000d860:	27bd0028 	addiu	sp,sp,40

8000d864 <sysfile_mkdir>:
sysfile_mkdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:338

int sysfile_mkdir(const char *__path)
{
8000d864:	27bdffd8 	addiu	sp,sp,-40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:341
	int ret;
	char *path;
	if ((ret = copy_path(&path, __path)) != 0) {
8000d868:	00802821 	move	a1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:338
	kfree(path);
	return ret;
}

int sysfile_mkdir(const char *__path)
{
8000d86c:	afbf0024 	sw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:341
	int ret;
	char *path;
	if ((ret = copy_path(&path, __path)) != 0) {
8000d870:	0c0033b5 	jal	8000ced4 <copy_path>
8000d874:	27a40010 	addiu	a0,sp,16
8000d878:	14400008 	bnez	v0,8000d89c <sysfile_mkdir+0x38>
8000d87c:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:344
		return ret;
	}
	ret = vfs_mkdir(path);
8000d880:	0c0016c0 	jal	80005b00 <vfs_mkdir>
8000d884:	8fa40010 	lw	a0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:345
	kfree(path);
8000d888:	8fa40010 	lw	a0,16(sp)
8000d88c:	0c0054b1 	jal	800152c4 <kfree>
8000d890:	afa20018 	sw	v0,24(sp)
8000d894:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:347
	return ret;
}
8000d898:	8fbf0024 	lw	ra,36(sp)
8000d89c:	03e00008 	jr	ra
8000d8a0:	27bd0028 	addiu	sp,sp,40

8000d8a4 <sysfile_link>:
sysfile_link():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:350

int sysfile_link(const char *__path1, const char *__path2)
{
8000d8a4:	27bdffd8 	addiu	sp,sp,-40
8000d8a8:	00801021 	move	v0,a0
8000d8ac:	afb00020 	sw	s0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:353
	int ret;
	char *old_path, *new_path;
	if ((ret = copy_path(&old_path, __path1)) != 0) {
8000d8b0:	27a40014 	addiu	a0,sp,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:350
	kfree(path);
	return ret;
}

int sysfile_link(const char *__path1, const char *__path2)
{
8000d8b4:	00a08021 	move	s0,a1
8000d8b8:	afbf0024 	sw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:353
	int ret;
	char *old_path, *new_path;
	if ((ret = copy_path(&old_path, __path1)) != 0) {
8000d8bc:	0c0033b5 	jal	8000ced4 <copy_path>
8000d8c0:	00402821 	move	a1,v0
8000d8c4:	10400004 	beqz	v0,8000d8d8 <sysfile_link+0x34>
8000d8c8:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:363
		return ret;
	}
	ret = vfs_link(old_path, new_path);
	kfree(old_path), kfree(new_path);
	return ret;
}
8000d8cc:	8fb00020 	lw	s0,32(sp)
8000d8d0:	03e00008 	jr	ra
8000d8d4:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:356
	int ret;
	char *old_path, *new_path;
	if ((ret = copy_path(&old_path, __path1)) != 0) {
		return ret;
	}
	if ((ret = copy_path(&new_path, __path2)) != 0) {
8000d8d8:	27a40010 	addiu	a0,sp,16
8000d8dc:	0c0033b5 	jal	8000ced4 <copy_path>
8000d8e0:	02002821 	move	a1,s0
8000d8e4:	1440000d 	bnez	v0,8000d91c <sysfile_link+0x78>
8000d8e8:	8fa40014 	lw	a0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:360
		kfree(old_path);
		return ret;
	}
	ret = vfs_link(old_path, new_path);
8000d8ec:	0c001627 	jal	8000589c <vfs_link>
8000d8f0:	8fa50010 	lw	a1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:361
	kfree(old_path), kfree(new_path);
8000d8f4:	8fa40014 	lw	a0,20(sp)
8000d8f8:	0c0054b1 	jal	800152c4 <kfree>
8000d8fc:	afa20018 	sw	v0,24(sp)
8000d900:	0c0054b1 	jal	800152c4 <kfree>
8000d904:	8fa40010 	lw	a0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:363
	return ret;
}
8000d908:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:361
	if ((ret = copy_path(&new_path, __path2)) != 0) {
		kfree(old_path);
		return ret;
	}
	ret = vfs_link(old_path, new_path);
	kfree(old_path), kfree(new_path);
8000d90c:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:363
	return ret;
}
8000d910:	8fb00020 	lw	s0,32(sp)
8000d914:	03e00008 	jr	ra
8000d918:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:357
	char *old_path, *new_path;
	if ((ret = copy_path(&old_path, __path1)) != 0) {
		return ret;
	}
	if ((ret = copy_path(&new_path, __path2)) != 0) {
		kfree(old_path);
8000d91c:	0c0054b1 	jal	800152c4 <kfree>
8000d920:	afa20018 	sw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:363
		return ret;
	}
	ret = vfs_link(old_path, new_path);
	kfree(old_path), kfree(new_path);
	return ret;
}
8000d924:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:358
	if ((ret = copy_path(&old_path, __path1)) != 0) {
		return ret;
	}
	if ((ret = copy_path(&new_path, __path2)) != 0) {
		kfree(old_path);
		return ret;
8000d928:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:363
	}
	ret = vfs_link(old_path, new_path);
	kfree(old_path), kfree(new_path);
	return ret;
}
8000d92c:	8fb00020 	lw	s0,32(sp)
8000d930:	03e00008 	jr	ra
8000d934:	27bd0028 	addiu	sp,sp,40

8000d938 <sysfile_rename>:
sysfile_rename():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:366

int sysfile_rename(const char *__path1, const char *__path2)
{
8000d938:	27bdffd8 	addiu	sp,sp,-40
8000d93c:	00801021 	move	v0,a0
8000d940:	afb00020 	sw	s0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:369
	int ret;
	char *old_path, *new_path;
	if ((ret = copy_path(&old_path, __path1)) != 0) {
8000d944:	27a40014 	addiu	a0,sp,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:366
	kfree(old_path), kfree(new_path);
	return ret;
}

int sysfile_rename(const char *__path1, const char *__path2)
{
8000d948:	00a08021 	move	s0,a1
8000d94c:	afbf0024 	sw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:369
	int ret;
	char *old_path, *new_path;
	if ((ret = copy_path(&old_path, __path1)) != 0) {
8000d950:	0c0033b5 	jal	8000ced4 <copy_path>
8000d954:	00402821 	move	a1,v0
8000d958:	10400004 	beqz	v0,8000d96c <sysfile_rename+0x34>
8000d95c:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:379
		return ret;
	}
	ret = vfs_rename(old_path, new_path);
	kfree(old_path), kfree(new_path);
	return ret;
}
8000d960:	8fb00020 	lw	s0,32(sp)
8000d964:	03e00008 	jr	ra
8000d968:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:372
	int ret;
	char *old_path, *new_path;
	if ((ret = copy_path(&old_path, __path1)) != 0) {
		return ret;
	}
	if ((ret = copy_path(&new_path, __path2)) != 0) {
8000d96c:	27a40010 	addiu	a0,sp,16
8000d970:	0c0033b5 	jal	8000ced4 <copy_path>
8000d974:	02002821 	move	a1,s0
8000d978:	1440000d 	bnez	v0,8000d9b0 <sysfile_rename+0x78>
8000d97c:	8fa40014 	lw	a0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:376
		kfree(old_path);
		return ret;
	}
	ret = vfs_rename(old_path, new_path);
8000d980:	0c0015e2 	jal	80005788 <vfs_rename>
8000d984:	8fa50010 	lw	a1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:377
	kfree(old_path), kfree(new_path);
8000d988:	8fa40014 	lw	a0,20(sp)
8000d98c:	0c0054b1 	jal	800152c4 <kfree>
8000d990:	afa20018 	sw	v0,24(sp)
8000d994:	0c0054b1 	jal	800152c4 <kfree>
8000d998:	8fa40010 	lw	a0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:379
	return ret;
}
8000d99c:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:377
	if ((ret = copy_path(&new_path, __path2)) != 0) {
		kfree(old_path);
		return ret;
	}
	ret = vfs_rename(old_path, new_path);
	kfree(old_path), kfree(new_path);
8000d9a0:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:379
	return ret;
}
8000d9a4:	8fb00020 	lw	s0,32(sp)
8000d9a8:	03e00008 	jr	ra
8000d9ac:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:373
	char *old_path, *new_path;
	if ((ret = copy_path(&old_path, __path1)) != 0) {
		return ret;
	}
	if ((ret = copy_path(&new_path, __path2)) != 0) {
		kfree(old_path);
8000d9b0:	0c0054b1 	jal	800152c4 <kfree>
8000d9b4:	afa20018 	sw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:379
		return ret;
	}
	ret = vfs_rename(old_path, new_path);
	kfree(old_path), kfree(new_path);
	return ret;
}
8000d9b8:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:374
	if ((ret = copy_path(&old_path, __path1)) != 0) {
		return ret;
	}
	if ((ret = copy_path(&new_path, __path2)) != 0) {
		kfree(old_path);
		return ret;
8000d9bc:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:379
	}
	ret = vfs_rename(old_path, new_path);
	kfree(old_path), kfree(new_path);
	return ret;
}
8000d9c0:	8fb00020 	lw	s0,32(sp)
8000d9c4:	03e00008 	jr	ra
8000d9c8:	27bd0028 	addiu	sp,sp,40

8000d9cc <sysfile_unlink>:
sysfile_unlink():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:382

int sysfile_unlink(const char *__path)
{
8000d9cc:	27bdffd8 	addiu	sp,sp,-40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:385
	int ret;
	char *path;
	if ((ret = copy_path(&path, __path)) != 0) {
8000d9d0:	00802821 	move	a1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:382
	kfree(old_path), kfree(new_path);
	return ret;
}

int sysfile_unlink(const char *__path)
{
8000d9d4:	afbf0024 	sw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:385
	int ret;
	char *path;
	if ((ret = copy_path(&path, __path)) != 0) {
8000d9d8:	0c0033b5 	jal	8000ced4 <copy_path>
8000d9dc:	27a40010 	addiu	a0,sp,16
8000d9e0:	14400008 	bnez	v0,8000da04 <sysfile_unlink+0x38>
8000d9e4:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:388
		return ret;
	}
	ret = vfs_unlink(path);
8000d9e8:	0c0015ba 	jal	800056e8 <vfs_unlink>
8000d9ec:	8fa40010 	lw	a0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:389
	kfree(path);
8000d9f0:	8fa40010 	lw	a0,16(sp)
8000d9f4:	0c0054b1 	jal	800152c4 <kfree>
8000d9f8:	afa20018 	sw	v0,24(sp)
8000d9fc:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:391
	return ret;
}
8000da00:	8fbf0024 	lw	ra,36(sp)
8000da04:	03e00008 	jr	ra
8000da08:	27bd0028 	addiu	sp,sp,40

8000da0c <sysfile_getcwd>:
sysfile_getcwd():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:395

int sysfile_getcwd(char *buf, size_t len)
{
	struct mm_struct *mm = pls_read(current)->mm;
8000da0c:	3c028015 	lui	v0,0x8015
8000da10:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:394
	kfree(path);
	return ret;
}

int sysfile_getcwd(char *buf, size_t len)
{
8000da14:	27bdffd0 	addiu	sp,sp,-48
8000da18:	afb20028 	sw	s2,40(sp)
8000da1c:	afb10024 	sw	s1,36(sp)
8000da20:	afb00020 	sw	s0,32(sp)
8000da24:	afbf002c 	sw	ra,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:395
	struct mm_struct *mm = pls_read(current)->mm;
8000da28:	8c500020 	lw	s0,32(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:394
	kfree(path);
	return ret;
}

int sysfile_getcwd(char *buf, size_t len)
{
8000da2c:	00a08821 	move	s1,a1
8000da30:	00809021 	move	s2,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:396
	struct mm_struct *mm = pls_read(current)->mm;
	if (len == 0) {
8000da34:	10a0000d 	beqz	a1,8000da6c <sysfile_getcwd+0x60>
8000da38:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:400
		return -E_INVAL;
	}

	lock_mm(mm);
8000da3c:	0c004c26 	jal	80013098 <lock_mm>
8000da40:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:402
	{
		if (user_mem_check(mm, (uintptr_t) buf, len, 1)) {
8000da44:	02002021 	move	a0,s0
8000da48:	02402821 	move	a1,s2
8000da4c:	02203021 	move	a2,s1
8000da50:	0c005077 	jal	800141dc <user_mem_check>
8000da54:	24070001 	li	a3,1
8000da58:	1440000a 	bnez	v0,8000da84 <sysfile_getcwd+0x78>
8000da5c:	27a40010 	addiu	a0,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:408
			struct iobuf __iob, *iob =
			    iobuf_init(&__iob, buf, len, 0);
			vfs_getcwd(iob);
		}
	}
	unlock_mm(mm);
8000da60:	0c004c37 	jal	800130dc <unlock_mm>
8000da64:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:409
	return 0;
8000da68:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:410
}
8000da6c:	8fbf002c 	lw	ra,44(sp)
8000da70:	8fb20028 	lw	s2,40(sp)
8000da74:	8fb10024 	lw	s1,36(sp)
8000da78:	8fb00020 	lw	s0,32(sp)
8000da7c:	03e00008 	jr	ra
8000da80:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:403
	}

	lock_mm(mm);
	{
		if (user_mem_check(mm, (uintptr_t) buf, len, 1)) {
			struct iobuf __iob, *iob =
8000da84:	02402821 	move	a1,s2
8000da88:	02203021 	move	a2,s1
8000da8c:	0c003348 	jal	8000cd20 <iobuf_init>
8000da90:	00003821 	move	a3,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:405
			    iobuf_init(&__iob, buf, len, 0);
			vfs_getcwd(iob);
8000da94:	0c001834 	jal	800060d0 <vfs_getcwd>
8000da98:	00402021 	move	a0,v0
8000da9c:	08003698 	j	8000da60 <sysfile_getcwd+0x54>
8000daa0:	00000000 	nop

8000daa4 <sysfile_getdirentry>:
sysfile_getdirentry():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:414
	return 0;
}

int sysfile_getdirentry(int fd, struct dirent *__direntp, uint32_t * len_store)
{
	struct mm_struct *mm = pls_read(current)->mm;
8000daa4:	3c028015 	lui	v0,0x8015
8000daa8:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:413
	unlock_mm(mm);
	return 0;
}

int sysfile_getdirentry(int fd, struct dirent *__direntp, uint32_t * len_store)
{
8000daac:	27bdffc8 	addiu	sp,sp,-56
8000dab0:	afb4002c 	sw	s4,44(sp)
8000dab4:	0080a021 	move	s4,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:416
	struct mm_struct *mm = pls_read(current)->mm;
	struct dirent *direntp;
	if ((direntp = kmalloc(sizeof(struct dirent))) == NULL) {
8000dab8:	2404010c 	li	a0,268
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:413
	unlock_mm(mm);
	return 0;
}

int sysfile_getdirentry(int fd, struct dirent *__direntp, uint32_t * len_store)
{
8000dabc:	afb50030 	sw	s5,48(sp)
8000dac0:	afb30028 	sw	s3,40(sp)
8000dac4:	afb20024 	sw	s2,36(sp)
8000dac8:	afb10020 	sw	s1,32(sp)
8000dacc:	afb0001c 	sw	s0,28(sp)
8000dad0:	afbf0034 	sw	ra,52(sp)
8000dad4:	00a09821 	move	s3,a1
8000dad8:	00c0a821 	move	s5,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:416
	struct mm_struct *mm = pls_read(current)->mm;
	struct dirent *direntp;
	if ((direntp = kmalloc(sizeof(struct dirent))) == NULL) {
8000dadc:	0c005486 	jal	80015218 <kmalloc>
8000dae0:	8c510020 	lw	s1,32(v0)
8000dae4:	00408021 	move	s0,v0
8000dae8:	10400015 	beqz	v0,8000db40 <sysfile_getdirentry+0x9c>
8000daec:	2412fff4 	li	s2,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:425
	//direntp->d_reclen = sizeof(struct dirent);
	/* libc will ignore entries with d_ino==0 */
	//direntp->d_ino = 1;

	int ret = 0;
	lock_mm(mm);
8000daf0:	0c004c26 	jal	80013098 <lock_mm>
8000daf4:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:428
	{
		if (!copy_from_user
		    (mm, &(direntp->d_off), &(__direntp->d_off),
8000daf8:	02202021 	move	a0,s1
8000dafc:	24020001 	li	v0,1
8000db00:	26050004 	addiu	a1,s0,4
8000db04:	26660004 	addiu	a2,s3,4
8000db08:	24070004 	li	a3,4
8000db0c:	0c00792e 	jal	8001e4b8 <copy_from_user>
8000db10:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:427
	//direntp->d_ino = 1;

	int ret = 0;
	lock_mm(mm);
	{
		if (!copy_from_user
8000db14:	10400014 	beqz	v0,8000db68 <sysfile_getdirentry+0xc4>
8000db18:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:433
		    (mm, &(direntp->d_off), &(__direntp->d_off),
		     sizeof(direntp->d_off), 1)) {
			ret = -E_INVAL;
		}
	}
	unlock_mm(mm);
8000db1c:	0c004c37 	jal	800130dc <unlock_mm>
8000db20:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:435

	if (ret != 0 || (ret = file_getdirentry(fd, direntp)) != 0) {
8000db24:	02802021 	move	a0,s4
8000db28:	0c00302a 	jal	8000c0a8 <file_getdirentry>
8000db2c:	02002821 	move	a1,s0
8000db30:	10400011 	beqz	v0,8000db78 <sysfile_getdirentry+0xd4>
8000db34:	00409021 	move	s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:451
	unlock_mm(mm);
	if (len_store) {
		*len_store = (direntp->d_name[0]) ? direntp->d_reclen : 0;
	}
out:
	kfree(direntp);
8000db38:	0c0054b1 	jal	800152c4 <kfree>
8000db3c:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:453
	return ret;
}
8000db40:	8fbf0034 	lw	ra,52(sp)
8000db44:	02401021 	move	v0,s2
8000db48:	8fb50030 	lw	s5,48(sp)
8000db4c:	8fb4002c 	lw	s4,44(sp)
8000db50:	8fb30028 	lw	s3,40(sp)
8000db54:	8fb20024 	lw	s2,36(sp)
8000db58:	8fb10020 	lw	s1,32(sp)
8000db5c:	8fb0001c 	lw	s0,28(sp)
8000db60:	03e00008 	jr	ra
8000db64:	27bd0038 	addiu	sp,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:433
		    (mm, &(direntp->d_off), &(__direntp->d_off),
		     sizeof(direntp->d_off), 1)) {
			ret = -E_INVAL;
		}
	}
	unlock_mm(mm);
8000db68:	0c004c37 	jal	800130dc <unlock_mm>
8000db6c:	2412ffea 	li	s2,-22
8000db70:	080036ce 	j	8000db38 <sysfile_getdirentry+0x94>
8000db74:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:439

	if (ret != 0 || (ret = file_getdirentry(fd, direntp)) != 0) {
		goto out;
	}

	lock_mm(mm);
8000db78:	0c004c26 	jal	80013098 <lock_mm>
8000db7c:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:442
	{
		if (!copy_to_user
		    (mm, __direntp, direntp, sizeof(struct dirent))) {
8000db80:	02202021 	move	a0,s1
8000db84:	02602821 	move	a1,s3
8000db88:	02003021 	move	a2,s0
8000db8c:	0c007948 	jal	8001e520 <copy_to_user>
8000db90:	2407010c 	li	a3,268
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:443
			ret = -E_INVAL;
8000db94:	2403ffea 	li	v1,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:446
		}
	}
	unlock_mm(mm);
8000db98:	02202021 	move	a0,s1
8000db9c:	0c004c37 	jal	800130dc <unlock_mm>
8000dba0:	0062900a 	movz	s2,v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:447
	if (len_store) {
8000dba4:	12a0ffe4 	beqz	s5,8000db38 <sysfile_getdirentry+0x94>
8000dba8:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:448
		*len_store = (direntp->d_name[0]) ? direntp->d_reclen : 0;
8000dbac:	9203000a 	lbu	v1,10(s0)
8000dbb0:	10600002 	beqz	v1,8000dbbc <sysfile_getdirentry+0x118>
8000dbb4:	00001021 	move	v0,zero
8000dbb8:	96020008 	lhu	v0,8(s0)
8000dbbc:	080036ce 	j	8000db38 <sysfile_getdirentry+0x94>
8000dbc0:	aea20000 	sw	v0,0(s5)

8000dbc4 <sysfile_dup>:
sysfile_dup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:510
}
#endif

int sysfile_dup(int fd1, int fd2)
{
	return file_dup(fd1, fd2);
8000dbc4:	0800307c 	j	8000c1f0 <file_dup>
8000dbc8:	00000000 	nop

8000dbcc <sysfile_pipe>:
sysfile_pipe():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:515
}

int sysfile_pipe(int *fd_store)
{
	struct mm_struct *mm = pls_read(current)->mm;
8000dbcc:	3c028015 	lui	v0,0x8015
8000dbd0:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:514
{
	return file_dup(fd1, fd2);
}

int sysfile_pipe(int *fd_store)
{
8000dbd4:	27bdffd8 	addiu	sp,sp,-40
8000dbd8:	afb1001c 	sw	s1,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:515
	struct mm_struct *mm = pls_read(current)->mm;
8000dbdc:	8c510020 	lw	s1,32(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:514
{
	return file_dup(fd1, fd2);
}

int sysfile_pipe(int *fd_store)
{
8000dbe0:	afb20020 	sw	s2,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:517
	struct mm_struct *mm = pls_read(current)->mm;
	int ret, fd[2];
	if (!user_mem_check(mm, (uintptr_t) fd_store, sizeof(fd), 1)) {
8000dbe4:	00802821 	move	a1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:514
{
	return file_dup(fd1, fd2);
}

int sysfile_pipe(int *fd_store)
{
8000dbe8:	00809021 	move	s2,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:517
	struct mm_struct *mm = pls_read(current)->mm;
	int ret, fd[2];
	if (!user_mem_check(mm, (uintptr_t) fd_store, sizeof(fd), 1)) {
8000dbec:	24060008 	li	a2,8
8000dbf0:	24070001 	li	a3,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:514
{
	return file_dup(fd1, fd2);
}

int sysfile_pipe(int *fd_store)
{
8000dbf4:	afb00018 	sw	s0,24(sp)
8000dbf8:	afbf0024 	sw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:517
	struct mm_struct *mm = pls_read(current)->mm;
	int ret, fd[2];
	if (!user_mem_check(mm, (uintptr_t) fd_store, sizeof(fd), 1)) {
8000dbfc:	0c005077 	jal	800141dc <user_mem_check>
8000dc00:	02202021 	move	a0,s1
8000dc04:	10400005 	beqz	v0,8000dc1c <sysfile_pipe+0x50>
8000dc08:	2410ffea 	li	s0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:520
		return -E_INVAL;
	}
	if ((ret = file_pipe(fd)) == 0) {
8000dc0c:	0c0030a9 	jal	8000c2a4 <file_pipe>
8000dc10:	27a40010 	addiu	a0,sp,16
8000dc14:	10400008 	beqz	v0,8000dc38 <sysfile_pipe+0x6c>
8000dc18:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:533
		if (ret != 0) {
			file_close(fd[0]), file_close(fd[1]);
		}
	}
	return ret;
}
8000dc1c:	8fbf0024 	lw	ra,36(sp)
8000dc20:	02001021 	move	v0,s0
8000dc24:	8fb20020 	lw	s2,32(sp)
8000dc28:	8fb1001c 	lw	s1,28(sp)
8000dc2c:	8fb00018 	lw	s0,24(sp)
8000dc30:	03e00008 	jr	ra
8000dc34:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:521
	int ret, fd[2];
	if (!user_mem_check(mm, (uintptr_t) fd_store, sizeof(fd), 1)) {
		return -E_INVAL;
	}
	if ((ret = file_pipe(fd)) == 0) {
		lock_mm(mm);
8000dc38:	0c004c26 	jal	80013098 <lock_mm>
8000dc3c:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:523
		{
			if (!copy_to_user(mm, fd_store, fd, sizeof(fd))) {
8000dc40:	02202021 	move	a0,s1
8000dc44:	02402821 	move	a1,s2
8000dc48:	27a60010 	addiu	a2,sp,16
8000dc4c:	0c007948 	jal	8001e520 <copy_to_user>
8000dc50:	24070008 	li	a3,8
8000dc54:	1440000e 	bnez	v0,8000dc90 <sysfile_pipe+0xc4>
8000dc58:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:527
				ret = -E_INVAL;
			}
		}
		unlock_mm(mm);
8000dc5c:	0c004c37 	jal	800130dc <unlock_mm>
8000dc60:	2410ffea 	li	s0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:529
		if (ret != 0) {
			file_close(fd[0]), file_close(fd[1]);
8000dc64:	0c002e63 	jal	8000b98c <file_close>
8000dc68:	8fa40010 	lw	a0,16(sp)
8000dc6c:	0c002e63 	jal	8000b98c <file_close>
8000dc70:	8fa40014 	lw	a0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:533
		}
	}
	return ret;
}
8000dc74:	8fbf0024 	lw	ra,36(sp)
8000dc78:	02001021 	move	v0,s0
8000dc7c:	8fb20020 	lw	s2,32(sp)
8000dc80:	8fb1001c 	lw	s1,28(sp)
8000dc84:	8fb00018 	lw	s0,24(sp)
8000dc88:	03e00008 	jr	ra
8000dc8c:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:527
		{
			if (!copy_to_user(mm, fd_store, fd, sizeof(fd))) {
				ret = -E_INVAL;
			}
		}
		unlock_mm(mm);
8000dc90:	0c004c37 	jal	800130dc <unlock_mm>
8000dc94:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:533
		if (ret != 0) {
			file_close(fd[0]), file_close(fd[1]);
		}
	}
	return ret;
}
8000dc98:	8fbf0024 	lw	ra,36(sp)
8000dc9c:	02001021 	move	v0,s0
8000dca0:	8fb20020 	lw	s2,32(sp)
8000dca4:	8fb1001c 	lw	s1,28(sp)
8000dca8:	8fb00018 	lw	s0,24(sp)
8000dcac:	03e00008 	jr	ra
8000dcb0:	27bd0028 	addiu	sp,sp,40

8000dcb4 <sysfile_mkfifo>:
sysfile_mkfifo():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:536

int sysfile_mkfifo(const char *__name, uint32_t open_flags)
{
8000dcb4:	27bdffd8 	addiu	sp,sp,-40
8000dcb8:	00801021 	move	v0,a0
8000dcbc:	afb00020 	sw	s0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:539
	int ret;
	char *name;
	if ((ret = copy_path(&name, __name)) != 0) {
8000dcc0:	27a40010 	addiu	a0,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:536
	}
	return ret;
}

int sysfile_mkfifo(const char *__name, uint32_t open_flags)
{
8000dcc4:	00a08021 	move	s0,a1
8000dcc8:	afbf0024 	sw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:539
	int ret;
	char *name;
	if ((ret = copy_path(&name, __name)) != 0) {
8000dccc:	0c0033b5 	jal	8000ced4 <copy_path>
8000dcd0:	00402821 	move	a1,v0
8000dcd4:	14400009 	bnez	v0,8000dcfc <sysfile_mkfifo+0x48>
8000dcd8:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:542
		return ret;
	}
	ret = file_mkfifo(name, open_flags);
8000dcdc:	8fa40010 	lw	a0,16(sp)
8000dce0:	0c0030e6 	jal	8000c398 <file_mkfifo>
8000dce4:	02002821 	move	a1,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:543
	kfree(name);
8000dce8:	8fa40010 	lw	a0,16(sp)
8000dcec:	0c0054b1 	jal	800152c4 <kfree>
8000dcf0:	afa20018 	sw	v0,24(sp)
8000dcf4:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:545
	return ret;
}
8000dcf8:	8fbf0024 	lw	ra,36(sp)
8000dcfc:	8fb00020 	lw	s0,32(sp)
8000dd00:	03e00008 	jr	ra
8000dd04:	27bd0028 	addiu	sp,sp,40

8000dd08 <sysfile_ioctl>:
sysfile_ioctl():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:548

int sysfile_ioctl(int fd, unsigned int cmd, unsigned long arg)
{
8000dd08:	27bdffe0 	addiu	sp,sp,-32
8000dd0c:	afb20018 	sw	s2,24(sp)
8000dd10:	afb10014 	sw	s1,20(sp)
8000dd14:	00a09021 	move	s2,a1
8000dd18:	00c08821 	move	s1,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:549
	if (!file_testfd(fd, 1, 0)) {
8000dd1c:	24050001 	li	a1,1
8000dd20:	00003021 	move	a2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:548
	kfree(name);
	return ret;
}

int sysfile_ioctl(int fd, unsigned int cmd, unsigned long arg)
{
8000dd24:	afb00010 	sw	s0,16(sp)
8000dd28:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:549
	if (!file_testfd(fd, 1, 0)) {
8000dd2c:	0c002dd6 	jal	8000b758 <file_testfd>
8000dd30:	00808021 	move	s0,a0
8000dd34:	1040000e 	beqz	v0,8000dd70 <sysfile_ioctl+0x68>
8000dd38:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:552
		return -E_INVAL;
	}
	if (!__is_linux_devfile(fd)) {
8000dd3c:	0c00312f 	jal	8000c4bc <__is_linux_devfile>
8000dd40:	02002021 	move	a0,s0
8000dd44:	10400009 	beqz	v0,8000dd6c <sysfile_ioctl+0x64>
8000dd48:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:555
		return -E_INVAL;
	}
	return linux_devfile_ioctl(fd, cmd, arg);
8000dd4c:	02402821 	move	a1,s2
8000dd50:	02203021 	move	a2,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:556
}
8000dd54:	8fbf001c 	lw	ra,28(sp)
8000dd58:	8fb20018 	lw	s2,24(sp)
8000dd5c:	8fb10014 	lw	s1,20(sp)
8000dd60:	8fb00010 	lw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:555
		return -E_INVAL;
	}
	if (!__is_linux_devfile(fd)) {
		return -E_INVAL;
	}
	return linux_devfile_ioctl(fd, cmd, arg);
8000dd64:	080031ec 	j	8000c7b0 <linux_devfile_ioctl>
8000dd68:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:556
}
8000dd6c:	8fbf001c 	lw	ra,28(sp)
8000dd70:	2402ffea 	li	v0,-22
8000dd74:	8fb20018 	lw	s2,24(sp)
8000dd78:	8fb10014 	lw	s1,20(sp)
8000dd7c:	8fb00010 	lw	s0,16(sp)
8000dd80:	03e00008 	jr	ra
8000dd84:	27bd0020 	addiu	sp,sp,32

8000dd88 <sysfile_linux_mmap2>:
sysfile_linux_mmap2():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:560

void *sysfile_linux_mmap2(void *addr, size_t len, int prot, int flags,
			  int fd, size_t pgoff)
{
8000dd88:	27bdffd0 	addiu	sp,sp,-48
8000dd8c:	afb00018 	sw	s0,24(sp)
8000dd90:	8fb00040 	lw	s0,64(sp)
8000dd94:	afb40028 	sw	s4,40(sp)
8000dd98:	afb30024 	sw	s3,36(sp)
8000dd9c:	afb20020 	sw	s2,32(sp)
8000dda0:	0080a021 	move	s4,a0
8000dda4:	00a09821 	move	s3,a1
8000dda8:	00c09021 	move	s2,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:561
	if (!file_testfd(fd, 1, 0)) {
8000ddac:	02002021 	move	a0,s0
8000ddb0:	24050001 	li	a1,1
8000ddb4:	00003021 	move	a2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:560
	return linux_devfile_ioctl(fd, cmd, arg);
}

void *sysfile_linux_mmap2(void *addr, size_t len, int prot, int flags,
			  int fd, size_t pgoff)
{
8000ddb8:	afb1001c 	sw	s1,28(sp)
8000ddbc:	afbf002c 	sw	ra,44(sp)
8000ddc0:	8fb10044 	lw	s1,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:561
	if (!file_testfd(fd, 1, 0)) {
8000ddc4:	0c002dd6 	jal	8000b758 <file_testfd>
8000ddc8:	afa70010 	sw	a3,16(sp)
8000ddcc:	1440000a 	bnez	v0,8000ddf8 <sysfile_linux_mmap2+0x70>
8000ddd0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:573
	else {
		return linux_regfile_mmap2(addr, len, prot, flags, fd, pgoff);
	}
#endif //UCONFIG_BIONIC_LIBC
	return MAP_FAILED;
}
8000ddd4:	8fbf002c 	lw	ra,44(sp)
8000ddd8:	2402ffff 	li	v0,-1
8000dddc:	8fb40028 	lw	s4,40(sp)
8000dde0:	8fb30024 	lw	s3,36(sp)
8000dde4:	8fb20020 	lw	s2,32(sp)
8000dde8:	8fb1001c 	lw	s1,28(sp)
8000ddec:	8fb00018 	lw	s0,24(sp)
8000ddf0:	03e00008 	jr	ra
8000ddf4:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:564
			  int fd, size_t pgoff)
{
	if (!file_testfd(fd, 1, 0)) {
		return MAP_FAILED;
	}
	if (__is_linux_devfile(fd)) {
8000ddf8:	0c00312f 	jal	8000c4bc <__is_linux_devfile>
8000ddfc:	02002021 	move	a0,s0
8000de00:	1040fff4 	beqz	v0,8000ddd4 <sysfile_linux_mmap2+0x4c>
8000de04:	8fa70010 	lw	a3,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:565
		return linux_devfile_mmap2(addr, len, prot, flags, fd, pgoff);
8000de08:	afb00040 	sw	s0,64(sp)
8000de0c:	afb10044 	sw	s1,68(sp)
8000de10:	02802021 	move	a0,s4
8000de14:	02602821 	move	a1,s3
8000de18:	02403021 	move	a2,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:573
	else {
		return linux_regfile_mmap2(addr, len, prot, flags, fd, pgoff);
	}
#endif //UCONFIG_BIONIC_LIBC
	return MAP_FAILED;
}
8000de1c:	8fbf002c 	lw	ra,44(sp)
8000de20:	8fb40028 	lw	s4,40(sp)
8000de24:	8fb30024 	lw	s3,36(sp)
8000de28:	8fb20020 	lw	s2,32(sp)
8000de2c:	8fb1001c 	lw	s1,28(sp)
8000de30:	8fb00018 	lw	s0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sysfile.c:565
{
	if (!file_testfd(fd, 1, 0)) {
		return MAP_FAILED;
	}
	if (__is_linux_devfile(fd)) {
		return linux_devfile_mmap2(addr, len, prot, flags, fd, pgoff);
8000de34:	08003225 	j	8000c894 <linux_devfile_mmap2>
8000de38:	27bd0030 	addiu	sp,sp,48

8000de3c <__intr_save>:
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:11

void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
8000de3c:	27bdffe8 	addiu	sp,sp,-24
8000de40:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
	if (!(read_c0_status() & ST0_IE)) {
8000de44:	40036000 	mfc0	v1,c0_status
8000de48:	30630001 	andi	v1,v1,0x1
8000de4c:	10600004 	beqz	v1,8000de60 <__intr_save+0x24>
8000de50:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8000de54:	0c006d04 	jal	8001b410 <intr_disable>
8000de58:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:16
	return 1;
8000de5c:	24020001 	li	v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:17
}
8000de60:	8fbf0014 	lw	ra,20(sp)
8000de64:	03e00008 	jr	ra
8000de68:	27bd0018 	addiu	sp,sp,24

8000de6c <user_main>:
user_main():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1961

#define KERNEL_EXECVE3(x, s, ...)               __KERNEL_EXECVE3(x, s, ##__VA_ARGS__)

// user_main - kernel thread used to exec a user program
static int user_main(void *arg)
{
8000de6c:	27bdffd8 	addiu	sp,sp,-40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1962
	sysfile_open("stdin:", O_RDONLY);
8000de70:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1961

#define KERNEL_EXECVE3(x, s, ...)               __KERNEL_EXECVE3(x, s, ##__VA_ARGS__)

// user_main - kernel thread used to exec a user program
static int user_main(void *arg)
{
8000de74:	afb00020 	sw	s0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1962
	sysfile_open("stdin:", O_RDONLY);
8000de78:	24842978 	addiu	a0,a0,10616
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1963
	sysfile_open("stdout:", O_WRONLY);
8000de7c:	3c108002 	lui	s0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1961

#define KERNEL_EXECVE3(x, s, ...)               __KERNEL_EXECVE3(x, s, ##__VA_ARGS__)

// user_main - kernel thread used to exec a user program
static int user_main(void *arg)
{
8000de80:	afbf0024 	sw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1962
	sysfile_open("stdin:", O_RDONLY);
8000de84:	0c0033df 	jal	8000cf7c <sysfile_open>
8000de88:	00002821 	move	a1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1963
	sysfile_open("stdout:", O_WRONLY);
8000de8c:	26042980 	addiu	a0,s0,10624
8000de90:	0c0033df 	jal	8000cf7c <sysfile_open>
8000de94:	24050001 	li	a1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1964
	sysfile_open("stdout:", O_WRONLY);
8000de98:	26042980 	addiu	a0,s0,10624
8000de9c:	0c0033df 	jal	8000cf7c <sysfile_open>
8000dea0:	24050001 	li	a1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1972
	KERNEL_EXECVE3(UNITTEST, TESTSCRIPT);
#else
	KERNEL_EXECVE2(UNITTEST);
#endif
#else
	__KERNEL_EXECVE("/bin/sh", "/bin/sh");
8000dea4:	3c028015 	lui	v0,0x8015
8000dea8:	8c4277a4 	lw	v0,30628(v0)
8000deac:	3c108002 	lui	s0,0x8002
8000deb0:	26102988 	addiu	s0,s0,10632
8000deb4:	8c450004 	lw	a1,4(v0)
8000deb8:	3c048002 	lui	a0,0x8002
8000debc:	3c028002 	lui	v0,0x8002
8000dec0:	02003021 	move	a2,s0
8000dec4:	2484299c 	addiu	a0,a0,10652
8000dec8:	24422990 	addiu	v0,v0,10640
8000decc:	afb00018 	sw	s0,24(sp)
8000ded0:	afa0001c 	sw	zero,28(sp)
8000ded4:	afa20010 	sw	v0,16(sp)
8000ded8:	0c007a9e 	jal	8001ea78 <kprintf>
8000dedc:	afa00014 	sw	zero,20(sp)
8000dee0:	02002021 	move	a0,s0
8000dee4:	27a50018 	addiu	a1,sp,24
8000dee8:	0c007a14 	jal	8001e850 <kernel_execve>
8000deec:	27a60010 	addiu	a2,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1974
#endif
	kprintf("user_main execve failed, no /bin/sh?.\n");
8000def0:	3c048002 	lui	a0,0x8002
8000def4:	0c007a9e 	jal	8001ea78 <kprintf>
8000def8:	248429c4 	addiu	a0,a0,10692
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1975
}
8000defc:	8fbf0024 	lw	ra,36(sp)
8000df00:	8fb00020 	lw	s0,32(sp)
8000df04:	03e00008 	jr	ra
8000df08:	27bd0028 	addiu	sp,sp,40

8000df0c <put_kargv>:
put_kargv():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1134
bad_mm:
	goto out;
}

static void put_kargv(int argc, char **kargv)
{
8000df0c:	27bdffe0 	addiu	sp,sp,-32
8000df10:	afb00014 	sw	s0,20(sp)
8000df14:	afbf001c 	sw	ra,28(sp)
8000df18:	afb10018 	sw	s1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1135
	while (argc > 0) {
8000df1c:	18800009 	blez	a0,8000df44 <put_kargv+0x38>
8000df20:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1133
	mm_destroy(mm);
bad_mm:
	goto out;
}

static void put_kargv(int argc, char **kargv)
8000df24:	00048880 	sll	s1,a0,0x2
8000df28:	00b18821 	addu	s1,a1,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1136
{
	while (argc > 0) {
		kfree(kargv[--argc]);
8000df2c:	8e24fffc 	lw	a0,-4(s1)
8000df30:	2610ffff 	addiu	s0,s0,-1
8000df34:	0c0054b1 	jal	800152c4 <kfree>
8000df38:	2631fffc 	addiu	s1,s1,-4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1135
	goto out;
}

static void put_kargv(int argc, char **kargv)
{
	while (argc > 0) {
8000df3c:	5600fffc 	bnezl	s0,8000df30 <put_kargv+0x24>
8000df40:	8e24fffc 	lw	a0,-4(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1138
		kfree(kargv[--argc]);
	}
}
8000df44:	8fbf001c 	lw	ra,28(sp)
8000df48:	8fb10018 	lw	s1,24(sp)
8000df4c:	8fb00014 	lw	s0,20(sp)
8000df50:	03e00008 	jr	ra
8000df54:	27bd0020 	addiu	sp,sp,32

8000df58 <put_pgdir>:
kva2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:111
	return KADDR(page2pa(page));
}

static inline struct Page *kva2page(void *kva)
{
	return pa2page(PADDR(kva));
8000df58:	8c870010 	lw	a3,16(a0)
8000df5c:	3c028000 	lui	v0,0x8000
8000df60:	24421000 	addiu	v0,v0,4096
put_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:262
	return 0;
}

// put_pgdir - free the memory space of PDT
static void put_pgdir(struct mm_struct *mm)
{
8000df64:	27bdffe8 	addiu	sp,sp,-24
kva2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:111
8000df68:	00e2102b 	sltu	v0,a3,v0
8000df6c:	14400011 	bnez	v0,8000dfb4 <put_pgdir+0x5c>
8000df70:	afbf0014 	sw	ra,20(sp)
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
8000df74:	3c028015 	lui	v0,0x8015
8000df78:	3c037fff 	lui	v1,0x7fff
8000df7c:	8c427770 	lw	v0,30576(v0)
8000df80:	3463f000 	ori	v1,v1,0xf000
8000df84:	00e33821 	addu	a3,a3,v1
8000df88:	00073b02 	srl	a3,a3,0xc
8000df8c:	00e2102b 	sltu	v0,a3,v0
8000df90:	1040000e 	beqz	v0,8000dfcc <put_pgdir+0x74>
8000df94:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
		panic("pa2page called with invalid pa");
	}
	return &pages[PPN(pa)];
8000df98:	8c4477bc 	lw	a0,30652(v0)
put_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:264
	free_page(kva2page(mm->pgdir));
}
8000df9c:	8fbf0014 	lw	ra,20(sp)
kva2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
8000dfa0:	00073940 	sll	a3,a3,0x5
put_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:263
}

// put_pgdir - free the memory space of PDT
static void put_pgdir(struct mm_struct *mm)
{
	free_page(kva2page(mm->pgdir));
8000dfa4:	24050001 	li	a1,1
8000dfa8:	00872021 	addu	a0,a0,a3
8000dfac:	08007441 	j	8001d104 <free_pages>
8000dfb0:	27bd0018 	addiu	sp,sp,24
kva2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:111
	return KADDR(page2pa(page));
}

static inline struct Page *kva2page(void *kva)
{
	return pa2page(PADDR(kva));
8000dfb4:	3c048002 	lui	a0,0x8002
8000dfb8:	3c068002 	lui	a2,0x8002
8000dfbc:	248429ec 	addiu	a0,a0,10732
8000dfc0:	2405006f 	li	a1,111
8000dfc4:	0c006b0b 	jal	8001ac2c <__panic>
8000dfc8:	24c62a30 	addiu	a2,a2,10800
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:99
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
		panic("pa2page called with invalid pa");
8000dfcc:	3c048002 	lui	a0,0x8002
8000dfd0:	3c068002 	lui	a2,0x8002
8000dfd4:	248429ec 	addiu	a0,a0,10732
8000dfd8:	24050063 	li	a1,99
8000dfdc:	0c006b0b 	jal	8001ac2c <__panic>
8000dfe0:	24c62a54 	addiu	a2,a2,10836

8000dfe4 <load_icode_read>:
load_icode_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:748
	current->exit_code = error_code;
	return __do_exit();
}

static int load_icode_read(int fd, void *buf, size_t len, off_t offset)
{
8000dfe4:	27bdffd8 	addiu	sp,sp,-40
8000dfe8:	afb10018 	sw	s1,24(sp)
8000dfec:	afb00014 	sw	s0,20(sp)
8000dff0:	00a08821 	move	s1,a1
8000dff4:	00c08021 	move	s0,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:750
	int ret;
	if ((ret = sysfile_seek(fd, offset, LSEEK_SET)) != 0) {
8000dff8:	00e02821 	move	a1,a3
8000dffc:	00003021 	move	a2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:748
	current->exit_code = error_code;
	return __do_exit();
}

static int load_icode_read(int fd, void *buf, size_t len, off_t offset)
{
8000e000:	afb30020 	sw	s3,32(sp)
8000e004:	afb2001c 	sw	s2,28(sp)
8000e008:	afbf0024 	sw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:750
	int ret;
	if ((ret = sysfile_seek(fd, offset, LSEEK_SET)) != 0) {
8000e00c:	0c003536 	jal	8000d4d8 <sysfile_seek>
8000e010:	00809821 	move	s3,a0
8000e014:	10400009 	beqz	v0,8000e03c <load_icode_read+0x58>
8000e018:	00409021 	move	s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:757
	}
	if ((ret = sysfile_read(fd, buf, len)) != len) {
		return (ret < 0) ? ret : -1;
	}
	return 0;
}
8000e01c:	8fbf0024 	lw	ra,36(sp)
8000e020:	02401021 	move	v0,s2
8000e024:	8fb30020 	lw	s3,32(sp)
8000e028:	8fb2001c 	lw	s2,28(sp)
8000e02c:	8fb10018 	lw	s1,24(sp)
8000e030:	8fb00014 	lw	s0,20(sp)
8000e034:	03e00008 	jr	ra
8000e038:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:753
{
	int ret;
	if ((ret = sysfile_seek(fd, offset, LSEEK_SET)) != 0) {
		return ret;
	}
	if ((ret = sysfile_read(fd, buf, len)) != len) {
8000e03c:	02602021 	move	a0,s3
8000e040:	02202821 	move	a1,s1
8000e044:	0c0033f6 	jal	8000cfd8 <sysfile_read>
8000e048:	02003021 	move	a2,s0
8000e04c:	1202fff3 	beq	s0,v0,8000e01c <load_icode_read+0x38>
8000e050:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:754
		return (ret < 0) ? ret : -1;
8000e054:	28430000 	slti	v1,v0,0
8000e058:	2412ffff 	li	s2,-1
8000e05c:	0043900b 	movn	s2,v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:757
	}
	return 0;
}
8000e060:	02401021 	move	v0,s2
8000e064:	8fb30020 	lw	s3,32(sp)
8000e068:	8fb2001c 	lw	s2,28(sp)
8000e06c:	8fb10018 	lw	s1,24(sp)
8000e070:	8fb00014 	lw	s0,20(sp)
8000e074:	03e00008 	jr	ra
8000e078:	27bd0028 	addiu	sp,sp,40

8000e07c <copy_kargv.constprop.3>:
copy_kargv():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1141
		kfree(kargv[--argc]);
	}
}

static int
copy_kargv(struct mm_struct *mm, char **kargv, const char **argv, int max_argc,
8000e07c:	27bdffb0 	addiu	sp,sp,-80
8000e080:	afb70048 	sw	s7,72(sp)
8000e084:	afb60044 	sw	s6,68(sp)
8000e088:	afb30038 	sw	s3,56(sp)
8000e08c:	afbf004c 	sw	ra,76(sp)
8000e090:	afb50040 	sw	s5,64(sp)
8000e094:	afb4003c 	sw	s4,60(sp)
8000e098:	afb20034 	sw	s2,52(sp)
8000e09c:	afb10030 	sw	s1,48(sp)
8000e0a0:	afb0002c 	sw	s0,44(sp)
8000e0a4:	00809821 	move	s3,a0
8000e0a8:	00a0b021 	move	s6,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1145
	   int *argc_store)
{
	int i, ret = -E_INVAL;
	if (!argv) {
8000e0ac:	10c00043 	beqz	a2,8000e1bc <copy_kargv.constprop.3+0x140>
8000e0b0:	00e0b821 	move	s7,a3
8000e0b4:	00a08021 	move	s0,a1
8000e0b8:	00009021 	move	s2,zero
8000e0bc:	00c5a023 	subu	s4,a2,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1150
		*argc_store = 0;
		return 0;
	}
	char *argv_k;
	for (i = 0; i < max_argc; i++) {
8000e0c0:	24150020 	li	s5,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1151
		if (!copy_from_user(mm, &argv_k, argv + i, sizeof(char *), 0))
8000e0c4:	02602021 	move	a0,s3
8000e0c8:	02903021 	addu	a2,s4,s0
8000e0cc:	27a50018 	addiu	a1,sp,24
8000e0d0:	24070004 	li	a3,4
8000e0d4:	0c00792e 	jal	8001e4b8 <copy_from_user>
8000e0d8:	afa00010 	sw	zero,16(sp)
8000e0dc:	10400020 	beqz	v0,8000e160 <copy_kargv.constprop.3+0xe4>
8000e0e0:	24041000 	li	a0,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1153
			goto failed_cleanup;
		if (!argv_k)
8000e0e4:	8fa20018 	lw	v0,24(sp)
8000e0e8:	10400011 	beqz	v0,8000e130 <copy_kargv.constprop.3+0xb4>
8000e0ec:	8fbf004c 	lw	ra,76(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1156
			break;
		char *buffer;
		if ((buffer = kmalloc(EXEC_MAX_ARG_LEN + 1)) == NULL) {
8000e0f0:	0c005486 	jal	80015218 <kmalloc>
8000e0f4:	00000000 	nop
8000e0f8:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1166
		    !copy_string(mm, buffer, argv_k, EXEC_MAX_ARG_LEN + 1)) {
			kfree(buffer);
			goto failed_cleanup;
		}
#endif
		if (!copy_string(mm, buffer, argv_k, EXEC_MAX_ARG_LEN + 1)) {
8000e0fc:	02602021 	move	a0,s3
8000e100:	00402821 	move	a1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1156
		if (!copy_from_user(mm, &argv_k, argv + i, sizeof(char *), 0))
			goto failed_cleanup;
		if (!argv_k)
			break;
		char *buffer;
		if ((buffer = kmalloc(EXEC_MAX_ARG_LEN + 1)) == NULL) {
8000e104:	10400027 	beqz	v0,8000e1a4 <copy_kargv.constprop.3+0x128>
8000e108:	24071000 	li	a3,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1166
		    !copy_string(mm, buffer, argv_k, EXEC_MAX_ARG_LEN + 1)) {
			kfree(buffer);
			goto failed_cleanup;
		}
#endif
		if (!copy_string(mm, buffer, argv_k, EXEC_MAX_ARG_LEN + 1)) {
8000e10c:	0c007961 	jal	8001e584 <copy_string>
8000e110:	8fa60018 	lw	a2,24(sp)
8000e114:	10400025 	beqz	v0,8000e1ac <copy_kargv.constprop.3+0x130>
8000e118:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1150
	if (!argv) {
		*argc_store = 0;
		return 0;
	}
	char *argv_k;
	for (i = 0; i < max_argc; i++) {
8000e11c:	26520001 	addiu	s2,s2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1170
#endif
		if (!copy_string(mm, buffer, argv_k, EXEC_MAX_ARG_LEN + 1)) {
			kfree(buffer);
			goto failed_cleanup;
		}
		kargv[i] = buffer;
8000e120:	ae110000 	sw	s1,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1150
	if (!argv) {
		*argc_store = 0;
		return 0;
	}
	char *argv_k;
	for (i = 0; i < max_argc; i++) {
8000e124:	1655ffe7 	bne	s2,s5,8000e0c4 <copy_kargv.constprop.3+0x48>
8000e128:	26100004 	addiu	s0,s0,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1180
failed_nomem:
	ret = -E_NO_MEM;
failed_cleanup:
	put_kargv(i, kargv);
	return ret;
}
8000e12c:	8fbf004c 	lw	ra,76(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1172
			kfree(buffer);
			goto failed_cleanup;
		}
		kargv[i] = buffer;
	}
	*argc_store = i;
8000e130:	aef20000 	sw	s2,0(s7)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1173
	return 0;
8000e134:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1180
failed_nomem:
	ret = -E_NO_MEM;
failed_cleanup:
	put_kargv(i, kargv);
	return ret;
}
8000e138:	8fb70048 	lw	s7,72(sp)
8000e13c:	8fb60044 	lw	s6,68(sp)
8000e140:	8fb50040 	lw	s5,64(sp)
8000e144:	8fb4003c 	lw	s4,60(sp)
8000e148:	8fb30038 	lw	s3,56(sp)
8000e14c:	8fb20034 	lw	s2,52(sp)
8000e150:	8fb10030 	lw	s1,48(sp)
8000e154:	8fb0002c 	lw	s0,44(sp)
8000e158:	03e00008 	jr	ra
8000e15c:	27bd0050 	addiu	sp,sp,80
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1144

static int
copy_kargv(struct mm_struct *mm, char **kargv, const char **argv, int max_argc,
	   int *argc_store)
{
	int i, ret = -E_INVAL;
8000e160:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1178
	return 0;

failed_nomem:
	ret = -E_NO_MEM;
failed_cleanup:
	put_kargv(i, kargv);
8000e164:	02402021 	move	a0,s2
8000e168:	02c02821 	move	a1,s6
8000e16c:	0c0037c3 	jal	8000df0c <put_kargv>
8000e170:	afa20020 	sw	v0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1180
	return ret;
}
8000e174:	8fbf004c 	lw	ra,76(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1178
	return 0;

failed_nomem:
	ret = -E_NO_MEM;
failed_cleanup:
	put_kargv(i, kargv);
8000e178:	8fa20020 	lw	v0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1180
	return ret;
}
8000e17c:	8fb70048 	lw	s7,72(sp)
8000e180:	8fb60044 	lw	s6,68(sp)
8000e184:	8fb50040 	lw	s5,64(sp)
8000e188:	8fb4003c 	lw	s4,60(sp)
8000e18c:	8fb30038 	lw	s3,56(sp)
8000e190:	8fb20034 	lw	s2,52(sp)
8000e194:	8fb10030 	lw	s1,48(sp)
8000e198:	8fb0002c 	lw	s0,44(sp)
8000e19c:	03e00008 	jr	ra
8000e1a0:	27bd0050 	addiu	sp,sp,80
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1176
	}
	*argc_store = i;
	return 0;

failed_nomem:
	ret = -E_NO_MEM;
8000e1a4:	08003859 	j	8000e164 <copy_kargv.constprop.3+0xe8>
8000e1a8:	2402fff4 	li	v0,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1167
			kfree(buffer);
			goto failed_cleanup;
		}
#endif
		if (!copy_string(mm, buffer, argv_k, EXEC_MAX_ARG_LEN + 1)) {
			kfree(buffer);
8000e1ac:	0c0054b1 	jal	800152c4 <kfree>
8000e1b0:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1144

static int
copy_kargv(struct mm_struct *mm, char **kargv, const char **argv, int max_argc,
	   int *argc_store)
{
	int i, ret = -E_INVAL;
8000e1b4:	08003859 	j	8000e164 <copy_kargv.constprop.3+0xe8>
8000e1b8:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1180
failed_nomem:
	ret = -E_NO_MEM;
failed_cleanup:
	put_kargv(i, kargv);
	return ret;
}
8000e1bc:	8fbf004c 	lw	ra,76(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1147
	   int *argc_store)
{
	int i, ret = -E_INVAL;
	if (!argv) {
		*argc_store = 0;
		return 0;
8000e1c0:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1180
failed_nomem:
	ret = -E_NO_MEM;
failed_cleanup:
	put_kargv(i, kargv);
	return ret;
}
8000e1c4:	8fb70048 	lw	s7,72(sp)
8000e1c8:	8fb60044 	lw	s6,68(sp)
8000e1cc:	8fb50040 	lw	s5,64(sp)
8000e1d0:	8fb4003c 	lw	s4,60(sp)
8000e1d4:	8fb30038 	lw	s3,56(sp)
8000e1d8:	8fb20034 	lw	s2,52(sp)
8000e1dc:	8fb10030 	lw	s1,48(sp)
8000e1e0:	8fb0002c 	lw	s0,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1146
copy_kargv(struct mm_struct *mm, char **kargv, const char **argv, int max_argc,
	   int *argc_store)
{
	int i, ret = -E_INVAL;
	if (!argv) {
		*argc_store = 0;
8000e1e4:	ace00000 	sw	zero,0(a3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1180
failed_nomem:
	ret = -E_NO_MEM;
failed_cleanup:
	put_kargv(i, kargv);
	return ret;
}
8000e1e8:	03e00008 	jr	ra
8000e1ec:	27bd0050 	addiu	sp,sp,80

8000e1f0 <map_ph>:
map_ph():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:771
	uint32_t vm_flags = 0;
	uint32_t bias = 0;
	pte_perm_t perm = 0;
	ptep_set_u_read(&perm);

	if (ph->p_flags & ELF_PF_X)
8000e1f0:	8ca20018 	lw	v0,24(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:763

//#ifdef UCONFIG_BIONIC_LIBC
static int
map_ph(int fd, struct proghdr *ph, struct mm_struct *mm, uint32_t * pbias,
       uint32_t linker)
{
8000e1f4:	27bdffb0 	addiu	sp,sp,-80
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:772
	uint32_t bias = 0;
	pte_perm_t perm = 0;
	ptep_set_u_read(&perm);

	if (ph->p_flags & ELF_PF_X)
		vm_flags |= VM_EXEC;
8000e1f8:	24030004 	li	v1,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:763

//#ifdef UCONFIG_BIONIC_LIBC
static int
map_ph(int fd, struct proghdr *ph, struct mm_struct *mm, uint32_t * pbias,
       uint32_t linker)
{
8000e1fc:	afb00028 	sw	s0,40(sp)
8000e200:	afa50054 	sw	a1,84(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:771
	uint32_t vm_flags = 0;
	uint32_t bias = 0;
	pte_perm_t perm = 0;
	ptep_set_u_read(&perm);

	if (ph->p_flags & ELF_PF_X)
8000e204:	30500001 	andi	s0,v0,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:772
		vm_flags |= VM_EXEC;
8000e208:	00602821 	move	a1,v1
8000e20c:	0010280a 	movz	a1,zero,s0
8000e210:	00a08021 	move	s0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:773
	if (ph->p_flags & ELF_PF_W)
8000e214:	30450002 	andi	a1,v0,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:774
		vm_flags |= VM_WRITE;
8000e218:	02058025 	or	s0,s0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:776
	if (ph->p_flags & ELF_PF_R)
		vm_flags |= VM_READ;
8000e21c:	7c420080 	ext	v0,v0,0x2,0x1
8000e220:	00508025 	or	s0,v0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:763

//#ifdef UCONFIG_BIONIC_LIBC
static int
map_ph(int fd, struct proghdr *ph, struct mm_struct *mm, uint32_t * pbias,
       uint32_t linker)
{
8000e224:	afb60040 	sw	s6,64(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:778
	if (ph->p_flags & ELF_PF_W)
		vm_flags |= VM_WRITE;
	if (ph->p_flags & ELF_PF_R)
		vm_flags |= VM_READ;

	if (vm_flags & VM_WRITE)
8000e228:	32020002 	andi	v0,s0,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:65
	*ptep |= PTE_U;
}

static inline void ptep_set_u_write(pte_t * ptep)
{
	*ptep |= PTE_W | PTE_U;
8000e22c:	24160006 	li	s6,6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:763

//#ifdef UCONFIG_BIONIC_LIBC
static int
map_ph(int fd, struct proghdr *ph, struct mm_struct *mm, uint32_t * pbias,
       uint32_t linker)
{
8000e230:	afbe0048 	sw	s8,72(sp)
8000e234:	afb70044 	sw	s7,68(sp)
8000e238:	afbf004c 	sw	ra,76(sp)
8000e23c:	afb5003c 	sw	s5,60(sp)
8000e240:	afb40038 	sw	s4,56(sp)
8000e244:	afb30034 	sw	s3,52(sp)
8000e248:	afb20030 	sw	s2,48(sp)
8000e24c:	afb1002c 	sw	s1,44(sp)
8000e250:	0080f021 	move	s8,a0
8000e254:	00c0b821 	move	s7,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:781
		vm_flags |= VM_READ;

	if (vm_flags & VM_WRITE)
		ptep_set_u_write(&perm);

	if (pbias) {
8000e258:	10e00055 	beqz	a3,8000e3b0 <map_ph+0x1c0>
8000e25c:	0062b00a 	movz	s6,v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:782
		bias = *pbias;
8000e260:	8ce30000 	lw	v1,0(a3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:784
	}
	if (!bias && !ph->p_va) {
8000e264:	10600052 	beqz	v1,8000e3b0 <map_ph+0x1c0>
8000e268:	afa30018 	sw	v1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:788
		bias = get_unmapped_area(mm, ph->p_memsz + PGSIZE);
		bias = ROUNDUP(bias, PGSIZE);
		if (pbias)
			*pbias = bias;
8000e26c:	8fa30054 	lw	v1,84(sp)
8000e270:	8c650008 	lw	a1,8(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:791
	}

	if ((ret =
8000e274:	8fa30054 	lw	v1,84(sp)
8000e278:	02e02021 	move	a0,s7
8000e27c:	02003821 	move	a3,s0
8000e280:	8c660014 	lw	a2,20(v1)
8000e284:	8fa30018 	lw	v1,24(sp)
8000e288:	afa00010 	sw	zero,16(sp)
8000e28c:	0c004e4a 	jal	80013928 <mm_map>
8000e290:	00a32821 	addu	a1,a1,v1
8000e294:	14400039 	bnez	v0,8000e37c <map_ph+0x18c>
8000e298:	afa2001c 	sw	v0,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:796
	     mm_map(mm, ph->p_va + bias, ph->p_memsz, vm_flags, NULL)) != 0) {
		goto bad_cleanup_mmap;
	}

	if (!linker && mm->brk_start < ph->p_va + bias + ph->p_memsz) {
8000e29c:	8fa20060 	lw	v0,96(sp)
8000e2a0:	10400056 	beqz	v0,8000e3fc <map_ph+0x20c>
8000e2a4:	8fa30054 	lw	v1,84(sp)
8000e2a8:	8c620008 	lw	v0,8(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:804

	off_t offset = ph->p_offset;
	size_t off, size;
	uintptr_t start = ph->p_va + bias, end, la = ROUNDDOWN(start, PGSIZE);

	end = ph->p_va + bias + ph->p_filesz;
8000e2ac:	8fa30054 	lw	v1,84(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:800

	if (!linker && mm->brk_start < ph->p_va + bias + ph->p_memsz) {
		mm->brk_start = ph->p_va + bias + ph->p_memsz;
	}

	off_t offset = ph->p_offset;
8000e2b0:	8fa40054 	lw	a0,84(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:802
	size_t off, size;
	uintptr_t start = ph->p_va + bias, end, la = ROUNDDOWN(start, PGSIZE);
8000e2b4:	2410f000 	li	s0,-4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:804

	end = ph->p_va + bias + ph->p_filesz;
8000e2b8:	8c750010 	lw	s5,16(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:802
		mm->brk_start = ph->p_va + bias + ph->p_memsz;
	}

	off_t offset = ph->p_offset;
	size_t off, size;
	uintptr_t start = ph->p_va + bias, end, la = ROUNDDOWN(start, PGSIZE);
8000e2bc:	8fa30018 	lw	v1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:800

	if (!linker && mm->brk_start < ph->p_va + bias + ph->p_memsz) {
		mm->brk_start = ph->p_va + bias + ph->p_memsz;
	}

	off_t offset = ph->p_offset;
8000e2c0:	8c940004 	lw	s4,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:802
	size_t off, size;
	uintptr_t start = ph->p_va + bias, end, la = ROUNDDOWN(start, PGSIZE);
8000e2c4:	00438821 	addu	s1,v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:804

	end = ph->p_va + bias + ph->p_filesz;
8000e2c8:	0235a821 	addu	s5,s1,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:805
	while (start < end) {
8000e2cc:	0235182b 	sltu	v1,s1,s5
8000e2d0:	14600022 	bnez	v1,8000e35c <map_ph+0x16c>
8000e2d4:	02308024 	and	s0,s1,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:822
			goto bad_cleanup_mmap;
		}
		start += size, offset += size;
	}

	end = ph->p_va + bias + ph->p_memsz;
8000e2d8:	0800390d 	j	8000e434 <map_ph+0x244>
8000e2dc:	8fa30054 	lw	v1,84(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:810
	while (start < end) {
		if ((page = pgdir_alloc_page(mm->pgdir, la, perm)) == NULL) {
			ret = -E_NO_MEM;
			goto bad_cleanup_mmap;
		}
		off = start - la, size = PGSIZE - off, la += PGSIZE;
8000e2e0:	02302823 	subu	a1,s1,s0
8000e2e4:	26101000 	addiu	s0,s0,4096
8000e2e8:	24031000 	li	v1,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:811
		if (end < la) {
8000e2ec:	02b0102b 	sltu	v0,s5,s0
8000e2f0:	10400003 	beqz	v0,8000e300 <map_ph+0x110>
8000e2f4:	00659023 	subu	s2,v1,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:812
			size -= la - end;
8000e2f8:	02509023 	subu	s2,s2,s0
8000e2fc:	02559021 	addu	s2,s2,s5
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8000e300:	3c048015 	lui	a0,0x8015
8000e304:	8c8777bc 	lw	a3,30652(a0)
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8000e308:	3c038015 	lui	v1,0x8015
8000e30c:	8c627770 	lw	v0,30576(v1)
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8000e310:	02673823 	subu	a3,s3,a3
8000e314:	00073943 	sra	a3,a3,0x5
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8000e318:	00073b00 	sll	a3,a3,0xc
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8000e31c:	00071b02 	srl	v1,a3,0xc
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
	return page - pages;
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8000e320:	3c048000 	lui	a0,0x8000
8000e324:	34841000 	ori	a0,a0,0x1000
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8000e328:	0062102b 	sltu	v0,v1,v0
8000e32c:	104000a4 	beqz	v0,8000e5c0 <map_ph+0x3d0>
8000e330:	00e43821 	addu	a3,a3,a0
map_ph():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:814
		}
		if ((ret =
8000e334:	00e52821 	addu	a1,a3,a1
8000e338:	03c02021 	move	a0,s8
8000e33c:	02403021 	move	a2,s2
8000e340:	0c0037f9 	jal	8000dfe4 <load_icode_read>
8000e344:	02803821 	move	a3,s4
8000e348:	14400083 	bnez	v0,8000e558 <map_ph+0x368>
8000e34c:	02328821 	addu	s1,s1,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:805
	off_t offset = ph->p_offset;
	size_t off, size;
	uintptr_t start = ph->p_va + bias, end, la = ROUNDDOWN(start, PGSIZE);

	end = ph->p_va + bias + ph->p_filesz;
	while (start < end) {
8000e350:	0235102b 	sltu	v0,s1,s5
8000e354:	10400034 	beqz	v0,8000e428 <map_ph+0x238>
8000e358:	0254a021 	addu	s4,s2,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:806
		if ((page = pgdir_alloc_page(mm->pgdir, la, perm)) == NULL) {
8000e35c:	8ee40010 	lw	a0,16(s7)
8000e360:	02002821 	move	a1,s0
8000e364:	0c005e4d 	jal	80017934 <pgdir_alloc_page>
8000e368:	02c03021 	move	a2,s6
8000e36c:	1440ffdc 	bnez	v0,8000e2e0 <map_ph+0xf0>
8000e370:	00409821 	move	s3,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:840
		       || (end >= la && start == la));
	}

	while (start < end) {
		if ((page = pgdir_alloc_page(mm->pgdir, la, perm)) == NULL) {
			ret = -E_NO_MEM;
8000e374:	2403fff4 	li	v1,-12
8000e378:	afa3001c 	sw	v1,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:854
	}
normal_exit:
	return 0;
bad_cleanup_mmap:
	return ret;
}
8000e37c:	8fbf004c 	lw	ra,76(sp)
8000e380:	8fa2001c 	lw	v0,28(sp)
8000e384:	8fbe0048 	lw	s8,72(sp)
8000e388:	8fb70044 	lw	s7,68(sp)
8000e38c:	8fb60040 	lw	s6,64(sp)
8000e390:	8fb5003c 	lw	s5,60(sp)
8000e394:	8fb40038 	lw	s4,56(sp)
8000e398:	8fb30034 	lw	s3,52(sp)
8000e39c:	8fb20030 	lw	s2,48(sp)
8000e3a0:	8fb1002c 	lw	s1,44(sp)
8000e3a4:	8fb00028 	lw	s0,40(sp)
8000e3a8:	03e00008 	jr	ra
8000e3ac:	27bd0050 	addiu	sp,sp,80
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:784
		ptep_set_u_write(&perm);

	if (pbias) {
		bias = *pbias;
	}
	if (!bias && !ph->p_va) {
8000e3b0:	8fa30054 	lw	v1,84(sp)
8000e3b4:	afa00018 	sw	zero,24(sp)
8000e3b8:	8c650008 	lw	a1,8(v1)
8000e3bc:	54a0ffae 	bnezl	a1,8000e278 <map_ph+0x88>
8000e3c0:	8fa30054 	lw	v1,84(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:785
		bias = get_unmapped_area(mm, ph->p_memsz + PGSIZE);
8000e3c4:	8c650014 	lw	a1,20(v1)
8000e3c8:	02e02021 	move	a0,s7
8000e3cc:	afa70020 	sw	a3,32(sp)
8000e3d0:	0c00501c 	jal	80014070 <get_unmapped_area>
8000e3d4:	24a51000 	addiu	a1,a1,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:786
		bias = ROUNDUP(bias, PGSIZE);
8000e3d8:	24420fff 	addiu	v0,v0,4095
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:787
		if (pbias)
8000e3dc:	8fa70020 	lw	a3,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:786
	if (pbias) {
		bias = *pbias;
	}
	if (!bias && !ph->p_va) {
		bias = get_unmapped_area(mm, ph->p_memsz + PGSIZE);
		bias = ROUNDUP(bias, PGSIZE);
8000e3e0:	30430fff 	andi	v1,v0,0xfff
8000e3e4:	00431823 	subu	v1,v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:787
		if (pbias)
8000e3e8:	10e0ffa0 	beqz	a3,8000e26c <map_ph+0x7c>
8000e3ec:	afa30018 	sw	v1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:788
			*pbias = bias;
8000e3f0:	8fa30018 	lw	v1,24(sp)
8000e3f4:	0800389b 	j	8000e26c <map_ph+0x7c>
8000e3f8:	ace30000 	sw	v1,0(a3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:796
	if ((ret =
	     mm_map(mm, ph->p_va + bias, ph->p_memsz, vm_flags, NULL)) != 0) {
		goto bad_cleanup_mmap;
	}

	if (!linker && mm->brk_start < ph->p_va + bias + ph->p_memsz) {
8000e3fc:	8c620008 	lw	v0,8(v1)
8000e400:	8c630014 	lw	v1,20(v1)
8000e404:	8fa50018 	lw	a1,24(sp)
8000e408:	8ee40024 	lw	a0,36(s7)
8000e40c:	00431821 	addu	v1,v0,v1
8000e410:	00651821 	addu	v1,v1,a1
8000e414:	0083202b 	sltu	a0,a0,v1
8000e418:	5480ffa4 	bnezl	a0,8000e2ac <map_ph+0xbc>
8000e41c:	aee30024 	sw	v1,36(s7)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:804

	off_t offset = ph->p_offset;
	size_t off, size;
	uintptr_t start = ph->p_va + bias, end, la = ROUNDDOWN(start, PGSIZE);

	end = ph->p_va + bias + ph->p_filesz;
8000e420:	080038ac 	j	8000e2b0 <map_ph+0xc0>
8000e424:	8fa30054 	lw	v1,84(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:805
	while (start < end) {
8000e428:	8fa30054 	lw	v1,84(sp)
8000e42c:	8c620008 	lw	v0,8(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:822
			goto bad_cleanup_mmap;
		}
		start += size, offset += size;
	}

	end = ph->p_va + bias + ph->p_memsz;
8000e430:	8fa30054 	lw	v1,84(sp)
8000e434:	8fa40018 	lw	a0,24(sp)
8000e438:	8c720014 	lw	s2,20(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:824

	if (start < la) {
8000e43c:	0230182b 	sltu	v1,s1,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:822
			goto bad_cleanup_mmap;
		}
		start += size, offset += size;
	}

	end = ph->p_va + bias + ph->p_memsz;
8000e440:	00929021 	addu	s2,a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:824

	if (start < la) {
8000e444:	1060001c 	beqz	v1,8000e4b8 <map_ph+0x2c8>
8000e448:	02429021 	addu	s2,s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:825
		if (start == end) {
8000e44c:	1232ffcb 	beq	s1,s2,8000e37c <map_ph+0x18c>
8000e450:	02301023 	subu	v0,s1,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:829
			goto normal_exit;
		}
		off = start + PGSIZE - la, size = PGSIZE - off;
		if (end < la) {
8000e454:	0250a02b 	sltu	s4,s2,s0
8000e458:	16800056 	bnez	s4,8000e5b4 <map_ph+0x3c4>
8000e45c:	0002a823 	negu	s5,v0
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8000e460:	3c038015 	lui	v1,0x8015
8000e464:	8c6377bc 	lw	v1,30652(v1)
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8000e468:	3c048015 	lui	a0,0x8015
8000e46c:	8c847770 	lw	a0,30576(a0)
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8000e470:	02631823 	subu	v1,s3,v1
8000e474:	00031943 	sra	v1,v1,0x5
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8000e478:	00031b00 	sll	v1,v1,0xc
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8000e47c:	00032b02 	srl	a1,v1,0xc
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
	return page - pages;
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8000e480:	3c078000 	lui	a3,0x8000
8000e484:	24e71000 	addiu	a3,a3,4096
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8000e488:	00a4202b 	sltu	a0,a1,a0
8000e48c:	1080004c 	beqz	a0,8000e5c0 <map_ph+0x3d0>
8000e490:	00673821 	addu	a3,v1,a3
map_ph():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:828

	if (start < la) {
		if (start == end) {
			goto normal_exit;
		}
		off = start + PGSIZE - la, size = PGSIZE - off;
8000e494:	24421000 	addiu	v0,v0,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:832
		if (end < la) {
			size -= la - end;
		}
		memset(page2kva(page) + off, 0, size);
8000e498:	00e22021 	addu	a0,a3,v0
8000e49c:	00002821 	move	a1,zero
8000e4a0:	0c005c52 	jal	80017148 <memset>
8000e4a4:	02a03021 	move	a2,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:834
		start += size;
		assert((end < la && start == end)
8000e4a8:	16800039 	bnez	s4,8000e590 <map_ph+0x3a0>
8000e4ac:	02358821 	addu	s1,s1,s5
8000e4b0:	16300039 	bne	s1,s0,8000e598 <map_ph+0x3a8>
8000e4b4:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:838
		       || (end >= la && start == la));
	}

	while (start < end) {
8000e4b8:	0232102b 	sltu	v0,s1,s2
8000e4bc:	1040ffaf 	beqz	v0,8000e37c <map_ph+0x18c>
8000e4c0:	3c148000 	lui	s4,0x8000
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:843
		if ((page = pgdir_alloc_page(mm->pgdir, la, perm)) == NULL) {
			ret = -E_NO_MEM;
			goto bad_cleanup_mmap;
		}
		off = start - la, size = PGSIZE - off, la += PGSIZE;
8000e4c4:	241e1000 	li	s8,4096
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8000e4c8:	3c158015 	lui	s5,0x8015
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8000e4cc:	26941000 	addiu	s4,s4,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8000e4d0:	0800394d 	j	8000e534 <map_ph+0x344>
8000e4d4:	3c138015 	lui	s3,0x8015
map_ph():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:843
8000e4d8:	26101000 	addiu	s0,s0,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:844
		if (end < la) {
8000e4dc:	0250282b 	sltu	a1,s2,s0
8000e4e0:	10a00003 	beqz	a1,8000e4f0 <map_ph+0x300>
8000e4e4:	03c41823 	subu	v1,s8,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:845
			size -= la - end;
8000e4e8:	00701823 	subu	v1,v1,s0
8000e4ec:	00721821 	addu	v1,v1,s2
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8000e4f0:	8ea777bc 	lw	a3,30652(s5)
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8000e4f4:	8e657770 	lw	a1,30576(s3)
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8000e4f8:	00473823 	subu	a3,v0,a3
8000e4fc:	00073943 	sra	a3,a3,0x5
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8000e500:	00073b00 	sll	a3,a3,0xc
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8000e504:	00071302 	srl	v0,a3,0xc
8000e508:	0045102b 	sltu	v0,v0,a1
8000e50c:	1040002c 	beqz	v0,8000e5c0 <map_ph+0x3d0>
8000e510:	00f43821 	addu	a3,a3,s4
map_ph():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:848
		}
		memset(page2kva(page) + off, 0, size);
		start += size;
8000e514:	02238821 	addu	s1,s1,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:847
		}
		off = start - la, size = PGSIZE - off, la += PGSIZE;
		if (end < la) {
			size -= la - end;
		}
		memset(page2kva(page) + off, 0, size);
8000e518:	00e42021 	addu	a0,a3,a0
8000e51c:	00002821 	move	a1,zero
8000e520:	0c005c52 	jal	80017148 <memset>
8000e524:	00603021 	move	a2,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:838
		start += size;
		assert((end < la && start == end)
		       || (end >= la && start == la));
	}

	while (start < end) {
8000e528:	0232102b 	sltu	v0,s1,s2
8000e52c:	1040ff94 	beqz	v0,8000e380 <map_ph+0x190>
8000e530:	8fbf004c 	lw	ra,76(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:839
		if ((page = pgdir_alloc_page(mm->pgdir, la, perm)) == NULL) {
8000e534:	8ee40010 	lw	a0,16(s7)
8000e538:	02002821 	move	a1,s0
8000e53c:	0c005e4d 	jal	80017934 <pgdir_alloc_page>
8000e540:	02c03021 	move	a2,s6
8000e544:	1440ffe4 	bnez	v0,8000e4d8 <map_ph+0x2e8>
8000e548:	02302023 	subu	a0,s1,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:840
			ret = -E_NO_MEM;
8000e54c:	2403fff4 	li	v1,-12
8000e550:	080038df 	j	8000e37c <map_ph+0x18c>
8000e554:	afa3001c 	sw	v1,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:854
	}
normal_exit:
	return 0;
bad_cleanup_mmap:
	return ret;
}
8000e558:	8fbf004c 	lw	ra,76(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:814
		}
		off = start - la, size = PGSIZE - off, la += PGSIZE;
		if (end < la) {
			size -= la - end;
		}
		if ((ret =
8000e55c:	afa2001c 	sw	v0,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:854
	}
normal_exit:
	return 0;
bad_cleanup_mmap:
	return ret;
}
8000e560:	8fa2001c 	lw	v0,28(sp)
8000e564:	8fbe0048 	lw	s8,72(sp)
8000e568:	8fb70044 	lw	s7,68(sp)
8000e56c:	8fb60040 	lw	s6,64(sp)
8000e570:	8fb5003c 	lw	s5,60(sp)
8000e574:	8fb40038 	lw	s4,56(sp)
8000e578:	8fb30034 	lw	s3,52(sp)
8000e57c:	8fb20030 	lw	s2,48(sp)
8000e580:	8fb1002c 	lw	s1,44(sp)
8000e584:	8fb00028 	lw	s0,40(sp)
8000e588:	03e00008 	jr	ra
8000e58c:	27bd0050 	addiu	sp,sp,80
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:834
		if (end < la) {
			size -= la - end;
		}
		memset(page2kva(page) + off, 0, size);
		start += size;
		assert((end < la && start == end)
8000e590:	1232ff7a 	beq	s1,s2,8000e37c <map_ph+0x18c>
8000e594:	3c048002 	lui	a0,0x8002
8000e598:	3c068002 	lui	a2,0x8002
8000e59c:	3c078002 	lui	a3,0x8002
8000e5a0:	24842a98 	addiu	a0,a0,10904
8000e5a4:	24050343 	li	a1,835
8000e5a8:	24c60e28 	addiu	a2,a2,3624
8000e5ac:	0c006b0b 	jal	8001ac2c <__panic>
8000e5b0:	24e72aa0 	addiu	a3,a3,10912
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:830
		if (start == end) {
			goto normal_exit;
		}
		off = start + PGSIZE - la, size = PGSIZE - off;
		if (end < la) {
			size -= la - end;
8000e5b4:	0250a823 	subu	s5,s2,s0
8000e5b8:	08003918 	j	8000e460 <map_ph+0x270>
8000e5bc:	02a2a823 	subu	s5,s5,v0
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
8000e5c0:	3c048002 	lui	a0,0x8002
8000e5c4:	3c068002 	lui	a2,0x8002
8000e5c8:	248429ec 	addiu	a0,a0,10732
8000e5cc:	2405006a 	li	a1,106
8000e5d0:	0c006b0b 	jal	8001ac2c <__panic>
8000e5d4:	24c62a74 	addiu	a2,a2,10868

8000e5d8 <setup_pgdir>:
setup_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:248

// setup_pgdir - alloc one page as PDT
// XXX, PDT size != PGSIZE!!!
#ifndef ARCH_ARM
static int setup_pgdir(struct mm_struct *mm)
{
8000e5d8:	27bdffe0 	addiu	sp,sp,-32
8000e5dc:	afb10018 	sw	s1,24(sp)
8000e5e0:	00808821 	move	s1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:250
	struct Page *page;
	if ((page = alloc_page()) == NULL) {
8000e5e4:	24040001 	li	a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:248

// setup_pgdir - alloc one page as PDT
// XXX, PDT size != PGSIZE!!!
#ifndef ARCH_ARM
static int setup_pgdir(struct mm_struct *mm)
{
8000e5e8:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:250
	struct Page *page;
	if ((page = alloc_page()) == NULL) {
8000e5ec:	0c007425 	jal	8001d094 <alloc_pages>
8000e5f0:	afb00014 	sw	s0,20(sp)
8000e5f4:	1040001b 	beqz	v0,8000e664 <setup_pgdir+0x8c>
8000e5f8:	3c038015 	lui	v1,0x8015
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8000e5fc:	8c7077bc 	lw	s0,30652(v1)
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8000e600:	3c038015 	lui	v1,0x8015
8000e604:	8c637770 	lw	v1,30576(v1)
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8000e608:	00501023 	subu	v0,v0,s0
8000e60c:	00021143 	sra	v0,v0,0x5
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8000e610:	00021300 	sll	v0,v0,0xc
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8000e614:	00022302 	srl	a0,v0,0xc
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
	return page - pages;
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8000e618:	3c108000 	lui	s0,0x8000
8000e61c:	26101000 	addiu	s0,s0,4096
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8000e620:	0083182b 	sltu	v1,a0,v1
8000e624:	10600011 	beqz	v1,8000e66c <setup_pgdir+0x94>
8000e628:	00508021 	addu	s0,v0,s0
setup_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:254
		return -E_NO_MEM;
	}
	pgd_t *pgdir = page2kva(page);
	memcpy(pgdir, init_pgdir_get(), PGSIZE);
8000e62c:	3c028015 	lui	v0,0x8015
8000e630:	8c45776c 	lw	a1,30572(v0)
8000e634:	24061000 	li	a2,4096
8000e638:	0c005c7c 	jal	800171f0 <memcpy>
8000e63c:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:255
	map_pgdir(pgdir);
8000e640:	0c0078ee 	jal	8001e3b8 <map_pgdir>
8000e644:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:256
	mm->pgdir = pgdir;
8000e648:	ae300010 	sw	s0,16(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:257
	return 0;
8000e64c:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:258
}
8000e650:	8fbf001c 	lw	ra,28(sp)
8000e654:	8fb10018 	lw	s1,24(sp)
8000e658:	8fb00014 	lw	s0,20(sp)
8000e65c:	03e00008 	jr	ra
8000e660:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:251
#ifndef ARCH_ARM
static int setup_pgdir(struct mm_struct *mm)
{
	struct Page *page;
	if ((page = alloc_page()) == NULL) {
		return -E_NO_MEM;
8000e664:	08003994 	j	8000e650 <setup_pgdir+0x78>
8000e668:	2402fff4 	li	v0,-12
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
8000e66c:	3c048002 	lui	a0,0x8002
8000e670:	3c068002 	lui	a2,0x8002
8000e674:	248429ec 	addiu	a0,a0,10732
8000e678:	2405006a 	li	a1,106
8000e67c:	24c62a74 	addiu	a2,a2,10868
8000e680:	0c006b0b 	jal	8001ac2c <__panic>
8000e684:	02003821 	move	a3,s0

8000e688 <put_sighand>:
put_sighand():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:498
bad_sighand:
	return ret;
}

static void put_sighand(struct proc_struct *proc)
{
8000e688:	27bdffe0 	addiu	sp,sp,-32
8000e68c:	afb10018 	sw	s1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:499
	struct sighand_struct *sh = proc->signal_info.sighand;
8000e690:	8c9100c4 	lw	s1,196(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:498
bad_sighand:
	return ret;
}

static void put_sighand(struct proc_struct *proc)
{
8000e694:	afb00014 	sw	s0,20(sp)
8000e698:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:500
	struct sighand_struct *sh = proc->signal_info.sighand;
	if (sh != NULL) {
8000e69c:	1220000d 	beqz	s1,8000e6d4 <put_sighand+0x4c>
8000e6a0:	00808021 	move	s0,a0
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8000e6a4:	40026000 	mfc0	v0,c0_status
8000e6a8:	30420001 	andi	v0,v0,0x1
8000e6ac:	1440000f 	bnez	v0,8000e6ec <put_sighand+0x64>
8000e6b0:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8000e6b4:	8e220000 	lw	v0,0(s1)
8000e6b8:	2442ffff 	addiu	v0,v0,-1
8000e6bc:	ae220000 	sw	v0,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
8000e6c0:	8e220000 	lw	v0,0(s1)
put_sighand():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:501
		if (sighand_count_dec(sh) == 0) {
8000e6c4:	14400004 	bnez	v0,8000e6d8 <put_sighand+0x50>
8000e6c8:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:502
			sighand_destroy(sh);
8000e6cc:	0c00458c 	jal	80011630 <sighand_destroy>
8000e6d0:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:506
		}
	}
	proc->signal_info.sighand = NULL;
}
8000e6d4:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:505
	if (sh != NULL) {
		if (sighand_count_dec(sh) == 0) {
			sighand_destroy(sh);
		}
	}
	proc->signal_info.sighand = NULL;
8000e6d8:	ae0000c4 	sw	zero,196(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:506
}
8000e6dc:	8fb10018 	lw	s1,24(sp)
8000e6e0:	8fb00014 	lw	s0,20(sp)
8000e6e4:	03e00008 	jr	ra
8000e6e8:	27bd0020 	addiu	sp,sp,32
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8000e6ec:	0c006d04 	jal	8001b410 <intr_disable>
8000e6f0:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8000e6f4:	8e220000 	lw	v0,0(s1)
8000e6f8:	2442ffff 	addiu	v0,v0,-1
8000e6fc:	ae220000 	sw	v0,0(s1)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000e700:	0c006d00 	jal	8001b400 <intr_enable>
8000e704:	00000000 	nop
8000e708:	080039b0 	j	8000e6c0 <put_sighand+0x38>
8000e70c:	00000000 	nop

8000e710 <put_sem_queue>:
put_sem_queue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:419
bad_sem_queue:
	return ret;
}

static void put_sem_queue(struct proc_struct *proc)
{
8000e710:	27bdffe8 	addiu	sp,sp,-24
8000e714:	afb00010 	sw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:420
	sem_queue_t *sem_queue = proc->sem_queue;
8000e718:	8c9000ac 	lw	s0,172(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:421
	if (sem_queue != NULL) {
8000e71c:	12000012 	beqz	s0,8000e768 <put_sem_queue+0x58>
8000e720:	afbf0014 	sw	ra,20(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8000e724:	40026000 	mfc0	v0,c0_status
8000e728:	30420001 	andi	v0,v0,0x1
8000e72c:	14400012 	bnez	v0,8000e778 <put_sem_queue+0x68>
8000e730:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
8000e734:	8e020014 	lw	v0,20(s0)
8000e738:	2442ffff 	addiu	v0,v0,-1
8000e73c:	ae020014 	sw	v0,20(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
8000e740:	8e020014 	lw	v0,20(s0)
put_sem_queue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:422
		if (sem_queue_count_dec(sem_queue) == 0) {
8000e744:	14400009 	bnez	v0,8000e76c <put_sem_queue+0x5c>
8000e748:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:423
			exit_sem_queue(sem_queue);
8000e74c:	0c006808 	jal	8001a020 <exit_sem_queue>
8000e750:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:424
			sem_queue_destroy(sem_queue);
8000e754:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:427
		}
	}
}
8000e758:	8fbf0014 	lw	ra,20(sp)
8000e75c:	8fb00010 	lw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:424
{
	sem_queue_t *sem_queue = proc->sem_queue;
	if (sem_queue != NULL) {
		if (sem_queue_count_dec(sem_queue) == 0) {
			exit_sem_queue(sem_queue);
			sem_queue_destroy(sem_queue);
8000e760:	08006759 	j	80019d64 <sem_queue_destroy>
8000e764:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:427
		}
	}
}
8000e768:	8fbf0014 	lw	ra,20(sp)
8000e76c:	8fb00010 	lw	s0,16(sp)
8000e770:	03e00008 	jr	ra
8000e774:	27bd0018 	addiu	sp,sp,24
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8000e778:	0c006d04 	jal	8001b410 <intr_disable>
8000e77c:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8000e780:	8e020014 	lw	v0,20(s0)
8000e784:	2442ffff 	addiu	v0,v0,-1
8000e788:	ae020014 	sw	v0,20(s0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000e78c:	0c006d00 	jal	8001b400 <intr_enable>
8000e790:	00000000 	nop
8000e794:	080039d0 	j	8000e740 <put_sem_queue+0x30>
8000e798:	00000000 	nop

8000e79c <put_signal>:
put_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:460
}

// copy_thread - setup the trapframe on the  process's kernel stack top and
//             - setup the kernel entry point and stack of process
static void put_signal(struct proc_struct *proc)
{
8000e79c:	27bdffe0 	addiu	sp,sp,-32
8000e7a0:	afb10018 	sw	s1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:461
	struct signal_struct *sig = proc->signal_info.signal;
8000e7a4:	8c9100c0 	lw	s1,192(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:460
}

// copy_thread - setup the trapframe on the  process's kernel stack top and
//             - setup the kernel entry point and stack of process
static void put_signal(struct proc_struct *proc)
{
8000e7a8:	afb00014 	sw	s0,20(sp)
8000e7ac:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:462
	struct signal_struct *sig = proc->signal_info.signal;
	if (sig != NULL) {
8000e7b0:	1220000d 	beqz	s1,8000e7e8 <put_signal+0x4c>
8000e7b4:	00808021 	move	s0,a0
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8000e7b8:	40026000 	mfc0	v0,c0_status
8000e7bc:	30420001 	andi	v0,v0,0x1
8000e7c0:	1440000f 	bnez	v0,8000e800 <put_signal+0x64>
8000e7c4:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
8000e7c8:	8e220000 	lw	v0,0(s1)
8000e7cc:	2442ffff 	addiu	v0,v0,-1
8000e7d0:	ae220000 	sw	v0,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
8000e7d4:	8e220000 	lw	v0,0(s1)
put_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:463
		if (signal_count_dec(sig) == 0) {
8000e7d8:	14400004 	bnez	v0,8000e7ec <put_signal+0x50>
8000e7dc:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:464
			signal_destroy(sig);
8000e7e0:	0c00455e 	jal	80011578 <signal_destroy>
8000e7e4:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:468
		}
	}
	proc->signal_info.signal = NULL;
}
8000e7e8:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:467
	if (sig != NULL) {
		if (signal_count_dec(sig) == 0) {
			signal_destroy(sig);
		}
	}
	proc->signal_info.signal = NULL;
8000e7ec:	ae0000c0 	sw	zero,192(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:468
}
8000e7f0:	8fb10018 	lw	s1,24(sp)
8000e7f4:	8fb00014 	lw	s0,20(sp)
8000e7f8:	03e00008 	jr	ra
8000e7fc:	27bd0020 	addiu	sp,sp,32
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8000e800:	0c006d04 	jal	8001b410 <intr_disable>
8000e804:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8000e808:	8e220000 	lw	v0,0(s1)
8000e80c:	2442ffff 	addiu	v0,v0,-1
8000e810:	ae220000 	sw	v0,0(s1)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000e814:	0c006d00 	jal	8001b400 <intr_enable>
8000e818:	00000000 	nop
8000e81c:	080039f5 	j	8000e7d4 <put_signal+0x38>
8000e820:	00000000 	nop

8000e824 <put_fs>:
put_fs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:539
bad_fs_struct:
	return ret;
}

static void put_fs(struct proc_struct *proc)
{
8000e824:	27bdffe8 	addiu	sp,sp,-24
8000e828:	afb00010 	sw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:540
	struct fs_struct *fs_struct = proc->fs_struct;
8000e82c:	8c9000bc 	lw	s0,188(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:541
	if (fs_struct != NULL) {
8000e830:	1200000f 	beqz	s0,8000e870 <put_fs+0x4c>
8000e834:	afbf0014 	sw	ra,20(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8000e838:	40026000 	mfc0	v0,c0_status
8000e83c:	30420001 	andi	v0,v0,0x1
8000e840:	1440000f 	bnez	v0,8000e880 <put_fs+0x5c>
8000e844:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
8000e848:	8e020008 	lw	v0,8(s0)
8000e84c:	2442ffff 	addiu	v0,v0,-1
8000e850:	ae020008 	sw	v0,8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
8000e854:	8e020008 	lw	v0,8(s0)
put_fs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:542
		if (fs_count_dec(fs_struct) == 0) {
8000e858:	14400006 	bnez	v0,8000e874 <put_fs+0x50>
8000e85c:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:543
			fs_destroy(fs_struct);
8000e860:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:546
		}
	}
}
8000e864:	8fb00010 	lw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:543
static void put_fs(struct proc_struct *proc)
{
	struct fs_struct *fs_struct = proc->fs_struct;
	if (fs_struct != NULL) {
		if (fs_count_dec(fs_struct) == 0) {
			fs_destroy(fs_struct);
8000e868:	08003298 	j	8000ca60 <fs_destroy>
8000e86c:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:546
		}
	}
}
8000e870:	8fbf0014 	lw	ra,20(sp)
8000e874:	8fb00010 	lw	s0,16(sp)
8000e878:	03e00008 	jr	ra
8000e87c:	27bd0018 	addiu	sp,sp,24
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8000e880:	0c006d04 	jal	8001b410 <intr_disable>
8000e884:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8000e888:	8e020008 	lw	v0,8(s0)
8000e88c:	2442ffff 	addiu	v0,v0,-1
8000e890:	ae020008 	sw	v0,8(s0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000e894:	0c006d00 	jal	8001b400 <intr_enable>
8000e898:	00000000 	nop
8000e89c:	08003a15 	j	8000e854 <put_fs+0x30>
8000e8a0:	00000000 	nop

8000e8a4 <__do_exit>:
__do_exit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:650
// __do_exit - cause a thread exit (use do_exit, do_exit_thread instead)
//   1. call exit_mmap & put_pgdir & mm_destroy to free the almost all memory space of process
//   2. set process' state as PROC_ZOMBIE, then call wakeup_proc(parent) to ask parent reclaim itself.
//   3. call scheduler to switch to other process
static int __do_exit(void)
{
8000e8a4:	27bdffc0 	addiu	sp,sp,-64
8000e8a8:	afb00024 	sw	s0,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:651
	if (current == idleproc) {
8000e8ac:	3c038015 	lui	v1,0x8015
8000e8b0:	3c108015 	lui	s0,0x8015
8000e8b4:	8e0277a4 	lw	v0,30628(s0)
8000e8b8:	8c6377a8 	lw	v1,30632(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:650
// __do_exit - cause a thread exit (use do_exit, do_exit_thread instead)
//   1. call exit_mmap & put_pgdir & mm_destroy to free the almost all memory space of process
//   2. set process' state as PROC_ZOMBIE, then call wakeup_proc(parent) to ask parent reclaim itself.
//   3. call scheduler to switch to other process
static int __do_exit(void)
{
8000e8bc:	afbf003c 	sw	ra,60(sp)
8000e8c0:	afb50038 	sw	s5,56(sp)
8000e8c4:	afb40034 	sw	s4,52(sp)
8000e8c8:	afb30030 	sw	s3,48(sp)
8000e8cc:	afb2002c 	sw	s2,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:651
	if (current == idleproc) {
8000e8d0:	1043008b 	beq	v0,v1,8000eb00 <__do_exit+0x25c>
8000e8d4:	afb10028 	sw	s1,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:654
		panic("idleproc exit.\n");
	}
	if (current == initproc) {
8000e8d8:	3c128015 	lui	s2,0x8015
8000e8dc:	8e437798 	lw	v1,30616(s2)
8000e8e0:	1043008d 	beq	v0,v1,8000eb18 <__do_exit+0x274>
8000e8e4:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:658
		panic("initproc exit.\n");
	}

	struct mm_struct *mm = current->mm;
8000e8e8:	8c510020 	lw	s1,32(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:659
	if (mm != NULL) {
8000e8ec:	1220000f 	beqz	s1,8000e92c <__do_exit+0x88>
8000e8f0:	2402ffff 	li	v0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:661
		mm->lapic = -1;
		mp_set_mm_pagetable(NULL);
8000e8f4:	00002021 	move	a0,zero
8000e8f8:	0c007c61 	jal	8001f184 <mp_set_mm_pagetable>
8000e8fc:	ae220048 	sw	v0,72(s1)
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:154
 * Requires Modern 486+ processor
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
8000e900:	0c00378f 	jal	8000de3c <__intr_save>
8000e904:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
	v->counter += i;
8000e908:	8e23001c 	lw	v1,28(s1)
8000e90c:	2463ffff 	addiu	v1,v1,-1
8000e910:	ae23001c 	sw	v1,28(s1)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
8000e914:	14400065 	bnez	v0,8000eaac <__do_exit+0x208>
8000e918:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
8000e91c:	8e22001c 	lw	v0,28(s1)
__do_exit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:662
		if (mm_count_dec(mm) == 0) {
8000e920:	10400066 	beqz	v0,8000eabc <__do_exit+0x218>
8000e924:	8e0277a4 	lw	v0,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:673
				list_del(&(mm->proc_mm_link));
			}
			local_intr_restore(intr_flag);
			mm_destroy(mm);
		}
		current->mm = NULL;
8000e928:	ac400020 	sw	zero,32(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:675
	}
	put_sighand(current);
8000e92c:	8e0477a4 	lw	a0,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:687
	struct proc_struct *proc, *parent;
	local_intr_save(intr_flag);
	{
		proc = parent = current->parent;
		do {
			if (proc->wait_state == WT_CHILD) {
8000e930:	3c158000 	lui	s5,0x8000
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:675
			local_intr_restore(intr_flag);
			mm_destroy(mm);
		}
		current->mm = NULL;
	}
	put_sighand(current);
8000e934:	0c0039a2 	jal	8000e688 <put_sighand>
8000e938:	26b50001 	addiu	s5,s5,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:676
	put_signal(current);
8000e93c:	0c0039e7 	jal	8000e79c <put_signal>
8000e940:	8e0477a4 	lw	a0,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:677
	put_fs(current);
8000e944:	0c003a09 	jal	8000e824 <put_fs>
8000e948:	8e0477a4 	lw	a0,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:678
	put_sem_queue(current);
8000e94c:	0c0039c4 	jal	8000e710 <put_sem_queue>
8000e950:	8e0477a4 	lw	a0,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:679
	current->state = PROC_ZOMBIE;
8000e954:	8e0277a4 	lw	v0,30628(s0)
8000e958:	24030003 	li	v1,3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:683

	bool intr_flag;
	struct proc_struct *proc, *parent;
	local_intr_save(intr_flag);
8000e95c:	0c00378f 	jal	8000de3c <__intr_save>
8000e960:	ac430000 	sw	v1,0(v0)
8000e964:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:685
	{
		proc = parent = current->parent;
8000e968:	8e0277a4 	lw	v0,30628(s0)
8000e96c:	8c54001c 	lw	s4,28(v0)
8000e970:	02809821 	move	s3,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:687
		do {
			if (proc->wait_state == WT_CHILD) {
8000e974:	8e620084 	lw	v0,132(s3)
8000e978:	10550044 	beq	v0,s5,8000ea8c <__do_exit+0x1e8>
8000e97c:	00000000 	nop
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
8000e980:	8e730098 	lw	s3,152(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:690
				wakeup_proc(proc);
			}
			proc = next_thread(proc);
8000e984:	2673ff6c 	addiu	s3,s3,-148
__do_exit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:691
		} while (proc != parent);
8000e988:	5674fffb 	bnel	s3,s4,8000e978 <__do_exit+0xd4>
8000e98c:	8e620084 	lw	v0,132(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:693

		if ((parent = next_thread(current)) == current) {
8000e990:	8e0477a4 	lw	a0,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:694
			parent = initproc;
8000e994:	8e437798 	lw	v1,30616(s2)
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
8000e998:	8c820098 	lw	v0,152(a0)
de_thread():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:296
#endif

// de_thread - delete this thread "proc" from thread_group list
static void de_thread(struct proc_struct *proc)
{
	if (!list_empty(&(proc->thread_group))) {
8000e99c:	24930094 	addiu	s3,a0,148
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:693
				wakeup_proc(proc);
			}
			proc = next_thread(proc);
		} while (proc != parent);

		if ((parent = next_thread(current)) == current) {
8000e9a0:	2452ff6c 	addiu	s2,v0,-148
__do_exit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:694
			parent = initproc;
8000e9a4:	00922826 	xor	a1,a0,s2
de_thread():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:296
#endif

// de_thread - delete this thread "proc" from thread_group list
static void de_thread(struct proc_struct *proc)
{
	if (!list_empty(&(proc->thread_group))) {
8000e9a8:	1053000b 	beq	v0,s3,8000e9d8 <__do_exit+0x134>
8000e9ac:	0065900a 	movz	s2,v1,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:298
		bool intr_flag;
		local_intr_save(intr_flag);
8000e9b0:	0c00378f 	jal	8000de3c <__intr_save>
8000e9b4:	afa40018 	sw	a0,24(sp)
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
8000e9b8:	8fa40018 	lw	a0,24(sp)
8000e9bc:	8c850094 	lw	a1,148(a0)
8000e9c0:	8c830098 	lw	v1,152(a0)
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
8000e9c4:	aca30004 	sw	v1,4(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:170
	next->prev = prev;
8000e9c8:	ac650000 	sw	a1,0(v1)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
 * list_init - initialize a new entry
 * @elm:        new entry to be initialized
 * */
static inline void list_init(list_entry_t * elm)
{
	elm->prev = elm->next = elm;
8000e9cc:	ac930098 	sw	s3,152(a0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
8000e9d0:	14400032 	bnez	v0,8000ea9c <__do_exit+0x1f8>
8000e9d4:	ac930094 	sw	s3,148(a0)
de_thread():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:305
			list_del_init(&(proc->thread_group));
		}
		local_intr_restore(intr_flag);
	}

	de_thread_arch_hook(proc);
8000e9d8:	0c007a37 	jal	8001e8dc <de_thread_arch_hook>
8000e9dc:	3c148000 	lui	s4,0x8000
8000e9e0:	8e0477a4 	lw	a0,30628(s0)
__do_exit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:707
			if ((proc->optr = parent->cptr) != NULL) {
				parent->cptr->yptr = proc;
			}
			proc->parent = parent;
			parent->cptr = proc;
			if (proc->state == PROC_ZOMBIE) {
8000e9e4:	24130003 	li	s3,3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:708
				if (parent->wait_state == WT_CHILD) {
8000e9e8:	26940001 	addiu	s4,s4,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:697

		if ((parent = next_thread(current)) == current) {
			parent = initproc;
		}
		de_thread(current);
		while (current->cptr != NULL) {
8000e9ec:	8c820088 	lw	v0,136(a0)
8000e9f0:	50400013 	beqzl	v0,8000ea40 <__do_exit+0x19c>
8000e9f4:	248400b4 	addiu	a0,a0,180
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:699
			proc = current->cptr;
			current->cptr = proc->optr;
8000e9f8:	8c430090 	lw	v1,144(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:701

			proc->yptr = NULL;
8000e9fc:	ac40008c 	sw	zero,140(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:699
			parent = initproc;
		}
		de_thread(current);
		while (current->cptr != NULL) {
			proc = current->cptr;
			current->cptr = proc->optr;
8000ea00:	ac830088 	sw	v1,136(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:702

			proc->yptr = NULL;
			if ((proc->optr = parent->cptr) != NULL) {
8000ea04:	8e430088 	lw	v1,136(s2)
8000ea08:	10600002 	beqz	v1,8000ea14 <__do_exit+0x170>
8000ea0c:	ac430090 	sw	v1,144(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:703
				parent->cptr->yptr = proc;
8000ea10:	ac62008c 	sw	v0,140(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:707
			}
			proc->parent = parent;
			parent->cptr = proc;
			if (proc->state == PROC_ZOMBIE) {
8000ea14:	8c430000 	lw	v1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:705

			proc->yptr = NULL;
			if ((proc->optr = parent->cptr) != NULL) {
				parent->cptr->yptr = proc;
			}
			proc->parent = parent;
8000ea18:	ac52001c 	sw	s2,28(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:707
			parent->cptr = proc;
			if (proc->state == PROC_ZOMBIE) {
8000ea1c:	1473fff3 	bne	v1,s3,8000e9ec <__do_exit+0x148>
8000ea20:	ae420088 	sw	v0,136(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:708
				if (parent->wait_state == WT_CHILD) {
8000ea24:	8e420084 	lw	v0,132(s2)
8000ea28:	5454fff1 	bnel	v0,s4,8000e9f0 <__do_exit+0x14c>
8000ea2c:	8c820088 	lw	v0,136(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:709
					wakeup_proc(parent);
8000ea30:	0c0004f8 	jal	800013e0 <wakeup_proc>
8000ea34:	02402021 	move	a0,s2
8000ea38:	08003a7b 	j	8000e9ec <__do_exit+0x148>
8000ea3c:	8e0477a4 	lw	a0,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:715
				}
			}
		}
	}

	wakeup_queue(&(current->event_box.wait_queue), WT_INTERRUPTED, 1);
8000ea40:	3c058000 	lui	a1,0x8000
8000ea44:	0c0069d4 	jal	8001a750 <wakeup_queue>
8000ea48:	24060001 	li	a2,1
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
8000ea4c:	12200003 	beqz	s1,8000ea5c <__do_exit+0x1b8>
8000ea50:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
8000ea54:	0c006d00 	jal	8001b400 <intr_enable>
8000ea58:	00000000 	nop
__do_exit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:719

	local_intr_restore(intr_flag);

	schedule();
8000ea5c:	0c00059f 	jal	8000167c <schedule>
8000ea60:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:720
	panic("__do_exit will not return!! %d %d.\n", current->pid,
8000ea64:	8e0277a4 	lw	v0,30628(s0)
8000ea68:	3c048002 	lui	a0,0x8002
8000ea6c:	3c068002 	lui	a2,0x8002
8000ea70:	8c470004 	lw	a3,4(v0)
8000ea74:	8c420080 	lw	v0,128(v0)
8000ea78:	24842a98 	addiu	a0,a0,10904
8000ea7c:	240502d1 	li	a1,721
8000ea80:	24c62afc 	addiu	a2,a2,11004
8000ea84:	0c006b0b 	jal	8001ac2c <__panic>
8000ea88:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:688
	local_intr_save(intr_flag);
	{
		proc = parent = current->parent;
		do {
			if (proc->wait_state == WT_CHILD) {
				wakeup_proc(proc);
8000ea8c:	0c0004f8 	jal	800013e0 <wakeup_proc>
8000ea90:	02602021 	move	a0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
8000ea94:	08003a61 	j	8000e984 <__do_exit+0xe0>
8000ea98:	8e730098 	lw	s3,152(s3)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
8000ea9c:	0c006d00 	jal	8001b400 <intr_enable>
8000eaa0:	00000000 	nop
8000eaa4:	08003a76 	j	8000e9d8 <__do_exit+0x134>
8000eaa8:	8fa40018 	lw	a0,24(sp)
8000eaac:	0c006d00 	jal	8001b400 <intr_enable>
8000eab0:	00000000 	nop
8000eab4:	08003a47 	j	8000e91c <__do_exit+0x78>
8000eab8:	00000000 	nop
__do_exit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:663
	struct mm_struct *mm = current->mm;
	if (mm != NULL) {
		mm->lapic = -1;
		mp_set_mm_pagetable(NULL);
		if (mm_count_dec(mm) == 0) {
			exit_mmap(mm);
8000eabc:	0c004ff0 	jal	80013fc0 <exit_mmap>
8000eac0:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:664
			put_pgdir(mm);
8000eac4:	0c0037d6 	jal	8000df58 <put_pgdir>
8000eac8:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:666
			bool intr_flag;
			local_intr_save(intr_flag);
8000eacc:	0c00378f 	jal	8000de3c <__intr_save>
8000ead0:	00000000 	nop
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
8000ead4:	8e24002c 	lw	a0,44(s1)
8000ead8:	8e230030 	lw	v1,48(s1)
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
8000eadc:	ac830004 	sw	v1,4(a0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
8000eae0:	10400003 	beqz	v0,8000eaf0 <__do_exit+0x24c>
8000eae4:	ac640000 	sw	a0,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
8000eae8:	0c006d00 	jal	8001b400 <intr_enable>
8000eaec:	00000000 	nop
__do_exit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:671
			{
				list_del(&(mm->proc_mm_link));
			}
			local_intr_restore(intr_flag);
			mm_destroy(mm);
8000eaf0:	0c004d61 	jal	80013584 <mm_destroy>
8000eaf4:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:673
		}
		current->mm = NULL;
8000eaf8:	08003a4a 	j	8000e928 <__do_exit+0x84>
8000eafc:	8e0277a4 	lw	v0,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:652
//   2. set process' state as PROC_ZOMBIE, then call wakeup_proc(parent) to ask parent reclaim itself.
//   3. call scheduler to switch to other process
static int __do_exit(void)
{
	if (current == idleproc) {
		panic("idleproc exit.\n");
8000eb00:	3c048002 	lui	a0,0x8002
8000eb04:	3c068002 	lui	a2,0x8002
8000eb08:	24842a98 	addiu	a0,a0,10904
8000eb0c:	2405028c 	li	a1,652
8000eb10:	0c006b0b 	jal	8001ac2c <__panic>
8000eb14:	24c62adc 	addiu	a2,a2,10972
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:655
	}
	if (current == initproc) {
		panic("initproc exit.\n");
8000eb18:	3c068002 	lui	a2,0x8002
8000eb1c:	24842a98 	addiu	a0,a0,10904
8000eb20:	2405028f 	li	a1,655
8000eb24:	0c006b0b 	jal	8001ac2c <__panic>
8000eb28:	24c62aec 	addiu	a2,a2,10988

8000eb2c <put_kstack>:
put_kstack():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:241
}

// put_kstack - free the memory space of process kernel stack
static void put_kstack(struct proc_struct *proc)
{
	free_pages(kva2page((void *)(proc->kstack)), KSTACKPAGE);
8000eb2c:	8c870014 	lw	a3,20(a0)
kva2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:111
}

static inline struct Page *kva2page(void *kva)
{
	return pa2page(PADDR(kva));
8000eb30:	3c028000 	lui	v0,0x8000
8000eb34:	24421000 	addiu	v0,v0,4096
put_kstack():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:240
	return -E_NO_MEM;
}

// put_kstack - free the memory space of process kernel stack
static void put_kstack(struct proc_struct *proc)
{
8000eb38:	27bdffe8 	addiu	sp,sp,-24
kva2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:111
8000eb3c:	00e2102b 	sltu	v0,a3,v0
8000eb40:	14400011 	bnez	v0,8000eb88 <put_kstack+0x5c>
8000eb44:	afbf0014 	sw	ra,20(sp)
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
8000eb48:	3c028015 	lui	v0,0x8015
8000eb4c:	3c037fff 	lui	v1,0x7fff
8000eb50:	8c427770 	lw	v0,30576(v0)
8000eb54:	3463f000 	ori	v1,v1,0xf000
8000eb58:	00e33821 	addu	a3,a3,v1
8000eb5c:	00073b02 	srl	a3,a3,0xc
8000eb60:	00e2102b 	sltu	v0,a3,v0
8000eb64:	1040000e 	beqz	v0,8000eba0 <put_kstack+0x74>
8000eb68:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
		panic("pa2page called with invalid pa");
	}
	return &pages[PPN(pa)];
8000eb6c:	8c4477bc 	lw	a0,30652(v0)
put_kstack():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:242
	free_pages(kva2page((void *)(proc->kstack)), KSTACKPAGE);
}
8000eb70:	8fbf0014 	lw	ra,20(sp)
kva2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
8000eb74:	00073940 	sll	a3,a3,0x5
put_kstack():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:241
}

// put_kstack - free the memory space of process kernel stack
static void put_kstack(struct proc_struct *proc)
{
	free_pages(kva2page((void *)(proc->kstack)), KSTACKPAGE);
8000eb78:	24050002 	li	a1,2
8000eb7c:	00872021 	addu	a0,a0,a3
8000eb80:	08007441 	j	8001d104 <free_pages>
8000eb84:	27bd0018 	addiu	sp,sp,24
kva2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:111
	return KADDR(page2pa(page));
}

static inline struct Page *kva2page(void *kva)
{
	return pa2page(PADDR(kva));
8000eb88:	3c048002 	lui	a0,0x8002
8000eb8c:	3c068002 	lui	a2,0x8002
8000eb90:	248429ec 	addiu	a0,a0,10732
8000eb94:	2405006f 	li	a1,111
8000eb98:	0c006b0b 	jal	8001ac2c <__panic>
8000eb9c:	24c62a30 	addiu	a2,a2,10800
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:99
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
		panic("pa2page called with invalid pa");
8000eba0:	3c048002 	lui	a0,0x8002
8000eba4:	3c068002 	lui	a2,0x8002
8000eba8:	248429ec 	addiu	a0,a0,10732
8000ebac:	24050063 	li	a1,99
8000ebb0:	0c006b0b 	jal	8001ac2c <__panic>
8000ebb4:	24c62a54 	addiu	a2,a2,10836

8000ebb8 <set_proc_name>:
set_proc_name():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:101
static int __do_exit(void);
static int __do_kill(struct proc_struct *proc, int error_code);

// set_proc_name - set the name of proc
char *set_proc_name(struct proc_struct *proc, const char *name)
{
8000ebb8:	27bdffe0 	addiu	sp,sp,-32
8000ebbc:	afb00014 	sw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:102
	memset(proc->name, 0, sizeof(proc->name));
8000ebc0:	24900060 	addiu	s0,a0,96
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:101
static int __do_exit(void);
static int __do_kill(struct proc_struct *proc, int error_code);

// set_proc_name - set the name of proc
char *set_proc_name(struct proc_struct *proc, const char *name)
{
8000ebc4:	afb10018 	sw	s1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:102
	memset(proc->name, 0, sizeof(proc->name));
8000ebc8:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:101
static int __do_exit(void);
static int __do_kill(struct proc_struct *proc, int error_code);

// set_proc_name - set the name of proc
char *set_proc_name(struct proc_struct *proc, const char *name)
{
8000ebcc:	00a08821 	move	s1,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:102
	memset(proc->name, 0, sizeof(proc->name));
8000ebd0:	24060010 	li	a2,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:101
static int __do_exit(void);
static int __do_kill(struct proc_struct *proc, int error_code);

// set_proc_name - set the name of proc
char *set_proc_name(struct proc_struct *proc, const char *name)
{
8000ebd4:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:102
	memset(proc->name, 0, sizeof(proc->name));
8000ebd8:	0c005c52 	jal	80017148 <memset>
8000ebdc:	00002821 	move	a1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:103
	return memcpy(proc->name, name, PROC_NAME_LEN);
8000ebe0:	02002021 	move	a0,s0
8000ebe4:	02202821 	move	a1,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:104
}
8000ebe8:	8fbf001c 	lw	ra,28(sp)
8000ebec:	8fb10018 	lw	s1,24(sp)
8000ebf0:	8fb00014 	lw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:103

// set_proc_name - set the name of proc
char *set_proc_name(struct proc_struct *proc, const char *name)
{
	memset(proc->name, 0, sizeof(proc->name));
	return memcpy(proc->name, name, PROC_NAME_LEN);
8000ebf4:	2406000f 	li	a2,15
8000ebf8:	08005c7c 	j	800171f0 <memcpy>
8000ebfc:	27bd0020 	addiu	sp,sp,32

8000ec00 <get_proc_name>:
get_proc_name():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:108
}

// get_proc_name - get the name of proc
char *get_proc_name(struct proc_struct *proc)
{
8000ec00:	27bdffe0 	addiu	sp,sp,-32
8000ec04:	afb00014 	sw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:110
	static char name[PROC_NAME_LEN + 1];
	memset(name, 0, sizeof(name));
8000ec08:	3c108015 	lui	s0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:108
	return memcpy(proc->name, name, PROC_NAME_LEN);
}

// get_proc_name - get the name of proc
char *get_proc_name(struct proc_struct *proc)
{
8000ec0c:	afb10018 	sw	s1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:110
	static char name[PROC_NAME_LEN + 1];
	memset(name, 0, sizeof(name));
8000ec10:	00002821 	move	a1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:108
	return memcpy(proc->name, name, PROC_NAME_LEN);
}

// get_proc_name - get the name of proc
char *get_proc_name(struct proc_struct *proc)
{
8000ec14:	00808821 	move	s1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:110
	static char name[PROC_NAME_LEN + 1];
	memset(name, 0, sizeof(name));
8000ec18:	24060010 	li	a2,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:108
	return memcpy(proc->name, name, PROC_NAME_LEN);
}

// get_proc_name - get the name of proc
char *get_proc_name(struct proc_struct *proc)
{
8000ec1c:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:110
	static char name[PROC_NAME_LEN + 1];
	memset(name, 0, sizeof(name));
8000ec20:	0c005c52 	jal	80017148 <memset>
8000ec24:	26044538 	addiu	a0,s0,17720
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:111
	return memcpy(name, proc->name, PROC_NAME_LEN);
8000ec28:	26044538 	addiu	a0,s0,17720
8000ec2c:	26250060 	addiu	a1,s1,96
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:112
}
8000ec30:	8fbf001c 	lw	ra,28(sp)
8000ec34:	8fb10018 	lw	s1,24(sp)
8000ec38:	8fb00014 	lw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:111
// get_proc_name - get the name of proc
char *get_proc_name(struct proc_struct *proc)
{
	static char name[PROC_NAME_LEN + 1];
	memset(name, 0, sizeof(name));
	return memcpy(name, proc->name, PROC_NAME_LEN);
8000ec3c:	2406000f 	li	a2,15
8000ec40:	08005c7c 	j	800171f0 <memcpy>
8000ec44:	27bd0020 	addiu	sp,sp,32

8000ec48 <proc_run>:
proc_run():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:179
}

// proc_run - make process "proc" running on cpu
// NOTE: before call switch_to, should load  base addr of "proc"'s new PDT
void proc_run(struct proc_struct *proc)
{
8000ec48:	27bdffe0 	addiu	sp,sp,-32
8000ec4c:	afb20018 	sw	s2,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:180
	if (proc != current) {
8000ec50:	3c128015 	lui	s2,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:179
}

// proc_run - make process "proc" running on cpu
// NOTE: before call switch_to, should load  base addr of "proc"'s new PDT
void proc_run(struct proc_struct *proc)
{
8000ec54:	afb10014 	sw	s1,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:180
	if (proc != current) {
8000ec58:	8e5177a4 	lw	s1,30628(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:179
}

// proc_run - make process "proc" running on cpu
// NOTE: before call switch_to, should load  base addr of "proc"'s new PDT
void proc_run(struct proc_struct *proc)
{
8000ec5c:	afb00010 	sw	s0,16(sp)
8000ec60:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:180
	if (proc != current) {
8000ec64:	10910013 	beq	a0,s1,8000ecb4 <proc_run+0x6c>
8000ec68:	00808021 	move	s0,a0
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8000ec6c:	40026000 	mfc0	v0,c0_status
8000ec70:	30420001 	andi	v0,v0,0x1
8000ec74:	14400015 	bnez	v0,8000eccc <proc_run+0x84>
8000ec78:	00000000 	nop
proc_run():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:187
		struct proc_struct *prev = current, *next = proc;
		// kprintf("(%d) => %d\n", lapic_id, next->pid);
		local_intr_save(intr_flag);
		{
			pls_write(current, proc);
			load_rsp0(next->kstack + KSTACKSIZE);
8000ec7c:	8c840014 	lw	a0,20(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:186
		bool intr_flag;
		struct proc_struct *prev = current, *next = proc;
		// kprintf("(%d) => %d\n", lapic_id, next->pid);
		local_intr_save(intr_flag);
		{
			pls_write(current, proc);
8000ec80:	ae5077a4 	sw	s0,30628(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:187
			load_rsp0(next->kstack + KSTACKSIZE);
8000ec84:	0c0078ec 	jal	8001e3b0 <load_rsp0>
8000ec88:	24842000 	addiu	a0,a0,8192
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:188
			mp_set_mm_pagetable(next->mm);
8000ec8c:	0c007c61 	jal	8001f184 <mp_set_mm_pagetable>
8000ec90:	8e040020 	lw	a0,32(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:194

#ifdef UCONFIG_BIONIC_LIBC
			// for tls switch
			tls_switch(next);
#endif //UCONFIG_BIONIC_LIBC
			switch_to(&(prev->context), &(next->context));
8000ec94:	26240024 	addiu	a0,s1,36
8000ec98:	26050024 	addiu	a1,s0,36
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:198
		}
		local_intr_restore(intr_flag);
	}
}
8000ec9c:	8fbf001c 	lw	ra,28(sp)
8000eca0:	8fb20018 	lw	s2,24(sp)
8000eca4:	8fb10014 	lw	s1,20(sp)
8000eca8:	8fb00010 	lw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:194

#ifdef UCONFIG_BIONIC_LIBC
			// for tls switch
			tls_switch(next);
#endif //UCONFIG_BIONIC_LIBC
			switch_to(&(prev->context), &(next->context));
8000ecac:	08007f2c 	j	8001fcb0 <switch_to>
8000ecb0:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:198
		}
		local_intr_restore(intr_flag);
	}
}
8000ecb4:	8fbf001c 	lw	ra,28(sp)
8000ecb8:	8fb20018 	lw	s2,24(sp)
8000ecbc:	8fb10014 	lw	s1,20(sp)
8000ecc0:	8fb00010 	lw	s0,16(sp)
8000ecc4:	03e00008 	jr	ra
8000ecc8:	27bd0020 	addiu	sp,sp,32
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8000eccc:	0c006d04 	jal	8001b410 <intr_disable>
8000ecd0:	00000000 	nop
proc_run():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:187
		struct proc_struct *prev = current, *next = proc;
		// kprintf("(%d) => %d\n", lapic_id, next->pid);
		local_intr_save(intr_flag);
		{
			pls_write(current, proc);
			load_rsp0(next->kstack + KSTACKSIZE);
8000ecd4:	8e040014 	lw	a0,20(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:186
		bool intr_flag;
		struct proc_struct *prev = current, *next = proc;
		// kprintf("(%d) => %d\n", lapic_id, next->pid);
		local_intr_save(intr_flag);
		{
			pls_write(current, proc);
8000ecd8:	ae5077a4 	sw	s0,30628(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:187
			load_rsp0(next->kstack + KSTACKSIZE);
8000ecdc:	0c0078ec 	jal	8001e3b0 <load_rsp0>
8000ece0:	24842000 	addiu	a0,a0,8192
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:188
			mp_set_mm_pagetable(next->mm);
8000ece4:	0c007c61 	jal	8001f184 <mp_set_mm_pagetable>
8000ece8:	8e040020 	lw	a0,32(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:194

#ifdef UCONFIG_BIONIC_LIBC
			// for tls switch
			tls_switch(next);
#endif //UCONFIG_BIONIC_LIBC
			switch_to(&(prev->context), &(next->context));
8000ecec:	26240024 	addiu	a0,s1,36
8000ecf0:	0c007f2c 	jal	8001fcb0 <switch_to>
8000ecf4:	26050024 	addiu	a1,s0,36
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:198
		}
		local_intr_restore(intr_flag);
	}
}
8000ecf8:	8fbf001c 	lw	ra,28(sp)
8000ecfc:	8fb20018 	lw	s2,24(sp)
8000ed00:	8fb10014 	lw	s1,20(sp)
8000ed04:	8fb00010 	lw	s0,16(sp)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000ed08:	08006d00 	j	8001b400 <intr_enable>
8000ed0c:	27bd0020 	addiu	sp,sp,32

8000ed10 <find_proc>:
find_proc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:215
}

// find_proc - find proc frome proc hash_list according to pid
struct proc_struct *find_proc(int pid)
{
	if (0 < pid && pid < MAX_PID) {
8000ed10:	2483ffff 	addiu	v1,a0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:214
	list_del(&(proc->hash_link));
}

// find_proc - find proc frome proc hash_list according to pid
struct proc_struct *find_proc(int pid)
{
8000ed14:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:215
	if (0 < pid && pid < MAX_PID) {
8000ed18:	2c631fff 	sltiu	v1,v1,8191
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:214
	list_del(&(proc->hash_link));
}

// find_proc - find proc frome proc hash_list according to pid
struct proc_struct *find_proc(int pid)
{
8000ed1c:	afb00010 	sw	s0,16(sp)
8000ed20:	afbf0014 	sw	ra,20(sp)
8000ed24:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:215
	if (0 < pid && pid < MAX_PID) {
8000ed28:	1060000e 	beqz	v1,8000ed64 <find_proc+0x54>
8000ed2c:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:216
		list_entry_t *list = hash_list + pid_hashfn(pid), *le = list;
8000ed30:	0c005953 	jal	8001654c <hash32>
8000ed34:	2405000a 	li	a1,10
8000ed38:	3c058015 	lui	a1,0x8015
8000ed3c:	000210c0 	sll	v0,v0,0x3
8000ed40:	24a54548 	addiu	a1,a1,17736
8000ed44:	00a22821 	addu	a1,a1,v0
8000ed48:	00a01821 	move	v1,a1
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
8000ed4c:	8c630004 	lw	v1,4(v1)
find_proc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:217
		while ((le = list_next(le)) != list) {
8000ed50:	10a30008 	beq	a1,v1,8000ed74 <find_proc+0x64>
8000ed54:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:219
			struct proc_struct *proc = le2proc(le, hash_link);
			if (proc->pid == pid) {
8000ed58:	8c64ff8c 	lw	a0,-116(v1)
8000ed5c:	1490fffb 	bne	a0,s0,8000ed4c <find_proc+0x3c>
8000ed60:	2462ff88 	addiu	v0,v1,-120
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:225
				return proc;
			}
		}
	}
	return NULL;
}
8000ed64:	8fbf0014 	lw	ra,20(sp)
8000ed68:	8fb00010 	lw	s0,16(sp)
8000ed6c:	03e00008 	jr	ra
8000ed70:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:224
			if (proc->pid == pid) {
				return proc;
			}
		}
	}
	return NULL;
8000ed74:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:225
}
8000ed78:	8fb00010 	lw	s0,16(sp)
8000ed7c:	03e00008 	jr	ra
8000ed80:	27bd0018 	addiu	sp,sp,24

8000ed84 <may_killed>:
may_killed():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:552

// may_killed - check if current thread should be killed, should be called before go back to user space
void may_killed(void)
{
	// killed by other process, already set exit_code and call __do_exit directly
	if (current->flags & PF_EXITING) {
8000ed84:	3c028015 	lui	v0,0x8015
8000ed88:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:550
	}
}

// may_killed - check if current thread should be killed, should be called before go back to user space
void may_killed(void)
{
8000ed8c:	27bdffe8 	addiu	sp,sp,-24
8000ed90:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:552
	// killed by other process, already set exit_code and call __do_exit directly
	if (current->flags & PF_EXITING) {
8000ed94:	8c42005c 	lw	v0,92(v0)
8000ed98:	30420001 	andi	v0,v0,0x1
8000ed9c:	14400003 	bnez	v0,8000edac <may_killed+0x28>
8000eda0:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:555
		__do_exit();
	}
}
8000eda4:	03e00008 	jr	ra
8000eda8:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:553
// may_killed - check if current thread should be killed, should be called before go back to user space
void may_killed(void)
{
	// killed by other process, already set exit_code and call __do_exit directly
	if (current->flags & PF_EXITING) {
		__do_exit();
8000edac:	0c003a29 	jal	8000e8a4 <__do_exit>
8000edb0:	00000000 	nop

8000edb4 <do_fork>:
do_fork():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:563
//    1. call alloc_proc to allocate a proc_struct
//    2. call setup_kstack to allocate a kernel stack for child process
//    3. call copy_mm to dup OR share mm according clone_flag
//    4. call wakup_proc to make the new child process RUNNABLE 
int do_fork(uint32_t clone_flags, uintptr_t stack, struct trapframe *tf)
{
8000edb4:	27bdffc0 	addiu	sp,sp,-64
8000edb8:	afb30024 	sw	s3,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:566
	int ret = -E_NO_FREE_PROC;
	struct proc_struct *proc;
	if (nr_process >= MAX_PROCESS) {
8000edbc:	3c138015 	lui	s3,0x8015
8000edc0:	8e626548 	lw	v0,25928(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:563
//    1. call alloc_proc to allocate a proc_struct
//    2. call setup_kstack to allocate a kernel stack for child process
//    3. call copy_mm to dup OR share mm according clone_flag
//    4. call wakup_proc to make the new child process RUNNABLE 
int do_fork(uint32_t clone_flags, uintptr_t stack, struct trapframe *tf)
{
8000edc4:	afb60030 	sw	s6,48(sp)
8000edc8:	afb5002c 	sw	s5,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:566
	int ret = -E_NO_FREE_PROC;
	struct proc_struct *proc;
	if (nr_process >= MAX_PROCESS) {
8000edcc:	28421000 	slti	v0,v0,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:563
//    1. call alloc_proc to allocate a proc_struct
//    2. call setup_kstack to allocate a kernel stack for child process
//    3. call copy_mm to dup OR share mm according clone_flag
//    4. call wakup_proc to make the new child process RUNNABLE 
int do_fork(uint32_t clone_flags, uintptr_t stack, struct trapframe *tf)
{
8000edd0:	afb20020 	sw	s2,32(sp)
8000edd4:	afbf003c 	sw	ra,60(sp)
8000edd8:	afbe0038 	sw	s8,56(sp)
8000eddc:	afb70034 	sw	s7,52(sp)
8000ede0:	afb40028 	sw	s4,40(sp)
8000ede4:	afb1001c 	sw	s1,28(sp)
8000ede8:	afb00018 	sw	s0,24(sp)
8000edec:	00809021 	move	s2,a0
8000edf0:	00a0b021 	move	s6,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:566
	int ret = -E_NO_FREE_PROC;
	struct proc_struct *proc;
	if (nr_process >= MAX_PROCESS) {
8000edf4:	10400198 	beqz	v0,8000f458 <do_fork+0x6a4>
8000edf8:	00c0a821 	move	s5,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:572
		goto fork_out;
	}

	ret = -E_NO_MEM;

	if ((proc = alloc_proc()) == NULL) {
8000edfc:	0c0079a0 	jal	8001e680 <alloc_proc>
8000ee00:	00000000 	nop
8000ee04:	1040019a 	beqz	v0,8000f470 <do_fork+0x6bc>
8000ee08:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:576
		goto fork_out;
	}

	proc->parent = current;
8000ee0c:	3c118015 	lui	s1,0x8015
8000ee10:	8e2277a4 	lw	v0,30628(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:577
	list_init(&(proc->thread_group));
8000ee14:	26140094 	addiu	s4,s0,148
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
 * list_init - initialize a new entry
 * @elm:        new entry to be initialized
 * */
static inline void list_init(list_entry_t * elm)
{
	elm->prev = elm->next = elm;
8000ee18:	ae140098 	sw	s4,152(s0)
do_fork():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:578
	assert(current->wait_state == 0);
8000ee1c:	8c430084 	lw	v1,132(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:576

	if ((proc = alloc_proc()) == NULL) {
		goto fork_out;
	}

	proc->parent = current;
8000ee20:	ae02001c 	sw	v0,28(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:578
	list_init(&(proc->thread_group));
	assert(current->wait_state == 0);
8000ee24:	146001a4 	bnez	v1,8000f4b8 <do_fork+0x704>
8000ee28:	ae140094 	sw	s4,148(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:580

	assert(current->time_slice >= 0);
8000ee2c:	8c4300a8 	lw	v1,168(v0)
8000ee30:	04600199 	bltz	v1,8000f498 <do_fork+0x6e4>
8000ee34:	00031843 	sra	v1,v1,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:581
	proc->time_slice = current->time_slice / 2;
8000ee38:	ae0300a8 	sw	v1,168(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:582
	current->time_slice -= proc->time_slice;
8000ee3c:	8c4500a8 	lw	a1,168(v0)
setup_kstack():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:230
}

// setup_kstack - alloc pages with size KSTACKPAGE as process kernel stack
static int setup_kstack(struct proc_struct *proc)
{
	struct Page *page = alloc_pages(KSTACKPAGE);
8000ee40:	24040002 	li	a0,2
do_fork():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:582
	list_init(&(proc->thread_group));
	assert(current->wait_state == 0);

	assert(current->time_slice >= 0);
	proc->time_slice = current->time_slice / 2;
	current->time_slice -= proc->time_slice;
8000ee44:	00a31823 	subu	v1,a1,v1
setup_kstack():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:230
}

// setup_kstack - alloc pages with size KSTACKPAGE as process kernel stack
static int setup_kstack(struct proc_struct *proc)
{
	struct Page *page = alloc_pages(KSTACKPAGE);
8000ee48:	0c007425 	jal	8001d094 <alloc_pages>
8000ee4c:	ac4300a8 	sw	v1,168(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:231
	if (page != NULL) {
8000ee50:	1040014b 	beqz	v0,8000f380 <do_fork+0x5cc>
8000ee54:	3c038015 	lui	v1,0x8015
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8000ee58:	8c6777bc 	lw	a3,30652(v1)
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8000ee5c:	3c038015 	lui	v1,0x8015
8000ee60:	8c637770 	lw	v1,30576(v1)
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8000ee64:	00471023 	subu	v0,v0,a3
8000ee68:	00021143 	sra	v0,v0,0x5
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8000ee6c:	00021300 	sll	v0,v0,0xc
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8000ee70:	00022302 	srl	a0,v0,0xc
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
	return page - pages;
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8000ee74:	3c078000 	lui	a3,0x8000
8000ee78:	24e71000 	addiu	a3,a3,4096
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8000ee7c:	0083182b 	sltu	v1,a0,v1
8000ee80:	10600195 	beqz	v1,8000f4d8 <do_fork+0x724>
8000ee84:	00473821 	addu	a3,v0,a3
copy_sem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:381
	return ret;
}

static int copy_sem(uint32_t clone_flags, struct proc_struct *proc)
{
	sem_queue_t *sem_queue, *old_sem_queue = current->sem_queue;
8000ee88:	8e2277a4 	lw	v0,30628(s1)
setup_kstack():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:232
// setup_kstack - alloc pages with size KSTACKPAGE as process kernel stack
static int setup_kstack(struct proc_struct *proc)
{
	struct Page *page = alloc_pages(KSTACKPAGE);
	if (page != NULL) {
		proc->kstack = (uintptr_t) page2kva(page);
8000ee8c:	ae070014 	sw	a3,20(s0)
copy_sem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:381
	return ret;
}

static int copy_sem(uint32_t clone_flags, struct proc_struct *proc)
{
	sem_queue_t *sem_queue, *old_sem_queue = current->sem_queue;
8000ee90:	8c5700ac 	lw	s7,172(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:384

	/* current is kernel thread */
	if (old_sem_queue == NULL) {
8000ee94:	52e0001e 	beqzl	s7,8000ef10 <do_fork+0x15c>
8000ee98:	8c5e00bc 	lw	s8,188(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:388
		return 0;
	}

	if (clone_flags & CLONE_SEM) {
8000ee9c:	7e420400 	ext	v0,s2,0x10,0x1
8000eea0:	14400010 	bnez	v0,8000eee4 <do_fork+0x130>
8000eea4:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:394
		sem_queue = old_sem_queue;
		goto good_sem_queue;
	}

	int ret = -E_NO_MEM;
	if ((sem_queue = sem_queue_create()) == NULL) {
8000eea8:	0c006748 	jal	80019d20 <sem_queue_create>
8000eeac:	00000000 	nop
8000eeb0:	10400131 	beqz	v0,8000f378 <do_fork+0x5c4>
8000eeb4:	0040f021 	move	s8,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:398
		goto bad_sem_queue;
	}

	down(&(old_sem_queue->sem));
8000eeb8:	0c00671f 	jal	80019c7c <down>
8000eebc:	02e02021 	move	a0,s7
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:399
	ret = dup_sem_queue(sem_queue, old_sem_queue);
8000eec0:	03c02021 	move	a0,s8
8000eec4:	0c0067d2 	jal	80019f48 <dup_sem_queue>
8000eec8:	02e02821 	move	a1,s7
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:400
	up(&(old_sem_queue->sem));
8000eecc:	02e02021 	move	a0,s7
8000eed0:	0c00671d 	jal	80019c74 <up>
8000eed4:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:402

	if (ret != 0) {
8000eed8:	8fa20010 	lw	v0,16(sp)
8000eedc:	14400122 	bnez	v0,8000f368 <do_fork+0x5b4>
8000eee0:	03c0b821 	move	s7,s8
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8000eee4:	40026000 	mfc0	v0,c0_status
8000eee8:	30420001 	andi	v0,v0,0x1
8000eeec:	144000bf 	bnez	v0,8000f1ec <do_fork+0x438>
8000eef0:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8000eef4:	8ee20014 	lw	v0,20(s7)
8000eef8:	24420001 	addiu	v0,v0,1
8000eefc:	aee20014 	sw	v0,20(s7)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
8000ef00:	8ee20014 	lw	v0,20(s7)
copy_sem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:408
		goto bad_dup_cleanup_sem;
	}

good_sem_queue:
	sem_queue_count_inc(sem_queue);
	proc->sem_queue = sem_queue;
8000ef04:	8e2277a4 	lw	v0,30628(s1)
8000ef08:	ae1700ac 	sw	s7,172(s0)
copy_fs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:510
	proc->signal_info.sighand = NULL;
}

static int copy_fs(uint32_t clone_flags, struct proc_struct *proc)
{
	struct fs_struct *fs_struct, *old_fs_struct = current->fs_struct;
8000ef0c:	8c5e00bc 	lw	s8,188(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:511
	assert(old_fs_struct != NULL);
8000ef10:	13c00159 	beqz	s8,8000f478 <do_fork+0x6c4>
8000ef14:	32420200 	andi	v0,s2,0x200
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:513

	if (clone_flags & CLONE_FS) {
8000ef18:	1440000a 	bnez	v0,8000ef44 <do_fork+0x190>
8000ef1c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:519
		fs_struct = old_fs_struct;
		goto good_fs_struct;
	}

	int ret = -E_NO_MEM;
	if ((fs_struct = fs_create()) == NULL) {
8000ef20:	0c003284 	jal	8000ca10 <fs_create>
8000ef24:	00000000 	nop
8000ef28:	10400130 	beqz	v0,8000f3ec <do_fork+0x638>
8000ef2c:	0040b821 	move	s7,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:523
		goto bad_fs_struct;
	}

	if ((ret = dup_fs(fs_struct, old_fs_struct)) != 0) {
8000ef30:	00402021 	move	a0,v0
8000ef34:	0c0032ff 	jal	8000cbfc <dup_fs>
8000ef38:	03c02821 	move	a1,s8
8000ef3c:	14400148 	bnez	v0,8000f460 <do_fork+0x6ac>
8000ef40:	02e0f021 	move	s8,s7
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8000ef44:	40026000 	mfc0	v0,c0_status
8000ef48:	30420001 	andi	v0,v0,0x1
8000ef4c:	144000ce 	bnez	v0,8000f288 <do_fork+0x4d4>
8000ef50:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8000ef54:	8fc20008 	lw	v0,8(s8)
8000ef58:	24420001 	addiu	v0,v0,1
8000ef5c:	afc20008 	sw	v0,8(s8)
copy_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:431
	}
}

static int copy_signal(uint32_t clone_flags, struct proc_struct *proc)
{
	struct signal_struct *signal, *oldsig = current->signal_info.signal;
8000ef60:	8e2377a4 	lw	v1,30628(s1)
copy_fs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
8000ef64:	8fc20008 	lw	v0,8(s8)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:529
		goto bad_dup_cleanup_fs;
	}

good_fs_struct:
	fs_count_inc(fs_struct);
	proc->fs_struct = fs_struct;
8000ef68:	ae1e00bc 	sw	s8,188(s0)
copy_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:433

static int copy_signal(uint32_t clone_flags, struct proc_struct *proc)
{
	struct signal_struct *signal, *oldsig = current->signal_info.signal;

	if (oldsig == NULL) {
8000ef6c:	8c6200c0 	lw	v0,192(v1)
8000ef70:	50400010 	beqzl	v0,8000efb4 <do_fork+0x200>
8000ef74:	8c6200c4 	lw	v0,196(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:444
		goto good_signal;
	}
#endif

	int ret = -E_NO_MEM;
	if ((signal = signal_create()) == NULL) {
8000ef78:	0c00454d 	jal	80011534 <signal_create>
8000ef7c:	00000000 	nop
8000ef80:	10400118 	beqz	v0,8000f3e4 <do_fork+0x630>
8000ef84:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8000ef88:	40036000 	mfc0	v1,c0_status
8000ef8c:	30630001 	andi	v1,v1,0x1
8000ef90:	14600127 	bnez	v1,8000f430 <do_fork+0x67c>
8000ef94:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8000ef98:	8c430000 	lw	v1,0(v0)
8000ef9c:	24630001 	addiu	v1,v1,1
8000efa0:	ac430000 	sw	v1,0(v0)
copy_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:450
		goto bad_signal;
	}

good_signal:
	signal_count_inc(signal);
	proc->signal_info.signal = signal;
8000efa4:	8e2377a4 	lw	v1,30628(s1)
signal_count_inc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
8000efa8:	8c440000 	lw	a0,0(v0)
copy_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:450
8000efac:	ae0200c0 	sw	v0,192(s0)
copy_sighand():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:472
	proc->signal_info.signal = NULL;
}

static int copy_sighand(uint32_t clone_flags, struct proc_struct *proc)
{
	struct sighand_struct *sighand, *oldsh = current->signal_info.sighand;
8000efb0:	8c6200c4 	lw	v0,196(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:474

	if (oldsh == NULL) {
8000efb4:	50400015 	beqzl	v0,8000f00c <do_fork+0x258>
8000efb8:	8c770020 	lw	s7,32(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:478
		return 0;
	}

	if (clone_flags & (CLONE_SIGHAND | CLONE_THREAD)) {
8000efbc:	3c030001 	lui	v1,0x1
8000efc0:	24630800 	addiu	v1,v1,2048
8000efc4:	02431824 	and	v1,s2,v1
8000efc8:	14600005 	bnez	v1,8000efe0 <do_fork+0x22c>
8000efcc:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:484
		sighand = oldsh;
		goto good_sighand;
	}

	int ret = -E_NO_MEM;
	if ((sighand = sighand_create()) == NULL) {
8000efd0:	0c004572 	jal	800115c8 <sighand_create>
8000efd4:	00000000 	nop
8000efd8:	10400100 	beqz	v0,8000f3dc <do_fork+0x628>
8000efdc:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8000efe0:	40036000 	mfc0	v1,c0_status
8000efe4:	30630001 	andi	v1,v1,0x1
8000efe8:	1460009d 	bnez	v1,8000f260 <do_fork+0x4ac>
8000efec:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8000eff0:	8c430000 	lw	v1,0(v0)
8000eff4:	24630001 	addiu	v1,v1,1
8000eff8:	ac430000 	sw	v1,0(v0)
copy_sighand():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:490
		goto bad_sighand;
	}

good_sighand:
	sighand_count_inc(sighand);
	proc->signal_info.sighand = sighand;
8000effc:	8e2377a4 	lw	v1,30628(s1)
sighand_count_inc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
8000f000:	8c440000 	lw	a0,0(v0)
copy_sighand():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:490
8000f004:	ae0200c4 	sw	v0,196(s0)
copy_mm():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:318

// copy_mm - process "proc" duplicate OR share process "current"'s mm according clone_flags
//         - if clone_flags & CLONE_VM, then "share" ; else "duplicate"
static int copy_mm(uint32_t clone_flags, struct proc_struct *proc)
{
	struct mm_struct *mm, *oldmm = current->mm;
8000f008:	8c770020 	lw	s7,32(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:321

	/* current is a kernel thread */
	if (oldmm == NULL) {
8000f00c:	12e0000f 	beqz	s7,8000f04c <do_fork+0x298>
8000f010:	32420100 	andi	v0,s2,0x100
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:324
		return 0;
	}
	if (clone_flags & CLONE_VM) {
8000f014:	104000ae 	beqz	v0,8000f2d0 <do_fork+0x51c>
8000f018:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8000f01c:	40026000 	mfc0	v0,c0_status
8000f020:	30420001 	andi	v0,v0,0x1
8000f024:	144000a1 	bnez	v0,8000f2ac <do_fork+0x4f8>
8000f028:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8000f02c:	8ee2001c 	lw	v0,28(s7)
8000f030:	24420001 	addiu	v0,v0,1
8000f034:	aee2001c 	sw	v0,28(s7)
copy_mm():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:368
		}
		local_intr_restore(intr_flag);
	}
	mm_count_inc(mm);
	proc->mm = mm;
	set_pgdir(proc, mm->pgdir);
8000f038:	8ee50010 	lw	a1,16(s7)
mm_count_inc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
8000f03c:	8ee2001c 	lw	v0,28(s7)
copy_mm():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:368
8000f040:	02002021 	move	a0,s0
8000f044:	0c007900 	jal	8001e400 <set_pgdir>
8000f048:	ae170020 	sw	s7,32(s0)
do_fork():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:602
		goto bad_fork_cleanup_signal;
	}
	if (copy_mm(clone_flags, proc) != 0) {
		goto bad_fork_cleanup_sighand;
	}
	if (copy_thread(clone_flags, proc, stack, tf) != 0) {
8000f04c:	02402021 	move	a0,s2
8000f050:	02002821 	move	a1,s0
8000f054:	02c03021 	move	a2,s6
8000f058:	0c0079f6 	jal	8001e7d8 <copy_thread>
8000f05c:	02a03821 	move	a3,s5
8000f060:	144000dc 	bnez	v0,8000f3d4 <do_fork+0x620>
8000f064:	8e2277a4 	lw	v0,30628(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:606
		goto bad_fork_cleanup_sighand;
	}

	proc->tls_pointer = current->tls_pointer;
8000f068:	8c4200f0 	lw	v0,240(v0)
8000f06c:	ae0200f0 	sw	v0,240(s0)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8000f070:	40026000 	mfc0	v0,c0_status
8000f074:	30420001 	andi	v0,v0,0x1
8000f078:	10400003 	beqz	v0,8000f088 <do_fork+0x2d4>
8000f07c:	0000b021 	move	s6,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8000f080:	0c006d04 	jal	8001b410 <intr_disable>
8000f084:	24160001 	li	s6,1
get_pid():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:148
{
	static_assert(MAX_PID > MAX_PROCESS);
	struct proc_struct *proc;
	list_entry_t *list = &proc_list, *le;
	static int next_safe = MAX_PID, last_pid = MAX_PID;
	if (++last_pid >= MAX_PID) {
8000f088:	3c088002 	lui	t0,0x8002
8000f08c:	8d04541c 	lw	a0,21532(t0)
8000f090:	24840001 	addiu	a0,a0,1
8000f094:	28822000 	slti	v0,a0,8192
8000f098:	1440006a 	bnez	v0,8000f244 <do_fork+0x490>
8000f09c:	ad04541c 	sw	a0,21532(t0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:149
		last_pid = pls_read(lcpu_count);
8000f0a0:	3c028015 	lui	v0,0x8015
8000f0a4:	8c4477a0 	lw	a0,30624(v0)
8000f0a8:	3c098002 	lui	t1,0x8002
8000f0ac:	ad04541c 	sw	a0,21532(t0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:156
	}
	if (last_pid >= next_safe) {
inside:
		next_safe = MAX_PID;
repeat:
		le = list;
8000f0b0:	3c158015 	lui	s5,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:152
	static int next_safe = MAX_PID, last_pid = MAX_PID;
	if (++last_pid >= MAX_PID) {
		last_pid = pls_read(lcpu_count);
		goto inside;
	}
	if (last_pid >= next_safe) {
8000f0b4:	8d07541c 	lw	a3,21532(t0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:156
inside:
		next_safe = MAX_PID;
repeat:
		le = list;
8000f0b8:	26b57788 	addiu	s5,s5,30600
8000f0bc:	24052000 	li	a1,8192
8000f0c0:	02a01021 	move	v0,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:162
		while ((le = list_next(le)) != list) {
			proc = le2proc(le, list_link);
			if (proc->pid == last_pid) {
				if (++last_pid >= next_safe) {
					if (last_pid >= MAX_PID) {
						last_pid = 1;
8000f0c4:	240a0001 	li	t2,1
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
8000f0c8:	8c420004 	lw	v0,4(v0)
get_pid():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:157
	if (last_pid >= next_safe) {
inside:
		next_safe = MAX_PID;
repeat:
		le = list;
		while ((le = list_next(le)) != list) {
8000f0cc:	5055000a 	beql	v0,s5,8000f0f8 <do_fork+0x344>
8000f0d0:	ad07541c 	sw	a3,21532(t0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:159
			proc = le2proc(le, list_link);
			if (proc->pid == last_pid) {
8000f0d4:	8c43ff94 	lw	v1,-108(v0)
8000f0d8:	1064004d 	beq	v1,a0,8000f210 <do_fork+0x45c>
8000f0dc:	0083302a 	slt	a2,a0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:167
						last_pid = 1;
					}
					next_safe = MAX_PID;
					goto repeat;
				}
			} else if (proc->pid > last_pid
8000f0e0:	10c0fffa 	beqz	a2,8000f0cc <do_fork+0x318>
8000f0e4:	8c420004 	lw	v0,4(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:168
				   && next_safe > proc->pid) {
8000f0e8:	0065302a 	slt	a2,v1,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:157
	if (last_pid >= next_safe) {
inside:
		next_safe = MAX_PID;
repeat:
		le = list;
		while ((le = list_next(le)) != list) {
8000f0ec:	1455fff9 	bne	v0,s5,8000f0d4 <do_fork+0x320>
8000f0f0:	0066280b 	movn	a1,v1,a2
8000f0f4:	ad07541c 	sw	a3,21532(t0)
8000f0f8:	ad255420 	sw	a1,21536(t1)
do_fork():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:611
	proc->tls_pointer = current->tls_pointer;

	bool intr_flag;
	local_intr_save(intr_flag);
	{
		proc->pid = get_pid();
8000f0fc:	ae040004 	sw	a0,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:612
		proc->tid = proc->pid;
8000f100:	ae040008 	sw	a0,8(s0)
hash_proc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:203
}

// hash_proc - add proc into proc hash_list
static void hash_proc(struct proc_struct *proc)
{
	list_add(hash_list + pid_hashfn(proc->pid), &(proc->hash_link));
8000f104:	0c005953 	jal	8001654c <hash32>
8000f108:	2405000a 	li	a1,10
set_links():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:119
// set_links - set the relation links of process
static void set_links(struct proc_struct *proc)
{
	list_add(&proc_list, &(proc->list_link));
	proc->yptr = NULL;
	if ((proc->optr = proc->parent->cptr) != NULL) {
8000f10c:	8e03001c 	lw	v1,28(s0)
hash_proc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:203
}

// hash_proc - add proc into proc hash_list
static void hash_proc(struct proc_struct *proc)
{
	list_add(hash_list + pid_hashfn(proc->pid), &(proc->hash_link));
8000f110:	3c048015 	lui	a0,0x8015
8000f114:	24844548 	addiu	a0,a0,17736
8000f118:	000210c0 	sll	v0,v0,0x3
8000f11c:	00821021 	addu	v0,a0,v0
list_add_after():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:93
 * Insert the new element @elm *after* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_after(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm, listelm->next);
8000f120:	8c470004 	lw	a3,4(v0)
set_links():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:119
// set_links - set the relation links of process
static void set_links(struct proc_struct *proc)
{
	list_add(&proc_list, &(proc->list_link));
	proc->yptr = NULL;
	if ((proc->optr = proc->parent->cptr) != NULL) {
8000f124:	8c640088 	lw	a0,136(v1)
list_add_after():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:93
8000f128:	8ea50004 	lw	a1,4(s5)
hash_proc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:203
}

// hash_proc - add proc into proc hash_list
static void hash_proc(struct proc_struct *proc)
{
	list_add(hash_list + pid_hashfn(proc->pid), &(proc->hash_link));
8000f12c:	26080078 	addiu	t0,s0,120
set_links():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:117
}

// set_links - set the relation links of process
static void set_links(struct proc_struct *proc)
{
	list_add(&proc_list, &(proc->list_link));
8000f130:	26060070 	addiu	a2,s0,112
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
8000f134:	ace80000 	sw	t0,0(a3)
8000f138:	ac480004 	sw	t0,4(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->next = next;
	elm->prev = prev;
8000f13c:	ae020078 	sw	v0,120(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
	elm->next = next;
8000f140:	ae07007c 	sw	a3,124(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
8000f144:	aca60000 	sw	a2,0(a1)
8000f148:	aea60004 	sw	a2,4(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
	elm->next = next;
8000f14c:	ae050074 	sw	a1,116(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->prev = prev;
8000f150:	ae150070 	sw	s5,112(s0)
set_links():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:118
	proc->yptr = NULL;
8000f154:	ae00008c 	sw	zero,140(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:119
	if ((proc->optr = proc->parent->cptr) != NULL) {
8000f158:	10800002 	beqz	a0,8000f164 <do_fork+0x3b0>
8000f15c:	ae040090 	sw	a0,144(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:120
		proc->optr->yptr = proc;
8000f160:	ac90008c 	sw	s0,140(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:123
	}
	proc->parent->cptr = proc;
	nr_process++;
8000f164:	8e626548 	lw	v0,25928(s3)
do_fork():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:615
	{
		proc->pid = get_pid();
		proc->tid = proc->pid;
		hash_proc(proc);
		set_links(proc);
		if (clone_flags & CLONE_THREAD) {
8000f168:	7e520400 	ext	s2,s2,0x10,0x1
set_links():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:122
	list_add(&proc_list, &(proc->list_link));
	proc->yptr = NULL;
	if ((proc->optr = proc->parent->cptr) != NULL) {
		proc->optr->yptr = proc;
	}
	proc->parent->cptr = proc;
8000f16c:	ac700088 	sw	s0,136(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:123
	nr_process++;
8000f170:	24420001 	addiu	v0,v0,1
do_fork():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:615
	{
		proc->pid = get_pid();
		proc->tid = proc->pid;
		hash_proc(proc);
		set_links(proc);
		if (clone_flags & CLONE_THREAD) {
8000f174:	12400030 	beqz	s2,8000f238 <do_fork+0x484>
8000f178:	ae626548 	sw	v0,25928(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:616
			list_add_before(&(current->thread_group),
8000f17c:	8e2277a4 	lw	v0,30628(s1)
list_add_before():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:80
 * Insert the new element @elm *before* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_before(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm->prev, listelm);
8000f180:	8c430094 	lw	v1,148(v0)
do_fork():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:618
					&(proc->thread_group));
			proc->gid = current->gid;
8000f184:	8c44000c 	lw	a0,12(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:616
		proc->pid = get_pid();
		proc->tid = proc->pid;
		hash_proc(proc);
		set_links(proc);
		if (clone_flags & CLONE_THREAD) {
			list_add_before(&(current->thread_group),
8000f188:	24450094 	addiu	a1,v0,148
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
8000f18c:	ac540094 	sw	s4,148(v0)
8000f190:	ac740004 	sw	s4,4(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->next = next;
	elm->prev = prev;
8000f194:	ae030094 	sw	v1,148(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
	elm->next = next;
8000f198:	ae050098 	sw	a1,152(s0)
do_fork():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:618
					&(proc->thread_group));
			proc->gid = current->gid;
8000f19c:	ae04000c 	sw	a0,12(s0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
8000f1a0:	12c00003 	beqz	s6,8000f1b0 <do_fork+0x3fc>
8000f1a4:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
8000f1a8:	0c006d00 	jal	8001b400 <intr_enable>
8000f1ac:	00000000 	nop
do_fork():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:625
			proc->gid = proc->pid;
		}
	}
	local_intr_restore(intr_flag);

	wakeup_proc(proc);
8000f1b0:	0c0004f8 	jal	800013e0 <wakeup_proc>
8000f1b4:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:627

	ret = proc->pid;
8000f1b8:	8e020004 	lw	v0,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:643
bad_fork_cleanup_kstack:
	put_kstack(proc);
bad_fork_cleanup_proc:
	kfree(proc);
	goto fork_out;
}
8000f1bc:	8fbf003c 	lw	ra,60(sp)
8000f1c0:	8fbe0038 	lw	s8,56(sp)
8000f1c4:	8fb70034 	lw	s7,52(sp)
8000f1c8:	8fb60030 	lw	s6,48(sp)
8000f1cc:	8fb5002c 	lw	s5,44(sp)
8000f1d0:	8fb40028 	lw	s4,40(sp)
8000f1d4:	8fb30024 	lw	s3,36(sp)
8000f1d8:	8fb20020 	lw	s2,32(sp)
8000f1dc:	8fb1001c 	lw	s1,28(sp)
8000f1e0:	8fb00018 	lw	s0,24(sp)
8000f1e4:	03e00008 	jr	ra
8000f1e8:	27bd0040 	addiu	sp,sp,64
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8000f1ec:	0c006d04 	jal	8001b410 <intr_disable>
8000f1f0:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8000f1f4:	8ee20014 	lw	v0,20(s7)
8000f1f8:	24420001 	addiu	v0,v0,1
8000f1fc:	aee20014 	sw	v0,20(s7)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000f200:	0c006d00 	jal	8001b400 <intr_enable>
8000f204:	00000000 	nop
8000f208:	08003bc0 	j	8000ef00 <do_fork+0x14c>
8000f20c:	00000000 	nop
get_pid():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:160
repeat:
		le = list;
		while ((le = list_next(le)) != list) {
			proc = le2proc(le, list_link);
			if (proc->pid == last_pid) {
				if (++last_pid >= next_safe) {
8000f210:	24840001 	addiu	a0,a0,1
8000f214:	0085182a 	slt	v1,a0,a1
8000f218:	1460ffab 	bnez	v1,8000f0c8 <do_fork+0x314>
8000f21c:	00803821 	move	a3,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:161
					if (last_pid >= MAX_PID) {
8000f220:	28872000 	slti	a3,a0,8192
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:162
						last_pid = 1;
8000f224:	0147200a 	movz	a0,t2,a3
8000f228:	00803821 	move	a3,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:164
					}
					next_safe = MAX_PID;
8000f22c:	24052000 	li	a1,8192
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:156
	}
	if (last_pid >= next_safe) {
inside:
		next_safe = MAX_PID;
repeat:
		le = list;
8000f230:	08003c32 	j	8000f0c8 <do_fork+0x314>
8000f234:	02a01021 	move	v0,s5
do_fork():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:620
		if (clone_flags & CLONE_THREAD) {
			list_add_before(&(current->thread_group),
					&(proc->thread_group));
			proc->gid = current->gid;
		} else {
			proc->gid = proc->pid;
8000f238:	8e020004 	lw	v0,4(s0)
8000f23c:	08003c68 	j	8000f1a0 <do_fork+0x3ec>
8000f240:	ae02000c 	sw	v0,12(s0)
get_pid():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:152
	static int next_safe = MAX_PID, last_pid = MAX_PID;
	if (++last_pid >= MAX_PID) {
		last_pid = pls_read(lcpu_count);
		goto inside;
	}
	if (last_pid >= next_safe) {
8000f244:	3c098002 	lui	t1,0x8002
8000f248:	8d225420 	lw	v0,21536(t1)
8000f24c:	0082102a 	slt	v0,a0,v0
8000f250:	1040ff98 	beqz	v0,8000f0b4 <do_fork+0x300>
8000f254:	3c158015 	lui	s5,0x8015
8000f258:	08003c3f 	j	8000f0fc <do_fork+0x348>
8000f25c:	26b57788 	addiu	s5,s5,30600
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8000f260:	0c006d04 	jal	8001b410 <intr_disable>
8000f264:	afa20010 	sw	v0,16(sp)
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
8000f268:	8fa20010 	lw	v0,16(sp)
8000f26c:	8c430000 	lw	v1,0(v0)
8000f270:	24630001 	addiu	v1,v1,1
8000f274:	ac430000 	sw	v1,0(v0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000f278:	0c006d00 	jal	8001b400 <intr_enable>
8000f27c:	00000000 	nop
8000f280:	08003bff 	j	8000effc <do_fork+0x248>
8000f284:	8fa20010 	lw	v0,16(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8000f288:	0c006d04 	jal	8001b410 <intr_disable>
8000f28c:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
8000f290:	8fc20008 	lw	v0,8(s8)
8000f294:	24420001 	addiu	v0,v0,1
8000f298:	afc20008 	sw	v0,8(s8)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000f29c:	0c006d00 	jal	8001b400 <intr_enable>
8000f2a0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:431
	}
}

static int copy_signal(uint32_t clone_flags, struct proc_struct *proc)
{
	struct signal_struct *signal, *oldsig = current->signal_info.signal;
8000f2a4:	08003bd9 	j	8000ef64 <do_fork+0x1b0>
8000f2a8:	8e2377a4 	lw	v1,30628(s1)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8000f2ac:	0c006d04 	jal	8001b410 <intr_disable>
8000f2b0:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
8000f2b4:	8ee2001c 	lw	v0,28(s7)
8000f2b8:	24420001 	addiu	v0,v0,1
8000f2bc:	aee2001c 	sw	v0,28(s7)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000f2c0:	0c006d00 	jal	8001b400 <intr_enable>
8000f2c4:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:368
		}
		local_intr_restore(intr_flag);
	}
	mm_count_inc(mm);
	proc->mm = mm;
	set_pgdir(proc, mm->pgdir);
8000f2c8:	08003c0f 	j	8000f03c <do_fork+0x288>
8000f2cc:	8ee50010 	lw	a1,16(s7)
copy_mm():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:330
		mm = oldmm;
		goto good_mm;
	}

	int ret = -E_NO_MEM;
	if ((mm = mm_create()) == NULL) {
8000f2d0:	0c004c58 	jal	80013160 <mm_create>
8000f2d4:	00000000 	nop
8000f2d8:	1040003e 	beqz	v0,8000f3d4 <do_fork+0x620>
8000f2dc:	0040f021 	move	s8,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:333
		goto bad_mm;
	}
	if (setup_pgdir(mm) != 0) {
8000f2e0:	0c003976 	jal	8000e5d8 <setup_pgdir>
8000f2e4:	00402021 	move	a0,v0
8000f2e8:	14400038 	bnez	v0,8000f3cc <do_fork+0x618>
8000f2ec:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:337
		goto bad_pgdir_cleanup_mm;
	}

	lock_mm(oldmm);
8000f2f0:	0c004c26 	jal	80013098 <lock_mm>
8000f2f4:	02e02021 	move	a0,s7
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:339
	{
		ret = dup_mmap(mm, oldmm);
8000f2f8:	03c02021 	move	a0,s8
8000f2fc:	0c004f8e 	jal	80013e38 <dup_mmap>
8000f300:	02e02821 	move	a1,s7
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:341
	}
	unlock_mm(oldmm);
8000f304:	02e02021 	move	a0,s7
8000f308:	0c004c37 	jal	800130dc <unlock_mm>
8000f30c:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:351
		ret = remapfile(mm, proc);
	}
	unlock_mm(mm);
#endif //UCONFIG_BIONIC_LIBC

	if (ret != 0) {
8000f310:	8fa20010 	lw	v0,16(sp)
8000f314:	14400029 	bnez	v0,8000f3bc <do_fork+0x608>
8000f318:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:356
		goto bad_dup_cleanup_mmap;
	}

good_mm:
	if (mm != oldmm) {
8000f31c:	12feff3f 	beq	s7,s8,8000f01c <do_fork+0x268>
8000f320:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:357
		mm->brk_start = oldmm->brk_start;
8000f324:	8ee30024 	lw	v1,36(s7)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:358
		mm->brk = oldmm->brk;
8000f328:	8ee20028 	lw	v0,40(s7)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:357
		goto bad_dup_cleanup_mmap;
	}

good_mm:
	if (mm != oldmm) {
		mm->brk_start = oldmm->brk_start;
8000f32c:	afc30024 	sw	v1,36(s8)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:358
		mm->brk = oldmm->brk;
8000f330:	afc20028 	sw	v0,40(s8)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8000f334:	40026000 	mfc0	v0,c0_status
8000f338:	30420001 	andi	v0,v0,0x1
8000f33c:	1440002f 	bnez	v0,8000f3fc <do_fork+0x648>
8000f340:	3c028015 	lui	v0,0x8015
list_add_after():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:93
 * Insert the new element @elm *after* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_after(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm, listelm->next);
8000f344:	24427780 	addiu	v0,v0,30592
8000f348:	8c430004 	lw	v1,4(v0)
copy_mm():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:362
		bool intr_flag;
		local_intr_save(intr_flag);
		{
			list_add(&(proc_mm_list), &(mm->proc_mm_link));
8000f34c:	27c4002c 	addiu	a0,s8,44
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
8000f350:	ac440004 	sw	a0,4(v0)
8000f354:	ac640000 	sw	a0,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
	elm->next = next;
8000f358:	afc30030 	sw	v1,48(s8)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->prev = prev;
8000f35c:	afc2002c 	sw	v0,44(s8)
8000f360:	08003c07 	j	8000f01c <do_fork+0x268>
8000f364:	03c0b821 	move	s7,s8
copy_sem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:412
	sem_queue_count_inc(sem_queue);
	proc->sem_queue = sem_queue;
	return 0;

bad_dup_cleanup_sem:
	exit_sem_queue(sem_queue);
8000f368:	0c006808 	jal	8001a020 <exit_sem_queue>
8000f36c:	03c02021 	move	a0,s8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:413
	sem_queue_destroy(sem_queue);
8000f370:	0c006759 	jal	80019d64 <sem_queue_destroy>
8000f374:	03c02021 	move	a0,s8
do_fork():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:639
bad_fork_cleanup_fs:
	put_fs(proc);
bad_fork_cleanup_sem:
	put_sem_queue(proc);
bad_fork_cleanup_kstack:
	put_kstack(proc);
8000f378:	0c003acb 	jal	8000eb2c <put_kstack>
8000f37c:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:641
bad_fork_cleanup_proc:
	kfree(proc);
8000f380:	0c0054b1 	jal	800152c4 <kfree>
8000f384:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:643
	goto fork_out;
}
8000f388:	8fbf003c 	lw	ra,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:570
	struct proc_struct *proc;
	if (nr_process >= MAX_PROCESS) {
		goto fork_out;
	}

	ret = -E_NO_MEM;
8000f38c:	2402fff4 	li	v0,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:643
bad_fork_cleanup_kstack:
	put_kstack(proc);
bad_fork_cleanup_proc:
	kfree(proc);
	goto fork_out;
}
8000f390:	8fbe0038 	lw	s8,56(sp)
8000f394:	8fb70034 	lw	s7,52(sp)
8000f398:	8fb60030 	lw	s6,48(sp)
8000f39c:	8fb5002c 	lw	s5,44(sp)
8000f3a0:	8fb40028 	lw	s4,40(sp)
8000f3a4:	8fb30024 	lw	s3,36(sp)
8000f3a8:	8fb20020 	lw	s2,32(sp)
8000f3ac:	8fb1001c 	lw	s1,28(sp)
8000f3b0:	8fb00018 	lw	s0,24(sp)
8000f3b4:	03e00008 	jr	ra
8000f3b8:	27bd0040 	addiu	sp,sp,64
copy_mm():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:371
	mm_count_inc(mm);
	proc->mm = mm;
	set_pgdir(proc, mm->pgdir);
	return 0;
bad_dup_cleanup_mmap:
	exit_mmap(mm);
8000f3bc:	0c004ff0 	jal	80013fc0 <exit_mmap>
8000f3c0:	03c02021 	move	a0,s8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:372
	put_pgdir(mm);
8000f3c4:	0c0037d6 	jal	8000df58 <put_pgdir>
8000f3c8:	03c02021 	move	a0,s8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:374
bad_pgdir_cleanup_mm:
	mm_destroy(mm);
8000f3cc:	0c004d61 	jal	80013584 <mm_destroy>
8000f3d0:	03c02021 	move	a0,s8
do_fork():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:631

	ret = proc->pid;
fork_out:
	return ret;
bad_fork_cleanup_sighand:
	put_sighand(proc);
8000f3d4:	0c0039a2 	jal	8000e688 <put_sighand>
8000f3d8:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:633
bad_fork_cleanup_signal:
	put_signal(proc);
8000f3dc:	0c0039e7 	jal	8000e79c <put_signal>
8000f3e0:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:635
bad_fork_cleanup_fs:
	put_fs(proc);
8000f3e4:	0c003a09 	jal	8000e824 <put_fs>
8000f3e8:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:637
bad_fork_cleanup_sem:
	put_sem_queue(proc);
8000f3ec:	0c0039c4 	jal	8000e710 <put_sem_queue>
8000f3f0:	02002021 	move	a0,s0
8000f3f4:	08003cde 	j	8000f378 <do_fork+0x5c4>
8000f3f8:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8000f3fc:	0c006d04 	jal	8001b410 <intr_disable>
8000f400:	03c0b821 	move	s7,s8
list_add_after():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:93
 * Insert the new element @elm *after* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_after(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm, listelm->next);
8000f404:	3c028015 	lui	v0,0x8015
8000f408:	24427780 	addiu	v0,v0,30592
8000f40c:	8c430004 	lw	v1,4(v0)
copy_mm():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:362
		mm->brk_start = oldmm->brk_start;
		mm->brk = oldmm->brk;
		bool intr_flag;
		local_intr_save(intr_flag);
		{
			list_add(&(proc_mm_list), &(mm->proc_mm_link));
8000f410:	27c4002c 	addiu	a0,s8,44
list_add_after():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
8000f414:	ac440004 	sw	a0,4(v0)
8000f418:	ac640000 	sw	a0,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
	elm->next = next;
8000f41c:	afc30030 	sw	v1,48(s8)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000f420:	0c006d00 	jal	8001b400 <intr_enable>
8000f424:	afc2002c 	sw	v0,44(s8)
8000f428:	08003c07 	j	8000f01c <do_fork+0x268>
8000f42c:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8000f430:	0c006d04 	jal	8001b410 <intr_disable>
8000f434:	afa20010 	sw	v0,16(sp)
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
8000f438:	8fa20010 	lw	v0,16(sp)
8000f43c:	8c430000 	lw	v1,0(v0)
8000f440:	24630001 	addiu	v1,v1,1
8000f444:	ac430000 	sw	v1,0(v0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000f448:	0c006d00 	jal	8001b400 <intr_enable>
8000f44c:	00000000 	nop
8000f450:	08003be9 	j	8000efa4 <do_fork+0x1f0>
8000f454:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:564
//    2. call setup_kstack to allocate a kernel stack for child process
//    3. call copy_mm to dup OR share mm according clone_flag
//    4. call wakup_proc to make the new child process RUNNABLE 
int do_fork(uint32_t clone_flags, uintptr_t stack, struct trapframe *tf)
{
	int ret = -E_NO_FREE_PROC;
8000f458:	08003c6f 	j	8000f1bc <do_fork+0x408>
8000f45c:	2402fff0 	li	v0,-16
copy_fs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:533
	fs_count_inc(fs_struct);
	proc->fs_struct = fs_struct;
	return 0;

bad_dup_cleanup_fs:
	fs_destroy(fs_struct);
8000f460:	0c003298 	jal	8000ca60 <fs_destroy>
8000f464:	02e02021 	move	a0,s7
8000f468:	08003cfb 	j	8000f3ec <do_fork+0x638>
8000f46c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:570
	struct proc_struct *proc;
	if (nr_process >= MAX_PROCESS) {
		goto fork_out;
	}

	ret = -E_NO_MEM;
8000f470:	08003c6f 	j	8000f1bc <do_fork+0x408>
8000f474:	2402fff4 	li	v0,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:511
}

static int copy_fs(uint32_t clone_flags, struct proc_struct *proc)
{
	struct fs_struct *fs_struct, *old_fs_struct = current->fs_struct;
	assert(old_fs_struct != NULL);
8000f478:	3c048002 	lui	a0,0x8002
8000f47c:	3c068002 	lui	a2,0x8002
8000f480:	3c078002 	lui	a3,0x8002
8000f484:	24842a98 	addiu	a0,a0,10904
8000f488:	240501ff 	li	a1,511
8000f48c:	24c60e28 	addiu	a2,a2,3624
8000f490:	0c006b0b 	jal	8001ac2c <__panic>
8000f494:	24e72b58 	addiu	a3,a3,11096
do_fork():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:580

	proc->parent = current;
	list_init(&(proc->thread_group));
	assert(current->wait_state == 0);

	assert(current->time_slice >= 0);
8000f498:	3c048002 	lui	a0,0x8002
8000f49c:	3c068002 	lui	a2,0x8002
8000f4a0:	3c078002 	lui	a3,0x8002
8000f4a4:	24842a98 	addiu	a0,a0,10904
8000f4a8:	24050244 	li	a1,580
8000f4ac:	24c60e28 	addiu	a2,a2,3624
8000f4b0:	0c006b0b 	jal	8001ac2c <__panic>
8000f4b4:	24e72b3c 	addiu	a3,a3,11068
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:578
		goto fork_out;
	}

	proc->parent = current;
	list_init(&(proc->thread_group));
	assert(current->wait_state == 0);
8000f4b8:	3c048002 	lui	a0,0x8002
8000f4bc:	3c068002 	lui	a2,0x8002
8000f4c0:	3c078002 	lui	a3,0x8002
8000f4c4:	24842a98 	addiu	a0,a0,10904
8000f4c8:	24050242 	li	a1,578
8000f4cc:	24c60e28 	addiu	a2,a2,3624
8000f4d0:	0c006b0b 	jal	8001ac2c <__panic>
8000f4d4:	24e72b20 	addiu	a3,a3,11040
setup_kstack():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
8000f4d8:	3c048002 	lui	a0,0x8002
8000f4dc:	3c068002 	lui	a2,0x8002
8000f4e0:	248429ec 	addiu	a0,a0,10732
8000f4e4:	2405006a 	li	a1,106
8000f4e8:	0c006b0b 	jal	8001ac2c <__panic>
8000f4ec:	24c62a74 	addiu	a2,a2,10868

8000f4f0 <do_exit_thread>:
do_exit_thread():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:743
}

// do_exit_thread - kill a single thread
int do_exit_thread(int error_code)
{
	current->exit_code = error_code;
8000f4f0:	3c028015 	lui	v0,0x8015
8000f4f4:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:742
	return do_exit_thread(error_code);
}

// do_exit_thread - kill a single thread
int do_exit_thread(int error_code)
{
8000f4f8:	27bdffe8 	addiu	sp,sp,-24
8000f4fc:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:744
	current->exit_code = error_code;
	return __do_exit();
8000f500:	0c003a29 	jal	8000e8a4 <__do_exit>
8000f504:	ac440080 	sw	a0,128(v0)

8000f508 <do_exit>:
do_exit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:726
	      current->exit_code);
}

// do_exit - kill a thread group, called by syscall or trap handler
int do_exit(int error_code)
{
8000f508:	27bdffd8 	addiu	sp,sp,-40
8000f50c:	afb20020 	sw	s2,32(sp)
8000f510:	afb1001c 	sw	s1,28(sp)
8000f514:	afb00018 	sw	s0,24(sp)
8000f518:	afbf0024 	sw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:728
	bool intr_flag;
	local_intr_save(intr_flag);
8000f51c:	0c00378f 	jal	8000de3c <__intr_save>
8000f520:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:730
	{
		list_entry_t *list = &(current->thread_group), *le = list;
8000f524:	3c038015 	lui	v1,0x8015
8000f528:	8c7277a4 	lw	s2,30628(v1)
8000f52c:	26520094 	addiu	s2,s2,148
8000f530:	02408821 	move	s1,s2
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
8000f534:	8e310004 	lw	s1,4(s1)
do_exit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:731
		while ((le = list_next(le)) != list) {
8000f538:	1251000f 	beq	s2,s1,8000f578 <do_exit+0x70>
8000f53c:	00000000 	nop
__do_kill():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1496
}

// __do_kill - kill a process with PCB by set this process's flags with PF_EXITING
static int __do_kill(struct proc_struct *proc, int error_code)
{
	if (!(proc->flags & PF_EXITING)) {
8000f540:	8e23ffc8 	lw	v1,-56(s1)
8000f544:	30640001 	andi	a0,v1,0x1
8000f548:	5480fffb 	bnezl	a0,8000f538 <do_exit+0x30>
8000f54c:	8e310004 	lw	s1,4(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1499
		proc->flags |= PF_EXITING;
		proc->exit_code = error_code;
		if (proc->wait_state & WT_INTERRUPTED) {
8000f550:	8e24fff0 	lw	a0,-16(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1497

// __do_kill - kill a process with PCB by set this process's flags with PF_EXITING
static int __do_kill(struct proc_struct *proc, int error_code)
{
	if (!(proc->flags & PF_EXITING)) {
		proc->flags |= PF_EXITING;
8000f554:	34630001 	ori	v1,v1,0x1
8000f558:	ae23ffc8 	sw	v1,-56(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1499
		proc->exit_code = error_code;
		if (proc->wait_state & WT_INTERRUPTED) {
8000f55c:	0481fff5 	bgez	a0,8000f534 <do_exit+0x2c>
8000f560:	ae30ffec 	sw	s0,-20(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1500
			wakeup_proc(proc);
8000f564:	2624ff6c 	addiu	a0,s1,-148
8000f568:	0c0004f8 	jal	800013e0 <wakeup_proc>
8000f56c:	afa20010 	sw	v0,16(sp)
8000f570:	08003d4d 	j	8000f534 <do_exit+0x2c>
8000f574:	8fa20010 	lw	v0,16(sp)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
8000f578:	10400003 	beqz	v0,8000f588 <do_exit+0x80>
8000f57c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
8000f580:	0c006d00 	jal	8001b400 <intr_enable>
8000f584:	00000000 	nop
do_exit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:737
			struct proc_struct *proc = le2proc(le, thread_group);
			__do_kill(proc, error_code);
		}
	}
	local_intr_restore(intr_flag);
	return do_exit_thread(error_code);
8000f588:	0c003d3c 	jal	8000f4f0 <do_exit_thread>
8000f58c:	02002021 	move	a0,s0

8000f590 <do_execve>:
do_execve():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1183
	put_kargv(i, kargv);
	return ret;
}

int do_execve(const char *filename, const char **argv, const char **envp)
{
8000f590:	27bdfde8 	addiu	sp,sp,-536
8000f594:	afb001f0 	sw	s0,496(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1186
	static_assert(EXEC_MAX_ARG_LEN >= FS_MAX_FPATH_LEN);

	struct mm_struct *mm = current->mm;
8000f598:	3c108015 	lui	s0,0x8015
8000f59c:	8e0277a4 	lw	v0,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1183
	put_kargv(i, kargv);
	return ret;
}

int do_execve(const char *filename, const char **argv, const char **envp)
{
8000f5a0:	afb201f8 	sw	s2,504(sp)
8000f5a4:	afb40200 	sw	s4,512(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1186
	static_assert(EXEC_MAX_ARG_LEN >= FS_MAX_FPATH_LEN);

	struct mm_struct *mm = current->mm;
8000f5a8:	8c520020 	lw	s2,32(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1183
	put_kargv(i, kargv);
	return ret;
}

int do_execve(const char *filename, const char **argv, const char **envp)
{
8000f5ac:	afb301fc 	sw	s3,508(sp)
8000f5b0:	afb101f4 	sw	s1,500(sp)
8000f5b4:	0080a021 	move	s4,a0
8000f5b8:	00a08821 	move	s1,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1189
	static_assert(EXEC_MAX_ARG_LEN >= FS_MAX_FPATH_LEN);

	struct mm_struct *mm = current->mm;

	char local_name[PROC_NAME_LEN + 1];
	memset(local_name, 0, sizeof(local_name));
8000f5bc:	27a40024 	addiu	a0,sp,36
8000f5c0:	00002821 	move	a1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1183
	put_kargv(i, kargv);
	return ret;
}

int do_execve(const char *filename, const char **argv, const char **envp)
{
8000f5c4:	00c09821 	move	s3,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1189
	static_assert(EXEC_MAX_ARG_LEN >= FS_MAX_FPATH_LEN);

	struct mm_struct *mm = current->mm;

	char local_name[PROC_NAME_LEN + 1];
	memset(local_name, 0, sizeof(local_name));
8000f5c8:	24060010 	li	a2,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1183
	put_kargv(i, kargv);
	return ret;
}

int do_execve(const char *filename, const char **argv, const char **envp)
{
8000f5cc:	afbf0214 	sw	ra,532(sp)
8000f5d0:	afbe0210 	sw	s8,528(sp)
8000f5d4:	afb7020c 	sw	s7,524(sp)
8000f5d8:	afb60208 	sw	s6,520(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1189
	static_assert(EXEC_MAX_ARG_LEN >= FS_MAX_FPATH_LEN);

	struct mm_struct *mm = current->mm;

	char local_name[PROC_NAME_LEN + 1];
	memset(local_name, 0, sizeof(local_name));
8000f5dc:	0c005c52 	jal	80017148 <memset>
8000f5e0:	afb50204 	sw	s5,516(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1195

	char *kargv[EXEC_MAX_ARG_NUM], *kenvp[EXEC_MAX_ENV_NUM];
	const char *path;

	int ret = -E_INVAL;
	lock_mm(mm);
8000f5e4:	0c004c26 	jal	80013098 <lock_mm>
8000f5e8:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1207
			unlock_mm(mm);
			return ret;
		}
	}
#endif
	snprintf(local_name, sizeof(local_name), "<null> %d", current->pid);
8000f5ec:	8e0277a4 	lw	v0,30628(s0)
8000f5f0:	3c068002 	lui	a2,0x8002
8000f5f4:	27a40024 	addiu	a0,sp,36
8000f5f8:	8c470004 	lw	a3,4(v0)
8000f5fc:	24050010 	li	a1,16
8000f600:	0c005b40 	jal	80016d00 <snprintf>
8000f604:	24c62b70 	addiu	a2,a2,11120
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1210

	int argc = 0, envc = 0;
	if ((ret = copy_kargv(mm, kargv, argv, EXEC_MAX_ARG_NUM, &argc)) != 0) {
8000f608:	02402021 	move	a0,s2
8000f60c:	02203021 	move	a2,s1
8000f610:	27a5015c 	addiu	a1,sp,348
8000f614:	27a70020 	addiu	a3,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1209
		}
	}
#endif
	snprintf(local_name, sizeof(local_name), "<null> %d", current->pid);

	int argc = 0, envc = 0;
8000f618:	afa00020 	sw	zero,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1210
	if ((ret = copy_kargv(mm, kargv, argv, EXEC_MAX_ARG_NUM, &argc)) != 0) {
8000f61c:	0c00381f 	jal	8000e07c <copy_kargv.constprop.3>
8000f620:	afa0001c 	sw	zero,28(sp)
8000f624:	00408821 	move	s1,v0
8000f628:	144000a1 	bnez	v0,8000f8b0 <do_execve+0x320>
8000f62c:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1214
		unlock_mm(mm);
		return ret;
	}
	if ((ret = copy_kargv(mm, kenvp, envp, EXEC_MAX_ENV_NUM, &envc)) != 0) {
8000f630:	27a500dc 	addiu	a1,sp,220
8000f634:	02603021 	move	a2,s3
8000f638:	0c00381f 	jal	8000e07c <copy_kargv.constprop.3>
8000f63c:	27a7001c 	addiu	a3,sp,28
8000f640:	00408821 	move	s1,v0
8000f644:	14400088 	bnez	v0,8000f868 <do_execve+0x2d8>
8000f648:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1232
		kprintf("## %08x %s\n", kenvp[i], kenvp[i]);
#endif
	//path = argv[0];
	//copy_from_user (mm, &path, argv, sizeof (char*), 0);
	path = filename;
	unlock_mm(mm);
8000f64c:	0c004c37 	jal	800130dc <unlock_mm>
8000f650:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1240
	//fs_closeall(current->fs_struct);

	/* sysfile_open will check the first argument path, thus we have to use a user-space pointer, and argv[0] may be incorrect */

	int fd;
	if ((ret = fd = sysfile_open(path, O_RDONLY)) < 0) {
8000f654:	02802021 	move	a0,s4
8000f658:	0c0033df 	jal	8000cf7c <sysfile_open>
8000f65c:	00002821 	move	a1,zero
8000f660:	0440020f 	bltz	v0,8000fea0 <do_execve+0x910>
8000f664:	0040a021 	move	s4,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1244
		goto execve_exit;
	}

	if (mm != NULL) {
8000f668:	124000d6 	beqz	s2,8000f9c4 <do_execve+0x434>
8000f66c:	2402ffff 	li	v0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1245
		mm->lapic = -1;
8000f670:	ae420048 	sw	v0,72(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1246
		mp_set_mm_pagetable(NULL);
8000f674:	0c007c61 	jal	8001f184 <mp_set_mm_pagetable>
8000f678:	00002021 	move	a0,zero
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8000f67c:	40026000 	mfc0	v0,c0_status
8000f680:	30420001 	andi	v0,v0,0x1
8000f684:	14400099 	bnez	v0,8000f8ec <do_execve+0x35c>
8000f688:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
8000f68c:	8e42001c 	lw	v0,28(s2)
8000f690:	2442ffff 	addiu	v0,v0,-1
8000f694:	ae42001c 	sw	v0,28(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
8000f698:	8e42001c 	lw	v0,28(s2)
do_execve():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1247
		if (mm_count_dec(mm) == 0) {
8000f69c:	1040009c 	beqz	v0,8000f910 <do_execve+0x380>
8000f6a0:	8e0477a4 	lw	a0,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1258
				list_del(&(mm->proc_mm_link));
			}
			local_intr_restore(intr_flag);
			mm_destroy(mm);
		}
		current->mm = NULL;
8000f6a4:	ac800020 	sw	zero,32(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1260
	}
	put_sem_queue(current);
8000f6a8:	0c0039c4 	jal	8000e710 <put_sem_queue>
8000f6ac:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1264

	ret = -E_NO_MEM;
	/* init signal */
	put_sighand(current);
8000f6b0:	0c0039a2 	jal	8000e688 <put_sighand>
8000f6b4:	8e0477a4 	lw	a0,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1265
	if ((current->signal_info.sighand = sighand_create()) == NULL) {
8000f6b8:	0c004572 	jal	800115c8 <sighand_create>
8000f6bc:	8e1277a4 	lw	s2,30628(s0)
8000f6c0:	10400122 	beqz	v0,8000fb4c <do_execve+0x5bc>
8000f6c4:	ae4200c4 	sw	v0,196(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1268
		goto execve_exit;
	}
	sighand_count_inc(current->signal_info.sighand);
8000f6c8:	3c028015 	lui	v0,0x8015
8000f6cc:	8c4277a4 	lw	v0,30628(v0)
8000f6d0:	8c5200c4 	lw	s2,196(v0)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8000f6d4:	40026000 	mfc0	v0,c0_status
8000f6d8:	30420001 	andi	v0,v0,0x1
8000f6dc:	144000a5 	bnez	v0,8000f974 <do_execve+0x3e4>
8000f6e0:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8000f6e4:	8e420000 	lw	v0,0(s2)
8000f6e8:	24420001 	addiu	v0,v0,1
8000f6ec:	ae420000 	sw	v0,0(s2)
do_execve():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1270

	put_signal(current);
8000f6f0:	8e0477a4 	lw	a0,30628(s0)
sighand_count_inc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
8000f6f4:	8e420000 	lw	v0,0(s2)
do_execve():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1270
8000f6f8:	0c0039e7 	jal	8000e79c <put_signal>
8000f6fc:	3c128015 	lui	s2,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1271
	if ((current->signal_info.signal = signal_create()) == NULL) {
8000f700:	0c00454d 	jal	80011534 <signal_create>
8000f704:	8e1377a4 	lw	s3,30628(s0)
8000f708:	10400110 	beqz	v0,8000fb4c <do_execve+0x5bc>
8000f70c:	ae6200c0 	sw	v0,192(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1274
		goto execve_exit;
	}
	signal_count_inc(current->signal_info.signal);
8000f710:	8e5377a4 	lw	s3,30628(s2)
8000f714:	8e7500c0 	lw	s5,192(s3)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8000f718:	40026000 	mfc0	v0,c0_status
8000f71c:	30420001 	andi	v0,v0,0x1
8000f720:	1440008b 	bnez	v0,8000f950 <do_execve+0x3c0>
8000f724:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8000f728:	8ea20000 	lw	v0,0(s5)
8000f72c:	24420001 	addiu	v0,v0,1
8000f730:	aea20000 	sw	v0,0(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
8000f734:	8ea20000 	lw	v0,0(s5)
do_execve():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1276

	if ((current->sem_queue = sem_queue_create()) == NULL) {
8000f738:	0c006748 	jal	80019d20 <sem_queue_create>
8000f73c:	00000000 	nop
8000f740:	10400102 	beqz	v0,8000fb4c <do_execve+0x5bc>
8000f744:	ae6200ac 	sw	v0,172(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1279
		goto execve_exit;
	}
	sem_queue_count_inc(current->sem_queue);
8000f748:	8e0277a4 	lw	v0,30628(s0)
8000f74c:	8c5200ac 	lw	s2,172(v0)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8000f750:	40026000 	mfc0	v0,c0_status
8000f754:	30420001 	andi	v0,v0,0x1
8000f758:	1440008f 	bnez	v0,8000f998 <do_execve+0x408>
8000f75c:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8000f760:	8e420014 	lw	v0,20(s2)
8000f764:	24420001 	addiu	v0,v0,1
8000f768:	ae420014 	sw	v0,20(s2)
do_execve():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1281

	if ((ret = load_icode(fd, argc, kargv, envc, kenvp)) != 0) {
8000f76c:	8fb60020 	lw	s6,32(sp)
sem_queue_count_inc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
8000f770:	8e420014 	lw	v0,20(s2)
load_icode():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:860

//#endif //UCONFIG_BIONIC_LIBC

static int load_icode(int fd, int argc, char **kargv, int envc, char **kenvp)
{
	assert(argc >= 0 && argc <= EXEC_MAX_ARG_NUM);
8000f774:	2ec20021 	sltiu	v0,s6,33
8000f778:	104001c1 	beqz	v0,8000fe80 <do_execve+0x8f0>
8000f77c:	8fb5001c 	lw	s5,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:861
	assert(envc >= 0 && envc <= EXEC_MAX_ENV_NUM);
8000f780:	2ea20021 	sltiu	v0,s5,33
8000f784:	104001b6 	beqz	v0,8000fe60 <do_execve+0x8d0>
8000f788:	8e0277a4 	lw	v0,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:862
	if (current->mm != NULL) {
8000f78c:	8c420020 	lw	v0,32(v0)
8000f790:	144001ae 	bnez	v0,8000fe4c <do_execve+0x8bc>
8000f794:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:873
//#ifdef UCONFIG_BIONIC_LIBC
	uint32_t real_entry;
//#endif //UCONFIG_BIONIC_LIBC

	struct mm_struct *mm;
	if ((mm = mm_create()) == NULL) {
8000f798:	0c004c58 	jal	80013160 <mm_create>
8000f79c:	00000000 	nop
8000f7a0:	104000ea 	beqz	v0,8000fb4c <do_execve+0x5bc>
8000f7a4:	00409821 	move	s3,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:877
		goto bad_mm;
	}

	if (setup_pgdir(mm) != 0) {
8000f7a8:	0c003976 	jal	8000e5d8 <setup_pgdir>
8000f7ac:	00402021 	move	a0,v0
8000f7b0:	14400082 	bnez	v0,8000f9bc <do_execve+0x42c>
8000f7b4:	02802021 	move	a0,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:881
		goto bad_pgdir_cleanup_mm;
	}

	mm->brk_start = 0;
8000f7b8:	ae600024 	sw	zero,36(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:886

	struct Page *page;

	struct elfhdr __elf, *elf = &__elf;
	if ((ret = load_icode_read(fd, elf, sizeof(struct elfhdr), 0)) != 0) {
8000f7bc:	27a500a8 	addiu	a1,sp,168
8000f7c0:	24060034 	li	a2,52
8000f7c4:	0c0037f9 	jal	8000dfe4 <load_icode_read>
8000f7c8:	00003821 	move	a3,zero
8000f7cc:	14400006 	bnez	v0,8000f7e8 <do_execve+0x258>
8000f7d0:	00409021 	move	s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:890
		goto bad_elf_cleanup_pgdir;
	}

	if (elf->e_magic != ELF_MAGIC) {
8000f7d4:	8fa300a8 	lw	v1,168(sp)
8000f7d8:	3c02464c 	lui	v0,0x464c
8000f7dc:	2442457f 	addiu	v0,v0,17791
8000f7e0:	10620083 	beq	v1,v0,8000f9f0 <do_execve+0x460>
8000f7e4:	2412fff8 	li	s2,-8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1126
out:
	return ret;
bad_cleanup_mmap:
	exit_mmap(mm);
bad_elf_cleanup_pgdir:
	put_pgdir(mm);
8000f7e8:	0c0037d6 	jal	8000df58 <put_pgdir>
8000f7ec:	02602021 	move	a0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1128
bad_pgdir_cleanup_mm:
	mm_destroy(mm);
8000f7f0:	0c004d61 	jal	80013584 <mm_destroy>
8000f7f4:	02602021 	move	a0,s3
do_execve():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1281
	if ((current->sem_queue = sem_queue_create()) == NULL) {
		goto execve_exit;
	}
	sem_queue_count_inc(current->sem_queue);

	if ((ret = load_icode(fd, argc, kargv, envc, kenvp)) != 0) {
8000f7f8:	564000d5 	bnezl	s2,8000fb50 <do_execve+0x5c0>
8000f7fc:	02408821 	move	s1,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1285
		goto execve_exit;
	}

	set_proc_name(current, local_name);
8000f800:	8e0477a4 	lw	a0,30628(s0)
8000f804:	0c003aee 	jal	8000ebb8 <set_proc_name>
8000f808:	27a50024 	addiu	a1,sp,36
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1287

	if (do_execve_arch_hook(argc, kargv) < 0)
8000f80c:	8fa40020 	lw	a0,32(sp)
8000f810:	0c007a74 	jal	8001e9d0 <do_execve_arch_hook>
8000f814:	27a5015c 	addiu	a1,sp,348
8000f818:	044000ce 	bltz	v0,8000fb54 <do_execve+0x5c4>
8000f81c:	8fa40020 	lw	a0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1290
		goto execve_exit;

	put_kargv(argc, kargv);
8000f820:	0c0037c3 	jal	8000df0c <put_kargv>
8000f824:	27a5015c 	addiu	a1,sp,348
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1291
	put_kargv(envc, kenvp);
8000f828:	8fa4001c 	lw	a0,28(sp)
8000f82c:	0c0037c3 	jal	8000df0c <put_kargv>
8000f830:	27a500dc 	addiu	a1,sp,220
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1301
	put_kargv(envc, kenvp);
/* exec should return -1 if failed */
	//return ret;
	do_exit(ret);
	panic("already exit: %e.\n", ret);
}
8000f834:	8fbf0214 	lw	ra,532(sp)
8000f838:	02201021 	move	v0,s1
8000f83c:	8fbe0210 	lw	s8,528(sp)
8000f840:	8fb7020c 	lw	s7,524(sp)
8000f844:	8fb60208 	lw	s6,520(sp)
8000f848:	8fb50204 	lw	s5,516(sp)
8000f84c:	8fb40200 	lw	s4,512(sp)
8000f850:	8fb301fc 	lw	s3,508(sp)
8000f854:	8fb201f8 	lw	s2,504(sp)
8000f858:	8fb101f4 	lw	s1,500(sp)
8000f85c:	8fb001f0 	lw	s0,496(sp)
8000f860:	03e00008 	jr	ra
8000f864:	27bd0218 	addiu	sp,sp,536
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1215
	if ((ret = copy_kargv(mm, kargv, argv, EXEC_MAX_ARG_NUM, &argc)) != 0) {
		unlock_mm(mm);
		return ret;
	}
	if ((ret = copy_kargv(mm, kenvp, envp, EXEC_MAX_ENV_NUM, &envc)) != 0) {
		unlock_mm(mm);
8000f868:	0c004c37 	jal	800130dc <unlock_mm>
8000f86c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1216
		put_kargv(argc, kargv);
8000f870:	8fa40020 	lw	a0,32(sp)
8000f874:	0c0037c3 	jal	8000df0c <put_kargv>
8000f878:	27a5015c 	addiu	a1,sp,348
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1301
	put_kargv(envc, kenvp);
/* exec should return -1 if failed */
	//return ret;
	do_exit(ret);
	panic("already exit: %e.\n", ret);
}
8000f87c:	8fbf0214 	lw	ra,532(sp)
8000f880:	02201021 	move	v0,s1
8000f884:	8fbe0210 	lw	s8,528(sp)
8000f888:	8fb7020c 	lw	s7,524(sp)
8000f88c:	8fb60208 	lw	s6,520(sp)
8000f890:	8fb50204 	lw	s5,516(sp)
8000f894:	8fb40200 	lw	s4,512(sp)
8000f898:	8fb301fc 	lw	s3,508(sp)
8000f89c:	8fb201f8 	lw	s2,504(sp)
8000f8a0:	8fb101f4 	lw	s1,500(sp)
8000f8a4:	8fb001f0 	lw	s0,496(sp)
8000f8a8:	03e00008 	jr	ra
8000f8ac:	27bd0218 	addiu	sp,sp,536
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1211
#endif
	snprintf(local_name, sizeof(local_name), "<null> %d", current->pid);

	int argc = 0, envc = 0;
	if ((ret = copy_kargv(mm, kargv, argv, EXEC_MAX_ARG_NUM, &argc)) != 0) {
		unlock_mm(mm);
8000f8b0:	0c004c37 	jal	800130dc <unlock_mm>
8000f8b4:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1301
	put_kargv(envc, kenvp);
/* exec should return -1 if failed */
	//return ret;
	do_exit(ret);
	panic("already exit: %e.\n", ret);
}
8000f8b8:	8fbf0214 	lw	ra,532(sp)
8000f8bc:	02201021 	move	v0,s1
8000f8c0:	8fbe0210 	lw	s8,528(sp)
8000f8c4:	8fb7020c 	lw	s7,524(sp)
8000f8c8:	8fb60208 	lw	s6,520(sp)
8000f8cc:	8fb50204 	lw	s5,516(sp)
8000f8d0:	8fb40200 	lw	s4,512(sp)
8000f8d4:	8fb301fc 	lw	s3,508(sp)
8000f8d8:	8fb201f8 	lw	s2,504(sp)
8000f8dc:	8fb101f4 	lw	s1,500(sp)
8000f8e0:	8fb001f0 	lw	s0,496(sp)
8000f8e4:	03e00008 	jr	ra
8000f8e8:	27bd0218 	addiu	sp,sp,536
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8000f8ec:	0c006d04 	jal	8001b410 <intr_disable>
8000f8f0:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8000f8f4:	8e42001c 	lw	v0,28(s2)
8000f8f8:	2442ffff 	addiu	v0,v0,-1
8000f8fc:	ae42001c 	sw	v0,28(s2)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000f900:	0c006d00 	jal	8001b400 <intr_enable>
8000f904:	00000000 	nop
8000f908:	08003da6 	j	8000f698 <do_execve+0x108>
8000f90c:	00000000 	nop
do_execve():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1248

	if (mm != NULL) {
		mm->lapic = -1;
		mp_set_mm_pagetable(NULL);
		if (mm_count_dec(mm) == 0) {
			exit_mmap(mm);
8000f910:	0c004ff0 	jal	80013fc0 <exit_mmap>
8000f914:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1249
			put_pgdir(mm);
8000f918:	0c0037d6 	jal	8000df58 <put_pgdir>
8000f91c:	02402021 	move	a0,s2
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8000f920:	40026000 	mfc0	v0,c0_status
8000f924:	30420001 	andi	v0,v0,0x1
8000f928:	14400028 	bnez	v0,8000f9cc <do_execve+0x43c>
8000f92c:	00000000 	nop
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
8000f930:	8e43002c 	lw	v1,44(s2)
8000f934:	8e420030 	lw	v0,48(s2)
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
8000f938:	ac620004 	sw	v0,4(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:170
	next->prev = prev;
8000f93c:	ac430000 	sw	v1,0(v0)
do_execve():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1256
			local_intr_save(intr_flag);
			{
				list_del(&(mm->proc_mm_link));
			}
			local_intr_restore(intr_flag);
			mm_destroy(mm);
8000f940:	0c004d61 	jal	80013584 <mm_destroy>
8000f944:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1258
		}
		current->mm = NULL;
8000f948:	08003da9 	j	8000f6a4 <do_execve+0x114>
8000f94c:	8e0477a4 	lw	a0,30628(s0)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8000f950:	0c006d04 	jal	8001b410 <intr_disable>
8000f954:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
8000f958:	8ea20000 	lw	v0,0(s5)
8000f95c:	24420001 	addiu	v0,v0,1
8000f960:	aea20000 	sw	v0,0(s5)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000f964:	0c006d00 	jal	8001b400 <intr_enable>
8000f968:	00000000 	nop
8000f96c:	08003dcd 	j	8000f734 <do_execve+0x1a4>
8000f970:	8e5377a4 	lw	s3,30628(s2)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8000f974:	0c006d04 	jal	8001b410 <intr_disable>
8000f978:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
8000f97c:	8e420000 	lw	v0,0(s2)
8000f980:	24420001 	addiu	v0,v0,1
8000f984:	ae420000 	sw	v0,0(s2)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000f988:	0c006d00 	jal	8001b400 <intr_enable>
8000f98c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1270
	if ((current->signal_info.sighand = sighand_create()) == NULL) {
		goto execve_exit;
	}
	sighand_count_inc(current->signal_info.sighand);

	put_signal(current);
8000f990:	08003dbd 	j	8000f6f4 <do_execve+0x164>
8000f994:	8e0477a4 	lw	a0,30628(s0)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8000f998:	0c006d04 	jal	8001b410 <intr_disable>
8000f99c:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
8000f9a0:	8e420014 	lw	v0,20(s2)
8000f9a4:	24420001 	addiu	v0,v0,1
8000f9a8:	ae420014 	sw	v0,20(s2)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000f9ac:	0c006d00 	jal	8001b400 <intr_enable>
8000f9b0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1281
	if ((current->sem_queue = sem_queue_create()) == NULL) {
		goto execve_exit;
	}
	sem_queue_count_inc(current->sem_queue);

	if ((ret = load_icode(fd, argc, kargv, envc, kenvp)) != 0) {
8000f9b4:	08003ddc 	j	8000f770 <do_execve+0x1e0>
8000f9b8:	8fb60020 	lw	s6,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:866
	assert(envc >= 0 && envc <= EXEC_MAX_ENV_NUM);
	if (current->mm != NULL) {
		panic("load_icode: current->mm must be empty.\n");
	}

	int ret = -E_NO_MEM;
8000f9bc:	08003dfc 	j	8000f7f0 <do_execve+0x260>
8000f9c0:	2412fff4 	li	s2,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1244
	int fd;
	if ((ret = fd = sysfile_open(path, O_RDONLY)) < 0) {
		goto execve_exit;
	}

	if (mm != NULL) {
8000f9c4:	08003daa 	j	8000f6a8 <do_execve+0x118>
8000f9c8:	8e0477a4 	lw	a0,30628(s0)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8000f9cc:	0c006d04 	jal	8001b410 <intr_disable>
8000f9d0:	00000000 	nop
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
8000f9d4:	8e43002c 	lw	v1,44(s2)
8000f9d8:	8e420030 	lw	v0,48(s2)
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
8000f9dc:	ac620004 	sw	v0,4(v1)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000f9e0:	0c006d00 	jal	8001b400 <intr_enable>
8000f9e4:	ac430000 	sw	v1,0(v0)
8000f9e8:	08003e50 	j	8000f940 <do_execve+0x3b0>
8000f9ec:	00000000 	nop
load_icode():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:908

//#ifdef UCONFIG_BIONIC_LIBC
	uint32_t is_dynamic = 0, interp_idx;
	uint32_t bias = 0;
//#endif //UCONFIG_BIONIC_LIBC
	for (phnum = 0; phnum < elf->e_phnum; phnum++) {
8000f9f0:	97a200d4 	lhu	v0,212(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:906
	uint32_t vm_flags, phnum;
	pte_perm_t perm = 0;

//#ifdef UCONFIG_BIONIC_LIBC
	uint32_t is_dynamic = 0, interp_idx;
	uint32_t bias = 0;
8000f9f4:	afa00018 	sw	zero,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:908
//#endif //UCONFIG_BIONIC_LIBC
	for (phnum = 0; phnum < elf->e_phnum; phnum++) {
8000f9f8:	10400034 	beqz	v0,8000facc <do_execve+0x53c>
8000f9fc:	afa001e0 	sw	zero,480(sp)
8000fa00:	08003e89 	j	8000fa24 <do_execve+0x494>
8000fa04:	0000b821 	move	s7,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:922
			is_dynamic = 1;
			interp_idx = phnum;
			continue;
		}

		if (ph->p_type != ELF_PT_LOAD) {
8000fa08:	10430016 	beq	v0,v1,8000fa64 <do_execve+0x4d4>
8000fa0c:	8fa20068 	lw	v0,104(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:908

//#ifdef UCONFIG_BIONIC_LIBC
	uint32_t is_dynamic = 0, interp_idx;
	uint32_t bias = 0;
//#endif //UCONFIG_BIONIC_LIBC
	for (phnum = 0; phnum < elf->e_phnum; phnum++) {
8000fa10:	97a200d4 	lhu	v0,212(sp)
8000fa14:	26f70001 	addiu	s7,s7,1
8000fa18:	02e2102b 	sltu	v0,s7,v0
8000fa1c:	5040002c 	beqzl	v0,8000fad0 <do_execve+0x540>
8000fa20:	8e620024 	lw	v0,36(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:910
		off_t phoff = elf->e_phoff + sizeof(struct proghdr) * phnum;
		if ((ret =
8000fa24:	8fa200c4 	lw	v0,196(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1182
failed_cleanup:
	put_kargv(i, kargv);
	return ret;
}

int do_execve(const char *filename, const char **argv, const char **envp)
8000fa28:	00173940 	sll	a3,s7,0x5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:910
	uint32_t is_dynamic = 0, interp_idx;
	uint32_t bias = 0;
//#endif //UCONFIG_BIONIC_LIBC
	for (phnum = 0; phnum < elf->e_phnum; phnum++) {
		off_t phoff = elf->e_phoff + sizeof(struct proghdr) * phnum;
		if ((ret =
8000fa2c:	02802021 	move	a0,s4
8000fa30:	27a50054 	addiu	a1,sp,84
8000fa34:	24060020 	li	a2,32
8000fa38:	0c0037f9 	jal	8000dfe4 <load_icode_read>
8000fa3c:	00e23821 	addu	a3,a3,v0
8000fa40:	1440001e 	bnez	v0,8000fabc <do_execve+0x52c>
8000fa44:	00409021 	move	s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:916
		     load_icode_read(fd, ph, sizeof(struct proghdr),
				     phoff)) != 0) {
			goto bad_cleanup_mmap;
		}

		if (ph->p_type == ELF_PT_INTERP) {
8000fa48:	8fa20054 	lw	v0,84(sp)
8000fa4c:	24030003 	li	v1,3
8000fa50:	1443ffed 	bne	v0,v1,8000fa08 <do_execve+0x478>
8000fa54:	24030001 	li	v1,1
8000fa58:	02e0f021 	move	s8,s7
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:917
			is_dynamic = 1;
8000fa5c:	08003e84 	j	8000fa10 <do_execve+0x480>
8000fa60:	afa301e0 	sw	v1,480(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:925
		}

		if (ph->p_type != ELF_PT_LOAD) {
			continue;
		}
		if (ph->p_filesz > ph->p_memsz) {
8000fa64:	8fa30064 	lw	v1,100(sp)
8000fa68:	0043102b 	sltu	v0,v0,v1
8000fa6c:	1440006f 	bnez	v0,8000fc2c <do_execve+0x69c>
8000fa70:	8fa2005c 	lw	v0,92(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:930
			ret = -E_INVAL_ELF;
			goto bad_cleanup_mmap;
		}

		if (ph->p_va == 0 && !bias) {
8000fa74:	8fa30018 	lw	v1,24(sp)
8000fa78:	00621025 	or	v0,v1,v0
8000fa7c:	14400003 	bnez	v0,8000fa8c <do_execve+0x4fc>
8000fa80:	02802021 	move	a0,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:931
			bias = 0x30800000;
8000fa84:	3c063080 	lui	a2,0x3080
8000fa88:	afa60018 	sw	a2,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:934
		}

		if ((ret = map_ph(fd, ph, mm, &bias, 0)) != 0) {
8000fa8c:	27a50054 	addiu	a1,sp,84
8000fa90:	02603021 	move	a2,s3
8000fa94:	27a70018 	addiu	a3,sp,24
8000fa98:	0c00387c 	jal	8000e1f0 <map_ph>
8000fa9c:	afa00010 	sw	zero,16(sp)
8000faa0:	1040ffdb 	beqz	v0,8000fa10 <do_execve+0x480>
8000faa4:	00409021 	move	s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:935
			kprintf("load address: 0x%08x size: %d\n", ph->p_va,
8000faa8:	8fa5005c 	lw	a1,92(sp)
8000faac:	8fa60068 	lw	a2,104(sp)
8000fab0:	3c048002 	lui	a0,0x8002
8000fab4:	0c007a9e 	jal	8001ea78 <kprintf>
8000fab8:	24842bf4 	addiu	a0,a0,11252
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1124
#endif //UCONFIG_BIONIC_LIBC
	ret = 0;
out:
	return ret;
bad_cleanup_mmap:
	exit_mmap(mm);
8000fabc:	0c004ff0 	jal	80013fc0 <exit_mmap>
8000fac0:	02602021 	move	a0,s3
8000fac4:	08003dfa 	j	8000f7e8 <do_execve+0x258>
8000fac8:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1013
		   }
		 */
	  /**************************************/
	}

	mm->brk_start = mm->brk = ROUNDUP(mm->brk_start, PGSIZE);
8000facc:	8e620024 	lw	v0,36(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1017

	/* setup user stack */
	vm_flags = VM_READ | VM_WRITE | VM_STACK;
	if ((ret =
8000fad0:	02602021 	move	a0,s3
8000fad4:	3c057fff 	lui	a1,0x7fff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1013
		   }
		 */
	  /**************************************/
	}

	mm->brk_start = mm->brk = ROUNDUP(mm->brk_start, PGSIZE);
8000fad8:	24420fff 	addiu	v0,v0,4095
8000fadc:	30430fff 	andi	v1,v0,0xfff
8000fae0:	00431023 	subu	v0,v0,v1
8000fae4:	ae620028 	sw	v0,40(s3)
8000fae8:	ae620024 	sw	v0,36(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1017

	/* setup user stack */
	vm_flags = VM_READ | VM_WRITE | VM_STACK;
	if ((ret =
8000faec:	3c060001 	lui	a2,0x1
8000faf0:	2407000b 	li	a3,11
8000faf4:	0c004e4a 	jal	80013928 <mm_map>
8000faf8:	afa00010 	sw	zero,16(sp)
8000fafc:	1440ffef 	bnez	v0,8000fabc <do_execve+0x52c>
8000fb00:	00409021 	move	s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1023
	     mm_map(mm, USTACKTOP - USTACKSIZE, USTACKSIZE, vm_flags,
		    NULL)) != 0) {
		goto bad_cleanup_mmap;
	}

	if (is_dynamic) {
8000fb04:	8fa301e0 	lw	v1,480(sp)
8000fb08:	1060001d 	beqz	v1,8000fb80 <do_execve+0x5f0>
8000fb0c:	8fa300c0 	lw	v1,192(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1024
		elf->e_entry += bias;
8000fb10:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1029

		bias = 0;

		off_t phoff =
		    elf->e_phoff + sizeof(struct proghdr) * interp_idx;
8000fb14:	001e3940 	sll	a3,s8,0x5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1030
		if ((ret =
8000fb18:	02802021 	move	a0,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1024
		    NULL)) != 0) {
		goto bad_cleanup_mmap;
	}

	if (is_dynamic) {
		elf->e_entry += bias;
8000fb1c:	00621021 	addu	v0,v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1030

		bias = 0;

		off_t phoff =
		    elf->e_phoff + sizeof(struct proghdr) * interp_idx;
		if ((ret =
8000fb20:	8fa300c4 	lw	v1,196(sp)
8000fb24:	27a50054 	addiu	a1,sp,84
8000fb28:	24060020 	li	a2,32
8000fb2c:	00e33821 	addu	a3,a3,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1024
		    NULL)) != 0) {
		goto bad_cleanup_mmap;
	}

	if (is_dynamic) {
		elf->e_entry += bias;
8000fb30:	afa200c0 	sw	v0,192(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1030

		bias = 0;

		off_t phoff =
		    elf->e_phoff + sizeof(struct proghdr) * interp_idx;
		if ((ret =
8000fb34:	0c0037f9 	jal	8000dfe4 <load_icode_read>
8000fb38:	afa00018 	sw	zero,24(sp)
8000fb3c:	10400053 	beqz	v0,8000fc8c <do_execve+0x6fc>
8000fb40:	00000000 	nop
8000fb44:	08003eaf 	j	8000fabc <do_execve+0x52c>
8000fb48:	00409021 	move	s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:866
	assert(envc >= 0 && envc <= EXEC_MAX_ENV_NUM);
	if (current->mm != NULL) {
		panic("load_icode: current->mm must be empty.\n");
	}

	int ret = -E_NO_MEM;
8000fb4c:	2411fff4 	li	s1,-12
do_execve():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1295
	put_kargv(argc, kargv);
	put_kargv(envc, kenvp);
	return 0;

execve_exit:
	put_kargv(argc, kargv);
8000fb50:	8fa40020 	lw	a0,32(sp)
8000fb54:	0c0037c3 	jal	8000df0c <put_kargv>
8000fb58:	27a5015c 	addiu	a1,sp,348
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1296
	put_kargv(envc, kenvp);
8000fb5c:	8fa4001c 	lw	a0,28(sp)
8000fb60:	0c0037c3 	jal	8000df0c <put_kargv>
8000fb64:	27a500dc 	addiu	a1,sp,220
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1299
/* exec should return -1 if failed */
	//return ret;
	do_exit(ret);
8000fb68:	0c003d42 	jal	8000f508 <do_exit>
8000fb6c:	02202021 	move	a0,s1
load_icode():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1090
				       1)) == 0);
		}

		real_entry = interp_elf->e_entry + bias;

		sysfile_close(interp_fd);
8000fb70:	0c0033f4 	jal	8000cfd0 <sysfile_close>
8000fb74:	03c02021 	move	a0,s8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1091
		kfree(interp_path);
8000fb78:	0c0054b1 	jal	800152c4 <kfree>
8000fb7c:	8fa401ec 	lw	a0,492(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1094
	}

	sysfile_close(fd);
8000fb80:	0c0033f4 	jal	8000cfd0 <sysfile_close>
8000fb84:	02802021 	move	a0,s4
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8000fb88:	40026000 	mfc0	v0,c0_status
8000fb8c:	30420001 	andi	v0,v0,0x1
8000fb90:	14400031 	bnez	v0,8000fc58 <do_execve+0x6c8>
8000fb94:	3c028015 	lui	v0,0x8015
list_add_after():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:93
 * Insert the new element @elm *after* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_after(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm, listelm->next);
8000fb98:	24427780 	addiu	v0,v0,30592
8000fb9c:	8c430004 	lw	v1,4(v0)
load_icode():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1099

	bool intr_flag;
	local_intr_save(intr_flag);
	{
		list_add(&(proc_mm_list), &(mm->proc_mm_link));
8000fba0:	2664002c 	addiu	a0,s3,44
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
8000fba4:	ac440004 	sw	a0,4(v0)
8000fba8:	ac640000 	sw	a0,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
	elm->next = next;
8000fbac:	ae630030 	sw	v1,48(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->prev = prev;
8000fbb0:	ae62002c 	sw	v0,44(s3)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8000fbb4:	40026000 	mfc0	v0,c0_status
8000fbb8:	30420001 	andi	v0,v0,0x1
8000fbbc:	1440001d 	bnez	v0,8000fc34 <do_execve+0x6a4>
8000fbc0:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
8000fbc4:	8e62001c 	lw	v0,28(s3)
8000fbc8:	24420001 	addiu	v0,v0,1
8000fbcc:	ae62001c 	sw	v0,28(s3)
load_icode():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1103
	}
	local_intr_restore(intr_flag);
	mm_count_inc(mm);
	current->mm = mm;
8000fbd0:	8e0277a4 	lw	v0,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1104
	set_pgdir(current, mm->pgdir);
8000fbd4:	8e650010 	lw	a1,16(s3)
mm_count_inc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
8000fbd8:	8e63001c 	lw	v1,28(s3)
load_icode():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1104
8000fbdc:	00402021 	move	a0,v0
8000fbe0:	0c007900 	jal	8001e400 <set_pgdir>
8000fbe4:	ac530020 	sw	s3,32(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1105
	mm->lapic = pls_read(lapic_id);
8000fbe8:	3c028015 	lui	v0,0x8015
8000fbec:	8c4277b0 	lw	v0,30640(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1106
	mp_set_mm_pagetable(mm);
8000fbf0:	02602021 	move	a0,s3
8000fbf4:	0c007c61 	jal	8001f184 <mp_set_mm_pagetable>
8000fbf8:	ae620048 	sw	v0,72(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1117
	if (init_new_context_dynamic(current, elf, argc, kargv, envc, kenvp,
				     is_dynamic, real_entry, load_address,
				     bias) < 0)
		goto bad_cleanup_mmap;
#else
	if (init_new_context(current, elf, argc, kargv, envc, kenvp) < 0)
8000fbfc:	8e0477a4 	lw	a0,30628(s0)
8000fc00:	27a300dc 	addiu	v1,sp,220
8000fc04:	27a500a8 	addiu	a1,sp,168
8000fc08:	02c03021 	move	a2,s6
8000fc0c:	27a7015c 	addiu	a3,sp,348
8000fc10:	afb50010 	sw	s5,16(sp)
8000fc14:	0c007a39 	jal	8001e8e4 <init_new_context>
8000fc18:	afa30014 	sw	v1,20(sp)
8000fc1c:	0441fef9 	bgez	v0,8000f804 <do_execve+0x274>
8000fc20:	8e0477a4 	lw	a0,30628(s0)
8000fc24:	08003eaf 	j	8000fabc <do_execve+0x52c>
8000fc28:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:926

		if (ph->p_type != ELF_PT_LOAD) {
			continue;
		}
		if (ph->p_filesz > ph->p_memsz) {
			ret = -E_INVAL_ELF;
8000fc2c:	08003eaf 	j	8000fabc <do_execve+0x52c>
8000fc30:	2412fff8 	li	s2,-8
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8000fc34:	0c006d04 	jal	8001b410 <intr_disable>
8000fc38:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8000fc3c:	8e62001c 	lw	v0,28(s3)
8000fc40:	24420001 	addiu	v0,v0,1
8000fc44:	ae62001c 	sw	v0,28(s3)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000fc48:	0c006d00 	jal	8001b400 <intr_enable>
8000fc4c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1103
	{
		list_add(&(proc_mm_list), &(mm->proc_mm_link));
	}
	local_intr_restore(intr_flag);
	mm_count_inc(mm);
	current->mm = mm;
8000fc50:	08003ef5 	j	8000fbd4 <do_execve+0x644>
8000fc54:	8e0277a4 	lw	v0,30628(s0)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8000fc58:	0c006d04 	jal	8001b410 <intr_disable>
8000fc5c:	00000000 	nop
list_add_after():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:93
 * Insert the new element @elm *after* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_after(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm, listelm->next);
8000fc60:	3c028015 	lui	v0,0x8015
8000fc64:	24427780 	addiu	v0,v0,30592
8000fc68:	8c430004 	lw	v1,4(v0)
load_icode():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1099
	sysfile_close(fd);

	bool intr_flag;
	local_intr_save(intr_flag);
	{
		list_add(&(proc_mm_list), &(mm->proc_mm_link));
8000fc6c:	2664002c 	addiu	a0,s3,44
list_add_after():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
8000fc70:	ac440004 	sw	a0,4(v0)
8000fc74:	ac640000 	sw	a0,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
	elm->next = next;
8000fc78:	ae630030 	sw	v1,48(s3)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8000fc7c:	0c006d00 	jal	8001b400 <intr_enable>
8000fc80:	ae62002c 	sw	v0,44(s3)
8000fc84:	08003eed 	j	8000fbb4 <do_execve+0x624>
8000fc88:	00000000 	nop
load_icode():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1036
		     load_icode_read(fd, ph, sizeof(struct proghdr),
				     phoff)) != 0) {
			goto bad_cleanup_mmap;
		}

		char *interp_path = (char *)kmalloc(ph->p_filesz);
8000fc8c:	0c005486 	jal	80015218 <kmalloc>
8000fc90:	8fa40064 	lw	a0,100(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1037
		load_icode_read(fd, interp_path, ph->p_filesz, ph->p_offset);
8000fc94:	8fa60064 	lw	a2,100(sp)
8000fc98:	8fa70058 	lw	a3,88(sp)
8000fc9c:	02802021 	move	a0,s4
8000fca0:	00402821 	move	a1,v0
8000fca4:	0c0037f9 	jal	8000dfe4 <load_icode_read>
8000fca8:	afa201ec 	sw	v0,492(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1039

		int interp_fd = sysfile_open(interp_path, O_RDONLY);
8000fcac:	8fa401ec 	lw	a0,492(sp)
8000fcb0:	0c0033df 	jal	8000cf7c <sysfile_open>
8000fcb4:	00002821 	move	a1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1040
		assert(interp_fd >= 0);
8000fcb8:	04400097 	bltz	v0,8000ff18 <do_execve+0x988>
8000fcbc:	0040f021 	move	s8,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1042
		struct elfhdr interp___elf, *interp_elf = &interp___elf;
		assert((ret =
8000fcc0:	00402021 	move	a0,v0
8000fcc4:	27a50074 	addiu	a1,sp,116
8000fcc8:	24060034 	li	a2,52
8000fccc:	0c0037f9 	jal	8000dfe4 <load_icode_read>
8000fcd0:	00003821 	move	a3,zero
8000fcd4:	14400088 	bnez	v0,8000fef8 <do_execve+0x968>
8000fcd8:	8fa30074 	lw	v1,116(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1045
			load_icode_read(interp_fd, interp_elf,
					sizeof(struct elfhdr), 0)) == 0);
		assert(interp_elf->e_magic == ELF_MAGIC);
8000fcdc:	3c02464c 	lui	v0,0x464c
8000fce0:	2442457f 	addiu	v0,v0,17791
8000fce4:	1462007c 	bne	v1,v0,8000fed8 <do_execve+0x948>
8000fce8:	97a200a0 	lhu	v0,160(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1050

		struct proghdr interp___ph, *interp_ph = &interp___ph;
		uint32_t interp_phnum;
		uint32_t va_min = 0xffffffff, va_max = 0;
		for (interp_phnum = 0; interp_phnum < interp_elf->e_phnum;
8000fcec:	2403ffff 	li	v1,-1
8000fcf0:	afa001e8 	sw	zero,488(sp)
8000fcf4:	10400024 	beqz	v0,8000fd88 <do_execve+0x7f8>
8000fcf8:	afa301e4 	sw	v1,484(sp)
8000fcfc:	27a30034 	addiu	v1,sp,52
8000fd00:	0000b821 	move	s7,zero
8000fd04:	08003f48 	j	8000fd20 <do_execve+0x790>
8000fd08:	afa301e0 	sw	v1,480(sp)
8000fd0c:	97a200a0 	lhu	v0,160(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1051
		     ++interp_phnum) {
8000fd10:	26f70001 	addiu	s7,s7,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1050
		assert(interp_elf->e_magic == ELF_MAGIC);

		struct proghdr interp___ph, *interp_ph = &interp___ph;
		uint32_t interp_phnum;
		uint32_t va_min = 0xffffffff, va_max = 0;
		for (interp_phnum = 0; interp_phnum < interp_elf->e_phnum;
8000fd14:	02e2102b 	sltu	v0,s7,v0
8000fd18:	1040001c 	beqz	v0,8000fd8c <do_execve+0x7fc>
8000fd1c:	8fa301e8 	lw	v1,488(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1055
		     ++interp_phnum) {
			off_t interp_phoff =
			    interp_elf->e_phoff +
			    sizeof(struct proghdr) * interp_phnum;
			assert((ret =
8000fd20:	8fa20090 	lw	v0,144(sp)
8000fd24:	8fa501e0 	lw	a1,480(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1182
failed_cleanup:
	put_kargv(i, kargv);
	return ret;
}

int do_execve(const char *filename, const char **argv, const char **envp)
8000fd28:	00173940 	sll	a3,s7,0x5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1055
		for (interp_phnum = 0; interp_phnum < interp_elf->e_phnum;
		     ++interp_phnum) {
			off_t interp_phoff =
			    interp_elf->e_phoff +
			    sizeof(struct proghdr) * interp_phnum;
			assert((ret =
8000fd2c:	03c02021 	move	a0,s8
8000fd30:	24060020 	li	a2,32
8000fd34:	0c0037f9 	jal	8000dfe4 <load_icode_read>
8000fd38:	00e23821 	addu	a3,a3,v0
8000fd3c:	14400062 	bnez	v0,8000fec8 <do_execve+0x938>
8000fd40:	8fa20034 	lw	v0,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1059
				load_icode_read(interp_fd, interp_ph,
						sizeof(struct proghdr),
						interp_phoff)) == 0);
			if (interp_ph->p_type != ELF_PT_LOAD) {
8000fd44:	24060001 	li	a2,1
8000fd48:	1446fff1 	bne	v0,a2,8000fd10 <do_execve+0x780>
8000fd4c:	97a200a0 	lhu	v0,160(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1062
				continue;
			}
			if (va_min > interp_ph->p_va)
8000fd50:	8fa2003c 	lw	v0,60(sp)
8000fd54:	8fa301e4 	lw	v1,484(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1064
				va_min = interp_ph->p_va;
			if (va_max < interp_ph->p_va + interp_ph->p_memsz)
8000fd58:	8fa601e8 	lw	a2,488(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1062
						sizeof(struct proghdr),
						interp_phoff)) == 0);
			if (interp_ph->p_type != ELF_PT_LOAD) {
				continue;
			}
			if (va_min > interp_ph->p_va)
8000fd5c:	0043282b 	sltu	a1,v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1064
				va_min = interp_ph->p_va;
			if (va_max < interp_ph->p_va + interp_ph->p_memsz)
8000fd60:	8fa30048 	lw	v1,72(sp)
8000fd64:	00431821 	addu	v1,v0,v1
8000fd68:	00c3202b 	sltu	a0,a2,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1062
						sizeof(struct proghdr),
						interp_phoff)) == 0);
			if (interp_ph->p_type != ELF_PT_LOAD) {
				continue;
			}
			if (va_min > interp_ph->p_va)
8000fd6c:	8fa601e4 	lw	a2,484(sp)
8000fd70:	0045300b 	movn	a2,v0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1064
				va_min = interp_ph->p_va;
			if (va_max < interp_ph->p_va + interp_ph->p_memsz)
8000fd74:	8fa201e8 	lw	v0,488(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1062
						sizeof(struct proghdr),
						interp_phoff)) == 0);
			if (interp_ph->p_type != ELF_PT_LOAD) {
				continue;
			}
			if (va_min > interp_ph->p_va)
8000fd78:	afa601e4 	sw	a2,484(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1064
				va_min = interp_ph->p_va;
			if (va_max < interp_ph->p_va + interp_ph->p_memsz)
8000fd7c:	0064100b 	movn	v0,v1,a0
8000fd80:	08003f43 	j	8000fd0c <do_execve+0x77c>
8000fd84:	afa201e8 	sw	v0,488(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1068
				va_max = interp_ph->p_va + interp_ph->p_memsz;
		}

		bias = get_unmapped_area(mm, va_max - va_min + 1 + PGSIZE);
8000fd88:	8fa301e8 	lw	v1,488(sp)
8000fd8c:	02602021 	move	a0,s3
8000fd90:	24651001 	addiu	a1,v1,4097
8000fd94:	8fa301e4 	lw	v1,484(sp)
8000fd98:	0c00501c 	jal	80014070 <get_unmapped_area>
8000fd9c:	00a32823 	subu	a1,a1,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1069
		bias = ROUNDUP(bias, PGSIZE);
8000fda0:	24420fff 	addiu	v0,v0,4095
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1071

		for (interp_phnum = 0; interp_phnum < interp_elf->e_phnum;
8000fda4:	97a300a0 	lhu	v1,160(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1069
			if (va_max < interp_ph->p_va + interp_ph->p_memsz)
				va_max = interp_ph->p_va + interp_ph->p_memsz;
		}

		bias = get_unmapped_area(mm, va_max - va_min + 1 + PGSIZE);
		bias = ROUNDUP(bias, PGSIZE);
8000fda8:	30440fff 	andi	a0,v0,0xfff
8000fdac:	00441023 	subu	v0,v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1071

		for (interp_phnum = 0; interp_phnum < interp_elf->e_phnum;
8000fdb0:	1060ff6f 	beqz	v1,8000fb70 <do_execve+0x5e0>
8000fdb4:	afa20018 	sw	v0,24(sp)
8000fdb8:	27a30034 	addiu	v1,sp,52
8000fdbc:	0000b821 	move	s7,zero
8000fdc0:	08003f76 	j	8000fdd8 <do_execve+0x848>
8000fdc4:	afa301e0 	sw	v1,480(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1072
		     ++interp_phnum) {
8000fdc8:	26f70001 	addiu	s7,s7,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1071
		}

		bias = get_unmapped_area(mm, va_max - va_min + 1 + PGSIZE);
		bias = ROUNDUP(bias, PGSIZE);

		for (interp_phnum = 0; interp_phnum < interp_elf->e_phnum;
8000fdcc:	02e2102b 	sltu	v0,s7,v0
8000fdd0:	1040ff67 	beqz	v0,8000fb70 <do_execve+0x5e0>
8000fdd4:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1076
		     ++interp_phnum) {
			off_t interp_phoff =
			    interp_elf->e_phoff +
			    sizeof(struct proghdr) * interp_phnum;
			assert((ret =
8000fdd8:	8fa20090 	lw	v0,144(sp)
8000fddc:	8fa501e0 	lw	a1,480(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1182
failed_cleanup:
	put_kargv(i, kargv);
	return ret;
}

int do_execve(const char *filename, const char **argv, const char **envp)
8000fde0:	00173940 	sll	a3,s7,0x5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1076
		for (interp_phnum = 0; interp_phnum < interp_elf->e_phnum;
		     ++interp_phnum) {
			off_t interp_phoff =
			    interp_elf->e_phoff +
			    sizeof(struct proghdr) * interp_phnum;
			assert((ret =
8000fde4:	03c02021 	move	a0,s8
8000fde8:	24060020 	li	a2,32
8000fdec:	0c0037f9 	jal	8000dfe4 <load_icode_read>
8000fdf0:	00e23821 	addu	a3,a3,v0
8000fdf4:	1440002c 	bnez	v0,8000fea8 <do_execve+0x918>
8000fdf8:	8fa20034 	lw	v0,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1080
				load_icode_read(interp_fd, interp_ph,
						sizeof(struct proghdr),
						interp_phoff)) == 0);
			if (interp_ph->p_type != ELF_PT_LOAD) {
8000fdfc:	24060001 	li	a2,1
8000fe00:	1446fff1 	bne	v0,a2,8000fdc8 <do_execve+0x838>
8000fe04:	97a200a0 	lhu	v0,160(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1083
				continue;
			}
			assert((ret =
8000fe08:	8fa501e0 	lw	a1,480(sp)
8000fe0c:	24020001 	li	v0,1
8000fe10:	03c02021 	move	a0,s8
8000fe14:	02603021 	move	a2,s3
8000fe18:	27a70018 	addiu	a3,sp,24
8000fe1c:	0c00387c 	jal	8000e1f0 <map_ph>
8000fe20:	afa20010 	sw	v0,16(sp)
8000fe24:	1040ffe8 	beqz	v0,8000fdc8 <do_execve+0x838>
8000fe28:	97a200a0 	lhu	v0,160(sp)
8000fe2c:	3c048002 	lui	a0,0x8002
8000fe30:	3c068002 	lui	a2,0x8002
8000fe34:	3c078002 	lui	a3,0x8002
8000fe38:	24842a98 	addiu	a0,a0,10904
8000fe3c:	2405043d 	li	a1,1085
8000fe40:	24c60e28 	addiu	a2,a2,3624
8000fe44:	0c006b0b 	jal	8001ac2c <__panic>
8000fe48:	24e72cf4 	addiu	a3,a3,11508
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:863
static int load_icode(int fd, int argc, char **kargv, int envc, char **kenvp)
{
	assert(argc >= 0 && argc <= EXEC_MAX_ARG_NUM);
	assert(envc >= 0 && envc <= EXEC_MAX_ENV_NUM);
	if (current->mm != NULL) {
		panic("load_icode: current->mm must be empty.\n");
8000fe4c:	3c068002 	lui	a2,0x8002
8000fe50:	24842a98 	addiu	a0,a0,10904
8000fe54:	2405035f 	li	a1,863
8000fe58:	0c006b0b 	jal	8001ac2c <__panic>
8000fe5c:	24c62bcc 	addiu	a2,a2,11212
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:861
//#endif //UCONFIG_BIONIC_LIBC

static int load_icode(int fd, int argc, char **kargv, int envc, char **kenvp)
{
	assert(argc >= 0 && argc <= EXEC_MAX_ARG_NUM);
	assert(envc >= 0 && envc <= EXEC_MAX_ENV_NUM);
8000fe60:	3c048002 	lui	a0,0x8002
8000fe64:	3c068002 	lui	a2,0x8002
8000fe68:	3c078002 	lui	a3,0x8002
8000fe6c:	24842a98 	addiu	a0,a0,10904
8000fe70:	2405035d 	li	a1,861
8000fe74:	24c60e28 	addiu	a2,a2,3624
8000fe78:	0c006b0b 	jal	8001ac2c <__panic>
8000fe7c:	24e72ba4 	addiu	a3,a3,11172
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:860

//#endif //UCONFIG_BIONIC_LIBC

static int load_icode(int fd, int argc, char **kargv, int envc, char **kenvp)
{
	assert(argc >= 0 && argc <= EXEC_MAX_ARG_NUM);
8000fe80:	3c048002 	lui	a0,0x8002
8000fe84:	3c068002 	lui	a2,0x8002
8000fe88:	3c078002 	lui	a3,0x8002
8000fe8c:	24842a98 	addiu	a0,a0,10904
8000fe90:	2405035c 	li	a1,860
8000fe94:	24c60e28 	addiu	a2,a2,3624
8000fe98:	0c006b0b 	jal	8001ac2c <__panic>
8000fe9c:	24e72b7c 	addiu	a3,a3,11132
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1240
	//fs_closeall(current->fs_struct);

	/* sysfile_open will check the first argument path, thus we have to use a user-space pointer, and argv[0] may be incorrect */

	int fd;
	if ((ret = fd = sysfile_open(path, O_RDONLY)) < 0) {
8000fea0:	08003ed4 	j	8000fb50 <do_execve+0x5c0>
8000fea4:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1076
		for (interp_phnum = 0; interp_phnum < interp_elf->e_phnum;
		     ++interp_phnum) {
			off_t interp_phoff =
			    interp_elf->e_phoff +
			    sizeof(struct proghdr) * interp_phnum;
			assert((ret =
8000fea8:	3c048002 	lui	a0,0x8002
8000feac:	24842a98 	addiu	a0,a0,10904
8000feb0:	24050437 	li	a1,1079
8000feb4:	3c068002 	lui	a2,0x8002
8000feb8:	3c078002 	lui	a3,0x8002
8000febc:	24c60e28 	addiu	a2,a2,3624
8000fec0:	0c006b0b 	jal	8001ac2c <__panic>
8000fec4:	24e72c98 	addiu	a3,a3,11416
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1055
		for (interp_phnum = 0; interp_phnum < interp_elf->e_phnum;
		     ++interp_phnum) {
			off_t interp_phoff =
			    interp_elf->e_phoff +
			    sizeof(struct proghdr) * interp_phnum;
			assert((ret =
8000fec8:	3c048002 	lui	a0,0x8002
8000fecc:	24842a98 	addiu	a0,a0,10904
8000fed0:	08003fad 	j	8000feb4 <do_execve+0x924>
8000fed4:	24050422 	li	a1,1058
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1045
		assert(interp_fd >= 0);
		struct elfhdr interp___elf, *interp_elf = &interp___elf;
		assert((ret =
			load_icode_read(interp_fd, interp_elf,
					sizeof(struct elfhdr), 0)) == 0);
		assert(interp_elf->e_magic == ELF_MAGIC);
8000fed8:	3c048002 	lui	a0,0x8002
8000fedc:	3c068002 	lui	a2,0x8002
8000fee0:	3c078002 	lui	a3,0x8002
8000fee4:	24842a98 	addiu	a0,a0,10904
8000fee8:	24050415 	li	a1,1045
8000feec:	24c60e28 	addiu	a2,a2,3624
8000fef0:	0c006b0b 	jal	8001ac2c <__panic>
8000fef4:	24e72c74 	addiu	a3,a3,11380
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1042
		load_icode_read(fd, interp_path, ph->p_filesz, ph->p_offset);

		int interp_fd = sysfile_open(interp_path, O_RDONLY);
		assert(interp_fd >= 0);
		struct elfhdr interp___elf, *interp_elf = &interp___elf;
		assert((ret =
8000fef8:	3c048002 	lui	a0,0x8002
8000fefc:	3c068002 	lui	a2,0x8002
8000ff00:	3c078002 	lui	a3,0x8002
8000ff04:	24842a98 	addiu	a0,a0,10904
8000ff08:	24050414 	li	a1,1044
8000ff0c:	24c60e28 	addiu	a2,a2,3624
8000ff10:	0c006b0b 	jal	8001ac2c <__panic>
8000ff14:	24e72c24 	addiu	a3,a3,11300
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1040

		char *interp_path = (char *)kmalloc(ph->p_filesz);
		load_icode_read(fd, interp_path, ph->p_filesz, ph->p_offset);

		int interp_fd = sysfile_open(interp_path, O_RDONLY);
		assert(interp_fd >= 0);
8000ff18:	3c048002 	lui	a0,0x8002
8000ff1c:	3c068002 	lui	a2,0x8002
8000ff20:	3c078002 	lui	a3,0x8002
8000ff24:	24842a98 	addiu	a0,a0,10904
8000ff28:	24050410 	li	a1,1040
8000ff2c:	24c60e28 	addiu	a2,a2,3624
8000ff30:	0c006b0b 	jal	8001ac2c <__panic>
8000ff34:	24e72c14 	addiu	a3,a3,11284

8000ff38 <do_yield>:
do_yield():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1306
}

// do_yield - ask the scheduler to reschedule
int do_yield(void)
{
	current->need_resched = 1;
8000ff38:	3c028015 	lui	v0,0x8015
8000ff3c:	8c4377a4 	lw	v1,30628(v0)
8000ff40:	24040001 	li	a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1308
	return 0;
}
8000ff44:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1306
}

// do_yield - ask the scheduler to reschedule
int do_yield(void)
{
	current->need_resched = 1;
8000ff48:	ac640018 	sw	a0,24(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1308
	return 0;
}
8000ff4c:	03e00008 	jr	ra
8000ff50:	00000000 	nop

8000ff54 <do_wait>:
do_wait():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1314

// do_wait - wait one OR any children with PROC_ZOMBIE state, and free memory space of kernel stack
//         - proc struct of this child.
// NOTE: only after do_wait function, all resources of the child proces are free.
int do_wait(int pid, int *code_store)
{
8000ff54:	27bdffb8 	addiu	sp,sp,-72
8000ff58:	afb00024 	sw	s0,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1315
	struct mm_struct *mm = current->mm;
8000ff5c:	3c108015 	lui	s0,0x8015
8000ff60:	8e0277a4 	lw	v0,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1314

// do_wait - wait one OR any children with PROC_ZOMBIE state, and free memory space of kernel stack
//         - proc struct of this child.
// NOTE: only after do_wait function, all resources of the child proces are free.
int do_wait(int pid, int *code_store)
{
8000ff64:	afb30030 	sw	s3,48(sp)
8000ff68:	afb2002c 	sw	s2,44(sp)
8000ff6c:	afb10028 	sw	s1,40(sp)
8000ff70:	afbf0044 	sw	ra,68(sp)
8000ff74:	afb70040 	sw	s7,64(sp)
8000ff78:	afb6003c 	sw	s6,60(sp)
8000ff7c:	afb50038 	sw	s5,56(sp)
8000ff80:	afb40034 	sw	s4,52(sp)
8000ff84:	00a09821 	move	s3,a1
8000ff88:	00808821 	move	s1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1316
	struct mm_struct *mm = current->mm;
	if (code_store != NULL) {
8000ff8c:	10a00007 	beqz	a1,8000ffac <do_wait+0x58>
8000ff90:	8c520020 	lw	s2,32(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1317
		if (!user_mem_check(mm, (uintptr_t) code_store, sizeof(int), 1)) {
8000ff94:	02402021 	move	a0,s2
8000ff98:	24060004 	li	a2,4
8000ff9c:	0c005077 	jal	800141dc <user_mem_check>
8000ffa0:	24070001 	li	a3,1
8000ffa4:	1040004b 	beqz	v0,800100d4 <do_wait+0x180>
8000ffa8:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1375
		} while (cproc != current);
	}
*/
	if (haskid) {
		current->state = PROC_SLEEPING;
		current->wait_state = WT_CHILD;
8000ffac:	3c158000 	lui	s5,0x8000
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1331
	haskid = 0;
	if (pid != 0) {
    	proc = find_proc(pid);
            if (proc != NULL && proc->parent == current) {
         	haskid = 1;
                if (proc->state == PROC_ZOMBIE) {
8000ffb0:	24140003 	li	s4,3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1374
			cproc = next_thread(cproc);
		} while (cproc != current);
	}
*/
	if (haskid) {
		current->state = PROC_SLEEPING;
8000ffb4:	24160001 	li	s6,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1375
		current->wait_state = WT_CHILD;
8000ffb8:	26b50001 	addiu	s5,s5,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1327
	struct proc_struct *proc;//, *cproc;
	bool intr_flag, haskid;
repeat:
	//cproc = current;
	haskid = 0;
	if (pid != 0) {
8000ffbc:	16200050 	bnez	s1,80010100 <do_wait+0x1ac>
8000ffc0:	8e0277a4 	lw	v0,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1337
                   goto found;
                }
            }
        }
        else {
            proc = current->cptr;
8000ffc4:	8c570088 	lw	s7,136(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1338
            for (; proc != NULL; proc = proc->optr) {
8000ffc8:	56e00006 	bnezl	s7,8000ffe4 <do_wait+0x90>
8000ffcc:	8ee30000 	lw	v1,0(s7)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1408
			}
		}
		unlock_mm(mm);
	}
	return ret;
}
8000ffd0:	08004053 	j	8001014c <do_wait+0x1f8>
8000ffd4:	8fbf0044 	lw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1338
                }
            }
        }
        else {
            proc = current->cptr;
            for (; proc != NULL; proc = proc->optr) {
8000ffd8:	52e00055 	beqzl	s7,80010130 <do_wait+0x1dc>
8000ffdc:	ac560000 	sw	s6,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1340
                haskid = 1;
                if (proc->state == PROC_ZOMBIE) {
8000ffe0:	8ee30000 	lw	v1,0(s7)
8000ffe4:	5474fffc 	bnel	v1,s4,8000ffd8 <do_wait+0x84>
8000ffe8:	8ef70090 	lw	s7,144(s7)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1383
		goto repeat;
	}
	return -E_BAD_PROC;

found:
	if (proc == idleproc || proc == initproc) {
8000ffec:	3c028015 	lui	v0,0x8015
8000fff0:	8c4277a8 	lw	v0,30632(v0)
8000fff4:	12e20062 	beq	s7,v0,80010180 <do_wait+0x22c>
8000fff8:	3c028015 	lui	v0,0x8015
8000fffc:	8c427798 	lw	v0,30616(v0)
80010000:	12e20060 	beq	s7,v0,80010184 <do_wait+0x230>
80010004:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1386
		panic("wait idleproc or initproc.\n");
	}
	int exit_code = proc->exit_code;
80010008:	8ee20080 	lw	v0,128(s7)
8001000c:	afa20010 	sw	v0,16(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80010010:	40026000 	mfc0	v0,c0_status
80010014:	30420001 	andi	v0,v0,0x1
80010018:	10400004 	beqz	v0,8001002c <do_wait+0xd8>
8001001c:	00002821 	move	a1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80010020:	0c006d04 	jal	8001b410 <intr_disable>
80010024:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:16
	return 1;
80010028:	24050001 	li	a1,1
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
8001002c:	8ee40078 	lw	a0,120(s7)
80010030:	8ee3007c 	lw	v1,124(s7)
remove_links():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:130

// remove_links - clean the relation links of process
static void remove_links(struct proc_struct *proc)
{
	list_del(&(proc->list_link));
	if (proc->optr != NULL) {
80010034:	8ee20090 	lw	v0,144(s7)
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
80010038:	ac830004 	sw	v1,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:170
	next->prev = prev;
8001003c:	ac640000 	sw	a0,0(v1)
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
80010040:	8ee40070 	lw	a0,112(s7)
80010044:	8ee30074 	lw	v1,116(s7)
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
80010048:	ac830004 	sw	v1,4(a0)
remove_links():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:130
8001004c:	10400003 	beqz	v0,8001005c <do_wait+0x108>
80010050:	ac640000 	sw	a0,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:131
		proc->optr->yptr = proc->yptr;
80010054:	8ee3008c 	lw	v1,140(s7)
80010058:	ac43008c 	sw	v1,140(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:133
	}
	if (proc->yptr != NULL) {
8001005c:	8ee3008c 	lw	v1,140(s7)
80010060:	50600045 	beqzl	v1,80010178 <do_wait+0x224>
80010064:	8ee3001c 	lw	v1,28(s7)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:134
		proc->yptr->optr = proc->optr;
80010068:	ac620090 	sw	v0,144(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:138
	} else {
		proc->parent->cptr = proc->optr;
	}
	nr_process--;
8001006c:	3c028015 	lui	v0,0x8015
80010070:	8c436548 	lw	v1,25928(v0)
80010074:	2463ffff 	addiu	v1,v1,-1
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80010078:	10a00003 	beqz	a1,80010088 <do_wait+0x134>
8001007c:	ac436548 	sw	v1,25928(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
80010080:	0c006d00 	jal	8001b400 <intr_enable>
80010084:	00000000 	nop
do_wait():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1393
	{
		unhash_proc(proc);
		remove_links(proc);
	}
	local_intr_restore(intr_flag);
	put_kstack(proc);
80010088:	0c003acb 	jal	8000eb2c <put_kstack>
8001008c:	02e02021 	move	a0,s7
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1394
	kfree(proc);
80010090:	0c0054b1 	jal	800152c4 <kfree>
80010094:	02e02021 	move	a0,s7
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1397

	int ret = 0;
	if (code_store != NULL) {
80010098:	1260000e 	beqz	s3,800100d4 <do_wait+0x180>
8001009c:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1398
		lock_mm(mm);
800100a0:	0c004c26 	jal	80013098 <lock_mm>
800100a4:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1401
		{
			if (!copy_to_user
			    (mm, code_store, &exit_code, sizeof(int))) {
800100a8:	02402021 	move	a0,s2
800100ac:	02602821 	move	a1,s3
800100b0:	27a60010 	addiu	a2,sp,16
800100b4:	0c007948 	jal	8001e520 <copy_to_user>
800100b8:	24070004 	li	a3,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1396
	}
	local_intr_restore(intr_flag);
	put_kstack(proc);
	kfree(proc);

	int ret = 0;
800100bc:	2403ffea 	li	v1,-22
800100c0:	0002180b 	movn	v1,zero,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1405
			if (!copy_to_user
			    (mm, code_store, &exit_code, sizeof(int))) {
				ret = -E_INVAL;
			}
		}
		unlock_mm(mm);
800100c4:	02402021 	move	a0,s2
800100c8:	0c004c37 	jal	800130dc <unlock_mm>
800100cc:	afa30018 	sw	v1,24(sp)
800100d0:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1408
	}
	return ret;
}
800100d4:	8fbf0044 	lw	ra,68(sp)
800100d8:	8fb70040 	lw	s7,64(sp)
800100dc:	8fb6003c 	lw	s6,60(sp)
800100e0:	8fb50038 	lw	s5,56(sp)
800100e4:	8fb40034 	lw	s4,52(sp)
800100e8:	8fb30030 	lw	s3,48(sp)
800100ec:	8fb2002c 	lw	s2,44(sp)
800100f0:	8fb10028 	lw	s1,40(sp)
800100f4:	8fb00024 	lw	s0,36(sp)
800100f8:	03e00008 	jr	ra
800100fc:	27bd0048 	addiu	sp,sp,72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1328
	bool intr_flag, haskid;
repeat:
	//cproc = current;
	haskid = 0;
	if (pid != 0) {
    	proc = find_proc(pid);
80010100:	0c003b44 	jal	8000ed10 <find_proc>
80010104:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1329
            if (proc != NULL && proc->parent == current) {
80010108:	1040000f 	beqz	v0,80010148 <do_wait+0x1f4>
8001010c:	0040b821 	move	s7,v0
80010110:	8c42001c 	lw	v0,28(v0)
80010114:	8e0377a4 	lw	v1,30628(s0)
80010118:	1443000c 	bne	v0,v1,8001014c <do_wait+0x1f8>
8001011c:	8fbf0044 	lw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1331
         	haskid = 1;
                if (proc->state == PROC_ZOMBIE) {
80010120:	8ee30000 	lw	v1,0(s7)
80010124:	5074ffb2 	beql	v1,s4,8000fff0 <do_wait+0x9c>
80010128:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1374
			cproc = next_thread(cproc);
		} while (cproc != current);
	}
*/
	if (haskid) {
		current->state = PROC_SLEEPING;
8001012c:	ac560000 	sw	s6,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1376
		current->wait_state = WT_CHILD;
		schedule();
80010130:	0c00059f 	jal	8000167c <schedule>
80010134:	ac550084 	sw	s5,132(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1377
		may_killed();
80010138:	0c003b61 	jal	8000ed84 <may_killed>
8001013c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1378
		goto repeat;
80010140:	08003fef 	j	8000ffbc <do_wait+0x68>
80010144:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1408
			}
		}
		unlock_mm(mm);
	}
	return ret;
}
80010148:	8fbf0044 	lw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1380
		current->wait_state = WT_CHILD;
		schedule();
		may_killed();
		goto repeat;
	}
	return -E_BAD_PROC;
8001014c:	2402fffd 	li	v0,-3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1408
			}
		}
		unlock_mm(mm);
	}
	return ret;
}
80010150:	8fb70040 	lw	s7,64(sp)
80010154:	8fb6003c 	lw	s6,60(sp)
80010158:	8fb50038 	lw	s5,56(sp)
8001015c:	8fb40034 	lw	s4,52(sp)
80010160:	8fb30030 	lw	s3,48(sp)
80010164:	8fb2002c 	lw	s2,44(sp)
80010168:	8fb10028 	lw	s1,40(sp)
8001016c:	8fb00024 	lw	s0,36(sp)
80010170:	03e00008 	jr	ra
80010174:	27bd0048 	addiu	sp,sp,72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:136
		proc->optr->yptr = proc->yptr;
	}
	if (proc->yptr != NULL) {
		proc->yptr->optr = proc->optr;
	} else {
		proc->parent->cptr = proc->optr;
80010178:	0800401b 	j	8001006c <do_wait+0x118>
8001017c:	ac620088 	sw	v0,136(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1384
	}
	return -E_BAD_PROC;

found:
	if (proc == idleproc || proc == initproc) {
		panic("wait idleproc or initproc.\n");
80010180:	3c048002 	lui	a0,0x8002
80010184:	3c068002 	lui	a2,0x8002
80010188:	24842a98 	addiu	a0,a0,10904
8001018c:	24050568 	li	a1,1384
80010190:	0c006b0b 	jal	8001ac2c <__panic>
80010194:	24c62d2c 	addiu	a2,a2,11564

80010198 <init_main>:
init_main():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1984
{
	int ret;
#ifdef DEBUG_PROCESS
	kprintf("enter vfs_set_bootfs\n");
#endif
	if ((ret = vfs_set_bootfs("disk0:")) != 0) {
80010198:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1979
	kprintf("user_main execve failed, no /bin/sh?.\n");
}

// init_main - the second kernel thread used to create kswapd_main & user_main kernel threads
static int init_main(void *arg)
{
8001019c:	27bdffd8 	addiu	sp,sp,-40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1984
	int ret;
#ifdef DEBUG_PROCESS
	kprintf("enter vfs_set_bootfs\n");
#endif
	if ((ret = vfs_set_bootfs("disk0:")) != 0) {
800101a0:	24842d48 	addiu	a0,a0,11592
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1979
	kprintf("user_main execve failed, no /bin/sh?.\n");
}

// init_main - the second kernel thread used to create kswapd_main & user_main kernel threads
static int init_main(void *arg)
{
800101a4:	afbf0024 	sw	ra,36(sp)
800101a8:	afb30020 	sw	s3,32(sp)
800101ac:	afb2001c 	sw	s2,28(sp)
800101b0:	afb10018 	sw	s1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1984
	int ret;
#ifdef DEBUG_PROCESS
	kprintf("enter vfs_set_bootfs\n");
#endif
	if ((ret = vfs_set_bootfs("disk0:")) != 0) {
800101b4:	0c0011cb 	jal	8000472c <vfs_set_bootfs>
800101b8:	afb00014 	sw	s0,20(sp)
800101bc:	14400039 	bnez	v0,800102a4 <init_main+0x10c>
800101c0:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1990
		panic("set boot fs failed: %e.\n", ret);
	}
#ifdef DEBUG_PROCESS
	kprintf("exit vfs_set_bootfs\n");
#endif
	size_t nr_used_pages_store = nr_used_pages();
800101c4:	0c00791a 	jal	8001e468 <nr_used_pages>
800101c8:	3c108015 	lui	s0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1991
	size_t slab_allocated_store = slab_allocated();
800101cc:	0c005452 	jal	80015148 <slab_allocated>
800101d0:	00409821 	move	s3,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1998
	unsigned int nr_process_store = nr_process;

#ifdef DEBUG_PROCESS
	kprintf("create thread\n");
#endif
	int pid = ucore_kernel_thread(user_main, NULL, 0);
800101d4:	3c048001 	lui	a0,0x8001
800101d8:	2484de6c 	addiu	a0,a0,-8596
800101dc:	00002821 	move	a1,zero
800101e0:	00003021 	move	a2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1991
	}
#ifdef DEBUG_PROCESS
	kprintf("exit vfs_set_bootfs\n");
#endif
	size_t nr_used_pages_store = nr_used_pages();
	size_t slab_allocated_store = slab_allocated();
800101e4:	00409021 	move	s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1998
	unsigned int nr_process_store = nr_process;

#ifdef DEBUG_PROCESS
	kprintf("create thread\n");
#endif
	int pid = ucore_kernel_thread(user_main, NULL, 0);
800101e8:	0c007a35 	jal	8001e8d4 <ucore_kernel_thread>
800101ec:	8e116548 	lw	s1,25928(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1999
	if (pid <= 0) {
800101f0:	5c400008 	bgtzl	v0,80010214 <init_main+0x7c>
800101f4:	00002021 	move	a0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2000
		panic("create user_main failed.\n");
800101f8:	080040c4 	j	80010310 <init_main+0x178>
800101fc:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2006
	}
#ifdef DEBUG_PROCESS
	kprintf("sche thread\n");
#endif
	while (do_wait(0, NULL) == 0) {
		if (nr_process_store == nr_process) {
80010200:	12220008 	beq	s1,v0,80010224 <init_main+0x8c>
80010204:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2009
			break;
		}
		schedule();
80010208:	0c00059f 	jal	8000167c <schedule>
8001020c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2005
		panic("create user_main failed.\n");
	}
#ifdef DEBUG_PROCESS
	kprintf("sche thread\n");
#endif
	while (do_wait(0, NULL) == 0) {
80010210:	00002021 	move	a0,zero
80010214:	0c003fd5 	jal	8000ff54 <do_wait>
80010218:	00002821 	move	a1,zero
8001021c:	1040fff8 	beqz	v0,80010200 <init_main+0x68>
80010220:	8e026548 	lw	v0,25928(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2022
		}
		schedule();
	}
#endif

	mbox_cleanup();
80010224:	0c006611 	jal	80019844 <mbox_cleanup>
80010228:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2023
	fs_cleanup();
8001022c:	0c003279 	jal	8000c9e4 <fs_cleanup>
80010230:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2025

	kprintf("all user-mode processes have quit.\n");
80010234:	3c048002 	lui	a0,0x8002
80010238:	0c007a9e 	jal	8001ea78 <kprintf>
8001023c:	24842d88 	addiu	a0,a0,11656
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2033
	       && initproc->optr == NULL);
	assert(kswapd->cptr == NULL && kswapd->yptr == NULL
	       && kswapd->optr == NULL);
	assert(nr_process == 2 + pls_read(lcpu_count));
#else
	assert(nr_process == 1 + pls_read(lcpu_count));
80010240:	3c028015 	lui	v0,0x8015
80010244:	8c4377a0 	lw	v1,30624(v0)
80010248:	8e026548 	lw	v0,25928(s0)
8001024c:	24630001 	addiu	v1,v1,1
80010250:	14620028 	bne	v1,v0,800102f4 <init_main+0x15c>
80010254:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2035
#endif
	assert(nr_used_pages_store == nr_used_pages());
80010258:	0c00791a 	jal	8001e468 <nr_used_pages>
8001025c:	00000000 	nop
80010260:	1662001d 	bne	s3,v0,800102d8 <init_main+0x140>
80010264:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2036
	assert(slab_allocated_store == slab_allocated());
80010268:	0c005452 	jal	80015148 <slab_allocated>
8001026c:	00000000 	nop
80010270:	54520012 	bnel	v0,s2,800102bc <init_main+0x124>
80010274:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2037
	kprintf("init check memory pass.\n");
80010278:	3c048002 	lui	a0,0x8002
8001027c:	0c007a9e 	jal	8001ea78 <kprintf>
80010280:	24842e28 	addiu	a0,a0,11816
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2039
	return 0;
}
80010284:	8fbf0024 	lw	ra,36(sp)
80010288:	00001021 	move	v0,zero
8001028c:	8fb30020 	lw	s3,32(sp)
80010290:	8fb2001c 	lw	s2,28(sp)
80010294:	8fb10018 	lw	s1,24(sp)
80010298:	8fb00014 	lw	s0,20(sp)
8001029c:	03e00008 	jr	ra
800102a0:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1985
	int ret;
#ifdef DEBUG_PROCESS
	kprintf("enter vfs_set_bootfs\n");
#endif
	if ((ret = vfs_set_bootfs("disk0:")) != 0) {
		panic("set boot fs failed: %e.\n", ret);
800102a4:	3c068002 	lui	a2,0x8002
800102a8:	24842a98 	addiu	a0,a0,10904
800102ac:	240507c1 	li	a1,1985
800102b0:	24c62d50 	addiu	a2,a2,11600
800102b4:	0c006b0b 	jal	8001ac2c <__panic>
800102b8:	00403821 	move	a3,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2036
	assert(nr_process == 2 + pls_read(lcpu_count));
#else
	assert(nr_process == 1 + pls_read(lcpu_count));
#endif
	assert(nr_used_pages_store == nr_used_pages());
	assert(slab_allocated_store == slab_allocated());
800102bc:	3c068002 	lui	a2,0x8002
800102c0:	3c078002 	lui	a3,0x8002
800102c4:	24842a98 	addiu	a0,a0,10904
800102c8:	240507f4 	li	a1,2036
800102cc:	24c60e28 	addiu	a2,a2,3624
800102d0:	0c006b0b 	jal	8001ac2c <__panic>
800102d4:	24e72dfc 	addiu	a3,a3,11772
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2035
	       && kswapd->optr == NULL);
	assert(nr_process == 2 + pls_read(lcpu_count));
#else
	assert(nr_process == 1 + pls_read(lcpu_count));
#endif
	assert(nr_used_pages_store == nr_used_pages());
800102d8:	3c068002 	lui	a2,0x8002
800102dc:	3c078002 	lui	a3,0x8002
800102e0:	24842a98 	addiu	a0,a0,10904
800102e4:	240507f3 	li	a1,2035
800102e8:	24c60e28 	addiu	a2,a2,3624
800102ec:	0c006b0b 	jal	8001ac2c <__panic>
800102f0:	24e72dd4 	addiu	a3,a3,11732
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2033
	       && initproc->optr == NULL);
	assert(kswapd->cptr == NULL && kswapd->yptr == NULL
	       && kswapd->optr == NULL);
	assert(nr_process == 2 + pls_read(lcpu_count));
#else
	assert(nr_process == 1 + pls_read(lcpu_count));
800102f4:	3c068002 	lui	a2,0x8002
800102f8:	3c078002 	lui	a3,0x8002
800102fc:	24842a98 	addiu	a0,a0,10904
80010300:	240507f1 	li	a1,2033
80010304:	24c60e28 	addiu	a2,a2,3624
80010308:	0c006b0b 	jal	8001ac2c <__panic>
8001030c:	24e72dac 	addiu	a3,a3,11692
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2000
#ifdef DEBUG_PROCESS
	kprintf("create thread\n");
#endif
	int pid = ucore_kernel_thread(user_main, NULL, 0);
	if (pid <= 0) {
		panic("create user_main failed.\n");
80010310:	3c068002 	lui	a2,0x8002
80010314:	24842a98 	addiu	a0,a0,10904
80010318:	240507d0 	li	a1,2000
8001031c:	0c006b0b 	jal	8001ac2c <__panic>
80010320:	24c62d6c 	addiu	a2,a2,11628

80010324 <do_linux_waitpid>:
do_linux_waitpid():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1411
	}
	return ret;
}

int do_linux_waitpid(int pid, int *code_store)
{
80010324:	27bdffb8 	addiu	sp,sp,-72
80010328:	afb10028 	sw	s1,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1412
	struct mm_struct *mm = current->mm;
8001032c:	3c118015 	lui	s1,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1411
	}
	return ret;
}

int do_linux_waitpid(int pid, int *code_store)
{
80010330:	afb40034 	sw	s4,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1412
	struct mm_struct *mm = current->mm;
80010334:	8e3477a4 	lw	s4,30628(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1411
	}
	return ret;
}

int do_linux_waitpid(int pid, int *code_store)
{
80010338:	afb30030 	sw	s3,48(sp)
8001033c:	afb2002c 	sw	s2,44(sp)
80010340:	afb00024 	sw	s0,36(sp)
80010344:	afbf0044 	sw	ra,68(sp)
80010348:	afb70040 	sw	s7,64(sp)
8001034c:	afb6003c 	sw	s6,60(sp)
80010350:	afb50038 	sw	s5,56(sp)
80010354:	00a09821 	move	s3,a1
80010358:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1413
	struct mm_struct *mm = current->mm;
	if (code_store != NULL) {
8001035c:	10a00007 	beqz	a1,8001037c <do_linux_waitpid+0x58>
80010360:	8e920020 	lw	s2,32(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1414
		if (!user_mem_check(mm, (uintptr_t) code_store, sizeof(int), 1)) {
80010364:	02402021 	move	a0,s2
80010368:	24060004 	li	a2,4
8001036c:	0c005077 	jal	800141dc <user_mem_check>
80010370:	24070001 	li	a3,1
80010374:	1040006c 	beqz	v0,80010528 <do_linux_waitpid+0x204>
80010378:	8e3477a4 	lw	s4,30628(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1440
				cproc = next_thread(cproc);
			} while (cproc != current);
		}
	}
	/* we do NOT have group id, so.. */
	else if (pid == 0 || pid == -1) {	/* pid == 0 */
8001037c:	26170001 	addiu	s7,s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1457
		//TODO
		return -E_INVAL;
	}
	if (haskid) {
		current->state = PROC_SLEEPING;
		current->wait_state = WT_CHILD;
80010380:	3c168000 	lui	s6,0x8000
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1430
		proc = find_proc(pid);
		if (proc != NULL) {
			do {
				if (proc->parent == cproc) {
					haskid = 1;
					if (proc->state == PROC_ZOMBIE) {
80010384:	24150003 	li	s5,3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1440
				cproc = next_thread(cproc);
			} while (cproc != current);
		}
	}
	/* we do NOT have group id, so.. */
	else if (pid == 0 || pid == -1) {	/* pid == 0 */
80010388:	2ef70002 	sltiu	s7,s7,2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1457
		//TODO
		return -E_INVAL;
	}
	if (haskid) {
		current->state = PROC_SLEEPING;
		current->wait_state = WT_CHILD;
8001038c:	26d60001 	addiu	s6,s6,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1424
	struct proc_struct *proc, *cproc;
	bool intr_flag, haskid;
repeat:
	cproc = current;
	haskid = 0;
	if (pid > 0) {
80010390:	1a00001a 	blez	s0,800103fc <do_linux_waitpid+0xd8>
80010394:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1425
		proc = find_proc(pid);
80010398:	0c003b44 	jal	8000ed10 <find_proc>
8001039c:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1426
		if (proc != NULL) {
800103a0:	5040000a 	beqzl	v0,800103cc <do_linux_waitpid+0xa8>
800103a4:	2410fffd 	li	s0,-3
800103a8:	8c44001c 	lw	a0,28(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1436
						goto found;
					}
					break;
				}
				cproc = next_thread(cproc);
			} while (cproc != current);
800103ac:	8e2377a4 	lw	v1,30628(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1428
	haskid = 0;
	if (pid > 0) {
		proc = find_proc(pid);
		if (proc != NULL) {
			do {
				if (proc->parent == cproc) {
800103b0:	50940080 	beql	a0,s4,800105b4 <do_linux_waitpid+0x290>
800103b4:	8c440000 	lw	a0,0(v0)
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
800103b8:	8e940098 	lw	s4,152(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1435
					if (proc->state == PROC_ZOMBIE) {
						goto found;
					}
					break;
				}
				cproc = next_thread(cproc);
800103bc:	2694ff6c 	addiu	s4,s4,-148
do_linux_waitpid():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1436
			} while (cproc != current);
800103c0:	1683fffb 	bne	s4,v1,800103b0 <do_linux_waitpid+0x8c>
800103c4:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1462
		current->wait_state = WT_CHILD;
		schedule();
		may_killed();
		goto repeat;
	}
	return -E_BAD_PROC;
800103c8:	2410fffd 	li	s0,-3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1491
			}
		}
		unlock_mm(mm);
	}
	return (ret == 0) ? return_pid : ret;
}
800103cc:	8fbf0044 	lw	ra,68(sp)
800103d0:	02001021 	move	v0,s0
800103d4:	8fb70040 	lw	s7,64(sp)
800103d8:	8fb6003c 	lw	s6,60(sp)
800103dc:	8fb50038 	lw	s5,56(sp)
800103e0:	8fb40034 	lw	s4,52(sp)
800103e4:	8fb30030 	lw	s3,48(sp)
800103e8:	8fb2002c 	lw	s2,44(sp)
800103ec:	8fb10028 	lw	s1,40(sp)
800103f0:	8fb00024 	lw	s0,36(sp)
800103f4:	03e00008 	jr	ra
800103f8:	27bd0048 	addiu	sp,sp,72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1440
				cproc = next_thread(cproc);
			} while (cproc != current);
		}
	}
	/* we do NOT have group id, so.. */
	else if (pid == 0 || pid == -1) {	/* pid == 0 */
800103fc:	12e0004a 	beqz	s7,80010528 <do_linux_waitpid+0x204>
80010400:	02802021 	move	a0,s4
80010404:	00001821 	move	v1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1442
		do {
			proc = cproc->cptr;
80010408:	8c820088 	lw	v0,136(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1443
			for (; proc != NULL; proc = proc->optr) {
8001040c:	54400006 	bnezl	v0,80010428 <do_linux_waitpid+0x104>
80010410:	8c430000 	lw	v1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
80010414:	08004158 	j	80010560 <do_linux_waitpid+0x23c>
80010418:	8c840098 	lw	a0,152(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1443
8001041c:	1040004f 	beqz	v0,8001055c <do_linux_waitpid+0x238>
80010420:	24030001 	li	v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1445
				haskid = 1;
				if (proc->state == PROC_ZOMBIE) {
80010424:	8c430000 	lw	v1,0(v0)
80010428:	5475fffc 	bnel	v1,s5,8001041c <do_linux_waitpid+0xf8>
8001042c:	8c420090 	lw	v0,144(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1465
		goto repeat;
	}
	return -E_BAD_PROC;

found:
	if (proc == idleproc || proc == initproc) {
80010430:	3c038015 	lui	v1,0x8015
80010434:	8c6377a8 	lw	v1,30632(v1)
80010438:	1043006a 	beq	v0,v1,800105e4 <do_linux_waitpid+0x2c0>
8001043c:	3c038015 	lui	v1,0x8015
80010440:	8c637798 	lw	v1,30616(v1)
80010444:	10430068 	beq	v0,v1,800105e8 <do_linux_waitpid+0x2c4>
80010448:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1468
		panic("wait idleproc or initproc.\n");
	}
	int exit_code = proc->exit_code;
8001044c:	8c510080 	lw	s1,128(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1469
	int return_pid = proc->pid;
80010450:	8c500004 	lw	s0,4(v0)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80010454:	40036000 	mfc0	v1,c0_status
80010458:	30630001 	andi	v1,v1,0x1
8001045c:	10600005 	beqz	v1,80010474 <do_linux_waitpid+0x150>
80010460:	00003021 	move	a2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80010464:	0c006d04 	jal	8001b410 <intr_disable>
80010468:	afa20018 	sw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:16
	return 1;
8001046c:	8fa20018 	lw	v0,24(sp)
80010470:	24060001 	li	a2,1
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
80010474:	8c450078 	lw	a1,120(v0)
80010478:	8c44007c 	lw	a0,124(v0)
remove_links():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:130

// remove_links - clean the relation links of process
static void remove_links(struct proc_struct *proc)
{
	list_del(&(proc->list_link));
	if (proc->optr != NULL) {
8001047c:	8c430090 	lw	v1,144(v0)
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
80010480:	aca40004 	sw	a0,4(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:170
	next->prev = prev;
80010484:	ac850000 	sw	a1,0(a0)
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
80010488:	8c450070 	lw	a1,112(v0)
8001048c:	8c440074 	lw	a0,116(v0)
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
80010490:	aca40004 	sw	a0,4(a1)
remove_links():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:130
80010494:	10600003 	beqz	v1,800104a4 <do_linux_waitpid+0x180>
80010498:	ac850000 	sw	a1,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:131
		proc->optr->yptr = proc->yptr;
8001049c:	8c44008c 	lw	a0,140(v0)
800104a0:	ac64008c 	sw	a0,140(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:133
	}
	if (proc->yptr != NULL) {
800104a4:	8c44008c 	lw	a0,140(v0)
800104a8:	5080004c 	beqzl	a0,800105dc <do_linux_waitpid+0x2b8>
800104ac:	8c44001c 	lw	a0,28(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:134
		proc->yptr->optr = proc->optr;
800104b0:	ac830090 	sw	v1,144(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:138
	} else {
		proc->parent->cptr = proc->optr;
	}
	nr_process--;
800104b4:	3c038015 	lui	v1,0x8015
800104b8:	8c646548 	lw	a0,25928(v1)
800104bc:	2484ffff 	addiu	a0,a0,-1
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
800104c0:	10c00004 	beqz	a2,800104d4 <do_linux_waitpid+0x1b0>
800104c4:	ac646548 	sw	a0,25928(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
800104c8:	0c006d00 	jal	8001b400 <intr_enable>
800104cc:	afa20018 	sw	v0,24(sp)
800104d0:	8fa20018 	lw	v0,24(sp)
do_linux_waitpid():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1476
	{
		unhash_proc(proc);
		remove_links(proc);
	}
	local_intr_restore(intr_flag);
	put_kstack(proc);
800104d4:	00402021 	move	a0,v0
800104d8:	0c003acb 	jal	8000eb2c <put_kstack>
800104dc:	afa20018 	sw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1477
	kfree(proc);
800104e0:	8fa20018 	lw	v0,24(sp)
800104e4:	0c0054b1 	jal	800152c4 <kfree>
800104e8:	00402021 	move	a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1480

	int ret = 0;
	if (code_store != NULL) {
800104ec:	1260ffb8 	beqz	s3,800103d0 <do_linux_waitpid+0xac>
800104f0:	8fbf0044 	lw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1481
		lock_mm(mm);
800104f4:	0c004c26 	jal	80013098 <lock_mm>
800104f8:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1483
		{
			int status = exit_code << 8;
800104fc:	00111200 	sll	v0,s1,0x8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1484
			if (!copy_to_user(mm, code_store, &status, sizeof(int))) {
80010500:	02402021 	move	a0,s2
80010504:	02602821 	move	a1,s3
80010508:	27a60010 	addiu	a2,sp,16
8001050c:	24070004 	li	a3,4
80010510:	0c007948 	jal	8001e520 <copy_to_user>
80010514:	afa20010 	sw	v0,16(sp)
80010518:	14400018 	bnez	v0,8001057c <do_linux_waitpid+0x258>
8001051c:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1488
				ret = -E_INVAL;
			}
		}
		unlock_mm(mm);
80010520:	0c004c37 	jal	800130dc <unlock_mm>
80010524:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1491
	}
	return (ret == 0) ? return_pid : ret;
}
80010528:	8fbf0044 	lw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1485
	if (code_store != NULL) {
		lock_mm(mm);
		{
			int status = exit_code << 8;
			if (!copy_to_user(mm, code_store, &status, sizeof(int))) {
				ret = -E_INVAL;
8001052c:	2410ffea 	li	s0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1491
			}
		}
		unlock_mm(mm);
	}
	return (ret == 0) ? return_pid : ret;
}
80010530:	02001021 	move	v0,s0
80010534:	8fb70040 	lw	s7,64(sp)
80010538:	8fb6003c 	lw	s6,60(sp)
8001053c:	8fb50038 	lw	s5,56(sp)
80010540:	8fb40034 	lw	s4,52(sp)
80010544:	8fb30030 	lw	s3,48(sp)
80010548:	8fb2002c 	lw	s2,44(sp)
8001054c:	8fb10028 	lw	s1,40(sp)
80010550:	8fb00024 	lw	s0,36(sp)
80010554:	03e00008 	jr	ra
80010558:	27bd0048 	addiu	sp,sp,72
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
8001055c:	8c840098 	lw	a0,152(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1449
				haskid = 1;
				if (proc->state == PROC_ZOMBIE) {
					goto found;
				}
			}
			cproc = next_thread(cproc);
80010560:	2484ff6c 	addiu	a0,a0,-148
do_linux_waitpid():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1450
		} while (cproc != current);
80010564:	5684ffa9 	bnel	s4,a0,8001040c <do_linux_waitpid+0xe8>
80010568:	8c820088 	lw	v0,136(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1455
	} else {		//pid<-1
		//TODO
		return -E_INVAL;
	}
	if (haskid) {
8001056c:	5060ff97 	beqzl	v1,800103cc <do_linux_waitpid+0xa8>
80010570:	2410fffd 	li	s0,-3
80010574:	0800416f 	j	800105bc <do_linux_waitpid+0x298>
80010578:	02801821 	move	v1,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1488
			int status = exit_code << 8;
			if (!copy_to_user(mm, code_store, &status, sizeof(int))) {
				ret = -E_INVAL;
			}
		}
		unlock_mm(mm);
8001057c:	0c004c37 	jal	800130dc <unlock_mm>
80010580:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1491
	}
	return (ret == 0) ? return_pid : ret;
}
80010584:	8fbf0044 	lw	ra,68(sp)
80010588:	02001021 	move	v0,s0
8001058c:	8fb70040 	lw	s7,64(sp)
80010590:	8fb6003c 	lw	s6,60(sp)
80010594:	8fb50038 	lw	s5,56(sp)
80010598:	8fb40034 	lw	s4,52(sp)
8001059c:	8fb30030 	lw	s3,48(sp)
800105a0:	8fb2002c 	lw	s2,44(sp)
800105a4:	8fb10028 	lw	s1,40(sp)
800105a8:	8fb00024 	lw	s0,36(sp)
800105ac:	03e00008 	jr	ra
800105b0:	27bd0048 	addiu	sp,sp,72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1430
		proc = find_proc(pid);
		if (proc != NULL) {
			do {
				if (proc->parent == cproc) {
					haskid = 1;
					if (proc->state == PROC_ZOMBIE) {
800105b4:	5095ff9f 	beql	a0,s5,80010434 <do_linux_waitpid+0x110>
800105b8:	3c038015 	lui	v1,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1456
	} else {		//pid<-1
		//TODO
		return -E_INVAL;
	}
	if (haskid) {
		current->state = PROC_SLEEPING;
800105bc:	24020001 	li	v0,1
800105c0:	ac620000 	sw	v0,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1458
		current->wait_state = WT_CHILD;
		schedule();
800105c4:	0c00059f 	jal	8000167c <schedule>
800105c8:	ac760084 	sw	s6,132(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1459
		may_killed();
800105cc:	0c003b61 	jal	8000ed84 <may_killed>
800105d0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1460
		goto repeat;
800105d4:	080040e4 	j	80010390 <do_linux_waitpid+0x6c>
800105d8:	8e3477a4 	lw	s4,30628(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:136
		proc->optr->yptr = proc->yptr;
	}
	if (proc->yptr != NULL) {
		proc->yptr->optr = proc->optr;
	} else {
		proc->parent->cptr = proc->optr;
800105dc:	0800412d 	j	800104b4 <do_linux_waitpid+0x190>
800105e0:	ac830088 	sw	v1,136(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1466
	}
	return -E_BAD_PROC;

found:
	if (proc == idleproc || proc == initproc) {
		panic("wait idleproc or initproc.\n");
800105e4:	3c048002 	lui	a0,0x8002
800105e8:	3c068002 	lui	a2,0x8002
800105ec:	24842a98 	addiu	a0,a0,10904
800105f0:	240505ba 	li	a1,1466
800105f4:	0c006b0b 	jal	8001ac2c <__panic>
800105f8:	24c62d2c 	addiu	a2,a2,11564

800105fc <do_kill>:
do_kill():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1509
	return -E_KILLED;
}

// do_kill - kill process with pid
int do_kill(int pid, int error_code)
{
800105fc:	27bdffe0 	addiu	sp,sp,-32
80010600:	afb00018 	sw	s0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1511
	struct proc_struct *proc;
	if ((proc = find_proc(pid)) != NULL) {
80010604:	afa50010 	sw	a1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1509
	return -E_KILLED;
}

// do_kill - kill process with pid
int do_kill(int pid, int error_code)
{
80010608:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1511
	struct proc_struct *proc;
	if ((proc = find_proc(pid)) != NULL) {
8001060c:	0c003b44 	jal	8000ed10 <find_proc>
80010610:	2410ffea 	li	s0,-22
80010614:	1040000b 	beqz	v0,80010644 <do_kill+0x48>
80010618:	8fa50010 	lw	a1,16(sp)
__do_kill():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1496
}

// __do_kill - kill a process with PCB by set this process's flags with PF_EXITING
static int __do_kill(struct proc_struct *proc, int error_code)
{
	if (!(proc->flags & PF_EXITING)) {
8001061c:	8c43005c 	lw	v1,92(v0)
80010620:	30640001 	andi	a0,v1,0x1
80010624:	14800007 	bnez	a0,80010644 <do_kill+0x48>
80010628:	2410ffdb 	li	s0,-37
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1499
		proc->flags |= PF_EXITING;
		proc->exit_code = error_code;
		if (proc->wait_state & WT_INTERRUPTED) {
8001062c:	8c440084 	lw	a0,132(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1497

// __do_kill - kill a process with PCB by set this process's flags with PF_EXITING
static int __do_kill(struct proc_struct *proc, int error_code)
{
	if (!(proc->flags & PF_EXITING)) {
		proc->flags |= PF_EXITING;
80010630:	34630001 	ori	v1,v1,0x1
80010634:	ac43005c 	sw	v1,92(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1498
		proc->exit_code = error_code;
80010638:	ac450080 	sw	a1,128(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1499
		if (proc->wait_state & WT_INTERRUPTED) {
8001063c:	04800006 	bltz	a0,80010658 <do_kill+0x5c>
80010640:	00008021 	move	s0,zero
do_kill():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1515
	struct proc_struct *proc;
	if ((proc = find_proc(pid)) != NULL) {
		return __do_kill(proc, error_code);
	}
	return -E_INVAL;
}
80010644:	8fbf001c 	lw	ra,28(sp)
80010648:	02001021 	move	v0,s0
8001064c:	8fb00018 	lw	s0,24(sp)
80010650:	03e00008 	jr	ra
80010654:	27bd0020 	addiu	sp,sp,32
__do_kill():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1500
{
	if (!(proc->flags & PF_EXITING)) {
		proc->flags |= PF_EXITING;
		proc->exit_code = error_code;
		if (proc->wait_state & WT_INTERRUPTED) {
			wakeup_proc(proc);
80010658:	0c0004f8 	jal	800013e0 <wakeup_proc>
8001065c:	00402021 	move	a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1515
	struct proc_struct *proc;
	if ((proc = find_proc(pid)) != NULL) {
		return __do_kill(proc, error_code);
	}
	return -E_INVAL;
}
80010660:	08004192 	j	80010648 <do_kill+0x4c>
80010664:	8fbf001c 	lw	ra,28(sp)

80010668 <do_brk>:
do_brk():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1521

// do_brk - adjust(increase/decrease) the size of process heap, align with page size
// NOTE: will change the process vma
int do_brk(uintptr_t * brk_store)
{
	struct mm_struct *mm = current->mm;
80010668:	3c028015 	lui	v0,0x8015
8001066c:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1520
}

// do_brk - adjust(increase/decrease) the size of process heap, align with page size
// NOTE: will change the process vma
int do_brk(uintptr_t * brk_store)
{
80010670:	27bdffc8 	addiu	sp,sp,-56
80010674:	afb00024 	sw	s0,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1521
	struct mm_struct *mm = current->mm;
80010678:	8c500020 	lw	s0,32(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1520
}

// do_brk - adjust(increase/decrease) the size of process heap, align with page size
// NOTE: will change the process vma
int do_brk(uintptr_t * brk_store)
{
8001067c:	afb10028 	sw	s1,40(sp)
80010680:	afbf0034 	sw	ra,52(sp)
80010684:	afb30030 	sw	s3,48(sp)
80010688:	afb2002c 	sw	s2,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1522
	struct mm_struct *mm = current->mm;
	if (mm == NULL) {
8001068c:	12000048 	beqz	s0,800107b0 <do_brk+0x148>
80010690:	00808821 	move	s1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1525
		panic("kernel thread call sys_brk!!.\n");
	}
	if (brk_store == NULL) {
80010694:	1080002e 	beqz	a0,80010750 <do_brk+0xe8>
80010698:	8fbf0034 	lw	ra,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1532
		return mm->brk_start;
	}

	uintptr_t brk;

	lock_mm(mm);
8001069c:	0c004c26 	jal	80013098 <lock_mm>
800106a0:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1533
	if (!copy_from_user(mm, &brk, brk_store, sizeof(uintptr_t), 1)) {
800106a4:	24020001 	li	v0,1
800106a8:	02002021 	move	a0,s0
800106ac:	27a50018 	addiu	a1,sp,24
800106b0:	02203021 	move	a2,s1
800106b4:	24070004 	li	a3,4
800106b8:	0c00792e 	jal	8001e4b8 <copy_from_user>
800106bc:	afa20010 	sw	v0,16(sp)
800106c0:	10400037 	beqz	v0,800107a0 <do_brk+0x138>
800106c4:	8fb30018 	lw	s3,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1538
		unlock_mm(mm);
		return -E_INVAL;
	}

	if (brk < mm->brk_start) {
800106c8:	8e020024 	lw	v0,36(s0)
800106cc:	0262102b 	sltu	v0,s3,v0
800106d0:	14400011 	bnez	v0,80010718 <do_brk+0xb0>
800106d4:	02202821 	move	a1,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1541
		goto out_unlock;
	}
	uintptr_t newbrk = ROUNDUP(brk, PGSIZE), oldbrk = mm->brk;
800106d8:	8e120028 	lw	s2,40(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1542
	assert(oldbrk % PGSIZE == 0);
800106dc:	32420fff 	andi	v0,s2,0xfff
800106e0:	14400039 	bnez	v0,800107c8 <do_brk+0x160>
800106e4:	26730fff 	addiu	s3,s3,4095
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1541
	}

	if (brk < mm->brk_start) {
		goto out_unlock;
	}
	uintptr_t newbrk = ROUNDUP(brk, PGSIZE), oldbrk = mm->brk;
800106e8:	32620fff 	andi	v0,s3,0xfff
800106ec:	02629823 	subu	s3,s3,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1543
	assert(oldbrk % PGSIZE == 0);
	if (newbrk == oldbrk) {
800106f0:	12720009 	beq	s3,s2,80010718 <do_brk+0xb0>
800106f4:	0272102b 	sltu	v0,s3,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1546
		goto out_unlock;
	}
	if (newbrk < oldbrk) {
800106f8:	1040001c 	beqz	v0,8001076c <do_brk+0x104>
800106fc:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1547
		if (mm_unmap(mm, newbrk, oldbrk - newbrk) != 0) {
80010700:	02602821 	move	a1,s3
80010704:	0c004edb 	jal	80013b6c <mm_unmap>
80010708:	02533023 	subu	a2,s2,s3
8001070c:	50400001 	beqzl	v0,80010714 <do_brk+0xac>
80010710:	ae130028 	sw	s3,40(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1560
			goto out_unlock;
		}
	}
	mm->brk = newbrk;
out_unlock:
	copy_to_user(mm, brk_store, &mm->brk, sizeof(uintptr_t));
80010714:	02202821 	move	a1,s1
80010718:	26060028 	addiu	a2,s0,40
8001071c:	24070004 	li	a3,4
80010720:	0c007948 	jal	8001e520 <copy_to_user>
80010724:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1561
	unlock_mm(mm);
80010728:	0c004c37 	jal	800130dc <unlock_mm>
8001072c:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1562
	return 0;
80010730:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1563
}
80010734:	8fbf0034 	lw	ra,52(sp)
80010738:	8fb30030 	lw	s3,48(sp)
8001073c:	8fb2002c 	lw	s2,44(sp)
80010740:	8fb10028 	lw	s1,40(sp)
80010744:	8fb00024 	lw	s0,36(sp)
80010748:	03e00008 	jr	ra
8001074c:	27bd0038 	addiu	sp,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1527
	if (mm == NULL) {
		panic("kernel thread call sys_brk!!.\n");
	}
	if (brk_store == NULL) {
		//     return -E_INVAL;
		return mm->brk_start;
80010750:	8e020024 	lw	v0,36(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1563
	mm->brk = newbrk;
out_unlock:
	copy_to_user(mm, brk_store, &mm->brk, sizeof(uintptr_t));
	unlock_mm(mm);
	return 0;
}
80010754:	8fb30030 	lw	s3,48(sp)
80010758:	8fb2002c 	lw	s2,44(sp)
8001075c:	8fb10028 	lw	s1,40(sp)
80010760:	8fb00024 	lw	s0,36(sp)
80010764:	03e00008 	jr	ra
80010768:	27bd0038 	addiu	sp,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1551
	if (newbrk < oldbrk) {
		if (mm_unmap(mm, newbrk, oldbrk - newbrk) != 0) {
			goto out_unlock;
		}
	} else {
		if (find_vma_intersection(mm, oldbrk, newbrk + PGSIZE) != NULL) {
8001076c:	02402821 	move	a1,s2
80010770:	0c004cd1 	jal	80013344 <find_vma_intersection>
80010774:	26661000 	addiu	a2,s3,4096
80010778:	1440ffe7 	bnez	v0,80010718 <do_brk+0xb0>
8001077c:	02202821 	move	a1,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1554
			goto out_unlock;
		}
		if (mm_brk(mm, oldbrk, newbrk - oldbrk) != 0) {
80010780:	02402821 	move	a1,s2
80010784:	02002021 	move	a0,s0
80010788:	0c005037 	jal	800140dc <mm_brk>
8001078c:	02723023 	subu	a2,s3,s2
80010790:	1440ffe1 	bnez	v0,80010718 <do_brk+0xb0>
80010794:	02202821 	move	a1,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1558
			goto out_unlock;
		}
	}
	mm->brk = newbrk;
80010798:	080041c6 	j	80010718 <do_brk+0xb0>
8001079c:	ae130028 	sw	s3,40(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1534

	uintptr_t brk;

	lock_mm(mm);
	if (!copy_from_user(mm, &brk, brk_store, sizeof(uintptr_t), 1)) {
		unlock_mm(mm);
800107a0:	0c004c37 	jal	800130dc <unlock_mm>
800107a4:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1535
		return -E_INVAL;
800107a8:	080041cd 	j	80010734 <do_brk+0xcc>
800107ac:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1523
// NOTE: will change the process vma
int do_brk(uintptr_t * brk_store)
{
	struct mm_struct *mm = current->mm;
	if (mm == NULL) {
		panic("kernel thread call sys_brk!!.\n");
800107b0:	3c048002 	lui	a0,0x8002
800107b4:	3c068002 	lui	a2,0x8002
800107b8:	24842a98 	addiu	a0,a0,10904
800107bc:	240505f3 	li	a1,1523
800107c0:	0c006b0b 	jal	8001ac2c <__panic>
800107c4:	24c62e44 	addiu	a2,a2,11844
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1542

	if (brk < mm->brk_start) {
		goto out_unlock;
	}
	uintptr_t newbrk = ROUNDUP(brk, PGSIZE), oldbrk = mm->brk;
	assert(oldbrk % PGSIZE == 0);
800107c8:	3c048002 	lui	a0,0x8002
800107cc:	3c068002 	lui	a2,0x8002
800107d0:	3c078002 	lui	a3,0x8002
800107d4:	24842a98 	addiu	a0,a0,10904
800107d8:	24050606 	li	a1,1542
800107dc:	24c60e28 	addiu	a2,a2,3624
800107e0:	0c006b0b 	jal	8001ac2c <__panic>
800107e4:	24e72e64 	addiu	a3,a3,11876

800107e8 <do_linux_brk>:
do_linux_brk():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1569

/* poring from linux */
int do_linux_brk(uintptr_t brk)
{
	uint32_t newbrk, oldbrk, retval;
	struct mm_struct *mm = current->mm;
800107e8:	3c028015 	lui	v0,0x8015
800107ec:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1567
	return 0;
}

/* poring from linux */
int do_linux_brk(uintptr_t brk)
{
800107f0:	27bdffd8 	addiu	sp,sp,-40
800107f4:	afb00014 	sw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1569
	uint32_t newbrk, oldbrk, retval;
	struct mm_struct *mm = current->mm;
800107f8:	8c500020 	lw	s0,32(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1567
	return 0;
}

/* poring from linux */
int do_linux_brk(uintptr_t brk)
{
800107fc:	afb10018 	sw	s1,24(sp)
80010800:	afbf0024 	sw	ra,36(sp)
80010804:	afb30020 	sw	s3,32(sp)
80010808:	afb2001c 	sw	s2,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1572
	uint32_t newbrk, oldbrk, retval;
	struct mm_struct *mm = current->mm;
	uint32_t min_brk;

	if (!mm) {
8001080c:	12000038 	beqz	s0,800108f0 <do_linux_brk+0x108>
80010810:	00808821 	move	s1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1576
		panic("kernel thread call sys_brk!!.\n");
	}

	lock_mm(mm);
80010814:	0c004c26 	jal	80013098 <lock_mm>
80010818:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1580

	min_brk = mm->brk_start;

	if (brk < min_brk)
8001081c:	8e020024 	lw	v0,36(s0)
80010820:	0222102b 	sltu	v0,s1,v0
80010824:	14400020 	bnez	v0,800108a8 <do_linux_brk+0xc0>
80010828:	26230fff 	addiu	v1,s1,4095
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1584
		goto out_unlock;

	newbrk = ROUNDUP(brk, PGSIZE);
	oldbrk = ROUNDUP(mm->brk, PGSIZE);
8001082c:	8e040028 	lw	a0,40(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1583
	min_brk = mm->brk_start;

	if (brk < min_brk)
		goto out_unlock;

	newbrk = ROUNDUP(brk, PGSIZE);
80010830:	30720fff 	andi	s2,v1,0xfff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1584
	oldbrk = ROUNDUP(mm->brk, PGSIZE);
80010834:	24820fff 	addiu	v0,a0,4095
80010838:	30530fff 	andi	s3,v0,0xfff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1583
	min_brk = mm->brk_start;

	if (brk < min_brk)
		goto out_unlock;

	newbrk = ROUNDUP(brk, PGSIZE);
8001083c:	00729023 	subu	s2,v1,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1584
	oldbrk = ROUNDUP(mm->brk, PGSIZE);
80010840:	00539823 	subu	s3,v0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1586

	if (oldbrk == newbrk)
80010844:	12530008 	beq	s2,s3,80010868 <do_linux_brk+0x80>
80010848:	0091202b 	sltu	a0,a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1589
		goto set_brk;

	if (brk <= mm->brk) {
8001084c:	14800011 	bnez	a0,80010894 <do_linux_brk+0xac>
80010850:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1590
		if (!mm_unmap(mm, newbrk, oldbrk - newbrk))
80010854:	02402821 	move	a1,s2
80010858:	0c004edb 	jal	80013b6c <mm_unmap>
8001085c:	02723023 	subu	a2,s3,s2
80010860:	14400012 	bnez	v0,800108ac <do_linux_brk+0xc4>
80010864:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1603
	/* set the brk */
	if (mm_brk(mm, oldbrk, newbrk - oldbrk))
		goto out_unlock;

set_brk:
	mm->brk = brk;
80010868:	ae110028 	sw	s1,40(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1606
out_unlock:
	retval = mm->brk;
	unlock_mm(mm);
8001086c:	0c004c37 	jal	800130dc <unlock_mm>
80010870:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1608
	return retval;
}
80010874:	8fbf0024 	lw	ra,36(sp)
80010878:	02201021 	move	v0,s1
8001087c:	8fb30020 	lw	s3,32(sp)
80010880:	8fb2001c 	lw	s2,28(sp)
80010884:	8fb10018 	lw	s1,24(sp)
80010888:	8fb00014 	lw	s0,20(sp)
8001088c:	03e00008 	jr	ra
80010890:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1595
		if (!mm_unmap(mm, newbrk, oldbrk - newbrk))
			goto set_brk;
		goto out_unlock;
	}

	if (find_vma_intersection(mm, oldbrk, newbrk + PGSIZE))
80010894:	02602821 	move	a1,s3
80010898:	0c004cd1 	jal	80013344 <find_vma_intersection>
8001089c:	26461000 	addiu	a2,s2,4096
800108a0:	1040000c 	beqz	v0,800108d4 <do_linux_brk+0xec>
800108a4:	02602821 	move	a1,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1606

set_brk:
	mm->brk = brk;
out_unlock:
	retval = mm->brk;
	unlock_mm(mm);
800108a8:	02002021 	move	a0,s0
800108ac:	0c004c37 	jal	800130dc <unlock_mm>
800108b0:	8e110028 	lw	s1,40(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1608
	return retval;
}
800108b4:	8fbf0024 	lw	ra,36(sp)
800108b8:	02201021 	move	v0,s1
800108bc:	8fb30020 	lw	s3,32(sp)
800108c0:	8fb2001c 	lw	s2,28(sp)
800108c4:	8fb10018 	lw	s1,24(sp)
800108c8:	8fb00014 	lw	s0,20(sp)
800108cc:	03e00008 	jr	ra
800108d0:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1599

	if (find_vma_intersection(mm, oldbrk, newbrk + PGSIZE))
		goto out_unlock;

	/* set the brk */
	if (mm_brk(mm, oldbrk, newbrk - oldbrk))
800108d4:	02002021 	move	a0,s0
800108d8:	0c005037 	jal	800140dc <mm_brk>
800108dc:	02533023 	subu	a2,s2,s3
800108e0:	1440fff2 	bnez	v0,800108ac <do_linux_brk+0xc4>
800108e4:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1603
		goto out_unlock;

set_brk:
	mm->brk = brk;
800108e8:	0800421b 	j	8001086c <do_linux_brk+0x84>
800108ec:	ae110028 	sw	s1,40(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1573
	uint32_t newbrk, oldbrk, retval;
	struct mm_struct *mm = current->mm;
	uint32_t min_brk;

	if (!mm) {
		panic("kernel thread call sys_brk!!.\n");
800108f0:	3c048002 	lui	a0,0x8002
800108f4:	3c068002 	lui	a2,0x8002
800108f8:	24842a98 	addiu	a0,a0,10904
800108fc:	24050625 	li	a1,1573
80010900:	0c006b0b 	jal	8001ac2c <__panic>
80010904:	24c62e44 	addiu	a2,a2,11844

80010908 <do_sleep>:
do_sleep():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1656

// do_sleep - set current process state to sleep and add timer with "time"
//          - then call scheduler. if process run again, delete timer first.
//      time is jiffies
int do_sleep(unsigned int time)
{
80010908:	27bdffc0 	addiu	sp,sp,-64
8001090c:	afb00034 	sw	s0,52(sp)
80010910:	afbf003c 	sw	ra,60(sp)
80010914:	afb10038 	sw	s1,56(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1657
	assert(!ucore_in_interrupt());
80010918:	0c007eaa 	jal	8001faa8 <ucore_in_interrupt>
8001091c:	00808021 	move	s0,a0
80010920:	1440003a 	bnez	v0,80010a0c <do_sleep+0x104>
80010924:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1658
	if (time == 0) {
80010928:	16000006 	bnez	s0,80010944 <do_sleep+0x3c>
8001092c:	8fbf003c 	lw	ra,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1673

	schedule();

	del_timer(timer);
	return 0;
}
80010930:	00001021 	move	v0,zero
80010934:	8fb10038 	lw	s1,56(sp)
80010938:	8fb00034 	lw	s0,52(sp)
8001093c:	03e00008 	jr	ra
80010940:	27bd0040 	addiu	sp,sp,64
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80010944:	40026000 	mfc0	v0,c0_status
80010948:	30420001 	andi	v0,v0,0x1
8001094c:	1440001a 	bnez	v0,800109b8 <do_sleep+0xb0>
80010950:	3c028015 	lui	v0,0x8015
do_sleep():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1663
	if (time == 0) {
		return 0;
	}
	bool intr_flag;
	local_intr_save(intr_flag);
	timer_t __timer, *timer = timer_init(&__timer, current, time);
80010954:	8c4277a4 	lw	v0,30628(v0)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
 * list_init - initialize a new entry
 * @elm:        new entry to be initialized
 * */
static inline void list_init(list_entry_t * elm)
{
	elm->prev = elm->next = elm;
80010958:	27a30024 	addiu	v1,sp,36
8001095c:	afa30028 	sw	v1,40(sp)
80010960:	afa30024 	sw	v1,36(sp)
do_sleep():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1665
	current->state = PROC_SLEEPING;
	current->wait_state = WT_TIMER;
80010964:	3c038000 	lui	v1,0x8000
80010968:	24630002 	addiu	v1,v1,2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1666
	add_timer(timer);
8001096c:	27b10010 	addiu	s1,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1665
	}
	bool intr_flag;
	local_intr_save(intr_flag);
	timer_t __timer, *timer = timer_init(&__timer, current, time);
	current->state = PROC_SLEEPING;
	current->wait_state = WT_TIMER;
80010970:	ac430084 	sw	v1,132(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1664
		return 0;
	}
	bool intr_flag;
	local_intr_save(intr_flag);
	timer_t __timer, *timer = timer_init(&__timer, current, time);
	current->state = PROC_SLEEPING;
80010974:	24030001 	li	v1,1
timer_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.h:28
    to_struct((le), timer_t, member)

static inline timer_t *timer_init(timer_t * timer, struct proc_struct *proc,
				  int expires)
{
	timer->expires = expires;
80010978:	afb00010 	sw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.h:29
	timer->proc = proc;
8001097c:	afa20014 	sw	v0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.h:30
	timer->linux_timer.linux_timer = NULL;
80010980:	afa00018 	sw	zero,24(sp)
do_sleep():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1666
	current->wait_state = WT_TIMER;
	add_timer(timer);
80010984:	02202021 	move	a0,s1
80010988:	0c0005e5 	jal	80001794 <add_timer>
8001098c:	ac430000 	sw	v1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1669
	local_intr_restore(intr_flag);

	schedule();
80010990:	0c00059f 	jal	8000167c <schedule>
80010994:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1671

	del_timer(timer);
80010998:	0c00062d 	jal	800018b4 <del_timer>
8001099c:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1673
	return 0;
}
800109a0:	8fbf003c 	lw	ra,60(sp)
800109a4:	00001021 	move	v0,zero
800109a8:	8fb10038 	lw	s1,56(sp)
800109ac:	8fb00034 	lw	s0,52(sp)
800109b0:	03e00008 	jr	ra
800109b4:	27bd0040 	addiu	sp,sp,64
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
800109b8:	0c006d04 	jal	8001b410 <intr_disable>
800109bc:	27b10010 	addiu	s1,sp,16
do_sleep():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1663
	if (time == 0) {
		return 0;
	}
	bool intr_flag;
	local_intr_save(intr_flag);
	timer_t __timer, *timer = timer_init(&__timer, current, time);
800109c0:	3c028015 	lui	v0,0x8015
800109c4:	8c4277a4 	lw	v0,30628(v0)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
800109c8:	27a30024 	addiu	v1,sp,36
800109cc:	afa30028 	sw	v1,40(sp)
800109d0:	afa30024 	sw	v1,36(sp)
do_sleep():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1664
	current->state = PROC_SLEEPING;
800109d4:	24030001 	li	v1,1
timer_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.h:29

static inline timer_t *timer_init(timer_t * timer, struct proc_struct *proc,
				  int expires)
{
	timer->expires = expires;
	timer->proc = proc;
800109d8:	afa20014 	sw	v0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.h:28
    to_struct((le), timer_t, member)

static inline timer_t *timer_init(timer_t * timer, struct proc_struct *proc,
				  int expires)
{
	timer->expires = expires;
800109dc:	afb00010 	sw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.h:30
	timer->proc = proc;
	timer->linux_timer.linux_timer = NULL;
800109e0:	afa00018 	sw	zero,24(sp)
do_sleep():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1664
800109e4:	ac430000 	sw	v1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1665
	current->wait_state = WT_TIMER;
800109e8:	3c038000 	lui	v1,0x8000
800109ec:	24630002 	addiu	v1,v1,2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1666
	add_timer(timer);
800109f0:	02202021 	move	a0,s1
800109f4:	0c0005e5 	jal	80001794 <add_timer>
800109f8:	ac430084 	sw	v1,132(v0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
800109fc:	0c006d00 	jal	8001b400 <intr_enable>
80010a00:	00000000 	nop
80010a04:	08004264 	j	80010990 <do_sleep+0x88>
80010a08:	00000000 	nop
do_sleep():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1657
// do_sleep - set current process state to sleep and add timer with "time"
//          - then call scheduler. if process run again, delete timer first.
//      time is jiffies
int do_sleep(unsigned int time)
{
	assert(!ucore_in_interrupt());
80010a0c:	3c068002 	lui	a2,0x8002
80010a10:	3c078002 	lui	a3,0x8002
80010a14:	24842a98 	addiu	a0,a0,10904
80010a18:	24050679 	li	a1,1657
80010a1c:	24c60e28 	addiu	a2,a2,3624
80010a20:	0c006b0b 	jal	8001ac2c <__panic>
80010a24:	24e72e7c 	addiu	a3,a3,11900

80010a28 <do_linux_sleep>:
do_linux_sleep():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1678
}

int do_linux_sleep(const struct linux_timespec __user * req,
		   struct linux_timespec __user * rem)
{
	struct mm_struct *mm = current->mm;
80010a28:	3c028015 	lui	v0,0x8015
80010a2c:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1677
	return 0;
}

int do_linux_sleep(const struct linux_timespec __user * req,
		   struct linux_timespec __user * rem)
{
80010a30:	27bdffc8 	addiu	sp,sp,-56
80010a34:	afb00028 	sw	s0,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1678
	struct mm_struct *mm = current->mm;
80010a38:	8c500020 	lw	s0,32(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1677
	return 0;
}

int do_linux_sleep(const struct linux_timespec __user * req,
		   struct linux_timespec __user * rem)
{
80010a3c:	00803021 	move	a2,a0
80010a40:	afbf0034 	sw	ra,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1680
	struct mm_struct *mm = current->mm;
	struct linux_timespec kts;
	lock_mm(mm);
80010a44:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1677
	return 0;
}

int do_linux_sleep(const struct linux_timespec __user * req,
		   struct linux_timespec __user * rem)
{
80010a48:	afb20030 	sw	s2,48(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1680
	struct mm_struct *mm = current->mm;
	struct linux_timespec kts;
	lock_mm(mm);
80010a4c:	afa60020 	sw	a2,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1677
	return 0;
}

int do_linux_sleep(const struct linux_timespec __user * req,
		   struct linux_timespec __user * rem)
{
80010a50:	00a09021 	move	s2,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1680
	struct mm_struct *mm = current->mm;
	struct linux_timespec kts;
	lock_mm(mm);
80010a54:	0c004c26 	jal	80013098 <lock_mm>
80010a58:	afb1002c 	sw	s1,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1681
	if (!copy_from_user(mm, &kts, req, sizeof(struct linux_timespec), 1)) {
80010a5c:	8fa60020 	lw	a2,32(sp)
80010a60:	02002021 	move	a0,s0
80010a64:	24020001 	li	v0,1
80010a68:	27a50018 	addiu	a1,sp,24
80010a6c:	24070008 	li	a3,8
80010a70:	0c00792e 	jal	8001e4b8 <copy_from_user>
80010a74:	afa20010 	sw	v0,16(sp)
80010a78:	10400033 	beqz	v0,80010b48 <do_linux_sleep+0x120>
80010a7c:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1685
		unlock_mm(mm);
		return -E_INVAL;
	}
	unlock_mm(mm);
80010a80:	0c004c37 	jal	800130dc <unlock_mm>
80010a84:	2411ffea 	li	s1,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1686
	long msec = kts.tv_sec * 1000 + kts.tv_nsec / 1000000;
80010a88:	8fa3001c 	lw	v1,28(sp)
80010a8c:	3c04431b 	lui	a0,0x431b
80010a90:	3484de83 	ori	a0,a0,0xde83
80010a94:	00640018 	mult	v1,a0
80010a98:	8fa50018 	lw	a1,24(sp)
80010a9c:	00031fc3 	sra	v1,v1,0x1f
80010aa0:	00051080 	sll	v0,a1,0x2
80010aa4:	000531c0 	sll	a2,a1,0x7
80010aa8:	00c21023 	subu	v0,a2,v0
80010aac:	00451021 	addu	v0,v0,a1
80010ab0:	000210c0 	sll	v0,v0,0x3
80010ab4:	00002010 	mfhi	a0
80010ab8:	00042483 	sra	a0,a0,0x12
80010abc:	00831823 	subu	v1,a0,v1
80010ac0:	00431021 	addu	v0,v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1687
	if (msec < 0)
80010ac4:	04400019 	bltz	v0,80010b2c <do_linux_sleep+0x104>
80010ac8:	3c036666 	lui	v1,0x6666
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1692
		return -E_INVAL;
#ifdef UCONFIG_HAVE_LINUX_DDE_BASE
	unsigned long j = msecs_to_jiffies(msec);
#else
	unsigned long j = msec / 10;
80010acc:	24636667 	addiu	v1,v1,26215
80010ad0:	00430018 	mult	v0,v1
80010ad4:	000217c3 	sra	v0,v0,0x1f
80010ad8:	00001810 	mfhi	v1
80010adc:	00031883 	sra	v1,v1,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1695
#endif
	//kprintf("do_linux_sleep: sleep %d msec, %d jiffies\n", msec, j);
	int ret = do_sleep(j);
80010ae0:	0c004242 	jal	80010908 <do_sleep>
80010ae4:	00622023 	subu	a0,v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1696
	if (rem) {
80010ae8:	12400010 	beqz	s2,80010b2c <do_linux_sleep+0x104>
80010aec:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1697
		memset(&kts, 0, sizeof(struct linux_timespec));
80010af0:	00002821 	move	a1,zero
80010af4:	24060008 	li	a2,8
80010af8:	0c005c52 	jal	80017148 <memset>
80010afc:	27a40018 	addiu	a0,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1698
		lock_mm(mm);
80010b00:	0c004c26 	jal	80013098 <lock_mm>
80010b04:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1699
		if (!copy_to_user(mm, rem, &kts, sizeof(struct linux_timespec))) {
80010b08:	02002021 	move	a0,s0
80010b0c:	02402821 	move	a1,s2
80010b10:	27a60018 	addiu	a2,sp,24
80010b14:	0c007948 	jal	8001e520 <copy_to_user>
80010b18:	24070008 	li	a3,8
80010b1c:	1040000a 	beqz	v0,80010b48 <do_linux_sleep+0x120>
80010b20:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1703
			unlock_mm(mm);
			return -E_INVAL;
		}
		unlock_mm(mm);
80010b24:	0c004c37 	jal	800130dc <unlock_mm>
80010b28:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1706
	}
	return ret;
}
80010b2c:	8fbf0034 	lw	ra,52(sp)
80010b30:	02201021 	move	v0,s1
80010b34:	8fb20030 	lw	s2,48(sp)
80010b38:	8fb1002c 	lw	s1,44(sp)
80010b3c:	8fb00028 	lw	s0,40(sp)
80010b40:	03e00008 	jr	ra
80010b44:	27bd0038 	addiu	sp,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1700
	int ret = do_sleep(j);
	if (rem) {
		memset(&kts, 0, sizeof(struct linux_timespec));
		lock_mm(mm);
		if (!copy_to_user(mm, rem, &kts, sizeof(struct linux_timespec))) {
			unlock_mm(mm);
80010b48:	0c004c37 	jal	800130dc <unlock_mm>
80010b4c:	2411ffea 	li	s1,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1701
			return -E_INVAL;
80010b50:	080042cc 	j	80010b30 <do_linux_sleep+0x108>
80010b54:	8fbf0034 	lw	ra,52(sp)

80010b58 <__do_linux_mmap>:
__do_linux_mmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1711
}

int
__do_linux_mmap(uintptr_t __user * addr_store, size_t len, uint32_t mmap_flags)
{
	struct mm_struct *mm = current->mm;
80010b58:	3c028015 	lui	v0,0x8015
80010b5c:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1710
	return ret;
}

int
__do_linux_mmap(uintptr_t __user * addr_store, size_t len, uint32_t mmap_flags)
{
80010b60:	27bdffd0 	addiu	sp,sp,-48
80010b64:	afb20028 	sw	s2,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1711
	struct mm_struct *mm = current->mm;
80010b68:	8c520020 	lw	s2,32(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1710
	return ret;
}

int
__do_linux_mmap(uintptr_t __user * addr_store, size_t len, uint32_t mmap_flags)
{
80010b6c:	afb10024 	sw	s1,36(sp)
80010b70:	afbf002c 	sw	ra,44(sp)
80010b74:	afb00020 	sw	s0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1712
	struct mm_struct *mm = current->mm;
	if (mm == NULL) {
80010b78:	12400031 	beqz	s2,80010c40 <__do_linux_mmap+0xe8>
80010b7c:	00808821 	move	s1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1715
		panic("kernel thread call mmap!!.\n");
	}
	if (addr_store == NULL || len == 0) {
80010b80:	1080001d 	beqz	a0,80010bf8 <__do_linux_mmap+0xa0>
80010b84:	2402ffea 	li	v0,-22
80010b88:	10a0001b 	beqz	a1,80010bf8 <__do_linux_mmap+0xa0>
80010b8c:	2403f000 	li	v1,-4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1722
	}

	int ret = -E_INVAL;

	uintptr_t addr;
	addr = *addr_store;
80010b90:	8c820000 	lw	v0,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1733
	uint32_t vm_flags = VM_READ;

	/* set anonymous flag */
	vm_flags |= VM_ANONYMOUS;

	if (mmap_flags & MMAP_WRITE)
80010b94:	30c40100 	andi	a0,a2,0x100
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1725

	uintptr_t addr;
	addr = *addr_store;

	uintptr_t start = ROUNDDOWN(addr, PGSIZE), end =
	    ROUNDUP(addr + len, PGSIZE);
80010b98:	00a22821 	addu	a1,a1,v0
80010b9c:	24a50fff 	addiu	a1,a1,4095
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1724
	int ret = -E_INVAL;

	uintptr_t addr;
	addr = *addr_store;

	uintptr_t start = ROUNDDOWN(addr, PGSIZE), end =
80010ba0:	00431024 	and	v0,v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1734

	/* set anonymous flag */
	vm_flags |= VM_ANONYMOUS;

	if (mmap_flags & MMAP_WRITE)
		vm_flags |= VM_WRITE;
80010ba4:	24070023 	li	a3,35
80010ba8:	24030021 	li	v1,33
80010bac:	0064380a 	movz	a3,v1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1725

	uintptr_t addr;
	addr = *addr_store;

	uintptr_t start = ROUNDDOWN(addr, PGSIZE), end =
	    ROUNDUP(addr + len, PGSIZE);
80010bb0:	30a30fff 	andi	v1,a1,0xfff
80010bb4:	00a32823 	subu	a1,a1,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1735
	/* set anonymous flag */
	vm_flags |= VM_ANONYMOUS;

	if (mmap_flags & MMAP_WRITE)
		vm_flags |= VM_WRITE;
	if (mmap_flags & MMAP_STACK)
80010bb8:	30c40200 	andi	a0,a2,0x200
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1736
		vm_flags |= VM_STACK;
80010bbc:	34e30008 	ori	v1,a3,0x8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1739

	ret = -E_NO_MEM;
	if (addr == 0) {
80010bc0:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1726
	uintptr_t addr;
	addr = *addr_store;

	uintptr_t start = ROUNDDOWN(addr, PGSIZE), end =
	    ROUNDUP(addr + len, PGSIZE);
	addr = start, len = end - start;
80010bc4:	00a23023 	subu	a2,a1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1739
		vm_flags |= VM_WRITE;
	if (mmap_flags & MMAP_STACK)
		vm_flags |= VM_STACK;

	ret = -E_NO_MEM;
	if (addr == 0) {
80010bc8:	14400011 	bnez	v0,80010c10 <__do_linux_mmap+0xb8>
80010bcc:	0064380b 	movn	a3,v1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1740
		if ((addr = get_unmapped_area(mm, len)) == 0) {
80010bd0:	00c02821 	move	a1,a2
80010bd4:	02402021 	move	a0,s2
80010bd8:	afa6001c 	sw	a2,28(sp)
80010bdc:	0c00501c 	jal	80014070 <get_unmapped_area>
80010be0:	afa70018 	sw	a3,24(sp)
80010be4:	00408021 	move	s0,v0
80010be8:	8fa6001c 	lw	a2,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1738
	if (mmap_flags & MMAP_WRITE)
		vm_flags |= VM_WRITE;
	if (mmap_flags & MMAP_STACK)
		vm_flags |= VM_STACK;

	ret = -E_NO_MEM;
80010bec:	2402fff4 	li	v0,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1740
	if (addr == 0) {
		if ((addr = get_unmapped_area(mm, len)) == 0) {
80010bf0:	16000007 	bnez	s0,80010c10 <__do_linux_mmap+0xb8>
80010bf4:	8fa70018 	lw	a3,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1749
	if ((ret = mm_map(mm, addr, len, vm_flags, NULL)) == 0) {
		*addr_store = addr;
	}
out_unlock:
	return ret;
}
80010bf8:	8fbf002c 	lw	ra,44(sp)
80010bfc:	8fb20028 	lw	s2,40(sp)
80010c00:	8fb10024 	lw	s1,36(sp)
80010c04:	8fb00020 	lw	s0,32(sp)
80010c08:	03e00008 	jr	ra
80010c0c:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1744
	if (addr == 0) {
		if ((addr = get_unmapped_area(mm, len)) == 0) {
			goto out_unlock;
		}
	}
	if ((ret = mm_map(mm, addr, len, vm_flags, NULL)) == 0) {
80010c10:	02402021 	move	a0,s2
80010c14:	02002821 	move	a1,s0
80010c18:	0c004e4a 	jal	80013928 <mm_map>
80010c1c:	afa00010 	sw	zero,16(sp)
80010c20:	1440fff6 	bnez	v0,80010bfc <__do_linux_mmap+0xa4>
80010c24:	8fbf002c 	lw	ra,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1745
		*addr_store = addr;
80010c28:	ae300000 	sw	s0,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1749
	}
out_unlock:
	return ret;
}
80010c2c:	8fb20028 	lw	s2,40(sp)
80010c30:	8fb10024 	lw	s1,36(sp)
80010c34:	8fb00020 	lw	s0,32(sp)
80010c38:	03e00008 	jr	ra
80010c3c:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1713
int
__do_linux_mmap(uintptr_t __user * addr_store, size_t len, uint32_t mmap_flags)
{
	struct mm_struct *mm = current->mm;
	if (mm == NULL) {
		panic("kernel thread call mmap!!.\n");
80010c40:	3c048002 	lui	a0,0x8002
80010c44:	3c068002 	lui	a2,0x8002
80010c48:	24842a98 	addiu	a0,a0,10904
80010c4c:	240506b1 	li	a1,1713
80010c50:	0c006b0b 	jal	8001ac2c <__panic>
80010c54:	24c62e94 	addiu	a2,a2,11924

80010c58 <do_mmap>:
do_mmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1754
}

// do_mmap - add a vma with addr, len and flags(VM_READ/M_WRITE/VM_STACK)
int do_mmap(uintptr_t __user * addr_store, size_t len, uint32_t mmap_flags)
{
	struct mm_struct *mm = current->mm;
80010c58:	3c028015 	lui	v0,0x8015
80010c5c:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1753
	return ret;
}

// do_mmap - add a vma with addr, len and flags(VM_READ/M_WRITE/VM_STACK)
int do_mmap(uintptr_t __user * addr_store, size_t len, uint32_t mmap_flags)
{
80010c60:	27bdffb8 	addiu	sp,sp,-72
80010c64:	afb0002c 	sw	s0,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1754
	struct mm_struct *mm = current->mm;
80010c68:	8c500020 	lw	s0,32(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1753
	return ret;
}

// do_mmap - add a vma with addr, len and flags(VM_READ/M_WRITE/VM_STACK)
int do_mmap(uintptr_t __user * addr_store, size_t len, uint32_t mmap_flags)
{
80010c6c:	afb50040 	sw	s5,64(sp)
80010c70:	afb30038 	sw	s3,56(sp)
80010c74:	afb10030 	sw	s1,48(sp)
80010c78:	afbf0044 	sw	ra,68(sp)
80010c7c:	afb4003c 	sw	s4,60(sp)
80010c80:	afb20034 	sw	s2,52(sp)
80010c84:	00808821 	move	s1,a0
80010c88:	00a09821 	move	s3,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1755
	struct mm_struct *mm = current->mm;
	if (mm == NULL) {
80010c8c:	12000042 	beqz	s0,80010d98 <do_mmap+0x140>
80010c90:	00c0a821 	move	s5,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1758
		panic("kernel thread call mmap!!.\n");
	}
	if (addr_store == NULL || len == 0) {
80010c94:	10800010 	beqz	a0,80010cd8 <do_mmap+0x80>
80010c98:	2412ffea 	li	s2,-22
80010c9c:	10a0000f 	beqz	a1,80010cdc <do_mmap+0x84>
80010ca0:	8fbf0044 	lw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1766

	int ret = -E_INVAL;

	uintptr_t addr;

	lock_mm(mm);
80010ca4:	0c004c26 	jal	80013098 <lock_mm>
80010ca8:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1767
	if (!copy_from_user(mm, &addr, addr_store, sizeof(uintptr_t), 1)) {
80010cac:	24140001 	li	s4,1
80010cb0:	02002021 	move	a0,s0
80010cb4:	27a50018 	addiu	a1,sp,24
80010cb8:	02203021 	move	a2,s1
80010cbc:	24070004 	li	a3,4
80010cc0:	0c00792e 	jal	8001e4b8 <copy_from_user>
80010cc4:	afb40010 	sw	s4,16(sp)
80010cc8:	1440000d 	bnez	v0,80010d00 <do_mmap+0xa8>
80010ccc:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1791
	}
	if ((ret = mm_map(mm, addr, len, vm_flags, NULL)) == 0) {
		copy_to_user(mm, addr_store, &addr, sizeof(uintptr_t));
	}
out_unlock:
	unlock_mm(mm);
80010cd0:	0c004c37 	jal	800130dc <unlock_mm>
80010cd4:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1793
	return ret;
}
80010cd8:	8fbf0044 	lw	ra,68(sp)
80010cdc:	02401021 	move	v0,s2
80010ce0:	8fb50040 	lw	s5,64(sp)
80010ce4:	8fb4003c 	lw	s4,60(sp)
80010ce8:	8fb30038 	lw	s3,56(sp)
80010cec:	8fb20034 	lw	s2,52(sp)
80010cf0:	8fb10030 	lw	s1,48(sp)
80010cf4:	8fb0002c 	lw	s0,44(sp)
80010cf8:	03e00008 	jr	ra
80010cfc:	27bd0048 	addiu	sp,sp,72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1776
	uintptr_t start = ROUNDDOWN(addr, PGSIZE), end =
	    ROUNDUP(addr + len, PGSIZE);
	addr = start, len = end - start;

	uint32_t vm_flags = VM_READ;
	if (mmap_flags & MMAP_WRITE)
80010d00:	32a30100 	andi	v1,s5,0x100
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1777
		vm_flags |= VM_WRITE;
80010d04:	24070003 	li	a3,3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1772
	if (!copy_from_user(mm, &addr, addr_store, sizeof(uintptr_t), 1)) {
		goto out_unlock;
	}

	uintptr_t start = ROUNDDOWN(addr, PGSIZE), end =
	    ROUNDUP(addr + len, PGSIZE);
80010d08:	24460fff 	addiu	a2,v0,4095
80010d0c:	00d39821 	addu	s3,a2,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1777
	addr = start, len = end - start;

	uint32_t vm_flags = VM_READ;
	if (mmap_flags & MMAP_WRITE)
		vm_flags |= VM_WRITE;
80010d10:	0283380a 	movz	a3,s4,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1772
	if (!copy_from_user(mm, &addr, addr_store, sizeof(uintptr_t), 1)) {
		goto out_unlock;
	}

	uintptr_t start = ROUNDDOWN(addr, PGSIZE), end =
	    ROUNDUP(addr + len, PGSIZE);
80010d14:	32660fff 	andi	a2,s3,0xfff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1771
	lock_mm(mm);
	if (!copy_from_user(mm, &addr, addr_store, sizeof(uintptr_t), 1)) {
		goto out_unlock;
	}

	uintptr_t start = ROUNDDOWN(addr, PGSIZE), end =
80010d18:	2405f000 	li	a1,-4096
80010d1c:	00452824 	and	a1,v0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1772
	    ROUNDUP(addr + len, PGSIZE);
80010d20:	02669823 	subu	s3,s3,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1778
	addr = start, len = end - start;

	uint32_t vm_flags = VM_READ;
	if (mmap_flags & MMAP_WRITE)
		vm_flags |= VM_WRITE;
	if (mmap_flags & MMAP_STACK)
80010d24:	32b50200 	andi	s5,s5,0x200
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1779
		vm_flags |= VM_STACK;
80010d28:	34e20008 	ori	v0,a3,0x8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1773
		goto out_unlock;
	}

	uintptr_t start = ROUNDDOWN(addr, PGSIZE), end =
	    ROUNDUP(addr + len, PGSIZE);
	addr = start, len = end - start;
80010d2c:	afa50018 	sw	a1,24(sp)
80010d30:	02653023 	subu	a2,s3,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1782
		vm_flags |= VM_WRITE;
	if (mmap_flags & MMAP_STACK)
		vm_flags |= VM_STACK;

	ret = -E_NO_MEM;
	if (addr == 0) {
80010d34:	14a0000c 	bnez	a1,80010d68 <do_mmap+0x110>
80010d38:	0055380b 	movn	a3,v0,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1783
		if ((addr = get_unmapped_area(mm, len)) == 0) {
80010d3c:	00c02821 	move	a1,a2
80010d40:	02002021 	move	a0,s0
80010d44:	afa60024 	sw	a2,36(sp)
80010d48:	0c00501c 	jal	80014070 <get_unmapped_area>
80010d4c:	afa70020 	sw	a3,32(sp)
80010d50:	00402821 	move	a1,v0
80010d54:	afa20018 	sw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1781
	if (mmap_flags & MMAP_WRITE)
		vm_flags |= VM_WRITE;
	if (mmap_flags & MMAP_STACK)
		vm_flags |= VM_STACK;

	ret = -E_NO_MEM;
80010d58:	2412fff4 	li	s2,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1783
	if (addr == 0) {
		if ((addr = get_unmapped_area(mm, len)) == 0) {
80010d5c:	8fa60024 	lw	a2,36(sp)
80010d60:	1040ffdb 	beqz	v0,80010cd0 <do_mmap+0x78>
80010d64:	8fa70020 	lw	a3,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1787
			goto out_unlock;
		}
	}
	if ((ret = mm_map(mm, addr, len, vm_flags, NULL)) == 0) {
80010d68:	02002021 	move	a0,s0
80010d6c:	0c004e4a 	jal	80013928 <mm_map>
80010d70:	afa00010 	sw	zero,16(sp)
80010d74:	1440ffd6 	bnez	v0,80010cd0 <do_mmap+0x78>
80010d78:	00409021 	move	s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1788
		copy_to_user(mm, addr_store, &addr, sizeof(uintptr_t));
80010d7c:	02002021 	move	a0,s0
80010d80:	02202821 	move	a1,s1
80010d84:	27a60018 	addiu	a2,sp,24
80010d88:	0c007948 	jal	8001e520 <copy_to_user>
80010d8c:	24070004 	li	a3,4
80010d90:	08004334 	j	80010cd0 <do_mmap+0x78>
80010d94:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1756
// do_mmap - add a vma with addr, len and flags(VM_READ/M_WRITE/VM_STACK)
int do_mmap(uintptr_t __user * addr_store, size_t len, uint32_t mmap_flags)
{
	struct mm_struct *mm = current->mm;
	if (mm == NULL) {
		panic("kernel thread call mmap!!.\n");
80010d98:	3c048002 	lui	a0,0x8002
80010d9c:	3c068002 	lui	a2,0x8002
80010da0:	24842a98 	addiu	a0,a0,10904
80010da4:	240506dc 	li	a1,1756
80010da8:	0c006b0b 	jal	8001ac2c <__panic>
80010dac:	24c62e94 	addiu	a2,a2,11924

80010db0 <do_munmap>:
do_munmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1798
}

// do_munmap - delete vma with addr & len
int do_munmap(uintptr_t addr, size_t len)
{
	struct mm_struct *mm = current->mm;
80010db0:	3c028015 	lui	v0,0x8015
80010db4:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1797
	return ret;
}

// do_munmap - delete vma with addr & len
int do_munmap(uintptr_t addr, size_t len)
{
80010db8:	27bdffd8 	addiu	sp,sp,-40
80010dbc:	afb0001c 	sw	s0,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1798
	struct mm_struct *mm = current->mm;
80010dc0:	8c500020 	lw	s0,32(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1797
	return ret;
}

// do_munmap - delete vma with addr & len
int do_munmap(uintptr_t addr, size_t len)
{
80010dc4:	afb10020 	sw	s1,32(sp)
80010dc8:	afbf0024 	sw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1799
	struct mm_struct *mm = current->mm;
	if (mm == NULL) {
80010dcc:	12000013 	beqz	s0,80010e1c <do_munmap+0x6c>
80010dd0:	00808821 	move	s1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1802
		panic("kernel thread call munmap!!.\n");
	}
	if (len == 0) {
80010dd4:	10a0000c 	beqz	a1,80010e08 <do_munmap+0x58>
80010dd8:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1806
		return -E_INVAL;
	}
	int ret;
	lock_mm(mm);
80010ddc:	02002021 	move	a0,s0
80010de0:	0c004c26 	jal	80013098 <lock_mm>
80010de4:	afa50010 	sw	a1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1808
	{
		ret = mm_unmap(mm, addr, len);
80010de8:	8fa60010 	lw	a2,16(sp)
80010dec:	02002021 	move	a0,s0
80010df0:	0c004edb 	jal	80013b6c <mm_unmap>
80010df4:	02202821 	move	a1,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1810
	}
	unlock_mm(mm);
80010df8:	02002021 	move	a0,s0
80010dfc:	0c004c37 	jal	800130dc <unlock_mm>
80010e00:	afa20010 	sw	v0,16(sp)
80010e04:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1812
	return ret;
}
80010e08:	8fbf0024 	lw	ra,36(sp)
80010e0c:	8fb10020 	lw	s1,32(sp)
80010e10:	8fb0001c 	lw	s0,28(sp)
80010e14:	03e00008 	jr	ra
80010e18:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1800
// do_munmap - delete vma with addr & len
int do_munmap(uintptr_t addr, size_t len)
{
	struct mm_struct *mm = current->mm;
	if (mm == NULL) {
		panic("kernel thread call munmap!!.\n");
80010e1c:	3c048002 	lui	a0,0x8002
80010e20:	3c068002 	lui	a2,0x8002
80010e24:	24842a98 	addiu	a0,a0,10904
80010e28:	24050708 	li	a1,1800
80010e2c:	0c006b0b 	jal	8001ac2c <__panic>
80010e30:	24c62eb0 	addiu	a2,a2,11952

80010e34 <do_shmem>:
do_shmem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1895
#endif //UCONFIG_BIONIC_LIBC

// do_shmem - create a share memory with addr, len, flags(VM_READ/M_WRITE/VM_STACK)
int do_shmem(uintptr_t * addr_store, size_t len, uint32_t mmap_flags)
{
	struct mm_struct *mm = current->mm;
80010e34:	3c028015 	lui	v0,0x8015
80010e38:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1894

#endif //UCONFIG_BIONIC_LIBC

// do_shmem - create a share memory with addr, len, flags(VM_READ/M_WRITE/VM_STACK)
int do_shmem(uintptr_t * addr_store, size_t len, uint32_t mmap_flags)
{
80010e3c:	27bdffc0 	addiu	sp,sp,-64
80010e40:	afb00024 	sw	s0,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1895
	struct mm_struct *mm = current->mm;
80010e44:	8c500020 	lw	s0,32(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1894

#endif //UCONFIG_BIONIC_LIBC

// do_shmem - create a share memory with addr, len, flags(VM_READ/M_WRITE/VM_STACK)
int do_shmem(uintptr_t * addr_store, size_t len, uint32_t mmap_flags)
{
80010e48:	afb40034 	sw	s4,52(sp)
80010e4c:	afb2002c 	sw	s2,44(sp)
80010e50:	afb10028 	sw	s1,40(sp)
80010e54:	afbf003c 	sw	ra,60(sp)
80010e58:	afb50038 	sw	s5,56(sp)
80010e5c:	afb30030 	sw	s3,48(sp)
80010e60:	00808821 	move	s1,a0
80010e64:	00a09021 	move	s2,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1896
	struct mm_struct *mm = current->mm;
	if (mm == NULL) {
80010e68:	12000051 	beqz	s0,80010fb0 <do_shmem+0x17c>
80010e6c:	00c0a021 	move	s4,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1899
		panic("kernel thread call mmap!!.\n");
	}
	if (addr_store == NULL || len == 0) {
80010e70:	10800030 	beqz	a0,80010f34 <do_shmem+0x100>
80010e74:	2413ffea 	li	s3,-22
80010e78:	10a0002f 	beqz	a1,80010f38 <do_shmem+0x104>
80010e7c:	8fbf003c 	lw	ra,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1907

	int ret = -E_INVAL;

	uintptr_t addr;

	lock_mm(mm);
80010e80:	0c004c26 	jal	80013098 <lock_mm>
80010e84:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1908
	if (!copy_from_user(mm, &addr, addr_store, sizeof(uintptr_t), 1)) {
80010e88:	24130001 	li	s3,1
80010e8c:	02002021 	move	a0,s0
80010e90:	27a50018 	addiu	a1,sp,24
80010e94:	02203021 	move	a2,s1
80010e98:	24070004 	li	a3,4
80010e9c:	0c00792e 	jal	8001e4b8 <copy_from_user>
80010ea0:	afb30010 	sw	s3,16(sp)
80010ea4:	10400039 	beqz	v0,80010f8c <do_shmem+0x158>
80010ea8:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1917
	uintptr_t start = ROUNDDOWN(addr, PGSIZE), end =
	    ROUNDUP(addr + len, PGSIZE);
	addr = start, len = end - start;

	uint32_t vm_flags = VM_READ;
	if (mmap_flags & MMAP_WRITE)
80010eac:	32830100 	andi	v1,s4,0x100
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1918
		vm_flags |= VM_WRITE;
80010eb0:	24150003 	li	s5,3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1913
	if (!copy_from_user(mm, &addr, addr_store, sizeof(uintptr_t), 1)) {
		goto out_unlock;
	}

	uintptr_t start = ROUNDDOWN(addr, PGSIZE), end =
	    ROUNDUP(addr + len, PGSIZE);
80010eb4:	24440fff 	addiu	a0,v0,4095
80010eb8:	00929021 	addu	s2,a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1918
	addr = start, len = end - start;

	uint32_t vm_flags = VM_READ;
	if (mmap_flags & MMAP_WRITE)
		vm_flags |= VM_WRITE;
80010ebc:	0263a80a 	movz	s5,s3,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1912
	lock_mm(mm);
	if (!copy_from_user(mm, &addr, addr_store, sizeof(uintptr_t), 1)) {
		goto out_unlock;
	}

	uintptr_t start = ROUNDDOWN(addr, PGSIZE), end =
80010ec0:	2404f000 	li	a0,-4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1913
	    ROUNDUP(addr + len, PGSIZE);
80010ec4:	32430fff 	andi	v1,s2,0xfff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1912
	lock_mm(mm);
	if (!copy_from_user(mm, &addr, addr_store, sizeof(uintptr_t), 1)) {
		goto out_unlock;
	}

	uintptr_t start = ROUNDDOWN(addr, PGSIZE), end =
80010ec8:	00441024 	and	v0,v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1913
	    ROUNDUP(addr + len, PGSIZE);
80010ecc:	02439023 	subu	s2,s2,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1919
	addr = start, len = end - start;

	uint32_t vm_flags = VM_READ;
	if (mmap_flags & MMAP_WRITE)
		vm_flags |= VM_WRITE;
	if (mmap_flags & MMAP_STACK)
80010ed0:	32940200 	andi	s4,s4,0x200
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1920
		vm_flags |= VM_STACK;
80010ed4:	36a30008 	ori	v1,s5,0x8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1914
		goto out_unlock;
	}

	uintptr_t start = ROUNDDOWN(addr, PGSIZE), end =
	    ROUNDUP(addr + len, PGSIZE);
	addr = start, len = end - start;
80010ed8:	afa20018 	sw	v0,24(sp)
80010edc:	02429023 	subu	s2,s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1923
		vm_flags |= VM_WRITE;
	if (mmap_flags & MMAP_STACK)
		vm_flags |= VM_STACK;

	ret = -E_NO_MEM;
	if (addr == 0) {
80010ee0:	1040001e 	beqz	v0,80010f5c <do_shmem+0x128>
80010ee4:	0074a80b 	movn	s5,v1,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1929
		if ((addr = get_unmapped_area(mm, len)) == 0) {
			goto out_unlock;
		}
	}
	struct shmem_struct *shmem;
	if ((shmem = shmem_create(len)) == NULL) {
80010ee8:	0c0049e6 	jal	80012798 <shmem_create>
80010eec:	02402021 	move	a0,s2
80010ef0:	10400024 	beqz	v0,80010f84 <do_shmem+0x150>
80010ef4:	00409021 	move	s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1932
		goto out_unlock;
	}
	if ((ret = mm_map_shmem(mm, addr, vm_flags, shmem, NULL)) != 0) {
80010ef8:	8fa50018 	lw	a1,24(sp)
80010efc:	02002021 	move	a0,s0
80010f00:	02a03021 	move	a2,s5
80010f04:	00403821 	move	a3,v0
80010f08:	0c004e88 	jal	80013a20 <mm_map_shmem>
80010f0c:	afa00010 	sw	zero,16(sp)
80010f10:	10400020 	beqz	v0,80010f94 <do_shmem+0x160>
80010f14:	00409821 	move	s3,v0
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
 *
 * Atomically reads the value of @v.
 * */
static __always_inline int atomic_read(const atomic_t * v)
{
	return v->counter;
80010f18:	8e420010 	lw	v0,16(s2)
do_shmem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1933
		assert(shmem_ref(shmem) == 0);
80010f1c:	1440002a 	bnez	v0,80010fc8 <do_shmem+0x194>
80010f20:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1934
		shmem_destroy(shmem);
80010f24:	0c0049fc 	jal	800127f0 <shmem_destroy>
80010f28:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1939
		goto out_unlock;
	}
	copy_to_user(mm, addr_store, &addr, sizeof(uintptr_t));
out_unlock:
	unlock_mm(mm);
80010f2c:	0c004c37 	jal	800130dc <unlock_mm>
80010f30:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1941
	return ret;
}
80010f34:	8fbf003c 	lw	ra,60(sp)
80010f38:	02601021 	move	v0,s3
80010f3c:	8fb50038 	lw	s5,56(sp)
80010f40:	8fb40034 	lw	s4,52(sp)
80010f44:	8fb30030 	lw	s3,48(sp)
80010f48:	8fb2002c 	lw	s2,44(sp)
80010f4c:	8fb10028 	lw	s1,40(sp)
80010f50:	8fb00024 	lw	s0,36(sp)
80010f54:	03e00008 	jr	ra
80010f58:	27bd0040 	addiu	sp,sp,64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1924
	if (mmap_flags & MMAP_STACK)
		vm_flags |= VM_STACK;

	ret = -E_NO_MEM;
	if (addr == 0) {
		if ((addr = get_unmapped_area(mm, len)) == 0) {
80010f5c:	02002021 	move	a0,s0
80010f60:	0c00501c 	jal	80014070 <get_unmapped_area>
80010f64:	02402821 	move	a1,s2
80010f68:	afa20018 	sw	v0,24(sp)
80010f6c:	1040ffef 	beqz	v0,80010f2c <do_shmem+0xf8>
80010f70:	2413fff4 	li	s3,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1929
			goto out_unlock;
		}
	}
	struct shmem_struct *shmem;
	if ((shmem = shmem_create(len)) == NULL) {
80010f74:	0c0049e6 	jal	80012798 <shmem_create>
80010f78:	02402021 	move	a0,s2
80010f7c:	1440ffde 	bnez	v0,80010ef8 <do_shmem+0xc4>
80010f80:	00409021 	move	s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1922
	if (mmap_flags & MMAP_WRITE)
		vm_flags |= VM_WRITE;
	if (mmap_flags & MMAP_STACK)
		vm_flags |= VM_STACK;

	ret = -E_NO_MEM;
80010f84:	080043cb 	j	80010f2c <do_shmem+0xf8>
80010f88:	2413fff4 	li	s3,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1903
	}
	if (addr_store == NULL || len == 0) {
		return -E_INVAL;
	}

	int ret = -E_INVAL;
80010f8c:	080043cb 	j	80010f2c <do_shmem+0xf8>
80010f90:	2413ffea 	li	s3,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1937
	if ((ret = mm_map_shmem(mm, addr, vm_flags, shmem, NULL)) != 0) {
		assert(shmem_ref(shmem) == 0);
		shmem_destroy(shmem);
		goto out_unlock;
	}
	copy_to_user(mm, addr_store, &addr, sizeof(uintptr_t));
80010f94:	02002021 	move	a0,s0
80010f98:	02202821 	move	a1,s1
80010f9c:	27a60018 	addiu	a2,sp,24
80010fa0:	0c007948 	jal	8001e520 <copy_to_user>
80010fa4:	24070004 	li	a3,4
80010fa8:	080043cb 	j	80010f2c <do_shmem+0xf8>
80010fac:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1897
// do_shmem - create a share memory with addr, len, flags(VM_READ/M_WRITE/VM_STACK)
int do_shmem(uintptr_t * addr_store, size_t len, uint32_t mmap_flags)
{
	struct mm_struct *mm = current->mm;
	if (mm == NULL) {
		panic("kernel thread call mmap!!.\n");
80010fb0:	3c048002 	lui	a0,0x8002
80010fb4:	3c068002 	lui	a2,0x8002
80010fb8:	24842a98 	addiu	a0,a0,10904
80010fbc:	24050769 	li	a1,1897
80010fc0:	0c006b0b 	jal	8001ac2c <__panic>
80010fc4:	24c62e94 	addiu	a2,a2,11924
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:1933
	struct shmem_struct *shmem;
	if ((shmem = shmem_create(len)) == NULL) {
		goto out_unlock;
	}
	if ((ret = mm_map_shmem(mm, addr, vm_flags, shmem, NULL)) != 0) {
		assert(shmem_ref(shmem) == 0);
80010fc8:	3c068002 	lui	a2,0x8002
80010fcc:	3c078002 	lui	a3,0x8002
80010fd0:	24842a98 	addiu	a0,a0,10904
80010fd4:	2405078d 	li	a1,1933
80010fd8:	24c60e28 	addiu	a2,a2,3624
80010fdc:	0c006b0b 	jal	8001ac2c <__panic>
80010fe0:	24e72ed0 	addiu	a3,a3,11984

80010fe4 <proc_init>:
proc_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2044
}

// proc_init - set up the first kernel thread idleproc "idle" by itself and 
//           - create the second kernel thread init_main
void proc_init(void)
{
80010fe4:	27bdffb8 	addiu	sp,sp,-72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2046
	int i;
	int lcpu_idx = pls_read(lcpu_idx);
80010fe8:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2044
}

// proc_init - set up the first kernel thread idleproc "idle" by itself and 
//           - create the second kernel thread init_main
void proc_init(void)
{
80010fec:	afb10034 	sw	s1,52(sp)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
80010ff0:	3c058015 	lui	a1,0x8015
proc_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2046
	int i;
	int lcpu_idx = pls_read(lcpu_idx);
80010ff4:	8c517790 	lw	s1,30608(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2047
	int lapic_id = pls_read(lapic_id);
80010ff8:	3c028015 	lui	v0,0x8015
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
80010ffc:	24a37788 	addiu	v1,a1,30600
proc_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2044
}

// proc_init - set up the first kernel thread idleproc "idle" by itself and 
//           - create the second kernel thread init_main
void proc_init(void)
{
80011000:	afb40040 	sw	s4,64(sp)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
80011004:	3c048015 	lui	a0,0x8015
proc_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2047
	int i;
	int lcpu_idx = pls_read(lcpu_idx);
	int lapic_id = pls_read(lapic_id);
80011008:	8c5477b0 	lw	s4,30640(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2048
	int lcpu_count = pls_read(lcpu_count);
8001100c:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2044
}

// proc_init - set up the first kernel thread idleproc "idle" by itself and 
//           - create the second kernel thread init_main
void proc_init(void)
{
80011010:	afb20038 	sw	s2,56(sp)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
80011014:	aca37788 	sw	v1,30600(a1)
proc_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2048
	int i;
	int lcpu_idx = pls_read(lcpu_idx);
	int lapic_id = pls_read(lapic_id);
	int lcpu_count = pls_read(lcpu_count);
80011018:	8c5277a0 	lw	s2,30624(v0)
8001101c:	3c058015 	lui	a1,0x8015
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
80011020:	24827780 	addiu	v0,a0,30592
proc_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2044
}

// proc_init - set up the first kernel thread idleproc "idle" by itself and 
//           - create the second kernel thread init_main
void proc_init(void)
{
80011024:	afbf0044 	sw	ra,68(sp)
80011028:	afb3003c 	sw	s3,60(sp)
8001102c:	afb00030 	sw	s0,48(sp)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
80011030:	ac827780 	sw	v0,30592(a0)
80011034:	ac630004 	sw	v1,4(v1)
80011038:	ac420004 	sw	v0,4(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2052
	int lapic_id = pls_read(lapic_id);
	int lcpu_count = pls_read(lcpu_count);

	list_init(&proc_list);
	list_init(&proc_mm_list);
	for (i = 0; i < HASH_LIST_SIZE; i++) {
8001103c:	00001821 	move	v1,zero
80011040:	24a54548 	addiu	a1,a1,17736
proc_init():
80011044:	24040400 	li	a0,1024
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2053
		list_init(hash_list + i);
80011048:	000310c0 	sll	v0,v1,0x3
8001104c:	00a21021 	addu	v0,a1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2052
	int lapic_id = pls_read(lapic_id);
	int lcpu_count = pls_read(lcpu_count);

	list_init(&proc_list);
	list_init(&proc_mm_list);
	for (i = 0; i < HASH_LIST_SIZE; i++) {
80011050:	24630001 	addiu	v1,v1,1
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
80011054:	ac420004 	sw	v0,4(v0)
proc_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2052
80011058:	1464fffb 	bne	v1,a0,80011048 <proc_init+0x64>
8001105c:	ac420000 	sw	v0,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2056
		list_init(hash_list + i);
	}

	pls_write(idleproc, alloc_proc());
80011060:	0c0079a0 	jal	8001e680 <alloc_proc>
80011064:	3c108015 	lui	s0,0x8015
80011068:	00409821 	move	s3,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2057
	if (idleproc == NULL) {
8001106c:	10400056 	beqz	v0,800111c8 <proc_init+0x1e4>
80011070:	ae0277a8 	sw	v0,30632(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2061
		panic("cannot alloc idleproc.\n");
	}

	idleproc->pid = lcpu_idx;
80011074:	ac510004 	sw	s1,4(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2062
	idleproc->state = PROC_RUNNABLE;
80011078:	24020002 	li	v0,2
8001107c:	ae620000 	sw	v0,0(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2065
	// XXX
	// idleproc->kstack = (uintptr_t)bootstack;
	idleproc->need_resched = 1;
80011080:	24020001 	li	v0,1
80011084:	ae620018 	sw	v0,24(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2067
	idleproc->tf = NULL;
	if ((idleproc->fs_struct = fs_create()) == NULL) {
80011088:	0c003284 	jal	8000ca10 <fs_create>
8001108c:	ae600054 	sw	zero,84(s3)
80011090:	10400047 	beqz	v0,800111b0 <proc_init+0x1cc>
80011094:	ae6200bc 	sw	v0,188(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2070
		panic("create fs_struct (idleproc) failed.\n");
	}
	fs_count_inc(idleproc->fs_struct);
80011098:	8e0277a8 	lw	v0,30632(s0)
8001109c:	8c5300bc 	lw	s3,188(v0)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
800110a0:	40026000 	mfc0	v0,c0_status
800110a4:	30420001 	andi	v0,v0,0x1
800110a8:	14400038 	bnez	v0,8001118c <proc_init+0x1a8>
800110ac:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
800110b0:	8e620008 	lw	v0,8(s3)
800110b4:	24420001 	addiu	v0,v0,1
800110b8:	ae620008 	sw	v0,8(s3)
proc_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2073

	char namebuf[32];
	snprintf(namebuf, 32, "idle/%d", lapic_id);
800110bc:	3c068002 	lui	a2,0x8002
800110c0:	24c62f28 	addiu	a2,a2,12072
800110c4:	02803821 	move	a3,s4
800110c8:	27a40010 	addiu	a0,sp,16
800110cc:	24050020 	li	a1,32
fs_count_inc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
800110d0:	8e620008 	lw	v0,8(s3)
proc_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2073
800110d4:	0c005b40 	jal	80016d00 <snprintf>
800110d8:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2075

	set_proc_name(idleproc, namebuf);
800110dc:	8e0477a8 	lw	a0,30632(s0)
800110e0:	0c003aee 	jal	8000ebb8 <set_proc_name>
800110e4:	27a50010 	addiu	a1,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2076
	nr_process++;
800110e8:	3c028015 	lui	v0,0x8015
800110ec:	8c476548 	lw	a3,25928(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2078

	pls_write(current, idleproc);
800110f0:	8e0377a8 	lw	v1,30632(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2080

	int pid = ucore_kernel_thread(init_main, NULL, 0);
800110f4:	3c048001 	lui	a0,0x8001
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2076

	char namebuf[32];
	snprintf(namebuf, 32, "idle/%d", lapic_id);

	set_proc_name(idleproc, namebuf);
	nr_process++;
800110f8:	24e70001 	addiu	a3,a3,1
800110fc:	ac476548 	sw	a3,25928(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2080

	pls_write(current, idleproc);

	int pid = ucore_kernel_thread(init_main, NULL, 0);
80011100:	24840198 	addiu	a0,a0,408
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2078
	snprintf(namebuf, 32, "idle/%d", lapic_id);

	set_proc_name(idleproc, namebuf);
	nr_process++;

	pls_write(current, idleproc);
80011104:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2080

	int pid = ucore_kernel_thread(init_main, NULL, 0);
80011108:	00002821 	move	a1,zero
8001110c:	00003021 	move	a2,zero
80011110:	0c007a35 	jal	8001e8d4 <ucore_kernel_thread>
80011114:	ac4377a4 	sw	v1,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2081
	if (pid <= 0) {
80011118:	1840003f 	blez	v0,80011218 <proc_init+0x234>
8001111c:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2085
		panic("create init_main failed.\n");
	}

	initproc = find_proc(pid);
80011120:	0c003b44 	jal	8000ed10 <find_proc>
80011124:	00402021 	move	a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2086
	set_proc_name(initproc, "kinit");
80011128:	3c058002 	lui	a1,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2085
	int pid = ucore_kernel_thread(init_main, NULL, 0);
	if (pid <= 0) {
		panic("create init_main failed.\n");
	}

	initproc = find_proc(pid);
8001112c:	3c108015 	lui	s0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2086
	set_proc_name(initproc, "kinit");
80011130:	00402021 	move	a0,v0
80011134:	24a52f4c 	addiu	a1,a1,12108
80011138:	0c003aee 	jal	8000ebb8 <set_proc_name>
8001113c:	ae027798 	sw	v0,30616(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2088

	assert(idleproc != NULL && idleproc->pid == lcpu_idx);
80011140:	3c028015 	lui	v0,0x8015
80011144:	8c4277a8 	lw	v0,30632(v0)
80011148:	1040002c 	beqz	v0,800111fc <proc_init+0x218>
8001114c:	3c048002 	lui	a0,0x8002
80011150:	8c420004 	lw	v0,4(v0)
80011154:	14510029 	bne	v0,s1,800111fc <proc_init+0x218>
80011158:	8e027798 	lw	v0,30616(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2089
	assert(initproc != NULL && initproc->pid == lcpu_count);
8001115c:	10400021 	beqz	v0,800111e4 <proc_init+0x200>
80011160:	3c068002 	lui	a2,0x8002
80011164:	8c420004 	lw	v0,4(v0)
80011168:	1452001d 	bne	v0,s2,800111e0 <proc_init+0x1fc>
8001116c:	8fbf0044 	lw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2090
}
80011170:	8fb40040 	lw	s4,64(sp)
80011174:	8fb3003c 	lw	s3,60(sp)
80011178:	8fb20038 	lw	s2,56(sp)
8001117c:	8fb10034 	lw	s1,52(sp)
80011180:	8fb00030 	lw	s0,48(sp)
80011184:	03e00008 	jr	ra
80011188:	27bd0048 	addiu	sp,sp,72
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8001118c:	0c006d04 	jal	8001b410 <intr_disable>
80011190:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
80011194:	8e620008 	lw	v0,8(s3)
80011198:	24420001 	addiu	v0,v0,1
8001119c:	ae620008 	sw	v0,8(s3)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
800111a0:	0c006d00 	jal	8001b400 <intr_enable>
800111a4:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2073
		panic("create fs_struct (idleproc) failed.\n");
	}
	fs_count_inc(idleproc->fs_struct);

	char namebuf[32];
	snprintf(namebuf, 32, "idle/%d", lapic_id);
800111a8:	08004430 	j	800110c0 <proc_init+0xdc>
800111ac:	3c068002 	lui	a2,0x8002
proc_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2068
	// XXX
	// idleproc->kstack = (uintptr_t)bootstack;
	idleproc->need_resched = 1;
	idleproc->tf = NULL;
	if ((idleproc->fs_struct = fs_create()) == NULL) {
		panic("create fs_struct (idleproc) failed.\n");
800111b0:	3c048002 	lui	a0,0x8002
800111b4:	3c068002 	lui	a2,0x8002
800111b8:	24842a98 	addiu	a0,a0,10904
800111bc:	24050814 	li	a1,2068
800111c0:	0c006b0b 	jal	8001ac2c <__panic>
800111c4:	24c62f00 	addiu	a2,a2,12032
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2058
		list_init(hash_list + i);
	}

	pls_write(idleproc, alloc_proc());
	if (idleproc == NULL) {
		panic("cannot alloc idleproc.\n");
800111c8:	3c048002 	lui	a0,0x8002
800111cc:	3c068002 	lui	a2,0x8002
800111d0:	24842a98 	addiu	a0,a0,10904
800111d4:	2405080a 	li	a1,2058
800111d8:	0c006b0b 	jal	8001ac2c <__panic>
800111dc:	24c62ee8 	addiu	a2,a2,12008
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2089

	initproc = find_proc(pid);
	set_proc_name(initproc, "kinit");

	assert(idleproc != NULL && idleproc->pid == lcpu_idx);
	assert(initproc != NULL && initproc->pid == lcpu_count);
800111e0:	3c068002 	lui	a2,0x8002
800111e4:	3c078002 	lui	a3,0x8002
800111e8:	24842a98 	addiu	a0,a0,10904
800111ec:	24050829 	li	a1,2089
800111f0:	24c60e28 	addiu	a2,a2,3624
800111f4:	0c006b0b 	jal	8001ac2c <__panic>
800111f8:	24e72f84 	addiu	a3,a3,12164
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2088
	}

	initproc = find_proc(pid);
	set_proc_name(initproc, "kinit");

	assert(idleproc != NULL && idleproc->pid == lcpu_idx);
800111fc:	3c068002 	lui	a2,0x8002
80011200:	3c078002 	lui	a3,0x8002
80011204:	24842a98 	addiu	a0,a0,10904
80011208:	24050828 	li	a1,2088
8001120c:	24c60e28 	addiu	a2,a2,3624
80011210:	0c006b0b 	jal	8001ac2c <__panic>
80011214:	24e72f54 	addiu	a3,a3,12116
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2082

	pls_write(current, idleproc);

	int pid = ucore_kernel_thread(init_main, NULL, 0);
	if (pid <= 0) {
		panic("create init_main failed.\n");
80011218:	3c068002 	lui	a2,0x8002
8001121c:	24842a98 	addiu	a0,a0,10904
80011220:	24050822 	li	a1,2082
80011224:	0c006b0b 	jal	8001ac2c <__panic>
80011228:	24c62f30 	addiu	a2,a2,12080

8001122c <proc_init_ap>:
proc_init_ap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2093
	assert(idleproc != NULL && idleproc->pid == lcpu_idx);
	assert(initproc != NULL && initproc->pid == lcpu_count);
}

void proc_init_ap(void)
{
8001122c:	27bdffb8 	addiu	sp,sp,-72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2094
	int lcpu_idx = pls_read(lcpu_idx);
80011230:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2093
	assert(idleproc != NULL && idleproc->pid == lcpu_idx);
	assert(initproc != NULL && initproc->pid == lcpu_count);
}

void proc_init_ap(void)
{
80011234:	afb10038 	sw	s1,56(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2094
	int lcpu_idx = pls_read(lcpu_idx);
80011238:	8c517790 	lw	s1,30608(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2095
	int lapic_id = pls_read(lapic_id);
8001123c:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2093
	assert(idleproc != NULL && idleproc->pid == lcpu_idx);
	assert(initproc != NULL && initproc->pid == lcpu_count);
}

void proc_init_ap(void)
{
80011240:	afb30040 	sw	s3,64(sp)
80011244:	afb2003c 	sw	s2,60(sp)
80011248:	afb00034 	sw	s0,52(sp)
8001124c:	afbf0044 	sw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2095
	int lcpu_idx = pls_read(lcpu_idx);
	int lapic_id = pls_read(lapic_id);
80011250:	8c5377b0 	lw	s3,30640(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2097

	pls_write(idleproc, alloc_proc());
80011254:	0c0079a0 	jal	8001e680 <alloc_proc>
80011258:	3c108015 	lui	s0,0x8015
8001125c:	00409021 	move	s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2098
	if (idleproc == NULL) {
80011260:	10400046 	beqz	v0,8001137c <proc_init_ap+0x150>
80011264:	ae0277a8 	sw	v0,30632(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2102
		panic("cannot alloc idleproc.\n");
	}

	idleproc->pid = lcpu_idx;
80011268:	ac510004 	sw	s1,4(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2103
	idleproc->state = PROC_RUNNABLE;
8001126c:	24020002 	li	v0,2
80011270:	ae420000 	sw	v0,0(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2106
	// XXX
	// idleproc->kstack = (uintptr_t)bootstack;
	idleproc->need_resched = 1;
80011274:	24020001 	li	v0,1
80011278:	ae420018 	sw	v0,24(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2108
	idleproc->tf = NULL;
	if ((idleproc->fs_struct = fs_create()) == NULL) {
8001127c:	0c003284 	jal	8000ca10 <fs_create>
80011280:	ae400054 	sw	zero,84(s2)
80011284:	10400037 	beqz	v0,80011364 <proc_init_ap+0x138>
80011288:	ae4200bc 	sw	v0,188(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2111
		panic("create fs_struct (idleproc) failed.\n");
	}
	fs_count_inc(idleproc->fs_struct);
8001128c:	8e0277a8 	lw	v0,30632(s0)
80011290:	8c5200bc 	lw	s2,188(v0)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80011294:	40026000 	mfc0	v0,c0_status
80011298:	30420001 	andi	v0,v0,0x1
8001129c:	14400020 	bnez	v0,80011320 <proc_init_ap+0xf4>
800112a0:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
800112a4:	8e420008 	lw	v0,8(s2)
800112a8:	24420001 	addiu	v0,v0,1
800112ac:	ae420008 	sw	v0,8(s2)
proc_init_ap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2114

	char namebuf[32];
	snprintf(namebuf, 32, "idle/%d", lapic_id);
800112b0:	3c068002 	lui	a2,0x8002
800112b4:	27a40010 	addiu	a0,sp,16
800112b8:	24050020 	li	a1,32
800112bc:	24c62f28 	addiu	a2,a2,12072
800112c0:	02603821 	move	a3,s3
fs_count_inc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
800112c4:	8e420008 	lw	v0,8(s2)
proc_init_ap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2114
800112c8:	0c005b40 	jal	80016d00 <snprintf>
800112cc:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2116

	set_proc_name(idleproc, namebuf);
800112d0:	8e0477a8 	lw	a0,30632(s0)
800112d4:	0c003aee 	jal	8000ebb8 <set_proc_name>
800112d8:	27a50010 	addiu	a1,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2117
	nr_process++;
800112dc:	3c038015 	lui	v1,0x8015
800112e0:	8c646548 	lw	a0,25928(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2119

	pls_write(current, idleproc);
800112e4:	8e0277a8 	lw	v0,30632(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2117

	char namebuf[32];
	snprintf(namebuf, 32, "idle/%d", lapic_id);

	set_proc_name(idleproc, namebuf);
	nr_process++;
800112e8:	24840001 	addiu	a0,a0,1
800112ec:	ac646548 	sw	a0,25928(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2119

	pls_write(current, idleproc);
800112f0:	3c038015 	lui	v1,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2121

	assert(idleproc != NULL && idleproc->pid == lcpu_idx);
800112f4:	10400013 	beqz	v0,80011344 <proc_init_ap+0x118>
800112f8:	ac6277a4 	sw	v0,30628(v1)
800112fc:	8c420004 	lw	v0,4(v0)
80011300:	14510010 	bne	v0,s1,80011344 <proc_init_ap+0x118>
80011304:	8fbf0044 	lw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2122
}
80011308:	8fb30040 	lw	s3,64(sp)
8001130c:	8fb2003c 	lw	s2,60(sp)
80011310:	8fb10038 	lw	s1,56(sp)
80011314:	8fb00034 	lw	s0,52(sp)
80011318:	03e00008 	jr	ra
8001131c:	27bd0048 	addiu	sp,sp,72
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80011320:	0c006d04 	jal	8001b410 <intr_disable>
80011324:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
80011328:	8e420008 	lw	v0,8(s2)
8001132c:	24420001 	addiu	v0,v0,1
80011330:	ae420008 	sw	v0,8(s2)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80011334:	0c006d00 	jal	8001b400 <intr_enable>
80011338:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2114
		panic("create fs_struct (idleproc) failed.\n");
	}
	fs_count_inc(idleproc->fs_struct);

	char namebuf[32];
	snprintf(namebuf, 32, "idle/%d", lapic_id);
8001133c:	080044ad 	j	800112b4 <proc_init_ap+0x88>
80011340:	3c068002 	lui	a2,0x8002
proc_init_ap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2121
	set_proc_name(idleproc, namebuf);
	nr_process++;

	pls_write(current, idleproc);

	assert(idleproc != NULL && idleproc->pid == lcpu_idx);
80011344:	3c048002 	lui	a0,0x8002
80011348:	3c068002 	lui	a2,0x8002
8001134c:	3c078002 	lui	a3,0x8002
80011350:	24842a98 	addiu	a0,a0,10904
80011354:	24050849 	li	a1,2121
80011358:	24c60e28 	addiu	a2,a2,3624
8001135c:	0c006b0b 	jal	8001ac2c <__panic>
80011360:	24e72f54 	addiu	a3,a3,12116
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2109
	// XXX
	// idleproc->kstack = (uintptr_t)bootstack;
	idleproc->need_resched = 1;
	idleproc->tf = NULL;
	if ((idleproc->fs_struct = fs_create()) == NULL) {
		panic("create fs_struct (idleproc) failed.\n");
80011364:	3c048002 	lui	a0,0x8002
80011368:	3c068002 	lui	a2,0x8002
8001136c:	24842a98 	addiu	a0,a0,10904
80011370:	2405083d 	li	a1,2109
80011374:	0c006b0b 	jal	8001ac2c <__panic>
80011378:	24c62f00 	addiu	a2,a2,12032
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2099
	int lcpu_idx = pls_read(lcpu_idx);
	int lapic_id = pls_read(lapic_id);

	pls_write(idleproc, alloc_proc());
	if (idleproc == NULL) {
		panic("cannot alloc idleproc.\n");
8001137c:	3c048002 	lui	a0,0x8002
80011380:	3c068002 	lui	a2,0x8002
80011384:	24842a98 	addiu	a0,a0,10904
80011388:	24050833 	li	a1,2099
8001138c:	0c006b0b 	jal	8001ac2c <__panic>
80011390:	24c62ee8 	addiu	a2,a2,12008

80011394 <do_linux_ugetrlimit>:
do_linux_ugetrlimit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2125

	assert(idleproc != NULL && idleproc->pid == lcpu_idx);
}

int do_linux_ugetrlimit(int res, struct linux_rlimit *__user __limit)
{
80011394:	27bdffd8 	addiu	sp,sp,-40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2127
	struct linux_rlimit limit;
	switch (res) {
80011398:	24020003 	li	v0,3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2125

	assert(idleproc != NULL && idleproc->pid == lcpu_idx);
}

int do_linux_ugetrlimit(int res, struct linux_rlimit *__user __limit)
{
8001139c:	afbf0024 	sw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2127
	struct linux_rlimit limit;
	switch (res) {
800113a0:	10820006 	beq	a0,v0,800113bc <do_linux_ugetrlimit+0x28>
800113a4:	afb00020 	sw	s0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2143
	if (!copy_to_user(mm, __limit, &limit, sizeof(struct linux_rlimit))) {
		ret = -E_INVAL;
	}
	unlock_mm(mm);
	return ret;
}
800113a8:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2133
	case RLIMIT_STACK:
		limit.rlim_cur = USTACKSIZE;
		limit.rlim_max = USTACKSIZE;
		break;
	default:
		return -E_INVAL;
800113ac:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2143
	if (!copy_to_user(mm, __limit, &limit, sizeof(struct linux_rlimit))) {
		ret = -E_INVAL;
	}
	unlock_mm(mm);
	return ret;
}
800113b0:	8fb00020 	lw	s0,32(sp)
800113b4:	03e00008 	jr	ra
800113b8:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2135
		limit.rlim_max = USTACKSIZE;
		break;
	default:
		return -E_INVAL;
	}
	struct mm_struct *mm = current->mm;
800113bc:	3c028015 	lui	v0,0x8015
800113c0:	8c4377a4 	lw	v1,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2129
int do_linux_ugetrlimit(int res, struct linux_rlimit *__user __limit)
{
	struct linux_rlimit limit;
	switch (res) {
	case RLIMIT_STACK:
		limit.rlim_cur = USTACKSIZE;
800113c4:	3c020001 	lui	v0,0x1
800113c8:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2135
		limit.rlim_max = USTACKSIZE;
		break;
	default:
		return -E_INVAL;
	}
	struct mm_struct *mm = current->mm;
800113cc:	8c700020 	lw	s0,32(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2130
{
	struct linux_rlimit limit;
	switch (res) {
	case RLIMIT_STACK:
		limit.rlim_cur = USTACKSIZE;
		limit.rlim_max = USTACKSIZE;
800113d0:	afa20014 	sw	v0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2136
		break;
	default:
		return -E_INVAL;
	}
	struct mm_struct *mm = current->mm;
	lock_mm(mm);
800113d4:	afa50018 	sw	a1,24(sp)
800113d8:	0c004c26 	jal	80013098 <lock_mm>
800113dc:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2138
	int ret = 0;
	if (!copy_to_user(mm, __limit, &limit, sizeof(struct linux_rlimit))) {
800113e0:	8fa50018 	lw	a1,24(sp)
800113e4:	02002021 	move	a0,s0
800113e8:	27a60010 	addiu	a2,sp,16
800113ec:	0c007948 	jal	8001e520 <copy_to_user>
800113f0:	24070008 	li	a3,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2137
	default:
		return -E_INVAL;
	}
	struct mm_struct *mm = current->mm;
	lock_mm(mm);
	int ret = 0;
800113f4:	2403ffea 	li	v1,-22
800113f8:	0002180b 	movn	v1,zero,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2141
	if (!copy_to_user(mm, __limit, &limit, sizeof(struct linux_rlimit))) {
		ret = -E_INVAL;
	}
	unlock_mm(mm);
800113fc:	02002021 	move	a0,s0
80011400:	0c004c37 	jal	800130dc <unlock_mm>
80011404:	afa30018 	sw	v1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2143
	return ret;
}
80011408:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2142
	int ret = 0;
	if (!copy_to_user(mm, __limit, &limit, sizeof(struct linux_rlimit))) {
		ret = -E_INVAL;
	}
	unlock_mm(mm);
	return ret;
8001140c:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/proc.c:2143
}
80011410:	8fb00020 	lw	s0,32(sp)
80011414:	03e00008 	jr	ra
80011418:	27bd0028 	addiu	sp,sp,40

8001141c <remove_from_queue>:
remove_from_queue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:42
}

// remove sign from the pending queue
static void remove_from_queue(int sign, struct sigpending *queue)
{
	if (!sigismember(queue->signal, sign))
8001141c:	8ca2000c 	lw	v0,12(a1)
80011420:	8ca30008 	lw	v1,8(a1)
80011424:	2484ffff 	addiu	a0,a0,-1
80011428:	00043027 	nor	a2,zero,a0
8001142c:	00024040 	sll	t0,v0,0x1
80011430:	00c84004 	sllv	t0,t0,a2
80011434:	00833006 	srlv	a2,v1,a0
80011438:	01063025 	or	a2,t0,a2
8001143c:	30870020 	andi	a3,a0,0x20
80011440:	00824006 	srlv	t0,v0,a0
80011444:	0107300b 	movn	a2,t0,a3
80011448:	30c60001 	andi	a2,a2,0x1
8001144c:	10c0000b 	beqz	a2,8001147c <remove_from_queue+0x60>
80011450:	24060001 	li	a2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:44
		return;
	sigset_del(queue->signal, sign);
80011454:	00862004 	sllv	a0,a2,a0
80011458:	00803021 	move	a2,a0
8001145c:	0007300a 	movz	a2,zero,a3
80011460:	0007200b 	movn	a0,zero,a3
80011464:	00042027 	nor	a0,zero,a0
80011468:	00063027 	nor	a2,zero,a2
8001146c:	00831824 	and	v1,a0,v1
80011470:	00c21024 	and	v0,a2,v0
80011474:	aca30008 	sw	v1,8(a1)
80011478:	aca2000c 	sw	v0,12(a1)
8001147c:	03e00008 	jr	ra
80011480:	00000000 	nop

80011484 <lock_sig>:
lock_sig():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:21

//#define __SIGDEBUG

void lock_sig(struct sighand_struct *sh)
{
	if (sh != NULL) {
80011484:	10800003 	beqz	a0,80011494 <lock_sig+0x10>
80011488:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:22
		down(&(sh->sig_sem));
8001148c:	0800671f 	j	80019c7c <down>
80011490:	24840608 	addiu	a0,a0,1544
80011494:	03e00008 	jr	ra
80011498:	00000000 	nop

8001149c <unlock_sig>:
unlock_sig():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:28
	}
}

void unlock_sig(struct sighand_struct *sh)
{
	if (sh != NULL) {
8001149c:	10800003 	beqz	a0,800114ac <unlock_sig+0x10>
800114a0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:29
		up(&(sh->sig_sem));
800114a4:	0800671d 	j	80019c74 <up>
800114a8:	24840608 	addiu	a0,a0,1544
800114ac:	03e00008 	jr	ra
800114b0:	00000000 	nop

800114b4 <next_thread>:
next_thread():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:36
}

// next_thread - get the next thread "proc" from thread_group list
struct proc_struct *next_thread(struct proc_struct *proc)
{
	return le2proc(list_next(&(proc->thread_group)), thread_group);
800114b4:	8c820098 	lw	v0,152(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:37
}
800114b8:	03e00008 	jr	ra
800114bc:	2442ff6c 	addiu	v0,v0,-148

800114c0 <sig_recalc_pending>:
sig_recalc_pending():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:63
}

// calculate is there a signal in proc
void sig_recalc_pending(struct proc_struct *proc)
{
	if ((get_si(proc)->pending.signal & ~(get_si(proc)->blocked)) != 0
800114c0:	8c8300c8 	lw	v1,200(a0)
800114c4:	8c8200cc 	lw	v0,204(a0)
800114c8:	8c8600e0 	lw	a2,224(a0)
800114cc:	8c8500e4 	lw	a1,228(a0)
800114d0:	00031827 	nor	v1,zero,v1
800114d4:	00021027 	nor	v0,zero,v0
800114d8:	00c33024 	and	a2,a2,v1
800114dc:	00a22824 	and	a1,a1,v0
800114e0:	00c52825 	or	a1,a2,a1
800114e4:	54a0000f 	bnezl	a1,80011524 <sig_recalc_pending+0x64>
800114e8:	8c83005c 	lw	v1,92(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:64
	    || (get_si(proc)->signal->
800114ec:	8c8500c0 	lw	a1,192(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:65
		shared_pending.signal & ~(get_si(proc)->blocked)) != 0) {
800114f0:	8ca60010 	lw	a2,16(a1)
800114f4:	8ca50014 	lw	a1,20(a1)
800114f8:	00c31824 	and	v1,a2,v1
800114fc:	00a21024 	and	v0,a1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:64

// calculate is there a signal in proc
void sig_recalc_pending(struct proc_struct *proc)
{
	if ((get_si(proc)->pending.signal & ~(get_si(proc)->blocked)) != 0
	    || (get_si(proc)->signal->
80011500:	00621025 	or	v0,v1,v0
80011504:	14400006 	bnez	v0,80011520 <sig_recalc_pending+0x60>
80011508:	3c02fffe 	lui	v0,0xfffe
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:68
		shared_pending.signal & ~(get_si(proc)->blocked)) != 0) {
		proc->flags |= TIF_SIGPENDING;
	} else {
		proc->flags &= ~TIF_SIGPENDING;
8001150c:	8c83005c 	lw	v1,92(a0)
80011510:	3442ffff 	ori	v0,v0,0xffff
80011514:	00621024 	and	v0,v1,v0
80011518:	03e00008 	jr	ra
8001151c:	ac82005c 	sw	v0,92(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:66
void sig_recalc_pending(struct proc_struct *proc)
{
	if ((get_si(proc)->pending.signal & ~(get_si(proc)->blocked)) != 0
	    || (get_si(proc)->signal->
		shared_pending.signal & ~(get_si(proc)->blocked)) != 0) {
		proc->flags |= TIF_SIGPENDING;
80011520:	8c83005c 	lw	v1,92(a0)
80011524:	3c020001 	lui	v0,0x1
80011528:	00621025 	or	v0,v1,v0
8001152c:	03e00008 	jr	ra
80011530:	ac82005c 	sw	v0,92(a0)

80011534 <signal_create>:
signal_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:127
	return proc->flags & TIF_SIGPENDING;
}

// create a signal_struct and init it
struct signal_struct *signal_create(void)
{
80011534:	27bdffe8 	addiu	sp,sp,-24
80011538:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:128
	struct signal_struct *sig =
8001153c:	0c005486 	jal	80015218 <kmalloc>
80011540:	24040020 	li	a0,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:130
	    (struct signal_struct *)kmalloc(sizeof(struct signal_struct));
	if (sig != NULL) {
80011544:	10400009 	beqz	v0,8001156c <signal_create+0x38>
80011548:	24430008 	addiu	v1,v0,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:134
		set_signal_count(sig, 0);
		sig->curr_target = NULL;
		list_init(&(sig->shared_pending.list));
		sigset_initwith(sig->shared_pending.signal, 0);
8001154c:	00002021 	move	a0,zero
80011550:	00002821 	move	a1,zero
atomic_set():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:34
 *
 * Atomically sets the value of @v to @i.
 * */
static __always_inline void atomic_set(atomic_t * v, int i)
{
	v->counter = i;
80011554:	ac400000 	sw	zero,0(v0)
signal_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:132
{
	struct signal_struct *sig =
	    (struct signal_struct *)kmalloc(sizeof(struct signal_struct));
	if (sig != NULL) {
		set_signal_count(sig, 0);
		sig->curr_target = NULL;
80011558:	ac400004 	sw	zero,4(v0)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
8001155c:	ac43000c 	sw	v1,12(v0)
80011560:	ac430008 	sw	v1,8(v0)
signal_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:134
		list_init(&(sig->shared_pending.list));
		sigset_initwith(sig->shared_pending.signal, 0);
80011564:	ac440010 	sw	a0,16(v0)
80011568:	ac450014 	sw	a1,20(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:137
	}
	return sig;
}
8001156c:	8fbf0014 	lw	ra,20(sp)
80011570:	03e00008 	jr	ra
80011574:	27bd0018 	addiu	sp,sp,24

80011578 <signal_destroy>:
signal_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:141

// free a signal_struct
void signal_destroy(struct signal_struct *sig)
{
80011578:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:142
	assert(sig != NULL && signal_count(sig) == 0);
8001157c:	1080000a 	beqz	a0,800115a8 <signal_destroy+0x30>
80011580:	afbf0014 	sw	ra,20(sp)
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
 *
 * Atomically reads the value of @v.
 * */
static __always_inline int atomic_read(const atomic_t * v)
{
	return v->counter;
80011584:	8c830000 	lw	v1,0(a0)
signal_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:142
80011588:	14600007 	bnez	v1,800115a8 <signal_destroy+0x30>
8001158c:	8fbf0014 	lw	ra,20(sp)
flush_sigqueue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:107
}

// clean the pending queue
static void flush_sigqueue(struct sigpending *queue)
{
	sigset_initwith(queue->signal, 0);
80011590:	00003021 	move	a2,zero
80011594:	00003821 	move	a3,zero
80011598:	ac860010 	sw	a2,16(a0)
8001159c:	ac870014 	sw	a3,20(a0)
signal_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:144
// free a signal_struct
void signal_destroy(struct signal_struct *sig)
{
	assert(sig != NULL && signal_count(sig) == 0);
	flush_sigqueue(&(sig->shared_pending));
	kfree(sig);
800115a0:	080054b1 	j	800152c4 <kfree>
800115a4:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:142
}

// free a signal_struct
void signal_destroy(struct signal_struct *sig)
{
	assert(sig != NULL && signal_count(sig) == 0);
800115a8:	3c048002 	lui	a0,0x8002
800115ac:	3c068002 	lui	a2,0x8002
800115b0:	3c078002 	lui	a3,0x8002
800115b4:	24842fb4 	addiu	a0,a0,12212
800115b8:	2405008e 	li	a1,142
800115bc:	24c60e28 	addiu	a2,a2,3624
800115c0:	0c006b0b 	jal	8001ac2c <__panic>
800115c4:	24e72fc0 	addiu	a3,a3,12224

800115c8 <sighand_create>:
sighand_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:149
	kfree(sig);
}

// create a sighand_struct and init it
struct sighand_struct *sighand_create(void)
{
800115c8:	27bdffe0 	addiu	sp,sp,-32
800115cc:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:150
	struct sighand_struct *sh =
800115d0:	0c005486 	jal	80015218 <kmalloc>
800115d4:	24040620 	li	a0,1568
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:152
	    (struct sighand_struct *)kmalloc(sizeof(struct sighand_struct));
	if (sh != NULL) {
800115d8:	10400013 	beqz	v0,80011628 <sighand_create+0x60>
800115dc:	8fbf001c 	lw	ra,28(sp)
atomic_set():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:34
 *
 * Atomically sets the value of @v to @i.
 * */
static __always_inline void atomic_set(atomic_t * v, int i)
{
	v->counter = i;
800115e0:	ac400000 	sw	zero,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:148
	flush_sigqueue(&(sig->shared_pending));
	kfree(sig);
}

// create a sighand_struct and init it
struct sighand_struct *sighand_create(void)
800115e4:	24430008 	addiu	v1,v0,8
sighand_create():
800115e8:	24040040 	li	a0,64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:157
	if (sh != NULL) {
		set_sighand_count(sh, 0);
		int i;
		for (i = 0; i < sizeof(sh->action) / sizeof(sh->action[0]); ++i) {
			sh->action[i].sa_handler = SIG_DFL;
			sigset_initwith(sh->action[i].sa_mask, 0);
800115ec:	00003021 	move	a2,zero
800115f0:	00003821 	move	a3,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:158
			sh->action[i].sa_flags = 0;
800115f4:	2484ffff 	addiu	a0,a0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:156
	    (struct sighand_struct *)kmalloc(sizeof(struct sighand_struct));
	if (sh != NULL) {
		set_sighand_count(sh, 0);
		int i;
		for (i = 0; i < sizeof(sh->action) / sizeof(sh->action[0]); ++i) {
			sh->action[i].sa_handler = SIG_DFL;
800115f8:	ac600000 	sw	zero,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:157
			sigset_initwith(sh->action[i].sa_mask, 0);
800115fc:	ac660008 	sw	a2,8(v1)
80011600:	ac67000c 	sw	a3,12(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:158
			sh->action[i].sa_flags = 0;
80011604:	ac600010 	sw	zero,16(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:155
	struct sighand_struct *sh =
	    (struct sighand_struct *)kmalloc(sizeof(struct sighand_struct));
	if (sh != NULL) {
		set_sighand_count(sh, 0);
		int i;
		for (i = 0; i < sizeof(sh->action) / sizeof(sh->action[0]); ++i) {
80011608:	1480fff9 	bnez	a0,800115f0 <sighand_create+0x28>
8001160c:	24630018 	addiu	v1,v1,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:160
			sh->action[i].sa_handler = SIG_DFL;
			sigset_initwith(sh->action[i].sa_mask, 0);
			sh->action[i].sa_flags = 0;
		}
		sem_init(&(sh->sig_sem), 1);
80011610:	24440608 	addiu	a0,v0,1544
80011614:	24050001 	li	a1,1
80011618:	0c006717 	jal	80019c5c <sem_init>
8001161c:	afa20010 	sw	v0,16(sp)
80011620:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:163
	}
	return sh;
}
80011624:	8fbf001c 	lw	ra,28(sp)
80011628:	03e00008 	jr	ra
8001162c:	27bd0020 	addiu	sp,sp,32

80011630 <sighand_destroy>:
sighand_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:167

// free a sighand_struct
void sighand_destroy(struct sighand_struct *sh)
{
80011630:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:168
	assert(sh != NULL && sighand_count(sh) == 0);
80011634:	10800006 	beqz	a0,80011650 <sighand_destroy+0x20>
80011638:	afbf0014 	sw	ra,20(sp)
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
 *
 * Atomically reads the value of @v.
 * */
static __always_inline int atomic_read(const atomic_t * v)
{
	return v->counter;
8001163c:	8c820000 	lw	v0,0(a0)
sighand_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:168
80011640:	14400003 	bnez	v0,80011650 <sighand_destroy+0x20>
80011644:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:169
	kfree(sh);
80011648:	080054b1 	j	800152c4 <kfree>
8001164c:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:168
}

// free a sighand_struct
void sighand_destroy(struct sighand_struct *sh)
{
	assert(sh != NULL && sighand_count(sh) == 0);
80011650:	3c048002 	lui	a0,0x8002
80011654:	3c068002 	lui	a2,0x8002
80011658:	3c078002 	lui	a3,0x8002
8001165c:	24842fb4 	addiu	a0,a0,12212
80011660:	240500a8 	li	a1,168
80011664:	24c60e28 	addiu	a2,a2,3624
80011668:	0c006b0b 	jal	8001ac2c <__panic>
8001166c:	24e72fe8 	addiu	a3,a3,12264

80011670 <do_sigaction>:
do_sigaction():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:188
						  || sign == SIGURG));
}

// do syscall sigaction
int do_sigaction(int sign, const struct sigaction *act, struct sigaction *old)
{
80011670:	27bdffb8 	addiu	sp,sp,-72
80011674:	afb00024 	sw	s0,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:189
	assert(get_si(current)->sighand);
80011678:	3c108015 	lui	s0,0x8015
8001167c:	8e0277a4 	lw	v0,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:188
						  || sign == SIGURG));
}

// do syscall sigaction
int do_sigaction(int sign, const struct sigaction *act, struct sigaction *old)
{
80011680:	afb40034 	sw	s4,52(sp)
80011684:	afb10028 	sw	s1,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:189
	assert(get_si(current)->sighand);
80011688:	8c4300c4 	lw	v1,196(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:188
						  || sign == SIGURG));
}

// do syscall sigaction
int do_sigaction(int sign, const struct sigaction *act, struct sigaction *old)
{
8001168c:	afbf0044 	sw	ra,68(sp)
80011690:	afb70040 	sw	s7,64(sp)
80011694:	afb6003c 	sw	s6,60(sp)
80011698:	afb50038 	sw	s5,56(sp)
8001169c:	afb30030 	sw	s3,48(sp)
800116a0:	afb2002c 	sw	s2,44(sp)
800116a4:	00808821 	move	s1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:189
	assert(get_si(current)->sighand);
800116a8:	1060006b 	beqz	v1,80011858 <do_sigaction+0x1e8>
800116ac:	00a0a021 	move	s4,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:193
#ifdef __SIGDEBUG
	kprintf("do_sigaction(): sign = %d, pid = %d\n", sign, current->pid);
#endif
	struct sigaction *k = &(get_si(current)->sighand->action[sign - 1]);
800116b0:	2496ffff 	addiu	s6,a0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:199

	if (k == NULL) {
		panic("kernel thread call sigaction (i guess)\n");
	}
	int ret = 0;
	struct mm_struct *mm = current->mm;
800116b4:	8c520020 	lw	s2,32(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:193
{
	assert(get_si(current)->sighand);
#ifdef __SIGDEBUG
	kprintf("do_sigaction(): sign = %d, pid = %d\n", sign, current->pid);
#endif
	struct sigaction *k = &(get_si(current)->sighand->action[sign - 1]);
800116b8:	0016a8c0 	sll	s5,s6,0x3
800116bc:	0016b140 	sll	s6,s6,0x5
800116c0:	02d59823 	subu	s3,s6,s5
800116c4:	26730008 	addiu	s3,s3,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:200
	if (k == NULL) {
		panic("kernel thread call sigaction (i guess)\n");
	}
	int ret = 0;
	struct mm_struct *mm = current->mm;
	lock_mm(mm);
800116c8:	02402021 	move	a0,s2
800116cc:	afa60018 	sw	a2,24(sp)
800116d0:	0c004c26 	jal	80013098 <lock_mm>
800116d4:	00739821 	addu	s3,v1,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:201
	if (old != NULL && !copy_to_user(mm, old, k, sizeof(struct sigaction))) {
800116d8:	8fa60018 	lw	a2,24(sp)
800116dc:	10c00007 	beqz	a2,800116fc <do_sigaction+0x8c>
800116e0:	00c02821 	move	a1,a2
800116e4:	02402021 	move	a0,s2
800116e8:	02603021 	move	a2,s3
800116ec:	0c007948 	jal	8001e520 <copy_to_user>
800116f0:	24070018 	li	a3,24
800116f4:	10400048 	beqz	v0,80011818 <do_sigaction+0x1a8>
800116f8:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:206
		unlock_mm(mm);
		ret = -E_INVAL;
		goto out;
	}
	if (act == NULL
800116fc:	12800046 	beqz	s4,80011818 <do_sigaction+0x1a8>
80011700:	24170001 	li	s7,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:207
	    || !copy_from_user(mm, k, act, sizeof(struct sigaction), 1)) {
80011704:	02402021 	move	a0,s2
80011708:	02602821 	move	a1,s3
8001170c:	02803021 	move	a2,s4
80011710:	24070018 	li	a3,24
80011714:	0c00792e 	jal	8001e4b8 <copy_from_user>
80011718:	afb70010 	sw	s7,16(sp)
8001171c:	1040003e 	beqz	v0,80011818 <do_sigaction+0x1a8>
80011720:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:212
		unlock_mm(mm);
		ret = -E_INVAL;
		goto out;
	}
	unlock_mm(mm);
80011724:	0c004c37 	jal	800130dc <unlock_mm>
80011728:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:213
	lock_sig(get_si(current)->sighand);
8001172c:	8e0277a4 	lw	v0,30628(s0)
80011730:	0c004521 	jal	80011484 <lock_sig>
80011734:	8c4400c4 	lw	a0,196(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:215
	sigset_del(k->sa_mask, SIGKILL);
	sigset_del(k->sa_mask, SIGSTOP);
80011738:	8e630008 	lw	v1,8(s3)
8001173c:	3c02fffb 	lui	v0,0xfffb
80011740:	3442feff 	ori	v0,v0,0xfeff
80011744:	00621024 	and	v0,v1,v0
ignore_sig():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:175
}

// will the sign be ignored
static inline bool ignore_sig(int sign, struct proc_struct *proc)
{
	if (sign == SIGKILL || sign == SIGSTOP) {
80011748:	24030009 	li	v1,9
do_sigaction():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:215
		goto out;
	}
	unlock_mm(mm);
	lock_sig(get_si(current)->sighand);
	sigset_del(k->sa_mask, SIGKILL);
	sigset_del(k->sa_mask, SIGSTOP);
8001174c:	ae620008 	sw	v0,8(s3)
ignore_sig():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:175
}

// will the sign be ignored
static inline bool ignore_sig(int sign, struct proc_struct *proc)
{
	if (sign == SIGKILL || sign == SIGSTOP) {
80011750:	1223003f 	beq	s1,v1,80011850 <do_sigaction+0x1e0>
80011754:	8e0277a4 	lw	v0,30628(s0)
80011758:	24030013 	li	v1,19
8001175c:	12230008 	beq	s1,v1,80011780 <do_sigaction+0x110>
80011760:	8c4400c4 	lw	a0,196(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:178
		return 0;
	}
	struct sigaction *act = &(get_si(proc)->sighand->action[sign - 1]);
80011764:	02d5a823 	subu	s5,s6,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:179
	return act->sa_handler == SIG_IGN || (act->sa_handler == SIG_DFL
80011768:	0095a821 	addu	s5,a0,s5
8001176c:	8ea30008 	lw	v1,8(s5)
80011770:	50770019 	beql	v1,s7,800117d8 <do_sigaction+0x168>
80011774:	8c4500c0 	lw	a1,192(v0)
80011778:	1060000f 	beqz	v1,800117b8 <do_sigaction+0x148>
8001177c:	2623ffef 	addiu	v1,s1,-17
do_sigaction():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:227
			remove_from_queue(sign, &(get_si(proc)->pending));
			sig_recalc_pending(proc);
			proc = next_thread(proc);
		} while (proc != current);
	}
	unlock_sig(get_si(current)->sighand);
80011780:	0c004527 	jal	8001149c <unlock_sig>
80011784:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:230
out:
	return ret;
}
80011788:	8fbf0044 	lw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:198
	struct sigaction *k = &(get_si(current)->sighand->action[sign - 1]);

	if (k == NULL) {
		panic("kernel thread call sigaction (i guess)\n");
	}
	int ret = 0;
8001178c:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:230
		} while (proc != current);
	}
	unlock_sig(get_si(current)->sighand);
out:
	return ret;
}
80011790:	8fb70040 	lw	s7,64(sp)
80011794:	8fb6003c 	lw	s6,60(sp)
80011798:	8fb50038 	lw	s5,56(sp)
8001179c:	8fb40034 	lw	s4,52(sp)
800117a0:	8fb30030 	lw	s3,48(sp)
800117a4:	8fb2002c 	lw	s2,44(sp)
800117a8:	8fb10028 	lw	s1,40(sp)
800117ac:	8fb00024 	lw	s0,36(sp)
800117b0:	03e00008 	jr	ra
800117b4:	27bd0048 	addiu	sp,sp,72
ignore_sig():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:180
	if (sign == SIGKILL || sign == SIGSTOP) {
		return 0;
	}
	struct sigaction *act = &(get_si(proc)->sighand->action[sign - 1]);
	return act->sa_handler == SIG_IGN || (act->sa_handler == SIG_DFL
					      && (sign == SIGCONT
800117b8:	2c630002 	sltiu	v1,v1,2
800117bc:	14600005 	bnez	v1,800117d4 <do_sigaction+0x164>
800117c0:	2403001c 	li	v1,28
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:182
						  || sign == SIGCHLD
						  || sign == SIGWINCH
800117c4:	12230003 	beq	s1,v1,800117d4 <do_sigaction+0x164>
800117c8:	24030017 	li	v1,23
do_sigaction():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:216
	}
	unlock_mm(mm);
	lock_sig(get_si(current)->sighand);
	sigset_del(k->sa_mask, SIGKILL);
	sigset_del(k->sa_mask, SIGSTOP);
	if (ignore_sig(sign, current)) {
800117cc:	1623ffec 	bne	s1,v1,80011780 <do_sigaction+0x110>
800117d0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:218
		// i'm not very sure that if we should lock
		remove_from_queue(sign,
800117d4:	8c4500c0 	lw	a1,192(v0)
800117d8:	02202021 	move	a0,s1
800117dc:	0c004507 	jal	8001141c <remove_from_queue>
800117e0:	24a50008 	addiu	a1,a1,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:220
				  &(get_si(current)->signal->shared_pending));
		struct proc_struct *proc = current;
800117e4:	8e1277a4 	lw	s2,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:222
		do {
			remove_from_queue(sign, &(get_si(proc)->pending));
800117e8:	264500d8 	addiu	a1,s2,216
800117ec:	0c004507 	jal	8001141c <remove_from_queue>
800117f0:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:223
			sig_recalc_pending(proc);
800117f4:	0c004530 	jal	800114c0 <sig_recalc_pending>
800117f8:	02402021 	move	a0,s2
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
800117fc:	8e520098 	lw	s2,152(s2)
do_sigaction():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:225
			proc = next_thread(proc);
		} while (proc != current);
80011800:	8e0277a4 	lw	v0,30628(s0)
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:224
				  &(get_si(current)->signal->shared_pending));
		struct proc_struct *proc = current;
		do {
			remove_from_queue(sign, &(get_si(proc)->pending));
			sig_recalc_pending(proc);
			proc = next_thread(proc);
80011804:	2652ff6c 	addiu	s2,s2,-148
do_sigaction():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:225
		} while (proc != current);
80011808:	1642fff8 	bne	s2,v0,800117ec <do_sigaction+0x17c>
8001180c:	264500d8 	addiu	a1,s2,216
80011810:	080045e0 	j	80011780 <do_sigaction+0x110>
80011814:	8e4400c4 	lw	a0,196(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:208
		ret = -E_INVAL;
		goto out;
	}
	if (act == NULL
	    || !copy_from_user(mm, k, act, sizeof(struct sigaction), 1)) {
		unlock_mm(mm);
80011818:	0c004c37 	jal	800130dc <unlock_mm>
8001181c:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:230
		} while (proc != current);
	}
	unlock_sig(get_si(current)->sighand);
out:
	return ret;
}
80011820:	8fbf0044 	lw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:209
		goto out;
	}
	if (act == NULL
	    || !copy_from_user(mm, k, act, sizeof(struct sigaction), 1)) {
		unlock_mm(mm);
		ret = -E_INVAL;
80011824:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:230
		} while (proc != current);
	}
	unlock_sig(get_si(current)->sighand);
out:
	return ret;
}
80011828:	8fb70040 	lw	s7,64(sp)
8001182c:	8fb6003c 	lw	s6,60(sp)
80011830:	8fb50038 	lw	s5,56(sp)
80011834:	8fb40034 	lw	s4,52(sp)
80011838:	8fb30030 	lw	s3,48(sp)
8001183c:	8fb2002c 	lw	s2,44(sp)
80011840:	8fb10028 	lw	s1,40(sp)
80011844:	8fb00024 	lw	s0,36(sp)
80011848:	03e00008 	jr	ra
8001184c:	27bd0048 	addiu	sp,sp,72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:175
}

// will the sign be ignored
static inline bool ignore_sig(int sign, struct proc_struct *proc)
{
	if (sign == SIGKILL || sign == SIGSTOP) {
80011850:	080045e0 	j	80011780 <do_sigaction+0x110>
80011854:	8c4400c4 	lw	a0,196(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:189
}

// do syscall sigaction
int do_sigaction(int sign, const struct sigaction *act, struct sigaction *old)
{
	assert(get_si(current)->sighand);
80011858:	3c048002 	lui	a0,0x8002
8001185c:	3c068002 	lui	a2,0x8002
80011860:	3c078002 	lui	a3,0x8002
80011864:	24842fb4 	addiu	a0,a0,12212
80011868:	240500bd 	li	a1,189
8001186c:	24c60e28 	addiu	a2,a2,3624
80011870:	0c006b0b 	jal	8001ac2c <__panic>
80011874:	24e73010 	addiu	a3,a3,12304

80011878 <do_sigpending>:
do_sigpending():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:234
	return ret;
}

// do syscall sigpending
int do_sigpending(sigset_t * set)
{
80011878:	27bdffd8 	addiu	sp,sp,-40
8001187c:	afb00020 	sw	s0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:235
	assert(get_si(current)->sighand);
80011880:	3c108015 	lui	s0,0x8015
80011884:	8e0377a4 	lw	v1,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:234
	return ret;
}

// do syscall sigpending
int do_sigpending(sigset_t * set)
{
80011888:	afbf0024 	sw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:235
	assert(get_si(current)->sighand);
8001188c:	8c6200c4 	lw	v0,196(v1)
80011890:	10400025 	beqz	v0,80011928 <do_sigpending+0xb0>
80011894:	00802821 	move	a1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:239
	sigset_t pending;
	pending =
	    get_si(current)->pending.signal | get_si(current)->
	    signal->shared_pending.signal;
80011898:	8c6200c0 	lw	v0,192(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:238
int do_sigpending(sigset_t * set)
{
	assert(get_si(current)->sighand);
	sigset_t pending;
	pending =
	    get_si(current)->pending.signal | get_si(current)->
8001189c:	8c6400e0 	lw	a0,224(v1)
800118a0:	8c6800e4 	lw	t0,228(v1)
800118a4:	8c490010 	lw	t1,16(v0)
800118a8:	8c420014 	lw	v0,20(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:240
	    signal->shared_pending.signal;
	pending &= get_si(current)->blocked;
800118ac:	8c6700c8 	lw	a3,200(v1)
800118b0:	8c6600cc 	lw	a2,204(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:238
int do_sigpending(sigset_t * set)
{
	assert(get_si(current)->sighand);
	sigset_t pending;
	pending =
	    get_si(current)->pending.signal | get_si(current)->
800118b4:	01242025 	or	a0,t1,a0
800118b8:	00481025 	or	v0,v0,t0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:240
	    signal->shared_pending.signal;
	pending &= get_si(current)->blocked;
800118bc:	00c21024 	and	v0,a2,v0
800118c0:	00e42024 	and	a0,a3,a0
800118c4:	afa20014 	sw	v0,20(sp)
800118c8:	afa40010 	sw	a0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:242
	int ret = 0;
	if (set != NULL) {
800118cc:	10a00012 	beqz	a1,80011918 <do_sigpending+0xa0>
800118d0:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:243
		lock_mm(current->mm);
800118d4:	8c640020 	lw	a0,32(v1)
800118d8:	0c004c26 	jal	80013098 <lock_mm>
800118dc:	afa50018 	sw	a1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:244
		if (!copy_to_user(current->mm, set, &pending, sizeof(sigset_t))) {
800118e0:	8e0277a4 	lw	v0,30628(s0)
800118e4:	8fa50018 	lw	a1,24(sp)
800118e8:	27a60010 	addiu	a2,sp,16
800118ec:	8c440020 	lw	a0,32(v0)
800118f0:	0c007948 	jal	8001e520 <copy_to_user>
800118f4:	24070008 	li	a3,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:247
			ret = -E_INVAL;
		}
		unlock_mm(current->mm);
800118f8:	8e0377a4 	lw	v1,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:241
	sigset_t pending;
	pending =
	    get_si(current)->pending.signal | get_si(current)->
	    signal->shared_pending.signal;
	pending &= get_si(current)->blocked;
	int ret = 0;
800118fc:	2404ffea 	li	a0,-22
80011900:	0002200b 	movn	a0,zero,v0
80011904:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:247
	if (set != NULL) {
		lock_mm(current->mm);
		if (!copy_to_user(current->mm, set, &pending, sizeof(sigset_t))) {
			ret = -E_INVAL;
		}
		unlock_mm(current->mm);
80011908:	8c640020 	lw	a0,32(v1)
8001190c:	0c004c37 	jal	800130dc <unlock_mm>
80011910:	afa20018 	sw	v0,24(sp)
80011914:	8fa20018 	lw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:250
	}
	return ret;
}
80011918:	8fbf0024 	lw	ra,36(sp)
8001191c:	8fb00020 	lw	s0,32(sp)
80011920:	03e00008 	jr	ra
80011924:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:235
}

// do syscall sigpending
int do_sigpending(sigset_t * set)
{
	assert(get_si(current)->sighand);
80011928:	3c048002 	lui	a0,0x8002
8001192c:	3c068002 	lui	a2,0x8002
80011930:	3c078002 	lui	a3,0x8002
80011934:	24842fb4 	addiu	a0,a0,12212
80011938:	240500eb 	li	a1,235
8001193c:	24c60e28 	addiu	a2,a2,3624
80011940:	0c006b0b 	jal	8001ac2c <__panic>
80011944:	24e73010 	addiu	a3,a3,12304

80011948 <do_sigprocmask>:
do_sigprocmask():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:254
	return ret;
}

// do syscall sigprocmask
int do_sigprocmask(int how, const sigset_t * set, sigset_t * old)
{
80011948:	27bdffc0 	addiu	sp,sp,-64
8001194c:	afb10028 	sw	s1,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:255
	assert(get_si(current)->signal);
80011950:	3c118015 	lui	s1,0x8015
80011954:	8e2277a4 	lw	v0,30628(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:254
	return ret;
}

// do syscall sigprocmask
int do_sigprocmask(int how, const sigset_t * set, sigset_t * old)
{
80011958:	afb50038 	sw	s5,56(sp)
8001195c:	afb40034 	sw	s4,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:255
	assert(get_si(current)->signal);
80011960:	8c4300c0 	lw	v1,192(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:254
	return ret;
}

// do syscall sigprocmask
int do_sigprocmask(int how, const sigset_t * set, sigset_t * old)
{
80011964:	afb2002c 	sw	s2,44(sp)
80011968:	afbf003c 	sw	ra,60(sp)
8001196c:	afb30030 	sw	s3,48(sp)
80011970:	afb00024 	sw	s0,36(sp)
80011974:	00809021 	move	s2,a0
80011978:	00a0a821 	move	s5,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:255
	assert(get_si(current)->signal);
8001197c:	10600051 	beqz	v1,80011ac4 <do_sigprocmask+0x17c>
80011980:	00c0a021 	move	s4,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:258
	sigset_t new;
	int ret = -E_INVAL;
	if (set == NULL) {
80011984:	10a0002e 	beqz	a1,80011a40 <do_sigprocmask+0xf8>
80011988:	2413ffea 	li	s3,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:261
		goto out;
	}
	struct mm_struct *mm = current->mm;
8001198c:	8c500020 	lw	s0,32(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:262
	lock_mm(mm);
80011990:	0c004c26 	jal	80013098 <lock_mm>
80011994:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:263
	if (!copy_from_user(mm, &new, set, sizeof(sigset_t), 1)) {
80011998:	24020001 	li	v0,1
8001199c:	02002021 	move	a0,s0
800119a0:	27a50018 	addiu	a1,sp,24
800119a4:	02a03021 	move	a2,s5
800119a8:	24070008 	li	a3,8
800119ac:	0c00792e 	jal	8001e4b8 <copy_from_user>
800119b0:	afa20010 	sw	v0,16(sp)
800119b4:	1040003f 	beqz	v0,80011ab4 <do_sigprocmask+0x16c>
800119b8:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:267
		unlock_mm(mm);
		goto out;
	}
	if (old != NULL
800119bc:	12800008 	beqz	s4,800119e0 <do_sigprocmask+0x98>
800119c0:	8e2677a4 	lw	a2,30628(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:268
	    && !copy_to_user(mm, old, &(get_si(current)->blocked),
800119c4:	02002021 	move	a0,s0
800119c8:	02802821 	move	a1,s4
800119cc:	24c600c8 	addiu	a2,a2,200
800119d0:	0c007948 	jal	8001e520 <copy_to_user>
800119d4:	24070008 	li	a3,8
800119d8:	10400036 	beqz	v0,80011ab4 <do_sigprocmask+0x16c>
800119dc:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:273
			     sizeof(sigset_t))) {
		unlock_mm(mm);
		goto out;
	}
	unlock_mm(mm);
800119e0:	0c004c37 	jal	800130dc <unlock_mm>
800119e4:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:275
	sigset_del(new, SIGKILL);
	sigset_del(new, SIGSTOP);
800119e8:	8fa40018 	lw	a0,24(sp)
800119ec:	3c03fffb 	lui	v1,0xfffb
800119f0:	3463feff 	ori	v1,v1,0xfeff
800119f4:	00831824 	and	v1,a0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:277
	ret = 0;
	switch (how) {
800119f8:	24040001 	li	a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:275
		unlock_mm(mm);
		goto out;
	}
	unlock_mm(mm);
	sigset_del(new, SIGKILL);
	sigset_del(new, SIGSTOP);
800119fc:	8fa2001c 	lw	v0,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:277
	ret = 0;
	switch (how) {
80011a00:	1244001f 	beq	s2,a0,80011a80 <do_sigprocmask+0x138>
80011a04:	afa30018 	sw	v1,24(sp)
80011a08:	24040002 	li	a0,2
80011a0c:	12440016 	beq	s2,a0,80011a68 <do_sigprocmask+0x120>
80011a10:	8e2477a4 	lw	a0,30628(s1)
80011a14:	16400008 	bnez	s2,80011a38 <do_sigprocmask+0xf0>
80011a18:	2413ffea 	li	s3,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:279
	case SIG_BLOCK:
		sigset_addmask(get_si(current)->blocked, new);
80011a1c:	8c8600c8 	lw	a2,200(a0)
80011a20:	8c8500cc 	lw	a1,204(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:276
		goto out;
	}
	unlock_mm(mm);
	sigset_del(new, SIGKILL);
	sigset_del(new, SIGSTOP);
	ret = 0;
80011a24:	00009821 	move	s3,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:279
	switch (how) {
	case SIG_BLOCK:
		sigset_addmask(get_si(current)->blocked, new);
80011a28:	00c31825 	or	v1,a2,v1
80011a2c:	00a21025 	or	v0,a1,v0
80011a30:	ac8300c8 	sw	v1,200(a0)
80011a34:	ac8200cc 	sw	v0,204(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:290
		sigset_initwith(get_si(current)->blocked, new);
		break;
	default:
		ret = -E_INVAL;
	}
	sig_recalc_pending(current);
80011a38:	0c004530 	jal	800114c0 <sig_recalc_pending>
80011a3c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:293
out:
	return ret;
}
80011a40:	8fbf003c 	lw	ra,60(sp)
80011a44:	02601021 	move	v0,s3
80011a48:	8fb50038 	lw	s5,56(sp)
80011a4c:	8fb40034 	lw	s4,52(sp)
80011a50:	8fb30030 	lw	s3,48(sp)
80011a54:	8fb2002c 	lw	s2,44(sp)
80011a58:	8fb10028 	lw	s1,40(sp)
80011a5c:	8fb00024 	lw	s0,36(sp)
80011a60:	03e00008 	jr	ra
80011a64:	27bd0040 	addiu	sp,sp,64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:276
		goto out;
	}
	unlock_mm(mm);
	sigset_del(new, SIGKILL);
	sigset_del(new, SIGSTOP);
	ret = 0;
80011a68:	00009821 	move	s3,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:285
		break;
	case SIG_UNBLOCK:
		sigset_delmask(get_si(current)->blocked, new);
		break;
	case SIG_SETMASK:
		sigset_initwith(get_si(current)->blocked, new);
80011a6c:	ac8300c8 	sw	v1,200(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:290
		break;
	default:
		ret = -E_INVAL;
	}
	sig_recalc_pending(current);
80011a70:	0c004530 	jal	800114c0 <sig_recalc_pending>
80011a74:	ac8200cc 	sw	v0,204(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:293
out:
	return ret;
}
80011a78:	08004691 	j	80011a44 <do_sigprocmask+0xfc>
80011a7c:	8fbf003c 	lw	ra,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:282
	switch (how) {
	case SIG_BLOCK:
		sigset_addmask(get_si(current)->blocked, new);
		break;
	case SIG_UNBLOCK:
		sigset_delmask(get_si(current)->blocked, new);
80011a80:	8e2477a4 	lw	a0,30628(s1)
80011a84:	00031827 	nor	v1,zero,v1
80011a88:	00021027 	nor	v0,zero,v0
80011a8c:	8c8600c8 	lw	a2,200(a0)
80011a90:	8c8500cc 	lw	a1,204(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:276
		goto out;
	}
	unlock_mm(mm);
	sigset_del(new, SIGKILL);
	sigset_del(new, SIGSTOP);
	ret = 0;
80011a94:	00009821 	move	s3,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:282
	switch (how) {
	case SIG_BLOCK:
		sigset_addmask(get_si(current)->blocked, new);
		break;
	case SIG_UNBLOCK:
		sigset_delmask(get_si(current)->blocked, new);
80011a98:	00c31824 	and	v1,a2,v1
80011a9c:	00a21024 	and	v0,a1,v0
80011aa0:	ac8300c8 	sw	v1,200(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:290
		sigset_initwith(get_si(current)->blocked, new);
		break;
	default:
		ret = -E_INVAL;
	}
	sig_recalc_pending(current);
80011aa4:	0c004530 	jal	800114c0 <sig_recalc_pending>
80011aa8:	ac8200cc 	sw	v0,204(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:293
out:
	return ret;
}
80011aac:	08004691 	j	80011a44 <do_sigprocmask+0xfc>
80011ab0:	8fbf003c 	lw	ra,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:270
		goto out;
	}
	if (old != NULL
	    && !copy_to_user(mm, old, &(get_si(current)->blocked),
			     sizeof(sigset_t))) {
		unlock_mm(mm);
80011ab4:	0c004c37 	jal	800130dc <unlock_mm>
80011ab8:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:271
		goto out;
80011abc:	08004691 	j	80011a44 <do_sigprocmask+0xfc>
80011ac0:	8fbf003c 	lw	ra,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:255
}

// do syscall sigprocmask
int do_sigprocmask(int how, const sigset_t * set, sigset_t * old)
{
	assert(get_si(current)->signal);
80011ac4:	3c048002 	lui	a0,0x8002
80011ac8:	3c068002 	lui	a2,0x8002
80011acc:	3c078002 	lui	a3,0x8002
80011ad0:	24842fb4 	addiu	a0,a0,12212
80011ad4:	240500ff 	li	a1,255
80011ad8:	24c60e28 	addiu	a2,a2,3624
80011adc:	0c006b0b 	jal	8001ac2c <__panic>
80011ae0:	24e7302c 	addiu	a3,a3,12332

80011ae4 <do_signal>:
do_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:553
	schedule();
}

// do the signals in current
int do_signal(struct trapframe *tf, sigset_t * old)
{
80011ae4:	27bdffc0 	addiu	sp,sp,-64
80011ae8:	afb60030 	sw	s6,48(sp)
80011aec:	afb5002c 	sw	s5,44(sp)
80011af0:	afbf003c 	sw	ra,60(sp)
80011af4:	afbe0038 	sw	s8,56(sp)
80011af8:	afb70034 	sw	s7,52(sp)
80011afc:	afb40028 	sw	s4,40(sp)
80011b00:	afb30024 	sw	s3,36(sp)
80011b04:	afb20020 	sw	s2,32(sp)
80011b08:	afb1001c 	sw	s1,28(sp)
80011b0c:	afb00018 	sw	s0,24(sp)
80011b10:	0080a821 	move	s5,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:554
	assert(!trap_in_kernel(tf));
80011b14:	0c007c88 	jal	8001f220 <trap_in_kernel>
80011b18:	00a0b021 	move	s6,a1
80011b1c:	144000e4 	bnez	v0,80011eb0 <do_signal+0x3cc>
80011b20:	3c038015 	lui	v1,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:555
	if (!get_si(current)->signal || !get_si(current)->sighand)
80011b24:	8c7e77a4 	lw	s8,30628(v1)
80011b28:	8fc300c0 	lw	v1,192(s8)
80011b2c:	10600053 	beqz	v1,80011c7c <do_signal+0x198>
80011b30:	00008021 	move	s0,zero
80011b34:	8fc300c4 	lw	v1,196(s8)
80011b38:	10600050 	beqz	v1,80011c7c <do_signal+0x198>
80011b3c:	00408021 	move	s0,v0
signal_pending():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:122
}

// is there a signal pending in proc
static inline bool signal_pending(struct proc_struct *proc)
{
	return proc->flags & TIF_SIGPENDING;
80011b40:	8fc3005c 	lw	v1,92(s8)
80011b44:	7c620400 	ext	v0,v1,0x10,0x1
do_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:557
int do_signal(struct trapframe *tf, sigset_t * old)
{
	assert(!trap_in_kernel(tf));
	if (!get_si(current)->signal || !get_si(current)->sighand)
		return 0;
	if (!signal_pending(current))
80011b48:	1040004c 	beqz	v0,80011c7c <do_signal+0x198>
80011b4c:	27c200c8 	addiu	v0,s8,200
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:561
		return 0;
	int sign;
	if (old == NULL) {
		old = &get_si(current)->blocked;
80011b50:	0056b00a 	movz	s6,v0,s6
dequeue_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:77
// return a signal every time, until empty then return 0
static int dequeue_signal(struct proc_struct *proc)
{
	int sign = 0;
	if (get_si(proc)->pending.signal != 0) {
		while (++sign < 64) {
80011b54:	24170040 	li	s7,64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:76

// return a signal every time, until empty then return 0
static int dequeue_signal(struct proc_struct *proc)
{
	int sign = 0;
	if (get_si(proc)->pending.signal != 0) {
80011b58:	8fcb00e0 	lw	t3,224(s8)
80011b5c:	8fca00e4 	lw	t2,228(s8)
80011b60:	016a1025 	or	v0,t3,t2
80011b64:	50400053 	beqzl	v0,80011cb4 <do_signal+0x1d0>
80011b68:	8fc500c0 	lw	a1,192(s8)
80011b6c:	8fc700cc 	lw	a3,204(s8)
80011b70:	8fc900c8 	lw	t1,200(s8)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:77
		while (++sign < 64) {
80011b74:	24100001 	li	s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:76

// return a signal every time, until empty then return 0
static int dequeue_signal(struct proc_struct *proc)
{
	int sign = 0;
	if (get_si(proc)->pending.signal != 0) {
80011b78:	00001821 	move	v1,zero
80011b7c:	00074040 	sll	t0,a3,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:79
		while (++sign < 64) {
			if (!sigismember(get_si(proc)->blocked, sign)
			    && sigismember(get_si(proc)->pending.signal, sign)) {
80011b80:	080046e5 	j	80011b94 <do_signal+0xb0>
80011b84:	000a6040 	sll	t4,t2,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:77
// return a signal every time, until empty then return 0
static int dequeue_signal(struct proc_struct *proc)
{
	int sign = 0;
	if (get_si(proc)->pending.signal != 0) {
		while (++sign < 64) {
80011b88:	10570049 	beq	v0,s7,80011cb0 <do_signal+0x1cc>
80011b8c:	02001821 	move	v1,s0
80011b90:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:78
			if (!sigismember(get_si(proc)->blocked, sign)
80011b94:	00032827 	nor	a1,zero,v1
80011b98:	00a83004 	sllv	a2,t0,a1
80011b9c:	00691006 	srlv	v0,t1,v1
80011ba0:	00c21025 	or	v0,a2,v0
80011ba4:	30640020 	andi	a0,v1,0x20
80011ba8:	00673006 	srlv	a2,a3,v1
80011bac:	00c4100b 	movn	v0,a2,a0
80011bb0:	30420001 	andi	v0,v0,0x1
80011bb4:	1440fff4 	bnez	v0,80011b88 <do_signal+0xa4>
80011bb8:	26020001 	addiu	v0,s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:79
			    && sigismember(get_si(proc)->pending.signal, sign)) {
80011bbc:	006b1006 	srlv	v0,t3,v1
80011bc0:	00ac2804 	sllv	a1,t4,a1
80011bc4:	00a21025 	or	v0,a1,v0
80011bc8:	006a1806 	srlv	v1,t2,v1
80011bcc:	0064100b 	movn	v0,v1,a0
80011bd0:	30420001 	andi	v0,v0,0x1
80011bd4:	1040ffec 	beqz	v0,80011b88 <do_signal+0xa4>
80011bd8:	26020001 	addiu	v0,s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:80
				remove_from_queue(sign,
80011bdc:	02002021 	move	a0,s0
80011be0:	0c004507 	jal	8001141c <remove_from_queue>
80011be4:	27c500d8 	addiu	a1,s8,216
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:82
						  &(get_si(proc)->pending));
				sig_recalc_pending(proc);
80011be8:	0c004530 	jal	800114c0 <sig_recalc_pending>
80011bec:	03c02021 	move	a0,s8
do_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:570
#ifdef __SIGDEBUG
		kprintf("do_signal(): sign = %d, pid = %d\n", sign,
			current->pid);
#endif
		struct sigaction *act =
		    &(get_si(current)->sighand->action[sign - 1]);
80011bf0:	3c028015 	lui	v0,0x8015
80011bf4:	8c5e77a4 	lw	s8,30628(v0)
80011bf8:	0040a021 	move	s4,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:571
		if (sign == SIGKILL) {
80011bfc:	24020009 	li	v0,9
80011c00:	1202001c 	beq	s0,v0,80011c74 <do_signal+0x190>
80011c04:	8fc300c4 	lw	v1,196(s8)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:574
			do_exit(-E_KILLED);
			break;
		} else if (sign == SIGSTOP) {
80011c08:	24020013 	li	v0,19
80011c0c:	1202005e 	beq	s0,v0,80011d88 <do_signal+0x2a4>
80011c10:	2611ffff 	addiu	s1,s0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:569
	while ((sign = dequeue_signal(current)) != 0) {
#ifdef __SIGDEBUG
		kprintf("do_signal(): sign = %d, pid = %d\n", sign,
			current->pid);
#endif
		struct sigaction *act =
80011c14:	001110c0 	sll	v0,s1,0x3
80011c18:	00119140 	sll	s2,s1,0x5
80011c1c:	02429023 	subu	s2,s2,v0
80011c20:	26520008 	addiu	s2,s2,8
80011c24:	00729021 	addu	s2,v1,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:576
		if (sign == SIGKILL) {
			do_exit(-E_KILLED);
			break;
		} else if (sign == SIGSTOP) {
			do_signal_stop(current);
		} else if (act->sa_handler == SIG_IGN) {
80011c28:	8e420000 	lw	v0,0(s2)
80011c2c:	24130001 	li	s3,1
80011c30:	5053ffca 	beql	v0,s3,80011b5c <do_signal+0x78>
80011c34:	8fcb00e0 	lw	t3,224(s8)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:578
			continue;
		} else if (act->sa_handler == SIG_DFL) {
80011c38:	14400072 	bnez	v0,80011e04 <do_signal+0x320>
80011c3c:	3c038015 	lui	v1,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:579
			if (current == initproc) {
80011c40:	8c627798 	lw	v0,30616(v1)
80011c44:	13c2ffc4 	beq	s8,v0,80011b58 <do_signal+0x74>
80011c48:	2602ffef 	addiu	v0,s0,-17
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:581
				continue;
			} else if (sign == SIGCONT || sign == SIGCHLD
80011c4c:	2c420002 	sltiu	v0,v0,2
80011c50:	1440ffc1 	bnez	v0,80011b58 <do_signal+0x74>
80011c54:	2402001c 	li	v0,28
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:582
				   || sign == SIGWINCH || sign == SIGURG) {
80011c58:	1202ffbf 	beq	s0,v0,80011b58 <do_signal+0x74>
80011c5c:	24020017 	li	v0,23
80011c60:	1202ffbd 	beq	s0,v0,80011b58 <do_signal+0x74>
80011c64:	2602ffec 	addiu	v0,s0,-20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:584
				continue;
			} else if (sign == SIGTSTP || sign == SIGTTIN
80011c68:	2c420003 	sltiu	v0,v0,3
80011c6c:	5440ffbb 	bnezl	v0,80011b5c <do_signal+0x78>
80011c70:	8fcb00e0 	lw	t3,224(s8)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:593
			} else {
#ifdef __SIGDEBUG
				kprintf("do_signal() exit pid = %d\n",
					current->pid);
#endif
				do_exit(-E_KILLED);
80011c74:	0c003d42 	jal	8000f508 <do_exit>
80011c78:	2404ffdb 	li	a0,-37
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:609
			}
			return sign;
		}
	}
	return sign;
}
80011c7c:	8fbf003c 	lw	ra,60(sp)
80011c80:	02001021 	move	v0,s0
80011c84:	8fbe0038 	lw	s8,56(sp)
80011c88:	8fb70034 	lw	s7,52(sp)
80011c8c:	8fb60030 	lw	s6,48(sp)
80011c90:	8fb5002c 	lw	s5,44(sp)
80011c94:	8fb40028 	lw	s4,40(sp)
80011c98:	8fb30024 	lw	s3,36(sp)
80011c9c:	8fb20020 	lw	s2,32(sp)
80011ca0:	8fb1001c 	lw	s1,28(sp)
80011ca4:	8fb00018 	lw	s0,24(sp)
80011ca8:	03e00008 	jr	ra
80011cac:	27bd0040 	addiu	sp,sp,64
dequeue_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:88
				return sign;
			}
		}
	}
	sign = 0;
	if (get_si(proc)->signal->shared_pending.signal != 0) {
80011cb0:	8fc500c0 	lw	a1,192(s8)
80011cb4:	8cac0010 	lw	t4,16(a1)
80011cb8:	8cab0014 	lw	t3,20(a1)
80011cbc:	018b1025 	or	v0,t4,t3
80011cc0:	10400023 	beqz	v0,80011d50 <do_signal+0x26c>
80011cc4:	24100001 	li	s0,1
80011cc8:	8fc800cc 	lw	t0,204(s8)
80011ccc:	8fca00c8 	lw	t2,200(s8)
80011cd0:	00001021 	move	v0,zero
80011cd4:	00084840 	sll	t1,t0,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:91
		while (++sign < 64) {
			if (!sigismember(get_si(proc)->blocked, sign)
			    && sigismember(get_si(proc)->signal->
80011cd8:	0800473b 	j	80011cec <do_signal+0x208>
80011cdc:	000b6840 	sll	t5,t3,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:89
			}
		}
	}
	sign = 0;
	if (get_si(proc)->signal->shared_pending.signal != 0) {
		while (++sign < 64) {
80011ce0:	1077001b 	beq	v1,s7,80011d50 <do_signal+0x26c>
80011ce4:	02001021 	move	v0,s0
80011ce8:	00608021 	move	s0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:90
			if (!sigismember(get_si(proc)->blocked, sign)
80011cec:	00023027 	nor	a2,zero,v0
80011cf0:	00c93804 	sllv	a3,t1,a2
80011cf4:	004a1806 	srlv	v1,t2,v0
80011cf8:	00e31825 	or	v1,a3,v1
80011cfc:	30440020 	andi	a0,v0,0x20
80011d00:	00483806 	srlv	a3,t0,v0
80011d04:	00e4180b 	movn	v1,a3,a0
80011d08:	30630001 	andi	v1,v1,0x1
80011d0c:	1460fff4 	bnez	v1,80011ce0 <do_signal+0x1fc>
80011d10:	26030001 	addiu	v1,s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:91
			    && sigismember(get_si(proc)->signal->
80011d14:	004c1806 	srlv	v1,t4,v0
80011d18:	00cd3004 	sllv	a2,t5,a2
80011d1c:	00c31825 	or	v1,a2,v1
80011d20:	004b1006 	srlv	v0,t3,v0
80011d24:	0044180b 	movn	v1,v0,a0
80011d28:	30630001 	andi	v1,v1,0x1
80011d2c:	1060ffec 	beqz	v1,80011ce0 <do_signal+0x1fc>
80011d30:	26030001 	addiu	v1,s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:93
					   shared_pending.signal, sign)) {
				remove_from_queue(sign,
80011d34:	02002021 	move	a0,s0
80011d38:	0c004507 	jal	8001141c <remove_from_queue>
80011d3c:	24a50008 	addiu	a1,a1,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:96
						  &(get_si(proc)->
						    signal->shared_pending));
				sig_recalc_pending(proc);
80011d40:	0c004530 	jal	800114c0 <sig_recalc_pending>
80011d44:	03c02021 	move	a0,s8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:570
#ifdef __SIGDEBUG
		kprintf("do_signal(): sign = %d, pid = %d\n", sign,
			current->pid);
#endif
		struct sigaction *act =
		    &(get_si(current)->sighand->action[sign - 1]);
80011d48:	080046fd 	j	80011bf4 <do_signal+0x110>
80011d4c:	3c028015 	lui	v0,0x8015
do_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:609
			}
			return sign;
		}
	}
	return sign;
}
80011d50:	8fbf003c 	lw	ra,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:88
				return sign;
			}
		}
	}
	sign = 0;
	if (get_si(proc)->signal->shared_pending.signal != 0) {
80011d54:	00008021 	move	s0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:609
			}
			return sign;
		}
	}
	return sign;
}
80011d58:	02001021 	move	v0,s0
80011d5c:	8fbe0038 	lw	s8,56(sp)
80011d60:	8fb70034 	lw	s7,52(sp)
80011d64:	8fb60030 	lw	s6,48(sp)
80011d68:	8fb5002c 	lw	s5,44(sp)
80011d6c:	8fb40028 	lw	s4,40(sp)
80011d70:	8fb30024 	lw	s3,36(sp)
80011d74:	8fb20020 	lw	s2,32(sp)
80011d78:	8fb1001c 	lw	s1,28(sp)
80011d7c:	8fb00018 	lw	s0,24(sp)
80011d80:	03e00008 	jr	ra
80011d84:	27bd0040 	addiu	sp,sp,64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:574
		struct sigaction *act =
		    &(get_si(current)->sighand->action[sign - 1]);
		if (sign == SIGKILL) {
			do_exit(-E_KILLED);
			break;
		} else if (sign == SIGSTOP) {
80011d88:	03c08021 	move	s0,s8
do_signal_stop():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:538
// stop thread group
static void do_signal_stop(struct proc_struct *proc)
{
	struct proc_struct *next = proc;
	do {
		if (next->state == PROC_UNINIT || next->state == PROC_ZOMBIE
80011d8c:	24110003 	li	s1,3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:542
		    || next->flags & PF_EXITING) {
			continue;
		}
		if (next->state == PROC_SLEEPING
80011d90:	24120001 	li	s2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:538
// stop thread group
static void do_signal_stop(struct proc_struct *proc)
{
	struct proc_struct *next = proc;
	do {
		if (next->state == PROC_UNINIT || next->state == PROC_ZOMBIE
80011d94:	8e020000 	lw	v0,0(s0)
80011d98:	5040000d 	beqzl	v0,80011dd0 <do_signal+0x2ec>
80011d9c:	8e100098 	lw	s0,152(s0)
80011da0:	5051000b 	beql	v0,s1,80011dd0 <do_signal+0x2ec>
80011da4:	8e100098 	lw	s0,152(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:539
		    || next->flags & PF_EXITING) {
80011da8:	8e03005c 	lw	v1,92(s0)
80011dac:	30630001 	andi	v1,v1,0x1
80011db0:	54600007 	bnezl	v1,80011dd0 <do_signal+0x2ec>
80011db4:	8e100098 	lw	s0,152(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:542
			continue;
		}
		if (next->state == PROC_SLEEPING
80011db8:	1452000d 	bne	v0,s2,80011df0 <do_signal+0x30c>
80011dbc:	3c058000 	lui	a1,0x8000
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:543
		    && !(next->wait_state & WT_INTERRUPTED)) {
80011dc0:	8e020084 	lw	v0,132(s0)
80011dc4:	0440000b 	bltz	v0,80011df4 <do_signal+0x310>
80011dc8:	02002021 	move	a0,s0
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
80011dcc:	8e100098 	lw	s0,152(s0)
do_signal_stop():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:547
			continue;
		}
		stop_proc(next, WT_SIGNAL);
	} while ((next = next_thread(next)) != proc);
80011dd0:	2610ff6c 	addiu	s0,s0,-148
80011dd4:	57d0fff0 	bnel	s8,s0,80011d98 <do_signal+0x2b4>
80011dd8:	8e020000 	lw	v0,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:548
	schedule();
80011ddc:	0c00059f 	jal	8000167c <schedule>
80011de0:	00000000 	nop
80011de4:	3c028015 	lui	v0,0x8015
80011de8:	080046d6 	j	80011b58 <do_signal+0x74>
80011dec:	8c5e77a4 	lw	s8,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:546
		}
		if (next->state == PROC_SLEEPING
		    && !(next->wait_state & WT_INTERRUPTED)) {
			continue;
		}
		stop_proc(next, WT_SIGNAL);
80011df0:	02002021 	move	a0,s0
80011df4:	0c0004d4 	jal	80001350 <stop_proc>
80011df8:	34a50400 	ori	a1,a1,0x400
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
80011dfc:	08004774 	j	80011dd0 <do_signal+0x2ec>
80011e00:	8e100098 	lw	s0,152(s0)
handle_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:517
// prepare block for signal handler
static int
handle_signal(int sign, struct sigaction *act, sigset_t oldset,
	      struct trapframe *tf)
{
	int ret = __sig_setup_frame(sign, act, oldset, tf);
80011e04:	8ec60000 	lw	a2,0(s6)
80011e08:	8ec70004 	lw	a3,4(s6)
80011e0c:	02002021 	move	a0,s0
80011e10:	02402821 	move	a1,s2
80011e14:	0c007a76 	jal	8001e9d8 <__sig_setup_frame>
80011e18:	afb50010 	sw	s5,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:519

	if (ret != 0) {
80011e1c:	14400004 	bnez	v0,80011e30 <do_signal+0x34c>
80011e20:	8e420010 	lw	v0,16(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:523
		return ret;
	}

	if ((act->sa_flags & SA_NODEFER) == 0) {
80011e24:	7c430780 	ext	v1,v0,0x1e,0x1
80011e28:	50600008 	beqzl	v1,80011e4c <do_signal+0x368>
80011e2c:	8e8277a4 	lw	v0,30628(s4)
do_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:602
		} else {
#ifdef __SIGDEBUG
			kprintf("do_signal() call user %d\n", sign);
#endif
			handle_signal(sign, act, *old, tf);
			if ((act->sa_flags & SA_ONESHOT) != 0) {
80011e30:	3c038000 	lui	v1,0x8000
80011e34:	24631000 	addiu	v1,v1,4096
80011e38:	00431024 	and	v0,v0,v1
80011e3c:	5440ff8f 	bnezl	v0,80011c7c <do_signal+0x198>
80011e40:	ae400000 	sw	zero,0(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:609
			}
			return sign;
		}
	}
	return sign;
}
80011e44:	08004720 	j	80011c80 <do_signal+0x19c>
80011e48:	8fbf003c 	lw	ra,60(sp)
handle_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:526
	}

	if ((act->sa_flags & SA_NODEFER) == 0) {
		lock_sig(get_si(current)->sighand);
		get_si(current)->blocked |= act->sa_mask;
		sigset_add(get_si(current)->blocked, sign);
80011e4c:	02339804 	sllv	s3,s3,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:524
	if (ret != 0) {
		return ret;
	}

	if ((act->sa_flags & SA_NODEFER) == 0) {
		lock_sig(get_si(current)->sighand);
80011e50:	0c004521 	jal	80011484 <lock_sig>
80011e54:	8c4400c4 	lw	a0,196(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:525
		get_si(current)->blocked |= act->sa_mask;
80011e58:	8e8277a4 	lw	v0,30628(s4)
80011e5c:	8e480008 	lw	t0,8(s2)
80011e60:	8e46000c 	lw	a2,12(s2)
80011e64:	8c4700c8 	lw	a3,200(v0)
80011e68:	8c4300cc 	lw	v1,204(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:526
		sigset_add(get_si(current)->blocked, sign);
80011e6c:	32240020 	andi	a0,s1,0x20
80011e70:	02602821 	move	a1,s3
80011e74:	0004280a 	movz	a1,zero,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:525
		return ret;
	}

	if ((act->sa_flags & SA_NODEFER) == 0) {
		lock_sig(get_si(current)->sighand);
		get_si(current)->blocked |= act->sa_mask;
80011e78:	01078825 	or	s1,t0,a3
80011e7c:	00c31825 	or	v1,a2,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:526
		sigset_add(get_si(current)->blocked, sign);
80011e80:	0004980b 	movn	s3,zero,a0
80011e84:	00651825 	or	v1,v1,a1
80011e88:	02338825 	or	s1,s1,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:527
		sig_recalc_pending(current);
80011e8c:	00402021 	move	a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:526
	}

	if ((act->sa_flags & SA_NODEFER) == 0) {
		lock_sig(get_si(current)->sighand);
		get_si(current)->blocked |= act->sa_mask;
		sigset_add(get_si(current)->blocked, sign);
80011e90:	ac5100c8 	sw	s1,200(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:527
		sig_recalc_pending(current);
80011e94:	0c004530 	jal	800114c0 <sig_recalc_pending>
80011e98:	ac4300cc 	sw	v1,204(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:528
		unlock_sig(get_si(current)->sighand);
80011e9c:	8e8277a4 	lw	v0,30628(s4)
80011ea0:	0c004527 	jal	8001149c <unlock_sig>
80011ea4:	8c4400c4 	lw	a0,196(v0)
80011ea8:	0800478c 	j	80011e30 <do_signal+0x34c>
80011eac:	8e420010 	lw	v0,16(s2)
do_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:554
}

// do the signals in current
int do_signal(struct trapframe *tf, sigset_t * old)
{
	assert(!trap_in_kernel(tf));
80011eb0:	3c048002 	lui	a0,0x8002
80011eb4:	3c068002 	lui	a2,0x8002
80011eb8:	3c078002 	lui	a3,0x8002
80011ebc:	24842fb4 	addiu	a0,a0,12212
80011ec0:	2405022a 	li	a1,554
80011ec4:	24c60e28 	addiu	a2,a2,3624
80011ec8:	0c006b0b 	jal	8001ac2c <__panic>
80011ecc:	24e73044 	addiu	a3,a3,12356

80011ed0 <do_sigsuspend>:
do_sigsuspend():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:297
	return ret;
}

// do syscall sigsuspend
int do_sigsuspend(sigset_t __user * pmask)
{
80011ed0:	27bdffb8 	addiu	sp,sp,-72
80011ed4:	afb00034 	sw	s0,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:298
	struct mm_struct *mm = pls_read(current)->mm;
80011ed8:	3c108015 	lui	s0,0x8015
80011edc:	8e0277a4 	lw	v0,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:297
	return ret;
}

// do syscall sigsuspend
int do_sigsuspend(sigset_t __user * pmask)
{
80011ee0:	afb10038 	sw	s1,56(sp)
80011ee4:	00803021 	move	a2,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:298
	struct mm_struct *mm = pls_read(current)->mm;
80011ee8:	8c510020 	lw	s1,32(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:297
	return ret;
}

// do syscall sigsuspend
int do_sigsuspend(sigset_t __user * pmask)
{
80011eec:	afbf0044 	sw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:300
	struct mm_struct *mm = pls_read(current)->mm;
	sigset_t mask;
	lock_mm(mm);
80011ef0:	afa60028 	sw	a2,40(sp)
80011ef4:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:297
	return ret;
}

// do syscall sigsuspend
int do_sigsuspend(sigset_t __user * pmask)
{
80011ef8:	afb30040 	sw	s3,64(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:300
	struct mm_struct *mm = pls_read(current)->mm;
	sigset_t mask;
	lock_mm(mm);
80011efc:	0c004c26 	jal	80013098 <lock_mm>
80011f00:	afb2003c 	sw	s2,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:302
	{
		if (!copy_from_user(mm, &mask, pmask, sizeof(sigset_t), 0)) {
80011f04:	8fa60028 	lw	a2,40(sp)
80011f08:	02202021 	move	a0,s1
80011f0c:	27a50020 	addiu	a1,sp,32
80011f10:	24070008 	li	a3,8
80011f14:	0c00792e 	jal	8001e4b8 <copy_from_user>
80011f18:	afa00010 	sw	zero,16(sp)
80011f1c:	10400023 	beqz	v0,80011fac <do_sigsuspend+0xdc>
80011f20:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:307
			unlock_mm(mm);
			return -E_INVAL;
		}
	}
	unlock_mm(mm);
80011f24:	0c004c37 	jal	800130dc <unlock_mm>
80011f28:	3c118000 	lui	s1,0x8000
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:318
	sigset_del(set, SIGKILL);
	sigset_del(set, SIGSTOP);
	//kprintf("do_sigsuspend() %d\n", current->pid);
	//print_trapframe(current->tf);

	sigset_t old_blocked = get_si(current)->blocked;
80011f2c:	8e0477a4 	lw	a0,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:314

	sigset_t set;
	sigset_initwith(set, 0);
	sigset_addmask(set, mask);
	sigset_del(set, SIGKILL);
	sigset_del(set, SIGSTOP);
80011f30:	8fa60020 	lw	a2,32(sp)
80011f34:	3c05fffb 	lui	a1,0xfffb
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:318
	//kprintf("do_sigsuspend() %d\n", current->pid);
	//print_trapframe(current->tf);

	sigset_t old_blocked = get_si(current)->blocked;
80011f38:	8c8200c8 	lw	v0,200(a0)
80011f3c:	8c8300cc 	lw	v1,204(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:314

	sigset_t set;
	sigset_initwith(set, 0);
	sigset_addmask(set, mask);
	sigset_del(set, SIGKILL);
	sigset_del(set, SIGSTOP);
80011f40:	34a5feff 	ori	a1,a1,0xfeff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:318
	//kprintf("do_sigsuspend() %d\n", current->pid);
	//print_trapframe(current->tf);

	sigset_t old_blocked = get_si(current)->blocked;
80011f44:	afa20018 	sw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:319
	get_si(current)->blocked = set;
80011f48:	8fa20024 	lw	v0,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:314

	sigset_t set;
	sigset_initwith(set, 0);
	sigset_addmask(set, mask);
	sigset_del(set, SIGKILL);
	sigset_del(set, SIGSTOP);
80011f4c:	00c52824 	and	a1,a2,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:318
	//kprintf("do_sigsuspend() %d\n", current->pid);
	//print_trapframe(current->tf);

	sigset_t old_blocked = get_si(current)->blocked;
80011f50:	afa3001c 	sw	v1,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:319
	get_si(current)->blocked = set;
80011f54:	ac8500c8 	sw	a1,200(a0)
80011f58:	ac8200cc 	sw	v0,204(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:322

	while (1) {
		current->state = PROC_SLEEPING;
80011f5c:	24120001 	li	s2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:323
		current->wait_state = WT_SIGNAL;
80011f60:	02009821 	move	s3,s0
80011f64:	26310400 	addiu	s1,s1,1024
80011f68:	8e0277a4 	lw	v0,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:322

	sigset_t old_blocked = get_si(current)->blocked;
	get_si(current)->blocked = set;

	while (1) {
		current->state = PROC_SLEEPING;
80011f6c:	ac920000 	sw	s2,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:324
		current->wait_state = WT_SIGNAL;
		schedule();
80011f70:	0c00059f 	jal	8000167c <schedule>
80011f74:	ac510084 	sw	s1,132(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:327
		//kprintf("# HERE %08x %08x\n", current->state, current->wait_state);
		int ret;
		if ((ret = do_signal(current->tf, &old_blocked)) != 0) {
80011f78:	8e0277a4 	lw	v0,30628(s0)
80011f7c:	27a50018 	addiu	a1,sp,24
80011f80:	0c0046b9 	jal	80011ae4 <do_signal>
80011f84:	8c440054 	lw	a0,84(v0)
80011f88:	5040fff7 	beqzl	v0,80011f68 <do_sigsuspend+0x98>
80011f8c:	8e6477a4 	lw	a0,30628(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:331
			return ret;
		}
	}
}
80011f90:	8fbf0044 	lw	ra,68(sp)
80011f94:	8fb30040 	lw	s3,64(sp)
80011f98:	8fb2003c 	lw	s2,60(sp)
80011f9c:	8fb10038 	lw	s1,56(sp)
80011fa0:	8fb00034 	lw	s0,52(sp)
80011fa4:	03e00008 	jr	ra
80011fa8:	27bd0048 	addiu	sp,sp,72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:303
	struct mm_struct *mm = pls_read(current)->mm;
	sigset_t mask;
	lock_mm(mm);
	{
		if (!copy_from_user(mm, &mask, pmask, sizeof(sigset_t), 0)) {
			unlock_mm(mm);
80011fac:	0c004c37 	jal	800130dc <unlock_mm>
80011fb0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:304
			return -E_INVAL;
80011fb4:	080047e4 	j	80011f90 <do_sigsuspend+0xc0>
80011fb8:	2402ffea 	li	v0,-22

80011fbc <raise_signal>:
raise_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:612
	}
	return sign;
}

int raise_signal(struct proc_struct *proc, int sign, bool group)
{
80011fbc:	27bdffc8 	addiu	sp,sp,-56
80011fc0:	afb10020 	sw	s1,32(sp)
80011fc4:	afb0001c 	sw	s0,28(sp)
80011fc8:	afbf0034 	sw	ra,52(sp)
80011fcc:	afb50030 	sw	s5,48(sp)
80011fd0:	afb4002c 	sw	s4,44(sp)
80011fd4:	afb30028 	sw	s3,40(sp)
80011fd8:	afb20024 	sw	s2,36(sp)
80011fdc:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:617
	struct siginfo_t info;
	info.si_signo = sign;
	info.si_errno = 0;
	info.si_code = SI_USER;
	if (group) {
80011fe0:	14c0004d 	bnez	a2,80012118 <raise_signal+0x15c>
80011fe4:	00a08821 	move	s1,a1
specific_send_sig_info():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:391
static int
specific_send_sig_info(int sign, struct siginfo_t *info, struct proc_struct *to)
{
	bool intr_flag;
	int ret = 0;
	lock_sig(get_si(to)->sighand);
80011fe8:	0c004521 	jal	80011484 <lock_sig>
80011fec:	8c8400c4 	lw	a0,196(a0)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80011ff0:	40026000 	mfc0	v0,c0_status
80011ff4:	30420001 	andi	v0,v0,0x1
80011ff8:	14400090 	bnez	v0,8001223c <raise_signal+0x280>
80011ffc:	00009021 	move	s2,zero
specific_send_sig_info():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:394
	local_intr_save(intr_flag);

	if (!sigismember(get_si(to)->blocked, sign)
80012000:	8e0400cc 	lw	a0,204(s0)
80012004:	8e0200c8 	lw	v0,200(s0)
80012008:	2623ffff 	addiu	v1,s1,-1
8001200c:	00043840 	sll	a3,a0,0x1
80012010:	00033027 	nor	a2,zero,v1
80012014:	00c73804 	sllv	a3,a3,a2
80012018:	00621006 	srlv	v0,v0,v1
8001201c:	30650020 	andi	a1,v1,0x20
80012020:	00e21025 	or	v0,a3,v0
80012024:	00642006 	srlv	a0,a0,v1
80012028:	0085100b 	movn	v0,a0,a1
8001202c:	30480001 	andi	t0,v0,0x1
80012030:	55000012 	bnezl	t0,8001207c <raise_signal+0xc0>
80012034:	8e0700e4 	lw	a3,228(s0)
ignore_sig():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:175
}

// will the sign be ignored
static inline bool ignore_sig(int sign, struct proc_struct *proc)
{
	if (sign == SIGKILL || sign == SIGSTOP) {
80012038:	24020009 	li	v0,9
8001203c:	5222000f 	beql	s1,v0,8001207c <raise_signal+0xc0>
80012040:	8e0700e4 	lw	a3,228(s0)
80012044:	24020013 	li	v0,19
80012048:	1222000b 	beq	s1,v0,80012078 <raise_signal+0xbc>
8001204c:	00033940 	sll	a3,v1,0x5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:179
		return 0;
	}
	struct sigaction *act = &(get_si(proc)->sighand->action[sign - 1]);
	return act->sa_handler == SIG_IGN || (act->sa_handler == SIG_DFL
80012050:	8e0400c4 	lw	a0,196(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:178
static inline bool ignore_sig(int sign, struct proc_struct *proc)
{
	if (sign == SIGKILL || sign == SIGSTOP) {
		return 0;
	}
	struct sigaction *act = &(get_si(proc)->sighand->action[sign - 1]);
80012054:	000310c0 	sll	v0,v1,0x3
80012058:	00e21023 	subu	v0,a3,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:179
	return act->sa_handler == SIG_IGN || (act->sa_handler == SIG_DFL
8001205c:	00821021 	addu	v0,a0,v0
80012060:	8c440008 	lw	a0,8(v0)
80012064:	24070001 	li	a3,1
80012068:	10870019 	beq	a0,a3,800120d0 <raise_signal+0x114>
8001206c:	00001021 	move	v0,zero
80012070:	108000f0 	beqz	a0,80012434 <raise_signal+0x478>
80012074:	2624ffef 	addiu	a0,s1,-17
specific_send_sig_info():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:398

	if (!sigismember(get_si(to)->blocked, sign)
	    && ignore_sig(sign, to)) {
		goto out;
	}
	if (sigismember(get_si(to)->pending.signal, sign)) {
80012078:	8e0700e4 	lw	a3,228(s0)
8001207c:	8e0900e0 	lw	t1,224(s0)
80012080:	00072040 	sll	a0,a3,0x1
80012084:	00c43004 	sllv	a2,a0,a2
80012088:	00692006 	srlv	a0,t1,v1
8001208c:	00c42025 	or	a0,a2,a0
80012090:	00673006 	srlv	a2,a3,v1
80012094:	00c5200b 	movn	a0,a2,a1
80012098:	30840001 	andi	a0,a0,0x1
8001209c:	1480000c 	bnez	a0,800120d0 <raise_signal+0x114>
800120a0:	00001021 	move	v0,zero
send_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:362
		q->info.si_code = SI_KERNEL;
	} else {
		memcpy(&(q->info), info, sizeof(struct siginfo_t));
	}
#endif
	sigset_add(pending->signal, sign);
800120a4:	24020001 	li	v0,1
800120a8:	00621804 	sllv	v1,v0,v1
800120ac:	00601021 	move	v0,v1
800120b0:	0005100a 	movz	v0,zero,a1
800120b4:	0005180b 	movn	v1,zero,a1
800120b8:	00473825 	or	a3,v0,a3
800120bc:	00691825 	or	v1,v1,t1
800120c0:	ae0300e0 	sw	v1,224(s0)
800120c4:	ae0700e4 	sw	a3,228(s0)
specific_send_sig_info():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:402
	}
	if (sigismember(get_si(to)->pending.signal, sign)) {
		goto out;;
	}
	if (send_signal(sign, info, to, &(get_si(to)->pending)) == 0
	    && !sigismember(get_si(to)->blocked, sign)) {
800120c8:	1100006e 	beqz	t0,80012284 <raise_signal+0x2c8>
800120cc:	24020001 	li	v0,1
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
800120d0:	52400005 	beqzl	s2,800120e8 <raise_signal+0x12c>
800120d4:	8e0400c4 	lw	a0,196(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
800120d8:	0c006d00 	jal	8001b400 <intr_enable>
800120dc:	afa20010 	sw	v0,16(sp)
800120e0:	8fa20010 	lw	v0,16(sp)
specific_send_sig_info():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:408
		signal_wakeup(sign, to);
	}
	ret = 1;
out:
	local_intr_restore(intr_flag);
	unlock_sig(get_si(to)->sighand);
800120e4:	8e0400c4 	lw	a0,196(s0)
800120e8:	0c004527 	jal	8001149c <unlock_sig>
800120ec:	afa20010 	sw	v0,16(sp)
800120f0:	8fa20010 	lw	v0,16(sp)
raise_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:622
	if (group) {
		return group_send_sig_info(sign, &info, proc);
	} else {
		return specific_send_sig_info(sign, &info, proc);
	}
}
800120f4:	8fbf0034 	lw	ra,52(sp)
800120f8:	8fb50030 	lw	s5,48(sp)
800120fc:	8fb4002c 	lw	s4,44(sp)
80012100:	8fb30028 	lw	s3,40(sp)
80012104:	8fb20024 	lw	s2,36(sp)
80012108:	8fb10020 	lw	s1,32(sp)
8001210c:	8fb0001c 	lw	s0,28(sp)
80012110:	03e00008 	jr	ra
80012114:	27bd0038 	addiu	sp,sp,56
group_send_sig_info():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:482

// send a signal to thread group
static int
group_send_sig_info(int sign, struct siginfo_t *info, struct proc_struct *to)
{
	if (sign < 0 || sign > 64) {
80012118:	2ca30041 	sltiu	v1,a1,65
8001211c:	1060fff5 	beqz	v1,800120f4 <raise_signal+0x138>
80012120:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:485
		return -E_INVAL;
	}
	if (sign == 0 || get_si(to)->sighand == NULL) {
80012124:	10a0fff3 	beqz	a1,800120f4 <raise_signal+0x138>
80012128:	00001021 	move	v0,zero
8001212c:	8c8400c4 	lw	a0,196(a0)
80012130:	1080fff1 	beqz	a0,800120f8 <raise_signal+0x13c>
80012134:	8fbf0034 	lw	ra,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:490
		return 0;
	}
	bool intr_flag;
	int ret = 0;
	lock_sig(get_si(to)->sighand);
80012138:	0c004521 	jal	80011484 <lock_sig>
8001213c:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80012140:	40026000 	mfc0	v0,c0_status
80012144:	30420001 	andi	v0,v0,0x1
80012148:	144000b6 	bnez	v0,80012424 <raise_signal+0x468>
8001214c:	00009021 	move	s2,zero
handle_stop_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:416

// handle stop and continue signal
static int handle_stop_signal(int sign, struct proc_struct *to)
{
	if (sign == SIGSTOP || sign == SIGTSTP || sign == SIGTTIN
	    || sign == SIGTTOU) {
80012150:	2622ffed 	addiu	v0,s1,-19
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:415
}

// handle stop and continue signal
static int handle_stop_signal(int sign, struct proc_struct *to)
{
	if (sign == SIGSTOP || sign == SIGTSTP || sign == SIGTTIN
80012154:	2c420004 	sltiu	v0,v0,4
80012158:	144000a0 	bnez	v0,800123dc <raise_signal+0x420>
8001215c:	24020012 	li	v0,18
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:425
		do {
			remove_from_queue(SIGCONT, &(get_si(proc)->pending));
			sig_recalc_pending(proc);
			proc = next_thread(proc);
		} while (proc != current);
	} else if (sign == SIGCONT) {
80012160:	522200bd 	beql	s1,v0,80012458 <raise_signal+0x49c>
80012164:	8e0500c0 	lw	a1,192(s0)
group_send_sig_info():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:493
	bool intr_flag;
	int ret = 0;
	lock_sig(get_si(to)->sighand);
	local_intr_save(intr_flag);
	handle_stop_signal(sign, to);
	if (!sigismember(get_si(to)->blocked, sign)
80012168:	8e0200cc 	lw	v0,204(s0)
8001216c:	8e0500c8 	lw	a1,200(s0)
80012170:	2623ffff 	addiu	v1,s1,-1
80012174:	00023040 	sll	a2,v0,0x1
80012178:	00034027 	nor	t0,zero,v1
8001217c:	01063004 	sllv	a2,a2,t0
80012180:	00652006 	srlv	a0,a1,v1
80012184:	00c42025 	or	a0,a2,a0
80012188:	30670020 	andi	a3,v1,0x20
8001218c:	00623006 	srlv	a2,v0,v1
80012190:	00c7200b 	movn	a0,a2,a3
80012194:	30840001 	andi	a0,a0,0x1
80012198:	5480004a 	bnezl	a0,800122c4 <raise_signal+0x308>
8001219c:	8e0600c0 	lw	a2,192(s0)
ignore_sig():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:175
}

// will the sign be ignored
static inline bool ignore_sig(int sign, struct proc_struct *proc)
{
	if (sign == SIGKILL || sign == SIGSTOP) {
800121a0:	24040009 	li	a0,9
800121a4:	12240046 	beq	s1,a0,800122c0 <raise_signal+0x304>
800121a8:	24040013 	li	a0,19
800121ac:	12240044 	beq	s1,a0,800122c0 <raise_signal+0x304>
800121b0:	000320c0 	sll	a0,v1,0x3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:179
		return 0;
	}
	struct sigaction *act = &(get_si(proc)->sighand->action[sign - 1]);
	return act->sa_handler == SIG_IGN || (act->sa_handler == SIG_DFL
800121b4:	8e0600c4 	lw	a2,196(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:178
static inline bool ignore_sig(int sign, struct proc_struct *proc)
{
	if (sign == SIGKILL || sign == SIGSTOP) {
		return 0;
	}
	struct sigaction *act = &(get_si(proc)->sighand->action[sign - 1]);
800121b8:	00034940 	sll	t1,v1,0x5
800121bc:	01242023 	subu	a0,t1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:179
	return act->sa_handler == SIG_IGN || (act->sa_handler == SIG_DFL
800121c0:	00c42021 	addu	a0,a2,a0
800121c4:	8c840008 	lw	a0,8(a0)
800121c8:	24060001 	li	a2,1
800121cc:	1086000b 	beq	a0,a2,800121fc <raise_signal+0x240>
800121d0:	00000000 	nop
800121d4:	5480003b 	bnezl	a0,800122c4 <raise_signal+0x308>
800121d8:	8e0600c0 	lw	a2,192(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:181
					      && (sign == SIGCONT
						  || sign == SIGCHLD
800121dc:	2624ffef 	addiu	a0,s1,-17
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:180
	if (sign == SIGKILL || sign == SIGSTOP) {
		return 0;
	}
	struct sigaction *act = &(get_si(proc)->sighand->action[sign - 1]);
	return act->sa_handler == SIG_IGN || (act->sa_handler == SIG_DFL
					      && (sign == SIGCONT
800121e0:	2c840002 	sltiu	a0,a0,2
800121e4:	14800005 	bnez	a0,800121fc <raise_signal+0x240>
800121e8:	2404001c 	li	a0,28
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:182
						  || sign == SIGCHLD
						  || sign == SIGWINCH
800121ec:	12240003 	beq	s1,a0,800121fc <raise_signal+0x240>
800121f0:	24040017 	li	a0,23
group_send_sig_info():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:494
	int ret = 0;
	lock_sig(get_si(to)->sighand);
	local_intr_save(intr_flag);
	handle_stop_signal(sign, to);
	if (!sigismember(get_si(to)->blocked, sign)
	    && ignore_sig(sign, to)) {
800121f4:	56240033 	bnel	s1,a0,800122c4 <raise_signal+0x308>
800121f8:	8e0600c0 	lw	a2,192(s0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
800121fc:	16400073 	bnez	s2,800123cc <raise_signal+0x410>
80012200:	00000000 	nop
group_send_sig_info():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:508
	}
	group_complete_send(sign, to);
	ret = 0;
out:
	local_intr_restore(intr_flag);
	unlock_sig(get_si(to)->sighand);
80012204:	8e0400c4 	lw	a0,196(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:509
	return ret;
80012208:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:508
	}
	group_complete_send(sign, to);
	ret = 0;
out:
	local_intr_restore(intr_flag);
	unlock_sig(get_si(to)->sighand);
8001220c:	0c004527 	jal	8001149c <unlock_sig>
80012210:	afa20010 	sw	v0,16(sp)
raise_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:622
	if (group) {
		return group_send_sig_info(sign, &info, proc);
	} else {
		return specific_send_sig_info(sign, &info, proc);
	}
}
80012214:	8fbf0034 	lw	ra,52(sp)
80012218:	8fa20010 	lw	v0,16(sp)
8001221c:	8fb50030 	lw	s5,48(sp)
80012220:	8fb4002c 	lw	s4,44(sp)
80012224:	8fb30028 	lw	s3,40(sp)
80012228:	8fb20024 	lw	s2,36(sp)
8001222c:	8fb10020 	lw	s1,32(sp)
80012230:	8fb0001c 	lw	s0,28(sp)
80012234:	03e00008 	jr	ra
80012238:	27bd0038 	addiu	sp,sp,56
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8001223c:	0c006d04 	jal	8001b410 <intr_disable>
80012240:	24120001 	li	s2,1
specific_send_sig_info():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:394
	bool intr_flag;
	int ret = 0;
	lock_sig(get_si(to)->sighand);
	local_intr_save(intr_flag);

	if (!sigismember(get_si(to)->blocked, sign)
80012244:	8e0400cc 	lw	a0,204(s0)
80012248:	8e0200c8 	lw	v0,200(s0)
8001224c:	2623ffff 	addiu	v1,s1,-1
80012250:	00043840 	sll	a3,a0,0x1
80012254:	00033027 	nor	a2,zero,v1
80012258:	00c73804 	sllv	a3,a3,a2
8001225c:	00621006 	srlv	v0,v0,v1
80012260:	30650020 	andi	a1,v1,0x20
80012264:	00e21025 	or	v0,a3,v0
80012268:	00642006 	srlv	a0,a0,v1
8001226c:	0085100b 	movn	v0,a0,a1
80012270:	30480001 	andi	t0,v0,0x1
80012274:	5500ff81 	bnezl	t0,8001207c <raise_signal+0xc0>
80012278:	8e0700e4 	lw	a3,228(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:175
}

// will the sign be ignored
static inline bool ignore_sig(int sign, struct proc_struct *proc)
{
	if (sign == SIGKILL || sign == SIGSTOP) {
8001227c:	0800480f 	j	8001203c <raise_signal+0x80>
80012280:	24020009 	li	v0,9
signal_wakeup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:377
}

// wake up proc to handle its signal
static void signal_wakeup(int sign, struct proc_struct *proc)
{
	proc->flags |= TIF_SIGPENDING;
80012284:	8e05005c 	lw	a1,92(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:378
	if (proc->state == PROC_SLEEPING
80012288:	8e030000 	lw	v1,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:377
}

// wake up proc to handle its signal
static void signal_wakeup(int sign, struct proc_struct *proc)
{
	proc->flags |= TIF_SIGPENDING;
8001228c:	3c040001 	lui	a0,0x1
80012290:	00a42025 	or	a0,a1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:378
	if (proc->state == PROC_SLEEPING
80012294:	1462ff8e 	bne	v1,v0,800120d0 <raise_signal+0x114>
80012298:	ae04005c 	sw	a0,92(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:379
	    && (proc->wait_state & WT_INTERRUPTED || sign == SIGKILL)) {
8001229c:	8e030084 	lw	v1,132(s0)
800122a0:	04600003 	bltz	v1,800122b0 <raise_signal+0x2f4>
800122a4:	24030009 	li	v1,9
800122a8:	1623ff89 	bne	s1,v1,800120d0 <raise_signal+0x114>
800122ac:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:380
		try_to_wakeup(proc);
800122b0:	0c00053d 	jal	800014f4 <try_to_wakeup>
800122b4:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:405
	}
	if (send_signal(sign, info, to, &(get_si(to)->pending)) == 0
	    && !sigismember(get_si(to)->blocked, sign)) {
		signal_wakeup(sign, to);
	}
	ret = 1;
800122b8:	08004834 	j	800120d0 <raise_signal+0x114>
800122bc:	24020001 	li	v0,1
group_send_sig_info():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:497
	handle_stop_signal(sign, to);
	if (!sigismember(get_si(to)->blocked, sign)
	    && ignore_sig(sign, to)) {
		goto out;
	}
	if (sigismember(get_si(to)->signal->shared_pending.signal, sign)) {
800122c0:	8e0600c0 	lw	a2,192(s0)
800122c4:	8cc90014 	lw	t1,20(a2)
800122c8:	8cca0010 	lw	t2,16(a2)
800122cc:	00092040 	sll	a0,t1,0x1
800122d0:	01044004 	sllv	t0,a0,t0
800122d4:	006a2006 	srlv	a0,t2,v1
800122d8:	01042025 	or	a0,t0,a0
800122dc:	00694006 	srlv	t0,t1,v1
800122e0:	0107200b 	movn	a0,t0,a3
800122e4:	30840001 	andi	a0,a0,0x1
800122e8:	1480ffc4 	bnez	a0,800121fc <raise_signal+0x240>
800122ec:	24040001 	li	a0,1
send_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:362
		q->info.si_code = SI_KERNEL;
	} else {
		memcpy(&(q->info), info, sizeof(struct siginfo_t));
	}
#endif
	sigset_add(pending->signal, sign);
800122f0:	00641804 	sllv	v1,a0,v1
800122f4:	00604021 	move	t0,v1
group_complete_send():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:465

// select a proc who wants signal from thread group
static void group_complete_send(int sign, struct proc_struct *proc)
{
	struct proc_struct *pick;
	pick = get_si(proc)->signal->curr_target;
800122f8:	8cc40004 	lw	a0,4(a2)
send_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:362
		q->info.si_code = SI_KERNEL;
	} else {
		memcpy(&(q->info), info, sizeof(struct siginfo_t));
	}
#endif
	sigset_add(pending->signal, sign);
800122fc:	0007400a 	movz	t0,zero,a3
80012300:	0007180b 	movn	v1,zero,a3
80012304:	006a5025 	or	t2,v1,t2
80012308:	01094825 	or	t1,t0,t1
8001230c:	acca0010 	sw	t2,16(a2)
group_complete_send():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:466
// select a proc who wants signal from thread group
static void group_complete_send(int sign, struct proc_struct *proc)
{
	struct proc_struct *pick;
	pick = get_si(proc)->signal->curr_target;
	if (pick == NULL)
80012310:	10800078 	beqz	a0,800124f4 <raise_signal+0x538>
80012314:	acc90014 	sw	t1,20(a2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:470
		pick = get_si(proc)->signal->curr_target = proc;
	while (!wants_signal(sign, pick)) {
		pick = next_thread(pick);
		if (pick == get_si(proc)->signal->curr_target) {
80012318:	8c8500c8 	lw	a1,200(a0)
8001231c:	8c8200cc 	lw	v0,204(a0)
wants_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:452
// does the proc want a signal
static bool wants_signal(int sign, struct proc_struct *proc)
{
	if (sigismember(get_si(proc)->blocked, sign)) {
		return 0;
	} else if (proc->flags & PF_EXITING || proc->state == PROC_ZOMBIE) {
80012320:	240a0003 	li	t2,3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:454
		return 0;
	} else if (sign == SIGKILL) {
80012324:	240b0009 	li	t3,9
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:122
}

// is there a signal pending in proc
static inline bool signal_pending(struct proc_struct *proc)
{
	return proc->flags & TIF_SIGPENDING;
80012328:	080048d5 	j	80012354 <raise_signal+0x398>
8001232c:	3c090001 	lui	t1,0x1
group_complete_send():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:468
{
	struct proc_struct *pick;
	pick = get_si(proc)->signal->curr_target;
	if (pick == NULL)
		pick = get_si(proc)->signal->curr_target = proc;
	while (!wants_signal(sign, pick)) {
80012330:	50e00017 	beqzl	a3,80012390 <raise_signal+0x3d4>
80012334:	3c030001 	lui	v1,0x1
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
80012338:	8c820098 	lw	v0,152(a0)
group_complete_send():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:470
		pick = next_thread(pick);
		if (pick == get_si(proc)->signal->curr_target) {
8001233c:	8cc50004 	lw	a1,4(a2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:469
	struct proc_struct *pick;
	pick = get_si(proc)->signal->curr_target;
	if (pick == NULL)
		pick = get_si(proc)->signal->curr_target = proc;
	while (!wants_signal(sign, pick)) {
		pick = next_thread(pick);
80012340:	2444ff6c 	addiu	a0,v0,-148
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:470
		if (pick == get_si(proc)->signal->curr_target) {
80012344:	1085ffad 	beq	a0,a1,800121fc <raise_signal+0x240>
80012348:	00000000 	nop
8001234c:	8c450034 	lw	a1,52(v0)
80012350:	8c420038 	lw	v0,56(v0)
wants_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:450
}

// does the proc want a signal
static bool wants_signal(int sign, struct proc_struct *proc)
{
	if (sigismember(get_si(proc)->blocked, sign)) {
80012354:	00652824 	and	a1,v1,a1
80012358:	01021024 	and	v0,t0,v0
8001235c:	00a21025 	or	v0,a1,v0
80012360:	5440fff6 	bnezl	v0,8001233c <raise_signal+0x380>
80012364:	8c820098 	lw	v0,152(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:452
		return 0;
	} else if (proc->flags & PF_EXITING || proc->state == PROC_ZOMBIE) {
80012368:	8c82005c 	lw	v0,92(a0)
8001236c:	30450001 	andi	a1,v0,0x1
80012370:	54a0fff2 	bnezl	a1,8001233c <raise_signal+0x380>
80012374:	8c820098 	lw	v0,152(a0)
80012378:	8c850000 	lw	a1,0(a0)
8001237c:	10aaffee 	beq	a1,t2,80012338 <raise_signal+0x37c>
80012380:	00493824 	and	a3,v0,t1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:454
		return 0;
	} else if (sign == SIGKILL) {
80012384:	162bffea 	bne	s1,t3,80012330 <raise_signal+0x374>
80012388:	00000000 	nop
signal_wakeup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:377
}

// wake up proc to handle its signal
static void signal_wakeup(int sign, struct proc_struct *proc)
{
	proc->flags |= TIF_SIGPENDING;
8001238c:	3c030001 	lui	v1,0x1
80012390:	00431025 	or	v0,v0,v1
group_complete_send():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:474
		pick = next_thread(pick);
		if (pick == get_si(proc)->signal->curr_target) {
			return;
		}
	}
	get_si(proc)->signal->curr_target = pick;
80012394:	acc40004 	sw	a0,4(a2)
signal_wakeup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:377
}

// wake up proc to handle its signal
static void signal_wakeup(int sign, struct proc_struct *proc)
{
	proc->flags |= TIF_SIGPENDING;
80012398:	ac82005c 	sw	v0,92(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:378
	if (proc->state == PROC_SLEEPING
8001239c:	24020001 	li	v0,1
800123a0:	14a2ff96 	bne	a1,v0,800121fc <raise_signal+0x240>
800123a4:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:379
	    && (proc->wait_state & WT_INTERRUPTED || sign == SIGKILL)) {
800123a8:	8c820084 	lw	v0,132(a0)
800123ac:	04400003 	bltz	v0,800123bc <raise_signal+0x400>
800123b0:	24020009 	li	v0,9
800123b4:	1622ff91 	bne	s1,v0,800121fc <raise_signal+0x240>
800123b8:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:380
		try_to_wakeup(proc);
800123bc:	0c00053d 	jal	800014f4 <try_to_wakeup>
800123c0:	00000000 	nop
800123c4:	0800487f 	j	800121fc <raise_signal+0x240>
800123c8:	00000000 	nop
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
800123cc:	0c006d00 	jal	8001b400 <intr_enable>
800123d0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:508
	}
	group_complete_send(sign, to);
	ret = 0;
out:
	local_intr_restore(intr_flag);
	unlock_sig(get_si(to)->sighand);
800123d4:	08004882 	j	80012208 <raise_signal+0x24c>
800123d8:	8e0400c4 	lw	a0,196(s0)
handle_stop_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:417
// handle stop and continue signal
static int handle_stop_signal(int sign, struct proc_struct *to)
{
	if (sign == SIGSTOP || sign == SIGTSTP || sign == SIGTTIN
	    || sign == SIGTTOU) {
		remove_from_queue(SIGCONT,
800123dc:	8e0500c0 	lw	a1,192(s0)
800123e0:	24040012 	li	a0,18
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:419
				  &(get_si(to)->signal->shared_pending));
		struct proc_struct *proc = current;
800123e4:	3c158015 	lui	s5,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:417
// handle stop and continue signal
static int handle_stop_signal(int sign, struct proc_struct *to)
{
	if (sign == SIGSTOP || sign == SIGTSTP || sign == SIGTTIN
	    || sign == SIGTTOU) {
		remove_from_queue(SIGCONT,
800123e8:	0c004507 	jal	8001141c <remove_from_queue>
800123ec:	24a50008 	addiu	a1,a1,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:419
				  &(get_si(to)->signal->shared_pending));
		struct proc_struct *proc = current;
800123f0:	8eb377a4 	lw	s3,30628(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:421
		do {
			remove_from_queue(SIGCONT, &(get_si(proc)->pending));
800123f4:	266500d8 	addiu	a1,s3,216
800123f8:	0c004507 	jal	8001141c <remove_from_queue>
800123fc:	24040012 	li	a0,18
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:422
			sig_recalc_pending(proc);
80012400:	0c004530 	jal	800114c0 <sig_recalc_pending>
80012404:	02602021 	move	a0,s3
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
80012408:	8e730098 	lw	s3,152(s3)
handle_stop_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:424
			proc = next_thread(proc);
		} while (proc != current);
8001240c:	8ea277a4 	lw	v0,30628(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:423
				  &(get_si(to)->signal->shared_pending));
		struct proc_struct *proc = current;
		do {
			remove_from_queue(SIGCONT, &(get_si(proc)->pending));
			sig_recalc_pending(proc);
			proc = next_thread(proc);
80012410:	2673ff6c 	addiu	s3,s3,-148
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:424
		} while (proc != current);
80012414:	1662fff8 	bne	s3,v0,800123f8 <raise_signal+0x43c>
80012418:	266500d8 	addiu	a1,s3,216
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:493
	bool intr_flag;
	int ret = 0;
	lock_sig(get_si(to)->sighand);
	local_intr_save(intr_flag);
	handle_stop_signal(sign, to);
	if (!sigismember(get_si(to)->blocked, sign)
8001241c:	0800485b 	j	8001216c <raise_signal+0x1b0>
80012420:	8e0200cc 	lw	v0,204(s0)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
80012424:	0c006d04 	jal	8001b410 <intr_disable>
80012428:	24120001 	li	s2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:416

// handle stop and continue signal
static int handle_stop_signal(int sign, struct proc_struct *to)
{
	if (sign == SIGSTOP || sign == SIGTSTP || sign == SIGTTIN
	    || sign == SIGTTOU) {
8001242c:	08004855 	j	80012154 <raise_signal+0x198>
80012430:	2622ffed 	addiu	v0,s1,-19
specific_send_sig_info():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:180
	if (sign == SIGKILL || sign == SIGSTOP) {
		return 0;
	}
	struct sigaction *act = &(get_si(proc)->sighand->action[sign - 1]);
	return act->sa_handler == SIG_IGN || (act->sa_handler == SIG_DFL
					      && (sign == SIGCONT
80012434:	2c840002 	sltiu	a0,a0,2
80012438:	1480ff25 	bnez	a0,800120d0 <raise_signal+0x114>
8001243c:	2404001c 	li	a0,28
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:182
						  || sign == SIGCHLD
						  || sign == SIGWINCH
80012440:	1224ff23 	beq	s1,a0,800120d0 <raise_signal+0x114>
80012444:	24040017 	li	a0,23
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:395
	int ret = 0;
	lock_sig(get_si(to)->sighand);
	local_intr_save(intr_flag);

	if (!sigismember(get_si(to)->blocked, sign)
	    && ignore_sig(sign, to)) {
80012448:	1224ff21 	beq	s1,a0,800120d0 <raise_signal+0x114>
8001244c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:398
		goto out;
	}
	if (sigismember(get_si(to)->pending.signal, sign)) {
80012450:	0800481f 	j	8001207c <raise_signal+0xc0>
80012454:	8e0700e4 	lw	a3,228(s0)
handle_stop_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:426
			remove_from_queue(SIGCONT, &(get_si(proc)->pending));
			sig_recalc_pending(proc);
			proc = next_thread(proc);
		} while (proc != current);
	} else if (sign == SIGCONT) {
		remove_from_queue(SIGSTOP,
80012458:	24040013 	li	a0,19
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:434
				  &(get_si(to)->signal->shared_pending));
		remove_from_queue(SIGTTIN,
				  &(get_si(to)->signal->shared_pending));
		remove_from_queue(SIGTTOU,
				  &(get_si(to)->signal->shared_pending));
		struct proc_struct *proc = current;
8001245c:	3c158015 	lui	s5,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:426
			remove_from_queue(SIGCONT, &(get_si(proc)->pending));
			sig_recalc_pending(proc);
			proc = next_thread(proc);
		} while (proc != current);
	} else if (sign == SIGCONT) {
		remove_from_queue(SIGSTOP,
80012460:	0c004507 	jal	8001141c <remove_from_queue>
80012464:	24a50008 	addiu	a1,a1,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:428
				  &(get_si(to)->signal->shared_pending));
		remove_from_queue(SIGTSTP,
80012468:	8e0500c0 	lw	a1,192(s0)
8001246c:	24040014 	li	a0,20
80012470:	0c004507 	jal	8001141c <remove_from_queue>
80012474:	24a50008 	addiu	a1,a1,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:430
				  &(get_si(to)->signal->shared_pending));
		remove_from_queue(SIGTTIN,
80012478:	8e0500c0 	lw	a1,192(s0)
8001247c:	24040015 	li	a0,21
80012480:	0c004507 	jal	8001141c <remove_from_queue>
80012484:	24a50008 	addiu	a1,a1,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:432
				  &(get_si(to)->signal->shared_pending));
		remove_from_queue(SIGTTOU,
80012488:	8e0500c0 	lw	a1,192(s0)
8001248c:	24040016 	li	a0,22
80012490:	0c004507 	jal	8001141c <remove_from_queue>
80012494:	24a50008 	addiu	a1,a1,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:434
				  &(get_si(to)->signal->shared_pending));
		struct proc_struct *proc = current;
80012498:	8eb377a4 	lw	s3,30628(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:436
		do {
			remove_from_queue(SIGCONT, &(get_si(proc)->pending));
8001249c:	267400d8 	addiu	s4,s3,216
800124a0:	24040012 	li	a0,18
800124a4:	0c004507 	jal	8001141c <remove_from_queue>
800124a8:	02802821 	move	a1,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:437
			remove_from_queue(SIGTSTP, &(get_si(proc)->pending));
800124ac:	24040014 	li	a0,20
800124b0:	0c004507 	jal	8001141c <remove_from_queue>
800124b4:	02802821 	move	a1,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:438
			remove_from_queue(SIGTTIN, &(get_si(proc)->pending));
800124b8:	24040015 	li	a0,21
800124bc:	0c004507 	jal	8001141c <remove_from_queue>
800124c0:	02802821 	move	a1,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:439
			remove_from_queue(SIGTTOU, &(get_si(proc)->pending));
800124c4:	02802821 	move	a1,s4
800124c8:	0c004507 	jal	8001141c <remove_from_queue>
800124cc:	24040016 	li	a0,22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:440
			sig_recalc_pending(proc);
800124d0:	0c004530 	jal	800114c0 <sig_recalc_pending>
800124d4:	02602021 	move	a0,s3
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
800124d8:	8e730098 	lw	s3,152(s3)
handle_stop_signal():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:442
			proc = next_thread(proc);
		} while (proc != current);
800124dc:	8ea277a4 	lw	v0,30628(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:441
			remove_from_queue(SIGCONT, &(get_si(proc)->pending));
			remove_from_queue(SIGTSTP, &(get_si(proc)->pending));
			remove_from_queue(SIGTTIN, &(get_si(proc)->pending));
			remove_from_queue(SIGTTOU, &(get_si(proc)->pending));
			sig_recalc_pending(proc);
			proc = next_thread(proc);
800124e0:	2673ff6c 	addiu	s3,s3,-148
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:442
		} while (proc != current);
800124e4:	1662ffee 	bne	s3,v0,800124a0 <raise_signal+0x4e4>
800124e8:	267400d8 	addiu	s4,s3,216
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:493
	bool intr_flag;
	int ret = 0;
	lock_sig(get_si(to)->sighand);
	local_intr_save(intr_flag);
	handle_stop_signal(sign, to);
	if (!sigismember(get_si(to)->blocked, sign)
800124ec:	0800485b 	j	8001216c <raise_signal+0x1b0>
800124f0:	8e0200cc 	lw	v0,204(s0)
group_complete_send():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:467
static void group_complete_send(int sign, struct proc_struct *proc)
{
	struct proc_struct *pick;
	pick = get_si(proc)->signal->curr_target;
	if (pick == NULL)
		pick = get_si(proc)->signal->curr_target = proc;
800124f4:	acd00004 	sw	s0,4(a2)
800124f8:	080048c8 	j	80012320 <raise_signal+0x364>
800124fc:	02002021 	move	a0,s0

80012500 <do_sigtkill>:
do_sigtkill():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:625
		return specific_send_sig_info(sign, &info, proc);
	}
}

int do_sigtkill(int pid, int sign)
{
80012500:	27bdffe0 	addiu	sp,sp,-32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:626
	struct proc_struct *proc = find_proc(pid);
80012504:	afa50010 	sw	a1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:625
		return specific_send_sig_info(sign, &info, proc);
	}
}

int do_sigtkill(int pid, int sign)
{
80012508:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:626
	struct proc_struct *proc = find_proc(pid);
8001250c:	0c003b44 	jal	8000ed10 <find_proc>
80012510:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:627
	if (proc == NULL || proc->state == PROC_ZOMBIE) {
80012514:	10400009 	beqz	v0,8001253c <do_sigtkill+0x3c>
80012518:	8fa50010 	lw	a1,16(sp)
8001251c:	8c440000 	lw	a0,0(v0)
80012520:	24030003 	li	v1,3
80012524:	10830005 	beq	a0,v1,8001253c <do_sigtkill+0x3c>
80012528:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:630
		return -E_INVAL;
	}
	return raise_signal(proc, sign, 0);
8001252c:	00402021 	move	a0,v0
80012530:	00003021 	move	a2,zero
80012534:	080047ef 	j	80011fbc <raise_signal>
80012538:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:631
}
8001253c:	8fbf001c 	lw	ra,28(sp)
80012540:	2402ffea 	li	v0,-22
80012544:	03e00008 	jr	ra
80012548:	27bd0020 	addiu	sp,sp,32

8001254c <do_sigkill>:
do_sigkill():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:634

int do_sigkill(int pid, int sign)
{
8001254c:	27bdffe0 	addiu	sp,sp,-32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:635
	struct proc_struct *proc = find_proc(pid);
80012550:	afa50010 	sw	a1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:634
	}
	return raise_signal(proc, sign, 0);
}

int do_sigkill(int pid, int sign)
{
80012554:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:635
	struct proc_struct *proc = find_proc(pid);
80012558:	0c003b44 	jal	8000ed10 <find_proc>
8001255c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:636
	if (proc == NULL || proc->state == PROC_ZOMBIE) {
80012560:	10400009 	beqz	v0,80012588 <do_sigkill+0x3c>
80012564:	8fa50010 	lw	a1,16(sp)
80012568:	8c440000 	lw	a0,0(v0)
8001256c:	24030003 	li	v1,3
80012570:	10830005 	beq	a0,v1,80012588 <do_sigkill+0x3c>
80012574:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:642
		return -E_INVAL;
	}
#ifdef __SIGDEBUG
	kprintf("do_sigkill: pid=%d sig=%d\n", pid, sign);
#endif
	return raise_signal(proc, sign, 1);
80012578:	00402021 	move	a0,v0
8001257c:	24060001 	li	a2,1
80012580:	080047ef 	j	80011fbc <raise_signal>
80012584:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:643
}
80012588:	8fbf001c 	lw	ra,28(sp)
8001258c:	2402ffea 	li	v0,-22
80012590:	03e00008 	jr	ra
80012594:	27bd0020 	addiu	sp,sp,32

80012598 <do_sigaltstack>:
do_sigaltstack():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:647

// do syscall sigaltstack
int do_sigaltstack(const stack_t * ss, stack_t * old)
{
80012598:	27bdffb8 	addiu	sp,sp,-72
8001259c:	afb10038 	sw	s1,56(sp)
800125a0:	afbf0044 	sw	ra,68(sp)
800125a4:	afb30040 	sw	s3,64(sp)
800125a8:	afb2003c 	sw	s2,60(sp)
800125ac:	afb00034 	sw	s0,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:649
	int ret = -E_INVAL;
	if (ss == NULL) {
800125b0:	10800024 	beqz	a0,80012644 <do_sigaltstack+0xac>
800125b4:	00808821 	move	s1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:653
		return ret;
	}

	struct mm_struct *mm = current->mm;
800125b8:	3c138015 	lui	s3,0x8015
800125bc:	8e6277a4 	lw	v0,30628(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:654
	stack_t stack =
800125c0:	afa0001c 	sw	zero,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:657
	    { get_si(current)->sas_ss_sp, 0, get_si(current)->sas_ss_size };
	lock_mm(mm);
	if (old != NULL && !copy_to_user(mm, old, &stack, sizeof(stack_t))) {
800125c4:	27b20018 	addiu	s2,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:653
	int ret = -E_INVAL;
	if (ss == NULL) {
		return ret;
	}

	struct mm_struct *mm = current->mm;
800125c8:	8c500020 	lw	s0,32(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:654
	stack_t stack =
800125cc:	8c4300e8 	lw	v1,232(v0)
800125d0:	8c4200ec 	lw	v0,236(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:656
	    { get_si(current)->sas_ss_sp, 0, get_si(current)->sas_ss_size };
	lock_mm(mm);
800125d4:	02002021 	move	a0,s0
800125d8:	afa50028 	sw	a1,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:654
	if (ss == NULL) {
		return ret;
	}

	struct mm_struct *mm = current->mm;
	stack_t stack =
800125dc:	afa30018 	sw	v1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:656
	    { get_si(current)->sas_ss_sp, 0, get_si(current)->sas_ss_size };
	lock_mm(mm);
800125e0:	0c004c26 	jal	80013098 <lock_mm>
800125e4:	afa20020 	sw	v0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:657
	if (old != NULL && !copy_to_user(mm, old, &stack, sizeof(stack_t))) {
800125e8:	8fa50028 	lw	a1,40(sp)
800125ec:	10a00006 	beqz	a1,80012608 <do_sigaltstack+0x70>
800125f0:	02002021 	move	a0,s0
800125f4:	02403021 	move	a2,s2
800125f8:	0c007948 	jal	8001e520 <copy_to_user>
800125fc:	2407000c 	li	a3,12
80012600:	10400011 	beqz	v0,80012648 <do_sigaltstack+0xb0>
80012604:	8fbf0044 	lw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:660
		goto out;
	}
	if (copy_from_user(mm, &stack, ss, sizeof(stack_t), 1)) {
80012608:	24020001 	li	v0,1
8001260c:	02002021 	move	a0,s0
80012610:	02402821 	move	a1,s2
80012614:	02203021 	move	a2,s1
80012618:	2407000c 	li	a3,12
8001261c:	0c00792e 	jal	8001e4b8 <copy_from_user>
80012620:	afa20010 	sw	v0,16(sp)
80012624:	10400005 	beqz	v0,8001263c <do_sigaltstack+0xa4>
80012628:	8e6277a4 	lw	v0,30628(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:661
		get_si(current)->sas_ss_sp = stack.sp;
8001262c:	8fa30018 	lw	v1,24(sp)
80012630:	ac4300e8 	sw	v1,232(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:662
		get_si(current)->sas_ss_size = stack.size;
80012634:	8fa30020 	lw	v1,32(sp)
80012638:	ac4300ec 	sw	v1,236(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:664
	}
	unlock_mm(mm);
8001263c:	0c004c37 	jal	800130dc <unlock_mm>
80012640:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:667
out:
	return ret;
}
80012644:	8fbf0044 	lw	ra,68(sp)
80012648:	2402ffea 	li	v0,-22
8001264c:	8fb30040 	lw	s3,64(sp)
80012650:	8fb2003c 	lw	s2,60(sp)
80012654:	8fb10038 	lw	s1,56(sp)
80012658:	8fb00034 	lw	s0,52(sp)
8001265c:	03e00008 	jr	ra
80012660:	27bd0048 	addiu	sp,sp,72

80012664 <do_sigwaitinfo>:
do_sigwaitinfo():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:670

int do_sigwaitinfo(const sigset_t * setp, struct siginfo_t *info)
{
80012664:	27bdffb8 	addiu	sp,sp,-72
80012668:	afb00034 	sw	s0,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:672
	sigset_t set;
	struct mm_struct *mm = current->mm;
8001266c:	3c108015 	lui	s0,0x8015
80012670:	8e0277a4 	lw	v0,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:670
out:
	return ret;
}

int do_sigwaitinfo(const sigset_t * setp, struct siginfo_t *info)
{
80012674:	afb10038 	sw	s1,56(sp)
80012678:	afbf0044 	sw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:672
	sigset_t set;
	struct mm_struct *mm = current->mm;
8001267c:	8c510020 	lw	s1,32(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:670
out:
	return ret;
}

int do_sigwaitinfo(const sigset_t * setp, struct siginfo_t *info)
{
80012680:	afb30040 	sw	s3,64(sp)
80012684:	afb2003c 	sw	s2,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:673
	sigset_t set;
	struct mm_struct *mm = current->mm;
	assert(mm != NULL);
80012688:	1220003b 	beqz	s1,80012778 <do_sigwaitinfo+0x114>
8001268c:	00803021 	move	a2,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:674
	lock_mm(mm);
80012690:	02202021 	move	a0,s1
80012694:	0c004c26 	jal	80013098 <lock_mm>
80012698:	afa60028 	sw	a2,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:675
	if (setp == NULL
8001269c:	8fa60028 	lw	a2,40(sp)
800126a0:	10c0002d 	beqz	a2,80012758 <do_sigwaitinfo+0xf4>
800126a4:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:676
	    || !copy_from_user(mm, &set, setp, sizeof(sigset_t), 0)) {
800126a8:	27a50020 	addiu	a1,sp,32
800126ac:	24070008 	li	a3,8
800126b0:	0c00792e 	jal	8001e4b8 <copy_from_user>
800126b4:	afa00010 	sw	zero,16(sp)
800126b8:	50400028 	beqzl	v0,8001275c <do_sigwaitinfo+0xf8>
800126bc:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:681
		assert(0);
		unlock_mm(mm);
		return -1;
	}
	unlock_mm(mm);
800126c0:	0c004c37 	jal	800130dc <unlock_mm>
800126c4:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:685

	sigset_add(set, SIGKILL);
	sigset_add(set, SIGSTOP);
	sigset_t old_blocked = get_si(current)->blocked;
800126c8:	8e0477a4 	lw	a0,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:684
		return -1;
	}
	unlock_mm(mm);

	sigset_add(set, SIGKILL);
	sigset_add(set, SIGSTOP);
800126cc:	8fa70020 	lw	a3,32(sp)
800126d0:	8fa50024 	lw	a1,36(sp)
800126d4:	3c060004 	lui	a2,0x4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:685
	sigset_t old_blocked = get_si(current)->blocked;
800126d8:	8c8200c8 	lw	v0,200(a0)
800126dc:	8c8300cc 	lw	v1,204(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:684
		return -1;
	}
	unlock_mm(mm);

	sigset_add(set, SIGKILL);
	sigset_add(set, SIGSTOP);
800126e0:	24c60100 	addiu	a2,a2,256
800126e4:	00e63025 	or	a2,a3,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:686
	sigset_t old_blocked = get_si(current)->blocked;
	get_si(current)->blocked = ~set;
800126e8:	00064027 	nor	t0,zero,a2
800126ec:	00053827 	nor	a3,zero,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:694
		current->pid);
#endif

	while (1) {
		current->state = PROC_SLEEPING;
		current->wait_state = WT_SIGNAL;
800126f0:	3c118000 	lui	s1,0x8000
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:684
		return -1;
	}
	unlock_mm(mm);

	sigset_add(set, SIGKILL);
	sigset_add(set, SIGSTOP);
800126f4:	afa60020 	sw	a2,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:685
	sigset_t old_blocked = get_si(current)->blocked;
800126f8:	afa20018 	sw	v0,24(sp)
800126fc:	afa3001c 	sw	v1,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:686
	get_si(current)->blocked = ~set;
80012700:	ac8800c8 	sw	t0,200(a0)
80012704:	ac8700cc 	sw	a3,204(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:693
	kprintf("do_sigwaitinfo(): set = %016llx, pid = %d\n", set,
		current->pid);
#endif

	while (1) {
		current->state = PROC_SLEEPING;
80012708:	24120001 	li	s2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:694
		current->wait_state = WT_SIGNAL;
8001270c:	02009821 	move	s3,s0
80012710:	26310400 	addiu	s1,s1,1024
80012714:	8e0277a4 	lw	v0,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:693
	kprintf("do_sigwaitinfo(): set = %016llx, pid = %d\n", set,
		current->pid);
#endif

	while (1) {
		current->state = PROC_SLEEPING;
80012718:	ac920000 	sw	s2,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:695
		current->wait_state = WT_SIGNAL;
		schedule();
8001271c:	0c00059f 	jal	8000167c <schedule>
80012720:	ac510084 	sw	s1,132(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:696
		int sign = do_signal(current->tf, &old_blocked);
80012724:	8e0277a4 	lw	v0,30628(s0)
80012728:	27a50018 	addiu	a1,sp,24
8001272c:	0c0046b9 	jal	80011ae4 <do_signal>
80012730:	8c440054 	lw	a0,84(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:697
		if (sign != 0) {
80012734:	5040fff7 	beqzl	v0,80012714 <do_sigwaitinfo+0xb0>
80012738:	8e6477a4 	lw	a0,30628(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:706
			     set, sign, current->pid);
#endif
			return sign;
		}
	}
}
8001273c:	8fbf0044 	lw	ra,68(sp)
80012740:	8fb30040 	lw	s3,64(sp)
80012744:	8fb2003c 	lw	s2,60(sp)
80012748:	8fb10038 	lw	s1,56(sp)
8001274c:	8fb00034 	lw	s0,52(sp)
80012750:	03e00008 	jr	ra
80012754:	27bd0048 	addiu	sp,sp,72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:677
	struct mm_struct *mm = current->mm;
	assert(mm != NULL);
	lock_mm(mm);
	if (setp == NULL
	    || !copy_from_user(mm, &set, setp, sizeof(sigset_t), 0)) {
		assert(0);
80012758:	3c048002 	lui	a0,0x8002
8001275c:	3c068002 	lui	a2,0x8002
80012760:	3c078002 	lui	a3,0x8002
80012764:	24842fb4 	addiu	a0,a0,12212
80012768:	240502a5 	li	a1,677
8001276c:	24c60e28 	addiu	a2,a2,3624
80012770:	0c006b0b 	jal	8001ac2c <__panic>
80012774:	24e7242c 	addiu	a3,a3,9260
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/process/signal.c:673

int do_sigwaitinfo(const sigset_t * setp, struct siginfo_t *info)
{
	sigset_t set;
	struct mm_struct *mm = current->mm;
	assert(mm != NULL);
80012778:	3c048002 	lui	a0,0x8002
8001277c:	3c068002 	lui	a2,0x8002
80012780:	3c078002 	lui	a3,0x8002
80012784:	24842fb4 	addiu	a0,a0,12212
80012788:	240502a1 	li	a1,673
8001278c:	24c60e28 	addiu	a2,a2,3624
80012790:	0c006b0b 	jal	8001ac2c <__panic>
80012794:	24e73058 	addiu	a3,a3,12376

80012798 <shmem_create>:
shmem_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:12
#include <swap.h>
#include <error.h>
#include <sem.h>

struct shmem_struct *shmem_create(size_t len)
{
80012798:	27bdffe0 	addiu	sp,sp,-32
8001279c:	afb00018 	sw	s0,24(sp)
800127a0:	00808021 	move	s0,a0
800127a4:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:13
	struct shmem_struct *shmem = kmalloc(sizeof(struct shmem_struct));
800127a8:	0c005486 	jal	80015218 <kmalloc>
800127ac:	24040028 	li	a0,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:14
	if (shmem != NULL) {
800127b0:	1040000c 	beqz	v0,800127e4 <shmem_create+0x4c>
800127b4:	8fbf001c 	lw	ra,28(sp)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
 * list_init - initialize a new entry
 * @elm:        new entry to be initialized
 * */
static inline void list_init(list_entry_t * elm)
{
	elm->prev = elm->next = elm;
800127b8:	ac420004 	sw	v0,4(v0)
800127bc:	ac420000 	sw	v0,0(v0)
shmem_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:16
		list_init(&(shmem->shmn_list));
		shmem->shmn_cache = NULL;
800127c0:	ac400008 	sw	zero,8(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:17
		shmem->len = len;
800127c4:	ac50000c 	sw	s0,12(v0)
atomic_set():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:34
 *
 * Atomically sets the value of @v to @i.
 * */
static __always_inline void atomic_set(atomic_t * v, int i)
{
	v->counter = i;
800127c8:	ac400010 	sw	zero,16(v0)
shmem_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:19
		set_shmem_ref(shmem, 0);
		sem_init(&(shmem->shmem_sem), 1);
800127cc:	24440014 	addiu	a0,v0,20
800127d0:	24050001 	li	a1,1
800127d4:	0c006717 	jal	80019c5c <sem_init>
800127d8:	afa20010 	sw	v0,16(sp)
800127dc:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:22
	}
	return shmem;
}
800127e0:	8fbf001c 	lw	ra,28(sp)
800127e4:	8fb00018 	lw	s0,24(sp)
800127e8:	03e00008 	jr	ra
800127ec:	27bd0020 	addiu	sp,sp,32

800127f0 <shmem_destroy>:
shmem_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:140

	list_add_after(le_prev, &(shmn->list_link));
}

void shmem_destroy(struct shmem_struct *shmem)
{
800127f0:	27bdffc8 	addiu	sp,sp,-56
800127f4:	afb20018 	sw	s2,24(sp)
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
800127f8:	8c920004 	lw	s2,4(a0)
shmem_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:140
800127fc:	afb7002c 	sw	s7,44(sp)
80012800:	afbf0034 	sw	ra,52(sp)
80012804:	afbe0030 	sw	s8,48(sp)
80012808:	afb60028 	sw	s6,40(sp)
8001280c:	afb50024 	sw	s5,36(sp)
80012810:	afb40020 	sw	s4,32(sp)
80012814:	afb3001c 	sw	s3,28(sp)
80012818:	afb10014 	sw	s1,20(sp)
8001281c:	afb00010 	sw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:142
	list_entry_t *list = &(shmem->shmn_list), *le;
	while ((le = list_next(list)) != list) {
80012820:	10920057 	beq	a0,s2,80012980 <shmem_destroy+0x190>
80012824:	0080b821 	move	s7,a0
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
80012828:	3c157fff 	lui	s5,0x7fff
pte2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:119
static inline struct Page *pte2page(pte_t pte)
{
	if (!(pte & PTE_P)) {
		panic("pte2page called with invalid pte");
	}
	return pa2page(PTE_ADDR(pte));
8001282c:	2416f000 	li	s6,-4096
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
80012830:	36b5f000 	ori	s5,s5,0xf000
80012834:	3c148015 	lui	s4,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
		panic("pa2page called with invalid pa");
	}
	return &pages[PPN(pa)];
80012838:	3c138015 	lui	s3,0x8015
shmn_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:81

static void shmn_destroy(shmn_t * shmn)
{
	int i;
	for (i = 0; i < SHMN_NENTRY; i++) {
		shmem_remove_entry_pte(shmn->entry + i);
8001283c:	8e47fffc 	lw	a3,-4(s2)
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
80012840:	8e430000 	lw	v1,0(s2)
80012844:	8e420004 	lw	v0,4(s2)
shmn_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:81
80012848:	00e08821 	move	s1,a3
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
8001284c:	ac620004 	sw	v0,4(v1)
shmem_remove_entry_pte():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:47

static inline void shmem_remove_entry_pte(pte_t * ptep)
{
	//TODO
	//assert(0);
	assert(ptep != NULL);
80012850:	10e0001f 	beqz	a3,800128d0 <shmem_destroy+0xe0>
80012854:	ac430000 	sw	v1,0(v0)
80012858:	24100004 	li	s0,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:201
}

int shmem_remove_entry(struct shmem_struct *shmem, uintptr_t addr)
{
	return shmem_insert_entry(shmem, addr, 0);
}
8001285c:	8e3e0000 	lw	s8,0(s1)
ptep_present():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:26
	return (*ptep == 0);
}

static inline int ptep_present(pte_t * ptep)
{
	return (*ptep & PTE_P);
80012860:	33c20001 	andi	v0,s8,0x1
shmem_remove_entry_pte():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:48
static inline void shmem_remove_entry_pte(pte_t * ptep)
{
	//TODO
	//assert(0);
	assert(ptep != NULL);
	if (ptep_present(ptep)) {
80012864:	10400026 	beqz	v0,80012900 <shmem_destroy+0x110>
80012868:	03d61024 	and	v0,s8,s6
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
8001286c:	8e837770 	lw	v1,30576(s4)
80012870:	00551021 	addu	v0,v0,s5
80012874:	00021302 	srl	v0,v0,0xc
80012878:	0043182b 	sltu	v1,v0,v1
8001287c:	1060004d 	beqz	v1,800129b4 <shmem_destroy+0x1c4>
80012880:	8e7e77bc 	lw	s8,30652(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
		panic("pa2page called with invalid pa");
	}
	return &pages[PPN(pa)];
80012884:	00021140 	sll	v0,v0,0x5
80012888:	03c2f021 	addu	s8,s8,v0
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8001288c:	40026000 	mfc0	v0,c0_status
80012890:	30420001 	andi	v0,v0,0x1
80012894:	1440001e 	bnez	v0,80012910 <shmem_destroy+0x120>
80012898:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8001289c:	8fc20000 	lw	v0,0(s8)
800128a0:	2442ffff 	addiu	v0,v0,-1
800128a4:	afc20000 	sw	v0,0(s8)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
800128a8:	8fc20000 	lw	v0,0(s8)
shmem_remove_entry_pte():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:62
				SetPageDirty(page);
			}
			page_ref_dec(page);
		}
#else
		if (page_ref_dec(page) == 0) {
800128ac:	10400010 	beqz	v0,800128f0 <shmem_destroy+0x100>
800128b0:	03c02021 	move	a0,s8
800128b4:	8e47fffc 	lw	a3,-4(s2)
ptep_unmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:16
	*ptep = (pa | PTE_P);
}

static inline void ptep_unmap(pte_t * ptep)
{
	*ptep = 0;
800128b8:	ae200000 	sw	zero,0(s1)
shmn_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:80
}

static void shmn_destroy(shmn_t * shmn)
{
	int i;
	for (i = 0; i < SHMN_NENTRY; i++) {
800128bc:	24021000 	li	v0,4096
800128c0:	1202001c 	beq	s0,v0,80012934 <shmem_destroy+0x144>
800128c4:	00f08821 	addu	s1,a3,s0
shmem_remove_entry_pte():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:47

static inline void shmem_remove_entry_pte(pte_t * ptep)
{
	//TODO
	//assert(0);
	assert(ptep != NULL);
800128c8:	1620ffe4 	bnez	s1,8001285c <shmem_destroy+0x6c>
800128cc:	26100004 	addiu	s0,s0,4
800128d0:	3c048002 	lui	a0,0x8002
800128d4:	3c068002 	lui	a2,0x8002
800128d8:	3c078002 	lui	a3,0x8002
800128dc:	24843064 	addiu	a0,a0,12388
800128e0:	2405002f 	li	a1,47
800128e4:	24c60e28 	addiu	a2,a2,3624
800128e8:	0c006b0b 	jal	8001ac2c <__panic>
800128ec:	24e73084 	addiu	a3,a3,12420
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:63
			}
			page_ref_dec(page);
		}
#else
		if (page_ref_dec(page) == 0) {
			free_page(page);
800128f0:	0c007441 	jal	8001d104 <free_pages>
800128f4:	24050001 	li	a1,1
800128f8:	08004a2e 	j	800128b8 <shmem_destroy+0xc8>
800128fc:	8e47fffc 	lw	a3,-4(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:67
		}
#endif /* UCONFIG_SWAP */
		ptep_unmap(ptep);
	} else if (!ptep_invalid(ptep)) {
80012900:	13c0ffef 	beqz	s8,800128c0 <shmem_destroy+0xd0>
80012904:	24021000 	li	v0,4096
80012908:	0c007f5c 	jal	8001fd70 <shmem_remove_entry_pte.part.6>
8001290c:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80012910:	0c006d04 	jal	8001b410 <intr_disable>
80012914:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
80012918:	8fc20000 	lw	v0,0(s8)
8001291c:	2442ffff 	addiu	v0,v0,-1
80012920:	afc20000 	sw	v0,0(s8)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80012924:	0c006d00 	jal	8001b400 <intr_enable>
80012928:	00000000 	nop
8001292c:	08004a2a 	j	800128a8 <shmem_destroy+0xb8>
80012930:	00000000 	nop
kva2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:111
	return KADDR(page2pa(page));
}

static inline struct Page *kva2page(void *kva)
{
	return pa2page(PADDR(kva));
80012934:	3c028000 	lui	v0,0x8000
80012938:	24421000 	addiu	v0,v0,4096
8001293c:	00e2102b 	sltu	v0,a3,v0
80012940:	14400022 	bnez	v0,800129cc <shmem_destroy+0x1dc>
80012944:	8e837770 	lw	v1,30576(s4)
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
80012948:	00f51021 	addu	v0,a3,s5
8001294c:	00021302 	srl	v0,v0,0xc
80012950:	0043182b 	sltu	v1,v0,v1
80012954:	10600017 	beqz	v1,800129b4 <shmem_destroy+0x1c4>
80012958:	8e6477bc 	lw	a0,30652(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
		panic("pa2page called with invalid pa");
	}
	return &pages[PPN(pa)];
8001295c:	00021140 	sll	v0,v0,0x5
shmn_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:83
{
	int i;
	for (i = 0; i < SHMN_NENTRY; i++) {
		shmem_remove_entry_pte(shmn->entry + i);
	}
	free_page(kva2page(shmn->entry));
80012960:	24050001 	li	a1,1
80012964:	0c007441 	jal	8001d104 <free_pages>
80012968:	00822021 	addu	a0,a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:84
	kfree(shmn);
8001296c:	0c0054b1 	jal	800152c4 <kfree>
80012970:	2644fff4 	addiu	a0,s2,-12
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
80012974:	8ef20004 	lw	s2,4(s7)
shmem_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:142
}

void shmem_destroy(struct shmem_struct *shmem)
{
	list_entry_t *list = &(shmem->shmn_list), *le;
	while ((le = list_next(list)) != list) {
80012978:	56f2ffb1 	bnel	s7,s2,80012840 <shmem_destroy+0x50>
8001297c:	8e47fffc 	lw	a3,-4(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:146
		list_del(le);
		shmn_destroy(le2shmn(le, list_link));
	}
	kfree(shmem);
80012980:	02e02021 	move	a0,s7
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:147
}
80012984:	8fbf0034 	lw	ra,52(sp)
80012988:	8fbe0030 	lw	s8,48(sp)
8001298c:	8fb7002c 	lw	s7,44(sp)
80012990:	8fb60028 	lw	s6,40(sp)
80012994:	8fb50024 	lw	s5,36(sp)
80012998:	8fb40020 	lw	s4,32(sp)
8001299c:	8fb3001c 	lw	s3,28(sp)
800129a0:	8fb20018 	lw	s2,24(sp)
800129a4:	8fb10014 	lw	s1,20(sp)
800129a8:	8fb00010 	lw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:146
	list_entry_t *list = &(shmem->shmn_list), *le;
	while ((le = list_next(list)) != list) {
		list_del(le);
		shmn_destroy(le2shmn(le, list_link));
	}
	kfree(shmem);
800129ac:	080054b1 	j	800152c4 <kfree>
800129b0:	27bd0038 	addiu	sp,sp,56
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:99
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
		panic("pa2page called with invalid pa");
800129b4:	3c048002 	lui	a0,0x8002
800129b8:	3c068002 	lui	a2,0x8002
800129bc:	248429ec 	addiu	a0,a0,10732
800129c0:	24050063 	li	a1,99
800129c4:	0c006b0b 	jal	8001ac2c <__panic>
800129c8:	24c62a54 	addiu	a2,a2,10836
kva2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:111
	return KADDR(page2pa(page));
}

static inline struct Page *kva2page(void *kva)
{
	return pa2page(PADDR(kva));
800129cc:	3c048002 	lui	a0,0x8002
800129d0:	3c068002 	lui	a2,0x8002
800129d4:	248429ec 	addiu	a0,a0,10732
800129d8:	2405006f 	li	a1,111
800129dc:	0c006b0b 	jal	8001ac2c <__panic>
800129e0:	24c62a30 	addiu	a2,a2,10800

800129e4 <shmem_get_entry>:
shmem_get_entry():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:151
}

pte_t *shmem_get_entry(struct shmem_struct *shmem, uintptr_t addr, bool create)
{
	assert(addr < shmem->len);
800129e4:	8c82000c 	lw	v0,12(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:150
	}
	kfree(shmem);
}

pte_t *shmem_get_entry(struct shmem_struct *shmem, uintptr_t addr, bool create)
{
800129e8:	27bdffd8 	addiu	sp,sp,-40
800129ec:	afb30020 	sw	s3,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:151
	assert(addr < shmem->len);
800129f0:	00a2102b 	sltu	v0,a1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:150
	}
	kfree(shmem);
}

pte_t *shmem_get_entry(struct shmem_struct *shmem, uintptr_t addr, bool create)
{
800129f4:	afb2001c 	sw	s2,28(sp)
800129f8:	afbf0024 	sw	ra,36(sp)
800129fc:	afb10018 	sw	s1,24(sp)
80012a00:	afb00014 	sw	s0,20(sp)
80012a04:	00809021 	move	s2,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:151
	assert(addr < shmem->len);
80012a08:	104000ac 	beqz	v0,80012cbc <shmem_get_entry+0x2d8>
80012a0c:	00c09821 	move	s3,a2
find_shmn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:89
	kfree(shmn);
}

static shmn_t *find_shmn(struct shmem_struct *shmem, uintptr_t addr)
{
	shmn_t *shmn = shmem->shmn_cache;
80012a10:	8c910008 	lw	s1,8(a0)
shmem_get_entry():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:152
}

pte_t *shmem_get_entry(struct shmem_struct *shmem, uintptr_t addr, bool create)
{
	assert(addr < shmem->len);
	addr = ROUNDDOWN(addr, PGSIZE);
80012a14:	2410f000 	li	s0,-4096
find_shmn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:90
}

static shmn_t *find_shmn(struct shmem_struct *shmem, uintptr_t addr)
{
	shmn_t *shmn = shmem->shmn_cache;
	if (!(shmn != NULL && shmn->start <= addr && addr < shmn->end)) {
80012a18:	1220001e 	beqz	s1,80012a94 <shmem_get_entry+0xb0>
80012a1c:	00b08024 	and	s0,a1,s0
80012a20:	8e230000 	lw	v1,0(s1)
80012a24:	0203102b 	sltu	v0,s0,v1
80012a28:	1440001b 	bnez	v0,80012a98 <shmem_get_entry+0xb4>
80012a2c:	02401021 	move	v0,s2
80012a30:	8e220004 	lw	v0,4(s1)
80012a34:	0202102b 	sltu	v0,s0,v0
80012a38:	10400017 	beqz	v0,80012a98 <shmem_get_entry+0xb4>
80012a3c:	02401021 	move	v0,s2
shmem_get_entry():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:155
{
	assert(addr < shmem->len);
	addr = ROUNDDOWN(addr, PGSIZE);
	shmn_t *shmn = find_shmn(shmem, addr);

	assert(shmn == NULL || (shmn->start <= addr && addr < shmn->end));
80012a40:	8e220004 	lw	v0,4(s1)
80012a44:	0202102b 	sltu	v0,s0,v0
80012a48:	10400094 	beqz	v0,80012c9c <shmem_get_entry+0x2b8>
80012a4c:	ae510008 	sw	s1,8(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:163
		if (!create || (shmn = shmn_create(start)) == NULL) {
			return NULL;
		}
		insert_shmn(shmem, shmn);
	}
	int index = (addr - shmn->start) / PGSIZE;
80012a50:	02038023 	subu	s0,s0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:164
	if (shmn->entry[index] == 0) {
80012a54:	8e220008 	lw	v0,8(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:163
		if (!create || (shmn = shmn_create(start)) == NULL) {
			return NULL;
		}
		insert_shmn(shmem, shmn);
	}
	int index = (addr - shmn->start) / PGSIZE;
80012a58:	00108302 	srl	s0,s0,0xc
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:164
	if (shmn->entry[index] == 0) {
80012a5c:	00108080 	sll	s0,s0,0x2
80012a60:	00501021 	addu	v0,v0,s0
80012a64:	8c430000 	lw	v1,0(v0)
80012a68:	14600004 	bnez	v1,80012a7c <shmem_get_entry+0x98>
80012a6c:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:165
		if (create) {
80012a70:	16600062 	bnez	s3,80012bfc <shmem_get_entry+0x218>
80012a74:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:174
				page_ref_inc(page);
			}
		}
	}
	return shmn->entry + index;
}
80012a78:	8fbf0024 	lw	ra,36(sp)
80012a7c:	8fb30020 	lw	s3,32(sp)
80012a80:	8fb2001c 	lw	s2,28(sp)
80012a84:	8fb10018 	lw	s1,24(sp)
80012a88:	8fb00014 	lw	s0,20(sp)
80012a8c:	03e00008 	jr	ra
80012a90:	27bd0028 	addiu	sp,sp,40
find_shmn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:92
static shmn_t *find_shmn(struct shmem_struct *shmem, uintptr_t addr)
{
	shmn_t *shmn = shmem->shmn_cache;
	if (!(shmn != NULL && shmn->start <= addr && addr < shmn->end)) {
		shmn = NULL;
		list_entry_t *list = &(shmem->shmn_list), *le = list;
80012a94:	02401021 	move	v0,s2
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
80012a98:	8c420004 	lw	v0,4(v0)
find_shmn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:93
		while ((le = list_next(le)) != list) {
80012a9c:	1242000b 	beq	s2,v0,80012acc <shmem_get_entry+0xe8>
80012aa0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:95
			shmn_t *tmp = le2shmn(le, list_link);
			if (tmp->start <= addr && addr < tmp->end) {
80012aa4:	8c43fff4 	lw	v1,-12(v0)
80012aa8:	0203202b 	sltu	a0,s0,v1
80012aac:	1480fffa 	bnez	a0,80012a98 <shmem_get_entry+0xb4>
80012ab0:	2451fff4 	addiu	s1,v0,-12
80012ab4:	8c44fff8 	lw	a0,-8(v0)
80012ab8:	0204202b 	sltu	a0,s0,a0
80012abc:	5080fff7 	beqzl	a0,80012a9c <shmem_get_entry+0xb8>
80012ac0:	8c420004 	lw	v0,4(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:101
				shmn = tmp;
				break;
			}
		}
	}
	if (shmn != NULL) {
80012ac4:	5620ffdf 	bnezl	s1,80012a44 <shmem_get_entry+0x60>
80012ac8:	8e220004 	lw	v0,4(s1)
shmem_get_entry():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:158
	shmn_t *shmn = find_shmn(shmem, addr);

	assert(shmn == NULL || (shmn->start <= addr && addr < shmn->end));
	if (shmn == NULL) {
		uintptr_t start = ROUNDDOWN(addr, PGSIZE * SHMN_NENTRY);
		if (!create || (shmn = shmn_create(start)) == NULL) {
80012acc:	1260ffea 	beqz	s3,80012a78 <shmem_get_entry+0x94>
80012ad0:	00001021 	move	v0,zero
shmn_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:27
}

static shmn_t *shmn_create(uintptr_t start)
{
	assert(start % PGSIZE * SHMN_NENTRY == 0);
	shmn_t *shmn = kmalloc(sizeof(shmn_t));
80012ad4:	0c005486 	jal	80015218 <kmalloc>
80012ad8:	24040014 	li	a0,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:28
	if (shmn != NULL) {
80012adc:	1040007f 	beqz	v0,80012cdc <shmem_get_entry+0x2f8>
80012ae0:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:30
		struct Page *page;
		if ((page = alloc_page()) != NULL) {
80012ae4:	0c007425 	jal	8001d094 <alloc_pages>
80012ae8:	24040001 	li	a0,1
80012aec:	1040007d 	beqz	v0,80012ce4 <shmem_get_entry+0x300>
80012af0:	3c038015 	lui	v1,0x8015
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
80012af4:	8c6477bc 	lw	a0,30652(v1)
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
80012af8:	3c038015 	lui	v1,0x8015
80012afc:	8c637770 	lw	v1,30576(v1)
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
80012b00:	00441023 	subu	v0,v0,a0
80012b04:	00021143 	sra	v0,v0,0x5
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
80012b08:	00021300 	sll	v0,v0,0xc
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
80012b0c:	00022302 	srl	a0,v0,0xc
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
	return page - pages;
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
80012b10:	3c078000 	lui	a3,0x8000
80012b14:	24e71000 	addiu	a3,a3,4096
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
80012b18:	0083182b 	sltu	v1,a0,v1
80012b1c:	10600086 	beqz	v1,80012d38 <shmem_get_entry+0x354>
80012b20:	00473821 	addu	a3,v0,a3
shmem_get_entry():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:157
	addr = ROUNDDOWN(addr, PGSIZE);
	shmn_t *shmn = find_shmn(shmem, addr);

	assert(shmn == NULL || (shmn->start <= addr && addr < shmn->end));
	if (shmn == NULL) {
		uintptr_t start = ROUNDDOWN(addr, PGSIZE * SHMN_NENTRY);
80012b24:	3c02ffc0 	lui	v0,0xffc0
80012b28:	02021024 	and	v0,s0,v0
shmn_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:33
	if (shmn != NULL) {
		struct Page *page;
		if ((page = alloc_page()) != NULL) {
			shmn->entry = (pte_t *) page2kva(page);
			shmn->start = start;
			shmn->end = start + PGSIZE * SHMN_NENTRY;
80012b2c:	3c030040 	lui	v1,0x40
80012b30:	00431821 	addu	v1,v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:34
			memset(shmn->entry, 0, PGSIZE);
80012b34:	00e02021 	move	a0,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:31
	assert(start % PGSIZE * SHMN_NENTRY == 0);
	shmn_t *shmn = kmalloc(sizeof(shmn_t));
	if (shmn != NULL) {
		struct Page *page;
		if ((page = alloc_page()) != NULL) {
			shmn->entry = (pte_t *) page2kva(page);
80012b38:	ae270008 	sw	a3,8(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:32
			shmn->start = start;
80012b3c:	ae220000 	sw	v0,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:33
			shmn->end = start + PGSIZE * SHMN_NENTRY;
80012b40:	ae230004 	sw	v1,4(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:34
			memset(shmn->entry, 0, PGSIZE);
80012b44:	00002821 	move	a1,zero
80012b48:	0c005c52 	jal	80017148 <memset>
80012b4c:	24061000 	li	a2,4096
80012b50:	02402021 	move	a0,s2
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
80012b54:	8c820004 	lw	v0,4(a0)
insert_shmn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:118

static void insert_shmn(struct shmem_struct *shmem, shmn_t * shmn)
{
	list_entry_t *list = &(shmem->shmn_list), *le = list;
	list_entry_t *le_prev = list, *le_next;
	while ((le = list_next(le)) != list) {
80012b58:	52420006 	beql	s2,v0,80012b74 <shmem_get_entry+0x190>
80012b5c:	02401021 	move	v0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:120
		shmn_t *shmn_prev = le2shmn(le, list_link);
		if (shmn_prev->start > shmn->start) {
80012b60:	8c45fff4 	lw	a1,-12(v0)
80012b64:	8e230000 	lw	v1,0(s1)
80012b68:	0065182b 	sltu	v1,v1,a1
80012b6c:	5060fff9 	beqzl	v1,80012b54 <shmem_get_entry+0x170>
80012b70:	00402021 	move	a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:129
	}

	le_next = list_next(le_prev);

	/* check overlap */
	if (le_prev != list) {
80012b74:	5244000e 	beql	s2,a0,80012bb0 <shmem_get_entry+0x1cc>
80012b78:	8e230000 	lw	v1,0(s1)
check_shmn_overlap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:109
	return shmn;
}

static inline void check_shmn_overlap(shmn_t * prev, shmn_t * next)
{
	assert(prev->start < prev->end);
80012b7c:	8c85fff8 	lw	a1,-8(a0)
80012b80:	8c83fff4 	lw	v1,-12(a0)
80012b84:	0065182b 	sltu	v1,v1,a1
80012b88:	10600069 	beqz	v1,80012d30 <shmem_get_entry+0x34c>
80012b8c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:110
	assert(prev->end <= next->start);
80012b90:	8e230000 	lw	v1,0(s1)
80012b94:	0065282b 	sltu	a1,v1,a1
80012b98:	54a0005e 	bnezl	a1,80012d14 <shmem_get_entry+0x330>
80012b9c:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:111
	assert(next->start < next->end);
80012ba0:	8e250004 	lw	a1,4(s1)
80012ba4:	0065282b 	sltu	a1,v1,a1
80012ba8:	50a00053 	beqzl	a1,80012cf8 <shmem_get_entry+0x314>
80012bac:	3c048002 	lui	a0,0x8002
insert_shmn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:132

	/* check overlap */
	if (le_prev != list) {
		check_shmn_overlap(le2shmn(le_prev, list_link), shmn);
	}
	if (le_next != list) {
80012bb0:	1242000d 	beq	s2,v0,80012be8 <shmem_get_entry+0x204>
80012bb4:	2625000c 	addiu	a1,s1,12
check_shmn_overlap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:109
	return shmn;
}

static inline void check_shmn_overlap(shmn_t * prev, shmn_t * next)
{
	assert(prev->start < prev->end);
80012bb8:	8e260004 	lw	a2,4(s1)
80012bbc:	0066282b 	sltu	a1,v1,a2
80012bc0:	10a0005b 	beqz	a1,80012d30 <shmem_get_entry+0x34c>
80012bc4:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:110
	assert(prev->end <= next->start);
80012bc8:	8c45fff4 	lw	a1,-12(v0)
80012bcc:	00a6302b 	sltu	a2,a1,a2
80012bd0:	54c00050 	bnezl	a2,80012d14 <shmem_get_entry+0x330>
80012bd4:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:111
	assert(next->start < next->end);
80012bd8:	8c46fff8 	lw	a2,-8(v0)
80012bdc:	00a6282b 	sltu	a1,a1,a2
80012be0:	10a00044 	beqz	a1,80012cf4 <shmem_get_entry+0x310>
80012be4:	2625000c 	addiu	a1,s1,12
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
80012be8:	ac450000 	sw	a1,0(v0)
80012bec:	ac850004 	sw	a1,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->next = next;
	elm->prev = prev;
80012bf0:	ae24000c 	sw	a0,12(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
	elm->next = next;
80012bf4:	08004a94 	j	80012a50 <shmem_get_entry+0x6c>
80012bf8:	ae220010 	sw	v0,16(s1)
shmem_get_entry():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:166
		insert_shmn(shmem, shmn);
	}
	int index = (addr - shmn->start) / PGSIZE;
	if (shmn->entry[index] == 0) {
		if (create) {
			struct Page *page = alloc_page();
80012bfc:	0c007425 	jal	8001d094 <alloc_pages>
80012c00:	24040001 	li	a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:167
			if (page != NULL) {
80012c04:	10400017 	beqz	v0,80012c64 <shmem_get_entry+0x280>
80012c08:	00409021 	move	s2,v0
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
80012c0c:	3c028015 	lui	v0,0x8015
80012c10:	8c4477bc 	lw	a0,30652(v0)
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
80012c14:	3c038000 	lui	v1,0x8000
shmem_get_entry():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:168
				ptep_map(&(shmn->entry[index]), page2pa(page));
80012c18:	8e220008 	lw	v0,8(s1)
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
80012c1c:	02442023 	subu	a0,s2,a0
80012c20:	00042143 	sra	a0,a0,0x5
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
80012c24:	00042300 	sll	a0,a0,0xc
80012c28:	24631000 	addiu	v1,v1,4096
80012c2c:	00831821 	addu	v1,a0,v1
shmem_get_entry():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:168
80012c30:	00501021 	addu	v0,v0,s0
ptep_map():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:11

typedef pte_t pte_perm_t;

static inline void ptep_map(pte_t * ptep, uintptr_t pa)
{
	*ptep = (pa | PTE_P);
80012c34:	34630001 	ori	v1,v1,0x1
80012c38:	ac430000 	sw	v1,0(v0)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80012c3c:	40036000 	mfc0	v1,c0_status
80012c40:	30630001 	andi	v1,v1,0x1
80012c44:	1460000a 	bnez	v1,80012c70 <shmem_get_entry+0x28c>
80012c48:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
80012c4c:	8e430000 	lw	v1,0(s2)
80012c50:	24630001 	addiu	v1,v1,1
80012c54:	ae430000 	sw	v1,0(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
80012c58:	8e430000 	lw	v1,0(s2)
shmem_get_entry():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:173
				page_ref_inc(page);
			}
		}
	}
	return shmn->entry + index;
80012c5c:	08004a9f 	j	80012a7c <shmem_get_entry+0x98>
80012c60:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:167
	}
	int index = (addr - shmn->start) / PGSIZE;
	if (shmn->entry[index] == 0) {
		if (create) {
			struct Page *page = alloc_page();
			if (page != NULL) {
80012c64:	8e220008 	lw	v0,8(s1)
80012c68:	08004a9e 	j	80012a78 <shmem_get_entry+0x94>
80012c6c:	00501021 	addu	v0,v0,s0
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80012c70:	0c006d04 	jal	8001b410 <intr_disable>
80012c74:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
80012c78:	8e420000 	lw	v0,0(s2)
80012c7c:	24420001 	addiu	v0,v0,1
80012c80:	ae420000 	sw	v0,0(s2)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80012c84:	0c006d00 	jal	8001b400 <intr_enable>
80012c88:	00000000 	nop
80012c8c:	8e220008 	lw	v0,8(s1)
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
80012c90:	8e430000 	lw	v1,0(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
80012c94:	08004a9e 	j	80012a78 <shmem_get_entry+0x94>
80012c98:	00501021 	addu	v0,v0,s0
shmem_get_entry():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:155
{
	assert(addr < shmem->len);
	addr = ROUNDDOWN(addr, PGSIZE);
	shmn_t *shmn = find_shmn(shmem, addr);

	assert(shmn == NULL || (shmn->start <= addr && addr < shmn->end));
80012c9c:	3c048002 	lui	a0,0x8002
80012ca0:	3c068002 	lui	a2,0x8002
80012ca4:	3c078002 	lui	a3,0x8002
80012ca8:	24843064 	addiu	a0,a0,12388
80012cac:	2405009b 	li	a1,155
80012cb0:	24c60e28 	addiu	a2,a2,3624
80012cb4:	0c006b0b 	jal	8001ac2c <__panic>
80012cb8:	24e730cc 	addiu	a3,a3,12492
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:151
	kfree(shmem);
}

pte_t *shmem_get_entry(struct shmem_struct *shmem, uintptr_t addr, bool create)
{
	assert(addr < shmem->len);
80012cbc:	3c048002 	lui	a0,0x8002
80012cc0:	3c068002 	lui	a2,0x8002
80012cc4:	3c078002 	lui	a3,0x8002
80012cc8:	24843064 	addiu	a0,a0,12388
80012ccc:	24050097 	li	a1,151
80012cd0:	24c60e28 	addiu	a2,a2,3624
80012cd4:	0c006b0b 	jal	8001ac2c <__panic>
80012cd8:	24e730b8 	addiu	a3,a3,12472
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:159

	assert(shmn == NULL || (shmn->start <= addr && addr < shmn->end));
	if (shmn == NULL) {
		uintptr_t start = ROUNDDOWN(addr, PGSIZE * SHMN_NENTRY);
		if (!create || (shmn = shmn_create(start)) == NULL) {
			return NULL;
80012cdc:	08004a9e 	j	80012a78 <shmem_get_entry+0x94>
80012ce0:	00001021 	move	v0,zero
shmn_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:36
			shmn->entry = (pte_t *) page2kva(page);
			shmn->start = start;
			shmn->end = start + PGSIZE * SHMN_NENTRY;
			memset(shmn->entry, 0, PGSIZE);
		} else {
			kfree(shmn);
80012ce4:	0c0054b1 	jal	800152c4 <kfree>
80012ce8:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:159

	assert(shmn == NULL || (shmn->start <= addr && addr < shmn->end));
	if (shmn == NULL) {
		uintptr_t start = ROUNDDOWN(addr, PGSIZE * SHMN_NENTRY);
		if (!create || (shmn = shmn_create(start)) == NULL) {
			return NULL;
80012cec:	08004a9e 	j	80012a78 <shmem_get_entry+0x94>
80012cf0:	00001021 	move	v0,zero
check_shmn_overlap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:111

static inline void check_shmn_overlap(shmn_t * prev, shmn_t * next)
{
	assert(prev->start < prev->end);
	assert(prev->end <= next->start);
	assert(next->start < next->end);
80012cf4:	3c048002 	lui	a0,0x8002
80012cf8:	3c068002 	lui	a2,0x8002
80012cfc:	3c078002 	lui	a3,0x8002
80012d00:	24843064 	addiu	a0,a0,12388
80012d04:	2405006f 	li	a1,111
80012d08:	24c60e28 	addiu	a2,a2,3624
80012d0c:	0c006b0b 	jal	8001ac2c <__panic>
80012d10:	24e73124 	addiu	a3,a3,12580
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:110
}

static inline void check_shmn_overlap(shmn_t * prev, shmn_t * next)
{
	assert(prev->start < prev->end);
	assert(prev->end <= next->start);
80012d14:	3c068002 	lui	a2,0x8002
80012d18:	3c078002 	lui	a3,0x8002
80012d1c:	24843064 	addiu	a0,a0,12388
80012d20:	2405006e 	li	a1,110
80012d24:	24c60e28 	addiu	a2,a2,3624
80012d28:	0c006b0b 	jal	8001ac2c <__panic>
80012d2c:	24e73108 	addiu	a3,a3,12552
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:109
	return shmn;
}

static inline void check_shmn_overlap(shmn_t * prev, shmn_t * next)
{
	assert(prev->start < prev->end);
80012d30:	0c007f52 	jal	8001fd48 <check_shmn_overlap.part.5>
80012d34:	00000000 	nop
shmn_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
80012d38:	3c048002 	lui	a0,0x8002
80012d3c:	3c068002 	lui	a2,0x8002
80012d40:	248429ec 	addiu	a0,a0,10732
80012d44:	2405006a 	li	a1,106
80012d48:	0c006b0b 	jal	8001ac2c <__panic>
80012d4c:	24c62a74 	addiu	a2,a2,10868

80012d50 <shmem_insert_entry>:
shmem_insert_entry():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:177
	}
	return shmn->entry + index;
}

int shmem_insert_entry(struct shmem_struct *shmem, uintptr_t addr, pte_t entry)
{
80012d50:	27bdffd8 	addiu	sp,sp,-40
80012d54:	afb0001c 	sw	s0,28(sp)
80012d58:	00c08021 	move	s0,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:178
	pte_t *ptep = shmem_get_entry(shmem, addr, 1);
80012d5c:	24060001 	li	a2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:177
	}
	return shmn->entry + index;
}

int shmem_insert_entry(struct shmem_struct *shmem, uintptr_t addr, pte_t entry)
{
80012d60:	afbf0024 	sw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:178
	pte_t *ptep = shmem_get_entry(shmem, addr, 1);
80012d64:	0c004a79 	jal	800129e4 <shmem_get_entry>
80012d68:	afb10020 	sw	s1,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:179
	if (ptep == NULL) {
80012d6c:	5040001e 	beqzl	v0,80012de8 <shmem_insert_entry+0x98>
80012d70:	2402fff4 	li	v0,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:201
}

int shmem_remove_entry(struct shmem_struct *shmem, uintptr_t addr)
{
	return shmem_insert_entry(shmem, addr, 0);
}
80012d74:	8c430000 	lw	v1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:182
{
	pte_t *ptep = shmem_get_entry(shmem, addr, 1);
	if (ptep == NULL) {
		return -E_NO_MEM;
	}
	if (!ptep_invalid(ptep)) {
80012d78:	1460002a 	bnez	v1,80012e24 <shmem_insert_entry+0xd4>
80012d7c:	30640001 	andi	a0,v1,0x1
ptep_present():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:26
	return (*ptep == 0);
}

static inline int ptep_present(pte_t * ptep)
{
	return (*ptep & PTE_P);
80012d80:	32030001 	andi	v1,s0,0x1
shmem_insert_entry():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:185
		shmem_remove_entry_pte(ptep);
	}
	if (ptep_present(&entry)) {
80012d84:	1060001d 	beqz	v1,80012dfc <shmem_insert_entry+0xac>
80012d88:	3c038015 	lui	v1,0x8015
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
80012d8c:	8c647770 	lw	a0,30576(v1)
pte2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:119
static inline struct Page *pte2page(pte_t pte)
{
	if (!(pte & PTE_P)) {
		panic("pte2page called with invalid pte");
	}
	return pa2page(PTE_ADDR(pte));
80012d90:	2411f000 	li	s1,-4096
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
80012d94:	3c037fff 	lui	v1,0x7fff
pte2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:119
static inline struct Page *pte2page(pte_t pte)
{
	if (!(pte & PTE_P)) {
		panic("pte2page called with invalid pte");
	}
	return pa2page(PTE_ADDR(pte));
80012d98:	02118824 	and	s1,s0,s1
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
80012d9c:	3463f000 	ori	v1,v1,0xf000
80012da0:	02231821 	addu	v1,s1,v1
80012da4:	00031b02 	srl	v1,v1,0xc
80012da8:	0064202b 	sltu	a0,v1,a0
80012dac:	10800054 	beqz	a0,80012f00 <shmem_insert_entry+0x1b0>
80012db0:	3c048015 	lui	a0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
		panic("pa2page called with invalid pa");
	}
	return &pages[PPN(pa)];
80012db4:	8c9177bc 	lw	s1,30652(a0)
80012db8:	00031940 	sll	v1,v1,0x5
80012dbc:	02238821 	addu	s1,s1,v1
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80012dc0:	40036000 	mfc0	v1,c0_status
80012dc4:	30630001 	andi	v1,v1,0x1
80012dc8:	14600037 	bnez	v1,80012ea8 <shmem_insert_entry+0x158>
80012dcc:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
80012dd0:	8e230000 	lw	v1,0(s1)
80012dd4:	24630001 	addiu	v1,v1,1
80012dd8:	ae230000 	sw	v1,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
80012ddc:	8e230000 	lw	v1,0(s1)
ptep_copy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:99
	*ptep |= perm;
}

static inline void ptep_copy(pte_t * to, pte_t * from)
{
	*to = *from;
80012de0:	ac500000 	sw	s0,0(v0)
shmem_insert_entry():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:195
#else
		assert(0);
#endif
	}
	ptep_copy(ptep, &entry);
	return 0;
80012de4:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:196
}
80012de8:	8fbf0024 	lw	ra,36(sp)
80012dec:	8fb10020 	lw	s1,32(sp)
80012df0:	8fb0001c 	lw	s0,28(sp)
80012df4:	03e00008 	jr	ra
80012df8:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:187
	if (!ptep_invalid(ptep)) {
		shmem_remove_entry_pte(ptep);
	}
	if (ptep_present(&entry)) {
		page_ref_inc(pte2page(entry));
	} else if (!ptep_invalid(&entry)) {
80012dfc:	5200fff9 	beqzl	s0,80012de4 <shmem_insert_entry+0x94>
80012e00:	ac500000 	sw	s0,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:191
#ifdef UCONFIG_SWAP
		swap_duplicate(entry);
#else
		assert(0);
80012e04:	3c048002 	lui	a0,0x8002
80012e08:	3c068002 	lui	a2,0x8002
80012e0c:	3c078002 	lui	a3,0x8002
80012e10:	24843064 	addiu	a0,a0,12388
80012e14:	240500bf 	li	a1,191
80012e18:	24c60e28 	addiu	a2,a2,3624
80012e1c:	0c006b0b 	jal	8001ac2c <__panic>
80012e20:	24e7242c 	addiu	a3,a3,9260
shmem_remove_entry_pte():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:48
static inline void shmem_remove_entry_pte(pte_t * ptep)
{
	//TODO
	//assert(0);
	assert(ptep != NULL);
	if (ptep_present(ptep)) {
80012e24:	10800034 	beqz	a0,80012ef8 <shmem_insert_entry+0x1a8>
80012e28:	2404f000 	li	a0,-4096
pte2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:119
static inline struct Page *pte2page(pte_t pte)
{
	if (!(pte & PTE_P)) {
		panic("pte2page called with invalid pte");
	}
	return pa2page(PTE_ADDR(pte));
80012e2c:	00641824 	and	v1,v1,a0
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
80012e30:	3c057fff 	lui	a1,0x7fff
80012e34:	3c048015 	lui	a0,0x8015
80012e38:	8c847770 	lw	a0,30576(a0)
80012e3c:	34a5f000 	ori	a1,a1,0xf000
80012e40:	00651821 	addu	v1,v1,a1
80012e44:	00031b02 	srl	v1,v1,0xc
80012e48:	0064202b 	sltu	a0,v1,a0
80012e4c:	1080002c 	beqz	a0,80012f00 <shmem_insert_entry+0x1b0>
80012e50:	3c048015 	lui	a0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
		panic("pa2page called with invalid pa");
	}
	return &pages[PPN(pa)];
80012e54:	8c9177bc 	lw	s1,30652(a0)
80012e58:	00031940 	sll	v1,v1,0x5
80012e5c:	02238821 	addu	s1,s1,v1
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
80012e60:	40036000 	mfc0	v1,c0_status
80012e64:	30630001 	andi	v1,v1,0x1
80012e68:	1460001a 	bnez	v1,80012ed4 <shmem_insert_entry+0x184>
80012e6c:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
80012e70:	8e230000 	lw	v1,0(s1)
80012e74:	2463ffff 	addiu	v1,v1,-1
80012e78:	ae230000 	sw	v1,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
80012e7c:	8e230000 	lw	v1,0(s1)
shmem_remove_entry_pte():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:62
				SetPageDirty(page);
			}
			page_ref_dec(page);
		}
#else
		if (page_ref_dec(page) == 0) {
80012e80:	10600003 	beqz	v1,80012e90 <shmem_insert_entry+0x140>
80012e84:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:16
	*ptep = (pa | PTE_P);
}

static inline void ptep_unmap(pte_t * ptep)
{
	*ptep = 0;
80012e88:	08004b60 	j	80012d80 <shmem_insert_entry+0x30>
80012e8c:	ac400000 	sw	zero,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:63
			free_page(page);
80012e90:	24050001 	li	a1,1
80012e94:	0c007441 	jal	8001d104 <free_pages>
80012e98:	afa20010 	sw	v0,16(sp)
80012e9c:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:16
80012ea0:	08004b60 	j	80012d80 <shmem_insert_entry+0x30>
80012ea4:	ac400000 	sw	zero,0(v0)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80012ea8:	0c006d04 	jal	8001b410 <intr_disable>
80012eac:	afa20010 	sw	v0,16(sp)
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
80012eb0:	8e230000 	lw	v1,0(s1)
80012eb4:	24630001 	addiu	v1,v1,1
80012eb8:	ae230000 	sw	v1,0(s1)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80012ebc:	0c006d00 	jal	8001b400 <intr_enable>
80012ec0:	00000000 	nop
80012ec4:	8fa20010 	lw	v0,16(sp)
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
80012ec8:	8e230000 	lw	v1,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:99
	*ptep |= perm;
}

static inline void ptep_copy(pte_t * to, pte_t * from)
{
	*to = *from;
80012ecc:	08004b79 	j	80012de4 <shmem_insert_entry+0x94>
80012ed0:	ac500000 	sw	s0,0(v0)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
80012ed4:	0c006d04 	jal	8001b410 <intr_disable>
80012ed8:	afa20010 	sw	v0,16(sp)
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
80012edc:	8e230000 	lw	v1,0(s1)
80012ee0:	2463ffff 	addiu	v1,v1,-1
80012ee4:	ae230000 	sw	v1,0(s1)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80012ee8:	0c006d00 	jal	8001b400 <intr_enable>
80012eec:	00000000 	nop
80012ef0:	08004b9f 	j	80012e7c <shmem_insert_entry+0x12c>
80012ef4:	8fa20010 	lw	v0,16(sp)
ptep_unmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:16
	*ptep = (pa | PTE_P);
}

static inline void ptep_unmap(pte_t * ptep)
{
	*ptep = 0;
80012ef8:	0c007f5c 	jal	8001fd70 <shmem_remove_entry_pte.part.6>
80012efc:	00000000 	nop
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:99
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
		panic("pa2page called with invalid pa");
80012f00:	3c048002 	lui	a0,0x8002
80012f04:	3c068002 	lui	a2,0x8002
80012f08:	248429ec 	addiu	a0,a0,10732
80012f0c:	24050063 	li	a1,99
80012f10:	0c006b0b 	jal	8001ac2c <__panic>
80012f14:	24c62a54 	addiu	a2,a2,10836

80012f18 <shmem_remove_entry>:
shmem_remove_entry():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:200
	return 0;
}

int shmem_remove_entry(struct shmem_struct *shmem, uintptr_t addr)
{
	return shmem_insert_entry(shmem, addr, 0);
80012f18:	08004b54 	j	80012d50 <shmem_insert_entry>
80012f1c:	00003021 	move	a2,zero

80012f20 <vma_compare>:
vma_compare():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:217
// vma_compare - compare vma1->vm_start < vma2->vm_start ?
static inline int vma_compare(rb_node * node1, rb_node * node2)
{
	struct vma_struct *vma1 = rbn2vma(node1, rb_link);
	struct vma_struct *vma2 = rbn2vma(node2, rb_link);
	uintptr_t start1 = vma1->vm_start, start2 = vma2->vm_start;
80012f20:	8c83fff4 	lw	v1,-12(a0)
80012f24:	8ca4fff4 	lw	a0,-12(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:219
	return (start1 < start2) ? -1 : (start1 > start2) ? 1 : 0;
}
80012f28:	2405ffff 	li	a1,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:218
static inline int vma_compare(rb_node * node1, rb_node * node2)
{
	struct vma_struct *vma1 = rbn2vma(node1, rb_link);
	struct vma_struct *vma2 = rbn2vma(node2, rb_link);
	uintptr_t start1 = vma1->vm_start, start2 = vma2->vm_start;
	return (start1 < start2) ? -1 : (start1 > start2) ? 1 : 0;
80012f2c:	0064102b 	sltu	v0,v1,a0
80012f30:	0083182b 	sltu	v1,a0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:219
}
80012f34:	0062280a 	movz	a1,v1,v0
80012f38:	03e00008 	jr	ra
80012f3c:	00a01021 	move	v0,a1

80012f40 <vma_resize>:
vma_resize():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:433
		*vma_store = vma;
	}
	return 0;
}

static void vma_resize(struct vma_struct *vma, uintptr_t start, uintptr_t end)
80012f40:	00c51025 	or	v0,a2,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:434
{
80012f44:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:433
		*vma_store = vma;
	}
	return 0;
}

static void vma_resize(struct vma_struct *vma, uintptr_t start, uintptr_t end)
80012f48:	30420fff 	andi	v0,v0,0xfff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:435
{
	assert(start % PGSIZE == 0 && end % PGSIZE == 0);
80012f4c:	14400020 	bnez	v0,80012fd0 <vma_resize+0x90>
80012f50:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:436
	assert(vma->vm_start <= start && start < end && end <= vma->vm_end);
80012f54:	8c820004 	lw	v0,4(a0)
80012f58:	00a2182b 	sltu	v1,a1,v0
80012f5c:	14600014 	bnez	v1,80012fb0 <vma_resize+0x70>
80012f60:	00a6182b 	sltu	v1,a1,a2
80012f64:	50600013 	beqzl	v1,80012fb4 <vma_resize+0x74>
80012f68:	3c048002 	lui	a0,0x8002
80012f6c:	8c830008 	lw	v1,8(a0)
80012f70:	0066182b 	sltu	v1,v1,a2
80012f74:	5460000f 	bnezl	v1,80012fb4 <vma_resize+0x74>
80012f78:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:437
	if (vma->vm_flags & VM_SHARE) {
80012f7c:	8c83000c 	lw	v1,12(a0)
80012f80:	30630010 	andi	v1,v1,0x10
80012f84:	10600006 	beqz	v1,80012fa0 <vma_resize+0x60>
80012f88:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:438
		vma->shmem_off += start - vma->vm_start;
80012f8c:	8c83002c 	lw	v1,44(a0)
80012f90:	00621023 	subu	v0,v1,v0
80012f94:	00451021 	addu	v0,v0,a1
80012f98:	ac82002c 	sw	v0,44(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:447
		vma->mfile.offset += start - vma->vm_start;
	}
#endif //UCONFIG_BIONIC_LIBC

	vma->vm_start = start, vma->vm_end = end;
}
80012f9c:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:446
	if (vma->mfile.file != NULL) {
		vma->mfile.offset += start - vma->vm_start;
	}
#endif //UCONFIG_BIONIC_LIBC

	vma->vm_start = start, vma->vm_end = end;
80012fa0:	ac850004 	sw	a1,4(a0)
80012fa4:	ac860008 	sw	a2,8(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:447
}
80012fa8:	03e00008 	jr	ra
80012fac:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:436
}

static void vma_resize(struct vma_struct *vma, uintptr_t start, uintptr_t end)
{
	assert(start % PGSIZE == 0 && end % PGSIZE == 0);
	assert(vma->vm_start <= start && start < end && end <= vma->vm_end);
80012fb0:	3c048002 	lui	a0,0x8002
80012fb4:	3c068002 	lui	a2,0x8002
80012fb8:	3c078002 	lui	a3,0x8002
80012fbc:	2484313c 	addiu	a0,a0,12604
80012fc0:	240501b4 	li	a1,436
80012fc4:	24c60e28 	addiu	a2,a2,3624
80012fc8:	0c006b0b 	jal	8001ac2c <__panic>
80012fcc:	24e73170 	addiu	a3,a3,12656
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:435
	return 0;
}

static void vma_resize(struct vma_struct *vma, uintptr_t start, uintptr_t end)
{
	assert(start % PGSIZE == 0 && end % PGSIZE == 0);
80012fd0:	3c048002 	lui	a0,0x8002
80012fd4:	3c068002 	lui	a2,0x8002
80012fd8:	3c078002 	lui	a3,0x8002
80012fdc:	2484313c 	addiu	a0,a0,12604
80012fe0:	240501b3 	li	a1,435
80012fe4:	24c60e28 	addiu	a2,a2,3624
80012fe8:	0c006b0b 	jal	8001ac2c <__panic>
80012fec:	24e73144 	addiu	a3,a3,12612

80012ff0 <vma_destroy>:
vma_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:140
}

// vma_destroy - free vma_struct
static void vma_destroy(struct vma_struct *vma)
{
	if (vma->vm_flags & VM_SHARE) {
80012ff0:	8c82000c 	lw	v0,12(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:139
	return vma;
}

// vma_destroy - free vma_struct
static void vma_destroy(struct vma_struct *vma)
{
80012ff4:	27bdffe0 	addiu	sp,sp,-32
80012ff8:	afb00014 	sw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:140
	if (vma->vm_flags & VM_SHARE) {
80012ffc:	30420010 	andi	v0,v0,0x10
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:139
	return vma;
}

// vma_destroy - free vma_struct
static void vma_destroy(struct vma_struct *vma)
{
80013000:	afbf001c 	sw	ra,28(sp)
80013004:	afb10018 	sw	s1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:140
	if (vma->vm_flags & VM_SHARE) {
80013008:	14400007 	bnez	v0,80013028 <vma_destroy+0x38>
8001300c:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:145
		if (shmem_ref_dec(vma->shmem) == 0) {
			shmem_destroy(vma->shmem);
		}
	}
	kfree(vma);
80013010:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:146
}
80013014:	8fbf001c 	lw	ra,28(sp)
80013018:	8fb10018 	lw	s1,24(sp)
8001301c:	8fb00014 	lw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:145
	if (vma->vm_flags & VM_SHARE) {
		if (shmem_ref_dec(vma->shmem) == 0) {
			shmem_destroy(vma->shmem);
		}
	}
	kfree(vma);
80013020:	080054b1 	j	800152c4 <kfree>
80013024:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:141

// vma_destroy - free vma_struct
static void vma_destroy(struct vma_struct *vma)
{
	if (vma->vm_flags & VM_SHARE) {
		if (shmem_ref_dec(vma->shmem) == 0) {
80013028:	8c910028 	lw	s1,40(a0)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8001302c:	40026000 	mfc0	v0,c0_status
80013030:	30420001 	andi	v0,v0,0x1
80013034:	1440000f 	bnez	v0,80013074 <vma_destroy+0x84>
80013038:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
8001303c:	8e220010 	lw	v0,16(s1)
80013040:	2442ffff 	addiu	v0,v0,-1
80013044:	ae220010 	sw	v0,16(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
80013048:	8e220010 	lw	v0,16(s1)
vma_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:141
8001304c:	1440fff1 	bnez	v0,80013014 <vma_destroy+0x24>
80013050:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:142
			shmem_destroy(vma->shmem);
80013054:	0c0049fc 	jal	800127f0 <shmem_destroy>
80013058:	8e040028 	lw	a0,40(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:145
		}
	}
	kfree(vma);
8001305c:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:146
}
80013060:	8fbf001c 	lw	ra,28(sp)
80013064:	8fb10018 	lw	s1,24(sp)
80013068:	8fb00014 	lw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:145
	if (vma->vm_flags & VM_SHARE) {
		if (shmem_ref_dec(vma->shmem) == 0) {
			shmem_destroy(vma->shmem);
		}
	}
	kfree(vma);
8001306c:	080054b1 	j	800152c4 <kfree>
80013070:	27bd0020 	addiu	sp,sp,32
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80013074:	0c006d04 	jal	8001b410 <intr_disable>
80013078:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
8001307c:	8e220010 	lw	v0,16(s1)
80013080:	2442ffff 	addiu	v0,v0,-1
80013084:	ae220010 	sw	v0,16(s1)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80013088:	0c006d00 	jal	8001b400 <intr_enable>
8001308c:	00000000 	nop
80013090:	08004c12 	j	80013048 <vma_destroy+0x58>
80013094:	00000000 	nop

80013098 <lock_mm>:
lock_mm():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:66
static void check_vmm(void);
static void check_vma_struct(void);
static void check_pgfault(void);

void lock_mm(struct mm_struct *mm)
{
80013098:	27bdffe8 	addiu	sp,sp,-24
8001309c:	afb00010 	sw	s0,16(sp)
800130a0:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:67
	if (mm != NULL) {
800130a4:	10800009 	beqz	a0,800130cc <lock_mm+0x34>
800130a8:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:68
		down(&(mm->mm_sem));
800130ac:	0c00671f 	jal	80019c7c <down>
800130b0:	24840034 	addiu	a0,a0,52
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:69
		struct proc_struct *current = pls_read(current);
800130b4:	3c028015 	lui	v0,0x8015
800130b8:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:70
		if (current != NULL) {
800130bc:	10400004 	beqz	v0,800130d0 <lock_mm+0x38>
800130c0:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:71
			mm->locked_by = current->pid;
800130c4:	8c420004 	lw	v0,4(v0)
800130c8:	ae020020 	sw	v0,32(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:74
		}
	}
}
800130cc:	8fbf0014 	lw	ra,20(sp)
800130d0:	8fb00010 	lw	s0,16(sp)
800130d4:	03e00008 	jr	ra
800130d8:	27bd0018 	addiu	sp,sp,24

800130dc <unlock_mm>:
unlock_mm():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:77

void unlock_mm(struct mm_struct *mm)
{
800130dc:	27bdffe8 	addiu	sp,sp,-24
800130e0:	afb00010 	sw	s0,16(sp)
800130e4:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:78
	if (mm != NULL) {
800130e8:	10800004 	beqz	a0,800130fc <unlock_mm+0x20>
800130ec:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:79
		up(&(mm->mm_sem));
800130f0:	0c00671d 	jal	80019c74 <up>
800130f4:	24840034 	addiu	a0,a0,52
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:80
		mm->locked_by = 0;
800130f8:	ae000020 	sw	zero,32(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:82
	}
}
800130fc:	8fbf0014 	lw	ra,20(sp)
80013100:	8fb00010 	lw	s0,16(sp)
80013104:	03e00008 	jr	ra
80013108:	27bd0018 	addiu	sp,sp,24

8001310c <try_lock_mm>:
try_lock_mm():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:85

bool try_lock_mm(struct mm_struct *mm)
{
8001310c:	27bdffe8 	addiu	sp,sp,-24
80013110:	afb00010 	sw	s0,16(sp)
80013114:	afbf0014 	sw	ra,20(sp)
80013118:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:86
	if (mm != NULL) {
8001311c:	1080000b 	beqz	a0,8001314c <try_lock_mm+0x40>
80013120:	24030001 	li	v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:87
		if (!try_down(&(mm->mm_sem))) {
80013124:	0c006730 	jal	80019cc0 <try_down>
80013128:	24840034 	addiu	a0,a0,52
8001312c:	10400007 	beqz	v0,8001314c <try_lock_mm+0x40>
80013130:	00001821 	move	v1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:90
			return 0;
		}
		struct proc_struct *current = pls_read(current);
80013134:	3c028015 	lui	v0,0x8015
80013138:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:91
		if (current != NULL) {
8001313c:	10400003 	beqz	v0,8001314c <try_lock_mm+0x40>
80013140:	24030001 	li	v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:92
			mm->locked_by = current->pid;
80013144:	8c420004 	lw	v0,4(v0)
80013148:	ae020020 	sw	v0,32(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:96
		}
	}
	return 1;
}
8001314c:	8fbf0014 	lw	ra,20(sp)
80013150:	00601021 	move	v0,v1
80013154:	8fb00010 	lw	s0,16(sp)
80013158:	03e00008 	jr	ra
8001315c:	27bd0018 	addiu	sp,sp,24

80013160 <mm_create>:
mm_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:100

// mm_create -  alloc a mm_struct & initialize it.
struct mm_struct *mm_create(void)
{
80013160:	27bdffe0 	addiu	sp,sp,-32
80013164:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:101
	struct mm_struct *mm = kmalloc(sizeof(struct mm_struct));
80013168:	0c005486 	jal	80015218 <kmalloc>
8001316c:	2404004c 	li	a0,76
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:102
	if (mm != NULL) {
80013170:	10400015 	beqz	v0,800131c8 <mm_create+0x68>
80013174:	2443002c 	addiu	v1,v0,44
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
 * list_init - initialize a new entry
 * @elm:        new entry to be initialized
 * */
static inline void list_init(list_entry_t * elm)
{
	elm->prev = elm->next = elm;
80013178:	ac430030 	sw	v1,48(v0)
8001317c:	ac43002c 	sw	v1,44(v0)
80013180:	ac420004 	sw	v0,4(v0)
80013184:	ac420000 	sw	v0,0(v0)
mm_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:104
		list_init(&(mm->mmap_list));
		mm->mmap_tree = NULL;
80013188:	ac400008 	sw	zero,8(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:105
		mm->mmap_cache = NULL;
8001318c:	ac40000c 	sw	zero,12(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:106
		mm->pgdir = NULL;
80013190:	ac400010 	sw	zero,16(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:107
		mm->map_count = 0;
80013194:	ac400014 	sw	zero,20(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:108
		mm->swap_address = 0;
80013198:	ac400018 	sw	zero,24(v0)
atomic_set():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:34
 *
 * Atomically sets the value of @v to @i.
 * */
static __always_inline void atomic_set(atomic_t * v, int i)
{
	v->counter = i;
8001319c:	ac40001c 	sw	zero,28(v0)
mm_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:110
		set_mm_count(mm, 0);
		mm->locked_by = 0;
800131a0:	ac400020 	sw	zero,32(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:111
		mm->brk_start = mm->brk = 0;
800131a4:	ac400028 	sw	zero,40(v0)
800131a8:	ac400024 	sw	zero,36(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:113
		list_init(&(mm->proc_mm_link));
		sem_init(&(mm->mm_sem), 1);
800131ac:	24440034 	addiu	a0,v0,52
800131b0:	24050001 	li	a1,1
800131b4:	0c006717 	jal	80019c5c <sem_init>
800131b8:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:114
		mm->lapic = -1;
800131bc:	8fa20010 	lw	v0,16(sp)
800131c0:	2403ffff 	li	v1,-1
800131c4:	ac430048 	sw	v1,72(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:117
	}
	return mm;
}
800131c8:	8fbf001c 	lw	ra,28(sp)
800131cc:	03e00008 	jr	ra
800131d0:	27bd0020 	addiu	sp,sp,32

800131d4 <vma_create>:
vma_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:122

// vma_create - alloc a vma_struct & initialize it. (addr range: vm_start~vm_end)
struct vma_struct *vma_create(uintptr_t vm_start, uintptr_t vm_end,
			      uint32_t vm_flags)
{
800131d4:	27bdffe0 	addiu	sp,sp,-32
800131d8:	afb00018 	sw	s0,24(sp)
800131dc:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:123
	struct vma_struct *vma = kmalloc(sizeof(struct vma_struct));
800131e0:	afa50010 	sw	a1,16(sp)
800131e4:	afa60014 	sw	a2,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:122
}

// vma_create - alloc a vma_struct & initialize it. (addr range: vm_start~vm_end)
struct vma_struct *vma_create(uintptr_t vm_start, uintptr_t vm_end,
			      uint32_t vm_flags)
{
800131e8:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:123
	struct vma_struct *vma = kmalloc(sizeof(struct vma_struct));
800131ec:	0c005486 	jal	80015218 <kmalloc>
800131f0:	24040030 	li	a0,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:124
	if (vma != NULL) {
800131f4:	8fa50010 	lw	a1,16(sp)
800131f8:	10400006 	beqz	v0,80013214 <vma_create+0x40>
800131fc:	8fa60014 	lw	a2,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:125
		vma->vm_start = vm_start;
80013200:	ac500004 	sw	s0,4(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:126
		vma->vm_end = vm_end;
80013204:	ac450008 	sw	a1,8(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:127
		vma->vm_flags = vm_flags;
80013208:	ac46000c 	sw	a2,12(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:128
		vma->shmem = NULL;
8001320c:	ac400028 	sw	zero,40(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:129
		vma->shmem_off = 0;
80013210:	ac40002c 	sw	zero,44(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:135
#ifdef UCONFIG_BIONIC_LIBC
		vma->mfile.file = NULL;
#endif //UCONFIG_BIONIC_LIBC
	}
	return vma;
}
80013214:	8fbf001c 	lw	ra,28(sp)
80013218:	8fb00018 	lw	s0,24(sp)
8001321c:	03e00008 	jr	ra
80013220:	27bd0020 	addiu	sp,sp,32

80013224 <find_vma>:
find_vma():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:170
	return vma;
}

// find_vma - find a vma  (vma->vm_start <= addr <= vma_vm_end)
struct vma_struct *find_vma(struct mm_struct *mm, uintptr_t addr)
{
80013224:	27bdffd8 	addiu	sp,sp,-40
80013228:	afb30020 	sw	s3,32(sp)
8001322c:	afb10018 	sw	s1,24(sp)
80013230:	afb00014 	sw	s0,20(sp)
80013234:	afbf0024 	sw	ra,36(sp)
80013238:	afb2001c 	sw	s2,28(sp)
8001323c:	00809821 	move	s3,a0
80013240:	00a08021 	move	s0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:172
	struct vma_struct *vma = NULL;
	if (mm != NULL) {
80013244:	10800020 	beqz	a0,800132c8 <find_vma+0xa4>
80013248:	00008821 	move	s1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:173
		vma = mm->mmap_cache;
8001324c:	8c91000c 	lw	s1,12(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:174
		if (!
80013250:	52200006 	beqzl	s1,8001326c <find_vma+0x48>
80013254:	8e720008 	lw	s2,8(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:175
		    (vma != NULL && vma->vm_start <= addr
80013258:	8e220004 	lw	v0,4(s1)
8001325c:	00a2102b 	sltu	v0,a1,v0
80013260:	50400027 	beqzl	v0,80013300 <find_vma+0xdc>
80013264:	8e220008 	lw	v0,8(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:177
		     && vma->vm_end > addr)) {
			if (mm->mmap_tree != NULL) {
80013268:	8e720008 	lw	s2,8(s3)
8001326c:	1240002a 	beqz	s2,80013318 <find_vma+0xf4>
80013270:	02601021 	move	v0,s3
find_vma_rb():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:151
}

// find_vma_rb - find a vma  (vma->vm_start <= addr <= vma_vm_end) in rb tree
static inline struct vma_struct *find_vma_rb(rb_tree * tree, uintptr_t addr)
{
	rb_node *node = rb_node_root(tree);
80013274:	0c00571b 	jal	80015c6c <rb_node_root>
80013278:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:153
	struct vma_struct *vma = NULL, *tmp;
	while (node != NULL) {
8001327c:	10400012 	beqz	v0,800132c8 <find_vma+0xa4>
80013280:	00008821 	move	s1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:155
		tmp = rbn2vma(node, rb_link);
		if (tmp->vm_end > addr) {
80013284:	8c43fff8 	lw	v1,-8(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:160
			vma = tmp;
			if (tmp->vm_start <= addr) {
				break;
			}
			node = rb_node_left(tree, node);
80013288:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:155
{
	rb_node *node = rb_node_root(tree);
	struct vma_struct *vma = NULL, *tmp;
	while (node != NULL) {
		tmp = rbn2vma(node, rb_link);
		if (tmp->vm_end > addr) {
8001328c:	0203182b 	sltu	v1,s0,v1
80013290:	10600015 	beqz	v1,800132e8 <find_vma+0xc4>
80013294:	00402821 	move	a1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:157
			vma = tmp;
			if (tmp->vm_start <= addr) {
80013298:	8c43fff4 	lw	v1,-12(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:154
static inline struct vma_struct *find_vma_rb(rb_tree * tree, uintptr_t addr)
{
	rb_node *node = rb_node_root(tree);
	struct vma_struct *vma = NULL, *tmp;
	while (node != NULL) {
		tmp = rbn2vma(node, rb_link);
8001329c:	2451fff0 	addiu	s1,v0,-16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:157
		if (tmp->vm_end > addr) {
			vma = tmp;
			if (tmp->vm_start <= addr) {
800132a0:	0203102b 	sltu	v0,s0,v1
800132a4:	10400005 	beqz	v0,800132bc <find_vma+0x98>
800132a8:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:160
				break;
			}
			node = rb_node_left(tree, node);
800132ac:	0c005722 	jal	80015c88 <rb_node_left>
800132b0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:153
// find_vma_rb - find a vma  (vma->vm_start <= addr <= vma_vm_end) in rb tree
static inline struct vma_struct *find_vma_rb(rb_tree * tree, uintptr_t addr)
{
	rb_node *node = rb_node_root(tree);
	struct vma_struct *vma = NULL, *tmp;
	while (node != NULL) {
800132b4:	5440fff4 	bnezl	v0,80013288 <find_vma+0x64>
800132b8:	8c43fff8 	lw	v1,-8(v0)
find_vma():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:195
				if (!found) {
					vma = NULL;
				}
			}
		}
		if (vma != NULL) {
800132bc:	12200003 	beqz	s1,800132cc <find_vma+0xa8>
800132c0:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:196
			mm->mmap_cache = vma;
800132c4:	ae71000c 	sw	s1,12(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:200
		}
	}
	return vma;
}
800132c8:	8fbf0024 	lw	ra,36(sp)
800132cc:	02201021 	move	v0,s1
800132d0:	8fb30020 	lw	s3,32(sp)
800132d4:	8fb2001c 	lw	s2,28(sp)
800132d8:	8fb10018 	lw	s1,24(sp)
800132dc:	8fb00014 	lw	s0,20(sp)
800132e0:	03e00008 	jr	ra
800132e4:	27bd0028 	addiu	sp,sp,40
find_vma_rb():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:162
			if (tmp->vm_start <= addr) {
				break;
			}
			node = rb_node_left(tree, node);
		} else {
			node = rb_node_right(tree, node);
800132e8:	0c005728 	jal	80015ca0 <rb_node_right>
800132ec:	00402821 	move	a1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:153
// find_vma_rb - find a vma  (vma->vm_start <= addr <= vma_vm_end) in rb tree
static inline struct vma_struct *find_vma_rb(rb_tree * tree, uintptr_t addr)
{
	rb_node *node = rb_node_root(tree);
	struct vma_struct *vma = NULL, *tmp;
	while (node != NULL) {
800132f0:	5440ffe5 	bnezl	v0,80013288 <find_vma+0x64>
800132f4:	8c43fff8 	lw	v1,-8(v0)
800132f8:	08004caf 	j	800132bc <find_vma+0x98>
800132fc:	00000000 	nop
find_vma():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:174
struct vma_struct *find_vma(struct mm_struct *mm, uintptr_t addr)
{
	struct vma_struct *vma = NULL;
	if (mm != NULL) {
		vma = mm->mmap_cache;
		if (!
80013300:	00a2102b 	sltu	v0,a1,v0
80013304:	5440fff0 	bnezl	v0,800132c8 <find_vma+0xa4>
80013308:	ae71000c 	sw	s1,12(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:177
		    (vma != NULL && vma->vm_start <= addr
		     && vma->vm_end > addr)) {
			if (mm->mmap_tree != NULL) {
8001330c:	8e720008 	lw	s2,8(s3)
80013310:	1640ffd8 	bnez	s2,80013274 <find_vma+0x50>
80013314:	02601021 	move	v0,s3
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
80013318:	8c420004 	lw	v0,4(v0)
find_vma():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:183
				vma = find_vma_rb(mm->mmap_tree, addr);
			} else {
				bool found = 0;
				list_entry_t *list = &(mm->mmap_list), *le =
				    list;
				while ((le = list_next(le)) != list) {
8001331c:	1262ffea 	beq	s3,v0,800132c8 <find_vma+0xa4>
80013320:	00008821 	move	s1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:185
					vma = le2vma(le, list_link);
					if (addr < vma->vm_end) {
80013324:	8c43ffe8 	lw	v1,-24(v0)
80013328:	0203182b 	sltu	v1,s0,v1
8001332c:	1060fffa 	beqz	v1,80013318 <find_vma+0xf4>
80013330:	2451ffe0 	addiu	s1,v0,-32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:195
				if (!found) {
					vma = NULL;
				}
			}
		}
		if (vma != NULL) {
80013334:	5620ffe4 	bnezl	s1,800132c8 <find_vma+0xa4>
80013338:	ae71000c 	sw	s1,12(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:200
			mm->mmap_cache = vma;
		}
	}
	return vma;
}
8001333c:	08004cb3 	j	800132cc <find_vma+0xa8>
80013340:	8fbf0024 	lw	ra,36(sp)

80013344 <find_vma_intersection>:
find_vma_intersection():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:204

struct vma_struct *find_vma_intersection(struct mm_struct *mm, uintptr_t start,
					 uintptr_t end)
{
80013344:	27bdffe0 	addiu	sp,sp,-32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:205
	struct vma_struct *vma = find_vma(mm, start);
80013348:	afa60010 	sw	a2,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:204
	return vma;
}

struct vma_struct *find_vma_intersection(struct mm_struct *mm, uintptr_t start,
					 uintptr_t end)
{
8001334c:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:205
	struct vma_struct *vma = find_vma(mm, start);
80013350:	0c004c89 	jal	80013224 <find_vma>
80013354:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:206
	if (vma != NULL && end <= vma->vm_start) {
80013358:	10400004 	beqz	v0,8001336c <find_vma_intersection+0x28>
8001335c:	8fa60010 	lw	a2,16(sp)
80013360:	8c430004 	lw	v1,4(v0)
80013364:	0066302b 	sltu	a2,v1,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:207
		vma = NULL;
80013368:	0006100a 	movz	v0,zero,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:210
	}
	return vma;
}
8001336c:	8fbf001c 	lw	ra,28(sp)
80013370:	03e00008 	jr	ra
80013374:	27bd0020 	addiu	sp,sp,32

80013378 <insert_vma_struct>:
insert_vma_struct():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:291
}

// insert_vma_struct -insert vma in mm's rb tree link & list link
void insert_vma_struct(struct mm_struct *mm, struct vma_struct *vma)
{
	assert(vma->vm_start < vma->vm_end);
80013378:	8ca20004 	lw	v0,4(a1)
8001337c:	8ca30008 	lw	v1,8(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:290
	}
}

// insert_vma_struct -insert vma in mm's rb tree link & list link
void insert_vma_struct(struct mm_struct *mm, struct vma_struct *vma)
{
80013380:	27bdffd8 	addiu	sp,sp,-40
80013384:	afb10018 	sw	s1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:291
	assert(vma->vm_start < vma->vm_end);
80013388:	0043182b 	sltu	v1,v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:290
	}
}

// insert_vma_struct -insert vma in mm's rb tree link & list link
void insert_vma_struct(struct mm_struct *mm, struct vma_struct *vma)
{
8001338c:	afb00014 	sw	s0,20(sp)
80013390:	afbf0024 	sw	ra,36(sp)
80013394:	afb30020 	sw	s3,32(sp)
80013398:	afb2001c 	sw	s2,28(sp)
8001339c:	00a08821 	move	s1,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:291
	assert(vma->vm_start < vma->vm_end);
800133a0:	10600070 	beqz	v1,80013564 <insert_vma_struct+0x1ec>
800133a4:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:294
	list_entry_t *list = &(mm->mmap_list);
	list_entry_t *le_prev = list, *le_next;
	if (mm->mmap_tree != NULL) {
800133a8:	8c920008 	lw	s2,8(a0)
800133ac:	1240003e 	beqz	s2,800134a8 <insert_vma_struct+0x130>
800133b0:	24b30010 	addiu	s3,a1,16
insert_vma_rb():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:281
static inline void
insert_vma_rb(rb_tree * tree, struct vma_struct *vma,
	      struct vma_struct **vma_prevp)
{
	rb_node *node = &(vma->rb_link), *prev;
	rb_insert(tree, node);
800133b4:	02402021 	move	a0,s2
800133b8:	0c005575 	jal	800155d4 <rb_insert>
800133bc:	02602821 	move	a1,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:283
	if (vma_prevp != NULL) {
		prev = rb_node_prev(tree, node);
800133c0:	02402021 	move	a0,s2
800133c4:	0c0056de 	jal	80015b78 <rb_node_prev>
800133c8:	02602821 	move	a1,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:284
		*vma_prevp = (prev != NULL) ? rbn2vma(prev, rb_link) : NULL;
800133cc:	50400053 	beqzl	v0,8001351c <insert_vma_struct+0x1a4>
800133d0:	8e040004 	lw	a0,4(s0)
800133d4:	2443fff0 	addiu	v1,v0,-16
insert_vma_struct():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:297
	list_entry_t *list = &(mm->mmap_list);
	list_entry_t *le_prev = list, *le_next;
	if (mm->mmap_tree != NULL) {
		struct vma_struct *mmap_prev;
		insert_vma_rb(mm->mmap_tree, vma, &mmap_prev);
		if (mmap_prev != NULL) {
800133d8:	50600050 	beqzl	v1,8001351c <insert_vma_struct+0x1a4>
800133dc:	8e040004 	lw	a0,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:298
			le_prev = &(mmap_prev->list_link);
800133e0:	8c440014 	lw	a0,20(v0)
800133e4:	24430010 	addiu	v1,v0,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:314
	}

	le_next = list_next(le_prev);

	/* check overlap */
	if (le_prev != list) {
800133e8:	1070000e 	beq	v1,s0,80013424 <insert_vma_struct+0xac>
800133ec:	00000000 	nop
check_vma_overlap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:270

// check_vma_overlap - check if vma1 overlaps vma2 ?
static inline void
check_vma_overlap(struct vma_struct *prev, struct vma_struct *next)
{
	assert(prev->vm_start < prev->vm_end);
800133f0:	8c65ffe8 	lw	a1,-24(v1)
800133f4:	8c62ffe4 	lw	v0,-28(v1)
800133f8:	0045102b 	sltu	v0,v0,a1
800133fc:	10400057 	beqz	v0,8001355c <insert_vma_struct+0x1e4>
80013400:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:271
	assert(prev->vm_end <= next->vm_start);
80013404:	8e220004 	lw	v0,4(s1)
80013408:	0045282b 	sltu	a1,v0,a1
8001340c:	54a0004c 	bnezl	a1,80013540 <insert_vma_struct+0x1c8>
80013410:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:272
	assert(next->vm_start < next->vm_end);
80013414:	8e250008 	lw	a1,8(s1)
80013418:	0045102b 	sltu	v0,v0,a1
8001341c:	50400041 	beqzl	v0,80013524 <insert_vma_struct+0x1ac>
80013420:	3c048002 	lui	a0,0x8002
insert_vma_struct():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:317

	/* check overlap */
	if (le_prev != list) {
		check_vma_overlap(le2vma(le_prev, list_link), vma);
	}
	if (le_next != list) {
80013424:	5204000f 	beql	s0,a0,80013464 <insert_vma_struct+0xec>
80013428:	8e050014 	lw	a1,20(s0)
check_vma_overlap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:270

// check_vma_overlap - check if vma1 overlaps vma2 ?
static inline void
check_vma_overlap(struct vma_struct *prev, struct vma_struct *next)
{
	assert(prev->vm_start < prev->vm_end);
8001342c:	8e220008 	lw	v0,8(s1)
80013430:	8e250004 	lw	a1,4(s1)
80013434:	00a2282b 	sltu	a1,a1,v0
80013438:	10a00048 	beqz	a1,8001355c <insert_vma_struct+0x1e4>
8001343c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:271
	assert(prev->vm_end <= next->vm_start);
80013440:	8c85ffe4 	lw	a1,-28(a0)
80013444:	00a2102b 	sltu	v0,a1,v0
80013448:	5440003d 	bnezl	v0,80013540 <insert_vma_struct+0x1c8>
8001344c:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:272
	assert(next->vm_start < next->vm_end);
80013450:	8c82ffe8 	lw	v0,-24(a0)
80013454:	00a2282b 	sltu	a1,a1,v0
80013458:	50a00032 	beqzl	a1,80013524 <insert_vma_struct+0x1ac>
8001345c:	3c048002 	lui	a0,0x8002
insert_vma_struct():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:324
	}

	vma->vm_mm = mm;
	list_add_after(le_prev, &(vma->list_link));

	mm->map_count++;
80013460:	8e050014 	lw	a1,20(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:325
	if (mm->mmap_tree == NULL && mm->map_count >= RB_MIN_MAP_COUNT) {
80013464:	8e060008 	lw	a2,8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:322
	if (le_next != list) {
		check_vma_overlap(vma, le2vma(le_next, list_link));
	}

	vma->vm_mm = mm;
	list_add_after(le_prev, &(vma->list_link));
80013468:	26220020 	addiu	v0,s1,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:324

	mm->map_count++;
8001346c:	24a50001 	addiu	a1,a1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:321
	}
	if (le_next != list) {
		check_vma_overlap(vma, le2vma(le_next, list_link));
	}

	vma->vm_mm = mm;
80013470:	ae300000 	sw	s0,0(s1)
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
80013474:	ac820000 	sw	v0,0(a0)
80013478:	ac620004 	sw	v0,4(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->next = next;
	elm->prev = prev;
8001347c:	ae230020 	sw	v1,32(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
	elm->next = next;
80013480:	ae240024 	sw	a0,36(s1)
insert_vma_struct():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:325
	list_add_after(le_prev, &(vma->list_link));

	mm->map_count++;
	if (mm->mmap_tree == NULL && mm->map_count >= RB_MIN_MAP_COUNT) {
80013484:	10c00012 	beqz	a2,800134d0 <insert_vma_struct+0x158>
80013488:	ae050014 	sw	a1,20(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:338
				insert_vma_rb(mm->mmap_tree,
					      le2vma(le, list_link), NULL);
			}
		}
	}
}
8001348c:	8fbf0024 	lw	ra,36(sp)
80013490:	8fb30020 	lw	s3,32(sp)
80013494:	8fb2001c 	lw	s2,28(sp)
80013498:	8fb10018 	lw	s1,24(sp)
8001349c:	8fb00014 	lw	s0,20(sp)
800134a0:	03e00008 	jr	ra
800134a4:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:294
void insert_vma_struct(struct mm_struct *mm, struct vma_struct *vma)
{
	assert(vma->vm_start < vma->vm_end);
	list_entry_t *list = &(mm->mmap_list);
	list_entry_t *le_prev = list, *le_next;
	if (mm->mmap_tree != NULL) {
800134a8:	00801821 	move	v1,a0
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
800134ac:	8c840004 	lw	a0,4(a0)
insert_vma_struct():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:302
		if (mmap_prev != NULL) {
			le_prev = &(mmap_prev->list_link);
		}
	} else {
		list_entry_t *le = list;
		while ((le = list_next(le)) != list) {
800134b0:	1204ffcd 	beq	s0,a0,800133e8 <insert_vma_struct+0x70>
800134b4:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:304
			struct vma_struct *mmap_prev = le2vma(le, list_link);
			if (mmap_prev->vm_start > vma->vm_start) {
800134b8:	8c85ffe4 	lw	a1,-28(a0)
800134bc:	0045282b 	sltu	a1,v0,a1
800134c0:	50a0fffa 	beqzl	a1,800134ac <insert_vma_struct+0x134>
800134c4:	00801821 	move	v1,a0
800134c8:	08004cfa 	j	800133e8 <insert_vma_struct+0x70>
800134cc:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:325

	vma->vm_mm = mm;
	list_add_after(le_prev, &(vma->list_link));

	mm->map_count++;
	if (mm->mmap_tree == NULL && mm->map_count >= RB_MIN_MAP_COUNT) {
800134d0:	28a50020 	slti	a1,a1,32
800134d4:	14a0ffee 	bnez	a1,80013490 <insert_vma_struct+0x118>
800134d8:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:328

		/* try to build red-black tree now, but may fail. */
		mm->mmap_tree = rb_tree_create(vma_compare);
800134dc:	3c048001 	lui	a0,0x8001
800134e0:	0c005544 	jal	80015510 <rb_tree_create>
800134e4:	24842f20 	addiu	a0,a0,12064
800134e8:	00402021 	move	a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:330

		if (mm->mmap_tree != NULL) {
800134ec:	1040ffe7 	beqz	v0,8001348c <insert_vma_struct+0x114>
800134f0:	ae020008 	sw	v0,8(s0)
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
800134f4:	8e110004 	lw	s1,4(s0)
insert_vma_struct():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:332
			list_entry_t *list = &(mm->mmap_list), *le = list;
			while ((le = list_next(le)) != list) {
800134f8:	1211ffe5 	beq	s0,s1,80013490 <insert_vma_struct+0x118>
800134fc:	8fbf0024 	lw	ra,36(sp)
insert_vma_rb():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:281
static inline void
insert_vma_rb(rb_tree * tree, struct vma_struct *vma,
	      struct vma_struct **vma_prevp)
{
	rb_node *node = &(vma->rb_link), *prev;
	rb_insert(tree, node);
80013500:	0c005575 	jal	800155d4 <rb_insert>
80013504:	2625fff0 	addiu	a1,s1,-16
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
80013508:	8e310004 	lw	s1,4(s1)
insert_vma_struct():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:332
		/* try to build red-black tree now, but may fail. */
		mm->mmap_tree = rb_tree_create(vma_compare);

		if (mm->mmap_tree != NULL) {
			list_entry_t *list = &(mm->mmap_list), *le = list;
			while ((le = list_next(le)) != list) {
8001350c:	5611fffc 	bnel	s0,s1,80013500 <insert_vma_struct+0x188>
80013510:	8e040008 	lw	a0,8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:338
				insert_vma_rb(mm->mmap_tree,
					      le2vma(le, list_link), NULL);
			}
		}
	}
}
80013514:	08004d24 	j	80013490 <insert_vma_struct+0x118>
80013518:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:292

// insert_vma_struct -insert vma in mm's rb tree link & list link
void insert_vma_struct(struct mm_struct *mm, struct vma_struct *vma)
{
	assert(vma->vm_start < vma->vm_end);
	list_entry_t *list = &(mm->mmap_list);
8001351c:	08004d09 	j	80013424 <insert_vma_struct+0xac>
80013520:	02001821 	move	v1,s0
check_vma_overlap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:272
static inline void
check_vma_overlap(struct vma_struct *prev, struct vma_struct *next)
{
	assert(prev->vm_start < prev->vm_end);
	assert(prev->vm_end <= next->vm_start);
	assert(next->vm_start < next->vm_end);
80013524:	3c068002 	lui	a2,0x8002
80013528:	3c078002 	lui	a3,0x8002
8001352c:	2484313c 	addiu	a0,a0,12604
80013530:	24050110 	li	a1,272
80013534:	24c60e28 	addiu	a2,a2,3624
80013538:	0c006b0b 	jal	8001ac2c <__panic>
8001353c:	24e73208 	addiu	a3,a3,12808
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:271
// check_vma_overlap - check if vma1 overlaps vma2 ?
static inline void
check_vma_overlap(struct vma_struct *prev, struct vma_struct *next)
{
	assert(prev->vm_start < prev->vm_end);
	assert(prev->vm_end <= next->vm_start);
80013540:	3c068002 	lui	a2,0x8002
80013544:	3c078002 	lui	a3,0x8002
80013548:	2484313c 	addiu	a0,a0,12604
8001354c:	2405010f 	li	a1,271
80013550:	24c60e28 	addiu	a2,a2,3624
80013554:	0c006b0b 	jal	8001ac2c <__panic>
80013558:	24e731e8 	addiu	a3,a3,12776
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:270

// check_vma_overlap - check if vma1 overlaps vma2 ?
static inline void
check_vma_overlap(struct vma_struct *prev, struct vma_struct *next)
{
	assert(prev->vm_start < prev->vm_end);
8001355c:	0c007f66 	jal	8001fd98 <check_vma_overlap.part.5>
80013560:	00000000 	nop
insert_vma_struct():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:291
}

// insert_vma_struct -insert vma in mm's rb tree link & list link
void insert_vma_struct(struct mm_struct *mm, struct vma_struct *vma)
{
	assert(vma->vm_start < vma->vm_end);
80013564:	3c048002 	lui	a0,0x8002
80013568:	3c068002 	lui	a2,0x8002
8001356c:	3c078002 	lui	a3,0x8002
80013570:	2484313c 	addiu	a0,a0,12604
80013574:	24050123 	li	a1,291
80013578:	24c60e28 	addiu	a2,a2,3624
8001357c:	0c006b0b 	jal	8001ac2c <__panic>
80013580:	24e731cc 	addiu	a3,a3,12748

80013584 <mm_destroy>:
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
 *
 * Atomically reads the value of @v.
 * */
static __always_inline int atomic_read(const atomic_t * v)
{
	return v->counter;
80013584:	8c82001c 	lw	v0,28(a0)
mm_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:357
	return 0;
}

// mm_destroy - free mm and mm internal fields
void mm_destroy(struct mm_struct *mm)
{
80013588:	27bdffe8 	addiu	sp,sp,-24
8001358c:	afb00010 	sw	s0,16(sp)
80013590:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:358
	assert(mm_count(mm) == 0);
80013594:	14400015 	bnez	v0,800135ec <mm_destroy+0x68>
80013598:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:359
	if (mm->mmap_tree != NULL) {
8001359c:	8c840008 	lw	a0,8(a0)
800135a0:	5080000b 	beqzl	a0,800135d0 <mm_destroy+0x4c>
800135a4:	8e040004 	lw	a0,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:360
		rb_tree_destroy(mm->mmap_tree);
800135a8:	0c0056d0 	jal	80015b40 <rb_tree_destroy>
800135ac:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
800135b0:	08004d74 	j	800135d0 <mm_destroy+0x4c>
800135b4:	8e040004 	lw	a0,4(s0)
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
800135b8:	8c820004 	lw	v0,4(a0)
mm_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:365
	}
	list_entry_t *list = &(mm->mmap_list), *le;
	while ((le = list_next(list)) != list) {
		list_del(le);
		vma_destroy(le2vma(le, list_link));
800135bc:	2484ffe0 	addiu	a0,a0,-32
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
800135c0:	ac620004 	sw	v0,4(v1)
mm_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:365
800135c4:	0c004bfc 	jal	80012ff0 <vma_destroy>
800135c8:	ac430000 	sw	v1,0(v0)
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
800135cc:	8e040004 	lw	a0,4(s0)
mm_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:363
	assert(mm_count(mm) == 0);
	if (mm->mmap_tree != NULL) {
		rb_tree_destroy(mm->mmap_tree);
	}
	list_entry_t *list = &(mm->mmap_list), *le;
	while ((le = list_next(list)) != list) {
800135d0:	5604fff9 	bnel	s0,a0,800135b8 <mm_destroy+0x34>
800135d4:	8c830000 	lw	v1,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:367
		list_del(le);
		vma_destroy(le2vma(le, list_link));
	}
	kfree(mm);
800135d8:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:368
}
800135dc:	8fbf0014 	lw	ra,20(sp)
800135e0:	8fb00010 	lw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:367
	list_entry_t *list = &(mm->mmap_list), *le;
	while ((le = list_next(list)) != list) {
		list_del(le);
		vma_destroy(le2vma(le, list_link));
	}
	kfree(mm);
800135e4:	080054b1 	j	800152c4 <kfree>
800135e8:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:358
}

// mm_destroy - free mm and mm internal fields
void mm_destroy(struct mm_struct *mm)
{
	assert(mm_count(mm) == 0);
800135ec:	3c048002 	lui	a0,0x8002
800135f0:	3c068002 	lui	a2,0x8002
800135f4:	3c078002 	lui	a3,0x8002
800135f8:	2484313c 	addiu	a0,a0,12604
800135fc:	24050166 	li	a1,358
80013600:	24c60e28 	addiu	a2,a2,3624
80013604:	0c006b0b 	jal	8001ac2c <__panic>
80013608:	24e73228 	addiu	a3,a3,12840

8001360c <vmm_init>:
vmm_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:373
}

// vmm_init - initialize virtual memory management
//          - now just call check_vmm to check correctness of vmm
void vmm_init(void)
{
8001360c:	27bdffd0 	addiu	sp,sp,-48
80013610:	afbf002c 	sw	ra,44(sp)
80013614:	afb60028 	sw	s6,40(sp)
80013618:	afb50024 	sw	s5,36(sp)
8001361c:	afb40020 	sw	s4,32(sp)
80013620:	afb3001c 	sw	s3,28(sp)
80013624:	afb20018 	sw	s2,24(sp)
80013628:	afb10014 	sw	s1,20(sp)
check_vmm():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:735
}

// check_vmm - check correctness of vmm
static void check_vmm(void)
{
	size_t nr_used_pages_store = nr_used_pages();
8001362c:	0c00791a 	jal	8001e468 <nr_used_pages>
80013630:	afb00010 	sw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:737
	//YX
	size_t slab_allocated_store = slab_allocated();
80013634:	0c005452 	jal	80015148 <slab_allocated>
80013638:	0040a021 	move	s4,v0
check_vma_struct():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:749
	kprintf("check_vmm() succeeded.\n");
}

static void check_vma_struct(void)
{
	size_t nr_used_pages_store = nr_used_pages();
8001363c:	0c00791a 	jal	8001e468 <nr_used_pages>
80013640:	00409821 	move	s3,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:750
	size_t slab_allocated_store = slab_allocated();
80013644:	0c005452 	jal	80015148 <slab_allocated>
80013648:	0040b021 	move	s6,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:752

	struct mm_struct *mm = mm_create();
8001364c:	0c004c58 	jal	80013160 <mm_create>
80013650:	0040a821 	move	s5,v0
80013654:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:753
	assert(mm != NULL);
80013658:	24100140 	li	s0,320
8001365c:	10400095 	beqz	v0,800138b4 <vmm_init+0x2a8>
80013660:	2412fffb 	li	s2,-5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:759
	//10 
	int step1 = RB_MIN_MAP_COUNT * 2, step2 = step1 * 10;

	int i;
	for (i = step1; i >= 0; i--) {
		struct vma_struct *vma = vma_create(i * 5, i * 5 + 2, 0);
80013664:	02002021 	move	a0,s0
80013668:	26050002 	addiu	a1,s0,2
8001366c:	0c004c75 	jal	800131d4 <vma_create>
80013670:	00003021 	move	a2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:760
		assert(vma != NULL);
80013674:	1040008b 	beqz	v0,800138a4 <vmm_init+0x298>
80013678:	2610fffb 	addiu	s0,s0,-5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:761
		insert_vma_struct(mm, vma);
8001367c:	02202021 	move	a0,s1
80013680:	0c004cde 	jal	80013378 <insert_vma_struct>
80013684:	00402821 	move	a1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:758
	assert(mm != NULL);
	//10 
	int step1 = RB_MIN_MAP_COUNT * 2, step2 = step1 * 10;

	int i;
	for (i = step1; i >= 0; i--) {
80013688:	1612fff7 	bne	s0,s2,80013668 <vmm_init+0x5c>
8001368c:	02002021 	move	a0,s0
80013690:	24100145 	li	s0,325
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:764
		struct vma_struct *vma = vma_create(i * 5, i * 5 + 2, 0);
		assert(vma != NULL);
		insert_vma_struct(mm, vma);
	}

	for (i = step1 + 1; i <= step2; i++) {
80013694:	24120c85 	li	s2,3205
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:765
		struct vma_struct *vma = vma_create(i * 5, i * 5 + 2, 0);
80013698:	02002021 	move	a0,s0
8001369c:	26050002 	addiu	a1,s0,2
800136a0:	0c004c75 	jal	800131d4 <vma_create>
800136a4:	00003021 	move	a2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:766
		assert(vma != NULL);
800136a8:	10400072 	beqz	v0,80013874 <vmm_init+0x268>
800136ac:	26100005 	addiu	s0,s0,5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:767
		insert_vma_struct(mm, vma);
800136b0:	02202021 	move	a0,s1
800136b4:	0c004cde 	jal	80013378 <insert_vma_struct>
800136b8:	00402821 	move	a1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:764
		struct vma_struct *vma = vma_create(i * 5, i * 5 + 2, 0);
		assert(vma != NULL);
		insert_vma_struct(mm, vma);
	}

	for (i = step1 + 1; i <= step2; i++) {
800136bc:	1612fff7 	bne	s0,s2,8001369c <vmm_init+0x90>
800136c0:	02002021 	move	a0,s0
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
800136c4:	8e220004 	lw	v0,4(s1)
800136c8:	24030002 	li	v1,2
check_vma_struct():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:772
		insert_vma_struct(mm, vma);
	}

	list_entry_t *le = list_next(&(mm->mmap_list));

	for (i = 0; i <= step2; i++) {
800136cc:	24060c87 	li	a2,3207
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:773
		assert(le != &(mm->mmap_list));
800136d0:	12220061 	beq	s1,v0,80013858 <vmm_init+0x24c>
800136d4:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:775
		struct vma_struct *mmap = le2vma(le, list_link);
		assert(mmap->vm_start == i * 5 && mmap->vm_end == i * 5 + 2);
800136d8:	8c44ffe4 	lw	a0,-28(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:372
	kfree(mm);
}

// vmm_init - initialize virtual memory management
//          - now just call check_vmm to check correctness of vmm
void vmm_init(void)
800136dc:	2465fffe 	addiu	a1,v1,-2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:775
	list_entry_t *le = list_next(&(mm->mmap_list));

	for (i = 0; i <= step2; i++) {
		assert(le != &(mm->mmap_list));
		struct vma_struct *mmap = le2vma(le, list_link);
		assert(mmap->vm_start == i * 5 && mmap->vm_end == i * 5 + 2);
800136e0:	14a4004e 	bne	a1,a0,8001381c <vmm_init+0x210>
800136e4:	3c048002 	lui	a0,0x8002
800136e8:	8c44ffe8 	lw	a0,-24(v0)
800136ec:	1483004a 	bne	a0,v1,80013818 <vmm_init+0x20c>
800136f0:	24630005 	addiu	v1,v1,5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:772
		insert_vma_struct(mm, vma);
	}

	list_entry_t *le = list_next(&(mm->mmap_list));

	for (i = 0; i <= step2; i++) {
800136f4:	1466fff6 	bne	v1,a2,800136d0 <vmm_init+0xc4>
800136f8:	8c420004 	lw	v0,4(v0)
800136fc:	00008021 	move	s0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:779
		struct vma_struct *mmap = le2vma(le, list_link);
		assert(mmap->vm_start == i * 5 && mmap->vm_end == i * 5 + 2);
		le = list_next(le);
	}

	for (i = 0; i < 5 * step2 + 2; i++) {
80013700:	24120c82 	li	s2,3202
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:780
		struct vma_struct *vma = find_vma(mm, i);
80013704:	02202021 	move	a0,s1
80013708:	0c004c89 	jal	80013224 <find_vma>
8001370c:	02002821 	move	a1,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:781
		assert(vma != NULL);
80013710:	10400060 	beqz	v0,80013894 <vmm_init+0x288>
80013714:	001018c2 	srl	v1,s0,0x3
__divu5():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:44
}

static inline unsigned __divu5(unsigned int n)
{
	unsigned int q, r;
	q = (n >> 3) + (n >> 4);
80013718:	00102102 	srl	a0,s0,0x4
8001371c:	00832021 	addu	a0,a0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:45
	q = q + (q >> 4);
80013720:	00041902 	srl	v1,a0,0x4
80013724:	00642021 	addu	a0,v1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:46
	q = q + (q >> 8);
80013728:	00041a02 	srl	v1,a0,0x8
8001372c:	00642021 	addu	a0,v1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:48
	q = q + (q >> 16);
	r = n - q * 5;
80013730:	00041880 	sll	v1,a0,0x2
80013734:	00641821 	addu	v1,v1,a0
80013738:	02031823 	subu	v1,s0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:49
	return q + (13 * r >> 6);
8001373c:	00032880 	sll	a1,v1,0x2
80013740:	00033100 	sll	a2,v1,0x4
80013744:	00c52823 	subu	a1,a2,a1
80013748:	00a31821 	addu	v1,a1,v1
8001374c:	00031982 	srl	v1,v1,0x6
80013750:	00642021 	addu	a0,v1,a0
check_vma_struct():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:783
		int j = __divu5(i);//i / 5;
		if (i >= 5 * j + 2) {
80013754:	00041880 	sll	v1,a0,0x2
80013758:	00641821 	addu	v1,v1,a0
8001375c:	24650001 	addiu	a1,v1,1
80013760:	00b0282a 	slt	a1,a1,s0
80013764:	50a00005 	beqzl	a1,8001377c <vmm_init+0x170>
80013768:	8c440004 	lw	a0,4(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:784
			j++;
8001376c:	24840001 	addiu	a0,a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:783

	for (i = 0; i < 5 * step2 + 2; i++) {
		struct vma_struct *vma = find_vma(mm, i);
		assert(vma != NULL);
		int j = __divu5(i);//i / 5;
		if (i >= 5 * j + 2) {
80013770:	00041880 	sll	v1,a0,0x2
80013774:	00641821 	addu	v1,v1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:786
			j++;
		}
		assert(vma->vm_start == j * 5 && vma->vm_end == j * 5 + 2);
80013778:	8c440004 	lw	a0,4(v0)
8001377c:	1483002e 	bne	a0,v1,80013838 <vmm_init+0x22c>
80013780:	24630002 	addiu	v1,v1,2
80013784:	8c420008 	lw	v0,8(v0)
80013788:	1443002b 	bne	v0,v1,80013838 <vmm_init+0x22c>
8001378c:	26100001 	addiu	s0,s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:779
		struct vma_struct *mmap = le2vma(le, list_link);
		assert(mmap->vm_start == i * 5 && mmap->vm_end == i * 5 + 2);
		le = list_next(le);
	}

	for (i = 0; i < 5 * step2 + 2; i++) {
80013790:	1612ffdd 	bne	s0,s2,80013708 <vmm_init+0xfc>
80013794:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:789
			j++;
		}
		assert(vma->vm_start == j * 5 && vma->vm_end == j * 5 + 2);
	}

	mm_destroy(mm);
80013798:	0c004d61 	jal	80013584 <mm_destroy>
8001379c:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:791

	__CHECK_MEMORY_LEAK();
800137a0:	0c00791a 	jal	8001e468 <nr_used_pages>
800137a4:	00000000 	nop
800137a8:	16c20051 	bne	s6,v0,800138f0 <vmm_init+0x2e4>
800137ac:	3c048002 	lui	a0,0x8002
800137b0:	0c005452 	jal	80015148 <slab_allocated>
800137b4:	00000000 	nop
800137b8:	56a20046 	bnel	s5,v0,800138d4 <vmm_init+0x2c8>
800137bc:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:793

	kprintf("check_vma_struct() succeeded!\n");
800137c0:	3c048002 	lui	a0,0x8002
800137c4:	0c007a9e 	jal	8001ea78 <kprintf>
800137c8:	248432cc 	addiu	a0,a0,13004
check_vmm():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:742
	size_t slab_allocated_store = slab_allocated();

	check_vma_struct();
	check_pgfault();

	__CHECK_MEMORY_LEAK();
800137cc:	0c00791a 	jal	8001e468 <nr_used_pages>
800137d0:	00000000 	nop
800137d4:	16820051 	bne	s4,v0,8001391c <vmm_init+0x310>
800137d8:	3c048002 	lui	a0,0x8002
800137dc:	0c005452 	jal	80015148 <slab_allocated>
800137e0:	00000000 	nop
800137e4:	16620049 	bne	s3,v0,8001390c <vmm_init+0x300>
800137e8:	8fbf002c 	lw	ra,44(sp)
vmm_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:375
// vmm_init - initialize virtual memory management
//          - now just call check_vmm to check correctness of vmm
void vmm_init(void)
{
	check_vmm();
}
800137ec:	8fb60028 	lw	s6,40(sp)
800137f0:	8fb50024 	lw	s5,36(sp)
800137f4:	8fb40020 	lw	s4,32(sp)
800137f8:	8fb3001c 	lw	s3,28(sp)
800137fc:	8fb20018 	lw	s2,24(sp)
80013800:	8fb10014 	lw	s1,20(sp)
80013804:	8fb00010 	lw	s0,16(sp)
check_vmm():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:744
	check_vma_struct();
	check_pgfault();

	__CHECK_MEMORY_LEAK();

	kprintf("check_vmm() succeeded.\n");
80013808:	3c048002 	lui	a0,0x8002
8001380c:	248432ec 	addiu	a0,a0,13036
80013810:	08007a9e 	j	8001ea78 <kprintf>
80013814:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:775
	list_entry_t *le = list_next(&(mm->mmap_list));

	for (i = 0; i <= step2; i++) {
		assert(le != &(mm->mmap_list));
		struct vma_struct *mmap = le2vma(le, list_link);
		assert(mmap->vm_start == i * 5 && mmap->vm_end == i * 5 + 2);
80013818:	3c048002 	lui	a0,0x8002
8001381c:	3c068002 	lui	a2,0x8002
80013820:	3c078002 	lui	a3,0x8002
80013824:	2484313c 	addiu	a0,a0,12604
80013828:	24050307 	li	a1,775
8001382c:	24c60e28 	addiu	a2,a2,3624
80013830:	0c006b0b 	jal	8001ac2c <__panic>
80013834:	24e73260 	addiu	a3,a3,12896
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:786
		assert(vma != NULL);
		int j = __divu5(i);//i / 5;
		if (i >= 5 * j + 2) {
			j++;
		}
		assert(vma->vm_start == j * 5 && vma->vm_end == j * 5 + 2);
80013838:	3c048002 	lui	a0,0x8002
8001383c:	3c068002 	lui	a2,0x8002
80013840:	3c078002 	lui	a3,0x8002
80013844:	2484313c 	addiu	a0,a0,12604
80013848:	24050312 	li	a1,786
8001384c:	24c60e28 	addiu	a2,a2,3624
80013850:	0c006b0b 	jal	8001ac2c <__panic>
80013854:	24e73298 	addiu	a3,a3,12952
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:773
	}

	list_entry_t *le = list_next(&(mm->mmap_list));

	for (i = 0; i <= step2; i++) {
		assert(le != &(mm->mmap_list));
80013858:	3c068002 	lui	a2,0x8002
8001385c:	3c078002 	lui	a3,0x8002
80013860:	2484313c 	addiu	a0,a0,12604
80013864:	24050305 	li	a1,773
80013868:	24c60e28 	addiu	a2,a2,3624
8001386c:	0c006b0b 	jal	8001ac2c <__panic>
80013870:	24e73248 	addiu	a3,a3,12872
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:766
		insert_vma_struct(mm, vma);
	}

	for (i = step1 + 1; i <= step2; i++) {
		struct vma_struct *vma = vma_create(i * 5, i * 5 + 2, 0);
		assert(vma != NULL);
80013874:	3c048002 	lui	a0,0x8002
80013878:	2484313c 	addiu	a0,a0,12604
8001387c:	240502fe 	li	a1,766
80013880:	3c068002 	lui	a2,0x8002
80013884:	3c078002 	lui	a3,0x8002
80013888:	24c60e28 	addiu	a2,a2,3624
8001388c:	0c006b0b 	jal	8001ac2c <__panic>
80013890:	24e7323c 	addiu	a3,a3,12860
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:781
		le = list_next(le);
	}

	for (i = 0; i < 5 * step2 + 2; i++) {
		struct vma_struct *vma = find_vma(mm, i);
		assert(vma != NULL);
80013894:	3c048002 	lui	a0,0x8002
80013898:	2484313c 	addiu	a0,a0,12604
8001389c:	08004e20 	j	80013880 <vmm_init+0x274>
800138a0:	2405030d 	li	a1,781
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:760
	int step1 = RB_MIN_MAP_COUNT * 2, step2 = step1 * 10;

	int i;
	for (i = step1; i >= 0; i--) {
		struct vma_struct *vma = vma_create(i * 5, i * 5 + 2, 0);
		assert(vma != NULL);
800138a4:	3c048002 	lui	a0,0x8002
800138a8:	2484313c 	addiu	a0,a0,12604
800138ac:	08004e20 	j	80013880 <vmm_init+0x274>
800138b0:	240502f8 	li	a1,760
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:753
{
	size_t nr_used_pages_store = nr_used_pages();
	size_t slab_allocated_store = slab_allocated();

	struct mm_struct *mm = mm_create();
	assert(mm != NULL);
800138b4:	3c048002 	lui	a0,0x8002
800138b8:	3c068002 	lui	a2,0x8002
800138bc:	3c078002 	lui	a3,0x8002
800138c0:	2484313c 	addiu	a0,a0,12604
800138c4:	240502f1 	li	a1,753
800138c8:	24c60e28 	addiu	a2,a2,3624
800138cc:	0c006b0b 	jal	8001ac2c <__panic>
800138d0:	24e73058 	addiu	a3,a3,12376
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:791
		assert(vma->vm_start == j * 5 && vma->vm_end == j * 5 + 2);
	}

	mm_destroy(mm);

	__CHECK_MEMORY_LEAK();
800138d4:	2484313c 	addiu	a0,a0,12604
800138d8:	24050317 	li	a1,791
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:742
	size_t slab_allocated_store = slab_allocated();

	check_vma_struct();
	check_pgfault();

	__CHECK_MEMORY_LEAK();
800138dc:	3c068002 	lui	a2,0x8002
800138e0:	3c078002 	lui	a3,0x8002
800138e4:	24c60e28 	addiu	a2,a2,3624
800138e8:	0c006b0b 	jal	8001ac2c <__panic>
800138ec:	24e72dfc 	addiu	a3,a3,11772
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:791
		assert(vma->vm_start == j * 5 && vma->vm_end == j * 5 + 2);
	}

	mm_destroy(mm);

	__CHECK_MEMORY_LEAK();
800138f0:	2484313c 	addiu	a0,a0,12604
800138f4:	24050317 	li	a1,791
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:742
	size_t slab_allocated_store = slab_allocated();

	check_vma_struct();
	check_pgfault();

	__CHECK_MEMORY_LEAK();
800138f8:	3c068002 	lui	a2,0x8002
800138fc:	3c078002 	lui	a3,0x8002
80013900:	24c60e28 	addiu	a2,a2,3624
80013904:	0c006b0b 	jal	8001ac2c <__panic>
80013908:	24e72dd4 	addiu	a3,a3,11732
8001390c:	3c048002 	lui	a0,0x8002
80013910:	2484313c 	addiu	a0,a0,12604
80013914:	08004e37 	j	800138dc <vmm_init+0x2d0>
80013918:	240502e6 	li	a1,742
8001391c:	2484313c 	addiu	a0,a0,12604
80013920:	08004e3e 	j	800138f8 <vmm_init+0x2ec>
80013924:	240502e6 	li	a1,742

80013928 <mm_map>:
mm_map():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:380
}

int
mm_map(struct mm_struct *mm, uintptr_t addr, size_t len, uint32_t vm_flags,
       struct vma_struct **vma_store)
{
80013928:	27bdffd0 	addiu	sp,sp,-48
8001392c:	afb10020 	sw	s1,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:382
	uintptr_t start = ROUNDDOWN(addr, PGSIZE), end =
	    ROUNDUP(addr + len, PGSIZE);
80013930:	24b10fff 	addiu	s1,a1,4095
80013934:	02268821 	addu	s1,s1,a2
80013938:	32220fff 	andi	v0,s1,0xfff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:380
}

int
mm_map(struct mm_struct *mm, uintptr_t addr, size_t len, uint32_t vm_flags,
       struct vma_struct **vma_store)
{
8001393c:	afb20024 	sw	s2,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:381
	uintptr_t start = ROUNDDOWN(addr, PGSIZE), end =
80013940:	2412f000 	li	s2,-4096
80013944:	00b29024 	and	s2,a1,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:382
	    ROUNDUP(addr + len, PGSIZE);
80013948:	02228823 	subu	s1,s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:383
	if (!USER_ACCESS(start, end)) {
8001394c:	0251102b 	sltu	v0,s2,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:380
}

int
mm_map(struct mm_struct *mm, uintptr_t addr, size_t len, uint32_t vm_flags,
       struct vma_struct **vma_store)
{
80013950:	afb30028 	sw	s3,40(sp)
80013954:	afb0001c 	sw	s0,28(sp)
80013958:	afbf002c 	sw	ra,44(sp)
8001395c:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:383
	uintptr_t start = ROUNDDOWN(addr, PGSIZE), end =
	    ROUNDUP(addr + len, PGSIZE);
	if (!USER_ACCESS(start, end)) {
80013960:	10400025 	beqz	v0,800139f8 <mm_map+0xd0>
80013964:	8fb30040 	lw	s3,64(sp)
80013968:	3c028000 	lui	v0,0x8000
8001396c:	24420001 	addiu	v0,v0,1
80013970:	0222102b 	sltu	v0,s1,v0
80013974:	10400019 	beqz	v0,800139dc <mm_map+0xb4>
80013978:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:387
		return -E_INVAL;
	}

	assert(mm != NULL);
8001397c:	10800020 	beqz	a0,80013a00 <mm_map+0xd8>
80013980:	02402821 	move	a1,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:392

	int ret = -E_INVAL;

	struct vma_struct *vma;
	if ((vma = find_vma(mm, start)) != NULL && end > vma->vm_start) {
80013984:	0c004c89 	jal	80013224 <find_vma>
80013988:	afa70010 	sw	a3,16(sp)
8001398c:	10400005 	beqz	v0,800139a4 <mm_map+0x7c>
80013990:	8fa70010 	lw	a3,16(sp)
80013994:	8c430004 	lw	v1,4(v0)
80013998:	0071182b 	sltu	v1,v1,s1
8001399c:	1460000f 	bnez	v1,800139dc <mm_map+0xb4>
800139a0:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:397
		goto out;
	}
	ret = -E_NO_MEM;
	vm_flags &= ~VM_SHARE;
	if ((vma = vma_create(start, end, vm_flags)) == NULL) {
800139a4:	2406ffef 	li	a2,-17
800139a8:	02202821 	move	a1,s1
800139ac:	02402021 	move	a0,s2
800139b0:	0c004c75 	jal	800131d4 <vma_create>
800139b4:	00e63024 	and	a2,a3,a2
800139b8:	00408821 	move	s1,v0
800139bc:	12200007 	beqz	s1,800139dc <mm_map+0xb4>
800139c0:	2402fff4 	li	v0,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:400
		goto out;
	}
	insert_vma_struct(mm, vma);
800139c4:	02002021 	move	a0,s0
800139c8:	0c004cde 	jal	80013378 <insert_vma_struct>
800139cc:	02202821 	move	a1,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:401
	if (vma_store != NULL) {
800139d0:	12600002 	beqz	s3,800139dc <mm_map+0xb4>
800139d4:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:402
		*vma_store = vma;
800139d8:	ae710000 	sw	s1,0(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:408
	}
	ret = 0;

out:
	return ret;
}
800139dc:	8fbf002c 	lw	ra,44(sp)
800139e0:	8fb30028 	lw	s3,40(sp)
800139e4:	8fb20024 	lw	s2,36(sp)
800139e8:	8fb10020 	lw	s1,32(sp)
800139ec:	8fb0001c 	lw	s0,28(sp)
800139f0:	03e00008 	jr	ra
800139f4:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:384
       struct vma_struct **vma_store)
{
	uintptr_t start = ROUNDDOWN(addr, PGSIZE), end =
	    ROUNDUP(addr + len, PGSIZE);
	if (!USER_ACCESS(start, end)) {
		return -E_INVAL;
800139f8:	08004e77 	j	800139dc <mm_map+0xb4>
800139fc:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:387
	}

	assert(mm != NULL);
80013a00:	3c048002 	lui	a0,0x8002
80013a04:	3c068002 	lui	a2,0x8002
80013a08:	3c078002 	lui	a3,0x8002
80013a0c:	2484313c 	addiu	a0,a0,12604
80013a10:	24050183 	li	a1,387
80013a14:	24c60e28 	addiu	a2,a2,3624
80013a18:	0c006b0b 	jal	8001ac2c <__panic>
80013a1c:	24e73058 	addiu	a3,a3,12376

80013a20 <mm_map_shmem>:
mm_map_shmem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:413
}

int
mm_map_shmem(struct mm_struct *mm, uintptr_t addr, uint32_t vm_flags,
	     struct shmem_struct *shmem, struct vma_struct **vma_store)
{
80013a20:	27bdffc8 	addiu	sp,sp,-56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:414
	if ((addr % PGSIZE) != 0 || shmem == NULL) {
80013a24:	30a30fff 	andi	v1,a1,0xfff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:413
}

int
mm_map_shmem(struct mm_struct *mm, uintptr_t addr, uint32_t vm_flags,
	     struct shmem_struct *shmem, struct vma_struct **vma_store)
{
80013a28:	afb20030 	sw	s2,48(sp)
80013a2c:	afb1002c 	sw	s1,44(sp)
80013a30:	afb00028 	sw	s0,40(sp)
80013a34:	afbf0034 	sw	ra,52(sp)
80013a38:	00c09021 	move	s2,a2
80013a3c:	00e08021 	move	s0,a3
80013a40:	8fb10048 	lw	s1,72(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:414
	if ((addr % PGSIZE) != 0 || shmem == NULL) {
80013a44:	14600019 	bnez	v1,80013aac <mm_map_shmem+0x8c>
80013a48:	2402ffea 	li	v0,-22
80013a4c:	10e00018 	beqz	a3,80013ab0 <mm_map_shmem+0x90>
80013a50:	8fbf0034 	lw	ra,52(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80013a54:	40026000 	mfc0	v0,c0_status
80013a58:	30420001 	andi	v0,v0,0x1
80013a5c:	54400019 	bnezl	v0,80013ac4 <mm_map_shmem+0xa4>
80013a60:	afa40020 	sw	a0,32(sp)
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
80013a64:	8ce20010 	lw	v0,16(a3)
mm_map_shmem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:420
		return -E_INVAL;
	}
	int ret;
	struct vma_struct *vma;
	shmem_ref_inc(shmem);
	if ((ret = mm_map(mm, addr, shmem->len, vm_flags, &vma)) != 0) {
80013a68:	8e06000c 	lw	a2,12(s0)
shmem_ref_inc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
80013a6c:	24420001 	addiu	v0,v0,1
80013a70:	ace20010 	sw	v0,16(a3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
80013a74:	8e020010 	lw	v0,16(s0)
mm_map_shmem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:420
80013a78:	02403821 	move	a3,s2
80013a7c:	27a20018 	addiu	v0,sp,24
80013a80:	0c004e4a 	jal	80013928 <mm_map>
80013a84:	afa20010 	sw	v0,16(sp)
80013a88:	1440001f 	bnez	v0,80013b08 <mm_map_shmem+0xe8>
80013a8c:	8fa30018 	lw	v1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:426
		shmem_ref_dec(shmem);
		return ret;
	}
	vma->shmem = shmem;
	vma->shmem_off = 0;
	vma->vm_flags |= VM_SHARE;
80013a90:	8c64000c 	lw	a0,12(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:424
	shmem_ref_inc(shmem);
	if ((ret = mm_map(mm, addr, shmem->len, vm_flags, &vma)) != 0) {
		shmem_ref_dec(shmem);
		return ret;
	}
	vma->shmem = shmem;
80013a94:	ac700028 	sw	s0,40(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:425
	vma->shmem_off = 0;
80013a98:	ac60002c 	sw	zero,44(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:426
	vma->vm_flags |= VM_SHARE;
80013a9c:	34840010 	ori	a0,a0,0x10
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:427
	if (vma_store != NULL) {
80013aa0:	12200002 	beqz	s1,80013aac <mm_map_shmem+0x8c>
80013aa4:	ac64000c 	sw	a0,12(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:428
		*vma_store = vma;
80013aa8:	ae230000 	sw	v1,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:431
	}
	return 0;
}
80013aac:	8fbf0034 	lw	ra,52(sp)
80013ab0:	8fb20030 	lw	s2,48(sp)
80013ab4:	8fb1002c 	lw	s1,44(sp)
80013ab8:	8fb00028 	lw	s0,40(sp)
80013abc:	03e00008 	jr	ra
80013ac0:	27bd0038 	addiu	sp,sp,56
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80013ac4:	0c006d04 	jal	8001b410 <intr_disable>
80013ac8:	afa50024 	sw	a1,36(sp)
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
80013acc:	8e020010 	lw	v0,16(s0)
80013ad0:	24420001 	addiu	v0,v0,1
80013ad4:	ae020010 	sw	v0,16(s0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80013ad8:	0c006d00 	jal	8001b400 <intr_enable>
80013adc:	00000000 	nop
mm_map_shmem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:420
		return -E_INVAL;
	}
	int ret;
	struct vma_struct *vma;
	shmem_ref_inc(shmem);
	if ((ret = mm_map(mm, addr, shmem->len, vm_flags, &vma)) != 0) {
80013ae0:	8e06000c 	lw	a2,12(s0)
80013ae4:	8fa40020 	lw	a0,32(sp)
80013ae8:	8fa50024 	lw	a1,36(sp)
shmem_ref_inc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
80013aec:	8e020010 	lw	v0,16(s0)
mm_map_shmem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:420
80013af0:	02403821 	move	a3,s2
80013af4:	27a20018 	addiu	v0,sp,24
80013af8:	0c004e4a 	jal	80013928 <mm_map>
80013afc:	afa20010 	sw	v0,16(sp)
80013b00:	1040ffe3 	beqz	v0,80013a90 <mm_map_shmem+0x70>
80013b04:	8fa30018 	lw	v1,24(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80013b08:	40036000 	mfc0	v1,c0_status
80013b0c:	30630001 	andi	v1,v1,0x1
80013b10:	1460000b 	bnez	v1,80013b40 <mm_map_shmem+0x120>
80013b14:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
80013b18:	8e030010 	lw	v1,16(s0)
80013b1c:	2463ffff 	addiu	v1,v1,-1
80013b20:	ae030010 	sw	v1,16(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
80013b24:	8e030010 	lw	v1,16(s0)
mm_map_shmem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:431
	vma->vm_flags |= VM_SHARE;
	if (vma_store != NULL) {
		*vma_store = vma;
	}
	return 0;
}
80013b28:	8fbf0034 	lw	ra,52(sp)
80013b2c:	8fb20030 	lw	s2,48(sp)
80013b30:	8fb1002c 	lw	s1,44(sp)
80013b34:	8fb00028 	lw	s0,40(sp)
80013b38:	03e00008 	jr	ra
80013b3c:	27bd0038 	addiu	sp,sp,56
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80013b40:	0c006d04 	jal	8001b410 <intr_disable>
80013b44:	afa20020 	sw	v0,32(sp)
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
80013b48:	8e030010 	lw	v1,16(s0)
80013b4c:	2463ffff 	addiu	v1,v1,-1
80013b50:	ae030010 	sw	v1,16(s0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80013b54:	0c006d00 	jal	8001b400 <intr_enable>
80013b58:	00000000 	nop
80013b5c:	8fa20020 	lw	v0,32(sp)
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
80013b60:	8e030010 	lw	v1,16(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:431
80013b64:	08004ecb 	j	80013b2c <mm_map_shmem+0x10c>
80013b68:	8fbf0034 	lw	ra,52(sp)

80013b6c <mm_unmap>:
mm_unmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:450

	vma->vm_start = start, vma->vm_end = end;
}

int mm_unmap(struct mm_struct *mm, uintptr_t addr, size_t len)
{
80013b6c:	27bdffc0 	addiu	sp,sp,-64
80013b70:	afb20024 	sw	s2,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:452
	uintptr_t start = ROUNDDOWN(addr, PGSIZE), end =
	    ROUNDUP(addr + len, PGSIZE);
80013b74:	24b20fff 	addiu	s2,a1,4095
80013b78:	02469021 	addu	s2,s2,a2
80013b7c:	32420fff 	andi	v0,s2,0xfff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:450

	vma->vm_start = start, vma->vm_end = end;
}

int mm_unmap(struct mm_struct *mm, uintptr_t addr, size_t len)
{
80013b80:	afb30028 	sw	s3,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:451
	uintptr_t start = ROUNDDOWN(addr, PGSIZE), end =
80013b84:	2413f000 	li	s3,-4096
80013b88:	00b39824 	and	s3,a1,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:452
	    ROUNDUP(addr + len, PGSIZE);
80013b8c:	02429023 	subu	s2,s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:453
	if (!USER_ACCESS(start, end)) {
80013b90:	0272102b 	sltu	v0,s3,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:450

	vma->vm_start = start, vma->vm_end = end;
}

int mm_unmap(struct mm_struct *mm, uintptr_t addr, size_t len)
{
80013b94:	afb10020 	sw	s1,32(sp)
80013b98:	afbf003c 	sw	ra,60(sp)
80013b9c:	afb70038 	sw	s7,56(sp)
80013ba0:	afb60034 	sw	s6,52(sp)
80013ba4:	afb50030 	sw	s5,48(sp)
80013ba8:	afb4002c 	sw	s4,44(sp)
80013bac:	afb0001c 	sw	s0,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:453
	uintptr_t start = ROUNDDOWN(addr, PGSIZE), end =
	    ROUNDUP(addr + len, PGSIZE);
	if (!USER_ACCESS(start, end)) {
80013bb0:	10400090 	beqz	v0,80013df4 <mm_unmap+0x288>
80013bb4:	00808821 	move	s1,a0
80013bb8:	3c028000 	lui	v0,0x8000
80013bbc:	24420001 	addiu	v0,v0,1
80013bc0:	0242102b 	sltu	v0,s2,v0
80013bc4:	10400060 	beqz	v0,80013d48 <mm_unmap+0x1dc>
80013bc8:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:457
		return -E_INVAL;
	}

	assert(mm != NULL);
80013bcc:	50800093 	beqzl	a0,80013e1c <mm_unmap+0x2b0>
80013bd0:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:460

	struct vma_struct *vma;
	if ((vma = find_vma(mm, start)) == NULL || end <= vma->vm_start) {
80013bd4:	0c004c89 	jal	80013224 <find_vma>
80013bd8:	02602821 	move	a1,s3
80013bdc:	10400059 	beqz	v0,80013d44 <mm_unmap+0x1d8>
80013be0:	00408021 	move	s0,v0
80013be4:	8c440004 	lw	a0,4(v0)
80013be8:	0092102b 	sltu	v0,a0,s2
80013bec:	10400055 	beqz	v0,80013d44 <mm_unmap+0x1d8>
80013bf0:	0093102b 	sltu	v0,a0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:464
		return 0;
	}

	if (vma->vm_start < start && end < vma->vm_end) {
80013bf4:	5440005f 	bnezl	v0,80013d74 <mm_unmap+0x208>
80013bf8:	8e020008 	lw	v0,8(s0)
remove_vma_struct():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:343
}

// remove_vma_struct - remove vma from mm's rb tree link & list link
static int remove_vma_struct(struct mm_struct *mm, struct vma_struct *vma)
{
	assert(mm == vma->vm_mm);
80013bfc:	8e020000 	lw	v0,0(s0)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
 * list_init - initialize a new entry
 * @elm:        new entry to be initialized
 * */
static inline void list_init(list_entry_t * elm)
{
	elm->prev = elm->next = elm;
80013c00:	27b60010 	addiu	s6,sp,16
80013c04:	afb60014 	sw	s6,20(sp)
80013c08:	afb60010 	sw	s6,16(sp)
remove_vma_struct():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:343
80013c0c:	12220014 	beq	s1,v0,80013c60 <mm_unmap+0xf4>
80013c10:	8e140024 	lw	s4,36(s0)
80013c14:	08004f80 	j	80013e00 <mm_unmap+0x294>
80013c18:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:351
	}
	list_del(&(vma->list_link));
	if (vma == mm->mmap_cache) {
		mm->mmap_cache = NULL;
	}
	mm->map_count--;
80013c1c:	8e240014 	lw	a0,20(s1)
list_add_after():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:93
 * Insert the new element @elm *after* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_after(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm, listelm->next);
80013c20:	8fa20014 	lw	v0,20(sp)
mm_unmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:484
	list_entry_t free_list, *le;
	list_init(&free_list);
	while (vma->vm_start < end) {
		le = list_next(&(vma->list_link));
		remove_vma_struct(mm, vma);
		list_add(&free_list, &(vma->list_link));
80013c24:	26030020 	addiu	v1,s0,32
remove_vma_struct():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:351
	}
	list_del(&(vma->list_link));
	if (vma == mm->mmap_cache) {
		mm->mmap_cache = NULL;
	}
	mm->map_count--;
80013c28:	2484ffff 	addiu	a0,a0,-1
80013c2c:	ae240014 	sw	a0,20(s1)
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
80013c30:	afa30014 	sw	v1,20(sp)
80013c34:	ac430000 	sw	v1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
	elm->next = next;
80013c38:	ae020024 	sw	v0,36(s0)
mm_unmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:485
	list_init(&free_list);
	while (vma->vm_start < end) {
		le = list_next(&(vma->list_link));
		remove_vma_struct(mm, vma);
		list_add(&free_list, &(vma->list_link));
		if (le == &(mm->mmap_list)) {
80013c3c:	1234001e 	beq	s1,s4,80013cb8 <mm_unmap+0x14c>
80013c40:	ae160020 	sw	s6,32(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:481
		return 0;
	}

	list_entry_t free_list, *le;
	list_init(&free_list);
	while (vma->vm_start < end) {
80013c44:	8e82ffe4 	lw	v0,-28(s4)
80013c48:	0052102b 	sltu	v0,v0,s2
80013c4c:	1040001a 	beqz	v0,80013cb8 <mm_unmap+0x14c>
80013c50:	2690ffe0 	addiu	s0,s4,-32
remove_vma_struct():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:343
}

// remove_vma_struct - remove vma from mm's rb tree link & list link
static int remove_vma_struct(struct mm_struct *mm, struct vma_struct *vma)
{
	assert(mm == vma->vm_mm);
80013c54:	8e82ffe0 	lw	v0,-32(s4)
80013c58:	16220068 	bne	s1,v0,80013dfc <mm_unmap+0x290>
80013c5c:	8e940004 	lw	s4,4(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:344
	if (mm->mmap_tree != NULL) {
80013c60:	8e240008 	lw	a0,8(s1)
80013c64:	50800004 	beqzl	a0,80013c78 <mm_unmap+0x10c>
80013c68:	8e030020 	lw	v1,32(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:345
		rb_delete(mm->mmap_tree, &(vma->rb_link));
80013c6c:	0c005626 	jal	80015898 <rb_delete>
80013c70:	26050010 	addiu	a1,s0,16
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
80013c74:	8e030020 	lw	v1,32(s0)
80013c78:	8e020024 	lw	v0,36(s0)
remove_vma_struct():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:348
	}
	list_del(&(vma->list_link));
	if (vma == mm->mmap_cache) {
80013c7c:	8e24000c 	lw	a0,12(s1)
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
80013c80:	ac620004 	sw	v0,4(v1)
remove_vma_struct():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:348
80013c84:	1604ffe5 	bne	s0,a0,80013c1c <mm_unmap+0xb0>
80013c88:	ac430000 	sw	v1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:351
		mm->mmap_cache = NULL;
	}
	mm->map_count--;
80013c8c:	8e240014 	lw	a0,20(s1)
list_add_after():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:93
 * Insert the new element @elm *after* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_after(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm, listelm->next);
80013c90:	8fa20014 	lw	v0,20(sp)
mm_unmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:484
	list_entry_t free_list, *le;
	list_init(&free_list);
	while (vma->vm_start < end) {
		le = list_next(&(vma->list_link));
		remove_vma_struct(mm, vma);
		list_add(&free_list, &(vma->list_link));
80013c94:	26030020 	addiu	v1,s0,32
remove_vma_struct():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:351
	}
	list_del(&(vma->list_link));
	if (vma == mm->mmap_cache) {
		mm->mmap_cache = NULL;
	}
	mm->map_count--;
80013c98:	2484ffff 	addiu	a0,a0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:349
	if (mm->mmap_tree != NULL) {
		rb_delete(mm->mmap_tree, &(vma->rb_link));
	}
	list_del(&(vma->list_link));
	if (vma == mm->mmap_cache) {
		mm->mmap_cache = NULL;
80013c9c:	ae20000c 	sw	zero,12(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:351
	}
	mm->map_count--;
80013ca0:	ae240014 	sw	a0,20(s1)
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
80013ca4:	afa30014 	sw	v1,20(sp)
80013ca8:	ac430000 	sw	v1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
	elm->next = next;
80013cac:	ae020024 	sw	v0,36(s0)
mm_unmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:485
	list_init(&free_list);
	while (vma->vm_start < end) {
		le = list_next(&(vma->list_link));
		remove_vma_struct(mm, vma);
		list_add(&free_list, &(vma->list_link));
		if (le == &(mm->mmap_list)) {
80013cb0:	1634ffe4 	bne	s1,s4,80013c44 <mm_unmap+0xd8>
80013cb4:	ae160020 	sw	s6,32(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:492
		}
		vma = le2vma(le, list_link);
	}

	le = list_next(&free_list);
	while (le != &free_list) {
80013cb8:	16c30011 	bne	s6,v1,80013d00 <mm_unmap+0x194>
80013cbc:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:516
			}
		}
		unmap_range(mm->pgdir, un_start, un_end);
	}
	return 0;
}
80013cc0:	08004f53 	j	80013d4c <mm_unmap+0x1e0>
80013cc4:	8fbf003c 	lw	ra,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:504
			insert_vma_struct(mm, vma);
		} else {
			un_start = vma->vm_start, un_end = vma->vm_end;
			if (end < un_end) {
				un_end = end;
				vma_resize(vma, un_end, vma->vm_end);
80013cc8:	02e02021 	move	a0,s7
80013ccc:	0c004bd0 	jal	80012f40 <vma_resize>
80013cd0:	02402821 	move	a1,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:505
				insert_vma_struct(mm, vma);
80013cd4:	02202021 	move	a0,s1
80013cd8:	0c004cde 	jal	80013378 <insert_vma_struct>
80013cdc:	02e02821 	move	a1,s7
80013ce0:	0240a021 	move	s4,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:513
				vma_unmapfile(vma);
#endif //UCONFIG_BIONIC_LIBC
				vma_destroy(vma);
			}
		}
		unmap_range(mm->pgdir, un_start, un_end);
80013ce4:	8e240010 	lw	a0,16(s1)
80013ce8:	02002821 	move	a1,s0
80013cec:	0c005e84 	jal	80017a10 <unmap_range>
80013cf0:	02803021 	move	a2,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:492
		}
		vma = le2vma(le, list_link);
	}

	le = list_next(&free_list);
	while (le != &free_list) {
80013cf4:	12d50014 	beq	s6,s5,80013d48 <mm_unmap+0x1dc>
80013cf8:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:494
		vma = le2vma(le, list_link);
		le = list_next(le);
80013cfc:	02a01821 	move	v1,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:496
		uintptr_t un_start, un_end;
		if (vma->vm_start < start) {
80013d00:	8c70ffe4 	lw	s0,-28(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:493
		vma = le2vma(le, list_link);
	}

	le = list_next(&free_list);
	while (le != &free_list) {
		vma = le2vma(le, list_link);
80013d04:	2477ffe0 	addiu	s7,v1,-32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:496
		le = list_next(le);
		uintptr_t un_start, un_end;
		if (vma->vm_start < start) {
80013d08:	0213102b 	sltu	v0,s0,s3
80013d0c:	1440002f 	bnez	v0,80013dcc <mm_unmap+0x260>
80013d10:	8c750004 	lw	s5,4(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:501
			un_start = start, un_end = vma->vm_end;
			vma_resize(vma, vma->vm_start, un_start);
			insert_vma_struct(mm, vma);
		} else {
			un_start = vma->vm_start, un_end = vma->vm_end;
80013d14:	8c74ffe8 	lw	s4,-24(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:502
			if (end < un_end) {
80013d18:	0254102b 	sltu	v0,s2,s4
80013d1c:	1440ffea 	bnez	v0,80013cc8 <mm_unmap+0x15c>
80013d20:	02803021 	move	a2,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:510
				insert_vma_struct(mm, vma);
			} else {
#ifdef UCONFIG_BIONIC_LIBC
				vma_unmapfile(vma);
#endif //UCONFIG_BIONIC_LIBC
				vma_destroy(vma);
80013d24:	0c004bfc 	jal	80012ff0 <vma_destroy>
80013d28:	02e02021 	move	a0,s7
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:513
			}
		}
		unmap_range(mm->pgdir, un_start, un_end);
80013d2c:	8e240010 	lw	a0,16(s1)
80013d30:	02002821 	move	a1,s0
80013d34:	0c005e84 	jal	80017a10 <unmap_range>
80013d38:	02803021 	move	a2,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:492
		}
		vma = le2vma(le, list_link);
	}

	le = list_next(&free_list);
	while (le != &free_list) {
80013d3c:	16d5fff0 	bne	s6,s5,80013d00 <mm_unmap+0x194>
80013d40:	02a01821 	move	v1,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:461

	assert(mm != NULL);

	struct vma_struct *vma;
	if ((vma = find_vma(mm, start)) == NULL || end <= vma->vm_start) {
		return 0;
80013d44:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:516
			}
		}
		unmap_range(mm->pgdir, un_start, un_end);
	}
	return 0;
}
80013d48:	8fbf003c 	lw	ra,60(sp)
80013d4c:	8fb70038 	lw	s7,56(sp)
80013d50:	8fb60034 	lw	s6,52(sp)
80013d54:	8fb50030 	lw	s5,48(sp)
80013d58:	8fb4002c 	lw	s4,44(sp)
80013d5c:	8fb30028 	lw	s3,40(sp)
80013d60:	8fb20024 	lw	s2,36(sp)
80013d64:	8fb10020 	lw	s1,32(sp)
80013d68:	8fb0001c 	lw	s0,28(sp)
80013d6c:	03e00008 	jr	ra
80013d70:	27bd0040 	addiu	sp,sp,64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:464
	struct vma_struct *vma;
	if ((vma = find_vma(mm, start)) == NULL || end <= vma->vm_start) {
		return 0;
	}

	if (vma->vm_start < start && end < vma->vm_end) {
80013d74:	0242102b 	sltu	v0,s2,v0
80013d78:	5040ffa1 	beqzl	v0,80013c00 <mm_unmap+0x94>
80013d7c:	8e020000 	lw	v0,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:466
		struct vma_struct *nvma;
		if ((nvma =
80013d80:	8e06000c 	lw	a2,12(s0)
80013d84:	0c004c75 	jal	800131d4 <vma_create>
80013d88:	02602821 	move	a1,s3
80013d8c:	0040a021 	move	s4,v0
80013d90:	1280ffed 	beqz	s4,80013d48 <mm_unmap+0x1dc>
80013d94:	2402fff4 	li	v0,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:473
			return -E_NO_MEM;
		}
#ifdef UCONFIG_BIONIC_LIBC
		vma_copymapfile(nvma, vma);
#endif //UCONFIG_BIONIC_LIBC
		vma_resize(vma, end, vma->vm_end);
80013d98:	8e060008 	lw	a2,8(s0)
80013d9c:	02002021 	move	a0,s0
80013da0:	0c004bd0 	jal	80012f40 <vma_resize>
80013da4:	02402821 	move	a1,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:474
		insert_vma_struct(mm, nvma);
80013da8:	02202021 	move	a0,s1
80013dac:	0c004cde 	jal	80013378 <insert_vma_struct>
80013db0:	02802821 	move	a1,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:475
		unmap_range(mm->pgdir, start, end);
80013db4:	8e240010 	lw	a0,16(s1)
80013db8:	02602821 	move	a1,s3
80013dbc:	0c005e84 	jal	80017a10 <unmap_range>
80013dc0:	02403021 	move	a2,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:476
		return 0;
80013dc4:	08004f52 	j	80013d48 <mm_unmap+0x1dc>
80013dc8:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:498
		vma = le2vma(le, list_link);
		le = list_next(le);
		uintptr_t un_start, un_end;
		if (vma->vm_start < start) {
			un_start = start, un_end = vma->vm_end;
			vma_resize(vma, vma->vm_start, un_start);
80013dcc:	02002821 	move	a1,s0
80013dd0:	02603021 	move	a2,s3
80013dd4:	02e02021 	move	a0,s7
80013dd8:	0c004bd0 	jal	80012f40 <vma_resize>
80013ddc:	8c74ffe8 	lw	s4,-24(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:499
			insert_vma_struct(mm, vma);
80013de0:	02202021 	move	a0,s1
80013de4:	0c004cde 	jal	80013378 <insert_vma_struct>
80013de8:	02e02821 	move	a1,s7
80013dec:	08004f39 	j	80013ce4 <mm_unmap+0x178>
80013df0:	02608021 	move	s0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:454
int mm_unmap(struct mm_struct *mm, uintptr_t addr, size_t len)
{
	uintptr_t start = ROUNDDOWN(addr, PGSIZE), end =
	    ROUNDUP(addr + len, PGSIZE);
	if (!USER_ACCESS(start, end)) {
		return -E_INVAL;
80013df4:	08004f52 	j	80013d48 <mm_unmap+0x1dc>
80013df8:	2402ffea 	li	v0,-22
remove_vma_struct():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:343
}

// remove_vma_struct - remove vma from mm's rb tree link & list link
static int remove_vma_struct(struct mm_struct *mm, struct vma_struct *vma)
{
	assert(mm == vma->vm_mm);
80013dfc:	3c048002 	lui	a0,0x8002
80013e00:	3c068002 	lui	a2,0x8002
80013e04:	3c078002 	lui	a3,0x8002
80013e08:	2484313c 	addiu	a0,a0,12604
80013e0c:	24050157 	li	a1,343
80013e10:	24c60e28 	addiu	a2,a2,3624
80013e14:	0c006b0b 	jal	8001ac2c <__panic>
80013e18:	24e73304 	addiu	a3,a3,13060
mm_unmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:457
	    ROUNDUP(addr + len, PGSIZE);
	if (!USER_ACCESS(start, end)) {
		return -E_INVAL;
	}

	assert(mm != NULL);
80013e1c:	3c068002 	lui	a2,0x8002
80013e20:	3c078002 	lui	a3,0x8002
80013e24:	2484313c 	addiu	a0,a0,12604
80013e28:	240501c9 	li	a1,457
80013e2c:	24c60e28 	addiu	a2,a2,3624
80013e30:	0c006b0b 	jal	8001ac2c <__panic>
80013e34:	24e73058 	addiu	a3,a3,12376

80013e38 <dup_mmap>:
dup_mmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:587
	return 0;
}
#endif //UCONFIG_BIONIC_LIBC

int dup_mmap(struct mm_struct *to, struct mm_struct *from)
{
80013e38:	27bdffc8 	addiu	sp,sp,-56
80013e3c:	afb2002c 	sw	s2,44(sp)
80013e40:	afb10028 	sw	s1,40(sp)
80013e44:	afbf0034 	sw	ra,52(sp)
80013e48:	afb30030 	sw	s3,48(sp)
80013e4c:	afb00024 	sw	s0,36(sp)
80013e50:	00809021 	move	s2,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:588
	assert(to != NULL && from != NULL);
80013e54:	10800052 	beqz	a0,80013fa0 <dup_mmap+0x168>
80013e58:	00a08821 	move	s1,a1
80013e5c:	14a0000f 	bnez	a1,80013e9c <dup_mmap+0x64>
80013e60:	00a08021 	move	s0,a1
80013e64:	08004fe9 	j	80013fa4 <dup_mmap+0x16c>
80013e68:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:606
			}
#ifdef UCONFIG_BIONIC_LIBC
			nvma->mfile = vma->mfile;
#endif //UCONFIG_BIONIC_LIBC
		}
		insert_vma_struct(to, nvma);
80013e6c:	0c004cde 	jal	80013378 <insert_vma_struct>
80013e70:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:607
		bool share = (vma->vm_flags & VM_SHARE);
80013e74:	8e02ffec 	lw	v0,-20(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:609
		if (copy_range
		    (to->pgdir, from->pgdir, vma->vm_start, vma->vm_end,
80013e78:	8e06ffe4 	lw	a2,-28(s0)
80013e7c:	8e07ffe8 	lw	a3,-24(s0)
80013e80:	8e440010 	lw	a0,16(s2)
80013e84:	8e250010 	lw	a1,16(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:607
#ifdef UCONFIG_BIONIC_LIBC
			nvma->mfile = vma->mfile;
#endif //UCONFIG_BIONIC_LIBC
		}
		insert_vma_struct(to, nvma);
		bool share = (vma->vm_flags & VM_SHARE);
80013e88:	30420010 	andi	v0,v0,0x10
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:609
		if (copy_range
		    (to->pgdir, from->pgdir, vma->vm_start, vma->vm_end,
80013e8c:	0c005f5c 	jal	80017d70 <copy_range>
80013e90:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:608
			nvma->mfile = vma->mfile;
#endif //UCONFIG_BIONIC_LIBC
		}
		insert_vma_struct(to, nvma);
		bool share = (vma->vm_flags & VM_SHARE);
		if (copy_range
80013e94:	14400029 	bnez	v0,80013f3c <dup_mmap+0x104>
80013e98:	8fbf0034 	lw	ra,52(sp)
list_prev():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:144
 * list_prev - get the previous entry
 * @listelm:    the list head
 **/
static list_entry_t *list_prev(list_entry_t * listelm)
{
	return listelm->prev;
80013e9c:	8e100000 	lw	s0,0(s0)
dup_mmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:590

int dup_mmap(struct mm_struct *to, struct mm_struct *from)
{
	assert(to != NULL && from != NULL);
	list_entry_t *list = &(from->mmap_list), *le = list;
	while ((le = list_prev(le)) != list) {
80013ea0:	12300038 	beq	s1,s0,80013f84 <dup_mmap+0x14c>
80013ea4:	8fbf0034 	lw	ra,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:593
		struct vma_struct *vma, *nvma;
		vma = le2vma(le, list_link);
		nvma = vma_create(vma->vm_start, vma->vm_end, vma->vm_flags);
80013ea8:	8e04ffe4 	lw	a0,-28(s0)
80013eac:	8e05ffe8 	lw	a1,-24(s0)
80013eb0:	0c004c75 	jal	800131d4 <vma_create>
80013eb4:	8e06ffec 	lw	a2,-20(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:594
		if (nvma == NULL) {
80013eb8:	10400020 	beqz	v0,80013f3c <dup_mmap+0x104>
80013ebc:	8fbf0034 	lw	ra,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:597
			return -E_NO_MEM;
		} else {
			if (vma->vm_flags & VM_SHARE) {
80013ec0:	8e03ffec 	lw	v1,-20(s0)
80013ec4:	30630010 	andi	v1,v1,0x10
80013ec8:	1060ffe8 	beqz	v1,80013e6c <dup_mmap+0x34>
80013ecc:	00402821 	move	a1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:598
				nvma->shmem = vma->shmem;
80013ed0:	8e040008 	lw	a0,8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:599
				nvma->shmem_off = vma->shmem_off;
80013ed4:	8e03000c 	lw	v1,12(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:598
		nvma = vma_create(vma->vm_start, vma->vm_end, vma->vm_flags);
		if (nvma == NULL) {
			return -E_NO_MEM;
		} else {
			if (vma->vm_flags & VM_SHARE) {
				nvma->shmem = vma->shmem;
80013ed8:	ac440028 	sw	a0,40(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:599
				nvma->shmem_off = vma->shmem_off;
80013edc:	ac43002c 	sw	v1,44(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:600
				shmem_ref_inc(vma->shmem);
80013ee0:	8e130008 	lw	s3,8(s0)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80013ee4:	40036000 	mfc0	v1,c0_status
80013ee8:	30630001 	andi	v1,v1,0x1
80013eec:	1460001a 	bnez	v1,80013f58 <dup_mmap+0x120>
80013ef0:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
80013ef4:	8e630010 	lw	v1,16(s3)
80013ef8:	24630001 	addiu	v1,v1,1
80013efc:	ae630010 	sw	v1,16(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
80013f00:	8e630010 	lw	v1,16(s3)
dup_mmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:606
			}
#ifdef UCONFIG_BIONIC_LIBC
			nvma->mfile = vma->mfile;
#endif //UCONFIG_BIONIC_LIBC
		}
		insert_vma_struct(to, nvma);
80013f04:	00402821 	move	a1,v0
80013f08:	0c004cde 	jal	80013378 <insert_vma_struct>
80013f0c:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:607
		bool share = (vma->vm_flags & VM_SHARE);
80013f10:	8e02ffec 	lw	v0,-20(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:609
		if (copy_range
		    (to->pgdir, from->pgdir, vma->vm_start, vma->vm_end,
80013f14:	8e06ffe4 	lw	a2,-28(s0)
80013f18:	8e07ffe8 	lw	a3,-24(s0)
80013f1c:	8e440010 	lw	a0,16(s2)
80013f20:	8e250010 	lw	a1,16(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:607
#ifdef UCONFIG_BIONIC_LIBC
			nvma->mfile = vma->mfile;
#endif //UCONFIG_BIONIC_LIBC
		}
		insert_vma_struct(to, nvma);
		bool share = (vma->vm_flags & VM_SHARE);
80013f24:	30420010 	andi	v0,v0,0x10
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:609
		if (copy_range
		    (to->pgdir, from->pgdir, vma->vm_start, vma->vm_end,
80013f28:	0c005f5c 	jal	80017d70 <copy_range>
80013f2c:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:608
			nvma->mfile = vma->mfile;
#endif //UCONFIG_BIONIC_LIBC
		}
		insert_vma_struct(to, nvma);
		bool share = (vma->vm_flags & VM_SHARE);
		if (copy_range
80013f30:	5040ffdb 	beqzl	v0,80013ea0 <dup_mmap+0x68>
80013f34:	8e100000 	lw	s0,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:615
		     share) != 0) {
			return -E_NO_MEM;
		}
	}
	return 0;
}
80013f38:	8fbf0034 	lw	ra,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:611
		insert_vma_struct(to, nvma);
		bool share = (vma->vm_flags & VM_SHARE);
		if (copy_range
		    (to->pgdir, from->pgdir, vma->vm_start, vma->vm_end,
		     share) != 0) {
			return -E_NO_MEM;
80013f3c:	2402fff4 	li	v0,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:615
		}
	}
	return 0;
}
80013f40:	8fb30030 	lw	s3,48(sp)
80013f44:	8fb2002c 	lw	s2,44(sp)
80013f48:	8fb10028 	lw	s1,40(sp)
80013f4c:	8fb00024 	lw	s0,36(sp)
80013f50:	03e00008 	jr	ra
80013f54:	27bd0038 	addiu	sp,sp,56
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80013f58:	0c006d04 	jal	8001b410 <intr_disable>
80013f5c:	afa20018 	sw	v0,24(sp)
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
80013f60:	8e630010 	lw	v1,16(s3)
80013f64:	24630001 	addiu	v1,v1,1
80013f68:	ae630010 	sw	v1,16(s3)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80013f6c:	0c006d00 	jal	8001b400 <intr_enable>
80013f70:	00000000 	nop
80013f74:	8fa20018 	lw	v0,24(sp)
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
80013f78:	8e630010 	lw	v1,16(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:606
			}
#ifdef UCONFIG_BIONIC_LIBC
			nvma->mfile = vma->mfile;
#endif //UCONFIG_BIONIC_LIBC
		}
		insert_vma_struct(to, nvma);
80013f7c:	08004fc2 	j	80013f08 <dup_mmap+0xd0>
80013f80:	00402821 	move	a1,v0
dup_mmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:614
		    (to->pgdir, from->pgdir, vma->vm_start, vma->vm_end,
		     share) != 0) {
			return -E_NO_MEM;
		}
	}
	return 0;
80013f84:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:615
}
80013f88:	8fb30030 	lw	s3,48(sp)
80013f8c:	8fb2002c 	lw	s2,44(sp)
80013f90:	8fb10028 	lw	s1,40(sp)
80013f94:	8fb00024 	lw	s0,36(sp)
80013f98:	03e00008 	jr	ra
80013f9c:	27bd0038 	addiu	sp,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:588
}
#endif //UCONFIG_BIONIC_LIBC

int dup_mmap(struct mm_struct *to, struct mm_struct *from)
{
	assert(to != NULL && from != NULL);
80013fa0:	3c048002 	lui	a0,0x8002
80013fa4:	3c068002 	lui	a2,0x8002
80013fa8:	3c078002 	lui	a3,0x8002
80013fac:	2484313c 	addiu	a0,a0,12604
80013fb0:	2405024c 	li	a1,588
80013fb4:	24c60e28 	addiu	a2,a2,3624
80013fb8:	0c006b0b 	jal	8001ac2c <__panic>
80013fbc:	24e728a8 	addiu	a3,a3,10408

80013fc0 <exit_mmap>:
exit_mmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:618
	}
	return 0;
}

void exit_mmap(struct mm_struct *mm)
{
80013fc0:	27bdffe0 	addiu	sp,sp,-32
80013fc4:	afb10014 	sw	s1,20(sp)
80013fc8:	afbf001c 	sw	ra,28(sp)
80013fcc:	afb20018 	sw	s2,24(sp)
80013fd0:	afb00010 	sw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:619
	assert(mm != NULL && mm_count(mm) == 0);
80013fd4:	1080001e 	beqz	a0,80014050 <exit_mmap+0x90>
80013fd8:	00808821 	move	s1,a0
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
 *
 * Atomically reads the value of @v.
 * */
static __always_inline int atomic_read(const atomic_t * v)
{
	return v->counter;
80013fdc:	8c82001c 	lw	v0,28(a0)
exit_mmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:619
80013fe0:	5440001c 	bnezl	v0,80014054 <exit_mmap+0x94>
80013fe4:	3c048002 	lui	a0,0x8002
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
80013fe8:	8c900004 	lw	s0,4(a0)
exit_mmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:622
	pgd_t *pgdir = mm->pgdir;
	list_entry_t *list = &(mm->mmap_list), *le = list;
	while ((le = list_next(le)) != list) {
80013fec:	1090000f 	beq	a0,s0,8001402c <exit_mmap+0x6c>
80013ff0:	8c920010 	lw	s2,16(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:624
		struct vma_struct *vma = le2vma(le, list_link);
		unmap_range(pgdir, vma->vm_start, vma->vm_end);
80013ff4:	8e05ffe4 	lw	a1,-28(s0)
80013ff8:	8e06ffe8 	lw	a2,-24(s0)
80013ffc:	0c005e84 	jal	80017a10 <unmap_range>
80014000:	02402021 	move	a0,s2
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
80014004:	8e100004 	lw	s0,4(s0)
exit_mmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:622
void exit_mmap(struct mm_struct *mm)
{
	assert(mm != NULL && mm_count(mm) == 0);
	pgd_t *pgdir = mm->pgdir;
	list_entry_t *list = &(mm->mmap_list), *le = list;
	while ((le = list_next(le)) != list) {
80014008:	5630fffb 	bnel	s1,s0,80013ff8 <exit_mmap+0x38>
8001400c:	8e05ffe4 	lw	a1,-28(s0)
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
80014010:	8e100004 	lw	s0,4(s0)
exit_mmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:630

#ifdef UCONFIG_BIONIC_LIBC
		vma_unmapfile(vma);
#endif //UCONFIG_BIONIC_LIBC
	}
	while ((le = list_next(le)) != list) {
80014014:	12300009 	beq	s1,s0,8001403c <exit_mmap+0x7c>
80014018:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:632
		struct vma_struct *vma = le2vma(le, list_link);
		exit_range(pgdir, vma->vm_start, vma->vm_end);
8001401c:	8e05ffe4 	lw	a1,-28(s0)
80014020:	8e06ffe8 	lw	a2,-24(s0)
80014024:	0c005f05 	jal	80017c14 <exit_range>
80014028:	02402021 	move	a0,s2
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
8001402c:	8e100004 	lw	s0,4(s0)
exit_mmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:630

#ifdef UCONFIG_BIONIC_LIBC
		vma_unmapfile(vma);
#endif //UCONFIG_BIONIC_LIBC
	}
	while ((le = list_next(le)) != list) {
80014030:	5630fffb 	bnel	s1,s0,80014020 <exit_mmap+0x60>
80014034:	8e05ffe4 	lw	a1,-28(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:634
		struct vma_struct *vma = le2vma(le, list_link);
		exit_range(pgdir, vma->vm_start, vma->vm_end);
	}
}
80014038:	8fbf001c 	lw	ra,28(sp)
8001403c:	8fb20018 	lw	s2,24(sp)
80014040:	8fb10014 	lw	s1,20(sp)
80014044:	8fb00010 	lw	s0,16(sp)
80014048:	03e00008 	jr	ra
8001404c:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:619
	return 0;
}

void exit_mmap(struct mm_struct *mm)
{
	assert(mm != NULL && mm_count(mm) == 0);
80014050:	3c048002 	lui	a0,0x8002
80014054:	3c068002 	lui	a2,0x8002
80014058:	3c078002 	lui	a3,0x8002
8001405c:	2484313c 	addiu	a0,a0,12604
80014060:	2405026b 	li	a1,619
80014064:	24c60e28 	addiu	a2,a2,3624
80014068:	0c006b0b 	jal	8001ac2c <__panic>
8001406c:	24e73318 	addiu	a3,a3,13080

80014070 <get_unmapped_area>:
get_unmapped_area():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:658
}
#endif //UCONFIG_BIONIC_LIBC

uintptr_t get_unmapped_area(struct mm_struct * mm, size_t len)
{
	if (len == 0 || len > USERTOP) {
80014070:	24a3ffff 	addiu	v1,a1,-1
80014074:	04600015 	bltz	v1,800140cc <get_unmapped_area+0x5c>
80014078:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:661
		return 0;
	}
	uintptr_t start = USERTOP - len;
8001407c:	3c028000 	lui	v0,0x8000
80014080:	00451023 	subu	v0,v0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:662
	list_entry_t *list = &(mm->mmap_list), *le = list;
80014084:	00801821 	move	v1,a0
list_prev():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:144
 * list_prev - get the previous entry
 * @listelm:    the list head
 **/
static list_entry_t *list_prev(list_entry_t * listelm)
{
	return listelm->prev;
80014088:	8c630000 	lw	v1,0(v1)
get_unmapped_area():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:663
	while ((le = list_prev(le)) != list) {
8001408c:	1083000f 	beq	a0,v1,800140cc <get_unmapped_area+0x5c>
80014090:	00453821 	addu	a3,v0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:665
		struct vma_struct *vma = le2vma(le, list_link);
		if (start >= vma->vm_end) {
80014094:	8c66ffe8 	lw	a2,-24(v1)
80014098:	0046302b 	sltu	a2,v0,a2
8001409c:	10c0000d 	beqz	a2,800140d4 <get_unmapped_area+0x64>
800140a0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:668
			return start;
		}
		if (start + len > vma->vm_start) {
800140a4:	8c66ffe4 	lw	a2,-28(v1)
800140a8:	00c7382b 	sltu	a3,a2,a3
800140ac:	10e0fff6 	beqz	a3,80014088 <get_unmapped_area+0x18>
800140b0:	00a6402b 	sltu	t0,a1,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:669
			if (len >= vma->vm_start) {
800140b4:	11000005 	beqz	t0,800140cc <get_unmapped_area+0x5c>
800140b8:	00001021 	move	v0,zero
list_prev():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:144
800140bc:	8c630000 	lw	v1,0(v1)
get_unmapped_area():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:672
				return 0;
			}
			start = vma->vm_start - len;
800140c0:	00c51023 	subu	v0,a2,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:663
	if (len == 0 || len > USERTOP) {
		return 0;
	}
	uintptr_t start = USERTOP - len;
	list_entry_t *list = &(mm->mmap_list), *le = list;
	while ((le = list_prev(le)) != list) {
800140c4:	1483fff3 	bne	a0,v1,80014094 <get_unmapped_area+0x24>
800140c8:	00453821 	addu	a3,v0,a1
800140cc:	03e00008 	jr	ra
800140d0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:676
			}
			start = vma->vm_start - len;
		}
	}
	return (start >= USERBASE) ? start : 0;
}
800140d4:	03e00008 	jr	ra
800140d8:	00000000 	nop

800140dc <mm_brk>:
mm_brk():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:679

int mm_brk(struct mm_struct *mm, uintptr_t addr, size_t len)
{
800140dc:	27bdffd8 	addiu	sp,sp,-40
800140e0:	afb10018 	sw	s1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:681
	uintptr_t start = ROUNDDOWN(addr, PGSIZE), end =
	    ROUNDUP(addr + len, PGSIZE);
800140e4:	24b10fff 	addiu	s1,a1,4095
800140e8:	02268821 	addu	s1,s1,a2
800140ec:	32220fff 	andi	v0,s1,0xfff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:679
	}
	return (start >= USERBASE) ? start : 0;
}

int mm_brk(struct mm_struct *mm, uintptr_t addr, size_t len)
{
800140f0:	afb00014 	sw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:680
	uintptr_t start = ROUNDDOWN(addr, PGSIZE), end =
800140f4:	2410f000 	li	s0,-4096
800140f8:	00b08024 	and	s0,a1,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:681
	    ROUNDUP(addr + len, PGSIZE);
800140fc:	02228823 	subu	s1,s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:682
	if (!USER_ACCESS(start, end)) {
80014100:	0211102b 	sltu	v0,s0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:679
	}
	return (start >= USERBASE) ? start : 0;
}

int mm_brk(struct mm_struct *mm, uintptr_t addr, size_t len)
{
80014104:	afb30020 	sw	s3,32(sp)
80014108:	afb2001c 	sw	s2,28(sp)
8001410c:	afbf0024 	sw	ra,36(sp)
80014110:	00809821 	move	s3,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:682
	uintptr_t start = ROUNDDOWN(addr, PGSIZE), end =
	    ROUNDUP(addr + len, PGSIZE);
	if (!USER_ACCESS(start, end)) {
80014114:	1040000a 	beqz	v0,80014140 <mm_brk+0x64>
80014118:	2412ffea 	li	s2,-22
8001411c:	3c028000 	lui	v0,0x8000
80014120:	24420001 	addiu	v0,v0,1
80014124:	0222102b 	sltu	v0,s1,v0
80014128:	10400005 	beqz	v0,80014140 <mm_brk+0x64>
8001412c:	02002821 	move	a1,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:687
		return -E_INVAL;
	}

	int ret;
	if ((ret = mm_unmap(mm, start, end - start)) != 0) {
80014130:	0c004edb 	jal	80013b6c <mm_unmap>
80014134:	02303023 	subu	a2,s1,s0
80014138:	10400009 	beqz	v0,80014160 <mm_brk+0x84>
8001413c:	00409021 	move	s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:701
	if ((vma = vma_create(start, end, vm_flags)) == NULL) {
		return -E_NO_MEM;
	}
	insert_vma_struct(mm, vma);
	return 0;
}
80014140:	8fbf0024 	lw	ra,36(sp)
80014144:	02401021 	move	v0,s2
80014148:	8fb30020 	lw	s3,32(sp)
8001414c:	8fb2001c 	lw	s2,28(sp)
80014150:	8fb10018 	lw	s1,24(sp)
80014154:	8fb00014 	lw	s0,20(sp)
80014158:	03e00008 	jr	ra
8001415c:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:691
	int ret;
	if ((ret = mm_unmap(mm, start, end - start)) != 0) {
		return ret;
	}
	uint32_t vm_flags = VM_READ | VM_WRITE;
	struct vma_struct *vma = find_vma(mm, start - 1);
80014160:	02602021 	move	a0,s3
80014164:	0c004c89 	jal	80013224 <find_vma>
80014168:	2605ffff 	addiu	a1,s0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:692
	if (vma != NULL && vma->vm_end == start && vma->vm_flags == vm_flags) {
8001416c:	10400005 	beqz	v0,80014184 <mm_brk+0xa8>
80014170:	02002021 	move	a0,s0
80014174:	8c430008 	lw	v1,8(v0)
80014178:	52030011 	beql	s0,v1,800141c0 <mm_brk+0xe4>
8001417c:	8c44000c 	lw	a0,12(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:696
		vma->vm_end = end;
		return 0;
	}
	if ((vma = vma_create(start, end, vm_flags)) == NULL) {
80014180:	02002021 	move	a0,s0
80014184:	02202821 	move	a1,s1
80014188:	0c004c75 	jal	800131d4 <vma_create>
8001418c:	24060003 	li	a2,3
80014190:	10400010 	beqz	v0,800141d4 <mm_brk+0xf8>
80014194:	02602021 	move	a0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:699
		return -E_NO_MEM;
	}
	insert_vma_struct(mm, vma);
80014198:	0c004cde 	jal	80013378 <insert_vma_struct>
8001419c:	00402821 	move	a1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:701
	return 0;
}
800141a0:	8fbf0024 	lw	ra,36(sp)
800141a4:	02401021 	move	v0,s2
800141a8:	8fb30020 	lw	s3,32(sp)
800141ac:	8fb2001c 	lw	s2,28(sp)
800141b0:	8fb10018 	lw	s1,24(sp)
800141b4:	8fb00014 	lw	s0,20(sp)
800141b8:	03e00008 	jr	ra
800141bc:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:692
	if ((ret = mm_unmap(mm, start, end - start)) != 0) {
		return ret;
	}
	uint32_t vm_flags = VM_READ | VM_WRITE;
	struct vma_struct *vma = find_vma(mm, start - 1);
	if (vma != NULL && vma->vm_end == start && vma->vm_flags == vm_flags) {
800141c0:	24030003 	li	v1,3
800141c4:	1483ffef 	bne	a0,v1,80014184 <mm_brk+0xa8>
800141c8:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:694
		vma->vm_end = end;
		return 0;
800141cc:	08005050 	j	80014140 <mm_brk+0x64>
800141d0:	ac510008 	sw	s1,8(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:697
	}
	if ((vma = vma_create(start, end, vm_flags)) == NULL) {
		return -E_NO_MEM;
800141d4:	08005050 	j	80014140 <mm_brk+0x64>
800141d8:	2412fff4 	li	s2,-12

800141dc <user_mem_check>:
user_mem_check():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:705
	return 0;
}

bool
user_mem_check(struct mm_struct * mm, uintptr_t addr, size_t len, bool write)
{
800141dc:	27bdffd8 	addiu	sp,sp,-40
800141e0:	afb3001c 	sw	s3,28(sp)
800141e4:	afb00010 	sw	s0,16(sp)
800141e8:	afbf0024 	sw	ra,36(sp)
800141ec:	afb40020 	sw	s4,32(sp)
800141f0:	afb20018 	sw	s2,24(sp)
800141f4:	afb10014 	sw	s1,20(sp)
800141f8:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:706
	if (mm != NULL) {
800141fc:	1080002e 	beqz	a0,800142b8 <user_mem_check+0xdc>
80014200:	00e09821 	move	s3,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:707
		if (!USER_ACCESS(addr, addr + len)) {
80014204:	00c59021 	addu	s2,a2,a1
80014208:	00b2182b 	sltu	v1,a1,s2
8001420c:	10600022 	beqz	v1,80014298 <user_mem_check+0xbc>
80014210:	00001021 	move	v0,zero
80014214:	3c038000 	lui	v1,0x8000
80014218:	24630001 	addiu	v1,v1,1
8001421c:	0243182b 	sltu	v1,s2,v1
80014220:	1060001d 	beqz	v1,80014298 <user_mem_check+0xbc>
80014224:	24140002 	li	s4,2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:717
		while (start < end) {
			if ((vma = find_vma(mm, start)) == NULL
			    || start < vma->vm_start) {
				return 0;
			}
			if (!(vma->vm_flags & ((write) ? VM_WRITE : VM_READ))) {
80014228:	24020001 	li	v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:707

bool
user_mem_check(struct mm_struct * mm, uintptr_t addr, size_t len, bool write)
{
	if (mm != NULL) {
		if (!USER_ACCESS(addr, addr + len)) {
8001422c:	00a08821 	move	s1,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:717
		while (start < end) {
			if ((vma = find_vma(mm, start)) == NULL
			    || start < vma->vm_start) {
				return 0;
			}
			if (!(vma->vm_flags & ((write) ? VM_WRITE : VM_READ))) {
80014230:	080050a0 	j	80014280 <user_mem_check+0xa4>
80014234:	0047a00a 	movz	s4,v0,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:714
		}
		struct vma_struct *vma;
		uintptr_t start = addr, end = addr + len;
		while (start < end) {
			if ((vma = find_vma(mm, start)) == NULL
			    || start < vma->vm_start) {
80014238:	0224182b 	sltu	v1,s1,a0
8001423c:	54600016 	bnezl	v1,80014298 <user_mem_check+0xbc>
80014240:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:717
				return 0;
			}
			if (!(vma->vm_flags & ((write) ? VM_WRITE : VM_READ))) {
80014244:	8c43000c 	lw	v1,12(v0)
80014248:	02832824 	and	a1,s4,v1
8001424c:	10a00011 	beqz	a1,80014294 <user_mem_check+0xb8>
80014250:	30630008 	andi	v1,v1,0x8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:720
				return 0;
			}
			if (write && (vma->vm_flags & VM_STACK)) {
80014254:	52600007 	beqzl	s3,80014274 <user_mem_check+0x98>
80014258:	8c510008 	lw	s1,8(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:721
				if (start < vma->vm_start + PGSIZE) {
8001425c:	24841000 	addiu	a0,a0,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:720
				return 0;
			}
			if (!(vma->vm_flags & ((write) ? VM_WRITE : VM_READ))) {
				return 0;
			}
			if (write && (vma->vm_flags & VM_STACK)) {
80014260:	10600003 	beqz	v1,80014270 <user_mem_check+0x94>
80014264:	0224202b 	sltu	a0,s1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:721
				if (start < vma->vm_start + PGSIZE) {
80014268:	5480000b 	bnezl	a0,80014298 <user_mem_check+0xbc>
8001426c:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:725
					return 0;
				}
			}
			start = vma->vm_end;
80014270:	8c510008 	lw	s1,8(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:712
		if (!USER_ACCESS(addr, addr + len)) {
			return 0;
		}
		struct vma_struct *vma;
		uintptr_t start = addr, end = addr + len;
		while (start < end) {
80014274:	0232102b 	sltu	v0,s1,s2
80014278:	10400007 	beqz	v0,80014298 <user_mem_check+0xbc>
8001427c:	24020001 	li	v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:713
			if ((vma = find_vma(mm, start)) == NULL
80014280:	02202821 	move	a1,s1
80014284:	0c004c89 	jal	80013224 <find_vma>
80014288:	02002021 	move	a0,s0
8001428c:	5440ffea 	bnezl	v0,80014238 <user_mem_check+0x5c>
80014290:	8c440004 	lw	a0,4(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:722
			if (!(vma->vm_flags & ((write) ? VM_WRITE : VM_READ))) {
				return 0;
			}
			if (write && (vma->vm_flags & VM_STACK)) {
				if (start < vma->vm_start + PGSIZE) {
					return 0;
80014294:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:730
			start = vma->vm_end;
		}
		return 1;
	}
	return KERN_ACCESS(addr, addr + len);
}
80014298:	8fbf0024 	lw	ra,36(sp)
8001429c:	8fb40020 	lw	s4,32(sp)
800142a0:	8fb3001c 	lw	s3,28(sp)
800142a4:	8fb20018 	lw	s2,24(sp)
800142a8:	8fb10014 	lw	s1,20(sp)
800142ac:	8fb00010 	lw	s0,16(sp)
800142b0:	03e00008 	jr	ra
800142b4:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:729
			}
			start = vma->vm_end;
		}
		return 1;
	}
	return KERN_ACCESS(addr, addr + len);
800142b8:	3c038000 	lui	v1,0x8000
800142bc:	24631000 	addiu	v1,v1,4096
800142c0:	00a3182b 	sltu	v1,a1,v1
800142c4:	1460fff4 	bnez	v1,80014298 <user_mem_check+0xbc>
800142c8:	00001021 	move	v0,zero
800142cc:	00c53021 	addu	a2,a2,a1
800142d0:	00a6282b 	sltu	a1,a1,a2
800142d4:	10a0fff1 	beqz	a1,8001429c <user_mem_check+0xc0>
800142d8:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:704
	insert_vma_struct(mm, vma);
	return 0;
}

bool
user_mem_check(struct mm_struct * mm, uintptr_t addr, size_t len, bool write)
800142dc:	3c028200 	lui	v0,0x8200
800142e0:	24421001 	addiu	v0,v0,4097
800142e4:	080050a7 	j	8001429c <user_mem_check+0xc0>
800142e8:	00c2102b 	sltu	v0,a2,v0

800142ec <do_madvise>:
do_madvise():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:872
#endif //UCONFIG_BIONIC_LIBC

int do_madvise(void *addr, size_t len, int advice)
{
	return 0;
}
800142ec:	03e00008 	jr	ra
800142f0:	00001021 	move	v0,zero

800142f4 <do_pgfault>:
do_pgfault():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:875

int do_pgfault(struct mm_struct *mm, machine_word_t error_code, uintptr_t addr)
{
800142f4:	27bdffb8 	addiu	sp,sp,-72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:876
	struct proc_struct *current = pls_read(current);
800142f8:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:875
{
	return 0;
}

int do_pgfault(struct mm_struct *mm, machine_word_t error_code, uintptr_t addr)
{
800142fc:	afb50038 	sw	s5,56(sp)
80014300:	afb2002c 	sw	s2,44(sp)
80014304:	afb10028 	sw	s1,40(sp)
80014308:	afb00024 	sw	s0,36(sp)
8001430c:	afbf0044 	sw	ra,68(sp)
80014310:	afb70040 	sw	s7,64(sp)
80014314:	afb6003c 	sw	s6,60(sp)
80014318:	afb40034 	sw	s4,52(sp)
8001431c:	afb30030 	sw	s3,48(sp)
80014320:	00808021 	move	s0,a0
80014324:	00a0a821 	move	s5,a1
80014328:	00c08821 	move	s1,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:877
	struct proc_struct *current = pls_read(current);
	if (mm == NULL) {
8001432c:	10800047 	beqz	a0,8001444c <do_pgfault+0x158>
80014330:	8c5277a4 	lw	s2,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:889
		     current->pid, current->name, error_code, addr);
		return -E_KILLED;
	}

	bool need_unlock = 1;
	if (!try_lock_mm(mm)) {
80014334:	0c004c43 	jal	8001310c <try_lock_mm>
80014338:	24130001 	li	s3,1
8001433c:	1440000b 	bnez	v0,8001436c <do_pgfault+0x78>
80014340:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:890
		if (current != NULL && mm->locked_by == current->pid) {
80014344:	12400005 	beqz	s2,8001435c <do_pgfault+0x68>
80014348:	00000000 	nop
8001434c:	8e030020 	lw	v1,32(s0)
80014350:	8e420004 	lw	v0,4(s2)
80014354:	10620005 	beq	v1,v0,8001436c <do_pgfault+0x78>
80014358:	00009821 	move	s3,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:893
			need_unlock = 0;
		} else {
			lock_mm(mm);
8001435c:	0c004c26 	jal	80013098 <lock_mm>
80014360:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:888
		    ("page fault in kernel thread: pid = %d, name = %s, %d %08x.\n",
		     current->pid, current->name, error_code, addr);
		return -E_KILLED;
	}

	bool need_unlock = 1;
80014364:	24130001 	li	s3,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:898
			lock_mm(mm);
		}
	}

	int ret = -E_INVAL;
	struct vma_struct *vma = find_vma(mm, addr);
80014368:	02002021 	move	a0,s0
8001436c:	0c004c89 	jal	80013224 <find_vma>
80014370:	02202821 	move	a1,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:899
	if (vma == NULL || vma->vm_start > addr) {
80014374:	1040004b 	beqz	v0,800144a4 <do_pgfault+0x1b0>
80014378:	0040a021 	move	s4,v0
8001437c:	8c420004 	lw	v0,4(v0)
80014380:	0222182b 	sltu	v1,s1,v0
80014384:	1060000f 	beqz	v1,800143c4 <do_pgfault+0xd0>
80014388:	2412ffea 	li	s2,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1139
		}
	}
	ret = 0;

failed:
	if (need_unlock) {
8001438c:	16600021 	bnez	s3,80014414 <do_pgfault+0x120>
80014390:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1143
		unlock_mm(mm);
	}
	return ret;
}
80014394:	8fbf0044 	lw	ra,68(sp)
80014398:	02401021 	move	v0,s2
8001439c:	8fb70040 	lw	s7,64(sp)
800143a0:	8fb6003c 	lw	s6,60(sp)
800143a4:	8fb50038 	lw	s5,56(sp)
800143a8:	8fb40034 	lw	s4,52(sp)
800143ac:	8fb30030 	lw	s3,48(sp)
800143b0:	8fb2002c 	lw	s2,44(sp)
800143b4:	8fb10028 	lw	s1,40(sp)
800143b8:	8fb00024 	lw	s0,36(sp)
800143bc:	03e00008 	jr	ra
800143c0:	27bd0048 	addiu	sp,sp,72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:902
	int ret = -E_INVAL;
	struct vma_struct *vma = find_vma(mm, addr);
	if (vma == NULL || vma->vm_start > addr) {
		goto failed;
	}
	if (vma->vm_flags & VM_STACK) {
800143c4:	8e83000c 	lw	v1,12(s4)
800143c8:	30640008 	andi	a0,v1,0x8
800143cc:	50800005 	beqzl	a0,800143e4 <do_pgfault+0xf0>
800143d0:	30624000 	andi	v0,v1,0x4000
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:903
		if (addr < vma->vm_start + PGSIZE) {
800143d4:	24421000 	addiu	v0,v0,4096
800143d8:	0222102b 	sltu	v0,s1,v0
800143dc:	1440ffeb 	bnez	v0,8001438c <do_pgfault+0x98>
800143e0:	30624000 	andi	v0,v1,0x4000
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:909
			goto failed;
		}
	}
	//kprintf("@ %x %08x\n", vma->vm_flags, vma->vm_start);
	//assert((vma->vm_flags & VM_IO)==0);
	if (vma->vm_flags & VM_IO) {
800143e4:	1440ffe9 	bnez	v0,8001438c <do_pgfault+0x98>
800143e8:	2412ffea 	li	s2,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:913
		ret = -E_INVAL;
		goto failed;
	}
	switch (error_code & 3) {
800143ec:	32a20003 	andi	v0,s5,0x3
800143f0:	14400030 	bnez	v0,800144b4 <do_pgfault+0x1c0>
800143f4:	24040001 	li	a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:924
		}
		break;
	case 1:		/* read, present */
		goto failed;
	case 0:		/* read, not present */
		if (!(vma->vm_flags & (VM_READ | VM_EXEC))) {
800143f8:	30620005 	andi	v0,v1,0x5
800143fc:	1040ffe3 	beqz	v0,8001438c <do_pgfault+0x98>
80014400:	30630002 	andi	v1,v1,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:65
	*ptep |= PTE_U;
}

static inline void ptep_set_u_write(pte_t * ptep)
{
	*ptep |= PTE_W | PTE_U;
80014404:	24160006 	li	s6,6
80014408:	24020004 	li	v0,4
8001440c:	08005131 	j	800144c4 <do_pgfault+0x1d0>
80014410:	0043b00a 	movz	s6,v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1140
	}
	ret = 0;

failed:
	if (need_unlock) {
		unlock_mm(mm);
80014414:	0c004c37 	jal	800130dc <unlock_mm>
80014418:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1143
	}
	return ret;
}
8001441c:	8fbf0044 	lw	ra,68(sp)
80014420:	02401021 	move	v0,s2
80014424:	8fb70040 	lw	s7,64(sp)
80014428:	8fb6003c 	lw	s6,60(sp)
8001442c:	8fb50038 	lw	s5,56(sp)
80014430:	8fb40034 	lw	s4,52(sp)
80014434:	8fb30030 	lw	s3,48(sp)
80014438:	8fb2002c 	lw	s2,44(sp)
8001443c:	8fb10028 	lw	s1,40(sp)
80014440:	8fb00024 	lw	s0,36(sp)
80014444:	03e00008 	jr	ra
80014448:	27bd0048 	addiu	sp,sp,72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:878

int do_pgfault(struct mm_struct *mm, machine_word_t error_code, uintptr_t addr)
{
	struct proc_struct *current = pls_read(current);
	if (mm == NULL) {
		assert(current != NULL);
8001444c:	124000c1 	beqz	s2,80014754 <do_pgfault+0x460>
80014450:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:883
		/* Chen Yuheng 
		 * give handler a chance to deal with it 
		 */
		kprintf
		    ("page fault in kernel thread: pid = %d, name = %s, %d %08x.\n",
80014454:	8e450004 	lw	a1,4(s2)
80014458:	3c048002 	lui	a0,0x8002
8001445c:	26460060 	addiu	a2,s2,96
80014460:	02a03821 	move	a3,s5
80014464:	24843348 	addiu	a0,a0,13128
80014468:	0c007a9e 	jal	8001ea78 <kprintf>
8001446c:	afb10010 	sw	s1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1143
failed:
	if (need_unlock) {
		unlock_mm(mm);
	}
	return ret;
}
80014470:	8fbf0044 	lw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:885
		 * give handler a chance to deal with it 
		 */
		kprintf
		    ("page fault in kernel thread: pid = %d, name = %s, %d %08x.\n",
		     current->pid, current->name, error_code, addr);
		return -E_KILLED;
80014474:	2412ffdb 	li	s2,-37
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1143
failed:
	if (need_unlock) {
		unlock_mm(mm);
	}
	return ret;
}
80014478:	02401021 	move	v0,s2
8001447c:	8fb70040 	lw	s7,64(sp)
80014480:	8fb6003c 	lw	s6,60(sp)
80014484:	8fb50038 	lw	s5,56(sp)
80014488:	8fb40034 	lw	s4,52(sp)
8001448c:	8fb30030 	lw	s3,48(sp)
80014490:	8fb2002c 	lw	s2,44(sp)
80014494:	8fb10028 	lw	s1,40(sp)
80014498:	8fb00024 	lw	s0,36(sp)
8001449c:	03e00008 	jr	ra
800144a0:	27bd0048 	addiu	sp,sp,72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1139
		}
	}
	ret = 0;

failed:
	if (need_unlock) {
800144a4:	1260ffbb 	beqz	s3,80014394 <do_pgfault+0xa0>
800144a8:	2412ffea 	li	s2,-22
800144ac:	08005105 	j	80014414 <do_pgfault+0x120>
800144b0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:913
	//assert((vma->vm_flags & VM_IO)==0);
	if (vma->vm_flags & VM_IO) {
		ret = -E_INVAL;
		goto failed;
	}
	switch (error_code & 3) {
800144b4:	1044ffb5 	beq	v0,a0,8001438c <do_pgfault+0x98>
800144b8:	30630002 	andi	v1,v1,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:917
	default:
		/* default is 3: write, present */
	case 2:		/* write, not present */
		if (!(vma->vm_flags & VM_WRITE)) {
800144bc:	1060ffb3 	beqz	v1,8001438c <do_pgfault+0x98>
800144c0:	24160006 	li	s6,6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:943
	ptep_set_u_read(&perm);
	if (vma->vm_flags & VM_WRITE) {
		ptep_set_u_write(&perm);
	}
#endif
	addr = ROUNDDOWN(addr, PGSIZE);
800144c4:	2402f000 	li	v0,-4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:948

	ret = -E_NO_MEM;

	pte_t *ptep;
	if ((ptep = get_pte(mm->pgdir, addr, 1)) == NULL) {
800144c8:	8e040010 	lw	a0,16(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:943
	ptep_set_u_read(&perm);
	if (vma->vm_flags & VM_WRITE) {
		ptep_set_u_write(&perm);
	}
#endif
	addr = ROUNDDOWN(addr, PGSIZE);
800144cc:	02228824 	and	s1,s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:948

	ret = -E_NO_MEM;

	pte_t *ptep;
	if ((ptep = get_pte(mm->pgdir, addr, 1)) == NULL) {
800144d0:	02202821 	move	a1,s1
800144d4:	0c005ccc 	jal	80017330 <get_pte>
800144d8:	24060001 	li	a2,1
800144dc:	10400052 	beqz	v0,80014628 <do_pgfault+0x334>
800144e0:	0040b821 	move	s7,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1143
failed:
	if (need_unlock) {
		unlock_mm(mm);
	}
	return ret;
}
800144e4:	8c450000 	lw	a1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:951

	pte_t *ptep;
	if ((ptep = get_pte(mm->pgdir, addr, 1)) == NULL) {
		goto failed;
	}
	if (ptep_invalid(ptep)) {
800144e8:	14a0000d 	bnez	a1,80014520 <do_pgfault+0x22c>
800144ec:	8e82000c 	lw	v0,12(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1016
			}
#endif //SHARE_MAPPED_FILE

		} else
#endif //UCONFIG_BIONIC_LIBC
		if (!(vma->vm_flags & VM_SHARE)) {
800144f0:	30420010 	andi	v0,v0,0x10
800144f4:	5440005a 	bnezl	v0,80014660 <do_pgfault+0x36c>
800144f8:	8e840028 	lw	a0,40(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1017
			if (pgdir_alloc_page(mm->pgdir, addr, perm) == NULL) {
800144fc:	8e040010 	lw	a0,16(s0)
80014500:	02202821 	move	a1,s1
80014504:	0c005e4d 	jal	80017934 <pgdir_alloc_page>
80014508:	02c03021 	move	a2,s6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:945
		ptep_set_u_write(&perm);
	}
#endif
	addr = ROUNDDOWN(addr, PGSIZE);

	ret = -E_NO_MEM;
8001450c:	2412fff4 	li	s2,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1139
		}
	}
	ret = 0;

failed:
	if (need_unlock) {
80014510:	1260ffa0 	beqz	s3,80014394 <do_pgfault+0xa0>
80014514:	0002900b 	movn	s2,zero,v0
80014518:	08005105 	j	80014414 <do_pgfault+0x120>
8001451c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1051
			}
		}
	} else {		//a present page, handle copy-on-write (cow) 
		struct Page *page, *newpage = NULL;
		bool cow =
		    ((vma->vm_flags & (VM_SHARE | VM_WRITE)) == VM_WRITE),
80014520:	30520012 	andi	s2,v0,0x12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1050
#endif
			}
		}
	} else {		//a present page, handle copy-on-write (cow) 
		struct Page *page, *newpage = NULL;
		bool cow =
80014524:	3a520002 	xori	s2,s2,0x2
ptep_present():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:26
	return (*ptep == 0);
}

static inline int ptep_present(pte_t * ptep)
{
	return (*ptep & PTE_P);
80014528:	30a30001 	andi	v1,a1,0x1
do_pgfault():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1055
		    ((vma->vm_flags & (VM_SHARE | VM_WRITE)) == VM_WRITE),
		    may_copy = 1;

#if 1
		if (!(!ptep_present(ptep)
8001452c:	10600042 	beqz	v1,80014638 <do_pgfault+0x344>
80014530:	2e520001 	sltiu	s2,s2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1056
		      || ((error_code & 2) && !ptep_u_write(ptep) && cow))) {
80014534:	32a30002 	andi	v1,s5,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1055
		bool cow =
		    ((vma->vm_flags & (VM_SHARE | VM_WRITE)) == VM_WRITE),
		    may_copy = 1;

#if 1
		if (!(!ptep_present(ptep)
80014538:	106000a6 	beqz	v1,800147d4 <do_pgfault+0x4e0>
8001453c:	24030006 	li	v1,6
ptep_u_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:46
	return (*ptep & PTE_U);
}

static inline int ptep_u_write(pte_t * ptep)
{
	return ((*ptep & PTE_U) && (*ptep & PTE_W));
80014540:	30a40006 	andi	a0,a1,0x6
do_pgfault():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1056
		      || ((error_code & 2) && !ptep_u_write(ptep) && cow))) {
80014544:	108300a4 	beq	a0,v1,800147d8 <do_pgfault+0x4e4>
80014548:	3c048002 	lui	a0,0x8002
8001454c:	124000a3 	beqz	s2,800147dc <do_pgfault+0x4e8>
80014550:	24843390 	addiu	a0,a0,13200
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1065
			assert(0);
		}
#endif

		if (cow) {
			newpage = alloc_page();
80014554:	0c007425 	jal	8001d094 <alloc_pages>
80014558:	24040001 	li	a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1143
failed:
	if (need_unlock) {
		unlock_mm(mm);
	}
	return ret;
}
8001455c:	8ee30000 	lw	v1,0(s7)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1065
			assert(0);
		}
#endif

		if (cow) {
			newpage = alloc_page();
80014560:	0040a021 	move	s4,v0
ptep_present():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:26
	return (*ptep == 0);
}

static inline int ptep_present(pte_t * ptep)
{
	return (*ptep & PTE_P);
80014564:	30620001 	andi	v0,v1,0x1
do_pgfault():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1067
		}
		if (ptep_present(ptep)) {
80014568:	10400035 	beqz	v0,80014640 <do_pgfault+0x34c>
8001456c:	2402f000 	li	v0,-4096
pte2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:119
static inline struct Page *pte2page(pte_t pte)
{
	if (!(pte & PTE_P)) {
		panic("pte2page called with invalid pte");
	}
	return pa2page(PTE_ADDR(pte));
80014570:	00621824 	and	v1,v1,v0
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
80014574:	3c047fff 	lui	a0,0x7fff
80014578:	3c028015 	lui	v0,0x8015
8001457c:	3484f000 	ori	a0,a0,0xf000
80014580:	8c467770 	lw	a2,30576(v0)
80014584:	00641821 	addu	v1,v1,a0
80014588:	00031b02 	srl	v1,v1,0xc
8001458c:	0066102b 	sltu	v0,v1,a2
80014590:	1040007d 	beqz	v0,80014788 <do_pgfault+0x494>
80014594:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
		panic("pa2page called with invalid pa");
	}
	return &pages[PPN(pa)];
80014598:	8c4277bc 	lw	v0,30652(v0)
8001459c:	00031940 	sll	v1,v1,0x5
do_pgfault():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1091
#endif
				may_copy = 0;
			}
		}

		if (cow && may_copy) {
800145a0:	12400044 	beqz	s2,800146b4 <do_pgfault+0x3c0>
800145a4:	00432821 	addu	a1,v0,v1
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
800145a8:	8ca30000 	lw	v1,0(a1)
do_pgfault():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1095
#ifdef UCONFIG_SWAP
			if (page_ref(page) + swap_page_count(page) > 1) {
#else
			if (page_ref(page) > 1) {
800145ac:	28630002 	slti	v1,v1,2
800145b0:	54600041 	bnezl	v1,800146b8 <do_pgfault+0x3c4>
800145b4:	8e040010 	lw	a0,16(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1097
#endif
				if (newpage == NULL) {
800145b8:	1280001b 	beqz	s4,80014628 <do_pgfault+0x334>
800145bc:	02823823 	subu	a3,s4,v0
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
800145c0:	00073943 	sra	a3,a3,0x5
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
800145c4:	00073b00 	sll	a3,a3,0xc
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
800145c8:	00071b02 	srl	v1,a3,0xc
800145cc:	0066182b 	sltu	v1,v1,a2
800145d0:	10600073 	beqz	v1,800147a0 <do_pgfault+0x4ac>
800145d4:	00e43823 	subu	a3,a3,a0
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
800145d8:	00a21023 	subu	v0,a1,v0
800145dc:	00021143 	sra	v0,v0,0x5
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
800145e0:	00021300 	sll	v0,v0,0xc
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
800145e4:	00021b02 	srl	v1,v0,0xc
800145e8:	0066302b 	sltu	a2,v1,a2
800145ec:	10c00072 	beqz	a2,800147b8 <do_pgfault+0x4c4>
800145f0:	00441023 	subu	v0,v0,a0
do_pgfault():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1100
					goto failed;
				}
				memcpy(page2kva(newpage), page2kva(page),
800145f4:	00e02021 	move	a0,a3
800145f8:	00402821 	move	a1,v0
800145fc:	0c005c7c 	jal	800171f0 <memcpy>
80014600:	24061000 	li	a2,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1131
#endif //SHARE_MAPPED_FILE
		}
#endif //UCONFIG_BIONIC_LIBC
		else {
		}
		page_insert(mm->pgdir, page, addr, perm);
80014604:	8e040010 	lw	a0,16(s0)
80014608:	02802821 	move	a1,s4
8001460c:	02203021 	move	a2,s1
80014610:	0c005dcd 	jal	80017734 <page_insert>
80014614:	02c03821 	move	a3,s6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1139
		}
	}
	ret = 0;

failed:
	if (need_unlock) {
80014618:	1260ff5e 	beqz	s3,80014394 <do_pgfault+0xa0>
8001461c:	00009021 	move	s2,zero
80014620:	08005105 	j	80014414 <do_pgfault+0x120>
80014624:	00000000 	nop
80014628:	1260ff5a 	beqz	s3,80014394 <do_pgfault+0xa0>
8001462c:	2412fff4 	li	s2,-12
80014630:	08005105 	j	80014414 <do_pgfault+0x120>
80014634:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1064
				cow, vma->vm_flags);
			assert(0);
		}
#endif

		if (cow) {
80014638:	1640ffc6 	bnez	s2,80014554 <do_pgfault+0x260>
8001463c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1078
					free_page(newpage);
				}
				goto failed;
			}
#else
			assert(0);
80014640:	3c048002 	lui	a0,0x8002
80014644:	2484313c 	addiu	a0,a0,12604
80014648:	24050436 	li	a1,1078
8001464c:	3c068002 	lui	a2,0x8002
80014650:	3c078002 	lui	a3,0x8002
80014654:	24c60e28 	addiu	a2,a2,3624
80014658:	0c006b0b 	jal	8001ac2c <__panic>
8001465c:	24e7242c 	addiu	a3,a3,9260
lock_shmem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.h:63
	return atomic_sub_return(&(shmem->shmem_ref), 1);
}

static inline void lock_shmem(struct shmem_struct *shmem)
{
	down(&(shmem->shmem_sem));
80014660:	0c00671f 	jal	80019c7c <down>
80014664:	24840014 	addiu	a0,a0,20
do_pgfault():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1028
			}
#endif //UCONFIG_BIONIC_LIBC
		} else {	//shared mem
			lock_shmem(vma->shmem);
			uintptr_t shmem_addr =
			    addr - vma->vm_start + vma->shmem_off;
80014668:	8e85002c 	lw	a1,44(s4)
8001466c:	8e820004 	lw	v0,4(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1029
			pte_t *sh_ptep =
80014670:	8e840028 	lw	a0,40(s4)
80014674:	24060001 	li	a2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1028
			}
#endif //UCONFIG_BIONIC_LIBC
		} else {	//shared mem
			lock_shmem(vma->shmem);
			uintptr_t shmem_addr =
			    addr - vma->vm_start + vma->shmem_off;
80014678:	00a22823 	subu	a1,a1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1029
			pte_t *sh_ptep =
8001467c:	0c004a79 	jal	800129e4 <shmem_get_entry>
80014680:	00b12821 	addu	a1,a1,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1031
			    shmem_get_entry(vma->shmem, shmem_addr, 1);
			if (sh_ptep == NULL || ptep_invalid(sh_ptep)) {
80014684:	10400004 	beqz	v0,80014698 <do_pgfault+0x3a4>
80014688:	8e840028 	lw	a0,40(s4)
8001468c:	8c430000 	lw	v1,0(v0)
80014690:	14600015 	bnez	v1,800146e8 <do_pgfault+0x3f4>
80014694:	00000000 	nop
unlock_shmem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:945
		ptep_set_u_write(&perm);
	}
#endif
	addr = ROUNDDOWN(addr, PGSIZE);

	ret = -E_NO_MEM;
80014698:	2412fff4 	li	s2,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.h:68
}

static inline void unlock_shmem(struct shmem_struct *shmem)
{
	up(&(shmem->shmem_sem));
8001469c:	0c00671d 	jal	80019c74 <up>
800146a0:	24840014 	addiu	a0,a0,20
do_pgfault():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1139
		}
	}
	ret = 0;

failed:
	if (need_unlock) {
800146a4:	1260ff3c 	beqz	s3,80014398 <do_pgfault+0xa4>
800146a8:	8fbf0044 	lw	ra,68(sp)
800146ac:	08005105 	j	80014414 <do_pgfault+0x120>
800146b0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1131
#endif //SHARE_MAPPED_FILE
		}
#endif //UCONFIG_BIONIC_LIBC
		else {
		}
		page_insert(mm->pgdir, page, addr, perm);
800146b4:	8e040010 	lw	a0,16(s0)
800146b8:	02203021 	move	a2,s1
800146bc:	0c005dcd 	jal	80017734 <page_insert>
800146c0:	02c03821 	move	a3,s6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1132
		if (newpage != NULL) {
800146c4:	1280ff31 	beqz	s4,8001438c <do_pgfault+0x98>
800146c8:	00009021 	move	s2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1133
			free_page(newpage);
800146cc:	02802021 	move	a0,s4
800146d0:	0c007441 	jal	8001d104 <free_pages>
800146d4:	24050001 	li	a1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1139
		}
	}
	ret = 0;

failed:
	if (need_unlock) {
800146d8:	1260ff2f 	beqz	s3,80014398 <do_pgfault+0xa4>
800146dc:	8fbf0044 	lw	ra,68(sp)
800146e0:	08005105 	j	80014414 <do_pgfault+0x120>
800146e4:	00000000 	nop
unlock_shmem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.h:68
800146e8:	afa20018 	sw	v0,24(sp)
800146ec:	0c00671d 	jal	80019c74 <up>
800146f0:	24840014 	addiu	a0,a0,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1143
		unlock_mm(mm);
	}
	return ret;
}
800146f4:	8fa20018 	lw	v0,24(sp)
800146f8:	8c420000 	lw	v0,0(v0)
ptep_present():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:26
800146fc:	30430001 	andi	v1,v0,0x1
do_pgfault():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1036
			if (sh_ptep == NULL || ptep_invalid(sh_ptep)) {
				unlock_shmem(vma->shmem);
				goto failed;
			}
			unlock_shmem(vma->shmem);
			if (ptep_present(sh_ptep)) {
80014700:	1060001b 	beqz	v1,80014770 <do_pgfault+0x47c>
80014704:	3c038015 	lui	v1,0x8015
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
80014708:	3c047fff 	lui	a0,0x7fff
8001470c:	3484f000 	ori	a0,a0,0xf000
80014710:	8c637770 	lw	v1,30576(v1)
80014714:	00441021 	addu	v0,v0,a0
80014718:	00021302 	srl	v0,v0,0xc
8001471c:	0043182b 	sltu	v1,v0,v1
80014720:	10600019 	beqz	v1,80014788 <do_pgfault+0x494>
80014724:	8e040010 	lw	a0,16(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
		panic("pa2page called with invalid pa");
	}
	return &pages[PPN(pa)];
80014728:	3c038015 	lui	v1,0x8015
8001472c:	8c6577bc 	lw	a1,30652(v1)
80014730:	00021140 	sll	v0,v0,0x5
do_pgfault():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1037
				page_insert(mm->pgdir, pa2page(*sh_ptep), addr,
80014734:	02203021 	move	a2,s1
80014738:	00a22821 	addu	a1,a1,v0
8001473c:	0c005dcd 	jal	80017734 <page_insert>
80014740:	02c03821 	move	a3,s6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1139
		}
	}
	ret = 0;

failed:
	if (need_unlock) {
80014744:	1260ff13 	beqz	s3,80014394 <do_pgfault+0xa0>
80014748:	00009021 	move	s2,zero
8001474c:	08005105 	j	80014414 <do_pgfault+0x120>
80014750:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:878

int do_pgfault(struct mm_struct *mm, machine_word_t error_code, uintptr_t addr)
{
	struct proc_struct *current = pls_read(current);
	if (mm == NULL) {
		assert(current != NULL);
80014754:	3c068002 	lui	a2,0x8002
80014758:	3c078002 	lui	a3,0x8002
8001475c:	2484313c 	addiu	a0,a0,12604
80014760:	2405036e 	li	a1,878
80014764:	24c60e28 	addiu	a2,a2,3624
80014768:	0c006b0b 	jal	8001ac2c <__panic>
8001476c:	24e73338 	addiu	a3,a3,13112
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1044
			} else {
#ifdef UCONFIG_SWAP
				swap_duplicate(*ptep);
				ptep_copy(ptep, sh_ptep);
#else
				panic("NO SWAP\n");
80014770:	3c048002 	lui	a0,0x8002
80014774:	3c068002 	lui	a2,0x8002
80014778:	2484313c 	addiu	a0,a0,12604
8001477c:	24050414 	li	a1,1044
80014780:	0c006b0b 	jal	8001ac2c <__panic>
80014784:	24c63384 	addiu	a2,a2,13188
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:99
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
		panic("pa2page called with invalid pa");
80014788:	3c048002 	lui	a0,0x8002
8001478c:	3c068002 	lui	a2,0x8002
80014790:	248429ec 	addiu	a0,a0,10732
80014794:	24050063 	li	a1,99
80014798:	0c006b0b 	jal	8001ac2c <__panic>
8001479c:	24c62a54 	addiu	a2,a2,10836
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
800147a0:	3c048002 	lui	a0,0x8002
800147a4:	3c068002 	lui	a2,0x8002
800147a8:	248429ec 	addiu	a0,a0,10732
800147ac:	2405006a 	li	a1,106
800147b0:	0c006b0b 	jal	8001ac2c <__panic>
800147b4:	24c62a74 	addiu	a2,a2,10868
800147b8:	3c048002 	lui	a0,0x8002
800147bc:	3c068002 	lui	a2,0x8002
800147c0:	248429ec 	addiu	a0,a0,10732
800147c4:	2405006a 	li	a1,106
800147c8:	24c62a74 	addiu	a2,a2,10868
800147cc:	0c006b0b 	jal	8001ac2c <__panic>
800147d0:	00403821 	move	a3,v0
do_pgfault():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1058

#if 1
		if (!(!ptep_present(ptep)
		      || ((error_code & 2) && !ptep_u_write(ptep) && cow))) {
			//assert(PADDR(mm->pgdir) == rcr3());
			kprintf("%p %p %d %d %x\n", *ptep, addr, error_code,
800147d4:	3c048002 	lui	a0,0x8002
800147d8:	24843390 	addiu	a0,a0,13200
800147dc:	02203021 	move	a2,s1
800147e0:	02a03821 	move	a3,s5
800147e4:	afb20010 	sw	s2,16(sp)
800147e8:	0c007a9e 	jal	8001ea78 <kprintf>
800147ec:	afa20014 	sw	v0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:1060
				cow, vma->vm_flags);
			assert(0);
800147f0:	3c048002 	lui	a0,0x8002
800147f4:	2484313c 	addiu	a0,a0,12604
800147f8:	08005193 	j	8001464c <do_pgfault+0x358>
800147fc:	24050424 	li	a1,1060

80014800 <kmem_cache_alloc>:
kmem_cache_alloc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:399
}

// kmem_cache_alloc - call kmem_cache_alloc_one function to allocate a obj
//                  - if no free obj, try to allocate a slab
static void *
kmem_cache_alloc(kmem_cache_t *cachep) {
80014800:	27bdffc0 	addiu	sp,sp,-64
80014804:	afb60030 	sw	s6,48(sp)
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
	return page - pages;
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
80014808:	3c168000 	lui	s6,0x8000
kmem_cache_alloc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:399
8001480c:	afbe0038 	sw	s8,56(sp)
80014810:	afb70034 	sw	s7,52(sp)
80014814:	afb5002c 	sw	s5,44(sp)
80014818:	afb40028 	sw	s4,40(sp)
8001481c:	afb20020 	sw	s2,32(sp)
80014820:	afbf003c 	sw	ra,60(sp)
80014824:	afb30024 	sw	s3,36(sp)
80014828:	afb1001c 	sw	s1,28(sp)
8001482c:	afb00018 	sw	s0,24(sp)
80014830:	00809021 	move	s2,a0
80014834:	24940008 	addiu	s4,a0,8
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
80014838:	3c178015 	lui	s7,0x8015
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8001483c:	26d61000 	addiu	s6,s6,4096
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
80014840:	3c158015 	lui	s5,0x8015
kmem_cache_grow():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:365

    int i;
    for (i = 0; i < cachep->num; i ++) {
        slab_bufctl(slabp)[i] = i + 1;
    }
    slab_bufctl(slabp)[cachep->num - 1] = BUFCTL_END;
80014844:	241effff 	li	s8,-1
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80014848:	40026000 	mfc0	v0,c0_status
8001484c:	30420001 	andi	v0,v0,0x1
80014850:	10400004 	beqz	v0,80014864 <kmem_cache_alloc+0x64>
80014854:	00001821 	move	v1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80014858:	0c006d04 	jal	8001b410 <intr_disable>
8001485c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:16
	return 1;
80014860:	24030001 	li	v1,1
list_empty():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:126
 * list_empty - tests whether a list is empty
 * @list:       the list to test.
 * */
static inline bool list_empty(list_entry_t * list)
{
	return list->next == list;
80014864:	8e44000c 	lw	a0,12(s2)
kmem_cache_alloc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:405
    void *objp;
    bool intr_flag;

try_again:
    local_intr_save(intr_flag);
    if (list_empty(&(cachep->slabs_notfull))) {
80014868:	56840080 	bnel	s4,a0,80014a6c <kmem_cache_alloc+0x26c>
8001486c:	8c860014 	lw	a2,20(a0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80014870:	50600004 	beqzl	v1,80014884 <kmem_cache_alloc+0x84>
80014874:	8e440024 	lw	a0,36(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
80014878:	0c006d00 	jal	8001b400 <intr_enable>
8001487c:	00000000 	nop
kmem_cache_grow():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:341

// kmem_cache_grow - allocate a new slab by calling alloc_pages
//                 - set control area in the new slab
static bool
kmem_cache_grow(kmem_cache_t *cachep) {
    struct Page *page = alloc_pages(1 << cachep->page_order);
80014880:	8e440024 	lw	a0,36(s2)
80014884:	24130001 	li	s3,1
80014888:	0c007425 	jal	8001d094 <alloc_pages>
8001488c:	00932004 	sllv	a0,s3,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:342
    if (page == NULL) {
80014890:	10400057 	beqz	v0,800149f0 <kmem_cache_alloc+0x1f0>
80014894:	00408821 	move	s1,v0
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
80014898:	8ef077bc 	lw	s0,30652(s7)
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001489c:	8ea27770 	lw	v0,30576(s5)
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
800148a0:	02308023 	subu	s0,s1,s0
800148a4:	00108143 	sra	s0,s0,0x5
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
800148a8:	00108300 	sll	s0,s0,0xc
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
800148ac:	00101b02 	srl	v1,s0,0xc
800148b0:	0062102b 	sltu	v0,v1,v0
800148b4:	10400098 	beqz	v0,80014b18 <kmem_cache_alloc+0x318>
800148b8:	02168021 	addu	s0,s0,s6
kmem_cache_slabmgmt():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:309
//                     - and initialize the slab according to cachep
static slab_t *
kmem_cache_slabmgmt(kmem_cache_t *cachep, struct Page *page) {
    void *objp = page2kva(page);
    slab_t *slabp;
    if (cachep->off_slab) {
800148bc:	8e430020 	lw	v1,32(s2)
800148c0:	10600005 	beqz	v1,800148d8 <kmem_cache_alloc+0xd8>
800148c4:	02001021 	move	v0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:310
        if ((slabp = kmem_cache_alloc(cachep->slab_cachep)) == NULL) {
800148c8:	0c005200 	jal	80014800 <kmem_cache_alloc>
800148cc:	8e440028 	lw	a0,40(s2)
800148d0:	50400054 	beqzl	v0,80014a24 <kmem_cache_alloc+0x224>
800148d4:	8e450024 	lw	a1,36(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:318
    }
    else {
        slabp = page2kva(page);
    }
    slabp->inuse = 0;
    slabp->offset = cachep->offset;
800148d8:	8e43001c 	lw	v1,28(s2)
kmem_cache_grow():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:351
    slab_t *slabp;
    if ((slabp = kmem_cache_slabmgmt(cachep, page)) == NULL) {
        goto oops;
    }

    size_t order_size = (1 << cachep->page_order);
800148dc:	8e440024 	lw	a0,36(s2)
kmem_cache_slabmgmt():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:317
        }
    }
    else {
        slabp = page2kva(page);
    }
    slabp->inuse = 0;
800148e0:	ac40000c 	sw	zero,12(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:319
    slabp->offset = cachep->offset;
    slabp->s_mem = objp + cachep->offset;
800148e4:	02038021 	addu	s0,s0,v1
800148e8:	ac500008 	sw	s0,8(v0)
kmem_cache_grow():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:351
    slab_t *slabp;
    if ((slabp = kmem_cache_slabmgmt(cachep, page)) == NULL) {
        goto oops;
    }

    size_t order_size = (1 << cachep->page_order);
800148ec:	24100001 	li	s0,1
kmem_cache_slabmgmt():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:318
    }
    else {
        slabp = page2kva(page);
    }
    slabp->inuse = 0;
    slabp->offset = cachep->offset;
800148f0:	ac430010 	sw	v1,16(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:351
    slab_t *slabp;
    if ((slabp = kmem_cache_slabmgmt(cachep, page)) == NULL) {
        goto oops;
    }

    size_t order_size = (1 << cachep->page_order);
800148f4:	08005245 	j	80014914 <kmem_cache_alloc+0x114>
800148f8:	00908004 	sllv	s0,s0,a0
set_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:185
 * */
static __always_inline void set_bit(int nr, volatile uint32_t * addr)
{
	int intr_flag;
	local_intr_save(intr_flag);
	*addr |= (1 << nr);
800148fc:	8e230004 	lw	v1,4(s1)
kmem_cache_grow():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:359
        SET_PAGE_CACHE(page, cachep);
        SET_PAGE_SLAB(page, slabp);
	//this page is used for slab
        SetPageSlab(page);
        page ++;
    } while (-- order_size);
80014900:	2610ffff 	addiu	s0,s0,-1
set_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:185
80014904:	34630004 	ori	v1,v1,0x4
80014908:	ae230004 	sw	v1,4(s1)
kmem_cache_grow():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:359
8001490c:	12000011 	beqz	s0,80014954 <kmem_cache_alloc+0x154>
80014910:	26310020 	addiu	s1,s1,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:354
    }

    size_t order_size = (1 << cachep->page_order);
    do {
        //setup this page in the free list (see memlayout.h: struct page)???
        SET_PAGE_CACHE(page, cachep);
80014914:	ae320014 	sw	s2,20(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:355
        SET_PAGE_SLAB(page, slabp);
80014918:	ae220010 	sw	v0,16(s1)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8001491c:	40036000 	mfc0	v1,c0_status
80014920:	30630001 	andi	v1,v1,0x1
80014924:	1060fff5 	beqz	v1,800148fc <kmem_cache_alloc+0xfc>
80014928:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8001492c:	0c006d04 	jal	8001b410 <intr_disable>
80014930:	afa20010 	sw	v0,16(sp)
set_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:185
80014934:	8e230004 	lw	v1,4(s1)
kmem_cache_grow():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:359
	//this page is used for slab
        SetPageSlab(page);
        page ++;
    } while (-- order_size);
80014938:	2610ffff 	addiu	s0,s0,-1
set_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:185
8001493c:	34630004 	ori	v1,v1,0x4
80014940:	ae230004 	sw	v1,4(s1)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80014944:	0c006d00 	jal	8001b400 <intr_enable>
80014948:	26310020 	addiu	s1,s1,32
kmem_cache_grow():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:359
8001494c:	1600fff1 	bnez	s0,80014914 <kmem_cache_alloc+0x114>
80014950:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:362

    int i;
    for (i = 0; i < cachep->num; i ++) {
80014954:	8e440018 	lw	a0,24(s2)
80014958:	1080000b 	beqz	a0,80014988 <kmem_cache_alloc+0x188>
8001495c:	00001821 	move	v1,zero
80014960:	00002821 	move	a1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:363
        slab_bufctl(slabp)[i] = i + 1;
80014964:	24a50006 	addiu	a1,a1,6
80014968:	00052880 	sll	a1,a1,0x2
8001496c:	24630001 	addiu	v1,v1,1
80014970:	00452821 	addu	a1,v0,a1
80014974:	aca30000 	sw	v1,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:362
        SetPageSlab(page);
        page ++;
    } while (-- order_size);

    int i;
    for (i = 0; i < cachep->num; i ++) {
80014978:	8e440018 	lw	a0,24(s2)
8001497c:	0064302b 	sltu	a2,v1,a0
80014980:	14c0fff8 	bnez	a2,80014964 <kmem_cache_alloc+0x164>
80014984:	00602821 	move	a1,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:365
        slab_bufctl(slabp)[i] = i + 1;
    }
    slab_bufctl(slabp)[cachep->num - 1] = BUFCTL_END;
80014988:	24840005 	addiu	a0,a0,5
8001498c:	00042080 	sll	a0,a0,0x2
80014990:	00442021 	addu	a0,v0,a0
80014994:	ac9e0000 	sw	s8,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:366
    slabp->free = 0;
80014998:	ac400014 	sw	zero,20(v0)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8001499c:	40036000 	mfc0	v1,c0_status
800149a0:	30630001 	andi	v1,v1,0x1
800149a4:	14600007 	bnez	v1,800149c4 <kmem_cache_alloc+0x1c4>
800149a8:	00000000 	nop
list_add_after():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:93
 * Insert the new element @elm *after* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_after(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm, listelm->next);
800149ac:	8e43000c 	lw	v1,12(s2)
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
800149b0:	ae42000c 	sw	v0,12(s2)
800149b4:	ac620000 	sw	v0,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
	elm->next = next;
800149b8:	ac430004 	sw	v1,4(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->prev = prev;
800149bc:	08005212 	j	80014848 <kmem_cache_alloc+0x48>
800149c0:	ac540000 	sw	s4,0(v0)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
800149c4:	0c006d04 	jal	8001b410 <intr_disable>
800149c8:	afa20010 	sw	v0,16(sp)
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
800149cc:	8fa20010 	lw	v0,16(sp)
list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:93
 * Insert the new element @elm *after* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_after(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm, listelm->next);
800149d0:	8e43000c 	lw	v1,12(s2)
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
800149d4:	ae42000c 	sw	v0,12(s2)
800149d8:	ac620000 	sw	v0,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
	elm->next = next;
800149dc:	ac430004 	sw	v1,4(v0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
800149e0:	0c006d00 	jal	8001b400 <intr_enable>
800149e4:	ac540000 	sw	s4,0(v0)
800149e8:	08005212 	j	80014848 <kmem_cache_alloc+0x48>
800149ec:	00000000 	nop
kmem_cache_grow():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:419
    local_intr_restore(intr_flag);

    if (kmem_cache_grow(cachep)) {
        goto try_again;
    }
    return NULL;
800149f0:	00001021 	move	v0,zero
kmem_cache_alloc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:420
}
800149f4:	8fbf003c 	lw	ra,60(sp)
800149f8:	8fbe0038 	lw	s8,56(sp)
800149fc:	8fb70034 	lw	s7,52(sp)
80014a00:	8fb60030 	lw	s6,48(sp)
80014a04:	8fb5002c 	lw	s5,44(sp)
80014a08:	8fb40028 	lw	s4,40(sp)
80014a0c:	8fb30024 	lw	s3,36(sp)
80014a10:	8fb20020 	lw	s2,32(sp)
80014a14:	8fb1001c 	lw	s1,28(sp)
80014a18:	8fb00018 	lw	s0,24(sp)
80014a1c:	03e00008 	jr	ra
80014a20:	27bd0040 	addiu	sp,sp,64
kmem_cache_grow():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:419
    local_intr_restore(intr_flag);

    if (kmem_cache_grow(cachep)) {
        goto try_again;
    }
    return NULL;
80014a24:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:377
    }
    local_intr_restore(intr_flag);
    return 1;

oops:
    free_pages(page, 1 << cachep->page_order);
80014a28:	02202021 	move	a0,s1
80014a2c:	00b32804 	sllv	a1,s3,a1
80014a30:	0c007441 	jal	8001d104 <free_pages>
80014a34:	afa20010 	sw	v0,16(sp)
kmem_cache_alloc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:420

    if (kmem_cache_grow(cachep)) {
        goto try_again;
    }
    return NULL;
}
80014a38:	8fbf003c 	lw	ra,60(sp)
80014a3c:	8fa20010 	lw	v0,16(sp)
80014a40:	8fbe0038 	lw	s8,56(sp)
80014a44:	8fb70034 	lw	s7,52(sp)
80014a48:	8fb60030 	lw	s6,48(sp)
80014a4c:	8fb5002c 	lw	s5,44(sp)
80014a50:	8fb40028 	lw	s4,40(sp)
80014a54:	8fb30024 	lw	s3,36(sp)
80014a58:	8fb20020 	lw	s2,32(sp)
80014a5c:	8fb1001c 	lw	s1,28(sp)
80014a60:	8fb00018 	lw	s0,24(sp)
80014a64:	03e00008 	jr	ra
80014a68:	27bd0040 	addiu	sp,sp,64
kmem_cache_alloc_one():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:386

// kmem_cache_alloc_one - allocate a obj in a slab
static void * 
kmem_cache_alloc_one(kmem_cache_t *cachep, slab_t *slabp) {
    slabp->inuse ++;
    void *objp = slabp->s_mem + slabp->free * cachep->objsize;
80014a6c:	8e470010 	lw	a3,16(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:385
}

// kmem_cache_alloc_one - allocate a obj in a slab
static void * 
kmem_cache_alloc_one(kmem_cache_t *cachep, slab_t *slabp) {
    slabp->inuse ++;
80014a70:	8c82000c 	lw	v0,12(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:387
    void *objp = slabp->s_mem + slabp->free * cachep->objsize;
    slabp->free = slab_bufctl(slabp)[slabp->free];
80014a74:	24c50006 	addiu	a1,a2,6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:386

// kmem_cache_alloc_one - allocate a obj in a slab
static void * 
kmem_cache_alloc_one(kmem_cache_t *cachep, slab_t *slabp) {
    slabp->inuse ++;
    void *objp = slabp->s_mem + slabp->free * cachep->objsize;
80014a78:	70c74002 	mul	t0,a2,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:385
}

// kmem_cache_alloc_one - allocate a obj in a slab
static void * 
kmem_cache_alloc_one(kmem_cache_t *cachep, slab_t *slabp) {
    slabp->inuse ++;
80014a7c:	24420001 	addiu	v0,v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:387
    void *objp = slabp->s_mem + slabp->free * cachep->objsize;
    slabp->free = slab_bufctl(slabp)[slabp->free];
80014a80:	00052880 	sll	a1,a1,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:385
}

// kmem_cache_alloc_one - allocate a obj in a slab
static void * 
kmem_cache_alloc_one(kmem_cache_t *cachep, slab_t *slabp) {
    slabp->inuse ++;
80014a84:	ac82000c 	sw	v0,12(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:387
    void *objp = slabp->s_mem + slabp->free * cachep->objsize;
    slabp->free = slab_bufctl(slabp)[slabp->free];
80014a88:	00852821 	addu	a1,a0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:386

// kmem_cache_alloc_one - allocate a obj in a slab
static void * 
kmem_cache_alloc_one(kmem_cache_t *cachep, slab_t *slabp) {
    slabp->inuse ++;
    void *objp = slabp->s_mem + slabp->free * cachep->objsize;
80014a8c:	8c820008 	lw	v0,8(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:387
    slabp->free = slab_bufctl(slabp)[slabp->free];
80014a90:	8ca50000 	lw	a1,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:389

    if (slabp->free == BUFCTL_END) {
80014a94:	2406ffff 	li	a2,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:387
// kmem_cache_alloc_one - allocate a obj in a slab
static void * 
kmem_cache_alloc_one(kmem_cache_t *cachep, slab_t *slabp) {
    slabp->inuse ++;
    void *objp = slabp->s_mem + slabp->free * cachep->objsize;
    slabp->free = slab_bufctl(slabp)[slabp->free];
80014a98:	ac850014 	sw	a1,20(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:389

    if (slabp->free == BUFCTL_END) {
80014a9c:	10a60012 	beq	a1,a2,80014ae8 <kmem_cache_alloc+0x2e8>
80014aa0:	01021021 	addu	v0,t0,v0
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80014aa4:	1060ffd4 	beqz	v1,800149f8 <kmem_cache_alloc+0x1f8>
80014aa8:	8fbf003c 	lw	ra,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
80014aac:	0c006d00 	jal	8001b400 <intr_enable>
80014ab0:	afa20010 	sw	v0,16(sp)
kmem_cache_alloc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:420

    if (kmem_cache_grow(cachep)) {
        goto try_again;
    }
    return NULL;
}
80014ab4:	8fbf003c 	lw	ra,60(sp)
80014ab8:	8fa20010 	lw	v0,16(sp)
80014abc:	8fbe0038 	lw	s8,56(sp)
80014ac0:	8fb70034 	lw	s7,52(sp)
80014ac4:	8fb60030 	lw	s6,48(sp)
80014ac8:	8fb5002c 	lw	s5,44(sp)
80014acc:	8fb40028 	lw	s4,40(sp)
80014ad0:	8fb30024 	lw	s3,36(sp)
80014ad4:	8fb20020 	lw	s2,32(sp)
80014ad8:	8fb1001c 	lw	s1,28(sp)
80014adc:	8fb00018 	lw	s0,24(sp)
80014ae0:	03e00008 	jr	ra
80014ae4:	27bd0040 	addiu	sp,sp,64
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
80014ae8:	8c870000 	lw	a3,0(a0)
80014aec:	8c860004 	lw	a2,4(a0)
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
80014af0:	ace60004 	sw	a2,4(a3)
list_add_after():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:93
 * Insert the new element @elm *after* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_after(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm, listelm->next);
80014af4:	8e450004 	lw	a1,4(s2)
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:170
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
	next->prev = prev;
80014af8:	acc70000 	sw	a3,0(a2)
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
80014afc:	ae440004 	sw	a0,4(s2)
80014b00:	aca40000 	sw	a0,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
	elm->next = next;
80014b04:	ac850004 	sw	a1,4(a0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80014b08:	1060ffba 	beqz	v1,800149f4 <kmem_cache_alloc+0x1f4>
80014b0c:	ac920000 	sw	s2,0(a0)
80014b10:	080052ab 	j	80014aac <kmem_cache_alloc+0x2ac>
80014b14:	00000000 	nop
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
80014b18:	3c048002 	lui	a0,0x8002
80014b1c:	3c068002 	lui	a2,0x8002
80014b20:	248429ec 	addiu	a0,a0,10732
80014b24:	2405006a 	li	a1,106
80014b28:	24c62a74 	addiu	a2,a2,10868
80014b2c:	0c006b0b 	jal	8001ac2c <__panic>
80014b30:	02003821 	move	a3,s0

80014b34 <kmem_cache_free>:
kva2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:111
}

static inline struct Page *kva2page(void *kva)
{
	return pa2page(PADDR(kva));
80014b34:	3c028000 	lui	v0,0x8000
80014b38:	24421000 	addiu	v0,v0,4096
kmem_cache_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:485
#define GET_PAGE_SLAB(page)                                 \
    (slab_t *)((page)->page_link.prev)

// kmem_cache_free - call kmem_cache_free_one function to free an obj 
static void
kmem_cache_free(kmem_cache_t *cachep, void *objp) {
80014b3c:	27bdffc8 	addiu	sp,sp,-56
kva2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:111
80014b40:	00a2102b 	sltu	v0,a1,v0
kmem_cache_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:485
80014b44:	afb2001c 	sw	s2,28(sp)
80014b48:	afb00014 	sw	s0,20(sp)
80014b4c:	afbf0034 	sw	ra,52(sp)
80014b50:	afb70030 	sw	s7,48(sp)
80014b54:	afb6002c 	sw	s6,44(sp)
80014b58:	afb50028 	sw	s5,40(sp)
80014b5c:	afb40024 	sw	s4,36(sp)
80014b60:	afb30020 	sw	s3,32(sp)
80014b64:	afb10018 	sw	s1,24(sp)
80014b68:	00a08021 	move	s0,a1
kva2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:111
80014b6c:	144000b2 	bnez	v0,80014e38 <kmem_cache_free+0x304>
80014b70:	00809021 	move	s2,a0
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
80014b74:	3c158015 	lui	s5,0x8015
80014b78:	3c027fff 	lui	v0,0x7fff
80014b7c:	8ea37770 	lw	v1,30576(s5)
80014b80:	3442f000 	ori	v0,v0,0xf000
80014b84:	00a21021 	addu	v0,a1,v0
80014b88:	00021302 	srl	v0,v0,0xc
80014b8c:	0043182b 	sltu	v1,v0,v1
80014b90:	1060009d 	beqz	v1,80014e08 <kmem_cache_free+0x2d4>
80014b94:	3c148015 	lui	s4,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
		panic("pa2page called with invalid pa");
	}
	return &pages[PPN(pa)];
80014b98:	8e9177bc 	lw	s1,30652(s4)
80014b9c:	00021140 	sll	v0,v0,0x5
80014ba0:	02228821 	addu	s1,s1,v0
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80014ba4:	40026000 	mfc0	v0,c0_status
80014ba8:	30420001 	andi	v0,v0,0x1
80014bac:	14400040 	bnez	v0,80014cb0 <kmem_cache_free+0x17c>
80014bb0:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
80014bb4:	8e330004 	lw	s3,4(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
80014bb8:	7e730080 	ext	s3,s3,0x2,0x1
kmem_cache_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:489
    bool intr_flag;
    struct Page *page = kva2page(objp);

    if (!PageSlab(page)) {
80014bbc:	12600098 	beqz	s3,80014e20 <kmem_cache_free+0x2ec>
80014bc0:	3c048002 	lui	a0,0x8002
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
80014bc4:	40026000 	mfc0	v0,c0_status
80014bc8:	30420001 	andi	v0,v0,0x1
80014bcc:	10400003 	beqz	v0,80014bdc <kmem_cache_free+0xa8>
80014bd0:	00009821 	move	s3,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80014bd4:	0c006d04 	jal	8001b410 <intr_disable>
80014bd8:	24130001 	li	s3,1
kmem_cache_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:494
        panic("not a slab page %08x\n", objp);
    }
    local_intr_save(intr_flag);
    {
        kmem_cache_free_one(cachep, GET_PAGE_SLAB(page), objp);
80014bdc:	8e310010 	lw	s1,16(s1)
kmem_cache_free_one():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:461
// kmem_cache_free_one - free an obj in a slab
//                     - if slab->inuse==0, then free the slab
static void
kmem_cache_free_one(kmem_cache_t *cachep, slab_t *slabp, void *objp) {
    //should not use divide operator ???
    size_t objnr = (objp - slabp->s_mem) >> cachep->objsize_shift;
80014be0:	8e420014 	lw	v0,20(s2)
80014be4:	8e230008 	lw	v1,8(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:462
    slab_bufctl(slabp)[objnr] = slabp->free;
80014be8:	8e240014 	lw	a0,20(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:461
// kmem_cache_free_one - free an obj in a slab
//                     - if slab->inuse==0, then free the slab
static void
kmem_cache_free_one(kmem_cache_t *cachep, slab_t *slabp, void *objp) {
    //should not use divide operator ???
    size_t objnr = (objp - slabp->s_mem) >> cachep->objsize_shift;
80014bec:	02038023 	subu	s0,s0,v1
80014bf0:	00508007 	srav	s0,s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:462
    slab_bufctl(slabp)[objnr] = slabp->free;
80014bf4:	26020006 	addiu	v0,s0,6
80014bf8:	00021080 	sll	v0,v0,0x2
80014bfc:	02221021 	addu	v0,s1,v0
80014c00:	ac440000 	sw	a0,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:465
    slabp->free = objnr;

    slabp->inuse --;
80014c04:	8e22000c 	lw	v0,12(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:463
static void
kmem_cache_free_one(kmem_cache_t *cachep, slab_t *slabp, void *objp) {
    //should not use divide operator ???
    size_t objnr = (objp - slabp->s_mem) >> cachep->objsize_shift;
    slab_bufctl(slabp)[objnr] = slabp->free;
    slabp->free = objnr;
80014c08:	ae300014 	sw	s0,20(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:465

    slabp->inuse --;
80014c0c:	2442ffff 	addiu	v0,v0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:467

    if (slabp->inuse == 0) {
80014c10:	1040002e 	beqz	v0,80014ccc <kmem_cache_free+0x198>
80014c14:	ae22000c 	sw	v0,12(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:471
        list_del(&(slabp->slab_link));
        kmem_slab_destroy(cachep, slabp);
    }
    else if (slabp->inuse == cachep->num -1 ) {
80014c18:	8e430018 	lw	v1,24(s2)
80014c1c:	2463ffff 	addiu	v1,v1,-1
80014c20:	5043000e 	beql	v0,v1,80014c5c <kmem_cache_free+0x128>
80014c24:	8e240000 	lw	a0,0(s1)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80014c28:	16600017 	bnez	s3,80014c88 <kmem_cache_free+0x154>
80014c2c:	8fbf0034 	lw	ra,52(sp)
kmem_cache_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:497
    local_intr_save(intr_flag);
    {
        kmem_cache_free_one(cachep, GET_PAGE_SLAB(page), objp);
    }
    local_intr_restore(intr_flag);
}
80014c30:	8fbf0034 	lw	ra,52(sp)
80014c34:	8fb70030 	lw	s7,48(sp)
80014c38:	8fb6002c 	lw	s6,44(sp)
80014c3c:	8fb50028 	lw	s5,40(sp)
80014c40:	8fb40024 	lw	s4,36(sp)
80014c44:	8fb30020 	lw	s3,32(sp)
80014c48:	8fb2001c 	lw	s2,28(sp)
80014c4c:	8fb10018 	lw	s1,24(sp)
80014c50:	8fb00014 	lw	s0,20(sp)
80014c54:	03e00008 	jr	ra
80014c58:	27bd0038 	addiu	sp,sp,56
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
80014c5c:	8e230004 	lw	v1,4(s1)
kmem_cache_free_one():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:473
        list_del(&(slabp->slab_link));
        kmem_slab_destroy(cachep, slabp);
    }
    else if (slabp->inuse == cachep->num -1 ) {
        list_del(&(slabp->slab_link));
        list_add(&(cachep->slabs_notfull), &(slabp->slab_link));
80014c60:	26450008 	addiu	a1,s2,8
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
80014c64:	ac830004 	sw	v1,4(a0)
list_add_after():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:93
 * Insert the new element @elm *after* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_after(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm, listelm->next);
80014c68:	8e42000c 	lw	v0,12(s2)
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:170
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
	next->prev = prev;
80014c6c:	ac640000 	sw	a0,0(v1)
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
80014c70:	ae51000c 	sw	s1,12(s2)
80014c74:	ac510000 	sw	s1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
	elm->next = next;
80014c78:	ae220004 	sw	v0,4(s1)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
80014c7c:	1260ffec 	beqz	s3,80014c30 <kmem_cache_free+0xfc>
80014c80:	ae250000 	sw	a1,0(s1)
kmem_cache_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:497
    local_intr_save(intr_flag);
    {
        kmem_cache_free_one(cachep, GET_PAGE_SLAB(page), objp);
    }
    local_intr_restore(intr_flag);
}
80014c84:	8fbf0034 	lw	ra,52(sp)
80014c88:	8fb70030 	lw	s7,48(sp)
80014c8c:	8fb6002c 	lw	s6,44(sp)
80014c90:	8fb50028 	lw	s5,40(sp)
80014c94:	8fb40024 	lw	s4,36(sp)
80014c98:	8fb30020 	lw	s3,32(sp)
80014c9c:	8fb2001c 	lw	s2,28(sp)
80014ca0:	8fb10018 	lw	s1,24(sp)
80014ca4:	8fb00014 	lw	s0,20(sp)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
80014ca8:	08006d00 	j	8001b400 <intr_enable>
80014cac:	27bd0038 	addiu	sp,sp,56
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
80014cb0:	0c006d04 	jal	8001b410 <intr_disable>
80014cb4:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
80014cb8:	8e330004 	lw	s3,4(s1)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80014cbc:	0c006d00 	jal	8001b400 <intr_enable>
80014cc0:	7e730080 	ext	s3,s3,0x2,0x1
80014cc4:	080052ef 	j	80014bbc <kmem_cache_free+0x88>
80014cc8:	00000000 	nop
kmem_slab_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:439
static void kmem_cache_free(kmem_cache_t *cachep, void *obj);

// kmem_slab_destroy - call free_pages & kmem_cache_free to free a slab 
static void
kmem_slab_destroy(kmem_cache_t *cachep, slab_t *slabp) {
    struct Page *page = kva2page(slabp->s_mem - slabp->offset);
80014ccc:	8e270010 	lw	a3,16(s1)
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
80014cd0:	8e240000 	lw	a0,0(s1)
80014cd4:	8e220004 	lw	v0,4(s1)
kmem_slab_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:439
80014cd8:	00673823 	subu	a3,v1,a3
kva2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:111
	return KADDR(page2pa(page));
}

static inline struct Page *kva2page(void *kva)
{
	return pa2page(PADDR(kva));
80014cdc:	3c038000 	lui	v1,0x8000
80014ce0:	24631000 	addiu	v1,v1,4096
80014ce4:	00e3182b 	sltu	v1,a3,v1
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
80014ce8:	ac820004 	sw	v0,4(a0)
kva2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:111
80014cec:	14600059 	bnez	v1,80014e54 <kmem_cache_free+0x320>
80014cf0:	ac440000 	sw	a0,0(v0)
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
80014cf4:	3c177fff 	lui	s7,0x7fff
80014cf8:	8ea27770 	lw	v0,30576(s5)
80014cfc:	36f7f000 	ori	s7,s7,0xf000
80014d00:	00f73821 	addu	a3,a3,s7
80014d04:	00073b02 	srl	a3,a3,0xc
80014d08:	00e2102b 	sltu	v0,a3,v0
80014d0c:	1040003e 	beqz	v0,80014e08 <kmem_cache_free+0x2d4>
80014d10:	8e9777bc 	lw	s7,30652(s4)
kmem_slab_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:442

    struct Page *p = page;
    size_t order_size = (1 << cachep->page_order);
80014d14:	8e420024 	lw	v0,36(s2)
kva2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
		panic("pa2page called with invalid pa");
	}
	return &pages[PPN(pa)];
80014d18:	00073940 	sll	a3,a3,0x5
80014d1c:	02e7b821 	addu	s7,s7,a3
kmem_slab_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:442
80014d20:	24140001 	li	s4,1
80014d24:	0054a004 	sllv	s4,s4,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:441
// kmem_slab_destroy - call free_pages & kmem_cache_free to free a slab 
static void
kmem_slab_destroy(kmem_cache_t *cachep, slab_t *slabp) {
    struct Page *page = kva2page(slabp->s_mem - slabp->offset);

    struct Page *p = page;
80014d28:	02e08021 	move	s0,s7
clear_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:199
 * */
static __always_inline void clear_bit(int nr, volatile uint32_t * addr)
{
	int intr_flag;
	local_intr_save(intr_flag);
	*addr &= ~(1 << nr);
80014d2c:	2416fffb 	li	s6,-5
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80014d30:	40026000 	mfc0	v0,c0_status
80014d34:	30420001 	andi	v0,v0,0x1
80014d38:	1440001c 	bnez	v0,80014dac <kmem_cache_free+0x278>
80014d3c:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
80014d40:	8e150004 	lw	s5,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
80014d44:	7eb50080 	ext	s5,s5,0x2,0x1
kmem_slab_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:444
    size_t order_size = (1 << cachep->page_order);
    do {
        assert(PageSlab(p));
80014d48:	52a00028 	beqzl	s5,80014dec <kmem_cache_free+0x2b8>
80014d4c:	3c048002 	lui	a0,0x8002
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
80014d50:	40026000 	mfc0	v0,c0_status
80014d54:	30420001 	andi	v0,v0,0x1
80014d58:	1440001b 	bnez	v0,80014dc8 <kmem_cache_free+0x294>
80014d5c:	00000000 	nop
clear_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:199
 * */
static __always_inline void clear_bit(int nr, volatile uint32_t * addr)
{
	int intr_flag;
	local_intr_save(intr_flag);
	*addr &= ~(1 << nr);
80014d60:	8e020004 	lw	v0,4(s0)
80014d64:	00561024 	and	v0,v0,s6
80014d68:	ae020004 	sw	v0,4(s0)
kmem_slab_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:447
        ClearPageSlab(p);
        p ++;
    } while (-- order_size);
80014d6c:	2694ffff 	addiu	s4,s4,-1
80014d70:	1680ffef 	bnez	s4,80014d30 <kmem_cache_free+0x1fc>
80014d74:	26100020 	addiu	s0,s0,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:449

    free_pages(page, 1 << cachep->page_order);
80014d78:	8e420024 	lw	v0,36(s2)
80014d7c:	24050001 	li	a1,1
80014d80:	02e02021 	move	a0,s7
80014d84:	0c007441 	jal	8001d104 <free_pages>
80014d88:	00452804 	sllv	a1,a1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:451

    if (cachep->off_slab) {
80014d8c:	8e420020 	lw	v0,32(s2)
80014d90:	1040ffa5 	beqz	v0,80014c28 <kmem_cache_free+0xf4>
80014d94:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:452
        kmem_cache_free(cachep->slab_cachep, slabp);
80014d98:	8e440028 	lw	a0,40(s2)
80014d9c:	0c0052cd 	jal	80014b34 <kmem_cache_free>
80014da0:	02202821 	move	a1,s1
80014da4:	0800530a 	j	80014c28 <kmem_cache_free+0xf4>
80014da8:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80014dac:	0c006d04 	jal	8001b410 <intr_disable>
80014db0:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
80014db4:	8e150004 	lw	s5,4(s0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80014db8:	0c006d00 	jal	8001b400 <intr_enable>
80014dbc:	7eb50080 	ext	s5,s5,0x2,0x1
80014dc0:	08005352 	j	80014d48 <kmem_cache_free+0x214>
80014dc4:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
80014dc8:	0c006d04 	jal	8001b410 <intr_disable>
80014dcc:	00000000 	nop
clear_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:199
 * */
static __always_inline void clear_bit(int nr, volatile uint32_t * addr)
{
	int intr_flag;
	local_intr_save(intr_flag);
	*addr &= ~(1 << nr);
80014dd0:	8e020004 	lw	v0,4(s0)
80014dd4:	00561024 	and	v0,v0,s6
80014dd8:	ae020004 	sw	v0,4(s0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80014ddc:	0c006d00 	jal	8001b400 <intr_enable>
80014de0:	2694ffff 	addiu	s4,s4,-1
80014de4:	0800535c 	j	80014d70 <kmem_cache_free+0x23c>
80014de8:	00000000 	nop
kmem_slab_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:444
    struct Page *page = kva2page(slabp->s_mem - slabp->offset);

    struct Page *p = page;
    size_t order_size = (1 << cachep->page_order);
    do {
        assert(PageSlab(p));
80014dec:	3c068002 	lui	a2,0x8002
80014df0:	3c078002 	lui	a3,0x8002
80014df4:	248433a0 	addiu	a0,a0,13216
80014df8:	240501bc 	li	a1,444
80014dfc:	24c60e28 	addiu	a2,a2,3624
80014e00:	0c006b0b 	jal	8001ac2c <__panic>
80014e04:	24e733c0 	addiu	a3,a3,13248
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:99
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
		panic("pa2page called with invalid pa");
80014e08:	3c048002 	lui	a0,0x8002
80014e0c:	3c068002 	lui	a2,0x8002
80014e10:	248429ec 	addiu	a0,a0,10732
80014e14:	24050063 	li	a1,99
80014e18:	0c006b0b 	jal	8001ac2c <__panic>
80014e1c:	24c62a54 	addiu	a2,a2,10836
kmem_cache_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:490
kmem_cache_free(kmem_cache_t *cachep, void *objp) {
    bool intr_flag;
    struct Page *page = kva2page(objp);

    if (!PageSlab(page)) {
        panic("not a slab page %08x\n", objp);
80014e20:	3c068002 	lui	a2,0x8002
80014e24:	248433a0 	addiu	a0,a0,13216
80014e28:	240501ea 	li	a1,490
80014e2c:	24c633a8 	addiu	a2,a2,13224
80014e30:	0c006b0b 	jal	8001ac2c <__panic>
80014e34:	02003821 	move	a3,s0
kva2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:111
	return KADDR(page2pa(page));
}

static inline struct Page *kva2page(void *kva)
{
	return pa2page(PADDR(kva));
80014e38:	3c048002 	lui	a0,0x8002
80014e3c:	3c068002 	lui	a2,0x8002
80014e40:	248429ec 	addiu	a0,a0,10732
80014e44:	2405006f 	li	a1,111
80014e48:	24c62a30 	addiu	a2,a2,10800
80014e4c:	0c006b0b 	jal	8001ac2c <__panic>
80014e50:	02003821 	move	a3,s0
80014e54:	3c048002 	lui	a0,0x8002
80014e58:	3c068002 	lui	a2,0x8002
80014e5c:	248429ec 	addiu	a0,a0,10732
80014e60:	2405006f 	li	a1,111
80014e64:	0c006b0b 	jal	8001ac2c <__panic>
80014e68:	24c62a30 	addiu	a2,a2,10800

80014e6c <slab_init>:
slab_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:117

#define ALIGN_SHIFT 4

//slab_init - call init_kmem_cache function to reset the slab_cache array
void
slab_init(void) {
80014e6c:	27bdffd0 	addiu	sp,sp,-48
80014e70:	afb3001c 	sw	s3,28(sp)
80014e74:	3c0f8015 	lui	t7,0x8015
calculate_slab_order():
80014e78:	3c138002 	lui	s3,0x8002
slab_init():
80014e7c:	afb20018 	sw	s2,24(sp)
80014e80:	afb10014 	sw	s1,20(sp)
80014e84:	afb00010 	sw	s0,16(sp)
80014e88:	afbf002c 	sw	ra,44(sp)
80014e8c:	afb60028 	sw	s6,40(sp)
80014e90:	afb50024 	sw	s5,36(sp)
80014e94:	afb40020 	sw	s4,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:121
    size_t i;
    //the align bit for obj in slab. 2^n could be better for performance
    //size_t align = 16;
    for (i = 0; i < SLAB_CACHE_NUM; i ++) {
80014e98:	00006021 	move	t4,zero
80014e9c:	25ef654c 	addiu	t7,t7,25932
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:122
        init_kmem_cache(slab_cache + i, 1 << (i + MIN_SIZE_ORDER));
80014ea0:	24180001 	li	t8,1
getorder():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:257

// getorder - find order, should satisfy n <= minest 2^order
static inline size_t
getorder(size_t n) {
    size_t order = MIN_SIZE_ORDER, order_size = (1 << order);
    for (; order <= MAX_SIZE_ORDER; order ++, order_size <<= 1) {
80014ea4:	240d0012 	li	t5,18
calculate_slab_order():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:117

#define ALIGN_SHIFT 4

//slab_init - call init_kmem_cache function to reset the slab_cache array
void
slab_init(void) {
80014ea8:	2673ffcc 	addiu	s3,s3,-52
cache_estimate():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:179

// cacahe_estimate - estimate the number of objs in a slab
static void
cache_estimate(size_t order, size_t objsize_shift, bool off_slab, size_t *remainder, size_t *num) {
    size_t nr_objs, mgmt_size;
    size_t slab_size = (PGSIZE << order);
80014eac:	24121000 	li	s2,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:202
        //nr_objs = (slab_size - sizeof(slab_t)) / (objsize + sizeof(kmem_bufctl_t));
        nr_objs = __slab_div_table[order][objsize_shift - 5];
        while (slab_mgmt_size(nr_objs) + nr_objs * objsize > slab_size) {
            nr_objs --;
        }
        if (nr_objs > SLAB_LIMIT) {
80014eb0:	2411ffff 	li	s1,-1
calculate_slab_order():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:226
//   left_over: the size of can not be used area in slab
static void
calculate_slab_order(kmem_cache_t *cachep, size_t objsize_shift, bool off_slab, size_t *left_over) {
    size_t order;
    size_t objsize = 1 << objsize_shift;
    for (order = 0; order <= KMALLOC_MAX_ORDER; order ++) {
80014eb4:	2410000b 	li	s0,11
slab_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:121
void
slab_init(void) {
    size_t i;
    //the align bit for obj in slab. 2^n could be better for performance
    //size_t align = 16;
    for (i = 0; i < SLAB_CACHE_NUM; i ++) {
80014eb8:	2419000d 	li	t9,13
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:117

#define ALIGN_SHIFT 4

//slab_init - call init_kmem_cache function to reset the slab_cache array
void
slab_init(void) {
80014ebc:	25870005 	addiu	a3,t4,5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:122
    size_t i;
    //the align bit for obj in slab. 2^n could be better for performance
    //size_t align = 16;
    for (i = 0; i < SLAB_CACHE_NUM; i ++) {
        init_kmem_cache(slab_cache + i, 1 << (i + MIN_SIZE_ORDER));
80014ec0:	000c1080 	sll	v0,t4,0x2
80014ec4:	000c1900 	sll	v1,t4,0x4
80014ec8:	00f83804 	sllv	a3,t8,a3
80014ecc:	00621823 	subu	v1,v1,v0
init_kmem_cache():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:272
static void
init_kmem_cache(kmem_cache_t *cachep, size_t objsize) {
    list_init(&(cachep->slabs_full));
    list_init(&(cachep->slabs_notfull));

    objsize = ROUNDUP_2N(objsize, ALIGN_SHIFT);
80014ed0:	24e7000f 	addiu	a3,a3,15
slab_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:122
slab_init(void) {
    size_t i;
    //the align bit for obj in slab. 2^n could be better for performance
    //size_t align = 16;
    for (i = 0; i < SLAB_CACHE_NUM; i ++) {
        init_kmem_cache(slab_cache + i, 1 << (i + MIN_SIZE_ORDER));
80014ed4:	006c1823 	subu	v1,v1,t4
init_kmem_cache():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:272
static void
init_kmem_cache(kmem_cache_t *cachep, size_t objsize) {
    list_init(&(cachep->slabs_full));
    list_init(&(cachep->slabs_notfull));

    objsize = ROUNDUP_2N(objsize, ALIGN_SHIFT);
80014ed8:	00073902 	srl	a3,a3,0x4
80014edc:	00073900 	sll	a3,a3,0x4
slab_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:122
slab_init(void) {
    size_t i;
    //the align bit for obj in slab. 2^n could be better for performance
    //size_t align = 16;
    for (i = 0; i < SLAB_CACHE_NUM; i ++) {
        init_kmem_cache(slab_cache + i, 1 << (i + MIN_SIZE_ORDER));
80014ee0:	00031880 	sll	v1,v1,0x2
80014ee4:	01e31821 	addu	v1,t7,v1
init_kmem_cache():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:274
    list_init(&(cachep->slabs_full));
    list_init(&(cachep->slabs_notfull));

    objsize = ROUNDUP_2N(objsize, ALIGN_SHIFT);
    cachep->objsize = objsize;
    cachep->off_slab = (objsize >= (PGSIZE >> 3));
80014ee8:	2cee0200 	sltiu	t6,a3,512
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:270

// init_kmem_cache - initial a slab_cache cachep according to the obj with the size = objsize
static void
init_kmem_cache(kmem_cache_t *cachep, size_t objsize) {
    list_init(&(cachep->slabs_full));
    list_init(&(cachep->slabs_notfull));
80014eec:	24620008 	addiu	v0,v1,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:274

    objsize = ROUNDUP_2N(objsize, ALIGN_SHIFT);
    cachep->objsize = objsize;
    cachep->off_slab = (objsize >= (PGSIZE >> 3));
80014ef0:	39ce0001 	xori	t6,t6,0x1
getorder():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:258
// getorder - find order, should satisfy n <= minest 2^order
static inline size_t
getorder(size_t n) {
    size_t order = MIN_SIZE_ORDER, order_size = (1 << order);
    for (; order <= MAX_SIZE_ORDER; order ++, order_size <<= 1) {
        if (n <= order_size) {
80014ef4:	2ce40021 	sltiu	a0,a3,33
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
 * list_init - initialize a new entry
 * @elm:        new entry to be initialized
 * */
static inline void list_init(list_entry_t * elm)
{
	elm->prev = elm->next = elm;
80014ef8:	ac630004 	sw	v1,4(v1)
80014efc:	ac630000 	sw	v1,0(v1)
80014f00:	ac62000c 	sw	v0,12(v1)
80014f04:	ac620008 	sw	v0,8(v1)
init_kmem_cache():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:273
init_kmem_cache(kmem_cache_t *cachep, size_t objsize) {
    list_init(&(cachep->slabs_full));
    list_init(&(cachep->slabs_notfull));

    objsize = ROUNDUP_2N(objsize, ALIGN_SHIFT);
    cachep->objsize = objsize;
80014f08:	ac670010 	sw	a3,16(v1)
getorder():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:258
// getorder - find order, should satisfy n <= minest 2^order
static inline size_t
getorder(size_t n) {
    size_t order = MIN_SIZE_ORDER, order_size = (1 << order);
    for (; order <= MAX_SIZE_ORDER; order ++, order_size <<= 1) {
        if (n <= order_size) {
80014f0c:	14800054 	bnez	a0,80015060 <slab_init+0x1f4>
80014f10:	ac6e0020 	sw	t6,32(v1)
80014f14:	24040040 	li	a0,64
80014f18:	24020006 	li	v0,6
80014f1c:	0087282b 	sltu	a1,a0,a3
80014f20:	10a0000a 	beqz	a1,80014f4c <slab_init+0xe0>
80014f24:	0040a821 	move	s5,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:257

// getorder - find order, should satisfy n <= minest 2^order
static inline size_t
getorder(size_t n) {
    size_t order = MIN_SIZE_ORDER, order_size = (1 << order);
    for (; order <= MAX_SIZE_ORDER; order ++, order_size <<= 1) {
80014f28:	24420001 	addiu	v0,v0,1
80014f2c:	144dfffb 	bne	v0,t5,80014f1c <slab_init+0xb0>
80014f30:	00042040 	sll	a0,a0,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:262
        if (n <= order_size) {
            return order;
        }
    }
    panic("getorder failed. %d\n", n);
80014f34:	3c048002 	lui	a0,0x8002
80014f38:	3c068002 	lui	a2,0x8002
80014f3c:	248433a0 	addiu	a0,a0,13216
80014f40:	24050106 	li	a1,262
80014f44:	0c006b0b 	jal	8001ac2c <__panic>
80014f48:	24c633cc 	addiu	a2,a2,13260
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:258
// getorder - find order, should satisfy n <= minest 2^order
static inline size_t
getorder(size_t n) {
    size_t order = MIN_SIZE_ORDER, order_size = (1 << order);
    for (; order <= MAX_SIZE_ORDER; order ++, order_size <<= 1) {
        if (n <= order_size) {
80014f4c:	00582804 	sllv	a1,t8,v0
calculate_slab_order():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:198
    }
    else {
        /* no div! precomputed */
        //panic("no div, precompute?");
        //nr_objs = (slab_size - sizeof(slab_t)) / (objsize + sizeof(kmem_bufctl_t));
        nr_objs = __slab_div_table[order][objsize_shift - 5];
80014f50:	2456fffb 	addiu	s6,v0,-5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:231
    for (order = 0; order <= KMALLOC_MAX_ORDER; order ++) {
        size_t num, remainder;
        cache_estimate(order, objsize_shift, off_slab, &remainder, &num);
        if (num != 0) {
            if (off_slab) {
                size_t off_slab_limit = objsize - sizeof(slab_t);
80014f54:	24a7ffe8 	addiu	a3,a1,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:117

#define ALIGN_SHIFT 4

//slab_init - call init_kmem_cache function to reset the slab_cache array
void
slab_init(void) {
80014f58:	0016b080 	sll	s6,s6,0x2
init_kmem_cache():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:276

    objsize = ROUNDUP_2N(objsize, ALIGN_SHIFT);
    cachep->objsize = objsize;
    cachep->off_slab = (objsize >= (PGSIZE >> 3));
//    cachep->off_slab = 1;
    cachep->objsize_shift = getorder(objsize);
80014f5c:	ac620014 	sw	v0,20(v1)
calculate_slab_order():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:233
        cache_estimate(order, objsize_shift, off_slab, &remainder, &num);
        if (num != 0) {
            if (off_slab) {
                size_t off_slab_limit = objsize - sizeof(slab_t);
                /* sizeof(kmem_cache_t) == 4 */
                off_slab_limit /= sizeof(kmem_bufctl_t);
80014f60:	00073882 	srl	a3,a3,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:117

#define ALIGN_SHIFT 4

//slab_init - call init_kmem_cache function to reset the slab_cache array
void
slab_init(void) {
80014f64:	0276b021 	addu	s6,s3,s6
getorder():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:226
//   left_over: the size of can not be used area in slab
static void
calculate_slab_order(kmem_cache_t *cachep, size_t objsize_shift, bool off_slab, size_t *left_over) {
    size_t order;
    size_t objsize = 1 << objsize_shift;
    for (order = 0; order <= KMALLOC_MAX_ORDER; order ++) {
80014f68:	0000a021 	move	s4,zero
cache_estimate():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:182
cache_estimate(size_t order, size_t objsize_shift, bool off_slab, size_t *remainder, size_t *num) {
    size_t nr_objs, mgmt_size;
    size_t slab_size = (PGSIZE << order);
    size_t objsize = 1<<objsize_shift;

    if (off_slab) {
80014f6c:	11c0001a 	beqz	t6,80014fd8 <slab_init+0x16c>
80014f70:	02925004 	sllv	t2,s2,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:184
        mgmt_size = 0;
        nr_objs = slab_size >> objsize_shift;
80014f74:	02aa3006 	srlv	a2,t2,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:183
    size_t nr_objs, mgmt_size;
    size_t slab_size = (PGSIZE << order);
    size_t objsize = 1<<objsize_shift;

    if (off_slab) {
        mgmt_size = 0;
80014f78:	00004821 	move	t1,zero
calculate_slab_order():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:229
    size_t order;
    size_t objsize = 1 << objsize_shift;
    for (order = 0; order <= KMALLOC_MAX_ORDER; order ++) {
        size_t num, remainder;
        cache_estimate(order, objsize_shift, off_slab, &remainder, &num);
        if (num != 0) {
80014f7c:	50c0000e 	beqzl	a2,80014fb8 <slab_init+0x14c>
80014f80:	26940001 	addiu	s4,s4,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:230
            if (off_slab) {
80014f84:	11c00005 	beqz	t6,80014f9c <slab_init+0x130>
80014f88:	70c52002 	mul	a0,a2,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:234
                size_t off_slab_limit = objsize - sizeof(slab_t);
                /* sizeof(kmem_cache_t) == 4 */
                off_slab_limit /= sizeof(kmem_bufctl_t);
                if (num > off_slab_limit) {
80014f8c:	00e6102b 	sltu	v0,a3,a2
80014f90:	1440002f 	bnez	v0,80015050 <slab_init+0x1e4>
80014f94:	3c048002 	lui	a0,0x8002
cache_estimate():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:212

        }
        mgmt_size = slab_mgmt_size(nr_objs);
    }
    *num = nr_objs;
    *remainder = slab_size - nr_objs * objsize - mgmt_size;
80014f98:	70c52002 	mul	a0,a2,a1
80014f9c:	01441023 	subu	v0,t2,a0
80014fa0:	00494823 	subu	t1,v0,t1
calculate_slab_order():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:240
                    //panic("off_slab: objsize = %d, num = %08x off_slab_limit = %08x.", objsize, num, off_slab_limit);
                    kprintf("off_slab: objsize = %d, num = %08x off_slab_limit = %08x.", objsize, num, off_slab_limit);
                    while (1);
                }
            }
            if (remainder * 8 <= (PGSIZE << order)) {
80014fa4:	000910c0 	sll	v0,t1,0x3
80014fa8:	0142502b 	sltu	t2,t2,v0
80014fac:	51400030 	beqzl	t2,80015070 <slab_init+0x204>
80014fb0:	00063880 	sll	a3,a2,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:226
//   left_over: the size of can not be used area in slab
static void
calculate_slab_order(kmem_cache_t *cachep, size_t objsize_shift, bool off_slab, size_t *left_over) {
    size_t order;
    size_t objsize = 1 << objsize_shift;
    for (order = 0; order <= KMALLOC_MAX_ORDER; order ++) {
80014fb4:	26940001 	addiu	s4,s4,1
80014fb8:	1690ffec 	bne	s4,s0,80014f6c <slab_init+0x100>
80014fbc:	26d60020 	addiu	s6,s6,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:250
                }
                return ;
            }
        }
    }
    panic("calculate_slab_over: failed.");
80014fc0:	3c048002 	lui	a0,0x8002
80014fc4:	3c068002 	lui	a2,0x8002
80014fc8:	248433a0 	addiu	a0,a0,13216
80014fcc:	240500fa 	li	a1,250
80014fd0:	0c006b0b 	jal	8001ac2c <__panic>
80014fd4:	24c6342c 	addiu	a2,a2,13356
cache_estimate():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:198
    }
    else {
        /* no div! precomputed */
        //panic("no div, precompute?");
        //nr_objs = (slab_size - sizeof(slab_t)) / (objsize + sizeof(kmem_bufctl_t));
        nr_objs = __slab_div_table[order][objsize_shift - 5];
80014fd8:	8ec60000 	lw	a2,0(s6)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:199
        while (slab_mgmt_size(nr_objs) + nr_objs * objsize > slab_size) {
80014fdc:	70c52002 	mul	a0,a2,a1
slab_mgmt_size():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:167
}

// slab_mgmt_size - get the size of slab control area (slab_t+num*kmem_bufctl_t)
static size_t
slab_mgmt_size(size_t num) {
    return ROUNDUP_2N(sizeof(slab_t) + num * sizeof(kmem_bufctl_t), ALIGN_SHIFT);
80014fe0:	00064880 	sll	t1,a2,0x2
80014fe4:	25290027 	addiu	t1,t1,39
80014fe8:	00094902 	srl	t1,t1,0x4
80014fec:	00094900 	sll	t1,t1,0x4
cache_estimate():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:199
    else {
        /* no div! precomputed */
        //panic("no div, precompute?");
        //nr_objs = (slab_size - sizeof(slab_t)) / (objsize + sizeof(kmem_bufctl_t));
        nr_objs = __slab_div_table[order][objsize_shift - 5];
        while (slab_mgmt_size(nr_objs) + nr_objs * objsize > slab_size) {
80014ff0:	00891021 	addu	v0,a0,t1
80014ff4:	0142102b 	sltu	v0,t2,v0
80014ff8:	1040000f 	beqz	v0,80015038 <slab_init+0x1cc>
80014ffc:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:117

#define ALIGN_SHIFT 4

//slab_init - call init_kmem_cache function to reset the slab_cache array
void
slab_init(void) {
80015000:	24c8ffff 	addiu	t0,a2,-1
80015004:	00061080 	sll	v0,a2,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:199
    else {
        /* no div! precomputed */
        //panic("no div, precompute?");
        //nr_objs = (slab_size - sizeof(slab_t)) / (objsize + sizeof(kmem_bufctl_t));
        nr_objs = __slab_div_table[order][objsize_shift - 5];
        while (slab_mgmt_size(nr_objs) + nr_objs * objsize > slab_size) {
80015008:	71052002 	mul	a0,t0,a1
8001500c:	08005406 	j	80015018 <slab_init+0x1ac>
80015010:	24420023 	addiu	v0,v0,35
80015014:	2508ffff 	addiu	t0,t0,-1
slab_mgmt_size():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:167
}

// slab_mgmt_size - get the size of slab control area (slab_t+num*kmem_bufctl_t)
static size_t
slab_mgmt_size(size_t num) {
    return ROUNDUP_2N(sizeof(slab_t) + num * sizeof(kmem_bufctl_t), ALIGN_SHIFT);
80015018:	00024902 	srl	t1,v0,0x4
8001501c:	00094900 	sll	t1,t1,0x4
cache_estimate():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:199
    else {
        /* no div! precomputed */
        //panic("no div, precompute?");
        //nr_objs = (slab_size - sizeof(slab_t)) / (objsize + sizeof(kmem_bufctl_t));
        nr_objs = __slab_div_table[order][objsize_shift - 5];
        while (slab_mgmt_size(nr_objs) + nr_objs * objsize > slab_size) {
80015020:	00895821 	addu	t3,a0,t1
80015024:	014b582b 	sltu	t3,t2,t3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:200
            nr_objs --;
80015028:	01003021 	move	a2,t0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:199
    else {
        /* no div! precomputed */
        //panic("no div, precompute?");
        //nr_objs = (slab_size - sizeof(slab_t)) / (objsize + sizeof(kmem_bufctl_t));
        nr_objs = __slab_div_table[order][objsize_shift - 5];
        while (slab_mgmt_size(nr_objs) + nr_objs * objsize > slab_size) {
8001502c:	2442fffc 	addiu	v0,v0,-4
80015030:	1560fff8 	bnez	t3,80015014 <slab_init+0x1a8>
80015034:	00852023 	subu	a0,a0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:202
            nr_objs --;
        }
        if (nr_objs > SLAB_LIMIT) {
80015038:	14d1ffd0 	bne	a2,s1,80014f7c <slab_init+0x110>
8001503c:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:205
            nr_objs = SLAB_LIMIT;

                kprintf("found2!\n");
80015040:	0c007a9e 	jal	8001ea78 <kprintf>
80015044:	248433e4 	addiu	a0,a0,13284
80015048:	08005412 	j	80015048 <slab_init+0x1dc>
8001504c:	00000000 	nop
calculate_slab_order():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:236
                size_t off_slab_limit = objsize - sizeof(slab_t);
                /* sizeof(kmem_cache_t) == 4 */
                off_slab_limit /= sizeof(kmem_bufctl_t);
                if (num > off_slab_limit) {
                    //panic("off_slab: objsize = %d, num = %08x off_slab_limit = %08x.", objsize, num, off_slab_limit);
                    kprintf("off_slab: objsize = %d, num = %08x off_slab_limit = %08x.", objsize, num, off_slab_limit);
80015050:	0c007a9e 	jal	8001ea78 <kprintf>
80015054:	248433f0 	addiu	a0,a0,13296
80015058:	08005416 	j	80015058 <slab_init+0x1ec>
8001505c:	00000000 	nop
getorder():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:258
// getorder - find order, should satisfy n <= minest 2^order
static inline size_t
getorder(size_t n) {
    size_t order = MIN_SIZE_ORDER, order_size = (1 << order);
    for (; order <= MAX_SIZE_ORDER; order ++, order_size <<= 1) {
        if (n <= order_size) {
80015060:	24050020 	li	a1,32
80015064:	24150005 	li	s5,5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:256
}

// getorder - find order, should satisfy n <= minest 2^order
static inline size_t
getorder(size_t n) {
    size_t order = MIN_SIZE_ORDER, order_size = (1 << order);
80015068:	080053d4 	j	80014f50 <slab_init+0xe4>
8001506c:	24020005 	li	v0,5
slab_mgmt_size():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:167
}

// slab_mgmt_size - get the size of slab control area (slab_t+num*kmem_bufctl_t)
static size_t
slab_mgmt_size(size_t num) {
    return ROUNDUP_2N(sizeof(slab_t) + num * sizeof(kmem_bufctl_t), ALIGN_SHIFT);
80015070:	24e70027 	addiu	a3,a3,39
80015074:	00073902 	srl	a3,a3,0x4
calculate_slab_order():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:241
                    kprintf("off_slab: objsize = %d, num = %08x off_slab_limit = %08x.", objsize, num, off_slab_limit);
                    while (1);
                }
            }
            if (remainder * 8 <= (PGSIZE << order)) {
                cachep->num = num;
80015078:	ac660018 	sw	a2,24(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:242
                cachep->page_order = order;
8001507c:	ac740024 	sw	s4,36(v1)
init_kmem_cache():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:285

    assert(cachep->num > 0);

    size_t mgmt_size = slab_mgmt_size(cachep->num);

    if (cachep->off_slab && left_over >= mgmt_size) {
80015080:	11c00005 	beqz	t6,80015098 <slab_init+0x22c>
80015084:	00073900 	sll	a3,a3,0x4
80015088:	0127482b 	sltu	t1,t1,a3
8001508c:	1520000f 	bnez	t1,800150cc <slab_init+0x260>
80015090:	2ce20021 	sltiu	v0,a3,33
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:286
        cachep->off_slab = 0;
80015094:	ac600020 	sw	zero,32(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:294
    if (cachep->off_slab) {
        cachep->offset = 0;
        cachep->slab_cachep = slab_cache + (getorder(mgmt_size) - MIN_SIZE_ORDER);
    }
    else {
        cachep->offset = mgmt_size;
80015098:	ac67001c 	sw	a3,28(v1)
slab_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:121
void
slab_init(void) {
    size_t i;
    //the align bit for obj in slab. 2^n could be better for performance
    //size_t align = 16;
    for (i = 0; i < SLAB_CACHE_NUM; i ++) {
8001509c:	258c0001 	addiu	t4,t4,1
800150a0:	1599ff86 	bne	t4,t9,80014ebc <slab_init+0x50>
800150a4:	8fbf002c 	lw	ra,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:125
        init_kmem_cache(slab_cache + i, 1 << (i + MIN_SIZE_ORDER));
    }
    //check_slab();
}
800150a8:	8fb60028 	lw	s6,40(sp)
800150ac:	8fb50024 	lw	s5,36(sp)
800150b0:	8fb40020 	lw	s4,32(sp)
800150b4:	8fb3001c 	lw	s3,28(sp)
800150b8:	8fb20018 	lw	s2,24(sp)
800150bc:	8fb10014 	lw	s1,20(sp)
800150c0:	8fb00010 	lw	s0,16(sp)
800150c4:	03e00008 	jr	ra
800150c8:	27bd0030 	addiu	sp,sp,48
getorder():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:258
// getorder - find order, should satisfy n <= minest 2^order
static inline size_t
getorder(size_t n) {
    size_t order = MIN_SIZE_ORDER, order_size = (1 << order);
    for (; order <= MAX_SIZE_ORDER; order ++, order_size <<= 1) {
        if (n <= order_size) {
800150cc:	1440000b 	bnez	v0,800150fc <slab_init+0x290>
800150d0:	ac60001c 	sw	zero,28(v1)
800150d4:	24040040 	li	a0,64
800150d8:	24020006 	li	v0,6
800150dc:	0087282b 	sltu	a1,a0,a3
800150e0:	50a00009 	beqzl	a1,80015108 <slab_init+0x29c>
800150e4:	00022080 	sll	a0,v0,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:257

// getorder - find order, should satisfy n <= minest 2^order
static inline size_t
getorder(size_t n) {
    size_t order = MIN_SIZE_ORDER, order_size = (1 << order);
    for (; order <= MAX_SIZE_ORDER; order ++, order_size <<= 1) {
800150e8:	24420001 	addiu	v0,v0,1
800150ec:	144dfffb 	bne	v0,t5,800150dc <slab_init+0x270>
800150f0:	00042040 	sll	a0,a0,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:262
        if (n <= order_size) {
            return order;
        }
    }
    panic("getorder failed. %d\n", n);
800150f4:	080053ce 	j	80014f38 <slab_init+0xcc>
800150f8:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:258
// getorder - find order, should satisfy n <= minest 2^order
static inline size_t
getorder(size_t n) {
    size_t order = MIN_SIZE_ORDER, order_size = (1 << order);
    for (; order <= MAX_SIZE_ORDER; order ++, order_size <<= 1) {
        if (n <= order_size) {
800150fc:	01e01021 	move	v0,t7
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:291
        cachep->off_slab = 0;
    }

    if (cachep->off_slab) {
        cachep->offset = 0;
        cachep->slab_cachep = slab_cache + (getorder(mgmt_size) - MIN_SIZE_ORDER);
80015100:	08005427 	j	8001509c <slab_init+0x230>
80015104:	ac620028 	sw	v0,40(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:258
// getorder - find order, should satisfy n <= minest 2^order
static inline size_t
getorder(size_t n) {
    size_t order = MIN_SIZE_ORDER, order_size = (1 << order);
    for (; order <= MAX_SIZE_ORDER; order ++, order_size <<= 1) {
        if (n <= order_size) {
80015108:	00022900 	sll	a1,v0,0x4
8001510c:	00a42023 	subu	a0,a1,a0
80015110:	00821023 	subu	v0,a0,v0
80015114:	00021080 	sll	v0,v0,0x2
80015118:	2442ff24 	addiu	v0,v0,-220
8001511c:	08005440 	j	80015100 <slab_init+0x294>
80015120:	01e21021 	addu	v0,t7,v0

80015124 <kmalloc_init>:
kmalloc_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:128
    }
    //check_slab();
}

inline void 
kmalloc_init(void) {
80015124:	27bdffe8 	addiu	sp,sp,-24
80015128:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:129
	slab_init();
8001512c:	0c00539b 	jal	80014e6c <slab_init>
80015130:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:131
	kprintf("kmalloc_init() succeeded!\n");
}
80015134:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:130
}

inline void 
kmalloc_init(void) {
	slab_init();
	kprintf("kmalloc_init() succeeded!\n");
80015138:	3c048002 	lui	a0,0x8002
8001513c:	2484344c 	addiu	a0,a0,13388
80015140:	08007a9e 	j	8001ea78 <kprintf>
80015144:	27bd0018 	addiu	sp,sp,24

80015148 <slab_allocated>:
slab_allocated():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:135
}

//slab_allocated - summary the total size of allocated objs
size_t
slab_allocated(void) {
80015148:	27bdffe0 	addiu	sp,sp,-32
8001514c:	afbf001c 	sw	ra,28(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80015150:	40026000 	mfc0	v0,c0_status
80015154:	30420001 	andi	v0,v0,0x1
80015158:	10400004 	beqz	v0,8001516c <slab_allocated+0x24>
8001515c:	00005021 	move	t2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80015160:	0c006d04 	jal	8001b410 <intr_disable>
80015164:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:16
	return 1;
80015168:	240a0001 	li	t2,1
8001516c:	3c098015 	lui	t1,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:141
    size_t total = 0;
    int i;
    bool intr_flag;
    local_intr_save(intr_flag);
    {
        for (i = 0; i < SLAB_CACHE_NUM; i ++) {
80015170:	00003821 	move	a3,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:136
}

//slab_allocated - summary the total size of allocated objs
size_t
slab_allocated(void) {
    size_t total = 0;
80015174:	00001021 	move	v0,zero
80015178:	2529654c 	addiu	t1,t1,25932
slab_allocated():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:141
    int i;
    bool intr_flag;
    local_intr_save(intr_flag);
    {
        for (i = 0; i < SLAB_CACHE_NUM; i ++) {
8001517c:	2408000d 	li	t0,13
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:142
            kmem_cache_t *cachep = slab_cache + i;
80015180:	00071900 	sll	v1,a3,0x4
80015184:	00072080 	sll	a0,a3,0x2
80015188:	00642023 	subu	a0,v1,a0
8001518c:	00872023 	subu	a0,a0,a3
80015190:	00042080 	sll	a0,a0,0x2
80015194:	01242021 	addu	a0,t1,a0
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
80015198:	8c830004 	lw	v1,4(a0)
slab_allocated():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:145
            list_entry_t *list, *le;
            list = le = &(cachep->slabs_full);
            while ((le = list_next(le)) != list) {
8001519c:	50830008 	beql	a0,v1,800151c0 <slab_allocated+0x78>
800151a0:	8c83000c 	lw	v1,12(a0)
800151a4:	8c850018 	lw	a1,24(a0)
800151a8:	8c860010 	lw	a2,16(a0)
800151ac:	70c52802 	mul	a1,a2,a1
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
800151b0:	8c630004 	lw	v1,4(v1)
slab_allocated():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:145
800151b4:	1483fffe 	bne	a0,v1,800151b0 <slab_allocated+0x68>
800151b8:	00451021 	addu	v0,v0,a1
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
800151bc:	8c83000c 	lw	v1,12(a0)
slab_allocated():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:148
                total += cachep->num * cachep->objsize;
            }
            list = le = &(cachep->slabs_notfull);
800151c0:	24850008 	addiu	a1,a0,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:149
            while ((le = list_next(le)) != list) {
800151c4:	50a30008 	beql	a1,v1,800151e8 <slab_allocated+0xa0>
800151c8:	24e70001 	addiu	a3,a3,1
800151cc:	8c860010 	lw	a2,16(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:151
                slab_t *slabp = le2slab(le, slab_link);
                total += slabp->inuse * cachep->objsize;
800151d0:	8c64000c 	lw	a0,12(v1)
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
800151d4:	8c630004 	lw	v1,4(v1)
slab_allocated():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:151
800151d8:	70c45802 	mul	t3,a2,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:149
            list = le = &(cachep->slabs_full);
            while ((le = list_next(le)) != list) {
                total += cachep->num * cachep->objsize;
            }
            list = le = &(cachep->slabs_notfull);
            while ((le = list_next(le)) != list) {
800151dc:	14a3fffc 	bne	a1,v1,800151d0 <slab_allocated+0x88>
800151e0:	01621021 	addu	v0,t3,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:141
    size_t total = 0;
    int i;
    bool intr_flag;
    local_intr_save(intr_flag);
    {
        for (i = 0; i < SLAB_CACHE_NUM; i ++) {
800151e4:	24e70001 	addiu	a3,a3,1
800151e8:	54e8ffe6 	bnel	a3,t0,80015184 <slab_allocated+0x3c>
800151ec:	00071900 	sll	v1,a3,0x4
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
800151f0:	11400005 	beqz	t2,80015208 <slab_allocated+0xc0>
800151f4:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
800151f8:	0c006d00 	jal	8001b400 <intr_enable>
800151fc:	afa20010 	sw	v0,16(sp)
80015200:	8fa20010 	lw	v0,16(sp)
slab_allocated():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:157
            }
        }
    }
    local_intr_restore(intr_flag);
    return total;
}
80015204:	8fbf001c 	lw	ra,28(sp)
80015208:	03e00008 	jr	ra
8001520c:	27bd0020 	addiu	sp,sp,32

80015210 <kallocated>:
kallocated():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:161

inline size_t
kallocated(void) {
   return slab_allocated();
80015210:	08005452 	j	80015148 <slab_allocated>
80015214:	00000000 	nop

80015218 <kmalloc>:
kmalloc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:425
}

// kmalloc - simple interface used by outside functions 
//         - to allocate a free memory using kmem_cache_alloc function
void *
kmalloc(size_t size) {
80015218:	27bdffe8 	addiu	sp,sp,-24
8001521c:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:426
    assert(size > 0);
80015220:	10800020 	beqz	a0,800152a4 <kmalloc+0x8c>
80015224:	00803821 	move	a3,a0
getorder():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:258
// getorder - find order, should satisfy n <= minest 2^order
static inline size_t
getorder(size_t n) {
    size_t order = MIN_SIZE_ORDER, order_size = (1 << order);
    for (; order <= MAX_SIZE_ORDER; order ++, order_size <<= 1) {
        if (n <= order_size) {
80015228:	2c820021 	sltiu	v0,a0,33
8001522c:	1440001a 	bnez	v0,80015298 <kmalloc+0x80>
80015230:	24030040 	li	v1,64
80015234:	24020006 	li	v0,6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:257

// getorder - find order, should satisfy n <= minest 2^order
static inline size_t
getorder(size_t n) {
    size_t order = MIN_SIZE_ORDER, order_size = (1 << order);
    for (; order <= MAX_SIZE_ORDER; order ++, order_size <<= 1) {
80015238:	24050012 	li	a1,18
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:258
        if (n <= order_size) {
8001523c:	0067202b 	sltu	a0,v1,a3
80015240:	5080000a 	beqzl	a0,8001526c <kmalloc+0x54>
80015244:	00022100 	sll	a0,v0,0x4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:257

// getorder - find order, should satisfy n <= minest 2^order
static inline size_t
getorder(size_t n) {
    size_t order = MIN_SIZE_ORDER, order_size = (1 << order);
    for (; order <= MAX_SIZE_ORDER; order ++, order_size <<= 1) {
80015248:	24420001 	addiu	v0,v0,1
8001524c:	1445fffb 	bne	v0,a1,8001523c <kmalloc+0x24>
80015250:	00031840 	sll	v1,v1,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:262
        if (n <= order_size) {
            return order;
        }
    }
    panic("getorder failed. %d\n", n);
80015254:	3c048002 	lui	a0,0x8002
80015258:	3c068002 	lui	a2,0x8002
8001525c:	248433a0 	addiu	a0,a0,13216
80015260:	24050106 	li	a1,262
80015264:	0c006b0b 	jal	8001ac2c <__panic>
80015268:	24c633cc 	addiu	a2,a2,13260
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:258
// getorder - find order, should satisfy n <= minest 2^order
static inline size_t
getorder(size_t n) {
    size_t order = MIN_SIZE_ORDER, order_size = (1 << order);
    for (; order <= MAX_SIZE_ORDER; order ++, order_size <<= 1) {
        if (n <= order_size) {
8001526c:	00021880 	sll	v1,v0,0x2
80015270:	00831823 	subu	v1,a0,v1
80015274:	00621023 	subu	v0,v1,v0
80015278:	00021080 	sll	v0,v0,0x2
8001527c:	3c048015 	lui	a0,0x8015
80015280:	2442ff24 	addiu	v0,v0,-220
80015284:	2484654c 	addiu	a0,a0,25932
80015288:	00822021 	addu	a0,a0,v0
kmalloc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:432
    size_t order = getorder(size);
    if (order > MAX_SIZE_ORDER) {
        return NULL;
    }
    return kmem_cache_alloc(slab_cache + (order - MIN_SIZE_ORDER));
}
8001528c:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:431
    assert(size > 0);
    size_t order = getorder(size);
    if (order > MAX_SIZE_ORDER) {
        return NULL;
    }
    return kmem_cache_alloc(slab_cache + (order - MIN_SIZE_ORDER));
80015290:	08005200 	j	80014800 <kmem_cache_alloc>
80015294:	27bd0018 	addiu	sp,sp,24
getorder():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:258
// getorder - find order, should satisfy n <= minest 2^order
static inline size_t
getorder(size_t n) {
    size_t order = MIN_SIZE_ORDER, order_size = (1 << order);
    for (; order <= MAX_SIZE_ORDER; order ++, order_size <<= 1) {
        if (n <= order_size) {
80015298:	3c048015 	lui	a0,0x8015
8001529c:	080054a3 	j	8001528c <kmalloc+0x74>
800152a0:	2484654c 	addiu	a0,a0,25932
kmalloc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:426

// kmalloc - simple interface used by outside functions 
//         - to allocate a free memory using kmem_cache_alloc function
void *
kmalloc(size_t size) {
    assert(size > 0);
800152a4:	3c048002 	lui	a0,0x8002
800152a8:	3c068002 	lui	a2,0x8002
800152ac:	3c078002 	lui	a3,0x8002
800152b0:	248433a0 	addiu	a0,a0,13216
800152b4:	240501aa 	li	a1,426
800152b8:	24c60e28 	addiu	a2,a2,3624
800152bc:	0c006b0b 	jal	8001ac2c <__panic>
800152c0:	24e73468 	addiu	a3,a3,13416

800152c4 <kfree>:
kva2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:111
800152c4:	3c028000 	lui	v0,0x8000
800152c8:	24421000 	addiu	v0,v0,4096
kfree():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:501
    local_intr_restore(intr_flag);
}

// kfree - simple interface used by ooutside functions to free an obj
void
kfree(void *objp) {
800152cc:	27bdffe8 	addiu	sp,sp,-24
kva2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:111
800152d0:	0082102b 	sltu	v0,a0,v0
kfree():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:501
800152d4:	afbf0014 	sw	ra,20(sp)
kva2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:111
800152d8:	14400012 	bnez	v0,80015324 <kfree+0x60>
800152dc:	00803821 	move	a3,a0
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
800152e0:	3c028015 	lui	v0,0x8015
800152e4:	8c437770 	lw	v1,30576(v0)
800152e8:	3c027fff 	lui	v0,0x7fff
800152ec:	3442f000 	ori	v0,v0,0xf000
800152f0:	00821021 	addu	v0,a0,v0
800152f4:	00021302 	srl	v0,v0,0xc
800152f8:	0043182b 	sltu	v1,v0,v1
800152fc:	1060000f 	beqz	v1,8001533c <kfree+0x78>
80015300:	3c038015 	lui	v1,0x8015
kfree():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:502
    kmem_cache_free(GET_PAGE_CACHE(kva2page(objp)), objp);
80015304:	8c6377bc 	lw	v1,30652(v1)
80015308:	00021140 	sll	v0,v0,0x5
8001530c:	00802821 	move	a1,a0
80015310:	00621021 	addu	v0,v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:503
}
80015314:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/slab.c:502
}

// kfree - simple interface used by ooutside functions to free an obj
void
kfree(void *objp) {
    kmem_cache_free(GET_PAGE_CACHE(kva2page(objp)), objp);
80015318:	8c440014 	lw	a0,20(v0)
8001531c:	080052cd 	j	80014b34 <kmem_cache_free>
80015320:	27bd0018 	addiu	sp,sp,24
kva2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:111
	return KADDR(page2pa(page));
}

static inline struct Page *kva2page(void *kva)
{
	return pa2page(PADDR(kva));
80015324:	3c048002 	lui	a0,0x8002
80015328:	3c068002 	lui	a2,0x8002
8001532c:	248429ec 	addiu	a0,a0,10732
80015330:	2405006f 	li	a1,111
80015334:	0c006b0b 	jal	8001ac2c <__panic>
80015338:	24c62a30 	addiu	a2,a2,10800
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:99
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
		panic("pa2page called with invalid pa");
8001533c:	3c048002 	lui	a0,0x8002
80015340:	3c068002 	lui	a2,0x8002
80015344:	248429ec 	addiu	a0,a0,10732
80015348:	24050063 	li	a1,99
8001534c:	0c006b0b 	jal	8001ac2c <__panic>
80015350:	24c62a54 	addiu	a2,a2,10836

80015354 <check_compare1>:
check_compare1():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:419
#define rbn2data(node)              \
    (to_struct(node, struct check_data, rb_link))

static inline int check_compare1(rb_node * node1, rb_node * node2)
{
	return rbn2data(node1)->data - rbn2data(node2)->data;
80015354:	8c82fffc 	lw	v0,-4(a0)
80015358:	8ca3fffc 	lw	v1,-4(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:420
}
8001535c:	03e00008 	jr	ra
80015360:	00431023 	subu	v0,v0,v1

80015364 <check_compare2>:
check_compare2():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:424

static inline int check_compare2(rb_node * node, void *key)
{
	return rbn2data(node)->data - (long)key;
80015364:	8c82fffc 	lw	v0,-4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:425
}
80015368:	03e00008 	jr	ra
8001536c:	00451023 	subu	v0,v0,a1

80015370 <rb_left_rotate>:
rb_left_rotate():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:100
    y->_left = x;                                               \
    x->parent = y;                                              \
    assert(!(nil->red));                                        \
}

FUNC_ROTATE(rb_left_rotate, left, right);
80015370:	8c820008 	lw	v0,8(a0)
80015374:	27bdffe8 	addiu	sp,sp,-24
80015378:	afbf0014 	sw	ra,20(sp)
8001537c:	8c840004 	lw	a0,4(a0)
80015380:	10450017 	beq	v0,a1,800153e0 <rb_left_rotate+0x70>
80015384:	8ca3000c 	lw	v1,12(a1)
80015388:	50a40016 	beql	a1,a0,800153e4 <rb_left_rotate+0x74>
8001538c:	3c048002 	lui	a0,0x8002
80015390:	50640014 	beql	v1,a0,800153e4 <rb_left_rotate+0x74>
80015394:	3c048002 	lui	a0,0x8002
80015398:	8c620008 	lw	v0,8(v1)
8001539c:	10820002 	beq	a0,v0,800153a8 <rb_left_rotate+0x38>
800153a0:	aca2000c 	sw	v0,12(a1)
800153a4:	ac450004 	sw	a1,4(v0)
800153a8:	8ca20004 	lw	v0,4(a1)
800153ac:	ac620004 	sw	v0,4(v1)
800153b0:	8ca20004 	lw	v0,4(a1)
800153b4:	8c460008 	lw	a2,8(v0)
800153b8:	50c50002 	beql	a2,a1,800153c4 <rb_left_rotate+0x54>
800153bc:	ac430008 	sw	v1,8(v0)
800153c0:	ac43000c 	sw	v1,12(v0)
800153c4:	8c820000 	lw	v0,0(a0)
800153c8:	ac650008 	sw	a1,8(v1)
800153cc:	1440000c 	bnez	v0,80015400 <rb_left_rotate+0x90>
800153d0:	aca30004 	sw	v1,4(a1)
800153d4:	8fbf0014 	lw	ra,20(sp)
800153d8:	03e00008 	jr	ra
800153dc:	27bd0018 	addiu	sp,sp,24
800153e0:	3c048002 	lui	a0,0x8002
800153e4:	3c068002 	lui	a2,0x8002
800153e8:	3c078002 	lui	a3,0x8002
800153ec:	24843474 	addiu	a0,a0,13428
800153f0:	24050064 	li	a1,100
800153f4:	24c60e28 	addiu	a2,a2,3624
800153f8:	0c006b0b 	jal	8001ac2c <__panic>
800153fc:	24e73480 	addiu	a3,a3,13440
80015400:	3c048002 	lui	a0,0x8002
80015404:	3c068002 	lui	a2,0x8002
80015408:	3c078002 	lui	a3,0x8002
8001540c:	24843474 	addiu	a0,a0,13428
80015410:	24050064 	li	a1,100
80015414:	24c60e28 	addiu	a2,a2,3624
80015418:	0c006b0b 	jal	8001ac2c <__panic>
8001541c:	24e734a8 	addiu	a3,a3,13480

80015420 <rb_right_rotate>:
rb_right_rotate():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:101
FUNC_ROTATE(rb_right_rotate, right, left);
80015420:	8c820008 	lw	v0,8(a0)
80015424:	27bdffe8 	addiu	sp,sp,-24
80015428:	afbf0014 	sw	ra,20(sp)
8001542c:	8c840004 	lw	a0,4(a0)
80015430:	10450017 	beq	v0,a1,80015490 <rb_right_rotate+0x70>
80015434:	8ca30008 	lw	v1,8(a1)
80015438:	50a40016 	beql	a1,a0,80015494 <rb_right_rotate+0x74>
8001543c:	3c048002 	lui	a0,0x8002
80015440:	50640014 	beql	v1,a0,80015494 <rb_right_rotate+0x74>
80015444:	3c048002 	lui	a0,0x8002
80015448:	8c62000c 	lw	v0,12(v1)
8001544c:	10820002 	beq	a0,v0,80015458 <rb_right_rotate+0x38>
80015450:	aca20008 	sw	v0,8(a1)
80015454:	ac450004 	sw	a1,4(v0)
80015458:	8ca20004 	lw	v0,4(a1)
8001545c:	ac620004 	sw	v0,4(v1)
80015460:	8ca20004 	lw	v0,4(a1)
80015464:	8c46000c 	lw	a2,12(v0)
80015468:	50c50002 	beql	a2,a1,80015474 <rb_right_rotate+0x54>
8001546c:	ac43000c 	sw	v1,12(v0)
80015470:	ac430008 	sw	v1,8(v0)
80015474:	8c820000 	lw	v0,0(a0)
80015478:	ac65000c 	sw	a1,12(v1)
8001547c:	1440000c 	bnez	v0,800154b0 <rb_right_rotate+0x90>
80015480:	aca30004 	sw	v1,4(a1)
80015484:	8fbf0014 	lw	ra,20(sp)
80015488:	03e00008 	jr	ra
8001548c:	27bd0018 	addiu	sp,sp,24
80015490:	3c048002 	lui	a0,0x8002
80015494:	3c068002 	lui	a2,0x8002
80015498:	3c078002 	lui	a3,0x8002
8001549c:	24843474 	addiu	a0,a0,13428
800154a0:	24050065 	li	a1,101
800154a4:	24c60e28 	addiu	a2,a2,3624
800154a8:	0c006b0b 	jal	8001ac2c <__panic>
800154ac:	24e73480 	addiu	a3,a3,13440
800154b0:	3c048002 	lui	a0,0x8002
800154b4:	3c068002 	lui	a2,0x8002
800154b8:	3c078002 	lui	a3,0x8002
800154bc:	24843474 	addiu	a0,a0,13428
800154c0:	24050065 	li	a1,101
800154c4:	24c60e28 	addiu	a2,a2,3624
800154c8:	0c006b0b 	jal	8001ac2c <__panic>
800154cc:	24e734a8 	addiu	a3,a3,13480

800154d0 <check_safe_kmalloc>:
check_safe_kmalloc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:403
	}
	return hb;
}

static void *check_safe_kmalloc(size_t size)
{
800154d0:	27bdffe8 	addiu	sp,sp,-24
800154d4:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:404
	void *ret = kmalloc(size);
800154d8:	0c005486 	jal	80015218 <kmalloc>
800154dc:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:405
	assert(ret != NULL);
800154e0:	10400003 	beqz	v0,800154f0 <check_safe_kmalloc+0x20>
800154e4:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:407
	return ret;
}
800154e8:	03e00008 	jr	ra
800154ec:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:405
}

static void *check_safe_kmalloc(size_t size)
{
	void *ret = kmalloc(size);
	assert(ret != NULL);
800154f0:	3c048002 	lui	a0,0x8002
800154f4:	3c068002 	lui	a2,0x8002
800154f8:	3c078002 	lui	a3,0x8002
800154fc:	24843474 	addiu	a0,a0,13428
80015500:	24050195 	li	a1,405
80015504:	24c60e28 	addiu	a2,a2,3624
80015508:	0c006b0b 	jal	8001ac2c <__panic>
8001550c:	24e734b4 	addiu	a3,a3,13492

80015510 <rb_tree_create>:
rb_tree_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:30
 * Note that, root->left should always point to the node that is the root
 * of the tree. And nil points to a 'NULL' node which should always be
 * black and may have arbitrary children and parent node.
 * */
rb_tree *rb_tree_create(int (*compare) (rb_node * node1, rb_node * node2))
{
80015510:	27bdffe0 	addiu	sp,sp,-32
80015514:	afb00014 	sw	s0,20(sp)
80015518:	afbf001c 	sw	ra,28(sp)
8001551c:	afb10018 	sw	s1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:31
	assert(compare != NULL);
80015520:	10800024 	beqz	a0,800155b4 <rb_tree_create+0xa4>
80015524:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:36

	rb_tree *tree;
	rb_node *nil, *root;

	if ((tree = kmalloc(sizeof(rb_tree))) == NULL) {
80015528:	0c005486 	jal	80015218 <kmalloc>
8001552c:	2404000c 	li	a0,12
80015530:	10400014 	beqz	v0,80015584 <rb_tree_create+0x74>
80015534:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:40
		goto bad_tree;
	}

	tree->compare = compare;
80015538:	ac500000 	sw	s0,0(v0)
rb_node_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:11
#include <assert.h>

/* rb_node_create - create a new rb_node */
static inline rb_node *rb_node_create(void)
{
	return kmalloc(sizeof(rb_node));
8001553c:	0c005486 	jal	80015218 <kmalloc>
80015540:	24040010 	li	a0,16
rb_tree_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:42
		goto bad_tree;
	}

	tree->compare = compare;

	if ((nil = rb_node_create()) == NULL) {
80015544:	10400017 	beqz	v0,800155a4 <rb_tree_create+0x94>
80015548:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:46
		goto bad_node_cleanup_tree;
	}

	nil->parent = nil->left = nil->right = nil;
8001554c:	ac42000c 	sw	v0,12(v0)
80015550:	ac420008 	sw	v0,8(v0)
80015554:	ac420004 	sw	v0,4(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:47
	nil->red = 0;
80015558:	ac400000 	sw	zero,0(v0)
rb_node_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:11
#include <assert.h>

/* rb_node_create - create a new rb_node */
static inline rb_node *rb_node_create(void)
{
	return kmalloc(sizeof(rb_node));
8001555c:	24040010 	li	a0,16
80015560:	0c005486 	jal	80015218 <kmalloc>
80015564:	ae220004 	sw	v0,4(s1)
rb_tree_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:50

	nil->parent = nil->left = nil->right = nil;
	nil->red = 0;
	tree->nil = nil;

	if ((root = rb_node_create()) == NULL) {
80015568:	1040000c 	beqz	v0,8001559c <rb_tree_create+0x8c>
8001556c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:54
		goto bad_node_cleanup_nil;
	}

	root->parent = root->left = root->right = nil;
80015570:	ac50000c 	sw	s0,12(v0)
80015574:	ac500008 	sw	s0,8(v0)
80015578:	ac500004 	sw	s0,4(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:55
	root->red = 0;
8001557c:	ac400000 	sw	zero,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:56
	tree->root = root;
80015580:	ae220008 	sw	v0,8(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:65
	kfree(nil);
bad_node_cleanup_tree:
	kfree(tree);
bad_tree:
	return NULL;
}
80015584:	8fbf001c 	lw	ra,28(sp)
80015588:	02201021 	move	v0,s1
8001558c:	8fb00014 	lw	s0,20(sp)
80015590:	8fb10018 	lw	s1,24(sp)
80015594:	03e00008 	jr	ra
80015598:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:60
	root->red = 0;
	tree->root = root;
	return tree;

bad_node_cleanup_nil:
	kfree(nil);
8001559c:	0c0054b1 	jal	800152c4 <kfree>
800155a0:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:62
bad_node_cleanup_tree:
	kfree(tree);
800155a4:	0c0054b1 	jal	800152c4 <kfree>
800155a8:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:64
bad_tree:
	return NULL;
800155ac:	08005561 	j	80015584 <rb_tree_create+0x74>
800155b0:	00008821 	move	s1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:31
 * of the tree. And nil points to a 'NULL' node which should always be
 * black and may have arbitrary children and parent node.
 * */
rb_tree *rb_tree_create(int (*compare) (rb_node * node1, rb_node * node2))
{
	assert(compare != NULL);
800155b4:	3c048002 	lui	a0,0x8002
800155b8:	3c068002 	lui	a2,0x8002
800155bc:	3c078002 	lui	a3,0x8002
800155c0:	24843474 	addiu	a0,a0,13428
800155c4:	2405001f 	li	a1,31
800155c8:	24c60e28 	addiu	a2,a2,3624
800155cc:	0c006b0b 	jal	8001ac2c <__panic>
800155d0:	24e734c0 	addiu	a3,a3,13504

800155d4 <rb_insert>:
rb_insert():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:133
	}
}

/* rb_insert - insert a node to red-black tree */
void rb_insert(rb_tree * tree, rb_node * node)
{
800155d4:	27bdffd8 	addiu	sp,sp,-40
800155d8:	afb40020 	sw	s4,32(sp)
rb_insert_binary():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:115
 * a regular binary tree. This function is only intended to be called
 * by function rb_insert.
 * */
static inline void rb_insert_binary(rb_tree * tree, rb_node * node)
{
	rb_node *x, *y, *z = node, *nil = tree->nil, *root = tree->root;
800155dc:	8c940004 	lw	s4,4(a0)
rb_insert():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:133
	}
}

/* rb_insert - insert a node to red-black tree */
void rb_insert(rb_tree * tree, rb_node * node)
{
800155e0:	afb00010 	sw	s0,16(sp)
rb_insert_binary():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:115
 * a regular binary tree. This function is only intended to be called
 * by function rb_insert.
 * */
static inline void rb_insert_binary(rb_tree * tree, rb_node * node)
{
	rb_node *x, *y, *z = node, *nil = tree->nil, *root = tree->root;
800155e4:	8c900008 	lw	s0,8(a0)
rb_insert():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:133
	}
}

/* rb_insert - insert a node to red-black tree */
void rb_insert(rb_tree * tree, rb_node * node)
{
800155e8:	afb3001c 	sw	s3,28(sp)
800155ec:	afb20018 	sw	s2,24(sp)
800155f0:	afb10014 	sw	s1,20(sp)
800155f4:	afbf0024 	sw	ra,36(sp)
rb_insert_binary():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:117
 * */
static inline void rb_insert_binary(rb_tree * tree, rb_node * node)
{
	rb_node *x, *y, *z = node, *nil = tree->nil, *root = tree->root;

	z->left = z->right = nil;
800155f8:	acb40008 	sw	s4,8(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:118
	y = root, x = y->left;
800155fc:	8e110008 	lw	s1,8(s0)
rb_insert():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:133
	}
}

/* rb_insert - insert a node to red-black tree */
void rb_insert(rb_tree * tree, rb_node * node)
{
80015600:	00809021 	move	s2,a0
80015604:	00a09821 	move	s3,a1
rb_insert_binary():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:119
{
	rb_node *x, *y, *z = node, *nil = tree->nil, *root = tree->root;

	z->left = z->right = nil;
	y = root, x = y->left;
	while (x != nil) {
80015608:	12910066 	beq	s4,s1,800157a4 <rb_insert+0x1d0>
8001560c:	acb4000c 	sw	s4,12(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:121
		y = x;
		x = (COMPARE(tree, x, node) > 0) ? x->left : x->right;
80015610:	8e420000 	lw	v0,0(s2)
80015614:	02202021 	move	a0,s1
80015618:	0040f809 	jalr	v0
8001561c:	02602821 	move	a1,s3
80015620:	5840000c 	blezl	v0,80015654 <rb_insert+0x80>
80015624:	8e22000c 	lw	v0,12(s1)
80015628:	8e220008 	lw	v0,8(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:119
{
	rb_node *x, *y, *z = node, *nil = tree->nil, *root = tree->root;

	z->left = z->right = nil;
	y = root, x = y->left;
	while (x != nil) {
8001562c:	1282000b 	beq	s4,v0,8001565c <rb_insert+0x88>
80015630:	00000000 	nop
80015634:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:121
		y = x;
		x = (COMPARE(tree, x, node) > 0) ? x->left : x->right;
80015638:	8e420000 	lw	v0,0(s2)
8001563c:	02202021 	move	a0,s1
80015640:	0040f809 	jalr	v0
80015644:	02602821 	move	a1,s3
80015648:	5c40fff8 	bgtzl	v0,8001562c <rb_insert+0x58>
8001564c:	8e220008 	lw	v0,8(s1)
80015650:	8e22000c 	lw	v0,12(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:119
{
	rb_node *x, *y, *z = node, *nil = tree->nil, *root = tree->root;

	z->left = z->right = nil;
	y = root, x = y->left;
	while (x != nil) {
80015654:	5682fff8 	bnel	s4,v0,80015638 <rb_insert+0x64>
80015658:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:124
		y = x;
		x = (COMPARE(tree, x, node) > 0) ? x->left : x->right;
	}
	z->parent = y;
	if (y == root || COMPARE(tree, y, z) > 0) {
8001565c:	12110007 	beq	s0,s1,8001567c <rb_insert+0xa8>
80015660:	ae710004 	sw	s1,4(s3)
80015664:	8e420000 	lw	v0,0(s2)
80015668:	02202021 	move	a0,s1
8001566c:	0040f809 	jalr	v0
80015670:	02602821 	move	a1,s3
80015674:	18400049 	blez	v0,8001579c <rb_insert+0x1c8>
80015678:	8e700004 	lw	s0,4(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:125
		y->left = z;
8001567c:	ae330008 	sw	s3,8(s1)
rb_insert():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:135

/* rb_insert - insert a node to red-black tree */
void rb_insert(rb_tree * tree, rb_node * node)
{
	rb_insert_binary(tree, node);
	node->red = 1;
80015680:	24020001 	li	v0,1
80015684:	ae620000 	sw	v0,0(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:159
            x->parent->parent->red = 1;                         \
            rb_##_right##_rotate(tree, x->parent->parent);      \
        }                                                       \
    } while (0)

	while (x->parent->red) {
80015688:	8e020000 	lw	v0,0(s0)
8001568c:	10400012 	beqz	v0,800156d8 <rb_insert+0x104>
80015690:	24110001 	li	s1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:160
		if (x->parent == x->parent->parent->left) {
80015694:	8e050004 	lw	a1,4(s0)
80015698:	8ca20008 	lw	v0,8(a1)
8001569c:	50500027 	beql	v0,s0,8001573c <rb_insert+0x168>
800156a0:	8ca3000c 	lw	v1,12(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:163
			RB_INSERT_SUB(left, right);
		} else {
			RB_INSERT_SUB(right, left);
800156a4:	8c430000 	lw	v1,0(v0)
800156a8:	5060001c 	beqzl	v1,8001571c <rb_insert+0x148>
800156ac:	8e020008 	lw	v0,8(s0)
800156b0:	8e630004 	lw	v1,4(s3)
800156b4:	00a09821 	move	s3,a1
800156b8:	ae000000 	sw	zero,0(s0)
800156bc:	8c630004 	lw	v1,4(v1)
800156c0:	8e700004 	lw	s0,4(s3)
800156c4:	ac400000 	sw	zero,0(v0)
800156c8:	ac710000 	sw	s1,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:159
            x->parent->parent->red = 1;                         \
            rb_##_right##_rotate(tree, x->parent->parent);      \
        }                                                       \
    } while (0)

	while (x->parent->red) {
800156cc:	8e020000 	lw	v0,0(s0)
800156d0:	5440fff1 	bnezl	v0,80015698 <rb_insert+0xc4>
800156d4:	8e050004 	lw	a1,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:166
			RB_INSERT_SUB(left, right);
		} else {
			RB_INSERT_SUB(right, left);
		}
	}
	tree->root->left->red = 0;
800156d8:	8e420008 	lw	v0,8(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:167
	assert(!(tree->nil->red) && !(tree->root->red));
800156dc:	8e430004 	lw	v1,4(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:166
			RB_INSERT_SUB(left, right);
		} else {
			RB_INSERT_SUB(right, left);
		}
	}
	tree->root->left->red = 0;
800156e0:	8c440008 	lw	a0,8(v0)
800156e4:	ac800000 	sw	zero,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:167
	assert(!(tree->nil->red) && !(tree->root->red));
800156e8:	8c630000 	lw	v1,0(v1)
800156ec:	54600037 	bnezl	v1,800157cc <rb_insert+0x1f8>
800156f0:	3c048002 	lui	a0,0x8002
800156f4:	8c420000 	lw	v0,0(v0)
800156f8:	14400033 	bnez	v0,800157c8 <rb_insert+0x1f4>
800156fc:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:170

#undef RB_INSERT_SUB
}
80015700:	8fb40020 	lw	s4,32(sp)
80015704:	8fb3001c 	lw	s3,28(sp)
80015708:	8fb20018 	lw	s2,24(sp)
8001570c:	8fb10014 	lw	s1,20(sp)
80015710:	8fb00010 	lw	s0,16(sp)
80015714:	03e00008 	jr	ra
80015718:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:163

	while (x->parent->red) {
		if (x->parent == x->parent->parent->left) {
			RB_INSERT_SUB(left, right);
		} else {
			RB_INSERT_SUB(right, left);
8001571c:	50530018 	beql	v0,s3,80015780 <rb_insert+0x1ac>
80015720:	02002821 	move	a1,s0
80015724:	ae000000 	sw	zero,0(s0)
80015728:	02402021 	move	a0,s2
8001572c:	0c0054dc 	jal	80015370 <rb_left_rotate>
80015730:	acb10000 	sw	s1,0(a1)
80015734:	080055b3 	j	800156cc <rb_insert+0xf8>
80015738:	8e700004 	lw	s0,4(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:161
        }                                                       \
    } while (0)

	while (x->parent->red) {
		if (x->parent == x->parent->parent->left) {
			RB_INSERT_SUB(left, right);
8001573c:	8c640000 	lw	a0,0(v1)
80015740:	50800007 	beqzl	a0,80015760 <rb_insert+0x18c>
80015744:	8e03000c 	lw	v1,12(s0)
80015748:	00a09821 	move	s3,a1
8001574c:	ae000000 	sw	zero,0(s0)
80015750:	ac600000 	sw	zero,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:163
		} else {
			RB_INSERT_SUB(right, left);
80015754:	8e700004 	lw	s0,4(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:161
        }                                                       \
    } while (0)

	while (x->parent->red) {
		if (x->parent == x->parent->parent->left) {
			RB_INSERT_SUB(left, right);
80015758:	080055b3 	j	800156cc <rb_insert+0xf8>
8001575c:	acb10000 	sw	s1,0(a1)
80015760:	50730013 	beql	v1,s3,800157b0 <rb_insert+0x1dc>
80015764:	02002821 	move	a1,s0
80015768:	ac400000 	sw	zero,0(v0)
8001576c:	02402021 	move	a0,s2
80015770:	0c005508 	jal	80015420 <rb_right_rotate>
80015774:	acb10000 	sw	s1,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:163
		} else {
			RB_INSERT_SUB(right, left);
80015778:	080055b3 	j	800156cc <rb_insert+0xf8>
8001577c:	8e700004 	lw	s0,4(s3)
80015780:	0c005508 	jal	80015420 <rb_right_rotate>
80015784:	02402021 	move	a0,s2
80015788:	8e020004 	lw	v0,4(s0)
8001578c:	02009821 	move	s3,s0
80015790:	8c450004 	lw	a1,4(v0)
80015794:	080055c9 	j	80015724 <rb_insert+0x150>
80015798:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:127
	}
	z->parent = y;
	if (y == root || COMPARE(tree, y, z) > 0) {
		y->left = z;
	} else {
		y->right = z;
8001579c:	080055a0 	j	80015680 <rb_insert+0xac>
800157a0:	ae33000c 	sw	s3,12(s1)
rb_insert_binary():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:123
	y = root, x = y->left;
	while (x != nil) {
		y = x;
		x = (COMPARE(tree, x, node) > 0) ? x->left : x->right;
	}
	z->parent = y;
800157a4:	acb00004 	sw	s0,4(a1)
800157a8:	0800559f 	j	8001567c <rb_insert+0xa8>
800157ac:	02008821 	move	s1,s0
rb_insert():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:161
        }                                                       \
    } while (0)

	while (x->parent->red) {
		if (x->parent == x->parent->parent->left) {
			RB_INSERT_SUB(left, right);
800157b0:	0c0054dc 	jal	80015370 <rb_left_rotate>
800157b4:	02402021 	move	a0,s2
800157b8:	8e020004 	lw	v0,4(s0)
800157bc:	02009821 	move	s3,s0
800157c0:	080055da 	j	80015768 <rb_insert+0x194>
800157c4:	8c450004 	lw	a1,4(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:167
		} else {
			RB_INSERT_SUB(right, left);
		}
	}
	tree->root->left->red = 0;
	assert(!(tree->nil->red) && !(tree->root->red));
800157c8:	3c048002 	lui	a0,0x8002
800157cc:	3c068002 	lui	a2,0x8002
800157d0:	3c078002 	lui	a3,0x8002
800157d4:	24843474 	addiu	a0,a0,13428
800157d8:	240500a7 	li	a1,167
800157dc:	24c60e28 	addiu	a2,a2,3624
800157e0:	0c006b0b 	jal	8001ac2c <__panic>
800157e4:	24e734d0 	addiu	a3,a3,13520

800157e8 <rb_search>:
rb_search():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:231
 * the functions returns the one highest in the tree.
 * */
rb_node *rb_search(rb_tree * tree, int (*compare) (rb_node * node, void *key),
		   void *key)
{
	rb_node *nil = tree->nil, *node = tree->root->left;
800157e8:	8c820008 	lw	v0,8(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:230
 * function @compare). If there're multiple nodes with value 'equal' to @key,
 * the functions returns the one highest in the tree.
 * */
rb_node *rb_search(rb_tree * tree, int (*compare) (rb_node * node, void *key),
		   void *key)
{
800157ec:	27bdffd8 	addiu	sp,sp,-40
800157f0:	afb10018 	sw	s1,24(sp)
800157f4:	afb00014 	sw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:231
	rb_node *nil = tree->nil, *node = tree->root->left;
800157f8:	8c910004 	lw	s1,4(a0)
800157fc:	8c500008 	lw	s0,8(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:230
 * function @compare). If there're multiple nodes with value 'equal' to @key,
 * the functions returns the one highest in the tree.
 * */
rb_node *rb_search(rb_tree * tree, int (*compare) (rb_node * node, void *key),
		   void *key)
{
80015800:	afb30020 	sw	s3,32(sp)
80015804:	afb2001c 	sw	s2,28(sp)
80015808:	afbf0024 	sw	ra,36(sp)
8001580c:	00a09021 	move	s2,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:233
	rb_node *nil = tree->nil, *node = tree->root->left;
	int r;
	while (node != nil && (r = compare(node, key)) != 0) {
80015810:	1230000b 	beq	s1,s0,80015840 <rb_search+0x58>
80015814:	00c09821 	move	s3,a2
80015818:	02002021 	move	a0,s0
8001581c:	0240f809 	jalr	s2
80015820:	02602821 	move	a1,s3
80015824:	10400013 	beqz	v0,80015874 <rb_search+0x8c>
80015828:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:234
		node = (r > 0) ? node->left : node->right;
8001582c:	5840000d 	blezl	v0,80015864 <rb_search+0x7c>
80015830:	8e10000c 	lw	s0,12(s0)
80015834:	8e100008 	lw	s0,8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:233
rb_node *rb_search(rb_tree * tree, int (*compare) (rb_node * node, void *key),
		   void *key)
{
	rb_node *nil = tree->nil, *node = tree->root->left;
	int r;
	while (node != nil && (r = compare(node, key)) != 0) {
80015838:	1611fff8 	bne	s0,s1,8001581c <rb_search+0x34>
8001583c:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:237
		node = (r > 0) ? node->left : node->right;
	}
	return (node != nil) ? node : NULL;
}
80015840:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:236
	rb_node *nil = tree->nil, *node = tree->root->left;
	int r;
	while (node != nil && (r = compare(node, key)) != 0) {
		node = (r > 0) ? node->left : node->right;
	}
	return (node != nil) ? node : NULL;
80015844:	00008021 	move	s0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:237
}
80015848:	02001021 	move	v0,s0
8001584c:	8fb30020 	lw	s3,32(sp)
80015850:	8fb2001c 	lw	s2,28(sp)
80015854:	8fb10018 	lw	s1,24(sp)
80015858:	8fb00014 	lw	s0,20(sp)
8001585c:	03e00008 	jr	ra
80015860:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:233
rb_node *rb_search(rb_tree * tree, int (*compare) (rb_node * node, void *key),
		   void *key)
{
	rb_node *nil = tree->nil, *node = tree->root->left;
	int r;
	while (node != nil && (r = compare(node, key)) != 0) {
80015864:	1611ffed 	bne	s0,s1,8001581c <rb_search+0x34>
80015868:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:237
		node = (r > 0) ? node->left : node->right;
	}
	return (node != nil) ? node : NULL;
}
8001586c:	08005611 	j	80015844 <rb_search+0x5c>
80015870:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:236
	rb_node *nil = tree->nil, *node = tree->root->left;
	int r;
	while (node != nil && (r = compare(node, key)) != 0) {
		node = (r > 0) ? node->left : node->right;
	}
	return (node != nil) ? node : NULL;
80015874:	02308826 	xor	s1,s1,s0
80015878:	0011800a 	movz	s0,zero,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:237
}
8001587c:	02001021 	move	v0,s0
80015880:	8fb30020 	lw	s3,32(sp)
80015884:	8fb2001c 	lw	s2,28(sp)
80015888:	8fb10018 	lw	s1,24(sp)
8001588c:	8fb00014 	lw	s0,20(sp)
80015890:	03e00008 	jr	ra
80015894:	27bd0028 	addiu	sp,sp,40

80015898 <rb_delete>:
rb_delete():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:292
/* *
 * rb_delete - deletes @node from @tree, and calls rb_delete_fixup to
 * restore red-black properties.
 * */
void rb_delete(rb_tree * tree, rb_node * node)
{
80015898:	27bdffd8 	addiu	sp,sp,-40
8001589c:	afb10018 	sw	s1,24(sp)
800158a0:	afb00014 	sw	s0,20(sp)
800158a4:	00808821 	move	s1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:296
	rb_node *x, *y, *z = node;
	rb_node *nil = tree->nil, *root = tree->root;

	y = (z->left == nil
800158a8:	8cb00008 	lw	s0,8(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:294
 * restore red-black properties.
 * */
void rb_delete(rb_tree * tree, rb_node * node)
{
	rb_node *x, *y, *z = node;
	rb_node *nil = tree->nil, *root = tree->root;
800158ac:	8c840004 	lw	a0,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:292
/* *
 * rb_delete - deletes @node from @tree, and calls rb_delete_fixup to
 * restore red-black properties.
 * */
void rb_delete(rb_tree * tree, rb_node * node)
{
800158b0:	afbf0024 	sw	ra,36(sp)
800158b4:	afb30020 	sw	s3,32(sp)
800158b8:	afb2001c 	sw	s2,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:297
	rb_node *x, *y, *z = node;
	rb_node *nil = tree->nil, *root = tree->root;

	y = (z->left == nil
	     || z->right == nil) ? z : rb_tree_successor(tree, z);
800158bc:	12040094 	beq	s0,a0,80015b10 <rb_delete+0x278>
800158c0:	8e260008 	lw	a2,8(s1)
800158c4:	8ca3000c 	lw	v1,12(a1)
800158c8:	10640006 	beq	v1,a0,800158e4 <rb_delete+0x4c>
800158cc:	00a01021 	move	v0,a1
rb_tree_successor():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:182
static inline rb_node *rb_tree_successor(rb_tree * tree, rb_node * node)
{
	rb_node *x = node, *y, *nil = tree->nil;

	if ((y = x->right) != nil) {
		while (y->left != nil) {
800158d0:	8c620008 	lw	v0,8(v1)
800158d4:	5482fffe 	bnel	a0,v0,800158d0 <rb_delete+0x38>
800158d8:	00401821 	move	v1,v0
800158dc:	00601021 	move	v0,v1
rb_delete():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:298
	rb_node *x, *y, *z = node;
	rb_node *nil = tree->nil, *root = tree->root;

	y = (z->left == nil
	     || z->right == nil) ? z : rb_tree_successor(tree, z);
	x = (y->left != nil) ? y->left : y->right;
800158e0:	8c50000c 	lw	s0,12(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:300

	assert(y != root && y != nil);
800158e4:	5046008f 	beql	v0,a2,80015b24 <rb_delete+0x28c>
800158e8:	3c048002 	lui	a0,0x8002
800158ec:	1044008d 	beq	v0,a0,80015b24 <rb_delete+0x28c>
800158f0:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:302

	x->parent = y->parent;
800158f4:	8c430004 	lw	v1,4(v0)
800158f8:	ae030004 	sw	v1,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:303
	if (y == y->parent->left) {
800158fc:	8c430004 	lw	v1,4(v0)
80015900:	8c640008 	lw	a0,8(v1)
80015904:	50440002 	beql	v0,a0,80015910 <rb_delete+0x78>
80015908:	ac700008 	sw	s0,8(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:306
		y->parent->left = x;
	} else {
		y->parent->right = x;
8001590c:	ac70000c 	sw	s0,12(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:311
	}

	bool need_fixup = !(y->red);

	if (y != z) {
80015910:	10450010 	beq	v0,a1,80015954 <rb_delete+0xbc>
80015914:	8c470000 	lw	a3,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:312
		if (z == z->parent->left) {
80015918:	8ca30004 	lw	v1,4(a1)
8001591c:	8c640008 	lw	a0,8(v1)
80015920:	50a40002 	beql	a1,a0,8001592c <rb_delete+0x94>
80015924:	ac620008 	sw	v0,8(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:315
			z->parent->left = y;
		} else {
			z->parent->right = y;
80015928:	ac62000c 	sw	v0,12(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:317
		}
		z->left->parent = z->right->parent = y;
8001592c:	8ca40008 	lw	a0,8(a1)
80015930:	8ca3000c 	lw	v1,12(a1)
80015934:	ac620004 	sw	v0,4(v1)
80015938:	ac820004 	sw	v0,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:318
		*y = *z;
8001593c:	8ca80000 	lw	t0,0(a1)
80015940:	8ca50004 	lw	a1,4(a1)
80015944:	ac440008 	sw	a0,8(v0)
80015948:	ac480000 	sw	t0,0(v0)
8001594c:	ac450004 	sw	a1,4(v0)
80015950:	ac43000c 	sw	v1,12(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:320
	}
	if (need_fixup) {
80015954:	10e00007 	beqz	a3,80015974 <rb_delete+0xdc>
80015958:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:323
		rb_delete_fixup(tree, x);
	}
}
8001595c:	8fb30020 	lw	s3,32(sp)
80015960:	8fb2001c 	lw	s2,28(sp)
80015964:	8fb10018 	lw	s1,24(sp)
80015968:	8fb00014 	lw	s0,20(sp)
8001596c:	03e00008 	jr	ra
80015970:	27bd0028 	addiu	sp,sp,40
rb_delete_fixup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:245
 * rb_delete_fixup - performs rotations and changes colors to restore
 * red-black properties after a node is deleted.
 * */
static void rb_delete_fixup(rb_tree * tree, rb_node * node)
{
	rb_node *x = node, *w, *root = tree->root->left;
80015974:	8cd30008 	lw	s3,8(a2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:275
            rb_##_left##_rotate(tree, x->parent);               \
            x = root;                                           \
        }                                                       \
    } while (0)

	while (x != root && !x->red) {
80015978:	52130026 	beql	s0,s3,80015a14 <rb_delete+0x17c>
8001597c:	ae600000 	sw	zero,0(s3)
80015980:	8e020000 	lw	v0,0(s0)
80015984:	14400065 	bnez	v0,80015b1c <rb_delete+0x284>
80015988:	24120001 	li	s2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:276
		if (x == x->parent->left) {
8001598c:	0800566f 	j	800159bc <rb_delete+0x124>
80015990:	8e040004 	lw	a0,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:279
			RB_DELETE_FIXUP_SUB(left, right);
		} else {
			RB_DELETE_FIXUP_SUB(right, left);
80015994:	8c650000 	lw	a1,0(v1)
80015998:	54a00016 	bnezl	a1,800159f4 <rb_delete+0x15c>
8001599c:	8e060004 	lw	a2,4(s0)
800159a0:	ac520000 	sw	s2,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:275
            rb_##_left##_rotate(tree, x->parent);               \
            x = root;                                           \
        }                                                       \
    } while (0)

	while (x != root && !x->red) {
800159a4:	1093001a 	beq	a0,s3,80015a10 <rb_delete+0x178>
800159a8:	00808021 	move	s0,a0
800159ac:	8c820000 	lw	v0,0(a0)
800159b0:	54400017 	bnezl	v0,80015a10 <rb_delete+0x178>
800159b4:	00809821 	move	s3,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:276
		if (x == x->parent->left) {
800159b8:	8e040004 	lw	a0,4(s0)
800159bc:	8c820008 	lw	v0,8(a0)
800159c0:	5202002b 	beql	s0,v0,80015a70 <rb_delete+0x1d8>
800159c4:	8c82000c 	lw	v0,12(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:279
			RB_DELETE_FIXUP_SUB(left, right);
		} else {
			RB_DELETE_FIXUP_SUB(right, left);
800159c8:	8c430000 	lw	v1,0(v0)
800159cc:	54600021 	bnezl	v1,80015a54 <rb_delete+0x1bc>
800159d0:	ac400000 	sw	zero,0(v0)
800159d4:	8c45000c 	lw	a1,12(v0)
800159d8:	8ca30000 	lw	v1,0(a1)
800159dc:	1060ffed 	beqz	v1,80015994 <rb_delete+0xfc>
800159e0:	8c430008 	lw	v1,8(v0)
800159e4:	8c640000 	lw	a0,0(v1)
800159e8:	50800011 	beqzl	a0,80015a30 <rb_delete+0x198>
800159ec:	24030001 	li	v1,1
800159f0:	8e060004 	lw	a2,4(s0)
800159f4:	8cc70000 	lw	a3,0(a2)
800159f8:	02202021 	move	a0,s1
800159fc:	00c02821 	move	a1,a2
80015a00:	ac470000 	sw	a3,0(v0)
80015a04:	acc00000 	sw	zero,0(a2)
80015a08:	0c005508 	jal	80015420 <rb_right_rotate>
80015a0c:	ac600000 	sw	zero,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:282
		}
	}
	x->red = 0;
80015a10:	ae600000 	sw	zero,0(s3)
rb_delete():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:323
		*y = *z;
	}
	if (need_fixup) {
		rb_delete_fixup(tree, x);
	}
}
80015a14:	8fbf0024 	lw	ra,36(sp)
80015a18:	8fb30020 	lw	s3,32(sp)
80015a1c:	8fb2001c 	lw	s2,28(sp)
80015a20:	8fb10018 	lw	s1,24(sp)
80015a24:	8fb00014 	lw	s0,20(sp)
80015a28:	03e00008 	jr	ra
80015a2c:	27bd0028 	addiu	sp,sp,40
rb_delete_fixup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:279

	while (x != root && !x->red) {
		if (x == x->parent->left) {
			RB_DELETE_FIXUP_SUB(left, right);
		} else {
			RB_DELETE_FIXUP_SUB(right, left);
80015a30:	aca00000 	sw	zero,0(a1)
80015a34:	02202021 	move	a0,s1
80015a38:	ac430000 	sw	v1,0(v0)
80015a3c:	0c0054dc 	jal	80015370 <rb_left_rotate>
80015a40:	00402821 	move	a1,v0
80015a44:	8e060004 	lw	a2,4(s0)
80015a48:	8cc20008 	lw	v0,8(a2)
80015a4c:	0800567d 	j	800159f4 <rb_delete+0x15c>
80015a50:	8c430008 	lw	v1,8(v0)
80015a54:	00802821 	move	a1,a0
80015a58:	ac920000 	sw	s2,0(a0)
80015a5c:	0c005508 	jal	80015420 <rb_right_rotate>
80015a60:	02202021 	move	a0,s1
80015a64:	8e040004 	lw	a0,4(s0)
80015a68:	08005675 	j	800159d4 <rb_delete+0x13c>
80015a6c:	8c820008 	lw	v0,8(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:277
        }                                                       \
    } while (0)

	while (x != root && !x->red) {
		if (x == x->parent->left) {
			RB_DELETE_FIXUP_SUB(left, right);
80015a70:	8c430000 	lw	v1,0(v0)
80015a74:	5460001f 	bnezl	v1,80015af4 <rb_delete+0x25c>
80015a78:	ac400000 	sw	zero,0(v0)
80015a7c:	8c450008 	lw	a1,8(v0)
80015a80:	8ca30000 	lw	v1,0(a1)
80015a84:	1460000e 	bnez	v1,80015ac0 <rb_delete+0x228>
80015a88:	8c43000c 	lw	v1,12(v0)
80015a8c:	8c650000 	lw	a1,0(v1)
80015a90:	50a0ffc4 	beqzl	a1,800159a4 <rb_delete+0x10c>
80015a94:	ac520000 	sw	s2,0(v0)
80015a98:	8e060004 	lw	a2,4(s0)
80015a9c:	8cc70000 	lw	a3,0(a2)
80015aa0:	02202021 	move	a0,s1
80015aa4:	00c02821 	move	a1,a2
80015aa8:	ac470000 	sw	a3,0(v0)
80015aac:	acc00000 	sw	zero,0(a2)
80015ab0:	0c0054dc 	jal	80015370 <rb_left_rotate>
80015ab4:	ac600000 	sw	zero,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:282
		} else {
			RB_DELETE_FIXUP_SUB(right, left);
		}
	}
	x->red = 0;
80015ab8:	08005685 	j	80015a14 <rb_delete+0x17c>
80015abc:	ae600000 	sw	zero,0(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:277
        }                                                       \
    } while (0)

	while (x != root && !x->red) {
		if (x == x->parent->left) {
			RB_DELETE_FIXUP_SUB(left, right);
80015ac0:	8c640000 	lw	a0,0(v1)
80015ac4:	5480fff5 	bnezl	a0,80015a9c <rb_delete+0x204>
80015ac8:	8e060004 	lw	a2,4(s0)
80015acc:	24030001 	li	v1,1
80015ad0:	aca00000 	sw	zero,0(a1)
80015ad4:	02202021 	move	a0,s1
80015ad8:	ac430000 	sw	v1,0(v0)
80015adc:	0c005508 	jal	80015420 <rb_right_rotate>
80015ae0:	00402821 	move	a1,v0
80015ae4:	8e060004 	lw	a2,4(s0)
80015ae8:	8cc2000c 	lw	v0,12(a2)
80015aec:	080056a7 	j	80015a9c <rb_delete+0x204>
80015af0:	8c43000c 	lw	v1,12(v0)
80015af4:	00802821 	move	a1,a0
80015af8:	ac920000 	sw	s2,0(a0)
80015afc:	0c0054dc 	jal	80015370 <rb_left_rotate>
80015b00:	02202021 	move	a0,s1
80015b04:	8e040004 	lw	a0,4(s0)
80015b08:	0800569f 	j	80015a7c <rb_delete+0x1e4>
80015b0c:	8c82000c 	lw	v0,12(a0)
rb_delete():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:297
{
	rb_node *x, *y, *z = node;
	rb_node *nil = tree->nil, *root = tree->root;

	y = (z->left == nil
	     || z->right == nil) ? z : rb_tree_successor(tree, z);
80015b10:	00a01021 	move	v0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:298
	x = (y->left != nil) ? y->left : y->right;
80015b14:	08005639 	j	800158e4 <rb_delete+0x4c>
80015b18:	8c50000c 	lw	s0,12(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:275
            rb_##_left##_rotate(tree, x->parent);               \
            x = root;                                           \
        }                                                       \
    } while (0)

	while (x != root && !x->red) {
80015b1c:	08005684 	j	80015a10 <rb_delete+0x178>
80015b20:	02009821 	move	s3,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:300

	y = (z->left == nil
	     || z->right == nil) ? z : rb_tree_successor(tree, z);
	x = (y->left != nil) ? y->left : y->right;

	assert(y != root && y != nil);
80015b24:	3c068002 	lui	a2,0x8002
80015b28:	3c078002 	lui	a3,0x8002
80015b2c:	24843474 	addiu	a0,a0,13428
80015b30:	2405012c 	li	a1,300
80015b34:	24c60e28 	addiu	a2,a2,3624
80015b38:	0c006b0b 	jal	8001ac2c <__panic>
80015b3c:	24e734f8 	addiu	a3,a3,13560

80015b40 <rb_tree_destroy>:
rb_tree_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:327
	}
}

/* rb_tree_destroy - destroy a tree and free memory */
void rb_tree_destroy(rb_tree * tree)
{
80015b40:	27bdffe8 	addiu	sp,sp,-24
80015b44:	afb00010 	sw	s0,16(sp)
80015b48:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:328
	kfree(tree->root);
80015b4c:	8c840008 	lw	a0,8(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:327
	}
}

/* rb_tree_destroy - destroy a tree and free memory */
void rb_tree_destroy(rb_tree * tree)
{
80015b50:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:328
	kfree(tree->root);
80015b54:	0c0054b1 	jal	800152c4 <kfree>
80015b58:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:329
	kfree(tree->nil);
80015b5c:	0c0054b1 	jal	800152c4 <kfree>
80015b60:	8e040004 	lw	a0,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:330
	kfree(tree);
80015b64:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:331
}
80015b68:	8fbf0014 	lw	ra,20(sp)
80015b6c:	8fb00010 	lw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:330
/* rb_tree_destroy - destroy a tree and free memory */
void rb_tree_destroy(rb_tree * tree)
{
	kfree(tree->root);
	kfree(tree->nil);
	kfree(tree);
80015b70:	080054b1 	j	800152c4 <kfree>
80015b74:	27bd0018 	addiu	sp,sp,24

80015b78 <rb_node_prev>:
rb_tree_predecessor():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:204
 * rb_tree_predecessor - returns the predecessor of @node, or nil
 * if no predecessor exists, likes rb_tree_successor.
 * */
static inline rb_node *rb_tree_predecessor(rb_tree * tree, rb_node * node)
{
	rb_node *x = node, *y, *nil = tree->nil;
80015b78:	8c860004 	lw	a2,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:206

	if ((y = x->left) != nil) {
80015b7c:	8ca20008 	lw	v0,8(a1)
80015b80:	54c20004 	bnel	a2,v0,80015b94 <rb_node_prev+0x1c>
80015b84:	8c43000c 	lw	v1,12(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:212
		while (y->right != nil) {
			y = y->right;
		}
		return y;
	} else {
		y = x->parent;
80015b88:	080056ea 	j	80015ba8 <rb_node_prev+0x30>
80015b8c:	8ca30004 	lw	v1,4(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:207
static inline rb_node *rb_tree_predecessor(rb_tree * tree, rb_node * node)
{
	rb_node *x = node, *y, *nil = tree->nil;

	if ((y = x->left) != nil) {
		while (y->right != nil) {
80015b90:	8c43000c 	lw	v1,12(v0)
80015b94:	54c3fffe 	bnel	a2,v1,80015b90 <rb_node_prev+0x18>
80015b98:	00601021 	move	v0,v1
rb_node_prev():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:340
 * or 'NULL' if no predecessor exists.
 * */
rb_node *rb_node_prev(rb_tree * tree, rb_node * node)
{
	rb_node *prev = rb_tree_predecessor(tree, node);
	return (prev != tree->nil) ? prev : NULL;
80015b9c:	00c23026 	xor	a2,a2,v0
80015ba0:	03e00008 	jr	ra
80015ba4:	0006100a 	movz	v0,zero,a2
rb_tree_predecessor():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:213
			y = y->right;
		}
		return y;
	} else {
		y = x->parent;
		while (x == y->left) {
80015ba8:	8c620008 	lw	v0,8(v1)
80015bac:	14a2fffb 	bne	a1,v0,80015b9c <rb_node_prev+0x24>
80015bb0:	00601021 	move	v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:214
			if (y == tree->root) {
80015bb4:	8c850008 	lw	a1,8(a0)
80015bb8:	14650005 	bne	v1,a1,80015bd0 <rb_node_prev+0x58>
80015bbc:	00001021 	move	v0,zero
80015bc0:	080056fc 	j	80015bf0 <rb_node_prev+0x78>
80015bc4:	00000000 	nop
80015bc8:	10450007 	beq	v0,a1,80015be8 <rb_node_prev+0x70>
80015bcc:	00401821 	move	v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:217
				return nil;
			}
			x = y, y = y->parent;
80015bd0:	8c620004 	lw	v0,4(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:213
			y = y->right;
		}
		return y;
	} else {
		y = x->parent;
		while (x == y->left) {
80015bd4:	8c440008 	lw	a0,8(v0)
80015bd8:	1083fffb 	beq	a0,v1,80015bc8 <rb_node_prev+0x50>
80015bdc:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:340
 * or 'NULL' if no predecessor exists.
 * */
rb_node *rb_node_prev(rb_tree * tree, rb_node * node)
{
	rb_node *prev = rb_tree_predecessor(tree, node);
	return (prev != tree->nil) ? prev : NULL;
80015be0:	080056e8 	j	80015ba0 <rb_node_prev+0x28>
80015be4:	00c23026 	xor	a2,a2,v0
rb_node_prev():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:341
}
80015be8:	03e00008 	jr	ra
80015bec:	00001021 	move	v0,zero
80015bf0:	03e00008 	jr	ra
80015bf4:	00000000 	nop

80015bf8 <rb_node_next>:
rb_tree_successor():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:179
 * if no successor exists. Make sure that @node must belong to @tree,
 * and this function should only be called by rb_node_prev.
 * */
static inline rb_node *rb_tree_successor(rb_tree * tree, rb_node * node)
{
	rb_node *x = node, *y, *nil = tree->nil;
80015bf8:	8c860004 	lw	a2,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:181

	if ((y = x->right) != nil) {
80015bfc:	8ca2000c 	lw	v0,12(a1)
80015c00:	54c20004 	bnel	a2,v0,80015c14 <rb_node_next+0x1c>
80015c04:	8c430008 	lw	v1,8(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:187
		while (y->left != nil) {
			y = y->left;
		}
		return y;
	} else {
		y = x->parent;
80015c08:	0800570b 	j	80015c2c <rb_node_next+0x34>
80015c0c:	8ca20004 	lw	v0,4(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:182
static inline rb_node *rb_tree_successor(rb_tree * tree, rb_node * node)
{
	rb_node *x = node, *y, *nil = tree->nil;

	if ((y = x->right) != nil) {
		while (y->left != nil) {
80015c10:	8c430008 	lw	v1,8(v0)
80015c14:	54c3fffe 	bnel	a2,v1,80015c10 <rb_node_next+0x18>
80015c18:	00601021 	move	v0,v1
rb_node_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:350
 * or 'NULL' if no successor exists.
 * */
rb_node *rb_node_next(rb_tree * tree, rb_node * node)
{
	rb_node *next = rb_tree_successor(tree, node);
	return (next != tree->nil) ? next : NULL;
80015c1c:	00c23026 	xor	a2,a2,v0
80015c20:	0006100a 	movz	v0,zero,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:351
}
80015c24:	03e00008 	jr	ra
80015c28:	00000000 	nop
rb_tree_successor():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:188
			y = y->left;
		}
		return y;
	} else {
		y = x->parent;
		while (x == y->right) {
80015c2c:	8c47000c 	lw	a3,12(v0)
80015c30:	10a70003 	beq	a1,a3,80015c40 <rb_node_next+0x48>
80015c34:	00401821 	move	v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:191
			x = y, y = y->parent;
		}
		if (y == tree->root) {
80015c38:	08005715 	j	80015c54 <rb_node_next+0x5c>
80015c3c:	8c840008 	lw	a0,8(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:189
		}
		return y;
	} else {
		y = x->parent;
		while (x == y->right) {
			x = y, y = y->parent;
80015c40:	8c430004 	lw	v1,4(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:188
			y = y->left;
		}
		return y;
	} else {
		y = x->parent;
		while (x == y->right) {
80015c44:	8c65000c 	lw	a1,12(v1)
80015c48:	50a2fffd 	beql	a1,v0,80015c40 <rb_node_next+0x48>
80015c4c:	00601021 	move	v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:191
			x = y, y = y->parent;
		}
		if (y == tree->root) {
80015c50:	8c840008 	lw	a0,8(a0)
80015c54:	1064fff3 	beq	v1,a0,80015c24 <rb_node_next+0x2c>
80015c58:	00001021 	move	v0,zero
80015c5c:	00601021 	move	v0,v1
rb_node_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:350
 * or 'NULL' if no successor exists.
 * */
rb_node *rb_node_next(rb_tree * tree, rb_node * node)
{
	rb_node *next = rb_tree_successor(tree, node);
	return (next != tree->nil) ? next : NULL;
80015c60:	00c23026 	xor	a2,a2,v0
80015c64:	03e00008 	jr	ra
80015c68:	0006100a 	movz	v0,zero,a2

80015c6c <rb_node_root>:
rb_node_root():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:356
}

/* rb_node_root - returns the root node of a @tree, or 'NULL' if tree is empty */
rb_node *rb_node_root(rb_tree * tree)
{
	rb_node *node = tree->root->left;
80015c6c:	8c830008 	lw	v1,8(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:357
	return (node != tree->nil) ? node : NULL;
80015c70:	8c820004 	lw	v0,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:356
}

/* rb_node_root - returns the root node of a @tree, or 'NULL' if tree is empty */
rb_node *rb_node_root(rb_tree * tree)
{
	rb_node *node = tree->root->left;
80015c74:	8c630008 	lw	v1,8(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:357
	return (node != tree->nil) ? node : NULL;
80015c78:	00431026 	xor	v0,v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:358
}
80015c7c:	0002180a 	movz	v1,zero,v0
80015c80:	03e00008 	jr	ra
80015c84:	00601021 	move	v0,v1

80015c88 <rb_node_left>:
rb_node_left():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:363

/* rb_node_left - gets the left child of @node, or 'NULL' if no such node */
rb_node *rb_node_left(rb_tree * tree, rb_node * node)
{
	rb_node *left = node->left;
80015c88:	8ca30008 	lw	v1,8(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:364
	return (left != tree->nil) ? left : NULL;
80015c8c:	8c820004 	lw	v0,4(a0)
80015c90:	00431026 	xor	v0,v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:365
}
80015c94:	0002180a 	movz	v1,zero,v0
80015c98:	03e00008 	jr	ra
80015c9c:	00601021 	move	v0,v1

80015ca0 <rb_node_right>:
rb_node_right():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:370

/* rb_node_right - gets the right child of @node, or 'NULL' if no such node */
rb_node *rb_node_right(rb_tree * tree, rb_node * node)
{
	rb_node *right = node->right;
80015ca0:	8ca3000c 	lw	v1,12(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:371
	return (right != tree->nil) ? right : NULL;
80015ca4:	8c820004 	lw	v0,4(a0)
80015ca8:	00431026 	xor	v0,v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:372
}
80015cac:	0002180a 	movz	v1,zero,v0
80015cb0:	03e00008 	jr	ra
80015cb4:	00601021 	move	v0,v1

80015cb8 <check_tree>:
check_tree():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:375

int check_tree(rb_tree * tree, rb_node * node)
{
80015cb8:	27bdffe0 	addiu	sp,sp,-32
80015cbc:	afb20018 	sw	s2,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:376
	rb_node *nil = tree->nil;
80015cc0:	8c920004 	lw	s2,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:375
	rb_node *right = node->right;
	return (right != tree->nil) ? right : NULL;
}

int check_tree(rb_tree * tree, rb_node * node)
{
80015cc4:	afb10014 	sw	s1,20(sp)
80015cc8:	afb00010 	sw	s0,16(sp)
80015ccc:	afbf001c 	sw	ra,28(sp)
80015cd0:	00808821 	move	s1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:377
	rb_node *nil = tree->nil;
	if (node == nil) {
80015cd4:	10b20034 	beq	a1,s2,80015da8 <check_tree+0xf0>
80015cd8:	00a08021 	move	s0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:381
		assert(!node->red);
		return 1;
	}
	if (node->left != nil) {
80015cdc:	8ca50008 	lw	a1,8(a1)
80015ce0:	50b2000b 	beql	a1,s2,80015d10 <check_tree+0x58>
80015ce4:	8e03000c 	lw	v1,12(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:382
		assert(COMPARE(tree, node, node->left) >= 0);
80015ce8:	8c820000 	lw	v0,0(a0)
80015cec:	0040f809 	jalr	v0
80015cf0:	02002021 	move	a0,s0
80015cf4:	04420059 	bltzl	v0,80015e5c <check_tree+0x1a4>
80015cf8:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:383
		assert(node->left->parent == node);
80015cfc:	8e050008 	lw	a1,8(s0)
80015d00:	8ca20004 	lw	v0,4(a1)
80015d04:	5450004e 	bnel	v0,s0,80015e40 <check_tree+0x188>
80015d08:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:385
	}
	if (node->right != nil) {
80015d0c:	8e03000c 	lw	v1,12(s0)
80015d10:	1072000b 	beq	v1,s2,80015d40 <check_tree+0x88>
80015d14:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:386
		assert(COMPARE(tree, node, node->right) <= 0);
80015d18:	8e220000 	lw	v0,0(s1)
80015d1c:	0040f809 	jalr	v0
80015d20:	00602821 	move	a1,v1
80015d24:	1c40003f 	bgtz	v0,80015e24 <check_tree+0x16c>
80015d28:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:387
		assert(node->right->parent == node);
80015d2c:	8e03000c 	lw	v1,12(s0)
80015d30:	8c620004 	lw	v0,4(v1)
80015d34:	14500035 	bne	v0,s0,80015e0c <check_tree+0x154>
80015d38:	3c068002 	lui	a2,0x8002
80015d3c:	8e050008 	lw	a1,8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:389
	}
	if (node->red) {
80015d40:	8e020000 	lw	v0,0(s0)
80015d44:	10400007 	beqz	v0,80015d64 <check_tree+0xac>
80015d48:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:390
		assert(!node->left->red && !node->right->red);
80015d4c:	8ca20000 	lw	v0,0(a1)
80015d50:	14400020 	bnez	v0,80015dd4 <check_tree+0x11c>
80015d54:	3c048002 	lui	a0,0x8002
80015d58:	8c620000 	lw	v0,0(v1)
80015d5c:	1440001e 	bnez	v0,80015dd8 <check_tree+0x120>
80015d60:	3c068002 	lui	a2,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:392
	}
	int hb_left = check_tree(tree, node->left);
80015d64:	0c00572e 	jal	80015cb8 <check_tree>
80015d68:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:393
	int hb_right = check_tree(tree, node->right);
80015d6c:	8e05000c 	lw	a1,12(s0)
80015d70:	02202021 	move	a0,s1
80015d74:	0c00572e 	jal	80015cb8 <check_tree>
80015d78:	00409021 	move	s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:394
	assert(hb_left == hb_right);
80015d7c:	1642001c 	bne	s2,v0,80015df0 <check_tree+0x138>
80015d80:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:396
	int hb = hb_left;
	if (!node->red) {
80015d84:	8e020000 	lw	v0,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:397
		hb++;
80015d88:	2c420001 	sltiu	v0,v0,1
80015d8c:	02421021 	addu	v0,s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:400
	}
	return hb;
}
80015d90:	8fbf001c 	lw	ra,28(sp)
80015d94:	8fb20018 	lw	s2,24(sp)
80015d98:	8fb10014 	lw	s1,20(sp)
80015d9c:	8fb00010 	lw	s0,16(sp)
80015da0:	03e00008 	jr	ra
80015da4:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:378

int check_tree(rb_tree * tree, rb_node * node)
{
	rb_node *nil = tree->nil;
	if (node == nil) {
		assert(!node->red);
80015da8:	8ca30000 	lw	v1,0(a1)
80015dac:	1060fff8 	beqz	v1,80015d90 <check_tree+0xd8>
80015db0:	24020001 	li	v0,1
80015db4:	3c048002 	lui	a0,0x8002
80015db8:	3c068002 	lui	a2,0x8002
80015dbc:	3c078002 	lui	a3,0x8002
80015dc0:	24843474 	addiu	a0,a0,13428
80015dc4:	2405017a 	li	a1,378
80015dc8:	24c60e28 	addiu	a2,a2,3624
80015dcc:	0c006b0b 	jal	8001ac2c <__panic>
80015dd0:	24e73510 	addiu	a3,a3,13584
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:390
	if (node->right != nil) {
		assert(COMPARE(tree, node, node->right) <= 0);
		assert(node->right->parent == node);
	}
	if (node->red) {
		assert(!node->left->red && !node->right->red);
80015dd4:	3c068002 	lui	a2,0x8002
80015dd8:	3c078002 	lui	a3,0x8002
80015ddc:	24843474 	addiu	a0,a0,13428
80015de0:	24050186 	li	a1,390
80015de4:	24c60e28 	addiu	a2,a2,3624
80015de8:	0c006b0b 	jal	8001ac2c <__panic>
80015dec:	24e735a4 	addiu	a3,a3,13732
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:394
	}
	int hb_left = check_tree(tree, node->left);
	int hb_right = check_tree(tree, node->right);
	assert(hb_left == hb_right);
80015df0:	3c068002 	lui	a2,0x8002
80015df4:	3c078002 	lui	a3,0x8002
80015df8:	24843474 	addiu	a0,a0,13428
80015dfc:	2405018a 	li	a1,394
80015e00:	24c60e28 	addiu	a2,a2,3624
80015e04:	0c006b0b 	jal	8001ac2c <__panic>
80015e08:	24e735cc 	addiu	a3,a3,13772
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:387
		assert(COMPARE(tree, node, node->left) >= 0);
		assert(node->left->parent == node);
	}
	if (node->right != nil) {
		assert(COMPARE(tree, node, node->right) <= 0);
		assert(node->right->parent == node);
80015e0c:	3c078002 	lui	a3,0x8002
80015e10:	24843474 	addiu	a0,a0,13428
80015e14:	24050183 	li	a1,387
80015e18:	24c60e28 	addiu	a2,a2,3624
80015e1c:	0c006b0b 	jal	8001ac2c <__panic>
80015e20:	24e73588 	addiu	a3,a3,13704
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:386
	if (node->left != nil) {
		assert(COMPARE(tree, node, node->left) >= 0);
		assert(node->left->parent == node);
	}
	if (node->right != nil) {
		assert(COMPARE(tree, node, node->right) <= 0);
80015e24:	3c068002 	lui	a2,0x8002
80015e28:	3c078002 	lui	a3,0x8002
80015e2c:	24843474 	addiu	a0,a0,13428
80015e30:	24050182 	li	a1,386
80015e34:	24c60e28 	addiu	a2,a2,3624
80015e38:	0c006b0b 	jal	8001ac2c <__panic>
80015e3c:	24e73560 	addiu	a3,a3,13664
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:383
		assert(!node->red);
		return 1;
	}
	if (node->left != nil) {
		assert(COMPARE(tree, node, node->left) >= 0);
		assert(node->left->parent == node);
80015e40:	3c068002 	lui	a2,0x8002
80015e44:	3c078002 	lui	a3,0x8002
80015e48:	24843474 	addiu	a0,a0,13428
80015e4c:	2405017f 	li	a1,383
80015e50:	24c60e28 	addiu	a2,a2,3624
80015e54:	0c006b0b 	jal	8001ac2c <__panic>
80015e58:	24e73544 	addiu	a3,a3,13636
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:382
	if (node == nil) {
		assert(!node->red);
		return 1;
	}
	if (node->left != nil) {
		assert(COMPARE(tree, node, node->left) >= 0);
80015e5c:	3c068002 	lui	a2,0x8002
80015e60:	3c078002 	lui	a3,0x8002
80015e64:	24843474 	addiu	a0,a0,13428
80015e68:	2405017e 	li	a1,382
80015e6c:	24c60e28 	addiu	a2,a2,3624
80015e70:	0c006b0b 	jal	8001ac2c <__panic>
80015e74:	24e7351c 	addiu	a3,a3,13596

80015e78 <check_rb_tree>:
check_rb_tree():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:429
	return rbn2data(node)->data - (long)key;
}

void check_rb_tree(void)
{
	rb_tree *tree = rb_tree_create(check_compare1);
80015e78:	3c048001 	lui	a0,0x8001
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:428
{
	return rbn2data(node)->data - (long)key;
}

void check_rb_tree(void)
{
80015e7c:	27bdffc8 	addiu	sp,sp,-56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:429
	rb_tree *tree = rb_tree_create(check_compare1);
80015e80:	24845354 	addiu	a0,a0,21332
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:428
{
	return rbn2data(node)->data - (long)key;
}

void check_rb_tree(void)
{
80015e84:	afb00010 	sw	s0,16(sp)
80015e88:	afbf0034 	sw	ra,52(sp)
80015e8c:	afbe0030 	sw	s8,48(sp)
80015e90:	afb7002c 	sw	s7,44(sp)
80015e94:	afb60028 	sw	s6,40(sp)
80015e98:	afb50024 	sw	s5,36(sp)
80015e9c:	afb40020 	sw	s4,32(sp)
80015ea0:	afb3001c 	sw	s3,28(sp)
80015ea4:	afb20018 	sw	s2,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:429
	rb_tree *tree = rb_tree_create(check_compare1);
80015ea8:	0c005544 	jal	80015510 <rb_tree_create>
80015eac:	afb10014 	sw	s1,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:430
	assert(tree != NULL);
80015eb0:	10400116 	beqz	v0,8001630c <check_rb_tree+0x494>
80015eb4:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:432

	rb_node *nil = tree->nil, *root = tree->root;
80015eb8:	8c420004 	lw	v0,4(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:433
	assert(!nil->red && root->left == nil);
80015ebc:	8c430000 	lw	v1,0(v0)
80015ec0:	1460010e 	bnez	v1,800162fc <check_rb_tree+0x484>
80015ec4:	8e140008 	lw	s4,8(s0)
80015ec8:	8e9e0008 	lw	s8,8(s4)
80015ecc:	17c2010c 	bne	s8,v0,80016300 <check_rb_tree+0x488>
80015ed0:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:436

	int total = 100;
	struct check_data **all =
80015ed4:	0c005534 	jal	800154d0 <check_safe_kmalloc>
80015ed8:	24040190 	li	a0,400
80015edc:	00408821 	move	s1,v0
80015ee0:	00409021 	move	s2,v0
80015ee4:	0040a821 	move	s5,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:440
	    check_safe_kmalloc(sizeof(struct check_data *) * total);

	long i;
	for (i = 0; i < total; i++) {
80015ee8:	00009821 	move	s3,zero
80015eec:	24160064 	li	s6,100
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:441
		all[i] = check_safe_kmalloc(sizeof(struct check_data));
80015ef0:	0c005534 	jal	800154d0 <check_safe_kmalloc>
80015ef4:	24040014 	li	a0,20
80015ef8:	aea20000 	sw	v0,0(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:442
		all[i]->data = i;
80015efc:	ac530000 	sw	s3,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:440
	int total = 100;
	struct check_data **all =
	    check_safe_kmalloc(sizeof(struct check_data *) * total);

	long i;
	for (i = 0; i < total; i++) {
80015f00:	26730001 	addiu	s3,s3,1
80015f04:	1676fffa 	bne	s3,s6,80015ef0 <check_rb_tree+0x78>
80015f08:	26b50004 	addiu	s5,s5,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:445
		all[i] = check_safe_kmalloc(sizeof(struct check_data));
		all[i]->data = i;
	}

	int *mark = check_safe_kmalloc(sizeof(int) * total);
80015f0c:	0c005534 	jal	800154d0 <check_safe_kmalloc>
80015f10:	24040190 	li	a0,400
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:446
	memset(mark, 0, sizeof(int) * total);
80015f14:	00402021 	move	a0,v0
80015f18:	00002821 	move	a1,zero
80015f1c:	24060190 	li	a2,400
80015f20:	0c005c52 	jal	80017148 <memset>
80015f24:	00409821 	move	s3,v0
80015f28:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:449

	for (i = 0; i < total; i++) {
		mark[all[i]->data] = 1;
80015f2c:	24050001 	li	a1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:448
	}

	int *mark = check_safe_kmalloc(sizeof(int) * total);
	memset(mark, 0, sizeof(int) * total);

	for (i = 0; i < total; i++) {
80015f30:	24040190 	li	a0,400
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:427
static inline int check_compare2(rb_node * node, void *key)
{
	return rbn2data(node)->data - (long)key;
}

void check_rb_tree(void)
80015f34:	02221821 	addu	v1,s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:449

	int *mark = check_safe_kmalloc(sizeof(int) * total);
	memset(mark, 0, sizeof(int) * total);

	for (i = 0; i < total; i++) {
		mark[all[i]->data] = 1;
80015f38:	8c630000 	lw	v1,0(v1)
80015f3c:	24420004 	addiu	v0,v0,4
80015f40:	8c630000 	lw	v1,0(v1)
80015f44:	00031880 	sll	v1,v1,0x2
80015f48:	02631821 	addu	v1,s3,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:448
	}

	int *mark = check_safe_kmalloc(sizeof(int) * total);
	memset(mark, 0, sizeof(int) * total);

	for (i = 0; i < total; i++) {
80015f4c:	1444fff9 	bne	v0,a0,80015f34 <check_rb_tree+0xbc>
80015f50:	ac650000 	sw	a1,0(v1)
80015f54:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:452
		mark[all[i]->data] = 1;
	}
	for (i = 0; i < total; i++) {
		assert(mark[i] == 1);
80015f58:	24040001 	li	a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:451
	memset(mark, 0, sizeof(int) * total);

	for (i = 0; i < total; i++) {
		mark[all[i]->data] = 1;
	}
	for (i = 0; i < total; i++) {
80015f5c:	24050190 	li	a1,400
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:427
static inline int check_compare2(rb_node * node, void *key)
{
	return rbn2data(node)->data - (long)key;
}

void check_rb_tree(void)
80015f60:	02621821 	addu	v1,s3,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:452

	for (i = 0; i < total; i++) {
		mark[all[i]->data] = 1;
	}
	for (i = 0; i < total; i++) {
		assert(mark[i] == 1);
80015f64:	8c630000 	lw	v1,0(v1)
80015f68:	146400c8 	bne	v1,a0,8001628c <check_rb_tree+0x414>
80015f6c:	24420004 	addiu	v0,v0,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:451
	memset(mark, 0, sizeof(int) * total);

	for (i = 0; i < total; i++) {
		mark[all[i]->data] = 1;
	}
	for (i = 0; i < total; i++) {
80015f70:	1445fffc 	bne	v0,a1,80015f64 <check_rb_tree+0xec>
80015f74:	02621821 	addu	v1,s3,v0
80015f78:	0220b021 	move	s6,s1
80015f7c:	0000a821 	move	s5,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:427
static inline int check_compare2(rb_node * node, void *key)
{
	return rbn2data(node)->data - (long)key;
}

void check_rb_tree(void)
80015f80:	24170064 	li	s7,100
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:456
	for (i = 0; i < total; i++) {
		assert(mark[i] == 1);
	}

	for (i = 0; i < total; i++) {
		int j = (rand() % (total - i)) + i;
80015f84:	0c005b5d 	jal	80016d74 <rand>
80015f88:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:427
static inline int check_compare2(rb_node * node, void *key)
{
	return rbn2data(node)->data - (long)key;
}

void check_rb_tree(void)
80015f8c:	02f51823 	subu	v1,s7,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:456
	for (i = 0; i < total; i++) {
		assert(mark[i] == 1);
	}

	for (i = 0; i < total; i++) {
		int j = (rand() % (total - i)) + i;
80015f90:	0043001a 	div	zero,v0,v1
80015f94:	006001f4 	teq	v1,zero,0x7
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:457
		struct check_data *z = all[i];
80015f98:	8ec20000 	lw	v0,0(s6)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:456
	for (i = 0; i < total; i++) {
		assert(mark[i] == 1);
	}

	for (i = 0; i < total; i++) {
		int j = (rand() % (total - i)) + i;
80015f9c:	00001810 	mfhi	v1
80015fa0:	00751821 	addu	v1,v1,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:458
		struct check_data *z = all[i];
		all[i] = all[j];
80015fa4:	00031880 	sll	v1,v1,0x2
80015fa8:	02231821 	addu	v1,s1,v1
80015fac:	8c640000 	lw	a0,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:455
	}
	for (i = 0; i < total; i++) {
		assert(mark[i] == 1);
	}

	for (i = 0; i < total; i++) {
80015fb0:	26b50001 	addiu	s5,s5,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:458
		int j = (rand() % (total - i)) + i;
		struct check_data *z = all[i];
		all[i] = all[j];
80015fb4:	aec40000 	sw	a0,0(s6)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:459
		all[j] = z;
80015fb8:	ac620000 	sw	v0,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:455
	}
	for (i = 0; i < total; i++) {
		assert(mark[i] == 1);
	}

	for (i = 0; i < total; i++) {
80015fbc:	16b7fff1 	bne	s5,s7,80015f84 <check_rb_tree+0x10c>
80015fc0:	26d60004 	addiu	s6,s6,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:462
		struct check_data *z = all[i];
		all[i] = all[j];
		all[j] = z;
	}

	memset(mark, 0, sizeof(int) * total);
80015fc4:	02602021 	move	a0,s3
80015fc8:	00002821 	move	a1,zero
80015fcc:	0c005c52 	jal	80017148 <memset>
80015fd0:	24060190 	li	a2,400
80015fd4:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:464
	for (i = 0; i < total; i++) {
		mark[all[i]->data] = 1;
80015fd8:	24050001 	li	a1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:463
		all[i] = all[j];
		all[j] = z;
	}

	memset(mark, 0, sizeof(int) * total);
	for (i = 0; i < total; i++) {
80015fdc:	24040190 	li	a0,400
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:427
static inline int check_compare2(rb_node * node, void *key)
{
	return rbn2data(node)->data - (long)key;
}

void check_rb_tree(void)
80015fe0:	02221821 	addu	v1,s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:464
		all[j] = z;
	}

	memset(mark, 0, sizeof(int) * total);
	for (i = 0; i < total; i++) {
		mark[all[i]->data] = 1;
80015fe4:	8c630000 	lw	v1,0(v1)
80015fe8:	24420004 	addiu	v0,v0,4
80015fec:	8c630000 	lw	v1,0(v1)
80015ff0:	00031880 	sll	v1,v1,0x2
80015ff4:	02631821 	addu	v1,s3,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:463
		all[i] = all[j];
		all[j] = z;
	}

	memset(mark, 0, sizeof(int) * total);
	for (i = 0; i < total; i++) {
80015ff8:	1444fff9 	bne	v0,a0,80015fe0 <check_rb_tree+0x168>
80015ffc:	ac650000 	sw	a1,0(v1)
80016000:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:467
		mark[all[i]->data] = 1;
	}
	for (i = 0; i < total; i++) {
		assert(mark[i] == 1);
80016004:	24040001 	li	a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:466

	memset(mark, 0, sizeof(int) * total);
	for (i = 0; i < total; i++) {
		mark[all[i]->data] = 1;
	}
	for (i = 0; i < total; i++) {
80016008:	24050190 	li	a1,400
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:427
static inline int check_compare2(rb_node * node, void *key)
{
	return rbn2data(node)->data - (long)key;
}

void check_rb_tree(void)
8001600c:	02621821 	addu	v1,s3,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:467
	memset(mark, 0, sizeof(int) * total);
	for (i = 0; i < total; i++) {
		mark[all[i]->data] = 1;
	}
	for (i = 0; i < total; i++) {
		assert(mark[i] == 1);
80016010:	8c630000 	lw	v1,0(v1)
80016014:	14640095 	bne	v1,a0,8001626c <check_rb_tree+0x3f4>
80016018:	24420004 	addiu	v0,v0,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:466

	memset(mark, 0, sizeof(int) * total);
	for (i = 0; i < total; i++) {
		mark[all[i]->data] = 1;
	}
	for (i = 0; i < total; i++) {
8001601c:	1445fffc 	bne	v0,a1,80016010 <check_rb_tree+0x198>
80016020:	02621821 	addu	v1,s3,v0
80016024:	0000a821 	move	s5,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:470
		assert(mark[i] == 1);
	}

	for (i = 0; i < total; i++) {
80016028:	24160190 	li	s6,400
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:427
static inline int check_compare2(rb_node * node, void *key)
{
	return rbn2data(node)->data - (long)key;
}

void check_rb_tree(void)
8001602c:	02351021 	addu	v0,s1,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:471
	for (i = 0; i < total; i++) {
		assert(mark[i] == 1);
	}

	for (i = 0; i < total; i++) {
		rb_insert(tree, &(all[i]->rb_link));
80016030:	8c450000 	lw	a1,0(v0)
80016034:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:472
		check_tree(tree, root->left);
80016038:	26b50004 	addiu	s5,s5,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:471
	for (i = 0; i < total; i++) {
		assert(mark[i] == 1);
	}

	for (i = 0; i < total; i++) {
		rb_insert(tree, &(all[i]->rb_link));
8001603c:	0c005575 	jal	800155d4 <rb_insert>
80016040:	24a50004 	addiu	a1,a1,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:472
		check_tree(tree, root->left);
80016044:	8e850008 	lw	a1,8(s4)
80016048:	0c00572e 	jal	80015cb8 <check_tree>
8001604c:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:470
	}
	for (i = 0; i < total; i++) {
		assert(mark[i] == 1);
	}

	for (i = 0; i < total; i++) {
80016050:	16b6fff7 	bne	s5,s6,80016030 <check_rb_tree+0x1b8>
80016054:	02351021 	addu	v0,s1,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:477
		check_tree(tree, root->left);
	}

	rb_node *node;
	for (i = 0; i < total; i++) {
		node = rb_search(tree, check_compare2, (void *)(all[i]->data));
80016058:	3c028001 	lui	v0,0x8001
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:470
	}
	for (i = 0; i < total; i++) {
		assert(mark[i] == 1);
	}

	for (i = 0; i < total; i++) {
8001605c:	0000a821 	move	s5,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:477
		check_tree(tree, root->left);
	}

	rb_node *node;
	for (i = 0; i < total; i++) {
		node = rb_search(tree, check_compare2, (void *)(all[i]->data));
80016060:	24565364 	addiu	s6,v0,21348
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:476
		rb_insert(tree, &(all[i]->rb_link));
		check_tree(tree, root->left);
	}

	rb_node *node;
	for (i = 0; i < total; i++) {
80016064:	24170064 	li	s7,100
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:477
		node = rb_search(tree, check_compare2, (void *)(all[i]->data));
80016068:	8e420000 	lw	v0,0(s2)
8001606c:	02002021 	move	a0,s0
80016070:	02c02821 	move	a1,s6
80016074:	0c0055fa 	jal	800157e8 <rb_search>
80016078:	8c460000 	lw	a2,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:478
		assert(node != NULL && node == &(all[i]->rb_link));
8001607c:	1040006d 	beqz	v0,80016234 <check_rb_tree+0x3bc>
80016080:	3c048002 	lui	a0,0x8002
80016084:	8e430000 	lw	v1,0(s2)
80016088:	24630004 	addiu	v1,v1,4
8001608c:	14430069 	bne	v0,v1,80016234 <check_rb_tree+0x3bc>
80016090:	26b50001 	addiu	s5,s5,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:476
		rb_insert(tree, &(all[i]->rb_link));
		check_tree(tree, root->left);
	}

	rb_node *node;
	for (i = 0; i < total; i++) {
80016094:	16b7fff4 	bne	s5,s7,80016068 <check_rb_tree+0x1f0>
80016098:	26520004 	addiu	s2,s2,4
8001609c:	00009021 	move	s2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:481
		node = rb_search(tree, check_compare2, (void *)(all[i]->data));
		assert(node != NULL && node == &(all[i]->rb_link));
	}

	for (i = 0; i < total; i++) {
800160a0:	24150064 	li	s5,100
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:482
		node = rb_search(tree, check_compare2, (void *)i);
800160a4:	02002021 	move	a0,s0
800160a8:	02c02821 	move	a1,s6
800160ac:	0c0055fa 	jal	800157e8 <rb_search>
800160b0:	02403021 	move	a2,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:483
		assert(node != NULL && rbn2data(node)->data == i);
800160b4:	10400066 	beqz	v0,80016250 <check_rb_tree+0x3d8>
800160b8:	3c048002 	lui	a0,0x8002
800160bc:	8c43fffc 	lw	v1,-4(v0)
800160c0:	14720064 	bne	v1,s2,80016254 <check_rb_tree+0x3dc>
800160c4:	3c068002 	lui	a2,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:484
		rb_delete(tree, node);
800160c8:	00402821 	move	a1,v0
800160cc:	0c005626 	jal	80015898 <rb_delete>
800160d0:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:485
		check_tree(tree, root->left);
800160d4:	8e850008 	lw	a1,8(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:481
	for (i = 0; i < total; i++) {
		node = rb_search(tree, check_compare2, (void *)(all[i]->data));
		assert(node != NULL && node == &(all[i]->rb_link));
	}

	for (i = 0; i < total; i++) {
800160d8:	26520001 	addiu	s2,s2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:485
		node = rb_search(tree, check_compare2, (void *)i);
		assert(node != NULL && rbn2data(node)->data == i);
		rb_delete(tree, node);
		check_tree(tree, root->left);
800160dc:	0c00572e 	jal	80015cb8 <check_tree>
800160e0:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:481
	for (i = 0; i < total; i++) {
		node = rb_search(tree, check_compare2, (void *)(all[i]->data));
		assert(node != NULL && node == &(all[i]->rb_link));
	}

	for (i = 0; i < total; i++) {
800160e4:	5655fff0 	bnel	s2,s5,800160a8 <check_rb_tree+0x230>
800160e8:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:488
		assert(node != NULL && rbn2data(node)->data == i);
		rb_delete(tree, node);
		check_tree(tree, root->left);
	}

	assert(!nil->red && root->left == nil);
800160ec:	8fc20000 	lw	v0,0(s8)
800160f0:	54400073 	bnezl	v0,800162c0 <check_rb_tree+0x448>
800160f4:	3c048002 	lui	a0,0x8002
800160f8:	8e820008 	lw	v0,8(s4)
800160fc:	17c2006f 	bne	s8,v0,800162bc <check_rb_tree+0x444>
80016100:	00009021 	move	s2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:496
	if (max > total) {
		max = total;
	}

	for (i = 0; i < max; i++) {
		all[i]->data = max;
80016104:	24160020 	li	s6,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:495
	long max = 32;
	if (max > total) {
		max = total;
	}

	for (i = 0; i < max; i++) {
80016108:	24150080 	li	s5,128
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:427
static inline int check_compare2(rb_node * node, void *key)
{
	return rbn2data(node)->data - (long)key;
}

void check_rb_tree(void)
8001610c:	02321021 	addu	v0,s1,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:496
	if (max > total) {
		max = total;
	}

	for (i = 0; i < max; i++) {
		all[i]->data = max;
80016110:	8c420000 	lw	v0,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:497
		rb_insert(tree, &(all[i]->rb_link));
80016114:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:498
		check_tree(tree, root->left);
80016118:	26520004 	addiu	s2,s2,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:497
		max = total;
	}

	for (i = 0; i < max; i++) {
		all[i]->data = max;
		rb_insert(tree, &(all[i]->rb_link));
8001611c:	24450004 	addiu	a1,v0,4
80016120:	0c005575 	jal	800155d4 <rb_insert>
80016124:	ac560000 	sw	s6,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:498
		check_tree(tree, root->left);
80016128:	8e850008 	lw	a1,8(s4)
8001612c:	0c00572e 	jal	80015cb8 <check_tree>
80016130:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:495
	long max = 32;
	if (max > total) {
		max = total;
	}

	for (i = 0; i < max; i++) {
80016134:	1655fff6 	bne	s2,s5,80016110 <check_rb_tree+0x298>
80016138:	02321021 	addu	v0,s1,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:502
		rb_insert(tree, &(all[i]->rb_link));
		check_tree(tree, root->left);
	}

	for (i = 0; i < max; i++) {
		node = rb_search(tree, check_compare2, (void *)max);
8001613c:	3c028001 	lui	v0,0x8001
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:495
	long max = 32;
	if (max > total) {
		max = total;
	}

	for (i = 0; i < max; i++) {
80016140:	24120020 	li	s2,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:502
		rb_insert(tree, &(all[i]->rb_link));
		check_tree(tree, root->left);
	}

	for (i = 0; i < max; i++) {
		node = rb_search(tree, check_compare2, (void *)max);
80016144:	24555364 	addiu	s5,v0,21348
80016148:	02002021 	move	a0,s0
8001614c:	02a02821 	move	a1,s5
80016150:	0c0055fa 	jal	800157e8 <rb_search>
80016154:	24060020 	li	a2,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:503
		assert(node != NULL && rbn2data(node)->data == max);
80016158:	10400050 	beqz	v0,8001629c <check_rb_tree+0x424>
8001615c:	24030020 	li	v1,32
80016160:	8c44fffc 	lw	a0,-4(v0)
80016164:	1483004e 	bne	a0,v1,800162a0 <check_rb_tree+0x428>
80016168:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:504
		rb_delete(tree, node);
8001616c:	00402821 	move	a1,v0
80016170:	0c005626 	jal	80015898 <rb_delete>
80016174:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:505
		check_tree(tree, root->left);
80016178:	8e850008 	lw	a1,8(s4)
8001617c:	2652ffff 	addiu	s2,s2,-1
80016180:	0c00572e 	jal	80015cb8 <check_tree>
80016184:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:501
		all[i]->data = max;
		rb_insert(tree, &(all[i]->rb_link));
		check_tree(tree, root->left);
	}

	for (i = 0; i < max; i++) {
80016188:	5640fff0 	bnezl	s2,8001614c <check_rb_tree+0x2d4>
8001618c:	02002021 	move	a0,s0
rb_tree_empty():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:18

/* rb_tree_empty - tests if tree is empty */
static inline bool rb_tree_empty(rb_tree * tree)
{
	rb_node *nil = tree->nil, *root = tree->root;
	return root->left == nil;
80016190:	8e020008 	lw	v0,8(s0)
check_rb_tree():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:508
		assert(node != NULL && rbn2data(node)->data == max);
		rb_delete(tree, node);
		check_tree(tree, root->left);
	}

	assert(rb_tree_empty(tree));
80016194:	8e030004 	lw	v1,4(s0)
80016198:	8c420008 	lw	v0,8(v0)
8001619c:	1462004f 	bne	v1,v0,800162dc <check_rb_tree+0x464>
800161a0:	24150190 	li	s5,400
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:427
static inline int check_compare2(rb_node * node, void *key)
{
	return rbn2data(node)->data - (long)key;
}

void check_rb_tree(void)
800161a4:	02321021 	addu	v0,s1,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:511
	}

	assert(rb_tree_empty(tree));

	for (i = 0; i < total; i++) {
		rb_insert(tree, &(all[i]->rb_link));
800161a8:	8c450000 	lw	a1,0(v0)
800161ac:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:512
		check_tree(tree, root->left);
800161b0:	26520004 	addiu	s2,s2,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:511
	}

	assert(rb_tree_empty(tree));

	for (i = 0; i < total; i++) {
		rb_insert(tree, &(all[i]->rb_link));
800161b4:	0c005575 	jal	800155d4 <rb_insert>
800161b8:	24a50004 	addiu	a1,a1,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:512
		check_tree(tree, root->left);
800161bc:	8e850008 	lw	a1,8(s4)
800161c0:	0c00572e 	jal	80015cb8 <check_tree>
800161c4:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:510
		check_tree(tree, root->left);
	}

	assert(rb_tree_empty(tree));

	for (i = 0; i < total; i++) {
800161c8:	1655fff7 	bne	s2,s5,800161a8 <check_rb_tree+0x330>
800161cc:	02321021 	addu	v0,s1,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:515
		rb_insert(tree, &(all[i]->rb_link));
		check_tree(tree, root->left);
	}

	rb_tree_destroy(tree);
800161d0:	0c0056d0 	jal	80015b40 <rb_tree_destroy>
800161d4:	02002021 	move	a0,s0
800161d8:	00008021 	move	s0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:517

	for (i = 0; i < total; i++) {
800161dc:	24120190 	li	s2,400
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:427
static inline int check_compare2(rb_node * node, void *key)
{
	return rbn2data(node)->data - (long)key;
}

void check_rb_tree(void)
800161e0:	02301021 	addu	v0,s1,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:518
	}

	rb_tree_destroy(tree);

	for (i = 0; i < total; i++) {
		kfree(all[i]);
800161e4:	8c440000 	lw	a0,0(v0)
800161e8:	0c0054b1 	jal	800152c4 <kfree>
800161ec:	26100004 	addiu	s0,s0,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:517
		check_tree(tree, root->left);
	}

	rb_tree_destroy(tree);

	for (i = 0; i < total; i++) {
800161f0:	1612fffc 	bne	s0,s2,800161e4 <check_rb_tree+0x36c>
800161f4:	02301021 	addu	v0,s1,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:521
		kfree(all[i]);
	}

	kfree(mark);
800161f8:	0c0054b1 	jal	800152c4 <kfree>
800161fc:	02602021 	move	a0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:522
	kfree(all);
80016200:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:523
}
80016204:	8fbf0034 	lw	ra,52(sp)
80016208:	8fbe0030 	lw	s8,48(sp)
8001620c:	8fb7002c 	lw	s7,44(sp)
80016210:	8fb60028 	lw	s6,40(sp)
80016214:	8fb50024 	lw	s5,36(sp)
80016218:	8fb40020 	lw	s4,32(sp)
8001621c:	8fb3001c 	lw	s3,28(sp)
80016220:	8fb20018 	lw	s2,24(sp)
80016224:	8fb10014 	lw	s1,20(sp)
80016228:	8fb00010 	lw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:522
	for (i = 0; i < total; i++) {
		kfree(all[i]);
	}

	kfree(mark);
	kfree(all);
8001622c:	080054b1 	j	800152c4 <kfree>
80016230:	27bd0038 	addiu	sp,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:478
	}

	rb_node *node;
	for (i = 0; i < total; i++) {
		node = rb_search(tree, check_compare2, (void *)(all[i]->data));
		assert(node != NULL && node == &(all[i]->rb_link));
80016234:	3c068002 	lui	a2,0x8002
80016238:	3c078002 	lui	a3,0x8002
8001623c:	24843474 	addiu	a0,a0,13428
80016240:	240501de 	li	a1,478
80016244:	24c60e28 	addiu	a2,a2,3624
80016248:	0c006b0b 	jal	8001ac2c <__panic>
8001624c:	24e73620 	addiu	a3,a3,13856
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:483
	}

	for (i = 0; i < total; i++) {
		node = rb_search(tree, check_compare2, (void *)i);
		assert(node != NULL && rbn2data(node)->data == i);
80016250:	3c068002 	lui	a2,0x8002
80016254:	3c078002 	lui	a3,0x8002
80016258:	24843474 	addiu	a0,a0,13428
8001625c:	240501e3 	li	a1,483
80016260:	24c60e28 	addiu	a2,a2,3624
80016264:	0c006b0b 	jal	8001ac2c <__panic>
80016268:	24e7364c 	addiu	a3,a3,13900
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:467
	memset(mark, 0, sizeof(int) * total);
	for (i = 0; i < total; i++) {
		mark[all[i]->data] = 1;
	}
	for (i = 0; i < total; i++) {
		assert(mark[i] == 1);
8001626c:	3c048002 	lui	a0,0x8002
80016270:	24843474 	addiu	a0,a0,13428
80016274:	240501d3 	li	a1,467
80016278:	3c068002 	lui	a2,0x8002
8001627c:	3c078002 	lui	a3,0x8002
80016280:	24c60e28 	addiu	a2,a2,3624
80016284:	0c006b0b 	jal	8001ac2c <__panic>
80016288:	24e73610 	addiu	a3,a3,13840
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:452

	for (i = 0; i < total; i++) {
		mark[all[i]->data] = 1;
	}
	for (i = 0; i < total; i++) {
		assert(mark[i] == 1);
8001628c:	3c048002 	lui	a0,0x8002
80016290:	24843474 	addiu	a0,a0,13428
80016294:	0800589e 	j	80016278 <check_rb_tree+0x400>
80016298:	240501c4 	li	a1,452
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:503
		check_tree(tree, root->left);
	}

	for (i = 0; i < max; i++) {
		node = rb_search(tree, check_compare2, (void *)max);
		assert(node != NULL && rbn2data(node)->data == max);
8001629c:	3c048002 	lui	a0,0x8002
800162a0:	3c068002 	lui	a2,0x8002
800162a4:	3c078002 	lui	a3,0x8002
800162a8:	24843474 	addiu	a0,a0,13428
800162ac:	240501f7 	li	a1,503
800162b0:	24c60e28 	addiu	a2,a2,3624
800162b4:	0c006b0b 	jal	8001ac2c <__panic>
800162b8:	24e73678 	addiu	a3,a3,13944
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:488
		assert(node != NULL && rbn2data(node)->data == i);
		rb_delete(tree, node);
		check_tree(tree, root->left);
	}

	assert(!nil->red && root->left == nil);
800162bc:	3c048002 	lui	a0,0x8002
800162c0:	24843474 	addiu	a0,a0,13428
800162c4:	240501e8 	li	a1,488
800162c8:	3c068002 	lui	a2,0x8002
800162cc:	3c078002 	lui	a3,0x8002
800162d0:	24c60e28 	addiu	a2,a2,3624
800162d4:	0c006b0b 	jal	8001ac2c <__panic>
800162d8:	24e735f0 	addiu	a3,a3,13808
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:508
		assert(node != NULL && rbn2data(node)->data == max);
		rb_delete(tree, node);
		check_tree(tree, root->left);
	}

	assert(rb_tree_empty(tree));
800162dc:	3c048002 	lui	a0,0x8002
800162e0:	3c068002 	lui	a2,0x8002
800162e4:	3c078002 	lui	a3,0x8002
800162e8:	24843474 	addiu	a0,a0,13428
800162ec:	240501fc 	li	a1,508
800162f0:	24c60e28 	addiu	a2,a2,3624
800162f4:	0c006b0b 	jal	8001ac2c <__panic>
800162f8:	24e736a4 	addiu	a3,a3,13988
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:433
{
	rb_tree *tree = rb_tree_create(check_compare1);
	assert(tree != NULL);

	rb_node *nil = tree->nil, *root = tree->root;
	assert(!nil->red && root->left == nil);
800162fc:	3c048002 	lui	a0,0x8002
80016300:	24843474 	addiu	a0,a0,13428
80016304:	080058b2 	j	800162c8 <check_rb_tree+0x450>
80016308:	240501b1 	li	a1,433
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/rb_tree.c:430
}

void check_rb_tree(void)
{
	rb_tree *tree = rb_tree_create(check_compare1);
	assert(tree != NULL);
8001630c:	3c048002 	lui	a0,0x8002
80016310:	3c068002 	lui	a2,0x8002
80016314:	3c078002 	lui	a3,0x8002
80016318:	24843474 	addiu	a0,a0,13428
8001631c:	240501ae 	li	a1,430
80016320:	24c60e28 	addiu	a2,a2,3624
80016324:	0c006b0b 	jal	8001ac2c <__panic>
80016328:	24e735e0 	addiu	a3,a3,13792

8001632c <readline>:
readline():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:29
 * The readline() function returns the text of the line read. If some errors
 * are happened, NULL is returned. The return value is a global variable,
 * thus it should be copied before it is used.
 * */
char *readline(const char *prompt)
{
8001632c:	27bdffd0 	addiu	sp,sp,-48
80016330:	afbf002c 	sw	ra,44(sp)
80016334:	afb40028 	sw	s4,40(sp)
80016338:	afb30024 	sw	s3,36(sp)
8001633c:	afb20020 	sw	s2,32(sp)
80016340:	afb1001c 	sw	s1,28(sp)
80016344:	afb00018 	sw	s0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:30
	if (prompt != NULL) {
80016348:	10800004 	beqz	a0,8001635c <readline+0x30>
8001634c:	00802821 	move	a1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:31
		kprintf("%s", prompt);
80016350:	3c048002 	lui	a0,0x8002
80016354:	0c007a9e 	jal	8001ea78 <kprintf>
80016358:	248436b8 	addiu	a0,a0,14008
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:40
		c = getchar();
		if (c < 0) {
			return NULL;
		} else if (c >= ' ' && i < BUFSIZE - 1) {
			cputchar(c);
			buf[i++] = c;
8001635c:	3c148015 	lui	s4,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:29
 * The readline() function returns the text of the line read. If some errors
 * are happened, NULL is returned. The return value is a global variable,
 * thus it should be copied before it is used.
 * */
char *readline(const char *prompt)
{
80016360:	00008021 	move	s0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:44
			cputchar(c);
			buf[i++] = c;
		} else if (c == '\b' && i > 0) {
			cputchar(c);
			i--;
		} else if (c == '\n' || c == '\r') {
80016364:	2411000d 	li	s1,13
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:41
		if (c < 0) {
			return NULL;
		} else if (c >= ' ' && i < BUFSIZE - 1) {
			cputchar(c);
			buf[i++] = c;
		} else if (c == '\b' && i > 0) {
80016368:	24120008 	li	s2,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:44
			cputchar(c);
			i--;
		} else if (c == '\n' || c == '\r') {
8001636c:	2413000a 	li	s3,10
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:40
		c = getchar();
		if (c < 0) {
			return NULL;
		} else if (c >= ' ' && i < BUFSIZE - 1) {
			cputchar(c);
			buf[i++] = c;
80016370:	26946788 	addiu	s4,s4,26504
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:35
	if (prompt != NULL) {
		kprintf("%s", prompt);
	}
	int i = 0, c;
	while (1) {
		c = getchar();
80016374:	0c006c7d 	jal	8001b1f4 <cons_getc>
80016378:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:38
		if (c < 0) {
			return NULL;
		} else if (c >= ' ' && i < BUFSIZE - 1) {
8001637c:	28430020 	slti	v1,v0,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:36
		kprintf("%s", prompt);
	}
	int i = 0, c;
	while (1) {
		c = getchar();
		if (c < 0) {
80016380:	0440001f 	bltz	v0,80016400 <readline+0xd4>
80016384:	2a0403ff 	slti	a0,s0,1023
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:38
			return NULL;
		} else if (c >= ' ' && i < BUFSIZE - 1) {
80016388:	14600026 	bnez	v1,80016424 <readline+0xf8>
8001638c:	00000000 	nop
80016390:	54800011 	bnezl	a0,800163d8 <readline+0xac>
80016394:	00402021 	move	a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:44
			cputchar(c);
			buf[i++] = c;
		} else if (c == '\b' && i > 0) {
			cputchar(c);
			i--;
		} else if (c == '\n' || c == '\r') {
80016398:	1451fff6 	bne	v0,s1,80016374 <readline+0x48>
8001639c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:45
			cputchar(c);
800163a0:	0c006c5b 	jal	8001b16c <cons_putc>
800163a4:	00402021 	move	a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:46
			buf[i] = '\0';
800163a8:	3c028015 	lui	v0,0x8015
800163ac:	24426788 	addiu	v0,v0,26504
800163b0:	02028021 	addu	s0,s0,v0
800163b4:	a2000000 	sb	zero,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:50
			return buf;
		}
	}
}
800163b8:	8fbf002c 	lw	ra,44(sp)
800163bc:	8fb40028 	lw	s4,40(sp)
800163c0:	8fb30024 	lw	s3,36(sp)
800163c4:	8fb20020 	lw	s2,32(sp)
800163c8:	8fb1001c 	lw	s1,28(sp)
800163cc:	8fb00018 	lw	s0,24(sp)
800163d0:	03e00008 	jr	ra
800163d4:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:39
	while (1) {
		c = getchar();
		if (c < 0) {
			return NULL;
		} else if (c >= ' ' && i < BUFSIZE - 1) {
			cputchar(c);
800163d8:	0c006c5b 	jal	8001b16c <cons_putc>
800163dc:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:40
			buf[i++] = c;
800163e0:	8fa20010 	lw	v0,16(sp)
800163e4:	02141821 	addu	v1,s0,s4
800163e8:	26100001 	addiu	s0,s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:35
	if (prompt != NULL) {
		kprintf("%s", prompt);
	}
	int i = 0, c;
	while (1) {
		c = getchar();
800163ec:	0c006c7d 	jal	8001b1f4 <cons_getc>
800163f0:	a0620000 	sb	v0,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:38
		if (c < 0) {
			return NULL;
		} else if (c >= ' ' && i < BUFSIZE - 1) {
800163f4:	28430020 	slti	v1,v0,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:36
		kprintf("%s", prompt);
	}
	int i = 0, c;
	while (1) {
		c = getchar();
		if (c < 0) {
800163f8:	0441ffe3 	bgez	v0,80016388 <readline+0x5c>
800163fc:	2a0403ff 	slti	a0,s0,1023
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:50
			cputchar(c);
			buf[i] = '\0';
			return buf;
		}
	}
}
80016400:	8fbf002c 	lw	ra,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:37
	}
	int i = 0, c;
	while (1) {
		c = getchar();
		if (c < 0) {
			return NULL;
80016404:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:50
			cputchar(c);
			buf[i] = '\0';
			return buf;
		}
	}
}
80016408:	8fb40028 	lw	s4,40(sp)
8001640c:	8fb30024 	lw	s3,36(sp)
80016410:	8fb20020 	lw	s2,32(sp)
80016414:	8fb1001c 	lw	s1,28(sp)
80016418:	8fb00018 	lw	s0,24(sp)
8001641c:	03e00008 	jr	ra
80016420:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:41
		if (c < 0) {
			return NULL;
		} else if (c >= ' ' && i < BUFSIZE - 1) {
			cputchar(c);
			buf[i++] = c;
		} else if (c == '\b' && i > 0) {
80016424:	14520007 	bne	v0,s2,80016444 <readline+0x118>
80016428:	00000000 	nop
8001642c:	1200ffd1 	beqz	s0,80016374 <readline+0x48>
80016430:	24040008 	li	a0,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:42
			cputchar(c);
80016434:	0c006c5b 	jal	8001b16c <cons_putc>
80016438:	2610ffff 	addiu	s0,s0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:43
			i--;
8001643c:	080058dd 	j	80016374 <readline+0x48>
80016440:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/readline.c:44
		} else if (c == '\n' || c == '\r') {
80016444:	1053ffd6 	beq	v0,s3,800163a0 <readline+0x74>
80016448:	00000000 	nop
8001644c:	1451ffc9 	bne	v0,s1,80016374 <readline+0x48>
80016450:	00000000 	nop
80016454:	080058e8 	j	800163a0 <readline+0x74>
80016458:	00000000 	nop

8001645c <strdup>:
strdup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/string.c:5
#include <string.h>
#include <slab.h>

char *strdup(const char *src)
{
8001645c:	27bdffd8 	addiu	sp,sp,-40
80016460:	afbf0024 	sw	ra,36(sp)
80016464:	afb10020 	sw	s1,32(sp)
80016468:	afb0001c 	sw	s0,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/string.c:7
	char *dst;
	size_t len = strlen(src);
8001646c:	0c005b79 	jal	80016de4 <strlen>
80016470:	afa40010 	sw	a0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/string.c:8
	if ((dst = kmalloc(len + 1)) != NULL) {
80016474:	24440001 	addiu	a0,v0,1
80016478:	0c005486 	jal	80015218 <kmalloc>
8001647c:	00408821 	move	s1,v0
80016480:	00408021 	move	s0,v0
80016484:	10400006 	beqz	v0,800164a0 <strdup+0x44>
80016488:	8fa50010 	lw	a1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/string.c:9
		memcpy(dst, src, len);
8001648c:	02203021 	move	a2,s1
80016490:	00402021 	move	a0,v0
80016494:	0c005c7c 	jal	800171f0 <memcpy>
80016498:	02118821 	addu	s1,s0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/string.c:10
		dst[len] = '\0';
8001649c:	a2200000 	sb	zero,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/string.c:13
	}
	return dst;
}
800164a0:	8fbf0024 	lw	ra,36(sp)
800164a4:	02001021 	move	v0,s0
800164a8:	8fb10020 	lw	s1,32(sp)
800164ac:	8fb0001c 	lw	s0,28(sp)
800164b0:	03e00008 	jr	ra
800164b4:	27bd0028 	addiu	sp,sp,40

800164b8 <stradd>:
stradd():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/string.c:16

char *stradd(const char *src1, const char *src2)
{
800164b8:	27bdffd0 	addiu	sp,sp,-48
800164bc:	afb30028 	sw	s3,40(sp)
800164c0:	00a09821 	move	s3,a1
800164c4:	afbf002c 	sw	ra,44(sp)
800164c8:	afb20024 	sw	s2,36(sp)
800164cc:	afb10020 	sw	s1,32(sp)
800164d0:	afb0001c 	sw	s0,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/string.c:18
	char *ret, *dst;
	size_t len1 = strlen(src1), len2 = strlen(src2);
800164d4:	0c005b79 	jal	80016de4 <strlen>
800164d8:	afa40010 	sw	a0,16(sp)
800164dc:	02602021 	move	a0,s3
800164e0:	0c005b79 	jal	80016de4 <strlen>
800164e4:	00409021 	move	s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/string.c:19
	if ((ret = dst = kmalloc(len1 + len2 + 1)) != NULL) {
800164e8:	02422021 	addu	a0,s2,v0
800164ec:	24840001 	addiu	a0,a0,1
800164f0:	0c005486 	jal	80015218 <kmalloc>
800164f4:	00408821 	move	s1,v0
800164f8:	00408021 	move	s0,v0
800164fc:	1040000b 	beqz	v0,8001652c <stradd+0x74>
80016500:	8fa50010 	lw	a1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/string.c:20
		memcpy(dst, src1, len1), dst += len1;
80016504:	02403021 	move	a2,s2
80016508:	00402021 	move	a0,v0
8001650c:	0c005c7c 	jal	800171f0 <memcpy>
80016510:	00529021 	addu	s2,v0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/string.c:21
		memcpy(dst, src2, len2), dst += len2;
80016514:	02402021 	move	a0,s2
80016518:	02602821 	move	a1,s3
8001651c:	02203021 	move	a2,s1
80016520:	0c005c7c 	jal	800171f0 <memcpy>
80016524:	02519021 	addu	s2,s2,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/string.c:22
		*dst = '\0';
80016528:	a2400000 	sb	zero,0(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/libs/string.c:25
	}
	return ret;
}
8001652c:	8fbf002c 	lw	ra,44(sp)
80016530:	02001021 	move	v0,s0
80016534:	8fb30028 	lw	s3,40(sp)
80016538:	8fb20024 	lw	s2,36(sp)
8001653c:	8fb10020 	lw	s1,32(sp)
80016540:	8fb0001c 	lw	s0,28(sp)
80016544:	03e00008 	jr	ra
80016548:	27bd0030 	addiu	sp,sp,48

8001654c <hash32>:
hash32():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/hash.c:15
 *
 * High bits are more random, so we use them.
 * */
uint32_t hash32(uint32_t val, unsigned int bits)
{
	uint32_t hash = val * GOLDEN_RATIO_PRIME_32;
8001654c:	3c029e37 	lui	v0,0x9e37
80016550:	24420001 	addiu	v0,v0,1
80016554:	70821002 	mul	v0,a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/hash.c:16
	return (hash >> (32 - bits));
80016558:	00052823 	negu	a1,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/hash.c:17
}
8001655c:	03e00008 	jr	ra
80016560:	00a21006 	srlv	v0,v0,a1

80016564 <printnum>:
printnum():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:74
 * @padc:       character that padded on the left if the actual width is less than @width
 * */
static void
printnum(void (*putch) (int, void *, int), int fd, void *putdat,
	 unsigned long long num, unsigned base, int width, int padc)
{
80016564:	27bdffb8 	addiu	sp,sp,-72
80016568:	8fa20060 	lw	v0,96(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:77
	unsigned long long result = num;
	unsigned mod = 0;//do_div(result, base);
	if(base == 10){
8001656c:	2403000a 	li	v1,10
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:74
 * @padc:       character that padded on the left if the actual width is less than @width
 * */
static void
printnum(void (*putch) (int, void *, int), int fd, void *putdat,
	 unsigned long long num, unsigned base, int width, int padc)
{
80016570:	afb4003c 	sw	s4,60(sp)
80016574:	afb30038 	sw	s3,56(sp)
80016578:	afb20034 	sw	s2,52(sp)
8001657c:	afb10030 	sw	s1,48(sp)
80016580:	afb0002c 	sw	s0,44(sp)
80016584:	00808821 	move	s1,a0
80016588:	00a09021 	move	s2,a1
8001658c:	afbf0044 	sw	ra,68(sp)
80016590:	afb50040 	sw	s5,64(sp)
80016594:	00c09821 	move	s3,a2
80016598:	8fa40058 	lw	a0,88(sp)
8001659c:	8fa5005c 	lw	a1,92(sp)
800165a0:	8fb00064 	lw	s0,100(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:77
	unsigned long long result = num;
	unsigned mod = 0;//do_div(result, base);
	if(base == 10){
800165a4:	10430031 	beq	v0,v1,8001666c <printnum+0x108>
800165a8:	8fb40068 	lw	s4,104(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:81
      		unsigned int t = __divu10(result);
      		mod = result - __mulu10(t);
      		result = t;
   	}else if(base == 8){
800165ac:	24030008 	li	v1,8
800165b0:	10430045 	beq	v0,v1,800166c8 <printnum+0x164>
800165b4:	00053700 	sll	a2,a1,0x1c
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:86
      	mod = result & 0x7;
      	result = result >> 3;
    	}else{
      		mod = result & 0xF;
      		result = result >> 4;
800165b8:	00041902 	srl	v1,a0,0x4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:85
      		result = t;
   	}else if(base == 8){
      	mod = result & 0x7;
      	result = result >> 3;
    	}else{
      		mod = result & 0xF;
800165bc:	3095000f 	andi	s5,a0,0xf
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:86
      		result = result >> 4;
800165c0:	00c31825 	or	v1,a2,v1
800165c4:	00053902 	srl	a3,a1,0x4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:90
    	}

	// first recursively print all preceding (more significant) digits
	if (num >= base) {
800165c8:	14a0001d 	bnez	a1,80016640 <printnum+0xdc>
800165cc:	2610ffff 	addiu	s0,s0,-1
800165d0:	0082202b 	sltu	a0,a0,v0
800165d4:	1080001b 	beqz	a0,80016644 <printnum+0xe0>
800165d8:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:94
		printnum(putch, fd, putdat, result, base, width - 1, padc);
	} else {
		// print any needed pad characters before first digit
		while (--width > 0)
800165dc:	1a000009 	blez	s0,80016604 <printnum+0xa0>
800165e0:	3c028002 	lui	v0,0x8002
800165e4:	2610ffff 	addiu	s0,s0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:95
			putch(padc, putdat, fd);
800165e8:	02802021 	move	a0,s4
800165ec:	02602821 	move	a1,s3
800165f0:	0220f809 	jalr	s1
800165f4:	02403021 	move	a2,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:94
	// first recursively print all preceding (more significant) digits
	if (num >= base) {
		printnum(putch, fd, putdat, result, base, width - 1, padc);
	} else {
		// print any needed pad characters before first digit
		while (--width > 0)
800165f8:	1600fffb 	bnez	s0,800165e8 <printnum+0x84>
800165fc:	2610ffff 	addiu	s0,s0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:98
			putch(padc, putdat, fd);
	}
	// then print this (the least significant) digit
	putch("0123456789abcdef"[mod], putdat, fd);
80016600:	3c028002 	lui	v0,0x8002
80016604:	244236bc 	addiu	v0,v0,14012
80016608:	02a2a821 	addu	s5,s5,v0
8001660c:	92a40000 	lbu	a0,0(s5)
80016610:	02602821 	move	a1,s3
80016614:	02403021 	move	a2,s2
80016618:	0220c821 	move	t9,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:99
}
8001661c:	8fbf0044 	lw	ra,68(sp)
80016620:	8fb50040 	lw	s5,64(sp)
80016624:	8fb4003c 	lw	s4,60(sp)
80016628:	8fb30038 	lw	s3,56(sp)
8001662c:	8fb20034 	lw	s2,52(sp)
80016630:	8fb10030 	lw	s1,48(sp)
80016634:	8fb0002c 	lw	s0,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:98
		// print any needed pad characters before first digit
		while (--width > 0)
			putch(padc, putdat, fd);
	}
	// then print this (the least significant) digit
	putch("0123456789abcdef"[mod], putdat, fd);
80016638:	03200008 	jr	t9
8001663c:	27bd0048 	addiu	sp,sp,72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:91
      		result = result >> 4;
    	}

	// first recursively print all preceding (more significant) digits
	if (num >= base) {
		printnum(putch, fd, putdat, result, base, width - 1, padc);
80016640:	02202021 	move	a0,s1
80016644:	02402821 	move	a1,s2
80016648:	02603021 	move	a2,s3
8001664c:	afa30010 	sw	v1,16(sp)
80016650:	afa70014 	sw	a3,20(sp)
80016654:	afa20018 	sw	v0,24(sp)
80016658:	afb0001c 	sw	s0,28(sp)
8001665c:	0c005959 	jal	80016564 <printnum>
80016660:	afb40020 	sw	s4,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:98
		// print any needed pad characters before first digit
		while (--width > 0)
			putch(padc, putdat, fd);
	}
	// then print this (the least significant) digit
	putch("0123456789abcdef"[mod], putdat, fd);
80016664:	08005981 	j	80016604 <printnum+0xa0>
80016668:	3c028002 	lui	v0,0x8002
__divu10():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:32
/* __divu* routines are from the book, Hacker's Delight */

static inline unsigned int __divu10(unsigned int n)
{
	unsigned int q, r;
	q = (n >> 1) + (n >> 2);
8001666c:	00043042 	srl	a2,a0,0x1
80016670:	00041882 	srl	v1,a0,0x2
80016674:	00661821 	addu	v1,v1,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:33
	q = q + (q >> 4);
80016678:	00033102 	srl	a2,v1,0x4
8001667c:	00c31821 	addu	v1,a2,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:34
	q = q + (q >> 8);
80016680:	00033202 	srl	a2,v1,0x8
80016684:	00c31821 	addu	v1,a2,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:35
	q = q + (q >> 16);
80016688:	00033402 	srl	a2,v1,0x10
8001668c:	00c31821 	addu	v1,a2,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:36
	q = q >> 3;
80016690:	000330c2 	srl	a2,v1,0x3
__mulu10():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:24
    __res;\
    })

static inline unsigned int __mulu10(unsigned int n)
{
	return (n << 3) + (n << 1);
80016694:	000638c0 	sll	a3,a2,0x3
80016698:	24830006 	addiu	v1,a0,6
__divu10():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:37
	q = (n >> 1) + (n >> 2);
	q = q + (q >> 4);
	q = q + (q >> 8);
	q = q + (q >> 16);
	q = q >> 3;
	r = n - __mulu10(q);
8001669c:	00671823 	subu	v1,v1,a3
__mulu10():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:24
    __res;\
    })

static inline unsigned int __mulu10(unsigned int n)
{
	return (n << 3) + (n << 1);
800166a0:	00063840 	sll	a3,a2,0x1
__divu10():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:38
	q = q + (q >> 4);
	q = q + (q >> 8);
	q = q + (q >> 16);
	q = q >> 3;
	r = n - __mulu10(q);
	return q + ((r + 6) >> 4);
800166a4:	00671823 	subu	v1,v1,a3
800166a8:	00031902 	srl	v1,v1,0x4
800166ac:	00661821 	addu	v1,v1,a2
__mulu10():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:24
    __res;\
    })

static inline unsigned int __mulu10(unsigned int n)
{
	return (n << 3) + (n << 1);
800166b0:	0003a840 	sll	s5,v1,0x1
800166b4:	000330c0 	sll	a2,v1,0x3
printnum():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:72
 * @base:       base for print, must be in [1, 16]
 * @width:      maximum number of digits, if the actual width is less than @width, use @padc instead
 * @padc:       character that padded on the left if the actual width is less than @width
 * */
static void
printnum(void (*putch) (int, void *, int), int fd, void *putdat,
800166b8:	02a6a821 	addu	s5,s5,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:79
{
	unsigned long long result = num;
	unsigned mod = 0;//do_div(result, base);
	if(base == 10){
      		unsigned int t = __divu10(result);
      		mod = result - __mulu10(t);
800166bc:	0095a823 	subu	s5,a0,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:80
      		result = t;
800166c0:	08005972 	j	800165c8 <printnum+0x64>
800166c4:	00003821 	move	a3,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:83
   	}else if(base == 8){
      	mod = result & 0x7;
      	result = result >> 3;
800166c8:	00053740 	sll	a2,a1,0x1d
800166cc:	000418c2 	srl	v1,a0,0x3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:82
	if(base == 10){
      		unsigned int t = __divu10(result);
      		mod = result - __mulu10(t);
      		result = t;
   	}else if(base == 8){
      	mod = result & 0x7;
800166d0:	30950007 	andi	s5,a0,0x7
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:83
      	result = result >> 3;
800166d4:	00c31825 	or	v1,a2,v1
800166d8:	08005972 	j	800165c8 <printnum+0x64>
800166dc:	000538c2 	srl	a3,a1,0x3

800166e0 <sprintputch>:
sprintputch():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:362
 * @ch:         the character will be printed
 * @b:          the buffer to place the character @ch
 * */
static void sprintputch(int ch, struct sprintbuf *b)
{
	b->cnt++;
800166e0:	8ca30008 	lw	v1,8(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:363
	if (b->buf < b->ebuf) {
800166e4:	8ca20000 	lw	v0,0(a1)
800166e8:	8ca60004 	lw	a2,4(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:362
 * @ch:         the character will be printed
 * @b:          the buffer to place the character @ch
 * */
static void sprintputch(int ch, struct sprintbuf *b)
{
	b->cnt++;
800166ec:	24630001 	addiu	v1,v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:363
	if (b->buf < b->ebuf) {
800166f0:	0046302b 	sltu	a2,v0,a2
800166f4:	10c00004 	beqz	a2,80016708 <sprintputch+0x28>
800166f8:	aca30008 	sw	v1,8(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:364
		*b->buf++ = ch;
800166fc:	24430001 	addiu	v1,v0,1
80016700:	a0440000 	sb	a0,0(v0)
80016704:	aca30000 	sw	v1,0(a1)
80016708:	03e00008 	jr	ra
8001670c:	00000000 	nop

80016710 <vprintfmt>:
vprintfmt():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:184
 * Or you probably want printfmt() instead.
 * */
void
vprintfmt(void (*putch) (int, void *, int), int fd, void *putdat,
	  const char *fmt, va_list ap)
{
80016710:	27bdff98 	addiu	sp,sp,-104
80016714:	afb40050 	sw	s4,80(sp)
80016718:	8fb40078 	lw	s4,120(sp)
8001671c:	afb7005c 	sw	s7,92(sp)
80016720:	afb50054 	sw	s5,84(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:261
		case 'e':
			err = va_arg(ap, int);
			if (err < 0) {
				err = -err;
			}
			if (err > MAXERROR || (p = error_string[err]) == NULL) {
80016724:	3c178002 	lui	s7,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:204
		char padc = ' ';
		width = precision = -1;
		lflag = altflag = 0;

reswitch:
		switch (ch = *(unsigned char *)fmt++) {
80016728:	3c158002 	lui	s5,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:184
 * Or you probably want printfmt() instead.
 * */
void
vprintfmt(void (*putch) (int, void *, int), int fd, void *putdat,
	  const char *fmt, va_list ap)
{
8001672c:	afbe0060 	sw	s8,96(sp)
80016730:	afb60058 	sw	s6,88(sp)
80016734:	afb3004c 	sw	s3,76(sp)
80016738:	afb20048 	sw	s2,72(sp)
8001673c:	afb10044 	sw	s1,68(sp)
80016740:	afb00040 	sw	s0,64(sp)
80016744:	afbf0064 	sw	ra,100(sp)
80016748:	00809021 	move	s2,a0
8001674c:	00a08821 	move	s1,a1
80016750:	00c08021 	move	s0,a2
80016754:	00e09821 	move	s3,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:204
		char padc = ' ';
		width = precision = -1;
		lflag = altflag = 0;

reswitch:
		switch (ch = *(unsigned char *)fmt++) {
80016758:	26b5ffec 	addiu	s5,s5,-20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:271
			break;

			// string
		case 's':
			if ((p = va_arg(ap, char *)) == NULL) {
				p = "(null)";
8001675c:	3c168002 	lui	s6,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:261
		case 'e':
			err = va_arg(ap, int);
			if (err < 0) {
				err = -err;
			}
			if (err > MAXERROR || (p = error_string[err]) == NULL) {
80016760:	26f70144 	addiu	s7,s7,324
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:264
				printfmt(putch, fd, putdat, "error %d", err);
			} else {
				printfmt(putch, fd, putdat, "%s", p);
80016764:	3c1e8002 	lui	s8,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:191
	register int ch, err;
	unsigned long long num;
	int base, width, precision, lflag, altflag;

	while (1) {
		while ((ch = *(unsigned char *)fmt++) != '%') {
80016768:	92640000 	lbu	a0,0(s3)
8001676c:	24030025 	li	v1,37
80016770:	1083000f 	beq	a0,v1,800167b0 <vprintfmt+0xa0>
80016774:	26620001 	addiu	v0,s3,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:192
			if (ch == '\0') {
80016778:	10800029 	beqz	a0,80016820 <vprintfmt+0x110>
8001677c:	24130025 	li	s3,37
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:195
				return;
			}
			putch(ch, putdat, fd);
80016780:	080059e5 	j	80016794 <vprintfmt+0x84>
80016784:	afa2003c 	sw	v0,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:192
	unsigned long long num;
	int base, width, precision, lflag, altflag;

	while (1) {
		while ((ch = *(unsigned char *)fmt++) != '%') {
			if (ch == '\0') {
80016788:	10800026 	beqz	a0,80016824 <vprintfmt+0x114>
8001678c:	8fbf0064 	lw	ra,100(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:195
				return;
			}
			putch(ch, putdat, fd);
80016790:	afa2003c 	sw	v0,60(sp)
80016794:	02002821 	move	a1,s0
80016798:	0240f809 	jalr	s2
8001679c:	02203021 	move	a2,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:191
	register int ch, err;
	unsigned long long num;
	int base, width, precision, lflag, altflag;

	while (1) {
		while ((ch = *(unsigned char *)fmt++) != '%') {
800167a0:	8fa2003c 	lw	v0,60(sp)
800167a4:	90440000 	lbu	a0,0(v0)
800167a8:	1493fff7 	bne	a0,s3,80016788 <vprintfmt+0x78>
800167ac:	24420001 	addiu	v0,v0,1
800167b0:	90440000 	lbu	a0,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:233
			precision = va_arg(ap, int);
			goto process_precision;

		case '.':
			if (width < 0)
				width = 0;
800167b4:	24080020 	li	t0,32
800167b8:	afa00028 	sw	zero,40(sp)
800167bc:	00004821 	move	t1,zero
800167c0:	2403ffff 	li	v1,-1
800167c4:	2407ffff 	li	a3,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:204
		char padc = ' ';
		width = precision = -1;
		lflag = altflag = 0;

reswitch:
		switch (ch = *(unsigned char *)fmt++) {
800167c8:	2485ffdd 	addiu	a1,a0,-35
800167cc:	30a500ff 	andi	a1,a1,0xff
800167d0:	2ca60056 	sltiu	a2,a1,86
800167d4:	14c0001e 	bnez	a2,80016850 <vprintfmt+0x140>
800167d8:	24530001 	addiu	s3,v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:340
			putch(ch, putdat, fd);
			break;

			// unrecognized escape sequence - just print it literally
		default:
			putch('%', putdat, fd);
800167dc:	afa2003c 	sw	v0,60(sp)
800167e0:	24040025 	li	a0,37
800167e4:	02002821 	move	a1,s0
800167e8:	0240f809 	jalr	s2
800167ec:	02203021 	move	a2,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:341
			for (fmt--; fmt[-1] != '%'; fmt--)
800167f0:	8fa2003c 	lw	v0,60(sp)
800167f4:	9043ffff 	lbu	v1,-1(v0)
800167f8:	00409821 	move	s3,v0
800167fc:	24020025 	li	v0,37
80016800:	1062ffd9 	beq	v1,v0,80016768 <vprintfmt+0x58>
80016804:	24030025 	li	v1,37
80016808:	2673ffff 	addiu	s3,s3,-1
8001680c:	9262ffff 	lbu	v0,-1(s3)
80016810:	5443fffe 	bnel	v0,v1,8001680c <vprintfmt+0xfc>
80016814:	2673ffff 	addiu	s3,s3,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:191
	register int ch, err;
	unsigned long long num;
	int base, width, precision, lflag, altflag;

	while (1) {
		while ((ch = *(unsigned char *)fmt++) != '%') {
80016818:	080059db 	j	8001676c <vprintfmt+0x5c>
8001681c:	92640000 	lbu	a0,0(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:346
			for (fmt--; fmt[-1] != '%'; fmt--)
				/* do nothing */ ;
			break;
		}
	}
}
80016820:	8fbf0064 	lw	ra,100(sp)
80016824:	8fbe0060 	lw	s8,96(sp)
80016828:	8fb7005c 	lw	s7,92(sp)
8001682c:	8fb60058 	lw	s6,88(sp)
80016830:	8fb50054 	lw	s5,84(sp)
80016834:	8fb40050 	lw	s4,80(sp)
80016838:	8fb3004c 	lw	s3,76(sp)
8001683c:	8fb20048 	lw	s2,72(sp)
80016840:	8fb10044 	lw	s1,68(sp)
80016844:	8fb00040 	lw	s0,64(sp)
80016848:	03e00008 	jr	ra
8001684c:	27bd0068 	addiu	sp,sp,104
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:204
		char padc = ' ';
		width = precision = -1;
		lflag = altflag = 0;

reswitch:
		switch (ch = *(unsigned char *)fmt++) {
80016850:	00052880 	sll	a1,a1,0x2
80016854:	02a52821 	addu	a1,s5,a1
80016858:	8ca50000 	lw	a1,0(a1)
8001685c:	00a00008 	jr	a1
80016860:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:232
		case '*':
			precision = va_arg(ap, int);
			goto process_precision;

		case '.':
			if (width < 0)
80016864:	90440001 	lbu	a0,1(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:237
				width = 0;
			goto reswitch;

		case '#':
			altflag = 1;
80016868:	24020001 	li	v0,1
8001686c:	afa20028 	sw	v0,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:238
			goto reswitch;
80016870:	080059f2 	j	800167c8 <vprintfmt+0xb8>
80016874:	02601021 	move	v0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:335
			printnum(putch, fd, putdat, num, base, width, padc);
			break;

			// escaped '%' character
		case '%':
			putch(ch, putdat, fd);
80016878:	02002821 	move	a1,s0
8001687c:	0240f809 	jalr	s2
80016880:	02203021 	move	a2,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:336
			break;
80016884:	080059db 	j	8001676c <vprintfmt+0x5c>
80016888:	92640000 	lbu	a0,0(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:228
				}
			}
			goto process_precision;

		case '*':
			precision = va_arg(ap, int);
8001688c:	8e830000 	lw	v1,0(s4)
80016890:	90440001 	lbu	a0,1(v0)
80016894:	26940004 	addiu	s4,s4,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:204
		char padc = ' ';
		width = precision = -1;
		lflag = altflag = 0;

reswitch:
		switch (ch = *(unsigned char *)fmt++) {
80016898:	02601021 	move	v0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:241
		case '#':
			altflag = 1;
			goto reswitch;

process_precision:
			if (width < 0)
8001689c:	04e1ffcb 	bgez	a3,800167cc <vprintfmt+0xbc>
800168a0:	2485ffdd 	addiu	a1,a0,-35
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:242
				width = precision, precision = -1;
800168a4:	00603821 	move	a3,v1
800168a8:	080059f3 	j	800167cc <vprintfmt+0xbc>
800168ac:	2403ffff 	li	v1,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:204
		char padc = ' ';
		width = precision = -1;
		lflag = altflag = 0;

reswitch:
		switch (ch = *(unsigned char *)fmt++) {
800168b0:	90440001 	lbu	a0,1(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:208

			// flag to pad on the right
		case '-':
			padc = '-';
800168b4:	2408002d 	li	t0,45
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:204
		char padc = ' ';
		width = precision = -1;
		lflag = altflag = 0;

reswitch:
		switch (ch = *(unsigned char *)fmt++) {
800168b8:	080059f2 	j	800167c8 <vprintfmt+0xb8>
800168bc:	02601021 	move	v0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:232
		case '*':
			precision = va_arg(ap, int);
			goto process_precision;

		case '.':
			if (width < 0)
800168c0:	04e1ffeb 	bgez	a3,80016870 <vprintfmt+0x160>
800168c4:	90440001 	lbu	a0,1(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:233
				width = 0;
800168c8:	00003821 	move	a3,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:204
		char padc = ' ';
		width = precision = -1;
		lflag = altflag = 0;

reswitch:
		switch (ch = *(unsigned char *)fmt++) {
800168cc:	080059f2 	j	800167c8 <vprintfmt+0xb8>
800168d0:	02601021 	move	v0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:221
			// width field
		case '1' ... '9':
			for (precision = 0;; ++fmt) {
				precision = precision * 10 + ch - '0';
				ch = *fmt;
				if (ch < '0' || ch > '9') {
800168d4:	90440001 	lbu	a0,1(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:213
			padc = '-';
			goto reswitch;

			// flag to pad with 0's instead of spaces
		case '0':
			padc = '0';
800168d8:	24080030 	li	t0,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:214
			goto reswitch;
800168dc:	080059f2 	j	800167c8 <vprintfmt+0xb8>
800168e0:	02601021 	move	v0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:220

			// width field
		case '1' ... '9':
			for (precision = 0;; ++fmt) {
				precision = precision * 10 + ch - '0';
				ch = *fmt;
800168e4:	90450001 	lbu	a1,1(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:219
			goto reswitch;

			// width field
		case '1' ... '9':
			for (precision = 0;; ++fmt) {
				precision = precision * 10 + ch - '0';
800168e8:	2483ffd0 	addiu	v1,a0,-48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:204
		char padc = ' ';
		width = precision = -1;
		lflag = altflag = 0;

reswitch:
		switch (ch = *(unsigned char *)fmt++) {
800168ec:	02601021 	move	v0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:221
			// width field
		case '1' ... '9':
			for (precision = 0;; ++fmt) {
				precision = precision * 10 + ch - '0';
				ch = *fmt;
				if (ch < '0' || ch > '9') {
800168f0:	24a6ffd0 	addiu	a2,a1,-48
800168f4:	2cc6000a 	sltiu	a2,a2,10
800168f8:	10c0ffe8 	beqz	a2,8001689c <vprintfmt+0x18c>
800168fc:	00a02021 	move	a0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:219
			goto reswitch;

			// width field
		case '1' ... '9':
			for (precision = 0;; ++fmt) {
				precision = precision * 10 + ch - '0';
80016900:	00032040 	sll	a0,v1,0x1
80016904:	000318c0 	sll	v1,v1,0x3
80016908:	00831821 	addu	v1,a0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:218
			padc = '0';
			goto reswitch;

			// width field
		case '1' ... '9':
			for (precision = 0;; ++fmt) {
8001690c:	24420001 	addiu	v0,v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:219
				precision = precision * 10 + ch - '0';
80016910:	00651821 	addu	v1,v1,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:220
				ch = *fmt;
80016914:	90450000 	lbu	a1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:219
			goto reswitch;

			// width field
		case '1' ... '9':
			for (precision = 0;; ++fmt) {
				precision = precision * 10 + ch - '0';
80016918:	2463ffd0 	addiu	v1,v1,-48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:221
				ch = *fmt;
				if (ch < '0' || ch > '9') {
8001691c:	24a6ffd0 	addiu	a2,a1,-48
80016920:	2cc6000a 	sltiu	a2,a2,10
80016924:	14c0fff6 	bnez	a2,80016900 <vprintfmt+0x1f0>
80016928:	00a02021 	move	a0,a1
8001692c:	08005a27 	j	8001689c <vprintfmt+0x18c>
80016930:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:252
			lflag++;
			goto reswitch;

			// character
		case 'c':
			putch(va_arg(ap, int), putdat, fd);
80016934:	8e840000 	lw	a0,0(s4)
80016938:	02002821 	move	a1,s0
8001693c:	02203021 	move	a2,s1
80016940:	0240f809 	jalr	s2
80016944:	26940004 	addiu	s4,s4,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:253
			break;
80016948:	080059db 	j	8001676c <vprintfmt+0x5c>
8001694c:	92640000 	lbu	a0,0(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:296
			}
			break;

			// (signed) decimal
		case 'd':
			num = getint(ap, lflag);
80016950:	29220002 	slti	v0,t1,2
80016954:	144000c8 	bnez	v0,80016c78 <vprintfmt+0x568>
80016958:	2402fff8 	li	v0,-8
8001695c:	26940007 	addiu	s4,s4,7
80016960:	0282a024 	and	s4,s4,v0
80016964:	8e830000 	lw	v1,0(s4)
80016968:	8e820004 	lw	v0,4(s4)
8001696c:	26940008 	addiu	s4,s4,8
80016970:	00604821 	move	t1,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:297
			if ((long long)num < 0) {
80016974:	044000ad 	bltz	v0,80016c2c <vprintfmt+0x51c>
80016978:	00405021 	move	t2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:306
			base = 10;
			goto number;

			// unsigned decimal
		case 'u':
			num = getuint(ap, lflag);
8001697c:	2402000a 	li	v0,10
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:330
			// (unsigned) hexadecimal
		case 'x':
			num = getuint(ap, lflag);
			base = 16;
number:
			printnum(putch, fd, putdat, num, base, width, padc);
80016980:	02402021 	move	a0,s2
80016984:	02202821 	move	a1,s1
80016988:	02003021 	move	a2,s0
8001698c:	afa90010 	sw	t1,16(sp)
80016990:	afaa0014 	sw	t2,20(sp)
80016994:	afa20018 	sw	v0,24(sp)
80016998:	afa7001c 	sw	a3,28(sp)
8001699c:	0c005959 	jal	80016564 <printnum>
800169a0:	afa80020 	sw	t0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:331
			break;
800169a4:	080059db 	j	8001676c <vprintfmt+0x5c>
800169a8:	92640000 	lbu	a0,0(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:257
			putch(va_arg(ap, int), putdat, fd);
			break;

			// error message
		case 'e':
			err = va_arg(ap, int);
800169ac:	8e820000 	lw	v0,0(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:262
			if (err < 0) {
				err = -err;
			}
			if (err > MAXERROR || (p = error_string[err]) == NULL) {
				printfmt(putch, fd, putdat, "error %d", err);
800169b0:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:257
			putch(va_arg(ap, int), putdat, fd);
			break;

			// error message
		case 'e':
			err = va_arg(ap, int);
800169b4:	26940004 	addiu	s4,s4,4
800169b8:	00021fc3 	sra	v1,v0,0x1f
800169bc:	00621026 	xor	v0,v1,v0
800169c0:	00431023 	subu	v0,v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:261
			if (err < 0) {
				err = -err;
			}
			if (err > MAXERROR || (p = error_string[err]) == NULL) {
800169c4:	28430028 	slti	v1,v0,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:262
				printfmt(putch, fd, putdat, "error %d", err);
800169c8:	02202821 	move	a1,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:261
		case 'e':
			err = va_arg(ap, int);
			if (err < 0) {
				err = -err;
			}
			if (err > MAXERROR || (p = error_string[err]) == NULL) {
800169cc:	10600091 	beqz	v1,80016c14 <vprintfmt+0x504>
800169d0:	02003021 	move	a2,s0
800169d4:	00021880 	sll	v1,v0,0x2
800169d8:	00771821 	addu	v1,v1,s7
800169dc:	8c630000 	lw	v1,0(v1)
800169e0:	1060008c 	beqz	v1,80016c14 <vprintfmt+0x504>
800169e4:	27c736b8 	addiu	a3,s8,14008
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:264
				printfmt(putch, fd, putdat, "error %d", err);
			} else {
				printfmt(putch, fd, putdat, "%s", p);
800169e8:	0c005b37 	jal	80016cdc <printfmt>
800169ec:	afa30010 	sw	v1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:191
	register int ch, err;
	unsigned long long num;
	int base, width, precision, lflag, altflag;

	while (1) {
		while ((ch = *(unsigned char *)fmt++) != '%') {
800169f0:	080059db 	j	8001676c <vprintfmt+0x5c>
800169f4:	92640000 	lbu	a0,0(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:247
				width = precision, precision = -1;
			goto reswitch;

			// long flag (doubled for long long)
		case 'l':
			lflag++;
800169f8:	90440001 	lbu	a0,1(v0)
800169fc:	25290001 	addiu	t1,t1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:248
			goto reswitch;
80016a00:	080059f2 	j	800167c8 <vprintfmt+0xb8>
80016a04:	02601021 	move	v0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:312
			base = 10;
			goto number;

			// (unsigned) octal
		case 'o':
			num = getuint(ap, lflag);
80016a08:	29220002 	slti	v0,t1,2
80016a0c:	544000a2 	bnezl	v0,80016c98 <vprintfmt+0x588>
80016a10:	8e890000 	lw	t1,0(s4)
80016a14:	26940007 	addiu	s4,s4,7
80016a18:	2402fff8 	li	v0,-8
80016a1c:	02821024 	and	v0,s4,v0
80016a20:	24540008 	addiu	s4,v0,8
80016a24:	8c490000 	lw	t1,0(v0)
80016a28:	8c4a0004 	lw	t2,4(v0)
80016a2c:	08005a60 	j	80016980 <vprintfmt+0x270>
80016a30:	24020008 	li	v0,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:318
			base = 8;
			goto number;

			// pointer
		case 'p':
			putch('0', putdat, fd);
80016a34:	afa70038 	sw	a3,56(sp)
80016a38:	afa80030 	sw	t0,48(sp)
80016a3c:	24040030 	li	a0,48
80016a40:	02002821 	move	a1,s0
80016a44:	0240f809 	jalr	s2
80016a48:	02203021 	move	a2,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:319
			putch('x', putdat, fd);
80016a4c:	24040078 	li	a0,120
80016a50:	02002821 	move	a1,s0
80016a54:	0240f809 	jalr	s2
80016a58:	02203021 	move	a2,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:320
			num =
80016a5c:	8e890000 	lw	t1,0(s4)
80016a60:	00005021 	move	t2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:321
			    (unsigned long long)(uintptr_t) va_arg(ap, void *);
80016a64:	26940004 	addiu	s4,s4,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:323
			base = 16;
			goto number;
80016a68:	24020010 	li	v0,16
80016a6c:	8fa70038 	lw	a3,56(sp)
80016a70:	08005a60 	j	80016980 <vprintfmt+0x270>
80016a74:	8fa80030 	lw	t0,48(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:270
			}
			break;

			// string
		case 's':
			if ((p = va_arg(ap, char *)) == NULL) {
80016a78:	8e820000 	lw	v0,0(s4)
80016a7c:	26940004 	addiu	s4,s4,4
80016a80:	afa2002c 	sw	v0,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:271
				p = "(null)";
80016a84:	8fa4002c 	lw	a0,44(sp)
80016a88:	26c236d0 	addiu	v0,s6,14032
80016a8c:	0044200a 	movz	a0,v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:273
			}
			if (width > 0 && padc != '-') {
80016a90:	18e00019 	blez	a3,80016af8 <vprintfmt+0x3e8>
80016a94:	afa4002c 	sw	a0,44(sp)
80016a98:	2402002d 	li	v0,45
80016a9c:	11020016 	beq	t0,v0,80016af8 <vprintfmt+0x3e8>
80016aa0:	00602821 	move	a1,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:274
				for (width -= strnlen(p, precision); width > 0;
80016aa4:	afa30034 	sw	v1,52(sp)
80016aa8:	afa70038 	sw	a3,56(sp)
80016aac:	0c005b83 	jal	80016e0c <strnlen>
80016ab0:	afa80030 	sw	t0,48(sp)
80016ab4:	8fa70038 	lw	a3,56(sp)
80016ab8:	8fa30034 	lw	v1,52(sp)
80016abc:	00e23823 	subu	a3,a3,v0
80016ac0:	18e0000d 	blez	a3,80016af8 <vprintfmt+0x3e8>
80016ac4:	8fa80030 	lw	t0,48(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:275
				     width--) {
80016ac8:	24e7ffff 	addiu	a3,a3,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:276
					putch(padc, putdat, fd);
80016acc:	01002021 	move	a0,t0
80016ad0:	afa30034 	sw	v1,52(sp)
80016ad4:	afa70038 	sw	a3,56(sp)
80016ad8:	afa80030 	sw	t0,48(sp)
80016adc:	02002821 	move	a1,s0
80016ae0:	0240f809 	jalr	s2
80016ae4:	02203021 	move	a2,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:274
		case 's':
			if ((p = va_arg(ap, char *)) == NULL) {
				p = "(null)";
			}
			if (width > 0 && padc != '-') {
				for (width -= strnlen(p, precision); width > 0;
80016ae8:	8fa70038 	lw	a3,56(sp)
80016aec:	8fa30034 	lw	v1,52(sp)
80016af0:	14e0fff5 	bnez	a3,80016ac8 <vprintfmt+0x3b8>
80016af4:	8fa80030 	lw	t0,48(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:280
				     width--) {
					putch(padc, putdat, fd);
				}
			}
			for (;
			     (ch = *p++) != '\0' && (precision < 0
80016af8:	8fa2002c 	lw	v0,44(sp)
80016afc:	90440000 	lbu	a0,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:279
				for (width -= strnlen(p, precision); width > 0;
				     width--) {
					putch(padc, putdat, fd);
				}
			}
			for (;
80016b00:	10800018 	beqz	a0,80016b64 <vprintfmt+0x454>
80016b04:	24420001 	addiu	v0,v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:280
			     (ch = *p++) != '\0' && (precision < 0
80016b08:	04600004 	bltz	v1,80016b1c <vprintfmt+0x40c>
80016b0c:	2405ffff 	li	a1,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:281
						     || --precision >= 0);
80016b10:	2463ffff 	addiu	v1,v1,-1
80016b14:	10650013 	beq	v1,a1,80016b64 <vprintfmt+0x454>
80016b18:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:283
			     width--) {
				if (altflag && (ch < ' ' || ch > '~')) {
80016b1c:	8fa50028 	lw	a1,40(sp)
80016b20:	10a00003 	beqz	a1,80016b30 <vprintfmt+0x420>
80016b24:	2485ffe0 	addiu	a1,a0,-32
80016b28:	2ca5005f 	sltiu	a1,a1,95
80016b2c:	10a0002f 	beqz	a1,80016bec <vprintfmt+0x4dc>
80016b30:	afa2003c 	sw	v0,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:286
					putch('?', putdat, fd);
				} else {
					putch(ch, putdat, fd);
80016b34:	afa30034 	sw	v1,52(sp)
80016b38:	afa70038 	sw	a3,56(sp)
80016b3c:	02002821 	move	a1,s0
80016b40:	0240f809 	jalr	s2
80016b44:	02203021 	move	a2,s1
80016b48:	8fa70038 	lw	a3,56(sp)
80016b4c:	8fa30034 	lw	v1,52(sp)
80016b50:	8fa2003c 	lw	v0,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:280
				     width--) {
					putch(padc, putdat, fd);
				}
			}
			for (;
			     (ch = *p++) != '\0' && (precision < 0
80016b54:	90440000 	lbu	a0,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:282
						     || --precision >= 0);
			     width--) {
80016b58:	24e7ffff 	addiu	a3,a3,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:279
				for (width -= strnlen(p, precision); width > 0;
				     width--) {
					putch(padc, putdat, fd);
				}
			}
			for (;
80016b5c:	1480ffea 	bnez	a0,80016b08 <vprintfmt+0x3f8>
80016b60:	24420001 	addiu	v0,v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:289
					putch('?', putdat, fd);
				} else {
					putch(ch, putdat, fd);
				}
			}
			for (; width > 0; width--) {
80016b64:	58e0ff01 	blezl	a3,8001676c <vprintfmt+0x5c>
80016b68:	92640000 	lbu	a0,0(s3)
80016b6c:	24e7ffff 	addiu	a3,a3,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:290
				putch(' ', putdat, fd);
80016b70:	afa70038 	sw	a3,56(sp)
80016b74:	24040020 	li	a0,32
80016b78:	02002821 	move	a1,s0
80016b7c:	0240f809 	jalr	s2
80016b80:	02203021 	move	a2,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:289
					putch('?', putdat, fd);
				} else {
					putch(ch, putdat, fd);
				}
			}
			for (; width > 0; width--) {
80016b84:	8fa70038 	lw	a3,56(sp)
80016b88:	54e0fff9 	bnezl	a3,80016b70 <vprintfmt+0x460>
80016b8c:	24e7ffff 	addiu	a3,a3,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:191
	register int ch, err;
	unsigned long long num;
	int base, width, precision, lflag, altflag;

	while (1) {
		while ((ch = *(unsigned char *)fmt++) != '%') {
80016b90:	080059db 	j	8001676c <vprintfmt+0x5c>
80016b94:	92640000 	lbu	a0,0(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:306
			base = 10;
			goto number;

			// unsigned decimal
		case 'u':
			num = getuint(ap, lflag);
80016b98:	29220002 	slti	v0,t1,2
80016b9c:	14400046 	bnez	v0,80016cb8 <vprintfmt+0x5a8>
80016ba0:	2402fff8 	li	v0,-8
80016ba4:	26940007 	addiu	s4,s4,7
80016ba8:	02821024 	and	v0,s4,v0
80016bac:	24540008 	addiu	s4,v0,8
80016bb0:	8c490000 	lw	t1,0(v0)
80016bb4:	8c4a0004 	lw	t2,4(v0)
80016bb8:	08005a60 	j	80016980 <vprintfmt+0x270>
80016bbc:	2402000a 	li	v0,10
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:327
			base = 16;
			goto number;

			// (unsigned) hexadecimal
		case 'x':
			num = getuint(ap, lflag);
80016bc0:	29220002 	slti	v0,t1,2
80016bc4:	54400038 	bnezl	v0,80016ca8 <vprintfmt+0x598>
80016bc8:	8e890000 	lw	t1,0(s4)
80016bcc:	26940007 	addiu	s4,s4,7
80016bd0:	2402fff8 	li	v0,-8
80016bd4:	02821024 	and	v0,s4,v0
80016bd8:	24540008 	addiu	s4,v0,8
80016bdc:	8c490000 	lw	t1,0(v0)
80016be0:	8c4a0004 	lw	t2,4(v0)
80016be4:	08005a60 	j	80016980 <vprintfmt+0x270>
80016be8:	24020010 	li	v0,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:284
			for (;
			     (ch = *p++) != '\0' && (precision < 0
						     || --precision >= 0);
			     width--) {
				if (altflag && (ch < ' ' || ch > '~')) {
					putch('?', putdat, fd);
80016bec:	afa30034 	sw	v1,52(sp)
80016bf0:	afa70038 	sw	a3,56(sp)
80016bf4:	2404003f 	li	a0,63
80016bf8:	02002821 	move	a1,s0
80016bfc:	0240f809 	jalr	s2
80016c00:	02203021 	move	a2,s1
80016c04:	8fa2003c 	lw	v0,60(sp)
80016c08:	8fa30034 	lw	v1,52(sp)
80016c0c:	08005ad5 	j	80016b54 <vprintfmt+0x444>
80016c10:	8fa70038 	lw	a3,56(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:262
			err = va_arg(ap, int);
			if (err < 0) {
				err = -err;
			}
			if (err > MAXERROR || (p = error_string[err]) == NULL) {
				printfmt(putch, fd, putdat, "error %d", err);
80016c14:	3c078002 	lui	a3,0x8002
80016c18:	24e736d8 	addiu	a3,a3,14040
80016c1c:	0c005b37 	jal	80016cdc <printfmt>
80016c20:	afa20010 	sw	v0,16(sp)
80016c24:	080059db 	j	8001676c <vprintfmt+0x5c>
80016c28:	92640000 	lbu	a0,0(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:298

			// (signed) decimal
		case 'd':
			num = getint(ap, lflag);
			if ((long long)num < 0) {
				putch('-', putdat, fd);
80016c2c:	2404002d 	li	a0,45
80016c30:	afa2003c 	sw	v0,60(sp)
80016c34:	afa30034 	sw	v1,52(sp)
80016c38:	afa70038 	sw	a3,56(sp)
80016c3c:	afa80030 	sw	t0,48(sp)
80016c40:	02002821 	move	a1,s0
80016c44:	0240f809 	jalr	s2
80016c48:	02203021 	move	a2,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:299
				num = -(long long)num;
80016c4c:	8fa30034 	lw	v1,52(sp)
80016c50:	8fa2003c 	lw	v0,60(sp)
80016c54:	8fa70038 	lw	a3,56(sp)
80016c58:	00031823 	negu	v1,v1
80016c5c:	00021023 	negu	v0,v0
80016c60:	0003202b 	sltu	a0,zero,v1
80016c64:	00445023 	subu	t2,v0,a0
80016c68:	00604821 	move	t1,v1
80016c6c:	2402000a 	li	v0,10
80016c70:	08005a60 	j	80016980 <vprintfmt+0x270>
80016c74:	8fa80030 	lw	t0,48(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:296
			}
			break;

			// (signed) decimal
		case 'd':
			num = getint(ap, lflag);
80016c78:	8e890000 	lw	t1,0(s4)
80016c7c:	26940004 	addiu	s4,s4,4
80016c80:	000957c3 	sra	t2,t1,0x1f
80016c84:	01401021 	move	v0,t2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:297
			if ((long long)num < 0) {
80016c88:	0441ff3c 	bgez	v0,8001697c <vprintfmt+0x26c>
80016c8c:	01201821 	move	v1,t1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:298
				putch('-', putdat, fd);
80016c90:	08005b0c 	j	80016c30 <vprintfmt+0x520>
80016c94:	2404002d 	li	a0,45
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:312
			base = 10;
			goto number;

			// (unsigned) octal
		case 'o':
			num = getuint(ap, lflag);
80016c98:	00005021 	move	t2,zero
80016c9c:	26940004 	addiu	s4,s4,4
80016ca0:	08005a60 	j	80016980 <vprintfmt+0x270>
80016ca4:	24020008 	li	v0,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:327
			base = 16;
			goto number;

			// (unsigned) hexadecimal
		case 'x':
			num = getuint(ap, lflag);
80016ca8:	00005021 	move	t2,zero
80016cac:	26940004 	addiu	s4,s4,4
80016cb0:	08005a60 	j	80016980 <vprintfmt+0x270>
80016cb4:	24020010 	li	v0,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:306
			base = 10;
			goto number;

			// unsigned decimal
		case 'u':
			num = getuint(ap, lflag);
80016cb8:	11200004 	beqz	t1,80016ccc <vprintfmt+0x5bc>
80016cbc:	8e890000 	lw	t1,0(s4)
80016cc0:	00005021 	move	t2,zero
80016cc4:	08005a5f 	j	8001697c <vprintfmt+0x26c>
80016cc8:	26940004 	addiu	s4,s4,4
80016ccc:	00005021 	move	t2,zero
80016cd0:	26940004 	addiu	s4,s4,4
80016cd4:	08005a60 	j	80016980 <vprintfmt+0x270>
80016cd8:	2402000a 	li	v0,10

80016cdc <printfmt>:
printfmt():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:161
 * @fmt:        the format string to use
 * */
void
printfmt(void (*putch) (int, void *, int), int fd, void *putdat,
	 const char *fmt, ...)
{
80016cdc:	27bdffd8 	addiu	sp,sp,-40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:164
	va_list ap;

	va_start(ap, fmt);
80016ce0:	27a20038 	addiu	v0,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:161
 * @fmt:        the format string to use
 * */
void
printfmt(void (*putch) (int, void *, int), int fd, void *putdat,
	 const char *fmt, ...)
{
80016ce4:	afbf0024 	sw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:164
	va_list ap;

	va_start(ap, fmt);
80016ce8:	afa20018 	sw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:165
	vprintfmt(putch, fd, putdat, fmt, ap);
80016cec:	0c0059c4 	jal	80016710 <vprintfmt>
80016cf0:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:167
	va_end(ap);
}
80016cf4:	8fbf0024 	lw	ra,36(sp)
80016cf8:	03e00008 	jr	ra
80016cfc:	27bd0028 	addiu	sp,sp,40

80016d00 <snprintf>:
snprintf():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:402
 * @str:        the buffer to place the result into
 * @size:       the size of buffer, including the trailing null space
 * @fmt:        the format string to use
 * */
int snprintf(char *str, size_t size, const char *fmt, ...)
{
80016d00:	27bdffd0 	addiu	sp,sp,-48
ucore_vsnprintf():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:384
 * Call this function if you are already dealing with a va_list.
 * Or you probably want snprintf() instead.
 * */
static int ucore_vsnprintf(char *str, size_t size, const char *fmt, va_list ap)
{
	struct sprintbuf b = { str, str + size - 1, 0 };
80016d04:	24a5ffff 	addiu	a1,a1,-1
snprintf():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:405
 * */
int snprintf(char *str, size_t size, const char *fmt, ...)
{
	va_list ap;
	int cnt;
	va_start(ap, fmt);
80016d08:	27a2003c 	addiu	v0,sp,60
ucore_vsnprintf():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:384
 * Call this function if you are already dealing with a va_list.
 * Or you probably want snprintf() instead.
 * */
static int ucore_vsnprintf(char *str, size_t size, const char *fmt, va_list ap)
{
	struct sprintbuf b = { str, str + size - 1, 0 };
80016d0c:	00852821 	addu	a1,a0,a1
snprintf():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:402
 * @str:        the buffer to place the result into
 * @size:       the size of buffer, including the trailing null space
 * @fmt:        the format string to use
 * */
int snprintf(char *str, size_t size, const char *fmt, ...)
{
80016d10:	afa7003c 	sw	a3,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:405
	va_list ap;
	int cnt;
	va_start(ap, fmt);
80016d14:	afa20018 	sw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:402
 * @str:        the buffer to place the result into
 * @size:       the size of buffer, including the trailing null space
 * @fmt:        the format string to use
 * */
int snprintf(char *str, size_t size, const char *fmt, ...)
{
80016d18:	afbf002c 	sw	ra,44(sp)
80016d1c:	00c03821 	move	a3,a2
ucore_vsnprintf():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:384
 * Call this function if you are already dealing with a va_list.
 * Or you probably want snprintf() instead.
 * */
static int ucore_vsnprintf(char *str, size_t size, const char *fmt, va_list ap)
{
	struct sprintbuf b = { str, str + size - 1, 0 };
80016d20:	afa4001c 	sw	a0,28(sp)
80016d24:	afa50020 	sw	a1,32(sp)
80016d28:	afa00024 	sw	zero,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:385
	if (str == NULL || b.buf > b.ebuf) {
80016d2c:	1080000e 	beqz	a0,80016d68 <snprintf+0x68>
80016d30:	2402ffea 	li	v0,-22
80016d34:	00a4202b 	sltu	a0,a1,a0
80016d38:	1480000b 	bnez	a0,80016d68 <snprintf+0x68>
80016d3c:	3c048001 	lui	a0,0x8001
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:389
		return -E_INVAL;
	}
	// print the string to the buffer
	vprintfmt((void *)sprintputch, NO_FD, &b, fmt, ap);
80016d40:	3c05ffff 	lui	a1,0xffff
80016d44:	27a2003c 	addiu	v0,sp,60
80016d48:	248466e0 	addiu	a0,a0,26336
80016d4c:	24a56ad9 	addiu	a1,a1,27353
80016d50:	27a6001c 	addiu	a2,sp,28
80016d54:	0c0059c4 	jal	80016710 <vprintfmt>
80016d58:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:391
	// null terminate the buffer
	*b.buf = '\0';
80016d5c:	8fa2001c 	lw	v0,28(sp)
80016d60:	a0400000 	sb	zero,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:392
	return b.cnt;
80016d64:	8fa20024 	lw	v0,36(sp)
snprintf():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/printfmt.c:409
	int cnt;
	va_start(ap, fmt);
	cnt = ucore_vsnprintf(str, size, fmt, ap);
	va_end(ap);
	return cnt;
}
80016d68:	8fbf002c 	lw	ra,44(sp)
80016d6c:	03e00008 	jr	ra
80016d70:	27bd0030 	addiu	sp,sp,48

80016d74 <rand>:
rand():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/rand.c:13
 *
 * The rand() function return a value in the range [0, RAND_MAX].
 * */
int rand(void)
{
	next = (next * 0x5DEECE66DLL + 0xBLL) & ((1LL << 48) - 1);
80016d74:	3c038002 	lui	v1,0x8002
80016d78:	8c645428 	lw	a0,21544(v1)
80016d7c:	3c02deec 	lui	v0,0xdeec
80016d80:	3442e66d 	ori	v0,v0,0xe66d
80016d84:	24060005 	li	a2,5
80016d88:	70863002 	mul	a2,a0,a2
80016d8c:	8c67542c 	lw	a3,21548(v1)
80016d90:	00820019 	multu	a0,v0
80016d94:	00002012 	mflo	a0
80016d98:	00002810 	mfhi	a1
80016d9c:	70e24002 	mul	t0,a3,v0
80016da0:	01061021 	addu	v0,t0,a2
80016da4:	2488000b 	addiu	t0,a0,11
80016da8:	0104482b 	sltu	t1,t0,a0
80016dac:	00451021 	addu	v0,v0,a1
80016db0:	01221021 	addu	v0,t1,v0
80016db4:	3042ffff 	andi	v0,v0,0xffff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/rand.c:14
	unsigned long long result = (next >> 12);
80016db8:	00022d00 	sll	a1,v0,0x14
80016dbc:	00082302 	srl	a0,t0,0xc
80016dc0:	00a42025 	or	a0,a1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/rand.c:13
 *
 * The rand() function return a value in the range [0, RAND_MAX].
 * */
int rand(void)
{
	next = (next * 0x5DEECE66DLL + 0xBLL) & ((1LL << 48) - 1);
80016dc4:	ac62542c 	sw	v0,21548(v1)
80016dc8:	ac685428 	sw	t0,21544(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/rand.c:16
	unsigned long long result = (next >> 12);
	return (int)do_div(result, RAND_MAX + 1);
}
80016dcc:	03e00008 	jr	ra
80016dd0:	7c82f000 	ext	v0,a0,0x0,0x1f

80016dd4 <srand>:
srand():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/rand.c:24
 * srand - seed the random number generator with the given number
 * @seed:   the required seed number
 * */
void srand(unsigned int seed)
{
	next = seed;
80016dd4:	3c028002 	lui	v0,0x8002
80016dd8:	ac445428 	sw	a0,21544(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/rand.c:25
}
80016ddc:	03e00008 	jr	ra
80016de0:	ac40542c 	sw	zero,21548(v0)

80016de4 <strlen>:
strlen():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:14
 * The strlen() function returns the length of string @s.
 * */
size_t strlen(const char *s)
{
	size_t cnt = 0;
	while (*s++ != '\0') {
80016de4:	90830000 	lbu	v1,0(a0)
80016de8:	10600006 	beqz	v1,80016e04 <strlen+0x20>
80016dec:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:15
		cnt++;
80016df0:	24420001 	addiu	v0,v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:11
 * the terminating '\0' character.
 * @s:      the input string
 *
 * The strlen() function returns the length of string @s.
 * */
size_t strlen(const char *s)
80016df4:	00821821 	addu	v1,a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:14
{
	size_t cnt = 0;
	while (*s++ != '\0') {
80016df8:	90630000 	lbu	v1,0(v1)
80016dfc:	5460fffd 	bnezl	v1,80016df4 <strlen+0x10>
80016e00:	24420001 	addiu	v0,v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:18
		cnt++;
	}
	return cnt;
}
80016e04:	03e00008 	jr	ra
80016e08:	00000000 	nop

80016e0c <strnlen>:
strnlen():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:36
 * pointed by @s.
 * */
size_t strnlen(const char *s, size_t len)
{
	size_t cnt = 0;
	while (cnt < len && *s++ != '\0') {
80016e0c:	10a0000c 	beqz	a1,80016e40 <strnlen+0x34>
80016e10:	00001021 	move	v0,zero
80016e14:	90830000 	lbu	v1,0(a0)
80016e18:	54600007 	bnezl	v1,80016e38 <strnlen+0x2c>
80016e1c:	24420001 	addiu	v0,v0,1
80016e20:	08005b90 	j	80016e40 <strnlen+0x34>
80016e24:	00000000 	nop
80016e28:	90630000 	lbu	v1,0(v1)
80016e2c:	10600004 	beqz	v1,80016e40 <strnlen+0x34>
80016e30:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:37
		cnt++;
80016e34:	24420001 	addiu	v0,v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:36
 * pointed by @s.
 * */
size_t strnlen(const char *s, size_t len)
{
	size_t cnt = 0;
	while (cnt < len && *s++ != '\0') {
80016e38:	1445fffb 	bne	v0,a1,80016e28 <strnlen+0x1c>
80016e3c:	00821821 	addu	v1,a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:40
		cnt++;
	}
	return cnt;
}
80016e40:	03e00008 	jr	ra
80016e44:	00000000 	nop

80016e48 <strcpy>:
strcpy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:55
 * To avoid overflows, the size of array pointed by @dst should be long enough to
 * contain the same string as @src (including the terminating null character), and
 * should not overlap in memory with @src.
 * */
char *strcpy(char *dst, const char *src)
{
80016e48:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:59
#ifdef __HAVE_ARCH_STRCPY
	return __strcpy(dst, src);
#else
	char *p = dst;
80016e4c:	00801821 	move	v1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:60
	while ((*p++ = *src++) != '\0')
80016e50:	90a40000 	lbu	a0,0(a1)
80016e54:	24a50001 	addiu	a1,a1,1
80016e58:	a0640000 	sb	a0,0(v1)
80016e5c:	1480fffc 	bnez	a0,80016e50 <strcpy+0x8>
80016e60:	24630001 	addiu	v1,v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:64
		/* nothing */ ;
	return dst;
#endif /* __HAVE_ARCH_STRCPY */
}
80016e64:	03e00008 	jr	ra
80016e68:	00000000 	nop

80016e6c <strncpy>:
strncpy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:79
 * The return value is @dst
 * */
char *strncpy(char *dst, const char *src, size_t len)
{
	char *p = dst;
	while (len > 0) {
80016e6c:	10c00009 	beqz	a2,80016e94 <strncpy+0x28>
80016e70:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:76
 * @src:    string to be copied
 * @len:    maximum number of characters to be copied from @src
 *
 * The return value is @dst
 * */
char *strncpy(char *dst, const char *src, size_t len)
80016e74:	00863021 	addu	a2,a0,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:78
{
	char *p = dst;
80016e78:	00801821 	move	v1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:80
	while (len > 0) {
		if ((*p = *src) != '\0') {
80016e7c:	90a40000 	lbu	a0,0(a1)
80016e80:	a0640000 	sb	a0,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:81
			src++;
80016e84:	0004202b 	sltu	a0,zero,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:83
		}
		p++, len--;
80016e88:	24630001 	addiu	v1,v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:79
 * The return value is @dst
 * */
char *strncpy(char *dst, const char *src, size_t len)
{
	char *p = dst;
	while (len > 0) {
80016e8c:	1466fffb 	bne	v1,a2,80016e7c <strncpy+0x10>
80016e90:	00a42821 	addu	a1,a1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:86
			src++;
		}
		p++, len--;
	}
	return dst;
}
80016e94:	03e00008 	jr	ra
80016e98:	00000000 	nop

80016e9c <strcat>:
strlen():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:14
 * The strlen() function returns the length of string @s.
 * */
size_t strlen(const char *s)
{
	size_t cnt = 0;
	while (*s++ != '\0') {
80016e9c:	90830000 	lbu	v1,0(a0)
80016ea0:	10600007 	beqz	v1,80016ec0 <strcat+0x24>
80016ea4:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:13
 *
 * The strlen() function returns the length of string @s.
 * */
size_t strlen(const char *s)
{
	size_t cnt = 0;
80016ea8:	00001821 	move	v1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:15
	while (*s++ != '\0') {
		cnt++;
80016eac:	24630001 	addiu	v1,v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:96
 * is appended at the end of the new string formed by the concatenation of both in @dst.
 * @dst:    pointer to the @dst array, which should be large enough to contain the concatenated
 *          resulting string.
 * @src:    string to be appended, this should not overlap @dst
 * */
char *strcat(char *dst, const char *src)
80016eb0:	00831021 	addu	v0,a0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:14
 * The strlen() function returns the length of string @s.
 * */
size_t strlen(const char *s)
{
	size_t cnt = 0;
	while (*s++ != '\0') {
80016eb4:	90460000 	lbu	a2,0(v0)
80016eb8:	54c0fffd 	bnezl	a2,80016eb0 <strcat+0x14>
80016ebc:	24630001 	addiu	v1,v1,1
strcat():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:59
char *strcpy(char *dst, const char *src)
{
#ifdef __HAVE_ARCH_STRCPY
	return __strcpy(dst, src);
#else
	char *p = dst;
80016ec0:	00401821 	move	v1,v0
strcpy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:60
	while ((*p++ = *src++) != '\0')
80016ec4:	90a40000 	lbu	a0,0(a1)
80016ec8:	24a50001 	addiu	a1,a1,1
80016ecc:	a0640000 	sb	a0,0(v1)
80016ed0:	1480fffc 	bnez	a0,80016ec4 <strcat+0x28>
80016ed4:	24630001 	addiu	v1,v1,1
strcat():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:99
 * @src:    string to be appended, this should not overlap @dst
 * */
char *strcat(char *dst, const char *src)
{
	return strcpy(dst + strlen(dst), src);
}
80016ed8:	03e00008 	jr	ra
80016edc:	00000000 	nop

80016ee0 <strcmp>:
strcmp():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:121
int strcmp(const char *s1, const char *s2)
{
#ifdef __HAVE_ARCH_STRCMP
	return __strcmp(s1, s2);
#else
	while (*s1 != '\0' && *s1 == *s2) {
80016ee0:	90830000 	lbu	v1,0(a0)
80016ee4:	1060000c 	beqz	v1,80016f18 <strcmp+0x38>
80016ee8:	90a20000 	lbu	v0,0(a1)
80016eec:	10620005 	beq	v1,v0,80016f04 <strcmp+0x24>
80016ef0:	24840001 	addiu	a0,a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:126
		s1++, s2++;
	}
	return (int)((unsigned char)*s1 - (unsigned char)*s2);
#endif /* __HAVE_ARCH_STRCMP */
}
80016ef4:	03e00008 	jr	ra
80016ef8:	00621023 	subu	v0,v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:121
int strcmp(const char *s1, const char *s2)
{
#ifdef __HAVE_ARCH_STRCMP
	return __strcmp(s1, s2);
#else
	while (*s1 != '\0' && *s1 == *s2) {
80016efc:	14620006 	bne	v1,v0,80016f18 <strcmp+0x38>
80016f00:	00c02821 	move	a1,a2
80016f04:	90830000 	lbu	v1,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:122
		s1++, s2++;
80016f08:	24a60001 	addiu	a2,a1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:121
int strcmp(const char *s1, const char *s2)
{
#ifdef __HAVE_ARCH_STRCMP
	return __strcmp(s1, s2);
#else
	while (*s1 != '\0' && *s1 == *s2) {
80016f0c:	24840001 	addiu	a0,a0,1
80016f10:	1460fffa 	bnez	v1,80016efc <strcmp+0x1c>
80016f14:	90a20001 	lbu	v0,1(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:126
		s1++, s2++;
	}
	return (int)((unsigned char)*s1 - (unsigned char)*s2);
#endif /* __HAVE_ARCH_STRCMP */
}
80016f18:	00621023 	subu	v0,v1,v0
80016f1c:	03e00008 	jr	ra
80016f20:	00000000 	nop

80016f24 <strncmp>:
strncmp():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:141
 * the characters differ, until a terminating null-character is reached, or
 * until @n characters match in both strings, whichever happens first.
 * */
int strncmp(const char *s1, const char *s2, size_t n)
{
	while (n > 0 && *s1 != '\0' && *s1 == *s2) {
80016f24:	10c00013 	beqz	a2,80016f74 <strncmp+0x50>
80016f28:	00001021 	move	v0,zero
80016f2c:	90820000 	lbu	v0,0(a0)
80016f30:	1040000d 	beqz	v0,80016f68 <strncmp+0x44>
80016f34:	90a30000 	lbu	v1,0(a1)
80016f38:	1443000b 	bne	v0,v1,80016f68 <strncmp+0x44>
80016f3c:	00a63021 	addu	a2,a1,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:139
 * This function starts comparing the first character of each string. If
 * they are equal to each other, it continues with the following pairs until
 * the characters differ, until a terminating null-character is reached, or
 * until @n characters match in both strings, whichever happens first.
 * */
int strncmp(const char *s1, const char *s2, size_t n)
80016f40:	24840001 	addiu	a0,a0,1
80016f44:	24c6ffff 	addiu	a2,a2,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:141
{
	while (n > 0 && *s1 != '\0' && *s1 == *s2) {
80016f48:	10a60009 	beq	a1,a2,80016f70 <strncmp+0x4c>
80016f4c:	24a70001 	addiu	a3,a1,1
80016f50:	90820000 	lbu	v0,0(a0)
80016f54:	24840001 	addiu	a0,a0,1
80016f58:	10400003 	beqz	v0,80016f68 <strncmp+0x44>
80016f5c:	90a30001 	lbu	v1,1(a1)
80016f60:	1043fff9 	beq	v0,v1,80016f48 <strncmp+0x24>
80016f64:	00e02821 	move	a1,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:144
		n--, s1++, s2++;
	}
	return (n == 0) ? 0 : (int)((unsigned char)*s1 - (unsigned char)*s2);
80016f68:	03e00008 	jr	ra
80016f6c:	00431023 	subu	v0,v0,v1
80016f70:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:145
}
80016f74:	03e00008 	jr	ra
80016f78:	00000000 	nop

80016f7c <strchr>:
strchr():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:157
 * The strchr() function returns a pointer to the first occurrence of
 * character in @s. If the value is not found, the function returns 'NULL'.
 * */
char *strchr(const char *s, char c)
{
	while (*s != '\0') {
80016f7c:	90830000 	lbu	v1,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:156
 *
 * The strchr() function returns a pointer to the first occurrence of
 * character in @s. If the value is not found, the function returns 'NULL'.
 * */
char *strchr(const char *s, char c)
{
80016f80:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:157
	while (*s != '\0') {
80016f84:	1060000c 	beqz	v1,80016fb8 <strchr+0x3c>
80016f88:	30a500ff 	andi	a1,a1,0xff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:158
		if (*s == c) {
80016f8c:	54650006 	bnel	v1,a1,80016fa8 <strchr+0x2c>
80016f90:	90430001 	lbu	v1,1(v0)
80016f94:	08005bf0 	j	80016fc0 <strchr+0x44>
80016f98:	00000000 	nop
80016f9c:	10650008 	beq	v1,a1,80016fc0 <strchr+0x44>
80016fa0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:157
 * The strchr() function returns a pointer to the first occurrence of
 * character in @s. If the value is not found, the function returns 'NULL'.
 * */
char *strchr(const char *s, char c)
{
	while (*s != '\0') {
80016fa4:	90430001 	lbu	v1,1(v0)
80016fa8:	1460fffc 	bnez	v1,80016f9c <strchr+0x20>
80016fac:	24420001 	addiu	v0,v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:163
		if (*s == c) {
			return (char *)s;
		}
		s++;
	}
	return NULL;
80016fb0:	03e00008 	jr	ra
80016fb4:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:164
}
80016fb8:	03e00008 	jr	ra
80016fbc:	00001021 	move	v0,zero
80016fc0:	03e00008 	jr	ra
80016fc4:	00000000 	nop

80016fc8 <strfind>:
strfind():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:177
 * not found in @s, then it returns a pointer to the null byte at the
 * end of @s, rather than 'NULL'.
 * */
char *strfind(const char *s, char c)
{
	while (*s != '\0') {
80016fc8:	90830000 	lbu	v1,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:176
 * The strfind() function is like strchr() except that if @c is
 * not found in @s, then it returns a pointer to the null byte at the
 * end of @s, rather than 'NULL'.
 * */
char *strfind(const char *s, char c)
{
80016fcc:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:177
	while (*s != '\0') {
80016fd0:	1060000b 	beqz	v1,80017000 <strfind+0x38>
80016fd4:	30a500ff 	andi	a1,a1,0xff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:178
		if (*s == c) {
80016fd8:	54650006 	bnel	v1,a1,80016ff4 <strfind+0x2c>
80016fdc:	24420001 	addiu	v0,v0,1
80016fe0:	08005c02 	j	80017008 <strfind+0x40>
80016fe4:	00000000 	nop
80016fe8:	10650007 	beq	v1,a1,80017008 <strfind+0x40>
80016fec:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:181
			break;
		}
		s++;
80016ff0:	24420001 	addiu	v0,v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:177
 * not found in @s, then it returns a pointer to the null byte at the
 * end of @s, rather than 'NULL'.
 * */
char *strfind(const char *s, char c)
{
	while (*s != '\0') {
80016ff4:	90430000 	lbu	v1,0(v0)
80016ff8:	1460fffb 	bnez	v1,80016fe8 <strfind+0x20>
80016ffc:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:184
			break;
		}
		s++;
	}
	return (char *)s;
}
80017000:	03e00008 	jr	ra
80017004:	00000000 	nop
80017008:	03e00008 	jr	ra
8001700c:	00000000 	nop

80017010 <strtol>:
strtol():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:222
{
	int neg = 0;
	long val = 0;

	// gobble initial whitespace
	while (*s == ' ' || *s == '\t') {
80017010:	24020020 	li	v0,32
80017014:	24070009 	li	a3,9
80017018:	90830000 	lbu	v1,0(a0)
8001701c:	5062fffe 	beql	v1,v0,80017018 <strtol+0x8>
80017020:	24840001 	addiu	a0,a0,1
80017024:	54670003 	bnel	v1,a3,80017034 <strtol+0x24>
80017028:	2402002b 	li	v0,43
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:223
		s++;
8001702c:	08005c06 	j	80017018 <strtol+0x8>
80017030:	24840001 	addiu	a0,a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:227
	}

	// plus/minus sign
	if (*s == '+') {
80017034:	10620039 	beq	v1,v0,8001711c <strtol+0x10c>
80017038:	00803821 	move	a3,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:229
		s++;
	} else if (*s == '-') {
8001703c:	2402002d 	li	v0,45
80017040:	10620032 	beq	v1,v0,8001710c <strtol+0xfc>
80017044:	00005021 	move	t2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:233
		s++, neg = 1;
	}
	// hex or octal base prefix
	if ((base == 0 || base == 16) && (s[0] == '0' && s[1] == 'x')) {
80017048:	10c00021 	beqz	a2,800170d0 <strtol+0xc0>
8001704c:	24020030 	li	v0,48
80017050:	24020010 	li	v0,16
80017054:	50c2001e 	beql	a2,v0,800170d0 <strtol+0xc0>
80017058:	24020030 	li	v0,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:238
		s += 2, base = 16;
	} else if (base == 0 && s[0] == '0') {
		s++, base = 8;
	} else if (base == 0) {
		base = 10;
8001705c:	08005c20 	j	80017080 <strtol+0x70>
80017060:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:245
	// digits
	while (1) {
		int dig;

		if (*s >= '0' && *s <= '9') {
			dig = *s - '0';
80017064:	00e01821 	move	v1,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:253
		} else if (*s >= 'A' && *s <= 'Z') {
			dig = *s - 'A' + 10;
		} else {
			break;
		}
		if (dig >= base) {
80017068:	0066382a 	slt	a3,v1,a2
8001706c:	10e00013 	beqz	a3,800170bc <strtol+0xac>
80017070:	70463802 	mul	a3,v0,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:256
			break;
		}
		s++, val = (val * base) + dig;
80017074:	24840001 	addiu	a0,a0,1
80017078:	00e31021 	addu	v0,a3,v1
8001707c:	90830000 	lbu	v1,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:244
	}
	// digits
	while (1) {
		int dig;

		if (*s >= '0' && *s <= '9') {
80017080:	2467ffd0 	addiu	a3,v1,-48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:246
			dig = *s - '0';
		} else if (*s >= 'a' && *s <= 'z') {
80017084:	2469ff9f 	addiu	t1,v1,-97
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:244
	}
	// digits
	while (1) {
		int dig;

		if (*s >= '0' && *s <= '9') {
80017088:	30e800ff 	andi	t0,a3,0xff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:246
			dig = *s - '0';
		} else if (*s >= 'a' && *s <= 'z') {
8001708c:	312900ff 	andi	t1,t1,0xff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:244
	}
	// digits
	while (1) {
		int dig;

		if (*s >= '0' && *s <= '9') {
80017090:	2d08000a 	sltiu	t0,t0,10
80017094:	1500fff3 	bnez	t0,80017064 <strtol+0x54>
80017098:	2d29001a 	sltiu	t1,t1,26
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:248
			dig = *s - '0';
		} else if (*s >= 'a' && *s <= 'z') {
			dig = *s - 'a' + 10;
		} else if (*s >= 'A' && *s <= 'Z') {
8001709c:	2467ffbf 	addiu	a3,v1,-65
800170a0:	30e700ff 	andi	a3,a3,0xff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:246
	while (1) {
		int dig;

		if (*s >= '0' && *s <= '9') {
			dig = *s - '0';
		} else if (*s >= 'a' && *s <= 'z') {
800170a4:	11200015 	beqz	t1,800170fc <strtol+0xec>
800170a8:	2ce7001a 	sltiu	a3,a3,26
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:247
			dig = *s - 'a' + 10;
800170ac:	2463ffa9 	addiu	v1,v1,-87
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:253
		} else if (*s >= 'A' && *s <= 'Z') {
			dig = *s - 'A' + 10;
		} else {
			break;
		}
		if (dig >= base) {
800170b0:	0066382a 	slt	a3,v1,a2
800170b4:	14e0ffef 	bnez	a3,80017074 <strtol+0x64>
800170b8:	70463802 	mul	a3,v0,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:260
		}
		s++, val = (val * base) + dig;
		// we don't properly detect overflow!
	}

	if (endptr) {
800170bc:	54a00001 	bnezl	a1,800170c4 <strtol+0xb4>
800170c0:	aca40000 	sw	a0,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:263
		*endptr = (char *)s;
	}
	return (neg ? -val : val);
800170c4:	00021823 	negu	v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:264
}
800170c8:	03e00008 	jr	ra
800170cc:	006a100b 	movn	v0,v1,t2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:233
		s++;
	} else if (*s == '-') {
		s++, neg = 1;
	}
	// hex or octal base prefix
	if ((base == 0 || base == 16) && (s[0] == '0' && s[1] == 'x')) {
800170d0:	50620016 	beql	v1,v0,8001712c <strtol+0x11c>
800170d4:	90870001 	lbu	a3,1(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:235
		s += 2, base = 16;
	} else if (base == 0 && s[0] == '0') {
800170d8:	14c0ffe9 	bnez	a2,80017080 <strtol+0x70>
800170dc:	00001021 	move	v0,zero
800170e0:	24020030 	li	v0,48
800170e4:	1462ffdd 	bne	v1,v0,8001705c <strtol+0x4c>
800170e8:	2406000a 	li	a2,10
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:236
		s++, base = 8;
800170ec:	90830001 	lbu	v1,1(a0)
800170f0:	24060008 	li	a2,8
800170f4:	08005c17 	j	8001705c <strtol+0x4c>
800170f8:	24840001 	addiu	a0,a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:248

		if (*s >= '0' && *s <= '9') {
			dig = *s - '0';
		} else if (*s >= 'a' && *s <= 'z') {
			dig = *s - 'a' + 10;
		} else if (*s >= 'A' && *s <= 'Z') {
800170fc:	10e0ffef 	beqz	a3,800170bc <strtol+0xac>
80017100:	2463ffc9 	addiu	v1,v1,-55
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:253
			dig = *s - 'A' + 10;
		} else {
			break;
		}
		if (dig >= base) {
80017104:	08005c1b 	j	8001706c <strtol+0x5c>
80017108:	0066382a 	slt	a3,v1,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:230

	// plus/minus sign
	if (*s == '+') {
		s++;
	} else if (*s == '-') {
		s++, neg = 1;
8001710c:	90830001 	lbu	v1,1(a0)
80017110:	240a0001 	li	t2,1
80017114:	08005c12 	j	80017048 <strtol+0x38>
80017118:	24840001 	addiu	a0,a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:228
		s++;
	}

	// plus/minus sign
	if (*s == '+') {
		s++;
8001711c:	24840001 	addiu	a0,a0,1
80017120:	90e30001 	lbu	v1,1(a3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:218
 *
 * The strtol() function returns the converted integral number as a long int value.
 * */
long strtol(const char *s, char **endptr, int base)
{
	int neg = 0;
80017124:	08005c12 	j	80017048 <strtol+0x38>
80017128:	00005021 	move	t2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:233
		s++;
	} else if (*s == '-') {
		s++, neg = 1;
	}
	// hex or octal base prefix
	if ((base == 0 || base == 16) && (s[0] == '0' && s[1] == 'x')) {
8001712c:	24020078 	li	v0,120
80017130:	14e2ffe9 	bne	a3,v0,800170d8 <strtol+0xc8>
80017134:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:234
		s += 2, base = 16;
80017138:	90830002 	lbu	v1,2(a0)
8001713c:	24060010 	li	a2,16
80017140:	08005c17 	j	8001705c <strtol+0x4c>
80017144:	24840002 	addiu	a0,a0,2

80017148 <memset>:
memset():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:281
{
#ifdef __HAVE_ARCH_MEMSET
	return __memset(s, c, n);
#else
	char *p = s;
	while (n-- > 0) {
80017148:	10c00007 	beqz	a2,80017168 <memset+0x20>
8001714c:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:275
 * @c:      value to set
 * @n:      number of bytes to be set to the value
 *
 * The memset() function returns @s.
 * */
void *memset(void *s, char c, size_t n)
80017150:	00863021 	addu	a2,a0,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:280
{
#ifdef __HAVE_ARCH_MEMSET
	return __memset(s, c, n);
#else
	char *p = s;
80017154:	00801821 	move	v1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:282
	while (n-- > 0) {
		*p++ = c;
80017158:	a0650000 	sb	a1,0(v1)
8001715c:	24630001 	addiu	v1,v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:281
{
#ifdef __HAVE_ARCH_MEMSET
	return __memset(s, c, n);
#else
	char *p = s;
	while (n-- > 0) {
80017160:	5466fffe 	bnel	v1,a2,8001715c <memset+0x14>
80017164:	a0650000 	sb	a1,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:286
		*p++ = c;
	}
	return s;
#endif /* __HAVE_ARCH_MEMSET */
}
80017168:	03e00008 	jr	ra
8001716c:	00000000 	nop

80017170 <memmove>:
memmove():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:304
#ifdef __HAVE_ARCH_MEMMOVE
	return __memmove(dst, src, n);
#else
	const char *s = src;
	char *d = dst;
	if (s < d && s + n > d) {
80017170:	00a4182b 	sltu	v1,a1,a0
80017174:	10600014 	beqz	v1,800171c8 <memmove+0x58>
80017178:	00801021 	move	v0,a0
8001717c:	00a64021 	addu	t0,a1,a2
80017180:	0088182b 	sltu	v1,a0,t0
80017184:	10600010 	beqz	v1,800171c8 <memmove+0x58>
80017188:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:306
		s += n, d += n;
		while (n-- > 0) {
8001718c:	10c0000c 	beqz	a2,800171c0 <memmove+0x50>
80017190:	00061823 	negu	v1,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:305
	return __memmove(dst, src, n);
#else
	const char *s = src;
	char *d = dst;
	if (s < d && s + n > d) {
		s += n, d += n;
80017194:	00863821 	addu	a3,a0,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:297
 * @src     pointer to the source of data to by copied
 * @n:      number of bytes to copy
 *
 * The memmove() function returns @dst.
 * */
void *memmove(void *dst, const void *src, size_t n)
80017198:	01034021 	addu	t0,t0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:306
#else
	const char *s = src;
	char *d = dst;
	if (s < d && s + n > d) {
		s += n, d += n;
		while (n-- > 0) {
8001719c:	24c6ffff 	addiu	a2,a2,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:297
 * @src     pointer to the source of data to by copied
 * @n:      number of bytes to copy
 *
 * The memmove() function returns @dst.
 * */
void *memmove(void *dst, const void *src, size_t n)
800171a0:	00e33821 	addu	a3,a3,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:306
#else
	const char *s = src;
	char *d = dst;
	if (s < d && s + n > d) {
		s += n, d += n;
		while (n-- > 0) {
800171a4:	2405ffff 	li	a1,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:297
 * @src     pointer to the source of data to by copied
 * @n:      number of bytes to copy
 *
 * The memmove() function returns @dst.
 * */
void *memmove(void *dst, const void *src, size_t n)
800171a8:	01061821 	addu	v1,t0,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:307
	const char *s = src;
	char *d = dst;
	if (s < d && s + n > d) {
		s += n, d += n;
		while (n-- > 0) {
			*--d = *--s;
800171ac:	90640000 	lbu	a0,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:297
 * @src     pointer to the source of data to by copied
 * @n:      number of bytes to copy
 *
 * The memmove() function returns @dst.
 * */
void *memmove(void *dst, const void *src, size_t n)
800171b0:	00e61821 	addu	v1,a3,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:306
#else
	const char *s = src;
	char *d = dst;
	if (s < d && s + n > d) {
		s += n, d += n;
		while (n-- > 0) {
800171b4:	24c6ffff 	addiu	a2,a2,-1
800171b8:	14c5fffb 	bne	a2,a1,800171a8 <memmove+0x38>
800171bc:	a0640000 	sb	a0,0(v1)
800171c0:	03e00008 	jr	ra
800171c4:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:310
			*--d = *--s;
		}
	} else {
		while (n-- > 0) {
800171c8:	10c0fffd 	beqz	a2,800171c0 <memmove+0x50>
800171cc:	00a63021 	addu	a2,a1,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:297
 * @src     pointer to the source of data to by copied
 * @n:      number of bytes to copy
 *
 * The memmove() function returns @dst.
 * */
void *memmove(void *dst, const void *src, size_t n)
800171d0:	00401821 	move	v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:311
		while (n-- > 0) {
			*--d = *--s;
		}
	} else {
		while (n-- > 0) {
			*d++ = *s++;
800171d4:	90a40000 	lbu	a0,0(a1)
800171d8:	24a50001 	addiu	a1,a1,1
800171dc:	a0640000 	sb	a0,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:310
		s += n, d += n;
		while (n-- > 0) {
			*--d = *--s;
		}
	} else {
		while (n-- > 0) {
800171e0:	14a6fffc 	bne	a1,a2,800171d4 <memmove+0x64>
800171e4:	24630001 	addiu	v1,v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:316
			*d++ = *s++;
		}
	}
	return dst;
#endif /* __HAVE_ARCH_MEMMOVE */
}
800171e8:	03e00008 	jr	ra
800171ec:	00000000 	nop

800171f0 <memcpy>:
memcpy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:339
#ifdef __HAVE_ARCH_MEMCPY
	return __memcpy(dst, src, n);
#else
	const char *s = src;
	char *d = dst;
	while (n-- > 0) {
800171f0:	10c00008 	beqz	a2,80017214 <memcpy+0x24>
800171f4:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:332
 * Note that, the function does not check any terminating null character in @src,
 * it always copies exactly @n bytes. To avoid overflows, the size of arrays pointed
 * by both @src and @dst, should be at least @n bytes, and should not overlap
 * (for overlapping memory area, memmove is a safer approach).
 * */
void *memcpy(void *dst, const void *src, size_t n)
800171f8:	00a63021 	addu	a2,a1,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:338
{
#ifdef __HAVE_ARCH_MEMCPY
	return __memcpy(dst, src, n);
#else
	const char *s = src;
	char *d = dst;
800171fc:	00801821 	move	v1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:340
	while (n-- > 0) {
		*d++ = *s++;
80017200:	90a40000 	lbu	a0,0(a1)
80017204:	24a50001 	addiu	a1,a1,1
80017208:	a0640000 	sb	a0,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:339
#ifdef __HAVE_ARCH_MEMCPY
	return __memcpy(dst, src, n);
#else
	const char *s = src;
	char *d = dst;
	while (n-- > 0) {
8001720c:	14a6fffc 	bne	a1,a2,80017200 <memcpy+0x10>
80017210:	24630001 	addiu	v1,v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:344
		*d++ = *s++;
	}
	return dst;
#endif /* __HAVE_ARCH_MEMCPY */
}
80017214:	03e00008 	jr	ra
80017218:	00000000 	nop

8001721c <memcmp>:
memcmp():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:364
 * */
int memcmp(const void *v1, const void *v2, size_t n)
{
	const char *s1 = (const char *)v1;
	const char *s2 = (const char *)v2;
	while (n-- > 0) {
8001721c:	10c00010 	beqz	a2,80017260 <memcmp+0x44>
80017220:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:365
		if (*s1 != *s2) {
80017224:	90870000 	lbu	a3,0(a0)
80017228:	90a20000 	lbu	v0,0(a1)
8001722c:	14e2000a 	bne	a3,v0,80017258 <memcmp+0x3c>
80017230:	24840001 	addiu	a0,a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:360
 * - A value greater than zero indicates that the first byte that does not
 *   match in both memory blocks has a greater value in @v1 than in @v2
 *   as if evaluated as unsigned char values;
 * - And a value less than zero indicates the opposite.
 * */
int memcmp(const void *v1, const void *v2, size_t n)
80017234:	24a30001 	addiu	v1,a1,1
80017238:	00a63021 	addu	a2,a1,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:364
{
	const char *s1 = (const char *)v1;
	const char *s2 = (const char *)v2;
	while (n-- > 0) {
8001723c:	10660008 	beq	v1,a2,80017260 <memcmp+0x44>
80017240:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:365
		if (*s1 != *s2) {
80017244:	90870000 	lbu	a3,0(a0)
80017248:	90620000 	lbu	v0,0(v1)
8001724c:	24840001 	addiu	a0,a0,1
80017250:	10e2fffa 	beq	a3,v0,8001723c <memcmp+0x20>
80017254:	24630001 	addiu	v1,v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:366
			return (int)((unsigned char)*s1 - (unsigned char)*s2);
80017258:	03e00008 	jr	ra
8001725c:	00e21023 	subu	v0,a3,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:371
		}
		s1++, s2++;
	}
	return 0;
}
80017260:	03e00008 	jr	ra
80017264:	00000000 	nop

80017268 <stricmp>:
stricmp():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:394
{
	//while (*s1 != '\0')&& *s1 == *s2) {
	//    s1 ++, s2 ++;
	//}
	char t1, t2;
	while (*s1 != '\0') {
80017268:	90830000 	lbu	v1,0(a0)
8001726c:	50600015 	beqzl	v1,800172c4 <stricmp+0x5c>
80017270:	90a20000 	lbu	v0,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:388
 * - A value greater than zero indicates that the first character that does
 *   not match has a greater value in @s1 than in @s2;
 * - And a value less than zero indicates the opposite.
 * - All of the comparing is case insensitive
 * */
int stricmp(const char *s1, const char *s2)
80017274:	24840001 	addiu	a0,a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:395
	//while (*s1 != '\0')&& *s1 == *s2) {
	//    s1 ++, s2 ++;
	//}
	char t1, t2;
	while (*s1 != '\0') {
		t1 = ((*s1 > 'Z') ? (*s1 - 32) : *s1);
80017278:	2c69005b 	sltiu	t1,v1,91
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:399
		t2 = ((*s2 > 'Z') ? (*s2 - 32) : *s2);

		if (t1 == t2) {
			s1++, s2++;
8001727c:	24840001 	addiu	a0,a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:395
	//while (*s1 != '\0')&& *s1 == *s2) {
	//    s1 ++, s2 ++;
	//}
	char t1, t2;
	while (*s1 != '\0') {
		t1 = ((*s1 > 'Z') ? (*s1 - 32) : *s1);
80017280:	2462ffe0 	addiu	v0,v1,-32
80017284:	15200002 	bnez	t1,80017290 <stricmp+0x28>
80017288:	00603821 	move	a3,v1
8001728c:	304700ff 	andi	a3,v0,0xff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:396
		t2 = ((*s2 > 'Z') ? (*s2 - 32) : *s2);
80017290:	90a20000 	lbu	v0,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:399

		if (t1 == t2) {
			s1++, s2++;
80017294:	24a50001 	addiu	a1,a1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:396
	//    s1 ++, s2 ++;
	//}
	char t1, t2;
	while (*s1 != '\0') {
		t1 = ((*s1 > 'Z') ? (*s1 - 32) : *s1);
		t2 = ((*s2 > 'Z') ? (*s2 - 32) : *s2);
80017298:	2c48005b 	sltiu	t0,v0,91
8001729c:	244affe0 	addiu	t2,v0,-32
800172a0:	15000002 	bnez	t0,800172ac <stricmp+0x44>
800172a4:	00403021 	move	a2,v0
800172a8:	314600ff 	andi	a2,t2,0xff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:398

		if (t1 == t2) {
800172ac:	14e6000d 	bne	a3,a2,800172e4 <stricmp+0x7c>
800172b0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:394
{
	//while (*s1 != '\0')&& *s1 == *s2) {
	//    s1 ++, s2 ++;
	//}
	char t1, t2;
	while (*s1 != '\0') {
800172b4:	9083ffff 	lbu	v1,-1(a0)
800172b8:	5460fff0 	bnezl	v1,8001727c <stricmp+0x14>
800172bc:	2c69005b 	sltiu	t1,v1,91
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:406
			break;
		}
	}
	t1 = ((*s1 > 'Z') ? (*s1 - 32) : *s1);
	t2 = ((*s2 > 'Z') ? (*s2 - 32) : *s2);
	return (int)((unsigned char)t1 - (unsigned char)t2);
800172c0:	90a20000 	lbu	v0,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:396
	//    s1 ++, s2 ++;
	//}
	char t1, t2;
	while (*s1 != '\0') {
		t1 = ((*s1 > 'Z') ? (*s1 - 32) : *s1);
		t2 = ((*s2 > 'Z') ? (*s2 - 32) : *s2);
800172c4:	00001821 	move	v1,zero
800172c8:	2c48005b 	sltiu	t0,v0,91
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:405
		} else {
			break;
		}
	}
	t1 = ((*s1 > 'Z') ? (*s1 - 32) : *s1);
	t2 = ((*s2 > 'Z') ? (*s2 - 32) : *s2);
800172cc:	5500000a 	bnezl	t0,800172f8 <stricmp+0x90>
800172d0:	00621023 	subu	v0,v1,v0
800172d4:	2442ffe0 	addiu	v0,v0,-32
800172d8:	304200ff 	andi	v0,v0,0xff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:407
	return (int)((unsigned char)t1 - (unsigned char)t2);
}
800172dc:	03e00008 	jr	ra
800172e0:	00621023 	subu	v0,v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/string.c:404
			s1++, s2++;
		} else {
			break;
		}
	}
	t1 = ((*s1 > 'Z') ? (*s1 - 32) : *s1);
800172e4:	1520fff9 	bnez	t1,800172cc <stricmp+0x64>
800172e8:	00000000 	nop
800172ec:	2463ffe0 	addiu	v1,v1,-32
800172f0:	08005cb3 	j	800172cc <stricmp+0x64>
800172f4:	306300ff 	andi	v1,v1,0xff
800172f8:	03e00008 	jr	ra
800172fc:	00000000 	nop

80017300 <get_pgd>:
get_pgd():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:16
 * Page table operations
 **************************************************/

pgd_t *get_pgd(pgd_t * pgdir, uintptr_t la, bool create)
{
	return &pgdir[PGX(la)];
80017300:	00051582 	srl	v0,a1,0x16
80017304:	00021080 	sll	v0,v0,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:17
}
80017308:	03e00008 	jr	ra
8001730c:	00821021 	addu	v0,a0,v0

80017310 <get_pud>:
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:16
 * Page table operations
 **************************************************/

pgd_t *get_pgd(pgd_t * pgdir, uintptr_t la, bool create)
{
	return &pgdir[PGX(la)];
80017310:	00051582 	srl	v0,a1,0x16
80017314:	00021080 	sll	v0,v0,0x2
get_pud():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:43
		ptep_set_accessed(pgdp);
		ptep_set_dirty(pgdp);
	}
	return &((pud_t *) KADDR(PGD_ADDR(*pgdp)))[PUX(la)];
#endif /* PUXSHIFT == PGXSHIFT */
}
80017318:	03e00008 	jr	ra
8001731c:	00821021 	addu	v0,a0,v0

80017320 <get_pmd>:
get_pgd():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:16
 * Page table operations
 **************************************************/

pgd_t *get_pgd(pgd_t * pgdir, uintptr_t la, bool create)
{
	return &pgdir[PGX(la)];
80017320:	00051582 	srl	v0,a1,0x16
80017324:	00021080 	sll	v0,v0,0x2
get_pmd():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:69
		ptep_set_accessed(pudp);
		ptep_set_dirty(pudp);
	}
	return &((pmd_t *) KADDR(PUD_ADDR(*pudp)))[PMX(la)];
#endif /* PMXSHIFT == PUXSHIFT */
}
80017328:	03e00008 	jr	ra
8001732c:	00821021 	addu	v0,a0,v0

80017330 <get_pte>:
get_pte():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:72

pte_t *get_pte(pgd_t * pgdir, uintptr_t la, bool create)
{
80017330:	27bdffd8 	addiu	sp,sp,-40
80017334:	afb00014 	sw	s0,20(sp)
get_pgd():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:16
 * Page table operations
 **************************************************/

pgd_t *get_pgd(pgd_t * pgdir, uintptr_t la, bool create)
{
	return &pgdir[PGX(la)];
80017338:	00058582 	srl	s0,a1,0x16
8001733c:	00108080 	sll	s0,s0,0x2
80017340:	00908021 	addu	s0,a0,s0
get_pte():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:72
	return &((pmd_t *) KADDR(PUD_ADDR(*pudp)))[PMX(la)];
#endif /* PMXSHIFT == PUXSHIFT */
}

pte_t *get_pte(pgd_t * pgdir, uintptr_t la, bool create)
{
80017344:	afb10018 	sw	s1,24(sp)
80017348:	afbf0024 	sw	ra,36(sp)
8001734c:	afb30020 	sw	s3,32(sp)
80017350:	afb2001c 	sw	s2,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:79
#if PTXSHIFT == PMXSHIFT
	printk( "PMXSHIFT is defined as:0x%x\n", PMXSHIFT );
	return get_pmd(pgdir, la, create);
#else /* PTXSHIFT == PMXSHIFT */
	pmd_t *pmdp;
	if ((pmdp = get_pmd(pgdir, la, create)) == NULL) {
80017354:	12000032 	beqz	s0,80017420 <get_pte+0xf0>
80017358:	00a08821 	move	s1,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:491
	/* we have modified the PTE of the original
	 * process, so invalidate TLB */
	tlb_invalidate_all();
#endif
	return 0;
}
8001735c:	8e130000 	lw	s3,0(s0)
ptep_present():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:26
80017360:	32620001 	andi	v0,s3,0x1
get_pte():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:82
#else /* PTXSHIFT == PMXSHIFT */
	pmd_t *pmdp;
	if ((pmdp = get_pmd(pgdir, la, create)) == NULL) {
		return NULL;
	}
	if (!ptep_present(pmdp)) {
80017364:	5440001b 	bnezl	v0,800173d4 <get_pte+0xa4>
80017368:	3c128015 	lui	s2,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:84
		struct Page *page;
		if (!create || (page = alloc_page()) == NULL) {
8001736c:	10c0002d 	beqz	a2,80017424 <get_pte+0xf4>
80017370:	8fbf0024 	lw	ra,36(sp)
80017374:	0c007425 	jal	8001d094 <alloc_pages>
80017378:	24040001 	li	a0,1
8001737c:	10400028 	beqz	v0,80017420 <get_pte+0xf0>
80017380:	3c038015 	lui	v1,0x8015
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
80017384:	8c6377bc 	lw	v1,30652(v1)
get_pte():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:89
			return NULL;
		}
		set_page_ref(page, 1);
		uintptr_t pa = page2pa(page);
		memset(KADDR(pa), 0, PGSIZE);
80017388:	3c128015 	lui	s2,0x8015
8001738c:	8e447770 	lw	a0,30576(s2)
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
80017390:	00431823 	subu	v1,v0,v1
80017394:	00031943 	sra	v1,v1,0x5
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
80017398:	00031b00 	sll	v1,v1,0xc
get_pte():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:89
8001739c:	00032b02 	srl	a1,v1,0xc
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
800173a0:	3c138000 	lui	s3,0x8000
get_pte():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:89
800173a4:	00a4202b 	sltu	a0,a1,a0
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
800173a8:	26731000 	addiu	s3,s3,4096
atomic_set():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:34
 *
 * Atomically sets the value of @v to @i.
 * */
static __always_inline void atomic_set(atomic_t * v, int i)
{
	v->counter = i;
800173ac:	24050001 	li	a1,1
800173b0:	ac450000 	sw	a1,0(v0)
get_pte():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:89
800173b4:	10800029 	beqz	a0,8001745c <get_pte+0x12c>
800173b8:	00739821 	addu	s3,v1,s3
800173bc:	02602021 	move	a0,s3
800173c0:	00002821 	move	a1,zero
800173c4:	24061000 	li	a2,4096
800173c8:	0c005c52 	jal	80017148 <memset>
800173cc:	36730067 	ori	s3,s3,0x67
800173d0:	ae130000 	sw	s3,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:104
		ptep_set_dirty(pmdp);
#else
#warning ARM9 PDE does not have access field
#endif
	}
	return &((pte_t *) KADDR(PMD_ADDR(*pmdp)))[PTX(la)];
800173d4:	2402f000 	li	v0,-4096
800173d8:	02629824 	and	s3,s3,v0
800173dc:	3c027fff 	lui	v0,0x7fff
800173e0:	8e437770 	lw	v1,30576(s2)
800173e4:	3442f000 	ori	v0,v0,0xf000
800173e8:	02621021 	addu	v0,s3,v0
800173ec:	00021302 	srl	v0,v0,0xc
800173f0:	0043102b 	sltu	v0,v0,v1
800173f4:	10400012 	beqz	v0,80017440 <get_pte+0x110>
800173f8:	8fbf0024 	lw	ra,36(sp)
800173fc:	7e224b00 	ext	v0,s1,0xc,0xa
80017400:	00021080 	sll	v0,v0,0x2
80017404:	02621021 	addu	v0,s3,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:106
#endif /* PTXSHIFT == PMXSHIFT */
}
80017408:	8fb2001c 	lw	s2,28(sp)
8001740c:	8fb30020 	lw	s3,32(sp)
80017410:	8fb10018 	lw	s1,24(sp)
80017414:	8fb00014 	lw	s0,20(sp)
80017418:	03e00008 	jr	ra
8001741c:	27bd0028 	addiu	sp,sp,40
80017420:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:85
		return NULL;
	}
	if (!ptep_present(pmdp)) {
		struct Page *page;
		if (!create || (page = alloc_page()) == NULL) {
			return NULL;
80017424:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:106
#warning ARM9 PDE does not have access field
#endif
	}
	return &((pte_t *) KADDR(PMD_ADDR(*pmdp)))[PTX(la)];
#endif /* PTXSHIFT == PMXSHIFT */
}
80017428:	8fb30020 	lw	s3,32(sp)
8001742c:	8fb2001c 	lw	s2,28(sp)
80017430:	8fb10018 	lw	s1,24(sp)
80017434:	8fb00014 	lw	s0,20(sp)
80017438:	03e00008 	jr	ra
8001743c:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:104
		ptep_set_dirty(pmdp);
#else
#warning ARM9 PDE does not have access field
#endif
	}
	return &((pte_t *) KADDR(PMD_ADDR(*pmdp)))[PTX(la)];
80017440:	3c048002 	lui	a0,0x8002
80017444:	3c068002 	lui	a2,0x8002
80017448:	248439f8 	addiu	a0,a0,14840
8001744c:	24050068 	li	a1,104
80017450:	24c62a74 	addiu	a2,a2,10868
80017454:	0c006b0b 	jal	8001ac2c <__panic>
80017458:	02603821 	move	a3,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:89
		if (!create || (page = alloc_page()) == NULL) {
			return NULL;
		}
		set_page_ref(page, 1);
		uintptr_t pa = page2pa(page);
		memset(KADDR(pa), 0, PGSIZE);
8001745c:	3c048002 	lui	a0,0x8002
80017460:	3c068002 	lui	a2,0x8002
80017464:	248439f8 	addiu	a0,a0,14840
80017468:	24050059 	li	a1,89
8001746c:	24c62a74 	addiu	a2,a2,10868
80017470:	0c006b0b 	jal	8001ac2c <__panic>
80017474:	02603821 	move	a3,s3

80017478 <get_page>:
get_page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:116
 * @param la linear address
 * @param ptep_store table entry stored if not NULL
 * @return @la's corresponding page descriptor
 */
struct Page *get_page(pgd_t * pgdir, uintptr_t la, pte_t ** ptep_store)
{
80017478:	27bdffe8 	addiu	sp,sp,-24
8001747c:	afb00010 	sw	s0,16(sp)
80017480:	00c08021 	move	s0,a2
80017484:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:117
	pte_t *ptep = get_pte(pgdir, la, 0);
80017488:	0c005ccc 	jal	80017330 <get_pte>
8001748c:	00003021 	move	a2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:118
	if (ptep_store != NULL) {
80017490:	56000001 	bnezl	s0,80017498 <get_page+0x20>
80017494:	ae020000 	sw	v0,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:121
		*ptep_store = ptep;
	}
	if (ptep != NULL && ptep_present(ptep)) {
80017498:	10400014 	beqz	v0,800174ec <get_page+0x74>
8001749c:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:491
	/* we have modified the PTE of the original
	 * process, so invalidate TLB */
	tlb_invalidate_all();
#endif
	return 0;
}
800174a0:	8c420000 	lw	v0,0(v0)
ptep_present():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:26
800174a4:	30430001 	andi	v1,v0,0x1
get_page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:121
{
	pte_t *ptep = get_pte(pgdir, la, 0);
	if (ptep_store != NULL) {
		*ptep_store = ptep;
	}
	if (ptep != NULL && ptep_present(ptep)) {
800174a8:	10600010 	beqz	v1,800174ec <get_page+0x74>
800174ac:	3c038015 	lui	v1,0x8015
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
800174b0:	3c047fff 	lui	a0,0x7fff
800174b4:	8c637770 	lw	v1,30576(v1)
800174b8:	3484f000 	ori	a0,a0,0xf000
800174bc:	00441021 	addu	v0,v0,a0
800174c0:	00021302 	srl	v0,v0,0xc
800174c4:	0043182b 	sltu	v1,v0,v1
800174c8:	1060000c 	beqz	v1,800174fc <get_page+0x84>
800174cc:	3c038015 	lui	v1,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
		panic("pa2page called with invalid pa");
	}
	return &pages[PPN(pa)];
800174d0:	8c6377bc 	lw	v1,30652(v1)
get_page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:125
		return pa2page(*ptep);
	}
	return NULL;
}
800174d4:	8fbf0014 	lw	ra,20(sp)
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
800174d8:	00021140 	sll	v0,v0,0x5
800174dc:	00621021 	addu	v0,v1,v0
get_page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:125
800174e0:	8fb00010 	lw	s0,16(sp)
800174e4:	03e00008 	jr	ra
800174e8:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:124
		*ptep_store = ptep;
	}
	if (ptep != NULL && ptep_present(ptep)) {
		return pa2page(*ptep);
	}
	return NULL;
800174ec:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:125
}
800174f0:	8fb00010 	lw	s0,16(sp)
800174f4:	03e00008 	jr	ra
800174f8:	27bd0018 	addiu	sp,sp,24
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
800174fc:	0c007f70 	jal	8001fdc0 <pa2page.part.7>
80017500:	00000000 	nop

80017504 <page_remove_pte>:
page_remove_pte():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:491
	/* we have modified the PTE of the original
	 * process, so invalidate TLB */
	tlb_invalidate_all();
#endif
	return 0;
}
80017504:	8cc20000 	lw	v0,0(a2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:136
 * @param la logical address of the page to be removed
 * @param page table entry of the page to be removed
 * note: PT is changed, so the TLB need to be invalidate 
 */
void page_remove_pte(pgd_t * pgdir, uintptr_t la, pte_t * ptep)
{
80017508:	27bdffd0 	addiu	sp,sp,-48
8001750c:	afb10020 	sw	s1,32(sp)
ptep_present():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:26
80017510:	30430001 	andi	v1,v0,0x1
page_remove_pte():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:136
80017514:	afb0001c 	sw	s0,28(sp)
80017518:	afbf002c 	sw	ra,44(sp)
8001751c:	afb30028 	sw	s3,40(sp)
80017520:	afb20024 	sw	s2,36(sp)
80017524:	00808821 	move	s1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:137
	if (ptep_present(ptep)) {
80017528:	1460000a 	bnez	v1,80017554 <page_remove_pte+0x50>
8001752c:	00a08021 	move	s0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:153
			}
			page_ref_dec(page);
		}
		ptep_unmap(ptep);
		mp_tlb_invalidate(pgdir, la);
	} else if (!ptep_invalid(ptep)) {
80017530:	54400001 	bnezl	v0,80017538 <page_remove_pte+0x34>
80017534:	acc00000 	sw	zero,0(a2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:159
#ifdef UCONFIG_SWAP
		swap_remove_entry(*ptep);
#endif
		ptep_unmap(ptep);
	}
}
80017538:	8fbf002c 	lw	ra,44(sp)
8001753c:	8fb30028 	lw	s3,40(sp)
80017540:	8fb20024 	lw	s2,36(sp)
80017544:	8fb10020 	lw	s1,32(sp)
80017548:	8fb0001c 	lw	s0,28(sp)
8001754c:	03e00008 	jr	ra
80017550:	27bd0030 	addiu	sp,sp,48
pte2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:119
static inline struct Page *pte2page(pte_t pte)
{
	if (!(pte & PTE_P)) {
		panic("pte2page called with invalid pte");
	}
	return pa2page(PTE_ADDR(pte));
80017554:	2403f000 	li	v1,-4096
80017558:	00431024 	and	v0,v0,v1
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
8001755c:	3c047fff 	lui	a0,0x7fff
80017560:	3c038015 	lui	v1,0x8015
80017564:	8c637770 	lw	v1,30576(v1)
80017568:	3484f000 	ori	a0,a0,0xf000
8001756c:	00441021 	addu	v0,v0,a0
80017570:	00021302 	srl	v0,v0,0xc
80017574:	0043182b 	sltu	v1,v0,v1
80017578:	1060006c 	beqz	v1,8001772c <page_remove_pte+0x228>
8001757c:	3c038015 	lui	v1,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
		panic("pa2page called with invalid pa");
	}
	return &pages[PPN(pa)];
80017580:	8c7277bc 	lw	s2,30652(v1)
80017584:	00021140 	sll	v0,v0,0x5
80017588:	02429021 	addu	s2,s2,v0
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8001758c:	40026000 	mfc0	v0,c0_status
80017590:	30420001 	andi	v0,v0,0x1
80017594:	1440001b 	bnez	v0,80017604 <page_remove_pte+0x100>
80017598:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8001759c:	8e530004 	lw	s3,4(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
800175a0:	7e730100 	ext	s3,s3,0x4,0x1
page_remove_pte():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:139
 */
void page_remove_pte(pgd_t * pgdir, uintptr_t la, pte_t * ptep)
{
	if (ptep_present(ptep)) {
		struct Page *page = pte2page(*ptep);
		if (!PageSwap(page)) {
800175a4:	1260001e 	beqz	s3,80017620 <page_remove_pte+0x11c>
800175a8:	00000000 	nop
ptep_dirty():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:114
	return *ptep & PTE_A;
}

static inline int ptep_dirty(pte_t * ptep)
{
	return *ptep & PTE_D;
800175ac:	8cc20000 	lw	v0,0(a2)
800175b0:	30420040 	andi	v0,v0,0x40
page_remove_pte():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:146
				//Don't free dma pages
				if (!PageIO(page))
					free_page(page);
			}
		} else {
			if (ptep_dirty(ptep)) {
800175b4:	1440003b 	bnez	v0,800176a4 <page_remove_pte+0x1a0>
800175b8:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
800175bc:	40026000 	mfc0	v0,c0_status
800175c0:	30420001 	andi	v0,v0,0x1
800175c4:	1440002e 	bnez	v0,80017680 <page_remove_pte+0x17c>
800175c8:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
800175cc:	8e420000 	lw	v0,0(s2)
800175d0:	2442ffff 	addiu	v0,v0,-1
800175d4:	ae420000 	sw	v0,0(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
800175d8:	8e420000 	lw	v0,0(s2)
page_remove_pte():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:152
				SetPageDirty(page);
			}
			page_ref_dec(page);
		}
		ptep_unmap(ptep);
		mp_tlb_invalidate(pgdir, la);
800175dc:	02202021 	move	a0,s1
800175e0:	02002821 	move	a1,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:159
#ifdef UCONFIG_SWAP
		swap_remove_entry(*ptep);
#endif
		ptep_unmap(ptep);
	}
}
800175e4:	8fbf002c 	lw	ra,44(sp)
800175e8:	8fb30028 	lw	s3,40(sp)
800175ec:	8fb20024 	lw	s2,36(sp)
800175f0:	8fb10020 	lw	s1,32(sp)
800175f4:	8fb0001c 	lw	s0,28(sp)
ptep_unmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:16
	*ptep = (pa | PTE_P);
}

static inline void ptep_unmap(pte_t * ptep)
{
	*ptep = 0;
800175f8:	acc00000 	sw	zero,0(a2)
page_remove_pte():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:152
				SetPageDirty(page);
			}
			page_ref_dec(page);
		}
		ptep_unmap(ptep);
		mp_tlb_invalidate(pgdir, la);
800175fc:	08007c7b 	j	8001f1ec <mp_tlb_invalidate>
80017600:	27bd0030 	addiu	sp,sp,48
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80017604:	0c006d04 	jal	8001b410 <intr_disable>
80017608:	afa60010 	sw	a2,16(sp)
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8001760c:	8e530004 	lw	s3,4(s2)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80017610:	0c006d00 	jal	8001b400 <intr_enable>
80017614:	7e730100 	ext	s3,s3,0x4,0x1
80017618:	08005d69 	j	800175a4 <page_remove_pte+0xa0>
8001761c:	8fa60010 	lw	a2,16(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80017620:	40026000 	mfc0	v0,c0_status
80017624:	30420001 	andi	v0,v0,0x1
80017628:	14400030 	bnez	v0,800176ec <page_remove_pte+0x1e8>
8001762c:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
80017630:	8e420000 	lw	v0,0(s2)
80017634:	2442ffff 	addiu	v0,v0,-1
80017638:	ae420000 	sw	v0,0(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
8001763c:	8e420000 	lw	v0,0(s2)
page_remove_pte():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:140
void page_remove_pte(pgd_t * pgdir, uintptr_t la, pte_t * ptep)
{
	if (ptep_present(ptep)) {
		struct Page *page = pte2page(*ptep);
		if (!PageSwap(page)) {
			if (page_ref_dec(page) == 0) {
80017640:	1440ffe7 	bnez	v0,800175e0 <page_remove_pte+0xdc>
80017644:	02202021 	move	a0,s1
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
80017648:	40026000 	mfc0	v0,c0_status
8001764c:	30420001 	andi	v0,v0,0x1
80017650:	1440002f 	bnez	v0,80017710 <page_remove_pte+0x20c>
80017654:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
80017658:	8e530004 	lw	s3,4(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8001765c:	7e730180 	ext	s3,s3,0x6,0x1
page_remove_pte():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:142
				//Don't free dma pages
				if (!PageIO(page))
80017660:	1660ffdf 	bnez	s3,800175e0 <page_remove_pte+0xdc>
80017664:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:143
					free_page(page);
80017668:	02402021 	move	a0,s2
8001766c:	24050001 	li	a1,1
80017670:	0c007441 	jal	8001d104 <free_pages>
80017674:	afa60010 	sw	a2,16(sp)
80017678:	08005d77 	j	800175dc <page_remove_pte+0xd8>
8001767c:	8fa60010 	lw	a2,16(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80017680:	0c006d04 	jal	8001b410 <intr_disable>
80017684:	afa60010 	sw	a2,16(sp)
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
80017688:	8e420000 	lw	v0,0(s2)
8001768c:	2442ffff 	addiu	v0,v0,-1
80017690:	ae420000 	sw	v0,0(s2)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80017694:	0c006d00 	jal	8001b400 <intr_enable>
80017698:	00000000 	nop
8001769c:	08005d76 	j	800175d8 <page_remove_pte+0xd4>
800176a0:	8fa60010 	lw	a2,16(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
800176a4:	40026000 	mfc0	v0,c0_status
800176a8:	30420001 	andi	v0,v0,0x1
800176ac:	14400006 	bnez	v0,800176c8 <page_remove_pte+0x1c4>
800176b0:	00000000 	nop
set_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:185
 * */
static __always_inline void set_bit(int nr, volatile uint32_t * addr)
{
	int intr_flag;
	local_intr_save(intr_flag);
	*addr |= (1 << nr);
800176b4:	8e420004 	lw	v0,4(s2)
800176b8:	34420008 	ori	v0,v0,0x8
800176bc:	ae420004 	sw	v0,4(s2)
800176c0:	08005d6f 	j	800175bc <page_remove_pte+0xb8>
800176c4:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
800176c8:	0c006d04 	jal	8001b410 <intr_disable>
800176cc:	afa60010 	sw	a2,16(sp)
set_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:185
800176d0:	8e420004 	lw	v0,4(s2)
800176d4:	34420008 	ori	v0,v0,0x8
800176d8:	ae420004 	sw	v0,4(s2)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
800176dc:	0c006d00 	jal	8001b400 <intr_enable>
800176e0:	00000000 	nop
800176e4:	08005d6f 	j	800175bc <page_remove_pte+0xb8>
800176e8:	8fa60010 	lw	a2,16(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
800176ec:	0c006d04 	jal	8001b410 <intr_disable>
800176f0:	afa60010 	sw	a2,16(sp)
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
800176f4:	8e420000 	lw	v0,0(s2)
800176f8:	2442ffff 	addiu	v0,v0,-1
800176fc:	ae420000 	sw	v0,0(s2)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80017700:	0c006d00 	jal	8001b400 <intr_enable>
80017704:	00000000 	nop
80017708:	08005d8f 	j	8001763c <page_remove_pte+0x138>
8001770c:	8fa60010 	lw	a2,16(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
80017710:	0c006d04 	jal	8001b410 <intr_disable>
80017714:	afa60010 	sw	a2,16(sp)
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
80017718:	8e530004 	lw	s3,4(s2)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8001771c:	0c006d00 	jal	8001b400 <intr_enable>
80017720:	7e730180 	ext	s3,s3,0x6,0x1
80017724:	08005d98 	j	80017660 <page_remove_pte+0x15c>
80017728:	8fa60010 	lw	a2,16(sp)
pte2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
8001772c:	0c007f70 	jal	8001fdc0 <pa2page.part.7>
80017730:	00000000 	nop

80017734 <page_insert>:
page_insert():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:170
 * @param la logical address of the page
 * @param perm permission of the page
 * @return 0 on success and error code when failed
 */
int page_insert(pgd_t * pgdir, struct Page *page, uintptr_t la, pte_perm_t perm)
{
80017734:	27bdffd0 	addiu	sp,sp,-48
80017738:	afb1001c 	sw	s1,28(sp)
8001773c:	00c08821 	move	s1,a2
80017740:	afb00018 	sw	s0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:172

	pte_t *ptep = get_pte(pgdir, la, 1);
80017744:	24060001 	li	a2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:170
 * @param la logical address of the page
 * @param perm permission of the page
 * @return 0 on success and error code when failed
 */
int page_insert(pgd_t * pgdir, struct Page *page, uintptr_t la, pte_perm_t perm)
{
80017748:	00a08021 	move	s0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:172

	pte_t *ptep = get_pte(pgdir, la, 1);
8001774c:	02202821 	move	a1,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:170
 * @param la logical address of the page
 * @param perm permission of the page
 * @return 0 on success and error code when failed
 */
int page_insert(pgd_t * pgdir, struct Page *page, uintptr_t la, pte_perm_t perm)
{
80017750:	afb30024 	sw	s3,36(sp)
80017754:	afb20020 	sw	s2,32(sp)
80017758:	afbf002c 	sw	ra,44(sp)
8001775c:	afb40028 	sw	s4,40(sp)
80017760:	00809021 	move	s2,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:172

	pte_t *ptep = get_pte(pgdir, la, 1);
80017764:	0c005ccc 	jal	80017330 <get_pte>
80017768:	00e09821 	move	s3,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:178
	/*kprintf("page2kva(p):0x%08x",page2kva(page));
	kprintf("\n\r");
	kprintf("*(int*)(page2kva(p)+0x1100):0x%08x",*(int*)(page2kva(page)+0x1100));
		kprintf("\n\r");
	kprintf("*(int*)(0x1100):0x%08x",*(int*)(0x1100));*/
	if (ptep == NULL) {
8001776c:	50400024 	beqzl	v0,80017800 <page_insert+0xcc>
80017770:	2402fff4 	li	v0,-12
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80017774:	40036000 	mfc0	v1,c0_status
80017778:	30630001 	andi	v1,v1,0x1
8001777c:	14600028 	bnez	v1,80017820 <page_insert+0xec>
80017780:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
80017784:	8e030000 	lw	v1,0(s0)
80017788:	24630001 	addiu	v1,v1,1
8001778c:	ae030000 	sw	v1,0(s0)
page_insert():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:182
		return -E_NO_MEM;
	}
	page_ref_inc(page);
	if (*ptep != 0) {
80017790:	8c430000 	lw	v1,0(v0)
page_ref_inc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
80017794:	8e040000 	lw	a0,0(s0)
page_insert():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:182
80017798:	1060000b 	beqz	v1,800177c8 <page_insert+0x94>
8001779c:	3c148015 	lui	s4,0x8015
ptep_present():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:26
	return (*ptep == 0);
}

static inline int ptep_present(pte_t * ptep)
{
	return (*ptep & PTE_P);
800177a0:	30640001 	andi	a0,v1,0x1
page_insert():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:183
		if (ptep_present(ptep) && pte2page(*ptep) == page) {
800177a4:	14800027 	bnez	a0,80017844 <page_insert+0x110>
800177a8:	2404f000 	li	a0,-4096
800177ac:	3c148015 	lui	s4,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:187
			page_ref_dec(page);
			goto out;
		}
		page_remove_pte(pgdir, la, ptep);
800177b0:	00403021 	move	a2,v0
800177b4:	02402021 	move	a0,s2
800177b8:	02202821 	move	a1,s1
800177bc:	0c005d41 	jal	80017504 <page_remove_pte>
800177c0:	afa20010 	sw	v0,16(sp)
800177c4:	8fa20010 	lw	v0,16(sp)
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
800177c8:	8e8377bc 	lw	v1,30652(s4)
ptep_map():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:11

typedef pte_t pte_perm_t;

static inline void ptep_map(pte_t * ptep, uintptr_t pa)
{
	*ptep = (pa | PTE_P);
800177cc:	36730001 	ori	s3,s3,0x1
page_insert():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:198
	kprintf("*(int*)(page2kva(p)+0x1100):0x%08x",*(int*)(page2kva(page)+0x1100));
		kprintf("\n\r");
	kprintf("*(int*)(0x1100):0x%08x",*(int*)(0x1100));*/
	ptep_map(ptep, page2pa(page));
	ptep_set_perm(ptep, perm);
	mp_tlb_update(pgdir, la);
800177d0:	02402021 	move	a0,s2
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
800177d4:	02038023 	subu	s0,s0,v1
800177d8:	00108143 	sra	s0,s0,0x5
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
800177dc:	3c038000 	lui	v1,0x8000
800177e0:	24631000 	addiu	v1,v1,4096
800177e4:	00108300 	sll	s0,s0,0xc
800177e8:	02038021 	addu	s0,s0,v1
ptep_set_perm():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:94
	return (*ptep) & perm;
}

static inline void ptep_set_perm(pte_t * ptep, pte_perm_t perm)
{
	*ptep |= perm;
800177ec:	02709825 	or	s3,s3,s0
800177f0:	ac530000 	sw	s3,0(v0)
page_insert():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:198
800177f4:	0c007c7d 	jal	8001f1f4 <mp_tlb_update>
800177f8:	02202821 	move	a1,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:199
	return 0;
800177fc:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:201

}
80017800:	8fbf002c 	lw	ra,44(sp)
80017804:	8fb40028 	lw	s4,40(sp)
80017808:	8fb30024 	lw	s3,36(sp)
8001780c:	8fb20020 	lw	s2,32(sp)
80017810:	8fb1001c 	lw	s1,28(sp)
80017814:	8fb00018 	lw	s0,24(sp)
80017818:	03e00008 	jr	ra
8001781c:	27bd0030 	addiu	sp,sp,48
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80017820:	0c006d04 	jal	8001b410 <intr_disable>
80017824:	afa20010 	sw	v0,16(sp)
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
80017828:	8e030000 	lw	v1,0(s0)
8001782c:	24630001 	addiu	v1,v1,1
80017830:	ae030000 	sw	v1,0(s0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80017834:	0c006d00 	jal	8001b400 <intr_enable>
80017838:	00000000 	nop
8001783c:	08005de4 	j	80017790 <page_insert+0x5c>
80017840:	8fa20010 	lw	v0,16(sp)
pte2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:119
static inline struct Page *pte2page(pte_t pte)
{
	if (!(pte & PTE_P)) {
		panic("pte2page called with invalid pte");
	}
	return pa2page(PTE_ADDR(pte));
80017844:	00641824 	and	v1,v1,a0
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
80017848:	3c057fff 	lui	a1,0x7fff
8001784c:	3c048015 	lui	a0,0x8015
80017850:	8c847770 	lw	a0,30576(a0)
80017854:	34a5f000 	ori	a1,a1,0xf000
80017858:	00651821 	addu	v1,v1,a1
8001785c:	00031b02 	srl	v1,v1,0xc
80017860:	0064202b 	sltu	a0,v1,a0
80017864:	1080001b 	beqz	a0,800178d4 <page_insert+0x1a0>
80017868:	3c148015 	lui	s4,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
		panic("pa2page called with invalid pa");
	}
	return &pages[PPN(pa)];
8001786c:	8e8477bc 	lw	a0,30652(s4)
80017870:	00031940 	sll	v1,v1,0x5
80017874:	00831821 	addu	v1,a0,v1
page_insert():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:183
	if (ptep == NULL) {
		return -E_NO_MEM;
	}
	page_ref_inc(page);
	if (*ptep != 0) {
		if (ptep_present(ptep) && pte2page(*ptep) == page) {
80017878:	1603ffce 	bne	s0,v1,800177b4 <page_insert+0x80>
8001787c:	00403021 	move	a2,v0
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80017880:	40036000 	mfc0	v1,c0_status
80017884:	30630001 	andi	v1,v1,0x1
80017888:	14600007 	bnez	v1,800178a8 <page_insert+0x174>
8001788c:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
80017890:	8e030000 	lw	v1,0(s0)
80017894:	2463ffff 	addiu	v1,v1,-1
80017898:	ae030000 	sw	v1,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
8001789c:	8e030000 	lw	v1,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
800178a0:	08005df3 	j	800177cc <page_insert+0x98>
800178a4:	8e8377bc 	lw	v1,30652(s4)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
800178a8:	0c006d04 	jal	8001b410 <intr_disable>
800178ac:	afa20010 	sw	v0,16(sp)
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
800178b0:	8e030000 	lw	v1,0(s0)
800178b4:	2463ffff 	addiu	v1,v1,-1
800178b8:	ae030000 	sw	v1,0(s0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
800178bc:	0c006d00 	jal	8001b400 <intr_enable>
800178c0:	00000000 	nop
800178c4:	8fa20010 	lw	v0,16(sp)
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
800178c8:	8e030000 	lw	v1,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
800178cc:	08005df3 	j	800177cc <page_insert+0x98>
800178d0:	8e8377bc 	lw	v1,30652(s4)
pte2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
800178d4:	0c007f70 	jal	8001fdc0 <pa2page.part.7>
800178d8:	00000000 	nop

800178dc <page_remove>:
page_remove():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:228
 * page_remove - free an Page which is related linear address la and has an validated pte
 * @param pgdir page directory
 * @param la logical address of the page to be removed
 */
void page_remove(pgd_t * pgdir, uintptr_t la)
{
800178dc:	27bdffe0 	addiu	sp,sp,-32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:229
	pte_t *ptep = get_pte(pgdir, la, 0);
800178e0:	00003021 	move	a2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:228
 * page_remove - free an Page which is related linear address la and has an validated pte
 * @param pgdir page directory
 * @param la logical address of the page to be removed
 */
void page_remove(pgd_t * pgdir, uintptr_t la)
{
800178e4:	afb10018 	sw	s1,24(sp)
800178e8:	afb00014 	sw	s0,20(sp)
800178ec:	afbf001c 	sw	ra,28(sp)
800178f0:	00808821 	move	s1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:229
	pte_t *ptep = get_pte(pgdir, la, 0);
800178f4:	0c005ccc 	jal	80017330 <get_pte>
800178f8:	00a08021 	move	s0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:230
	if (ptep != NULL) {
800178fc:	10400008 	beqz	v0,80017920 <page_remove+0x44>
80017900:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:231
		page_remove_pte(pgdir, la, ptep);
80017904:	02002821 	move	a1,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:233
	}
}
80017908:	8fbf001c 	lw	ra,28(sp)
8001790c:	8fb10018 	lw	s1,24(sp)
80017910:	8fb00014 	lw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:231
 */
void page_remove(pgd_t * pgdir, uintptr_t la)
{
	pte_t *ptep = get_pte(pgdir, la, 0);
	if (ptep != NULL) {
		page_remove_pte(pgdir, la, ptep);
80017914:	00403021 	move	a2,v0
80017918:	08005d41 	j	80017504 <page_remove_pte>
8001791c:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:233
	}
}
80017920:	8fbf001c 	lw	ra,28(sp)
80017924:	8fb10018 	lw	s1,24(sp)
80017928:	8fb00014 	lw	s0,20(sp)
8001792c:	03e00008 	jr	ra
80017930:	27bd0020 	addiu	sp,sp,32

80017934 <pgdir_alloc_page>:
pgdir_alloc_page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:245
 * @param la       logical address for the page to be allocated
 * @param perm     permission of the page
 * @return         the page descriptor of the allocated
 */
struct Page *pgdir_alloc_page(pgd_t * pgdir, uintptr_t la, uint32_t perm)
{
80017934:	27bdffd8 	addiu	sp,sp,-40
80017938:	afb30020 	sw	s3,32(sp)
8001793c:	00809821 	move	s3,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:246
	struct Page *page = alloc_page();
80017940:	24040001 	li	a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:245
 * @param la       logical address for the page to be allocated
 * @param perm     permission of the page
 * @return         the page descriptor of the allocated
 */
struct Page *pgdir_alloc_page(pgd_t * pgdir, uintptr_t la, uint32_t perm)
{
80017944:	afb2001c 	sw	s2,28(sp)
80017948:	afb10018 	sw	s1,24(sp)
8001794c:	afb00014 	sw	s0,20(sp)
80017950:	afbf0024 	sw	ra,36(sp)
80017954:	00a09021 	move	s2,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:246
	struct Page *page = alloc_page();
80017958:	0c007425 	jal	8001d094 <alloc_pages>
8001795c:	00c08821 	move	s1,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:247
	if (page != NULL) {
80017960:	10400019 	beqz	v0,800179c8 <pgdir_alloc_page+0x94>
80017964:	00408021 	move	s0,v0
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
80017968:	3c028015 	lui	v0,0x8015
8001796c:	8c4277bc 	lw	v0,30652(v0)
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
80017970:	3c038015 	lui	v1,0x8015
80017974:	8c637770 	lw	v1,30576(v1)
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
80017978:	02021023 	subu	v0,s0,v0
8001797c:	00021143 	sra	v0,v0,0x5
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
80017980:	00021300 	sll	v0,v0,0xc
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
80017984:	00022302 	srl	a0,v0,0xc
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
	return page - pages;
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
80017988:	3c078000 	lui	a3,0x8000
8001798c:	24e71000 	addiu	a3,a3,4096
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
80017990:	0083182b 	sltu	v1,a0,v1
80017994:	10600018 	beqz	v1,800179f8 <pgdir_alloc_page+0xc4>
80017998:	00473821 	addu	a3,v0,a3
pgdir_alloc_page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:249
		//zero it!
		memset(page2kva(page), 0, PGSIZE);
8001799c:	00e02021 	move	a0,a3
800179a0:	00002821 	move	a1,zero
800179a4:	0c005c52 	jal	80017148 <memset>
800179a8:	24061000 	li	a2,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:250
		if (page_insert(pgdir, page, la, perm) != 0) {
800179ac:	02602021 	move	a0,s3
800179b0:	02002821 	move	a1,s0
800179b4:	02403021 	move	a2,s2
800179b8:	0c005dcd 	jal	80017734 <page_insert>
800179bc:	02203821 	move	a3,s1
800179c0:	14400009 	bnez	v0,800179e8 <pgdir_alloc_page+0xb4>
800179c4:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:256
			free_page(page);
			return NULL;
		}
	}
	return page;
}
800179c8:	8fbf0024 	lw	ra,36(sp)
800179cc:	02001021 	move	v0,s0
800179d0:	8fb30020 	lw	s3,32(sp)
800179d4:	8fb2001c 	lw	s2,28(sp)
800179d8:	8fb10018 	lw	s1,24(sp)
800179dc:	8fb00014 	lw	s0,20(sp)
800179e0:	03e00008 	jr	ra
800179e4:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:251
	struct Page *page = alloc_page();
	if (page != NULL) {
		//zero it!
		memset(page2kva(page), 0, PGSIZE);
		if (page_insert(pgdir, page, la, perm) != 0) {
			free_page(page);
800179e8:	0c007441 	jal	8001d104 <free_pages>
800179ec:	24050001 	li	a1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:252
			return NULL;
800179f0:	08005e72 	j	800179c8 <pgdir_alloc_page+0x94>
800179f4:	00008021 	move	s0,zero
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
800179f8:	3c048002 	lui	a0,0x8002
800179fc:	3c068002 	lui	a2,0x8002
80017a00:	248429ec 	addiu	a0,a0,10732
80017a04:	2405006a 	li	a1,106
80017a08:	0c006b0b 	jal	8001ac2c <__panic>
80017a0c:	24c62a74 	addiu	a2,a2,10868

80017a10 <unmap_range>:
unmap_range():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:345
		}
		start += size, la += PUSIZE;
	} while (start != 0 && start < end);
}

void unmap_range(pgd_t * pgdir, uintptr_t start, uintptr_t end)
80017a10:	00c51025 	or	v0,a2,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:346
{
80017a14:	27bdffc8 	addiu	sp,sp,-56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:345
		}
		start += size, la += PUSIZE;
	} while (start != 0 && start < end);
}

void unmap_range(pgd_t * pgdir, uintptr_t start, uintptr_t end)
80017a18:	30420fff 	andi	v0,v0,0xfff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:346
{
80017a1c:	afbe0030 	sw	s8,48(sp)
80017a20:	afb50024 	sw	s5,36(sp)
80017a24:	afb10014 	sw	s1,20(sp)
80017a28:	afbf0034 	sw	ra,52(sp)
80017a2c:	afb7002c 	sw	s7,44(sp)
80017a30:	afb60028 	sw	s6,40(sp)
80017a34:	afb40020 	sw	s4,32(sp)
80017a38:	afb3001c 	sw	s3,28(sp)
80017a3c:	afb20018 	sw	s2,24(sp)
80017a40:	afb00010 	sw	s0,16(sp)
80017a44:	00a08821 	move	s1,a1
80017a48:	00c0a821 	move	s5,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:347
	assert(start % PGSIZE == 0 && end % PGSIZE == 0);
80017a4c:	1440006d 	bnez	v0,80017c04 <unmap_range+0x1f4>
80017a50:	0080f021 	move	s8,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:348
	assert(USER_ACCESS(start, end));
80017a54:	00a6102b 	sltu	v0,a1,a2
80017a58:	10400062 	beqz	v0,80017be4 <unmap_range+0x1d4>
80017a5c:	3c028000 	lui	v0,0x8000
80017a60:	24420001 	addiu	v0,v0,1
80017a64:	00c2102b 	sltu	v0,a2,v0
80017a68:	1040005e 	beqz	v0,80017be4 <unmap_range+0x1d4>
80017a6c:	3c12ffc0 	lui	s2,0xffc0
unmap_range_pgd():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:332
static void unmap_range_pgd(pgd_t * pgd, uintptr_t start, uintptr_t end)
{
	size_t off, size;
	uintptr_t la = ROUNDDOWN(start, PUSIZE);
	do {
		off = start - la, size = PUSIZE - off;
80017a70:	3c170040 	lui	s7,0x40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:330
}

static void unmap_range_pgd(pgd_t * pgd, uintptr_t start, uintptr_t end)
{
	size_t off, size;
	uintptr_t la = ROUNDDOWN(start, PUSIZE);
80017a74:	00b29024 	and	s2,a1,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:336
	do {
		off = start - la, size = PUSIZE - off;
		if (size > end - start) {
			size = end - start;
		}
		pgd_t *pgdp = &pgd[PGX(la)];
80017a78:	00121582 	srl	v0,s2,0x16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:491
	/* we have modified the PTE of the original
	 * process, so invalidate TLB */
	tlb_invalidate_all();
#endif
	return 0;
}
80017a7c:	00021080 	sll	v0,v0,0x2
80017a80:	03c21021 	addu	v0,s8,v0
80017a84:	8c440000 	lw	a0,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:332
static void unmap_range_pgd(pgd_t * pgd, uintptr_t start, uintptr_t end)
{
	size_t off, size;
	uintptr_t la = ROUNDDOWN(start, PUSIZE);
	do {
		off = start - la, size = PUSIZE - off;
80017a88:	02328023 	subu	s0,s1,s2
80017a8c:	02f01823 	subu	v1,s7,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:333
		if (size > end - start) {
80017a90:	02b11023 	subu	v0,s5,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:332
static void unmap_range_pgd(pgd_t * pgd, uintptr_t start, uintptr_t end)
{
	size_t off, size;
	uintptr_t la = ROUNDDOWN(start, PUSIZE);
	do {
		off = start - la, size = PUSIZE - off;
80017a94:	0043b02b 	sltu	s6,v0,v1
80017a98:	0076100a 	movz	v0,v1,s6
ptep_present():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:26
	return (*ptep == 0);
}

static inline int ptep_present(pte_t * ptep)
{
	return (*ptep & PTE_P);
80017a9c:	30850001 	andi	a1,a0,0x1
unmap_range_pgd():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:337
		if (size > end - start) {
			size = end - start;
		}
		pgd_t *pgdp = &pgd[PGX(la)];
		if (ptep_present(pgdp)) {
80017aa0:	10a00028 	beqz	a1,80017b44 <unmap_range+0x134>
80017aa4:	0040b021 	move	s6,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:338
			unmap_range_pud(pgd, KADDR(PGD_ADDR(*pgdp)), la, off,
80017aa8:	2414f000 	li	s4,-4096
80017aac:	0094a024 	and	s4,a0,s4
80017ab0:	3c028015 	lui	v0,0x8015
80017ab4:	3c047fff 	lui	a0,0x7fff
80017ab8:	8c437770 	lw	v1,30576(v0)
80017abc:	3484f000 	ori	a0,a0,0xf000
80017ac0:	02841021 	addu	v0,s4,a0
80017ac4:	00021302 	srl	v0,v0,0xc
80017ac8:	0043102b 	sltu	v0,v0,v1
80017acc:	1040002f 	beqz	v0,80017b8c <unmap_range+0x17c>
80017ad0:	02d09821 	addu	s3,s6,s0
unmap_range_pte():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:266

static void
unmap_range_pte(pgd_t * pgdir, pte_t * pte, uintptr_t base, uintptr_t start,
		uintptr_t end)
{
	assert(start >= 0 && start < end && end <= PTSIZE);
80017ad4:	0213102b 	sltu	v0,s0,s3
80017ad8:	1040003a 	beqz	v0,80017bc4 <unmap_range+0x1b4>
80017adc:	3c030040 	lui	v1,0x40
80017ae0:	34630001 	ori	v1,v1,0x1
80017ae4:	0263102b 	sltu	v0,s3,v1
80017ae8:	10400036 	beqz	v0,80017bc4 <unmap_range+0x1b4>
80017aec:	02701025 	or	v0,s3,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:345
		}
		start += size, la += PUSIZE;
	} while (start != 0 && start < end);
}

void unmap_range(pgd_t * pgdir, uintptr_t start, uintptr_t end)
80017af0:	30420fff 	andi	v0,v0,0xfff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:267
static void
unmap_range_pte(pgd_t * pgdir, pte_t * pte, uintptr_t base, uintptr_t start,
		uintptr_t end)
{
	assert(start >= 0 && start < end && end <= PTSIZE);
	assert(start % PGSIZE == 0 && end % PGSIZE == 0);
80017af4:	10400008 	beqz	v0,80017b18 <unmap_range+0x108>
80017af8:	7e064b00 	ext	a2,s0,0xc,0xa
80017afc:	08005eea 	j	80017ba8 <unmap_range+0x198>
80017b00:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:274
		pte_t *ptep = &pte[PTX(start)];
		if (*ptep != 0) {
			page_remove_pte(pgdir, base + start, ptep);
		}
		start += PGSIZE;
	} while (start != 0 && start < end);
80017b04:	52000010 	beqzl	s0,80017b48 <unmap_range+0x138>
80017b08:	02368821 	addu	s1,s1,s6
80017b0c:	0213102b 	sltu	v0,s0,s3
80017b10:	1040000c 	beqz	v0,80017b44 <unmap_range+0x134>
80017b14:	7e064b00 	ext	a2,s0,0xc,0xa
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:269
		uintptr_t end)
{
	assert(start >= 0 && start < end && end <= PTSIZE);
	assert(start % PGSIZE == 0 && end % PGSIZE == 0);
	do {
		pte_t *ptep = &pte[PTX(start)];
80017b18:	00063080 	sll	a2,a2,0x2
80017b1c:	02863021 	addu	a2,s4,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:270
		if (*ptep != 0) {
80017b20:	8cc20000 	lw	v0,0(a2)
80017b24:	5040fff7 	beqzl	v0,80017b04 <unmap_range+0xf4>
80017b28:	26101000 	addiu	s0,s0,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:271
			page_remove_pte(pgdir, base + start, ptep);
80017b2c:	02122821 	addu	a1,s0,s2
80017b30:	03c02021 	move	a0,s8
80017b34:	0c005d41 	jal	80017504 <page_remove_pte>
80017b38:	26101000 	addiu	s0,s0,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:274
		}
		start += PGSIZE;
	} while (start != 0 && start < end);
80017b3c:	1600fff4 	bnez	s0,80017b10 <unmap_range+0x100>
80017b40:	0213102b 	sltu	v0,s0,s3
unmap_range_pgd():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:341
		pgd_t *pgdp = &pgd[PGX(la)];
		if (ptep_present(pgdp)) {
			unmap_range_pud(pgd, KADDR(PGD_ADDR(*pgdp)), la, off,
					off + size);
		}
		start += size, la += PUSIZE;
80017b44:	02368821 	addu	s1,s1,s6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:342
	} while (start != 0 && start < end);
80017b48:	12200004 	beqz	s1,80017b5c <unmap_range+0x14c>
80017b4c:	02579021 	addu	s2,s2,s7
80017b50:	0235102b 	sltu	v0,s1,s5
80017b54:	1440ffc9 	bnez	v0,80017a7c <unmap_range+0x6c>
80017b58:	00121582 	srl	v0,s2,0x16
unmap_range():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:350
void unmap_range(pgd_t * pgdir, uintptr_t start, uintptr_t end)
{
	assert(start % PGSIZE == 0 && end % PGSIZE == 0);
	assert(USER_ACCESS(start, end));
	unmap_range_pgd(pgdir, start, end);
}
80017b5c:	8fbf0034 	lw	ra,52(sp)
80017b60:	8fbe0030 	lw	s8,48(sp)
80017b64:	8fb7002c 	lw	s7,44(sp)
80017b68:	8fb60028 	lw	s6,40(sp)
80017b6c:	8fb50024 	lw	s5,36(sp)
80017b70:	8fb40020 	lw	s4,32(sp)
80017b74:	8fb3001c 	lw	s3,28(sp)
80017b78:	8fb20018 	lw	s2,24(sp)
80017b7c:	8fb10014 	lw	s1,20(sp)
80017b80:	8fb00010 	lw	s0,16(sp)
80017b84:	03e00008 	jr	ra
80017b88:	27bd0038 	addiu	sp,sp,56
unmap_range_pgd():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:338
		if (size > end - start) {
			size = end - start;
		}
		pgd_t *pgdp = &pgd[PGX(la)];
		if (ptep_present(pgdp)) {
			unmap_range_pud(pgd, KADDR(PGD_ADDR(*pgdp)), la, off,
80017b8c:	3c048002 	lui	a0,0x8002
80017b90:	3c068002 	lui	a2,0x8002
80017b94:	248439f8 	addiu	a0,a0,14840
80017b98:	24050152 	li	a1,338
80017b9c:	24c62a74 	addiu	a2,a2,10868
80017ba0:	0c006b0b 	jal	8001ac2c <__panic>
80017ba4:	02803821 	move	a3,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:267
static void
unmap_range_pte(pgd_t * pgdir, pte_t * pte, uintptr_t base, uintptr_t start,
		uintptr_t end)
{
	assert(start >= 0 && start < end && end <= PTSIZE);
	assert(start % PGSIZE == 0 && end % PGSIZE == 0);
80017ba8:	248439f8 	addiu	a0,a0,14840
80017bac:	2405010b 	li	a1,267
80017bb0:	3c068002 	lui	a2,0x8002
80017bb4:	3c078002 	lui	a3,0x8002
80017bb8:	24c60e28 	addiu	a2,a2,3624
80017bbc:	0c006b0b 	jal	8001ac2c <__panic>
80017bc0:	24e73144 	addiu	a3,a3,12612
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:266

static void
unmap_range_pte(pgd_t * pgdir, pte_t * pte, uintptr_t base, uintptr_t start,
		uintptr_t end)
{
	assert(start >= 0 && start < end && end <= PTSIZE);
80017bc4:	3c048002 	lui	a0,0x8002
80017bc8:	3c068002 	lui	a2,0x8002
80017bcc:	3c078002 	lui	a3,0x8002
80017bd0:	248439f8 	addiu	a0,a0,14840
80017bd4:	2405010a 	li	a1,266
80017bd8:	24c60e28 	addiu	a2,a2,3624
80017bdc:	0c006b0b 	jal	8001ac2c <__panic>
80017be0:	24e73a18 	addiu	a3,a3,14872
unmap_range():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:348
}

void unmap_range(pgd_t * pgdir, uintptr_t start, uintptr_t end)
{
	assert(start % PGSIZE == 0 && end % PGSIZE == 0);
	assert(USER_ACCESS(start, end));
80017be4:	3c048002 	lui	a0,0x8002
80017be8:	3c068002 	lui	a2,0x8002
80017bec:	3c078002 	lui	a3,0x8002
80017bf0:	248439f8 	addiu	a0,a0,14840
80017bf4:	2405015c 	li	a1,348
80017bf8:	24c60e28 	addiu	a2,a2,3624
80017bfc:	0c006b0b 	jal	8001ac2c <__panic>
80017c00:	24e73a00 	addiu	a3,a3,14848
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:347
	} while (start != 0 && start < end);
}

void unmap_range(pgd_t * pgdir, uintptr_t start, uintptr_t end)
{
	assert(start % PGSIZE == 0 && end % PGSIZE == 0);
80017c04:	3c048002 	lui	a0,0x8002
80017c08:	248439f8 	addiu	a0,a0,14840
80017c0c:	08005eec 	j	80017bb0 <unmap_range+0x1a0>
80017c10:	2405015b 	li	a1,347

80017c14 <exit_range>:
exit_range():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:398
		}
		start += PUSIZE;
	} while (start != 0 && start < end);
}

void exit_range(pgd_t * pgdir, uintptr_t start, uintptr_t end)
80017c14:	00c51025 	or	v0,a2,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:399
{
80017c18:	27bdffc8 	addiu	sp,sp,-56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:398
		}
		start += PUSIZE;
	} while (start != 0 && start < end);
}

void exit_range(pgd_t * pgdir, uintptr_t start, uintptr_t end)
80017c1c:	30420fff 	andi	v0,v0,0xfff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:399
{
80017c20:	afb30020 	sw	s3,32(sp)
80017c24:	afb2001c 	sw	s2,28(sp)
80017c28:	afbf0034 	sw	ra,52(sp)
80017c2c:	afb70030 	sw	s7,48(sp)
80017c30:	afb6002c 	sw	s6,44(sp)
80017c34:	afb50028 	sw	s5,40(sp)
80017c38:	afb40024 	sw	s4,36(sp)
80017c3c:	afb10018 	sw	s1,24(sp)
80017c40:	afb00014 	sw	s0,20(sp)
80017c44:	00c09021 	move	s2,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:400
	assert(start % PGSIZE == 0 && end % PGSIZE == 0);
80017c48:	14400041 	bnez	v0,80017d50 <exit_range+0x13c>
80017c4c:	00809821 	move	s3,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:401
	assert(USER_ACCESS(start, end));
80017c50:	00a6102b 	sltu	v0,a1,a2
80017c54:	10400036 	beqz	v0,80017d30 <exit_range+0x11c>
80017c58:	3c028000 	lui	v0,0x8000
80017c5c:	24420001 	addiu	v0,v0,1
80017c60:	00c2102b 	sltu	v0,a2,v0
80017c64:	10400032 	beqz	v0,80017d30 <exit_range+0x11c>
80017c68:	3c10ffc0 	lui	s0,0xffc0
exit_range_pgd():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:391
{
	start = ROUNDDOWN(start, PUSIZE);
	do {
		pgd_t *pgdp = &pgd[PGX(start)];
		if (ptep_present(pgdp)) {
			exit_range_pud(KADDR(PGD_ADDR(*pgdp)));
80017c6c:	3c157fff 	lui	s5,0x7fff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:387
#endif
}

static void exit_range_pgd(pgd_t * pgd, uintptr_t start, uintptr_t end)
{
	start = ROUNDDOWN(start, PUSIZE);
80017c70:	00b08024 	and	s0,a1,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:391
	do {
		pgd_t *pgdp = &pgd[PGX(start)];
		if (ptep_present(pgdp)) {
			exit_range_pud(KADDR(PGD_ADDR(*pgdp)));
80017c74:	2416f000 	li	s6,-4096
80017c78:	36b5f000 	ori	s5,s5,0xf000
80017c7c:	3c148015 	lui	s4,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
		panic("pa2page called with invalid pa");
	}
	return &pages[PPN(pa)];
80017c80:	08005f24 	j	80017c90 <exit_range+0x7c>
80017c84:	3c178015 	lui	s7,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:395
			free_page(pgd2page(*pgdp)), *pgdp = 0;
		}
		start += PUSIZE;
	} while (start != 0 && start < end);
80017c88:	10400019 	beqz	v0,80017cf0 <exit_range+0xdc>
80017c8c:	8fbf0034 	lw	ra,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:389

static void exit_range_pgd(pgd_t * pgd, uintptr_t start, uintptr_t end)
{
	start = ROUNDDOWN(start, PUSIZE);
	do {
		pgd_t *pgdp = &pgd[PGX(start)];
80017c90:	00108d82 	srl	s1,s0,0x16
80017c94:	00118880 	sll	s1,s1,0x2
80017c98:	02718821 	addu	s1,s3,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:491
	/* we have modified the PTE of the original
	 * process, so invalidate TLB */
	tlb_invalidate_all();
#endif
	return 0;
}
80017c9c:	8e270000 	lw	a3,0(s1)
ptep_present():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:26
80017ca0:	30e20001 	andi	v0,a3,0x1
exit_range_pgd():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:390
static void exit_range_pgd(pgd_t * pgd, uintptr_t start, uintptr_t end)
{
	start = ROUNDDOWN(start, PUSIZE);
	do {
		pgd_t *pgdp = &pgd[PGX(start)];
		if (ptep_present(pgdp)) {
80017ca4:	1040000e 	beqz	v0,80017ce0 <exit_range+0xcc>
80017ca8:	3c020040 	lui	v0,0x40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:391
			exit_range_pud(KADDR(PGD_ADDR(*pgdp)));
80017cac:	00f63824 	and	a3,a3,s6
80017cb0:	8e827770 	lw	v0,30576(s4)
80017cb4:	00f52021 	addu	a0,a3,s5
80017cb8:	00042302 	srl	a0,a0,0xc
80017cbc:	0082102b 	sltu	v0,a0,v0
80017cc0:	10400015 	beqz	v0,80017d18 <exit_range+0x104>
80017cc4:	8ee277bc 	lw	v0,30652(s7)
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
80017cc8:	00042140 	sll	a0,a0,0x5
exit_range_pgd():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:392
			free_page(pgd2page(*pgdp)), *pgdp = 0;
80017ccc:	24050001 	li	a1,1
80017cd0:	0c007441 	jal	8001d104 <free_pages>
80017cd4:	00442021 	addu	a0,v0,a0
80017cd8:	ae200000 	sw	zero,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:394
		}
		start += PUSIZE;
80017cdc:	3c020040 	lui	v0,0x40
80017ce0:	02028021 	addu	s0,s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:395
	} while (start != 0 && start < end);
80017ce4:	1600ffe8 	bnez	s0,80017c88 <exit_range+0x74>
80017ce8:	0212102b 	sltu	v0,s0,s2
exit_range():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:403
void exit_range(pgd_t * pgdir, uintptr_t start, uintptr_t end)
{
	assert(start % PGSIZE == 0 && end % PGSIZE == 0);
	assert(USER_ACCESS(start, end));
	exit_range_pgd(pgdir, start, end);
}
80017cec:	8fbf0034 	lw	ra,52(sp)
80017cf0:	8fb70030 	lw	s7,48(sp)
80017cf4:	8fb6002c 	lw	s6,44(sp)
80017cf8:	8fb50028 	lw	s5,40(sp)
80017cfc:	8fb40024 	lw	s4,36(sp)
80017d00:	8fb30020 	lw	s3,32(sp)
80017d04:	8fb2001c 	lw	s2,28(sp)
80017d08:	8fb10018 	lw	s1,24(sp)
80017d0c:	8fb00014 	lw	s0,20(sp)
80017d10:	03e00008 	jr	ra
80017d14:	27bd0038 	addiu	sp,sp,56
exit_range_pgd():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:391
{
	start = ROUNDDOWN(start, PUSIZE);
	do {
		pgd_t *pgdp = &pgd[PGX(start)];
		if (ptep_present(pgdp)) {
			exit_range_pud(KADDR(PGD_ADDR(*pgdp)));
80017d18:	3c048002 	lui	a0,0x8002
80017d1c:	3c068002 	lui	a2,0x8002
80017d20:	248439f8 	addiu	a0,a0,14840
80017d24:	24050187 	li	a1,391
80017d28:	0c006b0b 	jal	8001ac2c <__panic>
80017d2c:	24c62a74 	addiu	a2,a2,10868
exit_range():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:401
}

void exit_range(pgd_t * pgdir, uintptr_t start, uintptr_t end)
{
	assert(start % PGSIZE == 0 && end % PGSIZE == 0);
	assert(USER_ACCESS(start, end));
80017d30:	3c048002 	lui	a0,0x8002
80017d34:	3c068002 	lui	a2,0x8002
80017d38:	3c078002 	lui	a3,0x8002
80017d3c:	248439f8 	addiu	a0,a0,14840
80017d40:	24050191 	li	a1,401
80017d44:	24c60e28 	addiu	a2,a2,3624
80017d48:	0c006b0b 	jal	8001ac2c <__panic>
80017d4c:	24e73a00 	addiu	a3,a3,14848
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:400
	} while (start != 0 && start < end);
}

void exit_range(pgd_t * pgdir, uintptr_t start, uintptr_t end)
{
	assert(start % PGSIZE == 0 && end % PGSIZE == 0);
80017d50:	3c048002 	lui	a0,0x8002
80017d54:	3c068002 	lui	a2,0x8002
80017d58:	3c078002 	lui	a3,0x8002
80017d5c:	248439f8 	addiu	a0,a0,14840
80017d60:	24050190 	li	a1,400
80017d64:	24c60e28 	addiu	a2,a2,3624
80017d68:	0c006b0b 	jal	8001ac2c <__panic>
80017d6c:	24e73144 	addiu	a3,a3,12612

80017d70 <copy_range>:
copy_range():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:410
/* ucore use copy-on-write when forking a new process,
 * thus copy_range only copy pdt/pte and set their permission to 
 * READONLY, a write will be handled in pgfault
 */
int
copy_range(pgd_t * to, pgd_t * from, uintptr_t start, uintptr_t end, bool share)
80017d70:	00e61025 	or	v0,a3,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:411
{
80017d74:	27bdffc8 	addiu	sp,sp,-56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:410
/* ucore use copy-on-write when forking a new process,
 * thus copy_range only copy pdt/pte and set their permission to 
 * READONLY, a write will be handled in pgfault
 */
int
copy_range(pgd_t * to, pgd_t * from, uintptr_t start, uintptr_t end, bool share)
80017d78:	30420fff 	andi	v0,v0,0xfff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:411
{
80017d7c:	afb60028 	sw	s6,40(sp)
80017d80:	afb3001c 	sw	s3,28(sp)
80017d84:	afb20018 	sw	s2,24(sp)
80017d88:	afb10014 	sw	s1,20(sp)
80017d8c:	afb00010 	sw	s0,16(sp)
80017d90:	afbf0034 	sw	ra,52(sp)
80017d94:	afbe0030 	sw	s8,48(sp)
80017d98:	afb7002c 	sw	s7,44(sp)
80017d9c:	afb50024 	sw	s5,36(sp)
80017da0:	afb40020 	sw	s4,32(sp)
80017da4:	00c08021 	move	s0,a2
80017da8:	00e08821 	move	s1,a3
80017dac:	00809821 	move	s3,a0
80017db0:	00a09021 	move	s2,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:412
	assert(start % PGSIZE == 0 && end % PGSIZE == 0);
80017db4:	1440007d 	bnez	v0,80017fac <copy_range+0x23c>
80017db8:	8fb60048 	lw	s6,72(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:413
	assert(USER_ACCESS(start, end));
80017dbc:	00c7102b 	sltu	v0,a2,a3
80017dc0:	10400072 	beqz	v0,80017f8c <copy_range+0x21c>
80017dc4:	3c028000 	lui	v0,0x8000
80017dc8:	24420001 	addiu	v0,v0,1
80017dcc:	00e2102b 	sltu	v0,a3,v0
80017dd0:	1040006e 	beqz	v0,80017f8c <copy_range+0x21c>
80017dd4:	3c1e8015 	lui	s8,0x8015
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
80017dd8:	3c178015 	lui	s7,0x8015
copy_range():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:416

	do {
		pte_t *ptep = get_pte(from, start, 0), *nptep;
80017ddc:	02402021 	move	a0,s2
80017de0:	02002821 	move	a1,s0
80017de4:	0c005ccc 	jal	80017330 <get_pte>
80017de8:	00003021 	move	a2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:417
		if (ptep == NULL) {
80017dec:	10400042 	beqz	v0,80017ef8 <copy_range+0x188>
80017df0:	0040a021 	move	s4,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:427
			} else {
				start = ROUNDDOWN(start + PTSIZE, PTSIZE);
			}
			continue;
		}
		if (*ptep != 0) {
80017df4:	8c420000 	lw	v0,0(v0)
80017df8:	14400013 	bnez	v0,80017e48 <copy_range+0xd8>
80017dfc:	02602021 	move	a0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:483
				ptep_copy(&entry, ptep);
				swap_duplicate(entry);
				ptep_copy(nptep, &entry);
			}
		}
		start += PGSIZE;
80017e00:	26101000 	addiu	s0,s0,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:484
	} while (start != 0 && start < end);
80017e04:	12000003 	beqz	s0,80017e14 <copy_range+0xa4>
80017e08:	0211102b 	sltu	v0,s0,s1
80017e0c:	1440fff4 	bnez	v0,80017de0 <copy_range+0x70>
80017e10:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:490
#ifdef ARCH_ARM
	/* we have modified the PTE of the original
	 * process, so invalidate TLB */
	tlb_invalidate_all();
#endif
	return 0;
80017e14:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:491
}
80017e18:	8fbf0034 	lw	ra,52(sp)
80017e1c:	8fbe0030 	lw	s8,48(sp)
80017e20:	8fb7002c 	lw	s7,44(sp)
80017e24:	8fb60028 	lw	s6,40(sp)
80017e28:	8fb50024 	lw	s5,36(sp)
80017e2c:	8fb40020 	lw	s4,32(sp)
80017e30:	8fb3001c 	lw	s3,28(sp)
80017e34:	8fb20018 	lw	s2,24(sp)
80017e38:	8fb10014 	lw	s1,20(sp)
80017e3c:	8fb00010 	lw	s0,16(sp)
80017e40:	03e00008 	jr	ra
80017e44:	27bd0038 	addiu	sp,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:428
				start = ROUNDDOWN(start + PTSIZE, PTSIZE);
			}
			continue;
		}
		if (*ptep != 0) {
			if ((nptep = get_pte(to, start, 1)) == NULL) {
80017e48:	02002821 	move	a1,s0
80017e4c:	0c005ccc 	jal	80017330 <get_pte>
80017e50:	24060001 	li	a2,1
80017e54:	5040fff0 	beqzl	v0,80017e18 <copy_range+0xa8>
80017e58:	2402fff4 	li	v0,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:433
				return -E_NO_MEM;
			}
			int ret;
			//kprintf("%08x %08x %08x\n", nptep, *nptep, start);
			assert(*ptep != 0 && *nptep == 0);
80017e5c:	8e830000 	lw	v1,0(s4)
80017e60:	1060003a 	beqz	v1,80017f4c <copy_range+0x1dc>
80017e64:	3c048002 	lui	a0,0x8002
80017e68:	8c420000 	lw	v0,0(v0)
80017e6c:	14400037 	bnez	v0,80017f4c <copy_range+0x1dc>
80017e70:	30620001 	andi	v0,v1,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:457
				struct Page *page = pte2page(*ptep);
				ret = page_insert(to, page, start, perm);

			}
#else /* ARCH_ARM */
			if (ptep_present(ptep)) {
80017e74:	1040003c 	beqz	v0,80017f68 <copy_range+0x1f8>
80017e78:	2402f000 	li	v0,-4096
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
80017e7c:	3c057fff 	lui	a1,0x7fff
pte2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:119
static inline struct Page *pte2page(pte_t pte)
{
	if (!(pte & PTE_P)) {
		panic("pte2page called with invalid pte");
	}
	return pa2page(PTE_ADDR(pte));
80017e80:	00621024 	and	v0,v1,v0
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
80017e84:	8fc47770 	lw	a0,30576(s8)
80017e88:	34a5f000 	ori	a1,a1,0xf000
80017e8c:	00451021 	addu	v0,v0,a1
80017e90:	00021302 	srl	v0,v0,0xc
80017e94:	0044202b 	sltu	a0,v0,a0
80017e98:	1080003a 	beqz	a0,80017f84 <copy_range+0x214>
80017e9c:	8ef577bc 	lw	s5,30652(s7)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
		panic("pa2page called with invalid pa");
	}
	return &pages[PPN(pa)];
80017ea0:	00021140 	sll	v0,v0,0x5
ptep_get_perm():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:89
	*ptep &= (~PTE_W);
}

static inline pte_perm_t ptep_get_perm(pte_t * ptep, pte_perm_t perm)
{
	return (*ptep) & perm;
80017ea4:	30740007 	andi	s4,v1,0x7
copy_range():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:460
				pte_perm_t perm = ptep_get_perm(ptep, PTE_USER);
				struct Page *page = pte2page(*ptep);
				if (!share && ptep_s_write(ptep)) {
80017ea8:	16c00004 	bnez	s6,80017ebc <copy_range+0x14c>
80017eac:	02a2a821 	addu	s5,s5,v0
ptep_s_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:36
	return (*ptep & PTE_P);
}

static inline int ptep_s_write(pte_t * ptep)
{
	return (*ptep & PTE_W);
80017eb0:	30620002 	andi	v0,v1,0x2
copy_range():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:460
80017eb4:	14400019 	bnez	v0,80017f1c <copy_range+0x1ac>
80017eb8:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:469
					ptep_set_perm(&perm_with_swap_stat,
						      perm);
					page_insert(from, page, start,
						    perm_with_swap_stat);
				}
				ret = page_insert(to, page, start, perm);
80017ebc:	02602021 	move	a0,s3
80017ec0:	02a02821 	move	a1,s5
80017ec4:	02003021 	move	a2,s0
80017ec8:	0c005dcd 	jal	80017734 <page_insert>
80017ecc:	02803821 	move	a3,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:470
				assert(ret == 0);
80017ed0:	5040ffcc 	beqzl	v0,80017e04 <copy_range+0x94>
80017ed4:	26101000 	addiu	s0,s0,4096
80017ed8:	3c048002 	lui	a0,0x8002
80017edc:	3c068002 	lui	a2,0x8002
80017ee0:	3c078002 	lui	a3,0x8002
80017ee4:	248439f8 	addiu	a0,a0,14840
80017ee8:	240501d6 	li	a1,470
80017eec:	24c60e28 	addiu	a2,a2,3624
80017ef0:	0c006b0b 	jal	8001ac2c <__panic>
80017ef4:	24e73a60 	addiu	a3,a3,14944
get_pgd():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:16
 * Page table operations
 **************************************************/

pgd_t *get_pgd(pgd_t * pgdir, uintptr_t la, bool create)
{
	return &pgdir[PGX(la)];
80017ef8:	00101582 	srl	v0,s0,0x16
80017efc:	00021080 	sll	v0,v0,0x2
80017f00:	02421021 	addu	v0,s2,v0
copy_range():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:418
	assert(USER_ACCESS(start, end));

	do {
		pte_t *ptep = get_pte(from, start, 0), *nptep;
		if (ptep == NULL) {
			if (get_pud(from, start, 0) == NULL) {
80017f04:	1040000c 	beqz	v0,80017f38 <copy_range+0x1c8>
80017f08:	3c050040 	lui	a1,0x40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:423
				start = ROUNDDOWN(start + PUSIZE, PUSIZE);
			} else if (get_pmd(from, start, 0) == NULL) {
				start = ROUNDDOWN(start + PMSIZE, PMSIZE);
			} else {
				start = ROUNDDOWN(start + PTSIZE, PTSIZE);
80017f0c:	02058021 	addu	s0,s0,a1
80017f10:	3c02ffc0 	lui	v0,0xffc0
80017f14:	08005f81 	j	80017e04 <copy_range+0x94>
80017f18:	02028024 	and	s0,s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:466
					ptep_unset_s_write(&perm);
					pte_perm_t perm_with_swap_stat =
					    ptep_get_perm(ptep, PTE_SWAP);
					ptep_set_perm(&perm_with_swap_stat,
						      perm);
					page_insert(from, page, start,
80017f1c:	02a02821 	move	a1,s5
80017f20:	02003021 	move	a2,s0
80017f24:	30670065 	andi	a3,v1,0x65
80017f28:	0c005dcd 	jal	80017734 <page_insert>
80017f2c:	30740005 	andi	s4,v1,0x5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:469
						    perm_with_swap_stat);
				}
				ret = page_insert(to, page, start, perm);
80017f30:	08005fb0 	j	80017ec0 <copy_range+0x150>
80017f34:	02602021 	move	a0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:419

	do {
		pte_t *ptep = get_pte(from, start, 0), *nptep;
		if (ptep == NULL) {
			if (get_pud(from, start, 0) == NULL) {
				start = ROUNDDOWN(start + PUSIZE, PUSIZE);
80017f38:	3c020040 	lui	v0,0x40
80017f3c:	02028021 	addu	s0,s0,v0
80017f40:	3c02ffc0 	lui	v0,0xffc0
80017f44:	08005f81 	j	80017e04 <copy_range+0x94>
80017f48:	02028024 	and	s0,s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:433
			if ((nptep = get_pte(to, start, 1)) == NULL) {
				return -E_NO_MEM;
			}
			int ret;
			//kprintf("%08x %08x %08x\n", nptep, *nptep, start);
			assert(*ptep != 0 && *nptep == 0);
80017f4c:	3c068002 	lui	a2,0x8002
80017f50:	3c078002 	lui	a3,0x8002
80017f54:	248439f8 	addiu	a0,a0,14840
80017f58:	240501b1 	li	a1,433
80017f5c:	24c60e28 	addiu	a2,a2,3624
80017f60:	0c006b0b 	jal	8001ac2c <__panic>
80017f64:	24e73a44 	addiu	a3,a3,14916
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:475
				assert(ret == 0);
			}
#endif /* ARCH_ARM */
			else {
#ifndef UCONFIG_SWAP
				assert(0);
80017f68:	3c068002 	lui	a2,0x8002
80017f6c:	3c078002 	lui	a3,0x8002
80017f70:	248439f8 	addiu	a0,a0,14840
80017f74:	240501db 	li	a1,475
80017f78:	24c60e28 	addiu	a2,a2,3624
80017f7c:	0c006b0b 	jal	8001ac2c <__panic>
80017f80:	24e7242c 	addiu	a3,a3,9260
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
80017f84:	0c007f70 	jal	8001fdc0 <pa2page.part.7>
80017f88:	00000000 	nop
copy_range():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:413
 */
int
copy_range(pgd_t * to, pgd_t * from, uintptr_t start, uintptr_t end, bool share)
{
	assert(start % PGSIZE == 0 && end % PGSIZE == 0);
	assert(USER_ACCESS(start, end));
80017f8c:	3c048002 	lui	a0,0x8002
80017f90:	3c068002 	lui	a2,0x8002
80017f94:	3c078002 	lui	a3,0x8002
80017f98:	248439f8 	addiu	a0,a0,14840
80017f9c:	2405019d 	li	a1,413
80017fa0:	24c60e28 	addiu	a2,a2,3624
80017fa4:	0c006b0b 	jal	8001ac2c <__panic>
80017fa8:	24e73a00 	addiu	a3,a3,14848
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/pmm.c:412
 * READONLY, a write will be handled in pgfault
 */
int
copy_range(pgd_t * to, pgd_t * from, uintptr_t start, uintptr_t end, bool share)
{
	assert(start % PGSIZE == 0 && end % PGSIZE == 0);
80017fac:	3c048002 	lui	a0,0x8002
80017fb0:	3c068002 	lui	a2,0x8002
80017fb4:	3c078002 	lui	a3,0x8002
80017fb8:	248439f8 	addiu	a0,a0,14840
80017fbc:	2405019c 	li	a1,412
80017fc0:	24c60e28 	addiu	a2,a2,3624
80017fc4:	0c006b0b 	jal	8001ac2c <__panic>
80017fc8:	24e73144 	addiu	a3,a3,12612

80017fcc <event_box_init>:
event_box_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:17
#define current (pls_read(current))
#define idleproc (pls_read(idleproc))

void event_box_init(event_t * event_box)
{
	wait_queue_init(&(event_box->wait_queue));
80017fcc:	0800694b 	j	8001a52c <wait_queue_init>
80017fd0:	24840004 	addiu	a0,a0,4

80017fd4 <ipc_event_send>:
ipc_event_send():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:44
	}
	return 0;
}

int ipc_event_send(int pid, int event, unsigned int timeout)
{
80017fd4:	27bdffa0 	addiu	sp,sp,-96
80017fd8:	afb00048 	sw	s0,72(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:46
	struct proc_struct *proc;
	if ((proc = find_proc(pid)) == NULL || proc->state == PROC_ZOMBIE) {
80017fdc:	afa50044 	sw	a1,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:44
	}
	return 0;
}

int ipc_event_send(int pid, int event, unsigned int timeout)
{
80017fe0:	afbf005c 	sw	ra,92(sp)
80017fe4:	afb40058 	sw	s4,88(sp)
80017fe8:	afb30054 	sw	s3,84(sp)
80017fec:	afb20050 	sw	s2,80(sp)
80017ff0:	afb1004c 	sw	s1,76(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:46
	struct proc_struct *proc;
	if ((proc = find_proc(pid)) == NULL || proc->state == PROC_ZOMBIE) {
80017ff4:	0c003b44 	jal	8000ed10 <find_proc>
80017ff8:	00c08021 	move	s0,a2
80017ffc:	1040007f 	beqz	v0,800181fc <ipc_event_send+0x228>
80018000:	8fa50044 	lw	a1,68(sp)
80018004:	8c440000 	lw	a0,0(v0)
80018008:	24030003 	li	v1,3
8001800c:	1083007b 	beq	a0,v1,800181fc <ipc_event_send+0x228>
80018010:	3c118015 	lui	s1,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:49
		return -E_INVAL;
	}
	if (proc == current || proc == idleproc || proc == initproc
80018014:	8e2377a4 	lw	v1,30628(s1)
80018018:	10430078 	beq	v0,v1,800181fc <ipc_event_send+0x228>
8001801c:	3c048015 	lui	a0,0x8015
80018020:	8c8477a8 	lw	a0,30632(a0)
80018024:	10440075 	beq	v0,a0,800181fc <ipc_event_send+0x228>
80018028:	3c048015 	lui	a0,0x8015
8001802c:	8c847798 	lw	a0,30616(a0)
80018030:	10440072 	beq	v0,a0,800181fc <ipc_event_send+0x228>
80018034:	3c048015 	lui	a0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:50
	    || proc == kswapd) {
80018038:	8c8477b4 	lw	a0,30644(a0)
8001803c:	1044006f 	beq	v0,a0,800181fc <ipc_event_send+0x228>
80018040:	3c048000 	lui	a0,0x8000
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:53
		return -E_INVAL;
	}
	if (proc->wait_state == WT_EVENT_RECV) {
80018044:	8c460084 	lw	a2,132(v0)
80018048:	24840111 	addiu	a0,a0,273
8001804c:	10c40065 	beq	a2,a0,800181e4 <ipc_event_send+0x210>
80018050:	00402021 	move	a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:56
		wakeup_proc(proc);
	}
	current->event_box.event = event;
80018054:	ac6500b0 	sw	a1,176(v1)
ipc_timer_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:28

static inline timer_t *ipc_timer_init(unsigned int timeout,
				      unsigned long *saved_ticks,
				      timer_t * timer)
{
	if (timeout != 0) {
80018058:	1600003d 	bnez	s0,80018150 <ipc_event_send+0x17c>
8001805c:	00009821 	move	s3,zero
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80018060:	40036000 	mfc0	v1,c0_status
80018064:	30630001 	andi	v1,v1,0x1
80018068:	10600005 	beqz	v1,80018080 <ipc_event_send+0xac>
8001806c:	0000a021 	move	s4,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80018070:	0c006d04 	jal	8001b410 <intr_disable>
80018074:	afa20040 	sw	v0,64(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:16
	return 1;
80018078:	8fa20040 	lw	v0,64(sp)
8001807c:	24140001 	li	s4,1
send_event():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:25
static uint32_t send_event(struct proc_struct *proc, timer_t * timer)
{
	bool intr_flag;
	local_intr_save(intr_flag);
	wait_t __wait, *wait = &__wait;
	wait_queue_t *wait_queue = &(proc->event_box.wait_queue);
80018080:	245100b4 	addiu	s1,v0,180
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:26
	wait_current_set(wait_queue, wait, WT_EVENT_SEND);
80018084:	3c068000 	lui	a2,0x8000
80018088:	02202021 	move	a0,s1
8001808c:	27a50010 	addiu	a1,sp,16
80018090:	0c006a00 	jal	8001a800 <wait_current_set>
80018094:	24c60110 	addiu	a2,a2,272
ipc_add_timer():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:12
#include <sched.h>
#include <error.h>

static inline void ipc_add_timer(timer_t * timer)
{
	if (timer != NULL) {
80018098:	12600003 	beqz	s3,800180a8 <ipc_event_send+0xd4>
8001809c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:13
		add_timer(timer);
800180a0:	0c0005e5 	jal	80001794 <add_timer>
800180a4:	02602021 	move	a0,s3
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
800180a8:	1680004a 	bnez	s4,800181d4 <ipc_event_send+0x200>
800180ac:	00000000 	nop
send_event():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:30
	ipc_add_timer(timer);
	local_intr_restore(intr_flag);

	schedule();
800180b0:	0c00059f 	jal	8000167c <schedule>
800180b4:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
800180b8:	40026000 	mfc0	v0,c0_status
800180bc:	30420001 	andi	v0,v0,0x1
800180c0:	1440002d 	bnez	v0,80018178 <ipc_event_send+0x1a4>
800180c4:	0000a021 	move	s4,zero
ipc_del_timer():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:19
	}
}

static inline void ipc_del_timer(timer_t * timer)
{
	if (timer != NULL) {
800180c8:	12600003 	beqz	s3,800180d8 <ipc_event_send+0x104>
800180cc:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:20
		del_timer(timer);
800180d0:	0c00062d 	jal	800018b4 <del_timer>
800180d4:	02602021 	move	a0,s3
send_event():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:34

	local_intr_save(intr_flag);
	ipc_del_timer(timer);
	wait_current_del(wait_queue, wait);
800180d8:	0c0069b6 	jal	8001a6d8 <wait_in_queue>
800180dc:	27a40010 	addiu	a0,sp,16
800180e0:	14400029 	bnez	v0,80018188 <ipc_event_send+0x1b4>
800180e4:	02202021 	move	a0,s1
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
800180e8:	1680002b 	bnez	s4,80018198 <ipc_event_send+0x1c4>
800180ec:	8fa20014 	lw	v0,20(sp)
send_event():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:37
	local_intr_restore(intr_flag);

	if (wait->wakeup_flags != WT_EVENT_SEND) {
800180f0:	3c038000 	lui	v1,0x8000
800180f4:	24640110 	addiu	a0,v1,272
800180f8:	1044002e 	beq	v0,a0,800181b4 <ipc_event_send+0x1e0>
800180fc:	8fbf005c 	lw	ra,92(sp)
ipc_event_send():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:63
	unsigned long saved_ticks;
	timer_t __timer, *timer =
	    ipc_timer_init(timeout, &saved_ticks, &__timer);

	uint32_t flags;
	if ((flags = send_event(proc, timer)) == 0) {
80018100:	1040002c 	beqz	v0,800181b4 <ipc_event_send+0x1e0>
80018104:	8fbf005c 	lw	ra,92(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:66
		return 0;
	}
	assert(flags == WT_INTERRUPTED);
80018108:	1443003e 	bne	v0,v1,80018204 <ipc_event_send+0x230>
8001810c:	3c048002 	lui	a0,0x8002
ipc_check_timeout():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:38
}

static inline int
ipc_check_timeout(unsigned int timeout, unsigned long saved_ticks)
{
	if (timeout != 0) {
80018110:	12000008 	beqz	s0,80018134 <ipc_event_send+0x160>
80018114:	2402ffff 	li	v0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:39
		unsigned long delt = (unsigned long)(ticks - saved_ticks);
80018118:	3c038015 	lui	v1,0x8015
8001811c:	8c6377ac 	lw	v1,30636(v1)
80018120:	00729023 	subu	s2,v1,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:40
		if (delt >= timeout) {
80018124:	0250802b 	sltu	s0,s2,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:44
			return -E_TIMEOUT;
		}
	}
	return -1;
80018128:	2403fff0 	li	v1,-16
8001812c:	0070100a 	movz	v0,v1,s0
ipc_event_send():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:68
	return ipc_check_timeout(timeout, saved_ticks);
}
80018130:	8fbf005c 	lw	ra,92(sp)
80018134:	8fb40058 	lw	s4,88(sp)
80018138:	8fb30054 	lw	s3,84(sp)
8001813c:	8fb20050 	lw	s2,80(sp)
80018140:	8fb1004c 	lw	s1,76(sp)
80018144:	8fb00048 	lw	s0,72(sp)
80018148:	03e00008 	jr	ra
8001814c:	27bd0060 	addiu	sp,sp,96
ipc_timer_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:29
static inline timer_t *ipc_timer_init(unsigned int timeout,
				      unsigned long *saved_ticks,
				      timer_t * timer)
{
	if (timeout != 0) {
		*saved_ticks = ticks;
80018150:	3c048015 	lui	a0,0x8015
timer_init():

static inline timer_t *timer_init(timer_t * timer, struct proc_struct *proc,
				  int expires)
{
	timer->expires = expires;
	timer->proc = proc;
80018154:	afa30028 	sw	v1,40(sp)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
 * list_init - initialize a new entry
 * @elm:        new entry to be initialized
 * */
static inline void list_init(list_entry_t * elm)
{
	elm->prev = elm->next = elm;
80018158:	27a30038 	addiu	v1,sp,56
ipc_timer_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:29
8001815c:	8c9277ac 	lw	s2,30636(a0)
timer_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.h:28
    to_struct((le), timer_t, member)

static inline timer_t *timer_init(timer_t * timer, struct proc_struct *proc,
				  int expires)
{
	timer->expires = expires;
80018160:	afb00024 	sw	s0,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.h:30
	timer->proc = proc;
	timer->linux_timer.linux_timer = NULL;
80018164:	afa0002c 	sw	zero,44(sp)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
80018168:	afa3003c 	sw	v1,60(sp)
8001816c:	afa30038 	sw	v1,56(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:60
	}
	current->event_box.event = event;

	unsigned long saved_ticks;
	timer_t __timer, *timer =
	    ipc_timer_init(timeout, &saved_ticks, &__timer);
80018170:	08006018 	j	80018060 <ipc_event_send+0x8c>
80018174:	27b30024 	addiu	s3,sp,36
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
80018178:	0c006d04 	jal	8001b410 <intr_disable>
8001817c:	24140001 	li	s4,1
80018180:	08006032 	j	800180c8 <ipc_event_send+0xf4>
80018184:	00000000 	nop
send_event():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:34

	schedule();

	local_intr_save(intr_flag);
	ipc_del_timer(timer);
	wait_current_del(wait_queue, wait);
80018188:	0c006966 	jal	8001a598 <wait_queue_del>
8001818c:	27a50010 	addiu	a1,sp,16
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80018190:	1280ffd7 	beqz	s4,800180f0 <ipc_event_send+0x11c>
80018194:	8fa20014 	lw	v0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
80018198:	0c006d00 	jal	8001b400 <intr_enable>
8001819c:	00000000 	nop
send_event():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:37
	local_intr_restore(intr_flag);

	if (wait->wakeup_flags != WT_EVENT_SEND) {
800181a0:	8fa20014 	lw	v0,20(sp)
800181a4:	3c038000 	lui	v1,0x8000
800181a8:	24640110 	addiu	a0,v1,272
800181ac:	1444ffd4 	bne	v0,a0,80018100 <ipc_event_send+0x12c>
800181b0:	8fbf005c 	lw	ra,92(sp)
ipc_event_send():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:64
	timer_t __timer, *timer =
	    ipc_timer_init(timeout, &saved_ticks, &__timer);

	uint32_t flags;
	if ((flags = send_event(proc, timer)) == 0) {
		return 0;
800181b4:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:68
	}
	assert(flags == WT_INTERRUPTED);
	return ipc_check_timeout(timeout, saved_ticks);
}
800181b8:	8fb40058 	lw	s4,88(sp)
800181bc:	8fb30054 	lw	s3,84(sp)
800181c0:	8fb20050 	lw	s2,80(sp)
800181c4:	8fb1004c 	lw	s1,76(sp)
800181c8:	8fb00048 	lw	s0,72(sp)
800181cc:	03e00008 	jr	ra
800181d0:	27bd0060 	addiu	sp,sp,96
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
800181d4:	0c006d00 	jal	8001b400 <intr_enable>
800181d8:	00000000 	nop
800181dc:	0800602c 	j	800180b0 <ipc_event_send+0xdc>
800181e0:	00000000 	nop
ipc_event_send():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:54
	if (proc == current || proc == idleproc || proc == initproc
	    || proc == kswapd) {
		return -E_INVAL;
	}
	if (proc->wait_state == WT_EVENT_RECV) {
		wakeup_proc(proc);
800181e4:	0c0004f8 	jal	800013e0 <wakeup_proc>
800181e8:	afa20040 	sw	v0,64(sp)
800181ec:	8e2377a4 	lw	v1,30628(s1)
800181f0:	8fa50044 	lw	a1,68(sp)
800181f4:	08006015 	j	80018054 <ipc_event_send+0x80>
800181f8:	8fa20040 	lw	v0,64(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:51
	if ((proc = find_proc(pid)) == NULL || proc->state == PROC_ZOMBIE) {
		return -E_INVAL;
	}
	if (proc == current || proc == idleproc || proc == initproc
	    || proc == kswapd) {
		return -E_INVAL;
800181fc:	0800604c 	j	80018130 <ipc_event_send+0x15c>
80018200:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:66

	uint32_t flags;
	if ((flags = send_event(proc, timer)) == 0) {
		return 0;
	}
	assert(flags == WT_INTERRUPTED);
80018204:	3c068002 	lui	a2,0x8002
80018208:	3c078002 	lui	a3,0x8002
8001820c:	24843a6c 	addiu	a0,a0,14956
80018210:	24050042 	li	a1,66
80018214:	24c60e28 	addiu	a2,a2,3624
80018218:	0c006b0b 	jal	8001ac2c <__panic>
8001821c:	24e73a74 	addiu	a3,a3,14964

80018220 <ipc_event_recv>:
ipc_event_recv():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:101
	local_intr_restore(intr_flag);
	return ret;
}

int ipc_event_recv(int *pid_store, int *event_store, unsigned int timeout)
{
80018220:	27bdffa0 	addiu	sp,sp,-96
80018224:	afb60054 	sw	s6,84(sp)
80018228:	afb4004c 	sw	s4,76(sp)
8001822c:	afb30048 	sw	s3,72(sp)
80018230:	afb0003c 	sw	s0,60(sp)
80018234:	afbf005c 	sw	ra,92(sp)
80018238:	afb70058 	sw	s7,88(sp)
8001823c:	afb50050 	sw	s5,80(sp)
80018240:	afb20044 	sw	s2,68(sp)
80018244:	afb10040 	sw	s1,64(sp)
80018248:	00a0b021 	move	s6,a1
8001824c:	0080a021 	move	s4,a0
80018250:	00c09821 	move	s3,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:102
	if (event_store == NULL) {
80018254:	10a00052 	beqz	a1,800183a0 <ipc_event_recv+0x180>
80018258:	2410ffea 	li	s0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:106
		return -E_INVAL;
	}

	struct mm_struct *mm = current->mm;
8001825c:	3c128015 	lui	s2,0x8015
80018260:	8e4277a4 	lw	v0,30628(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:107
	if (pid_store != NULL) {
80018264:	10800008 	beqz	a0,80018288 <ipc_event_recv+0x68>
80018268:	8c510020 	lw	s1,32(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:108
		if (!user_mem_check(mm, (uintptr_t) pid_store, sizeof(int), 1)) {
8001826c:	02202021 	move	a0,s1
80018270:	02802821 	move	a1,s4
80018274:	24060004 	li	a2,4
80018278:	0c005077 	jal	800141dc <user_mem_check>
8001827c:	24070001 	li	a3,1
80018280:	10400048 	beqz	v0,800183a4 <ipc_event_recv+0x184>
80018284:	8fbf005c 	lw	ra,92(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:112
			return -E_INVAL;
		}
	}
	if (!user_mem_check(mm, (uintptr_t) event_store, sizeof(int), 1)) {
80018288:	02202021 	move	a0,s1
8001828c:	02c02821 	move	a1,s6
80018290:	24060004 	li	a2,4
80018294:	0c005077 	jal	800141dc <user_mem_check>
80018298:	24070001 	li	a3,1
8001829c:	10400040 	beqz	v0,800183a0 <ipc_event_recv+0x180>
800182a0:	2410ffea 	li	s0,-22
ipc_timer_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:28

static inline timer_t *ipc_timer_init(unsigned int timeout,
				      unsigned long *saved_ticks,
				      timer_t * timer)
{
	if (timeout != 0) {
800182a4:	1660004a 	bnez	s3,800183d0 <ipc_event_recv+0x1b0>
800182a8:	00008021 	move	s0,zero
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
800182ac:	40026000 	mfc0	v0,c0_status
800182b0:	30420001 	andi	v0,v0,0x1
800182b4:	10400003 	beqz	v0,800182c4 <ipc_event_recv+0xa4>
800182b8:	0000a821 	move	s5,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
800182bc:	0c006d04 	jal	8001b410 <intr_disable>
800182c0:	24150001 	li	s5,1
recv_event():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:74

static int recv_event(int *pid_store, int *event_store, timer_t * timer)
{
	bool intr_flag;
	local_intr_save(intr_flag);
	wait_queue_t *wait_queue = &(current->event_box.wait_queue);
800182c4:	8e5277a4 	lw	s2,30628(s2)
800182c8:	265200b4 	addiu	s2,s2,180
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:75
	if (wait_queue_empty(wait_queue)) {
800182cc:	0c0069b2 	jal	8001a6c8 <wait_queue_empty>
800182d0:	02402021 	move	a0,s2
800182d4:	10400016 	beqz	v0,80018330 <ipc_event_recv+0x110>
800182d8:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:76
		current->state = PROC_SLEEPING;
800182dc:	8c4277a4 	lw	v0,30628(v0)
800182e0:	24030001 	li	v1,1
800182e4:	ac430000 	sw	v1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:77
		current->wait_state = WT_EVENT_RECV;
800182e8:	3c038000 	lui	v1,0x8000
800182ec:	24630111 	addiu	v1,v1,273
ipc_add_timer():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:12
#include <sched.h>
#include <error.h>

static inline void ipc_add_timer(timer_t * timer)
{
	if (timer != NULL) {
800182f0:	12000003 	beqz	s0,80018300 <ipc_event_recv+0xe0>
800182f4:	ac430084 	sw	v1,132(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:13
		add_timer(timer);
800182f8:	0c0005e5 	jal	80001794 <add_timer>
800182fc:	02002021 	move	a0,s0
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80018300:	16a00065 	bnez	s5,80018498 <ipc_event_recv+0x278>
80018304:	00000000 	nop
recv_event():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:81
		ipc_add_timer(timer);
		local_intr_restore(intr_flag);

		schedule();
80018308:	0c00059f 	jal	8000167c <schedule>
8001830c:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80018310:	40026000 	mfc0	v0,c0_status
80018314:	30420001 	andi	v0,v0,0x1
80018318:	1440005b 	bnez	v0,80018488 <ipc_event_recv+0x268>
8001831c:	0000a821 	move	s5,zero
ipc_del_timer():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:19
	}
}

static inline void ipc_del_timer(timer_t * timer)
{
	if (timer != NULL) {
80018320:	12000003 	beqz	s0,80018330 <ipc_event_recv+0x110>
80018324:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:20
		del_timer(timer);
80018328:	0c00062d 	jal	800018b4 <del_timer>
8001832c:	02002021 	move	a0,s0
recv_event():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:90
	}

	int ret = -1;

	wait_t *wait;
	if ((wait = wait_queue_first(wait_queue)) != NULL) {
80018330:	0c0069a8 	jal	8001a6a0 <wait_queue_first>
80018334:	02402021 	move	a0,s2
80018338:	1040000d 	beqz	v0,80018370 <ipc_event_recv+0x150>
8001833c:	2410ffff 	li	s0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:91
		struct proc_struct *proc = wait->proc;
80018340:	8c430000 	lw	v1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:94
		*pid_store = proc->pid, *event_store =
		    proc->event_box.event, ret = 0;
		wakeup_wait(wait_queue, wait, WT_EVENT_SEND, 1);
80018344:	3c068000 	lui	a2,0x8000
80018348:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:92
	int ret = -1;

	wait_t *wait;
	if ((wait = wait_queue_first(wait_queue)) != NULL) {
		struct proc_struct *proc = wait->proc;
		*pid_store = proc->pid, *event_store =
8001834c:	8c680004 	lw	t0,4(v1)
80018350:	8c6300b0 	lw	v1,176(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:94
		    proc->event_box.event, ret = 0;
		wakeup_wait(wait_queue, wait, WT_EVENT_SEND, 1);
80018354:	00402821 	move	a1,v0
80018358:	24c60110 	addiu	a2,a2,272
8001835c:	24070001 	li	a3,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:92
	int ret = -1;

	wait_t *wait;
	if ((wait = wait_queue_first(wait_queue)) != NULL) {
		struct proc_struct *proc = wait->proc;
		*pid_store = proc->pid, *event_store =
80018360:	afa80014 	sw	t0,20(sp)
80018364:	afa30010 	sw	v1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:94
		    proc->event_box.event, ret = 0;
		wakeup_wait(wait_queue, wait, WT_EVENT_SEND, 1);
80018368:	0c0069bb 	jal	8001a6ec <wakeup_wait>
8001836c:	00008021 	move	s0,zero
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80018370:	16a00022 	bnez	s5,800183fc <ipc_event_recv+0x1dc>
80018374:	00000000 	nop
ipc_event_recv():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:121
	unsigned long saved_ticks;
	timer_t __timer, *timer =
	    ipc_timer_init(timeout, &saved_ticks, &__timer);

	int pid, event, ret;
	if ((ret = recv_event(&pid, &event, timer)) == 0) {
80018378:	12000024 	beqz	s0,8001840c <ipc_event_recv+0x1ec>
8001837c:	00000000 	nop
ipc_check_timeout():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:38
}

static inline int
ipc_check_timeout(unsigned int timeout, unsigned long saved_ticks)
{
	if (timeout != 0) {
80018380:	12600007 	beqz	s3,800183a0 <ipc_event_recv+0x180>
80018384:	2410ffff 	li	s0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:39
		unsigned long delt = (unsigned long)(ticks - saved_ticks);
80018388:	3c028015 	lui	v0,0x8015
8001838c:	8c4277ac 	lw	v0,30636(v0)
80018390:	0057b823 	subu	s7,v0,s7
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:40
		if (delt >= timeout) {
80018394:	02f3982b 	sltu	s3,s7,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:44
			return -E_TIMEOUT;
		}
	}
	return -1;
80018398:	2402fff0 	li	v0,-16
8001839c:	0053800a 	movz	s0,v0,s3
ipc_event_recv():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:137
		}
		unlock_mm(mm);
		return ret;
	}
	return ipc_check_timeout(timeout, saved_ticks);
}
800183a0:	8fbf005c 	lw	ra,92(sp)
800183a4:	02001021 	move	v0,s0
800183a8:	8fb70058 	lw	s7,88(sp)
800183ac:	8fb60054 	lw	s6,84(sp)
800183b0:	8fb50050 	lw	s5,80(sp)
800183b4:	8fb4004c 	lw	s4,76(sp)
800183b8:	8fb30048 	lw	s3,72(sp)
800183bc:	8fb20044 	lw	s2,68(sp)
800183c0:	8fb10040 	lw	s1,64(sp)
800183c4:	8fb0003c 	lw	s0,60(sp)
800183c8:	03e00008 	jr	ra
800183cc:	27bd0060 	addiu	sp,sp,96
ipc_timer_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:30
				      unsigned long *saved_ticks,
				      timer_t * timer)
{
	if (timeout != 0) {
		*saved_ticks = ticks;
		return timer_init(timer, pls_read(current), timeout);
800183d0:	8e4277a4 	lw	v0,30628(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:29
static inline timer_t *ipc_timer_init(unsigned int timeout,
				      unsigned long *saved_ticks,
				      timer_t * timer)
{
	if (timeout != 0) {
		*saved_ticks = ticks;
800183d4:	3c038015 	lui	v1,0x8015
800183d8:	8c7777ac 	lw	s7,30636(v1)
timer_init():

static inline timer_t *timer_init(timer_t * timer, struct proc_struct *proc,
				  int expires)
{
	timer->expires = expires;
	timer->proc = proc;
800183dc:	afa2001c 	sw	v0,28(sp)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
800183e0:	27a2002c 	addiu	v0,sp,44
timer_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.h:28
    to_struct((le), timer_t, member)

static inline timer_t *timer_init(timer_t * timer, struct proc_struct *proc,
				  int expires)
{
	timer->expires = expires;
800183e4:	afb30018 	sw	s3,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.h:30
	timer->proc = proc;
	timer->linux_timer.linux_timer = NULL;
800183e8:	afa00020 	sw	zero,32(sp)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
800183ec:	afa20030 	sw	v0,48(sp)
800183f0:	afa2002c 	sw	v0,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:118
		return -E_INVAL;
	}

	unsigned long saved_ticks;
	timer_t __timer, *timer =
	    ipc_timer_init(timeout, &saved_ticks, &__timer);
800183f4:	080060ab 	j	800182ac <ipc_event_recv+0x8c>
800183f8:	27b00018 	addiu	s0,sp,24
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
800183fc:	0c006d00 	jal	8001b400 <intr_enable>
80018400:	00000000 	nop
ipc_event_recv():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:121

	int pid, event, ret;
	if ((ret = recv_event(&pid, &event, timer)) == 0) {
80018404:	1600ffde 	bnez	s0,80018380 <ipc_event_recv+0x160>
80018408:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:122
		lock_mm(mm);
8001840c:	0c004c26 	jal	80013098 <lock_mm>
80018410:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:125
		{
			ret = -E_INVAL;
			if (pid_store == NULL
80018414:	12800007 	beqz	s4,80018434 <ipc_event_recv+0x214>
80018418:	02802821 	move	a1,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:126
			    || copy_to_user(mm, pid_store, &pid, sizeof(int))) {
8001841c:	02202021 	move	a0,s1
80018420:	27a60014 	addiu	a2,sp,20
80018424:	0c007948 	jal	8001e520 <copy_to_user>
80018428:	24070004 	li	a3,4
8001842c:	10400008 	beqz	v0,80018450 <ipc_event_recv+0x230>
80018430:	2410ffea 	li	s0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:128
				if (copy_to_user
				    (mm, event_store, &event, sizeof(int))) {
80018434:	02202021 	move	a0,s1
80018438:	02c02821 	move	a1,s6
8001843c:	27a60010 	addiu	a2,sp,16
80018440:	0c007948 	jal	8001e520 <copy_to_user>
80018444:	24070004 	li	a3,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:124

	int pid, event, ret;
	if ((ret = recv_event(&pid, &event, timer)) == 0) {
		lock_mm(mm);
		{
			ret = -E_INVAL;
80018448:	2410ffea 	li	s0,-22
8001844c:	0002800b 	movn	s0,zero,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:133
				    (mm, event_store, &event, sizeof(int))) {
					ret = 0;
				}
			}
		}
		unlock_mm(mm);
80018450:	0c004c37 	jal	800130dc <unlock_mm>
80018454:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/event.c:137
		return ret;
	}
	return ipc_check_timeout(timeout, saved_ticks);
}
80018458:	8fbf005c 	lw	ra,92(sp)
8001845c:	02001021 	move	v0,s0
80018460:	8fb70058 	lw	s7,88(sp)
80018464:	8fb60054 	lw	s6,84(sp)
80018468:	8fb50050 	lw	s5,80(sp)
8001846c:	8fb4004c 	lw	s4,76(sp)
80018470:	8fb30048 	lw	s3,72(sp)
80018474:	8fb20044 	lw	s2,68(sp)
80018478:	8fb10040 	lw	s1,64(sp)
8001847c:	8fb0003c 	lw	s0,60(sp)
80018480:	03e00008 	jr	ra
80018484:	27bd0060 	addiu	sp,sp,96
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
80018488:	0c006d04 	jal	8001b410 <intr_disable>
8001848c:	24150001 	li	s5,1
80018490:	080060c8 	j	80018320 <ipc_event_recv+0x100>
80018494:	00000000 	nop
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80018498:	0c006d00 	jal	8001b400 <intr_enable>
8001849c:	00000000 	nop
800184a0:	080060c2 	j	80018308 <ipc_event_recv+0xe8>
800184a4:	00000000 	nop

800184a8 <mbox_free>:
mbox_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:89
	return NULL;
}

static void mbox_free(struct msg_mbox *mbox)
{
	assert(mbox->state == CLOSING && mbox->inuse == 0);
800184a8:	8c830008 	lw	v1,8(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:88
	}
	return NULL;
}

static void mbox_free(struct msg_mbox *mbox)
{
800184ac:	27bdffe0 	addiu	sp,sp,-32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:89
	assert(mbox->state == CLOSING && mbox->inuse == 0);
800184b0:	24020002 	li	v0,2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:88
	}
	return NULL;
}

static void mbox_free(struct msg_mbox *mbox)
{
800184b4:	afb00014 	sw	s0,20(sp)
800184b8:	afbf001c 	sw	ra,28(sp)
800184bc:	afb10018 	sw	s1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:89
	assert(mbox->state == CLOSING && mbox->inuse == 0);
800184c0:	1462001d 	bne	v1,v0,80018538 <mbox_free+0x90>
800184c4:	00808021 	move	s0,a0
800184c8:	8c820004 	lw	v0,4(a0)
800184cc:	1440001a 	bnez	v0,80018538 <mbox_free+0x90>
800184d0:	24910014 	addiu	s1,a0,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:90
	assert(list_empty(&(mbox->msg_link)));
800184d4:	8c820018 	lw	v0,24(a0)
800184d8:	5622002e 	bnel	s1,v0,80018594 <mbox_free+0xec>
800184dc:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:91
	assert(wait_queue_empty(&(mbox->senders)));
800184e0:	0c0069b2 	jal	8001a6c8 <wait_queue_empty>
800184e4:	2484001c 	addiu	a0,a0,28
800184e8:	10400023 	beqz	v0,80018578 <mbox_free+0xd0>
800184ec:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:92
	assert(wait_queue_empty(&(mbox->receivers)));
800184f0:	0c0069b2 	jal	8001a6c8 <wait_queue_empty>
800184f4:	26040024 	addiu	a0,s0,36
800184f8:	10400017 	beqz	v0,80018558 <mbox_free+0xb0>
800184fc:	3c028015 	lui	v0,0x8015
list_add_before():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:80
 * Insert the new element @elm *before* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_before(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm->prev, listelm);
80018500:	8c436d00 	lw	v1,27904(v0)
mbox_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:96
	mbox->state = CLOSED;
	mbox->max_slots = mbox->slots = 0;
	list_add_before(&(free_mbox_list), &(mbox->msg_link));
}
80018504:	8fbf001c 	lw	ra,28(sp)
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
	elm->next = next;
80018508:	24446d00 	addiu	a0,v0,27904
mbox_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:93
{
	assert(mbox->state == CLOSING && mbox->inuse == 0);
	assert(list_empty(&(mbox->msg_link)));
	assert(wait_queue_empty(&(mbox->senders)));
	assert(wait_queue_empty(&(mbox->receivers)));
	mbox->state = CLOSED;
8001850c:	ae000008 	sw	zero,8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:94
	mbox->max_slots = mbox->slots = 0;
80018510:	ae000010 	sw	zero,16(s0)
80018514:	ae00000c 	sw	zero,12(s0)
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
80018518:	ac516d00 	sw	s1,27904(v0)
8001851c:	ac710004 	sw	s1,4(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->next = next;
	elm->prev = prev;
80018520:	ae030014 	sw	v1,20(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
	elm->next = next;
80018524:	ae040018 	sw	a0,24(s0)
mbox_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:96
	list_add_before(&(free_mbox_list), &(mbox->msg_link));
}
80018528:	8fb10018 	lw	s1,24(sp)
8001852c:	8fb00014 	lw	s0,20(sp)
80018530:	03e00008 	jr	ra
80018534:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:89
	return NULL;
}

static void mbox_free(struct msg_mbox *mbox)
{
	assert(mbox->state == CLOSING && mbox->inuse == 0);
80018538:	3c048002 	lui	a0,0x8002
8001853c:	3c068002 	lui	a2,0x8002
80018540:	3c078002 	lui	a3,0x8002
80018544:	24843a8c 	addiu	a0,a0,14988
80018548:	24050059 	li	a1,89
8001854c:	24c60e28 	addiu	a2,a2,3624
80018550:	0c006b0b 	jal	8001ac2c <__panic>
80018554:	24e73a94 	addiu	a3,a3,14996
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:92
	assert(list_empty(&(mbox->msg_link)));
	assert(wait_queue_empty(&(mbox->senders)));
	assert(wait_queue_empty(&(mbox->receivers)));
80018558:	3c048002 	lui	a0,0x8002
8001855c:	3c068002 	lui	a2,0x8002
80018560:	3c078002 	lui	a3,0x8002
80018564:	24843a8c 	addiu	a0,a0,14988
80018568:	2405005c 	li	a1,92
8001856c:	24c60e28 	addiu	a2,a2,3624
80018570:	0c006b0b 	jal	8001ac2c <__panic>
80018574:	24e73b04 	addiu	a3,a3,15108
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:91

static void mbox_free(struct msg_mbox *mbox)
{
	assert(mbox->state == CLOSING && mbox->inuse == 0);
	assert(list_empty(&(mbox->msg_link)));
	assert(wait_queue_empty(&(mbox->senders)));
80018578:	3c068002 	lui	a2,0x8002
8001857c:	3c078002 	lui	a3,0x8002
80018580:	24843a8c 	addiu	a0,a0,14988
80018584:	2405005b 	li	a1,91
80018588:	24c60e28 	addiu	a2,a2,3624
8001858c:	0c006b0b 	jal	8001ac2c <__panic>
80018590:	24e73ae0 	addiu	a3,a3,15072
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:90
}

static void mbox_free(struct msg_mbox *mbox)
{
	assert(mbox->state == CLOSING && mbox->inuse == 0);
	assert(list_empty(&(mbox->msg_link)));
80018594:	3c068002 	lui	a2,0x8002
80018598:	3c078002 	lui	a3,0x8002
8001859c:	24843a8c 	addiu	a0,a0,14988
800185a0:	2405005a 	li	a1,90
800185a4:	24c60e28 	addiu	a2,a2,3624
800185a8:	0c006b0b 	jal	8001ac2c <__panic>
800185ac:	24e73ac0 	addiu	a3,a3,15040

800185b0 <free_seg>:
free_seg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:190
	up(&sem_mbox_map);
	return ret;
}

static void free_seg(struct msg_seg *seg)
{
800185b0:	27bdffe8 	addiu	sp,sp,-24
800185b4:	afb00010 	sw	s0,16(sp)
800185b8:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:191
	if (seg->next != NULL) {
800185bc:	8c840000 	lw	a0,0(a0)
800185c0:	10800003 	beqz	a0,800185d0 <free_seg+0x20>
800185c4:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:192
		free_seg(seg->next);
800185c8:	0c00616c 	jal	800185b0 <free_seg>
800185cc:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:194
	}
	kfree(seg);
800185d0:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:195
}
800185d4:	8fbf0014 	lw	ra,20(sp)
800185d8:	8fb00010 	lw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:194
static void free_seg(struct msg_seg *seg)
{
	if (seg->next != NULL) {
		free_seg(seg->next);
	}
	kfree(seg);
800185dc:	080054b1 	j	800152c4 <kfree>
800185e0:	27bd0018 	addiu	sp,sp,24

800185e4 <free_msg>:
free_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:198
}

static void free_msg(struct msg_msg *msg)
{
800185e4:	27bdffe8 	addiu	sp,sp,-24
800185e8:	afb00010 	sw	s0,16(sp)
800185ec:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:199
	if (msg->next != NULL) {
800185f0:	8c840008 	lw	a0,8(a0)
800185f4:	10800003 	beqz	a0,80018604 <free_msg+0x20>
800185f8:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:200
		free_seg(msg->next);
800185fc:	0c00616c 	jal	800185b0 <free_seg>
80018600:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:202
	}
	kfree(msg);
80018604:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:203
}
80018608:	8fbf0014 	lw	ra,20(sp)
8001860c:	8fb00010 	lw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:202
static void free_msg(struct msg_msg *msg)
{
	if (msg->next != NULL) {
		free_seg(msg->next);
	}
	kfree(msg);
80018610:	080054b1 	j	800152c4 <kfree>
80018614:	27bd0018 	addiu	sp,sp,24

80018618 <add_msg>:
add_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:100
	list_add_before(&(free_mbox_list), &(mbox->msg_link));
}

static void add_msg(struct msg_mbox *mbox, struct msg_msg *msg, bool append)
{
	assert(mbox->state == OPENED);
80018618:	8c820008 	lw	v0,8(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:99
	mbox->max_slots = mbox->slots = 0;
	list_add_before(&(free_mbox_list), &(mbox->msg_link));
}

static void add_msg(struct msg_mbox *mbox, struct msg_msg *msg, bool append)
{
8001861c:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:100
	assert(mbox->state == OPENED);
80018620:	24030001 	li	v1,1
80018624:	1443001f 	bne	v0,v1,800186a4 <add_msg+0x8c>
80018628:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:101
	mbox->slots++;
8001862c:	8c830010 	lw	v1,16(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:102
	list_entry_t *list = &(mbox->msg_link), *le = &(msg->msg_link);
80018630:	24870014 	addiu	a3,a0,20
80018634:	24a2000c 	addiu	v0,a1,12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:101
}

static void add_msg(struct msg_mbox *mbox, struct msg_msg *msg, bool append)
{
	assert(mbox->state == OPENED);
	mbox->slots++;
80018638:	24630001 	addiu	v1,v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:103
	list_entry_t *list = &(mbox->msg_link), *le = &(msg->msg_link);
	if (append) {
8001863c:	14c0000d 	bnez	a2,80018674 <add_msg+0x5c>
80018640:	ac830010 	sw	v1,16(a0)
list_add_after():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:93
 * Insert the new element @elm *after* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_after(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm, listelm->next);
80018644:	8c830018 	lw	v1,24(a0)
add_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:109
		list_add_before(list, le);
	} else {
		list_add_after(list, le);
	}
	wakeup_first(&(mbox->receivers), WT_MBOX_RECV, 1);
}
80018648:	8fbf0014 	lw	ra,20(sp)
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
8001864c:	ac820018 	sw	v0,24(a0)
80018650:	ac620000 	sw	v0,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
	elm->next = next;
80018654:	aca30010 	sw	v1,16(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->prev = prev;
80018658:	aca7000c 	sw	a3,12(a1)
add_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:108
	if (append) {
		list_add_before(list, le);
	} else {
		list_add_after(list, le);
	}
	wakeup_first(&(mbox->receivers), WT_MBOX_RECV, 1);
8001865c:	3c058000 	lui	a1,0x8000
80018660:	24840024 	addiu	a0,a0,36
80018664:	24a50121 	addiu	a1,a1,289
80018668:	24060001 	li	a2,1
8001866c:	080069c9 	j	8001a724 <wakeup_first>
80018670:	27bd0018 	addiu	sp,sp,24
list_add_before():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:80
 * Insert the new element @elm *before* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_before(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm->prev, listelm);
80018674:	8c830014 	lw	v1,20(a0)
add_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:109
}
80018678:	8fbf0014 	lw	ra,20(sp)
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
8001867c:	ac820014 	sw	v0,20(a0)
80018680:	ac620004 	sw	v0,4(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->next = next;
	elm->prev = prev;
80018684:	aca3000c 	sw	v1,12(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
	elm->next = next;
80018688:	aca70010 	sw	a3,16(a1)
add_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:108
	if (append) {
		list_add_before(list, le);
	} else {
		list_add_after(list, le);
	}
	wakeup_first(&(mbox->receivers), WT_MBOX_RECV, 1);
8001868c:	3c058000 	lui	a1,0x8000
80018690:	24840024 	addiu	a0,a0,36
80018694:	24a50121 	addiu	a1,a1,289
80018698:	24060001 	li	a2,1
8001869c:	080069c9 	j	8001a724 <wakeup_first>
800186a0:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:100
	list_add_before(&(free_mbox_list), &(mbox->msg_link));
}

static void add_msg(struct msg_mbox *mbox, struct msg_msg *msg, bool append)
{
	assert(mbox->state == OPENED);
800186a4:	3c048002 	lui	a0,0x8002
800186a8:	3c068002 	lui	a2,0x8002
800186ac:	3c078002 	lui	a3,0x8002
800186b0:	24843a8c 	addiu	a0,a0,14988
800186b4:	24050064 	li	a1,100
800186b8:	24c60e28 	addiu	a2,a2,3624
800186bc:	0c006b0b 	jal	8001ac2c <__panic>
800186c0:	24e73b2c 	addiu	a3,a3,15148

800186c4 <mbox_init>:
mbox_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:63
static struct msg_mbox *mbox_map[MAX_MBOX_PAGES];
static list_entry_t free_mbox_list;
static semaphore_t sem_mbox_map;

void mbox_init(void)
{
800186c4:	3c028015 	lui	v0,0x8015
800186c8:	27bdffe8 	addiu	sp,sp,-24
800186cc:	24426b88 	addiu	v0,v0,27528
800186d0:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:62

static struct msg_mbox *mbox_map[MAX_MBOX_PAGES];
static list_entry_t free_mbox_list;
static semaphore_t sem_mbox_map;

void mbox_init(void)
800186d4:	24430164 	addiu	v1,v0,356
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:66
{
	int i;
	for (i = 0; i < MAX_MBOX_PAGES; i++) {
		mbox_map[i] = NULL;
800186d8:	ac400000 	sw	zero,0(v0)
800186dc:	24420004 	addiu	v0,v0,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:65
static semaphore_t sem_mbox_map;

void mbox_init(void)
{
	int i;
	for (i = 0; i < MAX_MBOX_PAGES; i++) {
800186e0:	5443fffe 	bnel	v0,v1,800186dc <mbox_init+0x18>
800186e4:	ac400000 	sw	zero,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:68
		mbox_map[i] = NULL;
	}
	sem_init(&sem_mbox_map, 1);
800186e8:	3c048015 	lui	a0,0x8015
800186ec:	24846cec 	addiu	a0,a0,27884
800186f0:	0c006717 	jal	80019c5c <sem_init>
800186f4:	24050001 	li	a1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:71
	list_init(&free_mbox_list);
	static_assert(MBOX_P_PAGE != 0);
}
800186f8:	8fbf0014 	lw	ra,20(sp)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
 * list_init - initialize a new entry
 * @elm:        new entry to be initialized
 * */
static inline void list_init(list_entry_t * elm)
{
	elm->prev = elm->next = elm;
800186fc:	3c038015 	lui	v1,0x8015
80018700:	24626d00 	addiu	v0,v1,27904
80018704:	ac420004 	sw	v0,4(v0)
80018708:	ac626d00 	sw	v0,27904(v1)
mbox_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:71
8001870c:	03e00008 	jr	ra
80018710:	27bd0018 	addiu	sp,sp,24

80018714 <ipc_mbox_init>:
ipc_mbox_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:176
	return mbox;
}

int ipc_mbox_init(unsigned int max_slots)
{
	if (max_slots == 0 || max_slots > MAX_MSG_SLOTS) {
80018714:	2482ffff 	addiu	v0,a0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:175
	local_intr_restore(intr_flag);
	return mbox;
}

int ipc_mbox_init(unsigned int max_slots)
{
80018718:	27bdffc0 	addiu	sp,sp,-64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:176
	if (max_slots == 0 || max_slots > MAX_MSG_SLOTS) {
8001871c:	2c421000 	sltiu	v0,v0,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:175
	local_intr_restore(intr_flag);
	return mbox;
}

int ipc_mbox_init(unsigned int max_slots)
{
80018720:	afb30024 	sw	s3,36(sp)
80018724:	afbf003c 	sw	ra,60(sp)
80018728:	afbe0038 	sw	s8,56(sp)
8001872c:	afb70034 	sw	s7,52(sp)
80018730:	afb60030 	sw	s6,48(sp)
80018734:	afb5002c 	sw	s5,44(sp)
80018738:	afb40028 	sw	s4,40(sp)
8001873c:	afb20020 	sw	s2,32(sp)
80018740:	afb1001c 	sw	s1,28(sp)
80018744:	afb00018 	sw	s0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:176
	if (max_slots == 0 || max_slots > MAX_MSG_SLOTS) {
80018748:	10400085 	beqz	v0,80018960 <ipc_mbox_init+0x24c>
8001874c:	00809821 	move	s3,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:181
		return -E_INVAL;
	}
	int ret = -E_NO_MEM;
	struct msg_mbox *mbox;
	down(&sem_mbox_map);
80018750:	3c148015 	lui	s4,0x8015
80018754:	0c00671f 	jal	80019c7c <down>
80018758:	26846cec 	addiu	a0,s4,27884
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8001875c:	40026000 	mfc0	v0,c0_status
80018760:	30420001 	andi	v0,v0,0x1
80018764:	10400005 	beqz	v0,8001877c <ipc_mbox_init+0x68>
80018768:	afa00010 	sw	zero,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8001876c:	0c006d04 	jal	8001b410 <intr_disable>
80018770:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:16
	return 1;
80018774:	24020001 	li	v0,1
80018778:	afa20010 	sw	v0,16(sp)
list_empty():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:126
 * list_empty - tests whether a list is empty
 * @list:       the list to test.
 * */
static inline bool list_empty(list_entry_t * list)
{
	return list->next == list;
8001877c:	3c108015 	lui	s0,0x8015
80018780:	26116d00 	addiu	s1,s0,27904
80018784:	8e220004 	lw	v0,4(s1)
new_mbox():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:131
static struct msg_mbox *new_mbox(unsigned int max_slots)
{
	bool intr_flag;
	struct msg_mbox *mbox = NULL;
	local_intr_save(intr_flag);
	if (list_empty(&free_mbox_list)) {
80018788:	10510023 	beq	v0,s1,80018818 <ipc_mbox_init+0x104>
8001878c:	3c168015 	lui	s6,0x8015
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
80018790:	8c430004 	lw	v1,4(v0)
80018794:	8c440000 	lw	a0,0(v0)
new_mbox():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:164
		} else if (list_empty(&free_mbox_list)) {
			goto out;
		}
	}
	assert(!list_empty(&free_mbox_list));
	mbox = le2mbox(list_next(&free_mbox_list), msg_link);
80018798:	2450ffec 	addiu	s0,v0,-20
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
8001879c:	ac830004 	sw	v1,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:170
	next->prev = prev;
800187a0:	ac640000 	sw	a0,0(v1)
new_mbox():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:166
	list_del_init(&(mbox->msg_link));
	mbox->state = OPENED;
800187a4:	24030001 	li	v1,1
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
 * list_init - initialize a new entry
 * @elm:        new entry to be initialized
 * */
static inline void list_init(list_entry_t * elm)
{
	elm->prev = elm->next = elm;
800187a8:	ac420004 	sw	v0,4(v0)
800187ac:	ac420000 	sw	v0,0(v0)
new_mbox():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:166
800187b0:	ac43fff4 	sw	v1,-12(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:167
	mbox->max_slots = max_slots;
800187b4:	ac53fff8 	sw	s3,-8(v0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
800187b8:	8fa20010 	lw	v0,16(sp)
800187bc:	10400003 	beqz	v0,800187cc <ipc_mbox_init+0xb8>
800187c0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
800187c4:	0c006d00 	jal	8001b400 <intr_enable>
800187c8:	00000000 	nop
ipc_mbox_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:182
		return -E_INVAL;
	}
	int ret = -E_NO_MEM;
	struct msg_mbox *mbox;
	down(&sem_mbox_map);
	if ((mbox = new_mbox(max_slots)) != NULL) {
800187cc:	12000002 	beqz	s0,800187d8 <ipc_mbox_init+0xc4>
800187d0:	2402fff4 	li	v0,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:183
		ret = mbox->id;
800187d4:	8e020000 	lw	v0,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:185
	}
	up(&sem_mbox_map);
800187d8:	26846cec 	addiu	a0,s4,27884
800187dc:	0c00671d 	jal	80019c74 <up>
800187e0:	afa20014 	sw	v0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:186
	return ret;
800187e4:	8fa20014 	lw	v0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:187
}
800187e8:	8fbf003c 	lw	ra,60(sp)
800187ec:	8fbe0038 	lw	s8,56(sp)
800187f0:	8fb70034 	lw	s7,52(sp)
800187f4:	8fb60030 	lw	s6,48(sp)
800187f8:	8fb5002c 	lw	s5,44(sp)
800187fc:	8fb40028 	lw	s4,40(sp)
80018800:	8fb30024 	lw	s3,36(sp)
80018804:	8fb20020 	lw	s2,32(sp)
80018808:	8fb1001c 	lw	s1,28(sp)
8001880c:	8fb00018 	lw	s0,24(sp)
80018810:	03e00008 	jr	ra
80018814:	27bd0040 	addiu	sp,sp,64
new_mbox():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:134
	struct msg_mbox *mbox = NULL;
	local_intr_save(intr_flag);
	if (list_empty(&free_mbox_list)) {
		int i, id;
		for (i = 0; i < MAX_MBOX_PAGES; i++) {
			if (mbox_map[i] == NULL) {
80018818:	8ec26b88 	lw	v0,27528(s6)
8001881c:	1040005f 	beqz	v0,8001899c <ipc_mbox_init+0x288>
80018820:	3c028015 	lui	v0,0x8015
80018824:	24426b8c 	addiu	v0,v0,27532
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:133
	bool intr_flag;
	struct msg_mbox *mbox = NULL;
	local_intr_save(intr_flag);
	if (list_empty(&free_mbox_list)) {
		int i, id;
		for (i = 0; i < MAX_MBOX_PAGES; i++) {
80018828:	24150001 	li	s5,1
8001882c:	24120001 	li	s2,1
80018830:	08006211 	j	80018844 <ipc_mbox_init+0x130>
80018834:	24040059 	li	a0,89
80018838:	0240a821 	move	s5,s2
8001883c:	12440050 	beq	s2,a0,80018980 <ipc_mbox_init+0x26c>
80018840:	24420004 	addiu	v0,v0,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:134
			if (mbox_map[i] == NULL) {
80018844:	8c430000 	lw	v1,0(v0)
80018848:	5460fffb 	bnezl	v1,80018838 <ipc_mbox_init+0x124>
8001884c:	26520001 	addiu	s2,s2,1
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80018850:	8fa30010 	lw	v1,16(sp)
80018854:	10600003 	beqz	v1,80018864 <ipc_mbox_init+0x150>
80018858:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
8001885c:	0c006d00 	jal	8001b400 <intr_enable>
80018860:	00000000 	nop
new_mbox():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:143
		if (i == MAX_MBOX_PAGES) {
			goto out;
		}
		local_intr_restore(intr_flag);

		struct Page *page = alloc_page();
80018864:	0c007425 	jal	8001d094 <alloc_pages>
80018868:	24040001 	li	a0,1
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8001886c:	40036000 	mfc0	v1,c0_status
80018870:	30630001 	andi	v1,v1,0x1
80018874:	1460003c 	bnez	v1,80018968 <ipc_mbox_init+0x254>
80018878:	afa00010 	sw	zero,16(sp)
new_mbox():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:146

		local_intr_save(intr_flag);
		if (page != NULL) {
8001887c:	10400042 	beqz	v0,80018988 <ipc_mbox_init+0x274>
80018880:	3c038015 	lui	v1,0x8015
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
80018884:	8c6477bc 	lw	a0,30652(v1)
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
80018888:	3c038015 	lui	v1,0x8015
8001888c:	8c637770 	lw	v1,30576(v1)
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
80018890:	00441023 	subu	v0,v0,a0
80018894:	00021143 	sra	v0,v0,0x5
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
80018898:	00021300 	sll	v0,v0,0xc
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001889c:	00022302 	srl	a0,v0,0xc
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
	return page - pages;
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
800188a0:	3c078000 	lui	a3,0x8000
800188a4:	24e71000 	addiu	a3,a3,4096
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
800188a8:	0083182b 	sltu	v1,a0,v1
800188ac:	1060003e 	beqz	v1,800189a8 <ipc_mbox_init+0x294>
800188b0:	00473821 	addu	a3,v0,a3
new_mbox():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:147
			id = i * MBOX_P_PAGE;
800188b4:	0015b840 	sll	s7,s5,0x1
800188b8:	02f5a821 	addu	s5,s7,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:148
			mbox = mbox_map[i] = (struct msg_mbox *)page2kva(page);
800188bc:	00121080 	sll	v0,s2,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:147

		struct Page *page = alloc_page();

		local_intr_save(intr_flag);
		if (page != NULL) {
			id = i * MBOX_P_PAGE;
800188c0:	0015b940 	sll	s7,s5,0x5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:148
			mbox = mbox_map[i] = (struct msg_mbox *)page2kva(page);
800188c4:	26d66b88 	addiu	s6,s6,27528
800188c8:	0056b021 	addu	s6,v0,s6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:147

		struct Page *page = alloc_page();

		local_intr_save(intr_flag);
		if (page != NULL) {
			id = i * MBOX_P_PAGE;
800188cc:	02f5b823 	subu	s7,s7,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:148
			mbox = mbox_map[i] = (struct msg_mbox *)page2kva(page);
800188d0:	aec70000 	sw	a3,0(s6)
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
800188d4:	00e09021 	move	s2,a3
new_mbox():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:174
out:
	local_intr_restore(intr_flag);
	return mbox;
}

int ipc_mbox_init(unsigned int max_slots)
800188d8:	24f60018 	addiu	s6,a3,24
800188dc:	26fe005d 	addiu	s8,s7,93
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:153
			mbox = mbox_map[i] = (struct msg_mbox *)page2kva(page);
			for (i = 0; i < MBOX_P_PAGE; i++, id++, mbox++) {
				mbox->id = id, mbox->inuse = 0;
				mbox->state = CLOSED;
				mbox->max_slots = mbox->slots = 0;
				list_init(&(mbox->msg_link));
800188e0:	26550014 	addiu	s5,s2,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:150
		local_intr_save(intr_flag);
		if (page != NULL) {
			id = i * MBOX_P_PAGE;
			mbox = mbox_map[i] = (struct msg_mbox *)page2kva(page);
			for (i = 0; i < MBOX_P_PAGE; i++, id++, mbox++) {
				mbox->id = id, mbox->inuse = 0;
800188e4:	ae570000 	sw	s7,0(s2)
800188e8:	ae400004 	sw	zero,4(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:151
				mbox->state = CLOSED;
800188ec:	ae400008 	sw	zero,8(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:152
				mbox->max_slots = mbox->slots = 0;
800188f0:	ae400010 	sw	zero,16(s2)
800188f4:	ae40000c 	sw	zero,12(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:154
				list_init(&(mbox->msg_link));
				wait_queue_init(&(mbox->senders));
800188f8:	2644001c 	addiu	a0,s2,28
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
800188fc:	aed50000 	sw	s5,0(s6)
new_mbox():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:154
80018900:	0c00694b 	jal	8001a52c <wait_queue_init>
80018904:	aed5fffc 	sw	s5,-4(s6)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:155
				wait_queue_init(&(mbox->receivers));
80018908:	0c00694b 	jal	8001a52c <wait_queue_init>
8001890c:	26440024 	addiu	a0,s2,36
list_add_before():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:80
 * Insert the new element @elm *before* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_before(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm->prev, listelm);
80018910:	8e026d00 	lw	v0,27904(s0)
new_mbox():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:149

		local_intr_save(intr_flag);
		if (page != NULL) {
			id = i * MBOX_P_PAGE;
			mbox = mbox_map[i] = (struct msg_mbox *)page2kva(page);
			for (i = 0; i < MBOX_P_PAGE; i++, id++, mbox++) {
80018914:	26f70001 	addiu	s7,s7,1
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
80018918:	ae156d00 	sw	s5,27904(s0)
8001891c:	ac550004 	sw	s5,4(v0)
new_mbox():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:149
80018920:	2652002c 	addiu	s2,s2,44
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
	elm->next = next;
80018924:	aed10000 	sw	s1,0(s6)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->prev = prev;
80018928:	aec2fffc 	sw	v0,-4(s6)
new_mbox():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:149
8001892c:	16feffec 	bne	s7,s8,800188e0 <ipc_mbox_init+0x1cc>
80018930:	26d6002c 	addiu	s6,s6,44
list_empty():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:126
 * list_empty - tests whether a list is empty
 * @list:       the list to test.
 * */
static inline bool list_empty(list_entry_t * list)
{
	return list->next == list;
80018934:	8e220004 	lw	v0,4(s1)
new_mbox():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:163
			}
		} else if (list_empty(&free_mbox_list)) {
			goto out;
		}
	}
	assert(!list_empty(&free_mbox_list));
80018938:	5451ff96 	bnel	v0,s1,80018794 <ipc_mbox_init+0x80>
8001893c:	8c430004 	lw	v1,4(v0)
80018940:	3c048002 	lui	a0,0x8002
80018944:	3c068002 	lui	a2,0x8002
80018948:	3c078002 	lui	a3,0x8002
8001894c:	24843a8c 	addiu	a0,a0,14988
80018950:	240500a3 	li	a1,163
80018954:	24c60e28 	addiu	a2,a2,3624
80018958:	0c006b0b 	jal	8001ac2c <__panic>
8001895c:	24e73b44 	addiu	a3,a3,15172
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:177
}

int ipc_mbox_init(unsigned int max_slots)
{
	if (max_slots == 0 || max_slots > MAX_MSG_SLOTS) {
		return -E_INVAL;
80018960:	080061fa 	j	800187e8 <ipc_mbox_init+0xd4>
80018964:	2402ffea 	li	v0,-22
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80018968:	0c006d04 	jal	8001b410 <intr_disable>
8001896c:	afa20014 	sw	v0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:16
	return 1;
80018970:	24030001 	li	v1,1
80018974:	afa30010 	sw	v1,16(sp)
80018978:	0800621f 	j	8001887c <ipc_mbox_init+0x168>
8001897c:	8fa20014 	lw	v0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:129
}

static struct msg_mbox *new_mbox(unsigned int max_slots)
{
	bool intr_flag;
	struct msg_mbox *mbox = NULL;
80018980:	080061ee 	j	800187b8 <ipc_mbox_init+0xa4>
80018984:	00008021 	move	s0,zero
list_empty():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:126
80018988:	8e220004 	lw	v0,4(s1)
new_mbox():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:159
				wait_queue_init(&(mbox->senders));
				wait_queue_init(&(mbox->receivers));
				list_add_before(&(free_mbox_list),
						&(mbox->msg_link));
			}
		} else if (list_empty(&free_mbox_list)) {
8001898c:	1451ff80 	bne	v0,s1,80018790 <ipc_mbox_init+0x7c>
80018990:	00008021 	move	s0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80018994:	080061ef 	j	800187bc <ipc_mbox_init+0xa8>
80018998:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:133
	bool intr_flag;
	struct msg_mbox *mbox = NULL;
	local_intr_save(intr_flag);
	if (list_empty(&free_mbox_list)) {
		int i, id;
		for (i = 0; i < MAX_MBOX_PAGES; i++) {
8001899c:	0000a821 	move	s5,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:134
			if (mbox_map[i] == NULL) {
800189a0:	08006214 	j	80018850 <ipc_mbox_init+0x13c>
800189a4:	00009021 	move	s2,zero
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
800189a8:	3c048002 	lui	a0,0x8002
800189ac:	3c068002 	lui	a2,0x8002
800189b0:	248429ec 	addiu	a0,a0,10732
800189b4:	2405006a 	li	a1,106
800189b8:	0c006b0b 	jal	8001ac2c <__panic>
800189bc:	24c62a74 	addiu	a2,a2,10868

800189c0 <ipc_mbox_send>:
ipc_mbox_send():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:289
	local_intr_restore(intr_flag);
	return ret;
}

int ipc_mbox_send(int id, struct mboxbuf *buf, unsigned int timeout)
{
800189c0:	27bdff70 	addiu	sp,sp,-144
get_mbox():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:75
	static_assert(MBOX_P_PAGE != 0);
}

static struct msg_mbox *get_mbox(int id)
{
	if (id >= 0 && id < MAX_MBOX_NUM) {
800189c4:	2c822000 	sltiu	v0,a0,8192
ipc_mbox_send():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:289
	local_intr_restore(intr_flag);
	return ret;
}

int ipc_mbox_send(int id, struct mboxbuf *buf, unsigned int timeout)
{
800189c8:	afb40078 	sw	s4,120(sp)
800189cc:	afb30074 	sw	s3,116(sp)
800189d0:	afb20070 	sw	s2,112(sp)
800189d4:	afbf008c 	sw	ra,140(sp)
800189d8:	afbe0088 	sw	s8,136(sp)
800189dc:	afb70084 	sw	s7,132(sp)
800189e0:	afb60080 	sw	s6,128(sp)
800189e4:	afb5007c 	sw	s5,124(sp)
800189e8:	afb1006c 	sw	s1,108(sp)
800189ec:	afb00068 	sw	s0,104(sp)
800189f0:	00a09821 	move	s3,a1
800189f4:	00c0a021 	move	s4,a2
get_mbox():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:75
	static_assert(MBOX_P_PAGE != 0);
}

static struct msg_mbox *get_mbox(int id)
{
	if (id >= 0 && id < MAX_MBOX_NUM) {
800189f8:	1040001c 	beqz	v0,80018a6c <ipc_mbox_send+0xac>
800189fc:	2412ffea 	li	s2,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:76
		int i = id / MBOX_P_PAGE, j = id % MBOX_P_PAGE;
80018a00:	3c02b02c 	lui	v0,0xb02c
80018a04:	24420b03 	addiu	v0,v0,2819
80018a08:	00820019 	multu	a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:77
		if (mbox_map[i] != NULL) {
80018a0c:	3c058015 	lui	a1,0x8015
80018a10:	24a56b88 	addiu	a1,a1,27528
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:76
}

static struct msg_mbox *get_mbox(int id)
{
	if (id >= 0 && id < MAX_MBOX_NUM) {
		int i = id / MBOX_P_PAGE, j = id % MBOX_P_PAGE;
80018a14:	00001010 	mfhi	v0
80018a18:	00021182 	srl	v0,v0,0x6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:77
		if (mbox_map[i] != NULL) {
80018a1c:	00021880 	sll	v1,v0,0x2
80018a20:	afa30058 	sw	v1,88(sp)
80018a24:	00a31821 	addu	v1,a1,v1
80018a28:	8c630000 	lw	v1,0(v1)
80018a2c:	1060000f 	beqz	v1,80018a6c <ipc_mbox_send+0xac>
80018a30:	00022840 	sll	a1,v0,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:76
}

static struct msg_mbox *get_mbox(int id)
{
	if (id >= 0 && id < MAX_MBOX_NUM) {
		int i = id / MBOX_P_PAGE, j = id % MBOX_P_PAGE;
80018a34:	00a21021 	addu	v0,a1,v0
80018a38:	00022940 	sll	a1,v0,0x5
80018a3c:	00a21023 	subu	v0,a1,v0
80018a40:	00822023 	subu	a0,a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:78
		if (mbox_map[i] != NULL) {
			struct msg_mbox *mbox = mbox_map[i] + j;
80018a44:	00041080 	sll	v0,a0,0x2
80018a48:	0004f100 	sll	s8,a0,0x4
80018a4c:	03c2f023 	subu	s8,s8,v0
80018a50:	03c42023 	subu	a0,s8,a0
80018a54:	0004f080 	sll	s8,a0,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:79
			if (mbox->state == OPENED) {
80018a58:	007e1821 	addu	v1,v1,s8
80018a5c:	8c630008 	lw	v1,8(v1)
80018a60:	24020001 	li	v0,1
80018a64:	1062000e 	beq	v1,v0,80018aa0 <ipc_mbox_send+0xe0>
80018a68:	3c118015 	lui	s1,0x8015
ipc_mbox_send():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:337
			ret = ipc_check_timeout(timeout, saved_ticks);
		}
		free_msg(msg);
	}
	return ret;
}
80018a6c:	8fbf008c 	lw	ra,140(sp)
80018a70:	02401021 	move	v0,s2
80018a74:	8fbe0088 	lw	s8,136(sp)
80018a78:	8fb70084 	lw	s7,132(sp)
80018a7c:	8fb60080 	lw	s6,128(sp)
80018a80:	8fb5007c 	lw	s5,124(sp)
80018a84:	8fb40078 	lw	s4,120(sp)
80018a88:	8fb30074 	lw	s3,116(sp)
80018a8c:	8fb20070 	lw	s2,112(sp)
80018a90:	8fb1006c 	lw	s1,108(sp)
80018a94:	8fb00068 	lw	s0,104(sp)
80018a98:	03e00008 	jr	ra
80018a9c:	27bd0090 	addiu	sp,sp,144
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:296
		return -E_INVAL;
	}

	struct msg_msg *msg;
	struct msg_mbox *mbox;
	struct mm_struct *mm = current->mm;
80018aa0:	8e2277a4 	lw	v0,30628(s1)
80018aa4:	8c500020 	lw	s0,32(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:301
	struct mboxbuf __local_buf, *local_buf = &__local_buf;

	int ret = -E_INVAL;

	lock_mm(mm);
80018aa8:	0c004c26 	jal	80013098 <lock_mm>
80018aac:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:304
	{
		if (copy_from_user
		    (mm, local_buf, buf, sizeof(struct mboxbuf), 0)) {
80018ab0:	02002021 	move	a0,s0
80018ab4:	27a50018 	addiu	a1,sp,24
80018ab8:	02603021 	move	a2,s3
80018abc:	24070010 	li	a3,16
80018ac0:	0c00792e 	jal	8001e4b8 <copy_from_user>
80018ac4:	afa00010 	sw	zero,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:303

	int ret = -E_INVAL;

	lock_mm(mm);
	{
		if (copy_from_user
80018ac8:	10400006 	beqz	v0,80018ae4 <ipc_mbox_send+0x124>
80018acc:	8fb7001c 	lw	s7,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:306
		    (mm, local_buf, buf, sizeof(struct mboxbuf), 0)) {
			size_t len = local_buf->len;
			if (0 < len && len <= MAX_MSG_BYTES) {
80018ad0:	3c020001 	lui	v0,0x1
80018ad4:	26e3ffff 	addiu	v1,s7,-1
80018ad8:	0062102b 	sltu	v0,v1,v0
80018adc:	14400010 	bnez	v0,80018b20 <ipc_mbox_send+0x160>
80018ae0:	8fb60024 	lw	s6,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:318
					     NULL) ? 0 : -E_NO_MEM;
				}
			}
		}
	}
	unlock_mm(mm);
80018ae4:	0c004c37 	jal	800130dc <unlock_mm>
80018ae8:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:337
			ret = ipc_check_timeout(timeout, saved_ticks);
		}
		free_msg(msg);
	}
	return ret;
}
80018aec:	8fbf008c 	lw	ra,140(sp)
80018af0:	02401021 	move	v0,s2
80018af4:	8fbe0088 	lw	s8,136(sp)
80018af8:	8fb70084 	lw	s7,132(sp)
80018afc:	8fb60080 	lw	s6,128(sp)
80018b00:	8fb5007c 	lw	s5,124(sp)
80018b04:	8fb40078 	lw	s4,120(sp)
80018b08:	8fb30074 	lw	s3,116(sp)
80018b0c:	8fb20070 	lw	s2,112(sp)
80018b10:	8fb1006c 	lw	s1,108(sp)
80018b14:	8fb00068 	lw	s0,104(sp)
80018b18:	03e00008 	jr	ra
80018b1c:	27bd0090 	addiu	sp,sp,144
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:308
		if (copy_from_user
		    (mm, local_buf, buf, sizeof(struct mboxbuf), 0)) {
			size_t len = local_buf->len;
			if (0 < len && len <= MAX_MSG_BYTES) {
				void *src = local_buf->data;
				if (user_mem_check(mm, (uintptr_t) src, len, 0)) {
80018b20:	02002021 	move	a0,s0
80018b24:	02e03021 	move	a2,s7
80018b28:	02c02821 	move	a1,s6
80018b2c:	0c005077 	jal	800141dc <user_mem_check>
80018b30:	00003821 	move	a3,zero
80018b34:	1040ffeb 	beqz	v0,80018ae4 <ipc_mbox_send+0x124>
80018b38:	2ee201ed 	sltiu	v0,s7,493
80018b3c:	241201ec 	li	s2,492
80018b40:	02e2900b 	movn	s2,s7,v0
load_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:212
	size_t alen, bytes = len;
	if ((alen = len) > MAX_MSG_DATALEN) {
		alen = MAX_MSG_DATALEN;
	}
	struct msg_msg *msg;
	if ((msg = kmalloc(sizeof(struct msg_msg) + alen)) == NULL) {
80018b44:	0c005486 	jal	80015218 <kmalloc>
80018b48:	26440014 	addiu	a0,s2,20
80018b4c:	104000d5 	beqz	v0,80018ea4 <ipc_mbox_send+0x4e4>
80018b50:	afa2005c 	sw	v0,92(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:216
		return NULL;
	}

	struct msg_seg **segp = &(msg->next);
80018b54:	24550008 	addiu	s5,v0,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:218

	void *dst = msg + 1;
80018b58:	24450014 	addiu	a1,v0,20
80018b5c:	080062e3 	j	80018b8c <ipc_mbox_send+0x1cc>
80018b60:	02e09821 	move	s3,s7
80018b64:	2e7201ed 	sltiu	s2,s3,493
80018b68:	240601ec 	li	a2,492
80018b6c:	0272300b 	movn	a2,s3,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:226
	while (len > 0) {
		if ((alen = len) > MAX_MSG_DATALEN) {
			alen = MAX_MSG_DATALEN;
		}
		struct msg_seg *seg;
		if ((seg = kmalloc(sizeof(struct msg_seg) + alen)) == NULL) {
80018b70:	24c40004 	addiu	a0,a2,4
80018b74:	0c005486 	jal	80015218 <kmalloc>
80018b78:	00c09021 	move	s2,a2
80018b7c:	104000c7 	beqz	v0,80018e9c <ipc_mbox_send+0x4dc>
80018b80:	24450004 	addiu	a1,v0,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:229
			goto failed;
		}
		*segp = seg, segp = &(seg->next);
80018b84:	aea20000 	sw	v0,0(s5)
80018b88:	0040a821 	move	s5,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:232
		dst = seg + 1;
inside:
		copy_from_user(current->mm, dst, src, alen, 0);
80018b8c:	8e2277a4 	lw	v0,30628(s1)
80018b90:	3c038015 	lui	v1,0x8015
80018b94:	02c03021 	move	a2,s6
80018b98:	8c440020 	lw	a0,32(v0)
80018b9c:	02403821 	move	a3,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:233
		len -= alen, src = ((char *)src) + alen;
80018ba0:	02729823 	subu	s3,s3,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:232
			goto failed;
		}
		*segp = seg, segp = &(seg->next);
		dst = seg + 1;
inside:
		copy_from_user(current->mm, dst, src, alen, 0);
80018ba4:	afa30064 	sw	v1,100(sp)
80018ba8:	afa00010 	sw	zero,16(sp)
80018bac:	0c00792e 	jal	8001e4b8 <copy_from_user>
80018bb0:	02d2b021 	addu	s6,s6,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:234
		len -= alen, src = ((char *)src) + alen;
		*segp = NULL;
80018bb4:	aea00000 	sw	zero,0(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:221
	struct msg_seg **segp = &(msg->next);

	void *dst = msg + 1;
	goto inside;

	while (len > 0) {
80018bb8:	1660ffea 	bnez	s3,80018b64 <ipc_mbox_send+0x1a4>
80018bbc:	8fa30064 	lw	v1,100(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:238
		len -= alen, src = ((char *)src) + alen;
		*segp = NULL;
	}

	msg->bytes = bytes;
	msg->pid = current->pid;
80018bc0:	8c6277a4 	lw	v0,30628(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:237
		copy_from_user(current->mm, dst, src, alen, 0);
		len -= alen, src = ((char *)src) + alen;
		*segp = NULL;
	}

	msg->bytes = bytes;
80018bc4:	8fa4005c 	lw	a0,92(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:238
	msg->pid = current->pid;
80018bc8:	8fa5005c 	lw	a1,92(sp)
80018bcc:	8c420004 	lw	v0,4(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:237
		copy_from_user(current->mm, dst, src, alen, 0);
		len -= alen, src = ((char *)src) + alen;
		*segp = NULL;
	}

	msg->bytes = bytes;
80018bd0:	ac970004 	sw	s7,4(a0)
ipc_mbox_send():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:318
					     NULL) ? 0 : -E_NO_MEM;
				}
			}
		}
	}
	unlock_mm(mm);
80018bd4:	02002021 	move	a0,s0
80018bd8:	0c004c37 	jal	800130dc <unlock_mm>
80018bdc:	aca20000 	sw	v0,0(a1)
get_mbox():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:77

static struct msg_mbox *get_mbox(int id)
{
	if (id >= 0 && id < MAX_MBOX_NUM) {
		int i = id / MBOX_P_PAGE, j = id % MBOX_P_PAGE;
		if (mbox_map[i] != NULL) {
80018be0:	8fa40058 	lw	a0,88(sp)
80018be4:	3c068015 	lui	a2,0x8015
80018be8:	24c66b88 	addiu	a2,a2,27528
80018bec:	00c41021 	addu	v0,a2,a0
80018bf0:	8c420000 	lw	v0,0(v0)
80018bf4:	8fa30064 	lw	v1,100(sp)
80018bf8:	10400006 	beqz	v0,80018c14 <ipc_mbox_send+0x254>
80018bfc:	2412ffea 	li	s2,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:78
			struct msg_mbox *mbox = mbox_map[i] + j;
80018c00:	005ef021 	addu	s8,v0,s8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:79
			if (mbox->state == OPENED) {
80018c04:	8fc40008 	lw	a0,8(s8)
80018c08:	24020001 	li	v0,1
80018c0c:	10820010 	beq	a0,v0,80018c50 <ipc_mbox_send+0x290>
80018c10:	00000000 	nop
ipc_mbox_send():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:334
				return 0;
			}
			assert(flags == WT_INTERRUPTED);
			ret = ipc_check_timeout(timeout, saved_ticks);
		}
		free_msg(msg);
80018c14:	0c006179 	jal	800185e4 <free_msg>
80018c18:	8fa4005c 	lw	a0,92(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:337
	}
	return ret;
}
80018c1c:	8fbf008c 	lw	ra,140(sp)
80018c20:	02401021 	move	v0,s2
80018c24:	8fbe0088 	lw	s8,136(sp)
80018c28:	8fb70084 	lw	s7,132(sp)
80018c2c:	8fb60080 	lw	s6,128(sp)
80018c30:	8fb5007c 	lw	s5,124(sp)
80018c34:	8fb40078 	lw	s4,120(sp)
80018c38:	8fb30074 	lw	s3,116(sp)
80018c3c:	8fb20070 	lw	s2,112(sp)
80018c40:	8fb1006c 	lw	s1,108(sp)
80018c44:	8fb00068 	lw	s0,104(sp)
80018c48:	03e00008 	jr	ra
80018c4c:	27bd0090 	addiu	sp,sp,144
ipc_timer_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:28

static inline timer_t *ipc_timer_init(unsigned int timeout,
				      unsigned long *saved_ticks,
				      timer_t * timer)
{
	if (timeout != 0) {
80018c50:	1280000c 	beqz	s4,80018c84 <ipc_mbox_send+0x2c4>
80018c54:	00008021 	move	s0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:30
		*saved_ticks = ticks;
		return timer_init(timer, pls_read(current), timeout);
80018c58:	8c6277a4 	lw	v0,30628(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:29
static inline timer_t *ipc_timer_init(unsigned int timeout,
				      unsigned long *saved_ticks,
				      timer_t * timer)
{
	if (timeout != 0) {
		*saved_ticks = ticks;
80018c5c:	3c038015 	lui	v1,0x8015
80018c60:	8c6377ac 	lw	v1,30636(v1)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
 * list_init - initialize a new entry
 * @elm:        new entry to be initialized
 * */
static inline void list_init(list_entry_t * elm)
{
	elm->prev = elm->next = elm;
80018c64:	27a50050 	addiu	a1,sp,80
timer_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.h:28
    to_struct((le), timer_t, member)

static inline timer_t *timer_init(timer_t * timer, struct proc_struct *proc,
				  int expires)
{
	timer->expires = expires;
80018c68:	afb4003c 	sw	s4,60(sp)
ipc_timer_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:29
80018c6c:	afa30060 	sw	v1,96(sp)
timer_init():
	timer->proc = proc;
80018c70:	afa20040 	sw	v0,64(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.h:30
	timer->linux_timer.linux_timer = NULL;
80018c74:	afa00044 	sw	zero,68(sp)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
80018c78:	afa50054 	sw	a1,84(sp)
80018c7c:	afa50050 	sw	a1,80(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:325
	if (ret == 0) {
		ret = -E_INVAL;
		if ((mbox = get_mbox(id)) != NULL) {
			unsigned long saved_ticks;
			timer_t __timer, *timer =
			    ipc_timer_init(timeout, &saved_ticks, &__timer);
80018c80:	27b0003c 	addiu	s0,sp,60
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80018c84:	40026000 	mfc0	v0,c0_status
80018c88:	30420001 	andi	v0,v0,0x1
80018c8c:	14400075 	bnez	v0,80018e64 <ipc_mbox_send+0x4a4>
80018c90:	00000000 	nop
80018c94:	24160001 	li	s6,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:13
		return 0;
80018c98:	00008821 	move	s1,zero
send_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:252
send_msg(struct msg_mbox *mbox, struct msg_msg *msg, timer_t * timer)
{
	uint32_t ret;
	bool intr_flag;
	local_intr_save(intr_flag);
	mbox->inuse++;
80018c9c:	8fc20004 	lw	v0,4(s8)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:256
	wait_t __wait, *wait = &__wait;
	while (mbox->max_slots <= mbox->slots) {
		assert(mbox->state == OPENED);
		wait_current_set(&(mbox->senders), wait, WT_MBOX_SEND);
80018ca0:	3c138000 	lui	s3,0x8000
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:255
	bool intr_flag;
	local_intr_save(intr_flag);
	mbox->inuse++;
	wait_t __wait, *wait = &__wait;
	while (mbox->max_slots <= mbox->slots) {
		assert(mbox->state == OPENED);
80018ca4:	24120001 	li	s2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:252
send_msg(struct msg_mbox *mbox, struct msg_msg *msg, timer_t * timer)
{
	uint32_t ret;
	bool intr_flag;
	local_intr_save(intr_flag);
	mbox->inuse++;
80018ca8:	24420001 	addiu	v0,v0,1
80018cac:	afc20004 	sw	v0,4(s8)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:256
	wait_t __wait, *wait = &__wait;
	while (mbox->max_slots <= mbox->slots) {
		assert(mbox->state == OPENED);
		wait_current_set(&(mbox->senders), wait, WT_MBOX_SEND);
80018cb0:	27d5001c 	addiu	s5,s8,28
80018cb4:	26730120 	addiu	s3,s3,288
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:254
	uint32_t ret;
	bool intr_flag;
	local_intr_save(intr_flag);
	mbox->inuse++;
	wait_t __wait, *wait = &__wait;
	while (mbox->max_slots <= mbox->slots) {
80018cb8:	8fc2000c 	lw	v0,12(s8)
80018cbc:	8fc30010 	lw	v1,16(s8)
80018cc0:	0062202b 	sltu	a0,v1,v0
80018cc4:	1480006b 	bnez	a0,80018e74 <ipc_mbox_send+0x4b4>
80018cc8:	24040001 	li	a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:255
		assert(mbox->state == OPENED);
80018ccc:	16d20077 	bne	s6,s2,80018eac <ipc_mbox_send+0x4ec>
80018cd0:	02a02021 	move	a0,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:256
		wait_current_set(&(mbox->senders), wait, WT_MBOX_SEND);
80018cd4:	27a50028 	addiu	a1,sp,40
80018cd8:	0c006a00 	jal	8001a800 <wait_current_set>
80018cdc:	02603021 	move	a2,s3
ipc_add_timer():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:12
#include <sched.h>
#include <error.h>

static inline void ipc_add_timer(timer_t * timer)
{
	if (timer != NULL) {
80018ce0:	12000003 	beqz	s0,80018cf0 <ipc_mbox_send+0x330>
80018ce4:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:13
		add_timer(timer);
80018ce8:	0c0005e5 	jal	80001794 <add_timer>
80018cec:	02002021 	move	a0,s0
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80018cf0:	12200003 	beqz	s1,80018d00 <ipc_mbox_send+0x340>
80018cf4:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
80018cf8:	0c006d00 	jal	8001b400 <intr_enable>
80018cfc:	00000000 	nop
send_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:260
		ipc_add_timer(timer);
		local_intr_restore(intr_flag);

		schedule();
80018d00:	0c00059f 	jal	8000167c <schedule>
80018d04:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80018d08:	40026000 	mfc0	v0,c0_status
80018d0c:	30420001 	andi	v0,v0,0x1
80018d10:	1440002b 	bnez	v0,80018dc0 <ipc_mbox_send+0x400>
80018d14:	00008821 	move	s1,zero
ipc_del_timer():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:19
	}
}

static inline void ipc_del_timer(timer_t * timer)
{
	if (timer != NULL) {
80018d18:	12000003 	beqz	s0,80018d28 <ipc_mbox_send+0x368>
80018d1c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:20
		del_timer(timer);
80018d20:	0c00062d 	jal	800018b4 <del_timer>
80018d24:	02002021 	move	a0,s0
send_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:264

		local_intr_save(intr_flag);
		ipc_del_timer(timer);
		wait_current_del(&(mbox->senders), wait);
80018d28:	0c0069b6 	jal	8001a6d8 <wait_in_queue>
80018d2c:	27a40028 	addiu	a0,sp,40
80018d30:	5440003f 	bnezl	v0,80018e30 <ipc_mbox_send+0x470>
80018d34:	02a02021 	move	a0,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:265
		if (mbox->state != OPENED || wait->wakeup_flags != WT_MBOX_SEND) {
80018d38:	8fc20008 	lw	v0,8(s8)
80018d3c:	14520041 	bne	v0,s2,80018e44 <ipc_mbox_send+0x484>
80018d40:	8fb7002c 	lw	s7,44(sp)
80018d44:	52f3ffdd 	beql	s7,s3,80018cbc <ipc_mbox_send+0x2fc>
80018d48:	8fc2000c 	lw	v0,12(s8)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:277
	assert(mbox->state == OPENED && mbox->max_slots > mbox->slots);

	ret = 0, add_msg(mbox, msg, 1);

out:
	mbox->inuse--;
80018d4c:	8fc30004 	lw	v1,4(s8)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:278
	if (mbox->state != OPENED) {
80018d50:	24040001 	li	a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:277
	assert(mbox->state == OPENED && mbox->max_slots > mbox->slots);

	ret = 0, add_msg(mbox, msg, 1);

out:
	mbox->inuse--;
80018d54:	2463ffff 	addiu	v1,v1,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:278
	if (mbox->state != OPENED) {
80018d58:	10440008 	beq	v0,a0,80018d7c <ipc_mbox_send+0x3bc>
80018d5c:	afc30004 	sw	v1,4(s8)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:279
		assert(ret != 0 && mbox->state == CLOSING);
80018d60:	12e0005a 	beqz	s7,80018ecc <ipc_mbox_send+0x50c>
80018d64:	3c048002 	lui	a0,0x8002
80018d68:	24040002 	li	a0,2
80018d6c:	54440057 	bnel	v0,a0,80018ecc <ipc_mbox_send+0x50c>
80018d70:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:280
		if (mbox->inuse == 0) {
80018d74:	10600028 	beqz	v1,80018e18 <ipc_mbox_send+0x458>
80018d78:	00000000 	nop
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80018d7c:	16200014 	bnez	s1,80018dd0 <ipc_mbox_send+0x410>
80018d80:	00000000 	nop
ipc_mbox_send():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:328
			unsigned long saved_ticks;
			timer_t __timer, *timer =
			    ipc_timer_init(timeout, &saved_ticks, &__timer);

			uint32_t flags;
			if ((flags = send_msg(mbox, msg, timer)) == 0) {
80018d84:	12e00017 	beqz	s7,80018de4 <ipc_mbox_send+0x424>
80018d88:	8fbf008c 	lw	ra,140(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:331
				return 0;
			}
			assert(flags == WT_INTERRUPTED);
80018d8c:	3c028000 	lui	v0,0x8000
80018d90:	16e20055 	bne	s7,v0,80018ee8 <ipc_mbox_send+0x528>
80018d94:	3c048002 	lui	a0,0x8002
ipc_check_timeout():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:38
}

static inline int
ipc_check_timeout(unsigned int timeout, unsigned long saved_ticks)
{
	if (timeout != 0) {
80018d98:	1280ff9e 	beqz	s4,80018c14 <ipc_mbox_send+0x254>
80018d9c:	2412ffff 	li	s2,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:39
		unsigned long delt = (unsigned long)(ticks - saved_ticks);
80018da0:	3c028015 	lui	v0,0x8015
80018da4:	8c4277ac 	lw	v0,30636(v0)
80018da8:	8fa30060 	lw	v1,96(sp)
80018dac:	00431023 	subu	v0,v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:40
		if (delt >= timeout) {
80018db0:	0054a02b 	sltu	s4,v0,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:44
			return -E_TIMEOUT;
		}
	}
	return -1;
80018db4:	2402fff0 	li	v0,-16
80018db8:	08006305 	j	80018c14 <ipc_mbox_send+0x254>
80018dbc:	0054900a 	movz	s2,v0,s4
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
80018dc0:	0c006d04 	jal	8001b410 <intr_disable>
80018dc4:	24110001 	li	s1,1
80018dc8:	08006346 	j	80018d18 <ipc_mbox_send+0x358>
80018dcc:	00000000 	nop
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80018dd0:	0c006d00 	jal	8001b400 <intr_enable>
80018dd4:	00000000 	nop
ipc_mbox_send():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:328
			unsigned long saved_ticks;
			timer_t __timer, *timer =
			    ipc_timer_init(timeout, &saved_ticks, &__timer);

			uint32_t flags;
			if ((flags = send_msg(mbox, msg, timer)) == 0) {
80018dd8:	16e0ffed 	bnez	s7,80018d90 <ipc_mbox_send+0x3d0>
80018ddc:	3c028000 	lui	v0,0x8000
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:337
			ret = ipc_check_timeout(timeout, saved_ticks);
		}
		free_msg(msg);
	}
	return ret;
}
80018de0:	8fbf008c 	lw	ra,140(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:329
			timer_t __timer, *timer =
			    ipc_timer_init(timeout, &saved_ticks, &__timer);

			uint32_t flags;
			if ((flags = send_msg(mbox, msg, timer)) == 0) {
				return 0;
80018de4:	00009021 	move	s2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:337
			ret = ipc_check_timeout(timeout, saved_ticks);
		}
		free_msg(msg);
	}
	return ret;
}
80018de8:	02401021 	move	v0,s2
80018dec:	8fbe0088 	lw	s8,136(sp)
80018df0:	8fb70084 	lw	s7,132(sp)
80018df4:	8fb60080 	lw	s6,128(sp)
80018df8:	8fb5007c 	lw	s5,124(sp)
80018dfc:	8fb40078 	lw	s4,120(sp)
80018e00:	8fb30074 	lw	s3,116(sp)
80018e04:	8fb20070 	lw	s2,112(sp)
80018e08:	8fb1006c 	lw	s1,108(sp)
80018e0c:	8fb00068 	lw	s0,104(sp)
80018e10:	03e00008 	jr	ra
80018e14:	27bd0090 	addiu	sp,sp,144
send_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:281
out:
	mbox->inuse--;
	if (mbox->state != OPENED) {
		assert(ret != 0 && mbox->state == CLOSING);
		if (mbox->inuse == 0) {
			mbox_free(mbox);
80018e18:	0c00612a 	jal	800184a8 <mbox_free>
80018e1c:	03c02021 	move	a0,s8
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80018e20:	1220ffd8 	beqz	s1,80018d84 <ipc_mbox_send+0x3c4>
80018e24:	00000000 	nop
80018e28:	08006374 	j	80018dd0 <ipc_mbox_send+0x410>
80018e2c:	00000000 	nop
send_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:264

		schedule();

		local_intr_save(intr_flag);
		ipc_del_timer(timer);
		wait_current_del(&(mbox->senders), wait);
80018e30:	0c006966 	jal	8001a598 <wait_queue_del>
80018e34:	27a50028 	addiu	a1,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:265
		if (mbox->state != OPENED || wait->wakeup_flags != WT_MBOX_SEND) {
80018e38:	8fc20008 	lw	v0,8(s8)
80018e3c:	1052ffc1 	beq	v0,s2,80018d44 <ipc_mbox_send+0x384>
80018e40:	8fb7002c 	lw	s7,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:266
			if ((ret = wait->wakeup_flags) == WT_MBOX_SEND) {
80018e44:	3c038000 	lui	v1,0x8000
80018e48:	24630120 	addiu	v1,v1,288
80018e4c:	16e3ffc0 	bne	s7,v1,80018d50 <ipc_mbox_send+0x390>
80018e50:	8fc30004 	lw	v1,4(s8)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:267
				ret = WT_INTERRUPTED;
80018e54:	3c178000 	lui	s7,0x8000
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:277
	assert(mbox->state == OPENED && mbox->max_slots > mbox->slots);

	ret = 0, add_msg(mbox, msg, 1);

out:
	mbox->inuse--;
80018e58:	2463ffff 	addiu	v1,v1,-1
80018e5c:	0800635a 	j	80018d68 <ipc_mbox_send+0x3a8>
80018e60:	afc30004 	sw	v1,4(s8)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
80018e64:	0c006d04 	jal	8001b410 <intr_disable>
80018e68:	24110001 	li	s1,1
80018e6c:	08006327 	j	80018c9c <ipc_mbox_send+0x2dc>
80018e70:	8fd60008 	lw	s6,8(s8)
send_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:272
				ret = WT_INTERRUPTED;
			}
			goto out;
		}
	}
	assert(mbox->state == OPENED && mbox->max_slots > mbox->slots);
80018e74:	16c40023 	bne	s6,a0,80018f04 <ipc_mbox_send+0x544>
80018e78:	0062102b 	sltu	v0,v1,v0
80018e7c:	10400021 	beqz	v0,80018f04 <ipc_mbox_send+0x544>
80018e80:	8fa5005c 	lw	a1,92(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:274

	ret = 0, add_msg(mbox, msg, 1);
80018e84:	03c02021 	move	a0,s8
80018e88:	0c006186 	jal	80018618 <add_msg>
80018e8c:	24060001 	li	a2,1
80018e90:	0000b821 	move	s7,zero
80018e94:	08006353 	j	80018d4c <ipc_mbox_send+0x38c>
80018e98:	8fc20008 	lw	v0,8(s8)
load_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:242
	msg->bytes = bytes;
	msg->pid = current->pid;
	return msg;

failed:
	free_msg(msg);
80018e9c:	0c006179 	jal	800185e4 <free_msg>
80018ea0:	8fa4005c 	lw	a0,92(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:313
				if (user_mem_check(mm, (uintptr_t) src, len, 0)) {
					ret =
					    ((msg =
					      load_msg(src,
						       len)) !=
					     NULL) ? 0 : -E_NO_MEM;
80018ea4:	080062b9 	j	80018ae4 <ipc_mbox_send+0x124>
80018ea8:	2412fff4 	li	s2,-12
send_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:255
	bool intr_flag;
	local_intr_save(intr_flag);
	mbox->inuse++;
	wait_t __wait, *wait = &__wait;
	while (mbox->max_slots <= mbox->slots) {
		assert(mbox->state == OPENED);
80018eac:	3c048002 	lui	a0,0x8002
80018eb0:	3c068002 	lui	a2,0x8002
80018eb4:	3c078002 	lui	a3,0x8002
80018eb8:	24843a8c 	addiu	a0,a0,14988
80018ebc:	240500ff 	li	a1,255
80018ec0:	24c60e28 	addiu	a2,a2,3624
80018ec4:	0c006b0b 	jal	8001ac2c <__panic>
80018ec8:	24e73b2c 	addiu	a3,a3,15148
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:279
	ret = 0, add_msg(mbox, msg, 1);

out:
	mbox->inuse--;
	if (mbox->state != OPENED) {
		assert(ret != 0 && mbox->state == CLOSING);
80018ecc:	3c068002 	lui	a2,0x8002
80018ed0:	3c078002 	lui	a3,0x8002
80018ed4:	24843a8c 	addiu	a0,a0,14988
80018ed8:	24050117 	li	a1,279
80018edc:	24c60e28 	addiu	a2,a2,3624
80018ee0:	0c006b0b 	jal	8001ac2c <__panic>
80018ee4:	24e73b9c 	addiu	a3,a3,15260
ipc_mbox_send():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:331

			uint32_t flags;
			if ((flags = send_msg(mbox, msg, timer)) == 0) {
				return 0;
			}
			assert(flags == WT_INTERRUPTED);
80018ee8:	3c068002 	lui	a2,0x8002
80018eec:	3c078002 	lui	a3,0x8002
80018ef0:	24843a8c 	addiu	a0,a0,14988
80018ef4:	2405014b 	li	a1,331
80018ef8:	24c60e28 	addiu	a2,a2,3624
80018efc:	0c006b0b 	jal	8001ac2c <__panic>
80018f00:	24e73a74 	addiu	a3,a3,14964
send_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:272
				ret = WT_INTERRUPTED;
			}
			goto out;
		}
	}
	assert(mbox->state == OPENED && mbox->max_slots > mbox->slots);
80018f04:	3c048002 	lui	a0,0x8002
80018f08:	3c068002 	lui	a2,0x8002
80018f0c:	3c078002 	lui	a3,0x8002
80018f10:	24843a8c 	addiu	a0,a0,14988
80018f14:	24050110 	li	a1,272
80018f18:	24c60e28 	addiu	a2,a2,3624
80018f1c:	0c006b0b 	jal	8001ac2c <__panic>
80018f20:	24e73b64 	addiu	a3,a3,15204

80018f24 <ipc_mbox_recv>:
ipc_mbox_recv():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:407
	local_intr_restore(intr_flag);
	return ret;
}

int ipc_mbox_recv(int id, struct mboxbuf *buf, unsigned int timeout)
{
80018f24:	27bdff68 	addiu	sp,sp,-152
get_mbox():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:75
	static_assert(MBOX_P_PAGE != 0);
}

static struct msg_mbox *get_mbox(int id)
{
	if (id >= 0 && id < MAX_MBOX_NUM) {
80018f28:	2c822000 	sltiu	v0,a0,8192
ipc_mbox_recv():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:407
	local_intr_restore(intr_flag);
	return ret;
}

int ipc_mbox_recv(int id, struct mboxbuf *buf, unsigned int timeout)
{
80018f2c:	afbe0090 	sw	s8,144(sp)
80018f30:	afb3007c 	sw	s3,124(sp)
80018f34:	afb20078 	sw	s2,120(sp)
80018f38:	afbf0094 	sw	ra,148(sp)
80018f3c:	afb7008c 	sw	s7,140(sp)
80018f40:	afb60088 	sw	s6,136(sp)
80018f44:	afb50084 	sw	s5,132(sp)
80018f48:	afb40080 	sw	s4,128(sp)
80018f4c:	afb10074 	sw	s1,116(sp)
80018f50:	afb00070 	sw	s0,112(sp)
80018f54:	00a09821 	move	s3,a1
80018f58:	00c09021 	move	s2,a2
get_mbox():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:75
	static_assert(MBOX_P_PAGE != 0);
}

static struct msg_mbox *get_mbox(int id)
{
	if (id >= 0 && id < MAX_MBOX_NUM) {
80018f5c:	1040001d 	beqz	v0,80018fd4 <ipc_mbox_recv+0xb0>
80018f60:	241effea 	li	s8,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:76
		int i = id / MBOX_P_PAGE, j = id % MBOX_P_PAGE;
80018f64:	3c02b02c 	lui	v0,0xb02c
80018f68:	24420b03 	addiu	v0,v0,2819
80018f6c:	00820019 	multu	a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:77
		if (mbox_map[i] != NULL) {
80018f70:	3c178015 	lui	s7,0x8015
80018f74:	26f76b88 	addiu	s7,s7,27528
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:76
}

static struct msg_mbox *get_mbox(int id)
{
	if (id >= 0 && id < MAX_MBOX_NUM) {
		int i = id / MBOX_P_PAGE, j = id % MBOX_P_PAGE;
80018f78:	00001010 	mfhi	v0
80018f7c:	00021182 	srl	v0,v0,0x6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:77
		if (mbox_map[i] != NULL) {
80018f80:	00021880 	sll	v1,v0,0x2
80018f84:	afa30064 	sw	v1,100(sp)
80018f88:	02e31821 	addu	v1,s7,v1
80018f8c:	afa3005c 	sw	v1,92(sp)
80018f90:	8c630000 	lw	v1,0(v1)
80018f94:	1060000f 	beqz	v1,80018fd4 <ipc_mbox_recv+0xb0>
80018f98:	00022840 	sll	a1,v0,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:76
}

static struct msg_mbox *get_mbox(int id)
{
	if (id >= 0 && id < MAX_MBOX_NUM) {
		int i = id / MBOX_P_PAGE, j = id % MBOX_P_PAGE;
80018f9c:	00a21021 	addu	v0,a1,v0
80018fa0:	00022940 	sll	a1,v0,0x5
80018fa4:	00a21023 	subu	v0,a1,v0
80018fa8:	00822023 	subu	a0,a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:78
		if (mbox_map[i] != NULL) {
			struct msg_mbox *mbox = mbox_map[i] + j;
80018fac:	00041080 	sll	v0,a0,0x2
80018fb0:	0004a900 	sll	s5,a0,0x4
80018fb4:	02a2a823 	subu	s5,s5,v0
80018fb8:	02a42023 	subu	a0,s5,a0
80018fbc:	0004a880 	sll	s5,a0,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:79
			if (mbox->state == OPENED) {
80018fc0:	00751821 	addu	v1,v1,s5
80018fc4:	8c630008 	lw	v1,8(v1)
80018fc8:	24020001 	li	v0,1
80018fcc:	1062000e 	beq	v1,v0,80019008 <ipc_mbox_recv+0xe4>
80018fd0:	afa30058 	sw	v1,88(sp)
ipc_mbox_recv():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:475
		local_intr_restore(local_intr);
		return ret;
	}
	free_msg(msg);
	return ret;
}
80018fd4:	8fbf0094 	lw	ra,148(sp)
80018fd8:	03c01021 	move	v0,s8
80018fdc:	8fb7008c 	lw	s7,140(sp)
80018fe0:	8fbe0090 	lw	s8,144(sp)
80018fe4:	8fb60088 	lw	s6,136(sp)
80018fe8:	8fb50084 	lw	s5,132(sp)
80018fec:	8fb40080 	lw	s4,128(sp)
80018ff0:	8fb3007c 	lw	s3,124(sp)
80018ff4:	8fb20078 	lw	s2,120(sp)
80018ff8:	8fb10074 	lw	s1,116(sp)
80018ffc:	8fb00070 	lw	s0,112(sp)
80019000:	03e00008 	jr	ra
80019004:	27bd0098 	addiu	sp,sp,152
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:415
	}

	size_t size;
	struct msg_msg *msg;
	struct msg_mbox *mbox;
	struct mm_struct *mm = current->mm;
80019008:	3c118015 	lui	s1,0x8015
8001900c:	8e2277a4 	lw	v0,30628(s1)
80019010:	8c500020 	lw	s0,32(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:420
	struct mboxbuf __local_buf, *local_buf = &__local_buf;

	int ret = -E_INVAL;

	lock_mm(mm);
80019014:	0c004c26 	jal	80013098 <lock_mm>
80019018:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:423
	{
		if (copy_from_user
		    (mm, local_buf, buf, sizeof(struct mboxbuf), 1)) {
8001901c:	8fa30058 	lw	v1,88(sp)
80019020:	02002021 	move	a0,s0
80019024:	27a50018 	addiu	a1,sp,24
80019028:	02603021 	move	a2,s3
8001902c:	24070010 	li	a3,16
80019030:	0c00792e 	jal	8001e4b8 <copy_from_user>
80019034:	afa30010 	sw	v1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:422

	int ret = -E_INVAL;

	lock_mm(mm);
	{
		if (copy_from_user
80019038:	10400003 	beqz	v0,80019048 <ipc_mbox_recv+0x124>
8001903c:	8fb40020 	lw	s4,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:424
		    (mm, local_buf, buf, sizeof(struct mboxbuf), 1)) {
			if ((size = local_buf->size) > 0) {
80019040:	16800011 	bnez	s4,80019088 <ipc_mbox_recv+0x164>
80019044:	8fa50024 	lw	a1,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:433
					ret = 0;
				}
			}
		}
	}
	unlock_mm(mm);
80019048:	0c004c37 	jal	800130dc <unlock_mm>
8001904c:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:475
		local_intr_restore(local_intr);
		return ret;
	}
	free_msg(msg);
	return ret;
}
80019050:	8fbf0094 	lw	ra,148(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:436
		}
	}
	unlock_mm(mm);

	if (ret != 0 || (mbox = get_mbox(id)) == NULL) {
		return -E_INVAL;
80019054:	241effea 	li	s8,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:475
		local_intr_restore(local_intr);
		return ret;
	}
	free_msg(msg);
	return ret;
}
80019058:	03c01021 	move	v0,s8
8001905c:	8fb7008c 	lw	s7,140(sp)
80019060:	8fbe0090 	lw	s8,144(sp)
80019064:	8fb60088 	lw	s6,136(sp)
80019068:	8fb50084 	lw	s5,132(sp)
8001906c:	8fb40080 	lw	s4,128(sp)
80019070:	8fb3007c 	lw	s3,124(sp)
80019074:	8fb20078 	lw	s2,120(sp)
80019078:	8fb10074 	lw	s1,116(sp)
8001907c:	8fb00070 	lw	s0,112(sp)
80019080:	03e00008 	jr	ra
80019084:	27bd0098 	addiu	sp,sp,152
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:427
		if (copy_from_user
		    (mm, local_buf, buf, sizeof(struct mboxbuf), 1)) {
			if ((size = local_buf->size) > 0) {
				void *dst = local_buf->data;
				if (user_mem_check
				    (mm, (uintptr_t) dst, size, 1)) {
80019088:	02002021 	move	a0,s0
8001908c:	02803021 	move	a2,s4
80019090:	0c005077 	jal	800141dc <user_mem_check>
80019094:	24070001 	li	a3,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:426
	{
		if (copy_from_user
		    (mm, local_buf, buf, sizeof(struct mboxbuf), 1)) {
			if ((size = local_buf->size) > 0) {
				void *dst = local_buf->data;
				if (user_mem_check
80019098:	1040ffeb 	beqz	v0,80019048 <ipc_mbox_recv+0x124>
8001909c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:433
					ret = 0;
				}
			}
		}
	}
	unlock_mm(mm);
800190a0:	0c004c37 	jal	800130dc <unlock_mm>
800190a4:	02002021 	move	a0,s0
get_mbox():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:77

static struct msg_mbox *get_mbox(int id)
{
	if (id >= 0 && id < MAX_MBOX_NUM) {
		int i = id / MBOX_P_PAGE, j = id % MBOX_P_PAGE;
		if (mbox_map[i] != NULL) {
800190a8:	8fa3005c 	lw	v1,92(sp)
800190ac:	8c620000 	lw	v0,0(v1)
800190b0:	1040ffc8 	beqz	v0,80018fd4 <ipc_mbox_recv+0xb0>
800190b4:	00551021 	addu	v0,v0,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:78
			struct msg_mbox *mbox = mbox_map[i] + j;
800190b8:	afa2005c 	sw	v0,92(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:79
			if (mbox->state == OPENED) {
800190bc:	8fa30058 	lw	v1,88(sp)
800190c0:	8c420008 	lw	v0,8(v0)
800190c4:	1443ffc4 	bne	v0,v1,80018fd8 <ipc_mbox_recv+0xb4>
800190c8:	8fbf0094 	lw	ra,148(sp)
ipc_timer_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:28

static inline timer_t *ipc_timer_init(unsigned int timeout,
				      unsigned long *saved_ticks,
				      timer_t * timer)
{
	if (timeout != 0) {
800190cc:	1240000c 	beqz	s2,80019100 <ipc_mbox_recv+0x1dc>
800190d0:	0000f021 	move	s8,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:29
		*saved_ticks = ticks;
800190d4:	3c038015 	lui	v1,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:30
		return timer_init(timer, pls_read(current), timeout);
800190d8:	8e2277a4 	lw	v0,30628(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:29
static inline timer_t *ipc_timer_init(unsigned int timeout,
				      unsigned long *saved_ticks,
				      timer_t * timer)
{
	if (timeout != 0) {
		*saved_ticks = ticks;
800190dc:	8c6377ac 	lw	v1,30636(v1)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
800190e0:	27a40050 	addiu	a0,sp,80
timer_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.h:28
    to_struct((le), timer_t, member)

static inline timer_t *timer_init(timer_t * timer, struct proc_struct *proc,
				  int expires)
{
	timer->expires = expires;
800190e4:	afb2003c 	sw	s2,60(sp)
ipc_timer_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:29
800190e8:	afa30068 	sw	v1,104(sp)
timer_init():
	timer->proc = proc;
800190ec:	afa20040 	sw	v0,64(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.h:30
	timer->linux_timer.linux_timer = NULL;
800190f0:	afa00044 	sw	zero,68(sp)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
800190f4:	afa40054 	sw	a0,84(sp)
800190f8:	afa40050 	sw	a0,80(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:441
		return -E_INVAL;
	}

	unsigned long saved_ticks;
	timer_t __timer, *timer =
	    ipc_timer_init(timeout, &saved_ticks, &__timer);
800190fc:	27be003c 	addiu	s8,sp,60
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80019100:	40026000 	mfc0	v0,c0_status
80019104:	30420001 	andi	v0,v0,0x1
80019108:	144000ab 	bnez	v0,800193b8 <ipc_mbox_recv+0x494>
8001910c:	00000000 	nop
80019110:	24020001 	li	v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:13
		return 0;
80019114:	afa00058 	sw	zero,88(sp)
recv_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:370
	 timer_t * timer)
{
	int ret = -1;
	bool intr_flag;
	local_intr_save(intr_flag);
	mbox->inuse++;
80019118:	8fa4005c 	lw	a0,92(sp)
8001911c:	8c830004 	lw	v1,4(a0)
80019120:	24630001 	addiu	v1,v1,1
80019124:	ac830004 	sw	v1,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:374
	wait_t __wait, *wait = &__wait;
	while (mbox->slots == 0) {
		assert(mbox->state == OPENED);
		wait_current_set(&(mbox->receivers), wait, WT_MBOX_RECV);
80019128:	24830024 	addiu	v1,a0,36
8001912c:	afa30060 	sw	v1,96(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:372
	int ret = -1;
	bool intr_flag;
	local_intr_save(intr_flag);
	mbox->inuse++;
	wait_t __wait, *wait = &__wait;
	while (mbox->slots == 0) {
80019130:	8fa3005c 	lw	v1,92(sp)
80019134:	8c640010 	lw	a0,16(v1)
80019138:	148000a6 	bnez	a0,800193d4 <ipc_mbox_recv+0x4b0>
8001913c:	24030001 	li	v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:373
		assert(mbox->state == OPENED);
80019140:	24040001 	li	a0,1
80019144:	144400f7 	bne	v0,a0,80019524 <ipc_mbox_recv+0x600>
80019148:	8fa40060 	lw	a0,96(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:374
		wait_current_set(&(mbox->receivers), wait, WT_MBOX_RECV);
8001914c:	3c068000 	lui	a2,0x8000
80019150:	27a50028 	addiu	a1,sp,40
80019154:	0c006a00 	jal	8001a800 <wait_current_set>
80019158:	34c60121 	ori	a2,a2,0x121
ipc_add_timer():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:12
#include <sched.h>
#include <error.h>

static inline void ipc_add_timer(timer_t * timer)
{
	if (timer != NULL) {
8001915c:	13c00004 	beqz	s8,80019170 <ipc_mbox_recv+0x24c>
80019160:	8fa30058 	lw	v1,88(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:13
		add_timer(timer);
80019164:	0c0005e5 	jal	80001794 <add_timer>
80019168:	03c02021 	move	a0,s8
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
8001916c:	8fa30058 	lw	v1,88(sp)
80019170:	10600003 	beqz	v1,80019180 <ipc_mbox_recv+0x25c>
80019174:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
80019178:	0c006d00 	jal	8001b400 <intr_enable>
8001917c:	00000000 	nop
recv_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:378
		ipc_add_timer(timer);
		local_intr_restore(intr_flag);

		schedule();
80019180:	0c00059f 	jal	8000167c <schedule>
80019184:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80019188:	40026000 	mfc0	v0,c0_status
8001918c:	30420001 	andi	v0,v0,0x1
80019190:	14400033 	bnez	v0,80019260 <ipc_mbox_recv+0x33c>
80019194:	afa00058 	sw	zero,88(sp)
ipc_del_timer():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:19
	}
}

static inline void ipc_del_timer(timer_t * timer)
{
	if (timer != NULL) {
80019198:	13c00003 	beqz	s8,800191a8 <ipc_mbox_recv+0x284>
8001919c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:20
		del_timer(timer);
800191a0:	0c00062d 	jal	800018b4 <del_timer>
800191a4:	03c02021 	move	a0,s8
recv_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:382

		local_intr_save(intr_flag);
		ipc_del_timer(timer);
		wait_current_del(&(mbox->receivers), wait);
800191a8:	0c0069b6 	jal	8001a6d8 <wait_in_queue>
800191ac:	27a40028 	addiu	a0,sp,40
800191b0:	14400073 	bnez	v0,80019380 <ipc_mbox_recv+0x45c>
800191b4:	8fa3005c 	lw	v1,92(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:383
		if (mbox->state != OPENED || wait->wakeup_flags != WT_MBOX_RECV) {
800191b8:	24040001 	li	a0,1
800191bc:	8c620008 	lw	v0,8(v1)
800191c0:	14440078 	bne	v0,a0,800193a4 <ipc_mbox_recv+0x480>
800191c4:	8fa4005c 	lw	a0,92(sp)
800191c8:	8fa3002c 	lw	v1,44(sp)
800191cc:	3c058000 	lui	a1,0x8000
800191d0:	34a50121 	ori	a1,a1,0x121
800191d4:	1065ffd7 	beq	v1,a1,80019134 <ipc_mbox_recv+0x210>
800191d8:	8fa3005c 	lw	v1,92(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:367

static int
recv_msg(struct msg_mbox *mbox, size_t max_bytes, struct msg_msg **msg_store,
	 timer_t * timer)
{
	int ret = -1;
800191dc:	241effff 	li	s8,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:395
	if ((ret = pick_msg(mbox, max_bytes, msg_store)) != 0) {
		wakeup_first(&(mbox->receivers), WT_MBOX_RECV, 1);
	}

out:
	mbox->inuse--;
800191e0:	8c620004 	lw	v0,4(v1)
800191e4:	2442ffff 	addiu	v0,v0,-1
800191e8:	ac620004 	sw	v0,4(v1)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
800191ec:	8fa30058 	lw	v1,88(sp)
800191f0:	14600020 	bnez	v1,80019274 <ipc_mbox_recv+0x350>
800191f4:	00000000 	nop
ipc_mbox_recv():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:442
	}

	unsigned long saved_ticks;
	timer_t __timer, *timer =
	    ipc_timer_init(timeout, &saved_ticks, &__timer);
	if ((ret = recv_msg(mbox, size, &msg, timer)) != 0) {
800191f8:	13c00022 	beqz	s8,80019284 <ipc_mbox_recv+0x360>
800191fc:	2402ffff 	li	v0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:443
		if (ret == -1) {
80019200:	17c2ff75 	bne	s8,v0,80018fd8 <ipc_mbox_recv+0xb4>
80019204:	8fbf0094 	lw	ra,148(sp)
ipc_check_timeout():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:38
}

static inline int
ipc_check_timeout(unsigned int timeout, unsigned long saved_ticks)
{
	if (timeout != 0) {
80019208:	1240ff74 	beqz	s2,80018fdc <ipc_mbox_recv+0xb8>
8001920c:	03c01021 	move	v0,s8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:39
		unsigned long delt = (unsigned long)(ticks - saved_ticks);
80019210:	3c028015 	lui	v0,0x8015
80019214:	8fa30068 	lw	v1,104(sp)
80019218:	8c4277ac 	lw	v0,30636(v0)
ipc_mbox_recv():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:475
		local_intr_restore(local_intr);
		return ret;
	}
	free_msg(msg);
	return ret;
}
8001921c:	8fbf0094 	lw	ra,148(sp)
80019220:	8fb7008c 	lw	s7,140(sp)
ipc_check_timeout():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:39
80019224:	00431023 	subu	v0,v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:40
		if (delt >= timeout) {
80019228:	0052902b 	sltu	s2,v0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:41
			return -E_TIMEOUT;
8001922c:	2402fff0 	li	v0,-16
80019230:	0052f00a 	movz	s8,v0,s2
ipc_mbox_recv():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:475
80019234:	03c01021 	move	v0,s8
80019238:	8fb60088 	lw	s6,136(sp)
8001923c:	8fbe0090 	lw	s8,144(sp)
80019240:	8fb50084 	lw	s5,132(sp)
80019244:	8fb40080 	lw	s4,128(sp)
80019248:	8fb3007c 	lw	s3,124(sp)
8001924c:	8fb20078 	lw	s2,120(sp)
80019250:	8fb10074 	lw	s1,116(sp)
80019254:	8fb00070 	lw	s0,112(sp)
80019258:	03e00008 	jr	ra
8001925c:	27bd0098 	addiu	sp,sp,152
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
80019260:	0c006d04 	jal	8001b410 <intr_disable>
80019264:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:16
	return 1;
80019268:	24030001 	li	v1,1
8001926c:	08006466 	j	80019198 <ipc_mbox_recv+0x274>
80019270:	afa30058 	sw	v1,88(sp)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80019274:	0c006d00 	jal	8001b400 <intr_enable>
80019278:	00000000 	nop
ipc_mbox_recv():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:442
	}

	unsigned long saved_ticks;
	timer_t __timer, *timer =
	    ipc_timer_init(timeout, &saved_ticks, &__timer);
	if ((ret = recv_msg(mbox, size, &msg, timer)) != 0) {
8001927c:	17c0ffe0 	bnez	s8,80019200 <ipc_mbox_recv+0x2dc>
80019280:	2402ffff 	li	v0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:451
		return ret;
	}

	ret = -E_INVAL;

	lock_mm(mm);
80019284:	0c004c26 	jal	80013098 <lock_mm>
80019288:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:454
	{
		size_t len;
		local_buf->len = len = msg->bytes, local_buf->from = msg->pid;
8001928c:	8ec20000 	lw	v0,0(s6)
80019290:	8ed20004 	lw	s2,4(s6)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:455
		if (copy_to_user(mm, buf, local_buf, sizeof(struct mboxbuf))) {
80019294:	02002021 	move	a0,s0
80019298:	02602821 	move	a1,s3
8001929c:	27a60018 	addiu	a2,sp,24
800192a0:	24070010 	li	a3,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:454
	ret = -E_INVAL;

	lock_mm(mm);
	{
		size_t len;
		local_buf->len = len = msg->bytes, local_buf->from = msg->pid;
800192a4:	afb2001c 	sw	s2,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:455
		if (copy_to_user(mm, buf, local_buf, sizeof(struct mboxbuf))) {
800192a8:	0c007948 	jal	8001e520 <copy_to_user>
800192ac:	afa20018 	sw	v0,24(sp)
800192b0:	10400073 	beqz	v0,80019480 <ipc_mbox_recv+0x55c>
800192b4:	8fa30024 	lw	v1,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:457
			void *dst = local_buf->data;
			if (user_mem_check(mm, (uintptr_t) dst, len, 1)) {
800192b8:	02002021 	move	a0,s0
800192bc:	02403021 	move	a2,s2
800192c0:	00602821 	move	a1,v1
800192c4:	24070001 	li	a3,1
800192c8:	0c005077 	jal	800141dc <user_mem_check>
800192cc:	afa3006c 	sw	v1,108(sp)
800192d0:	1040006b 	beqz	v0,80019480 <ipc_mbox_recv+0x55c>
800192d4:	8fa3006c 	lw	v1,108(sp)
store_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:341
	return ret;
}

static void store_msg(struct msg_msg *msg, void *dst)
{
	size_t alen, len = msg->bytes;
800192d8:	8ed20004 	lw	s2,4(s6)
800192dc:	241301ec 	li	s3,492
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:346
	if ((alen = len) > MAX_MSG_DATALEN) {
		alen = MAX_MSG_DATALEN;
	}

	struct msg_seg *seg = msg->next;
800192e0:	8ed40008 	lw	s4,8(s6)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:341
	return ret;
}

static void store_msg(struct msg_msg *msg, void *dst)
{
	size_t alen, len = msg->bytes;
800192e4:	2e4201ed 	sltiu	v0,s2,493
800192e8:	0242980b 	movn	s3,s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:348
		alen = MAX_MSG_DATALEN;
	}

	struct msg_seg *seg = msg->next;

	const void *src = msg + 1;
800192ec:	26c60014 	addiu	a2,s6,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:355

	while (len > 0) {
		if ((alen = len) > MAX_MSG_DATALEN) {
			alen = MAX_MSG_DATALEN;
		}
		assert(seg != NULL);
800192f0:	080064c5 	j	80019314 <ipc_mbox_recv+0x3f0>
800192f4:	241501ec 	li	s5,492
800192f8:	128000a1 	beqz	s4,80019580 <ipc_mbox_recv+0x65c>
800192fc:	2e5301ed 	sltiu	s3,s2,493
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:356
		src = seg + 1, seg = seg->next;
80019300:	26860004 	addiu	a2,s4,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:355

	while (len > 0) {
		if ((alen = len) > MAX_MSG_DATALEN) {
			alen = MAX_MSG_DATALEN;
		}
		assert(seg != NULL);
80019304:	02a02021 	move	a0,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:356
		src = seg + 1, seg = seg->next;
80019308:	8e940000 	lw	s4,0(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:355

	while (len > 0) {
		if ((alen = len) > MAX_MSG_DATALEN) {
			alen = MAX_MSG_DATALEN;
		}
		assert(seg != NULL);
8001930c:	0253200b 	movn	a0,s2,s3
80019310:	00809821 	move	s3,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:358
		src = seg + 1, seg = seg->next;
inside:
		copy_to_user(current->mm, dst, src, alen);
80019314:	8e2277a4 	lw	v0,30628(s1)
80019318:	00602821 	move	a1,v1
8001931c:	02603821 	move	a3,s3
80019320:	8c440020 	lw	a0,32(v0)
80019324:	afa3006c 	sw	v1,108(sp)
80019328:	0c007948 	jal	8001e520 <copy_to_user>
8001932c:	02539023 	subu	s2,s2,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:359
		len -= alen, dst = ((char *)dst) + alen;
80019330:	8fa3006c 	lw	v1,108(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:351
	struct msg_seg *seg = msg->next;

	const void *src = msg + 1;
	goto inside;

	while (len > 0) {
80019334:	1640fff0 	bnez	s2,800192f8 <ipc_mbox_recv+0x3d4>
80019338:	00731821 	addu	v1,v1,s3
ipc_mbox_recv():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:462
			if (user_mem_check(mm, (uintptr_t) dst, len, 1)) {
				ret = 0, store_msg(msg, dst);
			}
		}
	}
	unlock_mm(mm);
8001933c:	0c004c37 	jal	800130dc <unlock_mm>
80019340:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:473
			add_msg(mbox, msg, 0);
		}
		local_intr_restore(local_intr);
		return ret;
	}
	free_msg(msg);
80019344:	0c006179 	jal	800185e4 <free_msg>
80019348:	02c02021 	move	a0,s6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:475
	return ret;
}
8001934c:	8fbf0094 	lw	ra,148(sp)
80019350:	03c01021 	move	v0,s8
80019354:	8fb7008c 	lw	s7,140(sp)
80019358:	8fbe0090 	lw	s8,144(sp)
8001935c:	8fb60088 	lw	s6,136(sp)
80019360:	8fb50084 	lw	s5,132(sp)
80019364:	8fb40080 	lw	s4,128(sp)
80019368:	8fb3007c 	lw	s3,124(sp)
8001936c:	8fb20078 	lw	s2,120(sp)
80019370:	8fb10074 	lw	s1,116(sp)
80019374:	8fb00070 	lw	s0,112(sp)
80019378:	03e00008 	jr	ra
8001937c:	27bd0098 	addiu	sp,sp,152
recv_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:382

		schedule();

		local_intr_save(intr_flag);
		ipc_del_timer(timer);
		wait_current_del(&(mbox->receivers), wait);
80019380:	8fa40060 	lw	a0,96(sp)
80019384:	0c006966 	jal	8001a598 <wait_queue_del>
80019388:	27a50028 	addiu	a1,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:383
		if (mbox->state != OPENED || wait->wakeup_flags != WT_MBOX_RECV) {
8001938c:	8fa3005c 	lw	v1,92(sp)
80019390:	24040001 	li	a0,1
80019394:	8c620008 	lw	v0,8(v1)
80019398:	5044ff8c 	beql	v0,a0,800191cc <ipc_mbox_recv+0x2a8>
8001939c:	8fa3002c 	lw	v1,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:395
	if ((ret = pick_msg(mbox, max_bytes, msg_store)) != 0) {
		wakeup_first(&(mbox->receivers), WT_MBOX_RECV, 1);
	}

out:
	mbox->inuse--;
800193a0:	8fa4005c 	lw	a0,92(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:367

static int
recv_msg(struct msg_mbox *mbox, size_t max_bytes, struct msg_msg **msg_store,
	 timer_t * timer)
{
	int ret = -1;
800193a4:	241effff 	li	s8,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:395
	if ((ret = pick_msg(mbox, max_bytes, msg_store)) != 0) {
		wakeup_first(&(mbox->receivers), WT_MBOX_RECV, 1);
	}

out:
	mbox->inuse--;
800193a8:	8c830004 	lw	v1,4(a0)
800193ac:	2463ffff 	addiu	v1,v1,-1
800193b0:	08006517 	j	8001945c <ipc_mbox_recv+0x538>
800193b4:	ac830004 	sw	v1,4(a0)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
800193b8:	0c006d04 	jal	8001b410 <intr_disable>
800193bc:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:16
	return 1;
800193c0:	24030001 	li	v1,1
800193c4:	afa30058 	sw	v1,88(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
800193c8:	8fa3005c 	lw	v1,92(sp)
800193cc:	08006446 	j	80019118 <ipc_mbox_recv+0x1f4>
800193d0:	8c620008 	lw	v0,8(v1)
recv_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:387
		wait_current_del(&(mbox->receivers), wait);
		if (mbox->state != OPENED || wait->wakeup_flags != WT_MBOX_RECV) {
			goto out;
		}
	}
	assert(mbox->state == OPENED && mbox->slots > 0);
800193d4:	14430062 	bne	v0,v1,80019560 <ipc_mbox_recv+0x63c>
800193d8:	8fa3005c 	lw	v1,92(sp)
list_empty():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:126
 * list_empty - tests whether a list is empty
 * @list:       the list to test.
 * */
static inline bool list_empty(list_entry_t * list)
{
	return list->next == list;
800193dc:	8c620018 	lw	v0,24(v1)
recv_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:388
	assert(!list_empty(&(mbox->msg_link)));
800193e0:	24630014 	addiu	v1,v1,20
800193e4:	50430057 	beql	v0,v1,80019544 <ipc_mbox_recv+0x620>
800193e8:	3c048002 	lui	a0,0x8002
pick_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:117
pick_msg(struct msg_mbox *mbox, size_t max_bytes, struct msg_msg **msg_store)
{
	assert(mbox->state == OPENED && mbox->slots > 0);
	assert(!list_empty(&(mbox->msg_link)));
	struct msg_msg *msg = le2msg(list_next(&(mbox->msg_link)), msg_link);
	if (max_bytes < msg->bytes) {
800193ec:	8c43fff8 	lw	v1,-8(v0)
800193f0:	0283a02b 	sltu	s4,s4,v1
800193f4:	1680003f 	bnez	s4,800194f4 <ipc_mbox_recv+0x5d0>
800193f8:	2484ffff 	addiu	a0,a0,-1
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
800193fc:	8c450000 	lw	a1,0(v0)
80019400:	8c430004 	lw	v1,4(v0)
pick_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:120
		return -E_TOO_BIG;
	}
	mbox->slots--, *msg_store = msg;
80019404:	8fa6005c 	lw	a2,92(sp)
80019408:	2456fff4 	addiu	s6,v0,-12
8001940c:	acc40010 	sw	a0,16(a2)
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
80019410:	aca30004 	sw	v1,4(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:170
	next->prev = prev;
80019414:	ac650000 	sw	a1,0(v1)
pick_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:122
	list_del(&(msg->msg_link));
	wakeup_first(&(mbox->senders), WT_MBOX_SEND, 1);
80019418:	3c058000 	lui	a1,0x8000
8001941c:	24c4001c 	addiu	a0,a2,28
80019420:	24a50120 	addiu	a1,a1,288
80019424:	0c0069c9 	jal	8001a724 <wakeup_first>
80019428:	24060001 	li	a2,1
8001942c:	8fa3005c 	lw	v1,92(sp)
80019430:	0000f021 	move	s8,zero
80019434:	8c620008 	lw	v0,8(v1)
recv_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:395
	if ((ret = pick_msg(mbox, max_bytes, msg_store)) != 0) {
		wakeup_first(&(mbox->receivers), WT_MBOX_RECV, 1);
	}

out:
	mbox->inuse--;
80019438:	8fa4005c 	lw	a0,92(sp)
8001943c:	8c830004 	lw	v1,4(a0)
80019440:	2463ffff 	addiu	v1,v1,-1
80019444:	ac830004 	sw	v1,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:396
	if (mbox->state != OPENED) {
80019448:	24040001 	li	a0,1
8001944c:	5044ff68 	beql	v0,a0,800191f0 <ipc_mbox_recv+0x2cc>
80019450:	8fa30058 	lw	v1,88(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:397
		assert(ret != 0 && mbox->state == CLOSING);
80019454:	13c00052 	beqz	s8,800195a0 <ipc_mbox_recv+0x67c>
80019458:	3c048002 	lui	a0,0x8002
8001945c:	24040002 	li	a0,2
80019460:	1444004f 	bne	v0,a0,800195a0 <ipc_mbox_recv+0x67c>
80019464:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:398
		if (mbox->inuse == 0) {
80019468:	5460ff61 	bnezl	v1,800191f0 <ipc_mbox_recv+0x2cc>
8001946c:	8fa30058 	lw	v1,88(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:399
			mbox_free(mbox);
80019470:	0c00612a 	jal	800184a8 <mbox_free>
80019474:	8fa4005c 	lw	a0,92(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80019478:	0800647c 	j	800191f0 <ipc_mbox_recv+0x2cc>
8001947c:	8fa30058 	lw	v1,88(sp)
ipc_mbox_recv():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:462
			if (user_mem_check(mm, (uintptr_t) dst, len, 1)) {
				ret = 0, store_msg(msg, dst);
			}
		}
	}
	unlock_mm(mm);
80019480:	0c004c37 	jal	800130dc <unlock_mm>
80019484:	02002021 	move	a0,s0
get_mbox():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:77

static struct msg_mbox *get_mbox(int id)
{
	if (id >= 0 && id < MAX_MBOX_NUM) {
		int i = id / MBOX_P_PAGE, j = id % MBOX_P_PAGE;
		if (mbox_map[i] != NULL) {
80019488:	8fa30064 	lw	v1,100(sp)
8001948c:	02e3b821 	addu	s7,s7,v1
80019490:	8ee40000 	lw	a0,0(s7)
80019494:	10800021 	beqz	a0,8001951c <ipc_mbox_recv+0x5f8>
80019498:	00952021 	addu	a0,a0,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:79
			struct msg_mbox *mbox = mbox_map[i] + j;
			if (mbox->state == OPENED) {
8001949c:	8c830008 	lw	v1,8(a0)
800194a0:	24020001 	li	v0,1
800194a4:	1462ffa7 	bne	v1,v0,80019344 <ipc_mbox_recv+0x420>
800194a8:	241effea 	li	s8,-22
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
800194ac:	40026000 	mfc0	v0,c0_status
800194b0:	30420001 	andi	v0,v0,0x1
800194b4:	14400005 	bnez	v0,800194cc <ipc_mbox_recv+0x5a8>
800194b8:	02c02821 	move	a1,s6
ipc_mbox_recv():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:468

	if (ret != 0 && (mbox = get_mbox(id)) != NULL) {
		bool local_intr;
		local_intr_save(local_intr);
		{
			add_msg(mbox, msg, 0);
800194bc:	0c006186 	jal	80018618 <add_msg>
800194c0:	00003021 	move	a2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:475
		local_intr_restore(local_intr);
		return ret;
	}
	free_msg(msg);
	return ret;
}
800194c4:	080063f6 	j	80018fd8 <ipc_mbox_recv+0xb4>
800194c8:	8fbf0094 	lw	ra,148(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
800194cc:	0c006d04 	jal	8001b410 <intr_disable>
800194d0:	afa4006c 	sw	a0,108(sp)
ipc_mbox_recv():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:468

	if (ret != 0 && (mbox = get_mbox(id)) != NULL) {
		bool local_intr;
		local_intr_save(local_intr);
		{
			add_msg(mbox, msg, 0);
800194d4:	8fa4006c 	lw	a0,108(sp)
800194d8:	02c02821 	move	a1,s6
800194dc:	0c006186 	jal	80018618 <add_msg>
800194e0:	00003021 	move	a2,zero
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
800194e4:	0c006d00 	jal	8001b400 <intr_enable>
800194e8:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:475
		local_intr_restore(local_intr);
		return ret;
	}
	free_msg(msg);
	return ret;
}
800194ec:	080063f6 	j	80018fd8 <ipc_mbox_recv+0xb4>
800194f0:	8fbf0094 	lw	ra,148(sp)
recv_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:391
	}
	assert(mbox->state == OPENED && mbox->slots > 0);
	assert(!list_empty(&(mbox->msg_link)));

	if ((ret = pick_msg(mbox, max_bytes, msg_store)) != 0) {
		wakeup_first(&(mbox->receivers), WT_MBOX_RECV, 1);
800194f4:	8fa3005c 	lw	v1,92(sp)
800194f8:	3c058000 	lui	a1,0x8000
800194fc:	24a50121 	addiu	a1,a1,289
80019500:	24640024 	addiu	a0,v1,36
80019504:	0c0069c9 	jal	8001a724 <wakeup_first>
80019508:	24060001 	li	a2,1
8001950c:	8fa3005c 	lw	v1,92(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:118
{
	assert(mbox->state == OPENED && mbox->slots > 0);
	assert(!list_empty(&(mbox->msg_link)));
	struct msg_msg *msg = le2msg(list_next(&(mbox->msg_link)), msg_link);
	if (max_bytes < msg->bytes) {
		return -E_TOO_BIG;
80019510:	241effe5 	li	s8,-27
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:391
	}
	assert(mbox->state == OPENED && mbox->slots > 0);
	assert(!list_empty(&(mbox->msg_link)));

	if ((ret = pick_msg(mbox, max_bytes, msg_store)) != 0) {
		wakeup_first(&(mbox->receivers), WT_MBOX_RECV, 1);
80019514:	0800650e 	j	80019438 <ipc_mbox_recv+0x514>
80019518:	8c620008 	lw	v0,8(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:77

static struct msg_mbox *get_mbox(int id)
{
	if (id >= 0 && id < MAX_MBOX_NUM) {
		int i = id / MBOX_P_PAGE, j = id % MBOX_P_PAGE;
		if (mbox_map[i] != NULL) {
8001951c:	080064d1 	j	80019344 <ipc_mbox_recv+0x420>
80019520:	241effea 	li	s8,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:373
	bool intr_flag;
	local_intr_save(intr_flag);
	mbox->inuse++;
	wait_t __wait, *wait = &__wait;
	while (mbox->slots == 0) {
		assert(mbox->state == OPENED);
80019524:	3c048002 	lui	a0,0x8002
80019528:	3c068002 	lui	a2,0x8002
8001952c:	3c078002 	lui	a3,0x8002
80019530:	24843a8c 	addiu	a0,a0,14988
80019534:	24050175 	li	a1,373
80019538:	24c60e28 	addiu	a2,a2,3624
8001953c:	0c006b0b 	jal	8001ac2c <__panic>
80019540:	24e73b2c 	addiu	a3,a3,15148
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:388
		if (mbox->state != OPENED || wait->wakeup_flags != WT_MBOX_RECV) {
			goto out;
		}
	}
	assert(mbox->state == OPENED && mbox->slots > 0);
	assert(!list_empty(&(mbox->msg_link)));
80019544:	3c068002 	lui	a2,0x8002
80019548:	3c078002 	lui	a3,0x8002
8001954c:	24843a8c 	addiu	a0,a0,14988
80019550:	24050184 	li	a1,388
80019554:	24c60e28 	addiu	a2,a2,3624
80019558:	0c006b0b 	jal	8001ac2c <__panic>
8001955c:	24e73bec 	addiu	a3,a3,15340
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:387
		wait_current_del(&(mbox->receivers), wait);
		if (mbox->state != OPENED || wait->wakeup_flags != WT_MBOX_RECV) {
			goto out;
		}
	}
	assert(mbox->state == OPENED && mbox->slots > 0);
80019560:	3c048002 	lui	a0,0x8002
80019564:	3c068002 	lui	a2,0x8002
80019568:	3c078002 	lui	a3,0x8002
8001956c:	24843a8c 	addiu	a0,a0,14988
80019570:	24050183 	li	a1,387
80019574:	24c60e28 	addiu	a2,a2,3624
80019578:	0c006b0b 	jal	8001ac2c <__panic>
8001957c:	24e73bc0 	addiu	a3,a3,15296
store_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:355

	while (len > 0) {
		if ((alen = len) > MAX_MSG_DATALEN) {
			alen = MAX_MSG_DATALEN;
		}
		assert(seg != NULL);
80019580:	3c048002 	lui	a0,0x8002
80019584:	3c068002 	lui	a2,0x8002
80019588:	3c078002 	lui	a3,0x8002
8001958c:	24843a8c 	addiu	a0,a0,14988
80019590:	24050163 	li	a1,355
80019594:	24c60e28 	addiu	a2,a2,3624
80019598:	0c006b0b 	jal	8001ac2c <__panic>
8001959c:	24e73c0c 	addiu	a3,a3,15372
recv_msg():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:397
	}

out:
	mbox->inuse--;
	if (mbox->state != OPENED) {
		assert(ret != 0 && mbox->state == CLOSING);
800195a0:	3c068002 	lui	a2,0x8002
800195a4:	3c078002 	lui	a3,0x8002
800195a8:	24843a8c 	addiu	a0,a0,14988
800195ac:	2405018d 	li	a1,397
800195b0:	24c60e28 	addiu	a2,a2,3624
800195b4:	0c006b0b 	jal	8001ac2c <__panic>
800195b8:	24e73b9c 	addiu	a3,a3,15260

800195bc <ipc_mbox_free>:
ipc_mbox_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:478
	free_msg(msg);
	return ret;
}

int ipc_mbox_free(int id)
{
800195bc:	27bdffd8 	addiu	sp,sp,-40
get_mbox():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:75
	static_assert(MBOX_P_PAGE != 0);
}

static struct msg_mbox *get_mbox(int id)
{
	if (id >= 0 && id < MAX_MBOX_NUM) {
800195c0:	2c832000 	sltiu	v1,a0,8192
ipc_mbox_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:478
	free_msg(msg);
	return ret;
}

int ipc_mbox_free(int id)
{
800195c4:	afbf0024 	sw	ra,36(sp)
800195c8:	afb20020 	sw	s2,32(sp)
800195cc:	afb1001c 	sw	s1,28(sp)
800195d0:	afb00018 	sw	s0,24(sp)
get_mbox():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:75
	static_assert(MBOX_P_PAGE != 0);
}

static struct msg_mbox *get_mbox(int id)
{
	if (id >= 0 && id < MAX_MBOX_NUM) {
800195d4:	1060001b 	beqz	v1,80019644 <ipc_mbox_free+0x88>
800195d8:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:76
		int i = id / MBOX_P_PAGE, j = id % MBOX_P_PAGE;
800195dc:	3c03b02c 	lui	v1,0xb02c
800195e0:	24630b03 	addiu	v1,v1,2819
800195e4:	00830019 	multu	a0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:77
		if (mbox_map[i] != NULL) {
800195e8:	3c058015 	lui	a1,0x8015
800195ec:	24a56b88 	addiu	a1,a1,27528
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:76
}

static struct msg_mbox *get_mbox(int id)
{
	if (id >= 0 && id < MAX_MBOX_NUM) {
		int i = id / MBOX_P_PAGE, j = id % MBOX_P_PAGE;
800195f0:	00001810 	mfhi	v1
800195f4:	00031982 	srl	v1,v1,0x6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:77
		if (mbox_map[i] != NULL) {
800195f8:	00033080 	sll	a2,v1,0x2
800195fc:	00c52821 	addu	a1,a2,a1
80019600:	8ca50000 	lw	a1,0(a1)
80019604:	10a0000f 	beqz	a1,80019644 <ipc_mbox_free+0x88>
80019608:	00033040 	sll	a2,v1,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:76
}

static struct msg_mbox *get_mbox(int id)
{
	if (id >= 0 && id < MAX_MBOX_NUM) {
		int i = id / MBOX_P_PAGE, j = id % MBOX_P_PAGE;
8001960c:	00c31821 	addu	v1,a2,v1
80019610:	00033140 	sll	a2,v1,0x5
80019614:	00c31823 	subu	v1,a2,v1
80019618:	00832023 	subu	a0,a0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:78
		if (mbox_map[i] != NULL) {
			struct msg_mbox *mbox = mbox_map[i] + j;
8001961c:	00041880 	sll	v1,a0,0x2
80019620:	00048100 	sll	s0,a0,0x4
80019624:	02038023 	subu	s0,s0,v1
80019628:	02042023 	subu	a0,s0,a0
8001962c:	00048080 	sll	s0,a0,0x2
80019630:	00b08021 	addu	s0,a1,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:79
			if (mbox->state == OPENED) {
80019634:	8e040008 	lw	a0,8(s0)
80019638:	24030001 	li	v1,1
8001963c:	10830007 	beq	a0,v1,8001965c <ipc_mbox_free+0xa0>
80019640:	00000000 	nop
ipc_mbox_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:502
			mbox_free(mbox);
		}
	}
	local_intr_restore(intr_flag);
	return 0;
}
80019644:	8fbf0024 	lw	ra,36(sp)
80019648:	8fb20020 	lw	s2,32(sp)
8001964c:	8fb1001c 	lw	s1,28(sp)
80019650:	8fb00018 	lw	s0,24(sp)
80019654:	03e00008 	jr	ra
80019658:	27bd0028 	addiu	sp,sp,40
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8001965c:	40026000 	mfc0	v0,c0_status
80019660:	30420001 	andi	v0,v0,0x1
80019664:	10400003 	beqz	v0,80019674 <ipc_mbox_free+0xb8>
80019668:	00008821 	move	s1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8001966c:	0c006d04 	jal	8001b410 <intr_disable>
80019670:	24110001 	li	s1,1
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
80019674:	8e040018 	lw	a0,24(s0)
ipc_mbox_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:486
		return -E_INVAL;
	}
	bool intr_flag;
	local_intr_save(intr_flag);
	{
		mbox->state = CLOSING;
80019678:	24020002 	li	v0,2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:488

		list_entry_t *list = &(mbox->msg_link), *le;
8001967c:	26120014 	addiu	s2,s0,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:489
		while ((le = list_next(list)) != list) {
80019680:	1244000a 	beq	s2,a0,800196ac <ipc_mbox_free+0xf0>
80019684:	ae020008 	sw	v0,8(s0)
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
80019688:	8c830000 	lw	v1,0(a0)
8001968c:	8c820004 	lw	v0,4(a0)
ipc_mbox_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:491
			list_del(le);
			free_msg(le2msg(le, msg_link));
80019690:	2484fff4 	addiu	a0,a0,-12
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
80019694:	ac620004 	sw	v0,4(v1)
ipc_mbox_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:491
80019698:	0c006179 	jal	800185e4 <free_msg>
8001969c:	ac430000 	sw	v1,0(v0)
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
800196a0:	8e040018 	lw	a0,24(s0)
ipc_mbox_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:489
	local_intr_save(intr_flag);
	{
		mbox->state = CLOSING;

		list_entry_t *list = &(mbox->msg_link), *le;
		while ((le = list_next(list)) != list) {
800196a4:	5644fff9 	bnel	s2,a0,8001968c <ipc_mbox_free+0xd0>
800196a8:	8c830000 	lw	v1,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:493
			list_del(le);
			free_msg(le2msg(le, msg_link));
		}
		wakeup_queue(&(mbox->senders), WT_INTERRUPTED, 1);
800196ac:	2604001c 	addiu	a0,s0,28
800196b0:	3c058000 	lui	a1,0x8000
800196b4:	0c0069d4 	jal	8001a750 <wakeup_queue>
800196b8:	24060001 	li	a2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:494
		wakeup_queue(&(mbox->receivers), WT_INTERRUPTED, 1);
800196bc:	26040024 	addiu	a0,s0,36
800196c0:	3c058000 	lui	a1,0x8000
800196c4:	0c0069d4 	jal	8001a750 <wakeup_queue>
800196c8:	24060001 	li	a2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:496

		if (mbox->inuse == 0) {
800196cc:	8e020004 	lw	v0,4(s0)
800196d0:	1040000c 	beqz	v0,80019704 <ipc_mbox_free+0x148>
800196d4:	00000000 	nop
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
800196d8:	1220ffda 	beqz	s1,80019644 <ipc_mbox_free+0x88>
800196dc:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
800196e0:	0c006d00 	jal	8001b400 <intr_enable>
800196e4:	afa20010 	sw	v0,16(sp)
ipc_mbox_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:502
			mbox_free(mbox);
		}
	}
	local_intr_restore(intr_flag);
	return 0;
}
800196e8:	8fbf0024 	lw	ra,36(sp)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
800196ec:	8fa20010 	lw	v0,16(sp)
ipc_mbox_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:502
800196f0:	8fb20020 	lw	s2,32(sp)
800196f4:	8fb1001c 	lw	s1,28(sp)
800196f8:	8fb00018 	lw	s0,24(sp)
800196fc:	03e00008 	jr	ra
80019700:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:497
		}
		wakeup_queue(&(mbox->senders), WT_INTERRUPTED, 1);
		wakeup_queue(&(mbox->receivers), WT_INTERRUPTED, 1);

		if (mbox->inuse == 0) {
			mbox_free(mbox);
80019704:	0c00612a 	jal	800184a8 <mbox_free>
80019708:	02002021 	move	a0,s0
8001970c:	080065b6 	j	800196d8 <ipc_mbox_free+0x11c>
80019710:	00000000 	nop

80019714 <ipc_mbox_info>:
ipc_mbox_info():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:505
	local_intr_restore(intr_flag);
	return 0;
}

int ipc_mbox_info(int id, struct mboxinfo *info)
{
80019714:	27bdffc0 	addiu	sp,sp,-64
get_mbox():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:75
	static_assert(MBOX_P_PAGE != 0);
}

static struct msg_mbox *get_mbox(int id)
{
	if (id >= 0 && id < MAX_MBOX_NUM) {
80019718:	2c822000 	sltiu	v0,a0,8192
ipc_mbox_info():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:505
	local_intr_restore(intr_flag);
	return 0;
}

int ipc_mbox_info(int id, struct mboxinfo *info)
{
8001971c:	afb00030 	sw	s0,48(sp)
80019720:	afbf003c 	sw	ra,60(sp)
80019724:	afb20038 	sw	s2,56(sp)
80019728:	afb10034 	sw	s1,52(sp)
get_mbox():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:75
	static_assert(MBOX_P_PAGE != 0);
}

static struct msg_mbox *get_mbox(int id)
{
	if (id >= 0 && id < MAX_MBOX_NUM) {
8001972c:	1040001b 	beqz	v0,8001979c <ipc_mbox_info+0x88>
80019730:	2410ffea 	li	s0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:76
		int i = id / MBOX_P_PAGE, j = id % MBOX_P_PAGE;
80019734:	3c02b02c 	lui	v0,0xb02c
80019738:	24420b03 	addiu	v0,v0,2819
8001973c:	00820019 	multu	a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:77
		if (mbox_map[i] != NULL) {
80019740:	3c038015 	lui	v1,0x8015
80019744:	24636b88 	addiu	v1,v1,27528
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:76
}

static struct msg_mbox *get_mbox(int id)
{
	if (id >= 0 && id < MAX_MBOX_NUM) {
		int i = id / MBOX_P_PAGE, j = id % MBOX_P_PAGE;
80019748:	00001010 	mfhi	v0
8001974c:	00021182 	srl	v0,v0,0x6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:77
		if (mbox_map[i] != NULL) {
80019750:	00023080 	sll	a2,v0,0x2
80019754:	00c31821 	addu	v1,a2,v1
80019758:	8c630000 	lw	v1,0(v1)
8001975c:	1060000f 	beqz	v1,8001979c <ipc_mbox_info+0x88>
80019760:	00023040 	sll	a2,v0,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:76
}

static struct msg_mbox *get_mbox(int id)
{
	if (id >= 0 && id < MAX_MBOX_NUM) {
		int i = id / MBOX_P_PAGE, j = id % MBOX_P_PAGE;
80019764:	00c21021 	addu	v0,a2,v0
80019768:	00029140 	sll	s2,v0,0x5
8001976c:	02421023 	subu	v0,s2,v0
80019770:	00822023 	subu	a0,a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:78
		if (mbox_map[i] != NULL) {
			struct msg_mbox *mbox = mbox_map[i] + j;
80019774:	00041080 	sll	v0,a0,0x2
80019778:	00049100 	sll	s2,a0,0x4
8001977c:	02429023 	subu	s2,s2,v0
80019780:	02442023 	subu	a0,s2,a0
80019784:	00049080 	sll	s2,a0,0x2
80019788:	00729021 	addu	s2,v1,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:79
			if (mbox->state == OPENED) {
8001978c:	8e430008 	lw	v1,8(s2)
80019790:	24020001 	li	v0,1
80019794:	50620008 	beql	v1,v0,800197b8 <ipc_mbox_info+0xa4>
80019798:	8e420004 	lw	v0,4(s2)
ipc_mbox_info():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:531
		     (mm, info, local_info,
		      sizeof(struct mboxinfo))) ? 0 : -E_INVAL;
	}
	unlock_mm(mm);
	return ret;
}
8001979c:	8fbf003c 	lw	ra,60(sp)
800197a0:	02001021 	move	v0,s0
800197a4:	8fb20038 	lw	s2,56(sp)
800197a8:	8fb10034 	lw	s1,52(sp)
800197ac:	8fb00030 	lw	s0,48(sp)
800197b0:	03e00008 	jr	ra
800197b4:	27bd0040 	addiu	sp,sp,64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:511
	struct msg_mbox *mbox;
	if ((mbox = get_mbox(id)) == NULL) {
		return -E_INVAL;
	}

	struct mm_struct *mm = current->mm;
800197b8:	3c038015 	lui	v1,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:514
	struct mboxinfo __local_info, *local_info = &__local_info;

	local_info->slots = mbox->slots;
800197bc:	8e460010 	lw	a2,16(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:511
	struct msg_mbox *mbox;
	if ((mbox = get_mbox(id)) == NULL) {
		return -E_INVAL;
	}

	struct mm_struct *mm = current->mm;
800197c0:	8c6777a4 	lw	a3,30628(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:515
	struct mboxinfo __local_info, *local_info = &__local_info;

	local_info->slots = mbox->slots;
	local_info->max_slots = mbox->max_slots;
800197c4:	8e43000c 	lw	v1,12(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:517
	local_info->inuse = (mbox->inuse != 0);
	local_info->has_sender = !wait_queue_empty(&(mbox->senders));
800197c8:	2644001c 	addiu	a0,s2,28
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:516
	struct mm_struct *mm = current->mm;
	struct mboxinfo __local_info, *local_info = &__local_info;

	local_info->slots = mbox->slots;
	local_info->max_slots = mbox->max_slots;
	local_info->inuse = (mbox->inuse != 0);
800197cc:	0002102b 	sltu	v0,zero,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:511
	struct msg_mbox *mbox;
	if ((mbox = get_mbox(id)) == NULL) {
		return -E_INVAL;
	}

	struct mm_struct *mm = current->mm;
800197d0:	8cf10020 	lw	s1,32(a3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:515
	struct mboxinfo __local_info, *local_info = &__local_info;

	local_info->slots = mbox->slots;
	local_info->max_slots = mbox->max_slots;
800197d4:	afa30014 	sw	v1,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:514
	}

	struct mm_struct *mm = current->mm;
	struct mboxinfo __local_info, *local_info = &__local_info;

	local_info->slots = mbox->slots;
800197d8:	afa60010 	sw	a2,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:517
	local_info->max_slots = mbox->max_slots;
	local_info->inuse = (mbox->inuse != 0);
	local_info->has_sender = !wait_queue_empty(&(mbox->senders));
800197dc:	afa50028 	sw	a1,40(sp)
800197e0:	0c0069b2 	jal	8001a6c8 <wait_queue_empty>
800197e4:	afa20018 	sw	v0,24(sp)
800197e8:	2c420001 	sltiu	v0,v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:518
	local_info->has_receiver = !wait_queue_empty(&(mbox->receivers));
800197ec:	26440024 	addiu	a0,s2,36
800197f0:	0c0069b2 	jal	8001a6c8 <wait_queue_empty>
800197f4:	afa2001c 	sw	v0,28(sp)
800197f8:	2c420001 	sltiu	v0,v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:522

	int ret;

	lock_mm(mm);
800197fc:	02202021 	move	a0,s1
80019800:	0c004c26 	jal	80013098 <lock_mm>
80019804:	afa20020 	sw	v0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:526
	{
		ret =
		    (copy_to_user
		     (mm, info, local_info,
80019808:	8fa50028 	lw	a1,40(sp)
8001980c:	02202021 	move	a0,s1
80019810:	27a60010 	addiu	a2,sp,16
80019814:	0c007948 	jal	8001e520 <copy_to_user>
80019818:	24070014 	li	a3,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:529
		      sizeof(struct mboxinfo))) ? 0 : -E_INVAL;
	}
	unlock_mm(mm);
8001981c:	02202021 	move	a0,s1
80019820:	0c004c37 	jal	800130dc <unlock_mm>
80019824:	0002800b 	movn	s0,zero,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:531
	return ret;
}
80019828:	8fbf003c 	lw	ra,60(sp)
8001982c:	02001021 	move	v0,s0
80019830:	8fb20038 	lw	s2,56(sp)
80019834:	8fb10034 	lw	s1,52(sp)
80019838:	8fb00030 	lw	s0,48(sp)
8001983c:	03e00008 	jr	ra
80019840:	27bd0040 	addiu	sp,sp,64

80019844 <mbox_cleanup>:
mbox_cleanup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:534

void mbox_cleanup(void)
{
80019844:	27bdffd0 	addiu	sp,sp,-48
80019848:	afbf002c 	sw	ra,44(sp)
8001984c:	afb60028 	sw	s6,40(sp)
80019850:	afb50024 	sw	s5,36(sp)
80019854:	afb40020 	sw	s4,32(sp)
80019858:	afb3001c 	sw	s3,28(sp)
8001985c:	afb20018 	sw	s2,24(sp)
80019860:	afb10014 	sw	s1,20(sp)
80019864:	afb00010 	sw	s0,16(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80019868:	40026000 	mfc0	v0,c0_status
8001986c:	30420001 	andi	v0,v0,0x1
80019870:	10400003 	beqz	v0,80019880 <mbox_cleanup+0x3c>
80019874:	0000b021 	move	s6,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80019878:	0c006d04 	jal	8001b410 <intr_disable>
8001987c:	24160001 	li	s6,1
80019880:	3c108015 	lui	s0,0x8015
80019884:	26106b88 	addiu	s0,s0,27528
kva2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:111
}

static inline struct Page *kva2page(void *kva)
{
	return pa2page(PADDR(kva));
80019888:	3c158000 	lui	s5,0x8000
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:533
	}
	unlock_mm(mm);
	return ret;
}

void mbox_cleanup(void)
8001988c:	26110164 	addiu	s1,s0,356
kva2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:111
80019890:	26b51000 	addiu	s5,s5,4096
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
80019894:	3c147fff 	lui	s4,0x7fff
80019898:	3c138015 	lui	s3,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
		panic("pa2page called with invalid pa");
	}
	return &pages[PPN(pa)];
8001989c:	3c128015 	lui	s2,0x8015
mbox_cleanup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:541
	local_intr_save(intr_flag);
	{
		int i, j;
		for (i = 0; i < MAX_MBOX_PAGES; i++) {
			struct msg_mbox *mbox;
			if ((mbox = mbox_map[i]) != NULL) {
800198a0:	8e040000 	lw	a0,0(s0)
800198a4:	5080000d 	beqzl	a0,800198dc <mbox_cleanup+0x98>
800198a8:	26100004 	addiu	s0,s0,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:543
				for (j = 0; j < MBOX_P_PAGE; j++, mbox++) {
					if (mbox->state != CLOSED) {
800198ac:	8c820008 	lw	v0,8(a0)
800198b0:	5440000a 	bnezl	v0,800198dc <mbox_cleanup+0x98>
800198b4:	26100004 	addiu	s0,s0,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:542
	{
		int i, j;
		for (i = 0; i < MAX_MBOX_PAGES; i++) {
			struct msg_mbox *mbox;
			if ((mbox = mbox_map[i]) != NULL) {
				for (j = 0; j < MBOX_P_PAGE; j++, mbox++) {
800198b8:	2482002c 	addiu	v0,a0,44
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:533
	}
	unlock_mm(mm);
	return ret;
}

void mbox_cleanup(void)
800198bc:	08006633 	j	800198cc <mbox_cleanup+0x88>
800198c0:	24850ffc 	addiu	a1,a0,4092
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:542
	{
		int i, j;
		for (i = 0; i < MAX_MBOX_PAGES; i++) {
			struct msg_mbox *mbox;
			if ((mbox = mbox_map[i]) != NULL) {
				for (j = 0; j < MBOX_P_PAGE; j++, mbox++) {
800198c4:	10450012 	beq	v0,a1,80019910 <mbox_cleanup+0xcc>
800198c8:	24860014 	addiu	a2,a0,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:543
					if (mbox->state != CLOSED) {
800198cc:	8c430008 	lw	v1,8(v0)
800198d0:	5060fffc 	beqzl	v1,800198c4 <mbox_cleanup+0x80>
800198d4:	2442002c 	addiu	v0,v0,44
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:555
				mbox = mbox_map[i];
				for (j = 0; j < MBOX_P_PAGE; j++, mbox++) {
					list_del(&(mbox->msg_link));
				}
				mbox = mbox_map[i], mbox_map[i] = NULL;
				free_page(kva2page(mbox));
800198d8:	26100004 	addiu	s0,s0,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:539
{
	bool intr_flag;
	local_intr_save(intr_flag);
	{
		int i, j;
		for (i = 0; i < MAX_MBOX_PAGES; i++) {
800198dc:	5611fff1 	bnel	s0,s1,800198a4 <mbox_cleanup+0x60>
800198e0:	8e040000 	lw	a0,0(s0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
800198e4:	16c00028 	bnez	s6,80019988 <mbox_cleanup+0x144>
800198e8:	8fbf002c 	lw	ra,44(sp)
mbox_cleanup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:560
				free_page(kva2page(mbox));
			}
		}
	}
	local_intr_restore(intr_flag);
}
800198ec:	8fb60028 	lw	s6,40(sp)
800198f0:	8fb50024 	lw	s5,36(sp)
800198f4:	8fb40020 	lw	s4,32(sp)
800198f8:	8fb3001c 	lw	s3,28(sp)
800198fc:	8fb20018 	lw	s2,24(sp)
80019900:	8fb10014 	lw	s1,20(sp)
80019904:	8fb00010 	lw	s0,16(sp)
80019908:	03e00008 	jr	ra
8001990c:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:533
	}
	unlock_mm(mm);
	return ret;
}

void mbox_cleanup(void)
80019910:	24871010 	addiu	a3,a0,4112
__intr_save():
80019914:	00c01021 	move	v0,a2
mbox_cleanup():
80019918:	00441823 	subu	v1,v0,a0
8001991c:	00661821 	addu	v1,v1,a2
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
80019920:	8c65ffec 	lw	a1,-20(v1)
80019924:	8c63fff0 	lw	v1,-16(v1)
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:170
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
	next->prev = prev;
80019928:	2442002c 	addiu	v0,v0,44
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
8001992c:	aca30004 	sw	v1,4(a1)
mbox_cleanup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:551
				}
				if (j != MBOX_P_PAGE) {
					continue;
				}
				mbox = mbox_map[i];
				for (j = 0; j < MBOX_P_PAGE; j++, mbox++) {
80019930:	1447fff9 	bne	v0,a3,80019918 <mbox_cleanup+0xd4>
80019934:	ac650000 	sw	a1,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:554
					list_del(&(mbox->msg_link));
				}
				mbox = mbox_map[i], mbox_map[i] = NULL;
80019938:	8e070000 	lw	a3,0(s0)
kva2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:111
	return KADDR(page2pa(page));
}

static inline struct Page *kva2page(void *kva)
{
	return pa2page(PADDR(kva));
8001993c:	00f5102b 	sltu	v0,a3,s5
80019940:	1440001a 	bnez	v0,800199ac <mbox_cleanup+0x168>
80019944:	ae000000 	sw	zero,0(s0)
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
80019948:	3682f000 	ori	v0,s4,0xf000
8001994c:	8e637770 	lw	v1,30576(s3)
80019950:	00e21021 	addu	v0,a3,v0
80019954:	00021302 	srl	v0,v0,0xc
80019958:	0043182b 	sltu	v1,v0,v1
8001995c:	10600019 	beqz	v1,800199c4 <mbox_cleanup+0x180>
80019960:	8e4477bc 	lw	a0,30652(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
		panic("pa2page called with invalid pa");
	}
	return &pages[PPN(pa)];
80019964:	00021140 	sll	v0,v0,0x5
mbox_cleanup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:555
				free_page(kva2page(mbox));
80019968:	24050001 	li	a1,1
8001996c:	00822021 	addu	a0,a0,v0
80019970:	0c007441 	jal	8001d104 <free_pages>
80019974:	26100004 	addiu	s0,s0,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:539
{
	bool intr_flag;
	local_intr_save(intr_flag);
	{
		int i, j;
		for (i = 0; i < MAX_MBOX_PAGES; i++) {
80019978:	5611ffca 	bnel	s0,s1,800198a4 <mbox_cleanup+0x60>
8001997c:	8e040000 	lw	a0,0(s0)
80019980:	08006639 	j	800198e4 <mbox_cleanup+0xa0>
80019984:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/mbox.c:560
				free_page(kva2page(mbox));
			}
		}
	}
	local_intr_restore(intr_flag);
}
80019988:	8fb60028 	lw	s6,40(sp)
8001998c:	8fb50024 	lw	s5,36(sp)
80019990:	8fb40020 	lw	s4,32(sp)
80019994:	8fb3001c 	lw	s3,28(sp)
80019998:	8fb20018 	lw	s2,24(sp)
8001999c:	8fb10014 	lw	s1,20(sp)
800199a0:	8fb00010 	lw	s0,16(sp)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
800199a4:	08006d00 	j	8001b400 <intr_enable>
800199a8:	27bd0030 	addiu	sp,sp,48
kva2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:111
	return KADDR(page2pa(page));
}

static inline struct Page *kva2page(void *kva)
{
	return pa2page(PADDR(kva));
800199ac:	3c048002 	lui	a0,0x8002
800199b0:	3c068002 	lui	a2,0x8002
800199b4:	248429ec 	addiu	a0,a0,10732
800199b8:	2405006f 	li	a1,111
800199bc:	0c006b0b 	jal	8001ac2c <__panic>
800199c0:	24c62a30 	addiu	a2,a2,10800
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:99
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
		panic("pa2page called with invalid pa");
800199c4:	3c048002 	lui	a0,0x8002
800199c8:	3c068002 	lui	a2,0x8002
800199cc:	248429ec 	addiu	a0,a0,10732
800199d0:	24050063 	li	a1,99
800199d4:	0c006b0b 	jal	8001ac2c <__panic>
800199d8:	24c62a54 	addiu	a2,a2,10836

800199dc <__down>:
__down():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:97

static uint32_t
    __attribute__ ((noinline)) __down(semaphore_t * sem, uint32_t wait_state,
				      timer_t * timer)
{
	assert(sem->valid);
800199dc:	8c820004 	lw	v0,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:96
}

static uint32_t
    __attribute__ ((noinline)) __down(semaphore_t * sem, uint32_t wait_state,
				      timer_t * timer)
{
800199e0:	27bdffb8 	addiu	sp,sp,-72
800199e4:	afb30040 	sw	s3,64(sp)
800199e8:	afb00034 	sw	s0,52(sp)
800199ec:	afbf0044 	sw	ra,68(sp)
800199f0:	afb2003c 	sw	s2,60(sp)
800199f4:	afb10038 	sw	s1,56(sp)
800199f8:	00a08021 	move	s0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:97
	assert(sem->valid);
800199fc:	10400051 	beqz	v0,80019b44 <__down+0x168>
80019a00:	00c09821 	move	s3,a2
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80019a04:	40026000 	mfc0	v0,c0_status
80019a08:	30420001 	andi	v0,v0,0x1
80019a0c:	10400005 	beqz	v0,80019a24 <__down+0x48>
80019a10:	00009021 	move	s2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80019a14:	0c006d04 	jal	8001b410 <intr_disable>
80019a18:	afa40028 	sw	a0,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:16
	return 1;
80019a1c:	8fa40028 	lw	a0,40(sp)
80019a20:	24120001 	li	s2,1
__down():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:100
	bool intr_flag;
	local_intr_save(intr_flag);
	if (sem->value > 0) {
80019a24:	8c820000 	lw	v0,0(a0)
80019a28:	18400015 	blez	v0,80019a80 <__down+0xa4>
80019a2c:	2442ffff 	addiu	v0,v0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:101
		sem->value--;
80019a30:	ac820000 	sw	v0,0(a0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80019a34:	16400008 	bnez	s2,80019a58 <__down+0x7c>
80019a38:	00001021 	move	v0,zero
__down():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:121

	if (wait->wakeup_flags != wait_state) {
		return wait->wakeup_flags;
	}
	return 0;
}
80019a3c:	8fbf0044 	lw	ra,68(sp)
80019a40:	8fb30040 	lw	s3,64(sp)
80019a44:	8fb2003c 	lw	s2,60(sp)
80019a48:	8fb10038 	lw	s1,56(sp)
80019a4c:	8fb00034 	lw	s0,52(sp)
80019a50:	03e00008 	jr	ra
80019a54:	27bd0048 	addiu	sp,sp,72
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
80019a58:	0c006d00 	jal	8001b400 <intr_enable>
80019a5c:	afa20028 	sw	v0,40(sp)
__down():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:121
80019a60:	8fbf0044 	lw	ra,68(sp)
80019a64:	8fa20028 	lw	v0,40(sp)
80019a68:	8fb30040 	lw	s3,64(sp)
80019a6c:	8fb2003c 	lw	s2,60(sp)
80019a70:	8fb10038 	lw	s1,56(sp)
80019a74:	8fb00034 	lw	s0,52(sp)
80019a78:	03e00008 	jr	ra
80019a7c:	27bd0048 	addiu	sp,sp,72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:106
		sem->value--;
		local_intr_restore(intr_flag);
		return 0;
	}
	wait_t __wait, *wait = &__wait;
	wait_current_set(&(sem->wait_queue), wait, wait_state);
80019a80:	2491000c 	addiu	s1,a0,12
80019a84:	02202021 	move	a0,s1
80019a88:	27a50010 	addiu	a1,sp,16
80019a8c:	0c006a00 	jal	8001a800 <wait_current_set>
80019a90:	02003021 	move	a2,s0
ipc_add_timer():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:12
#include <sched.h>
#include <error.h>

static inline void ipc_add_timer(timer_t * timer)
{
	if (timer != NULL) {
80019a94:	12600003 	beqz	s3,80019aa4 <__down+0xc8>
80019a98:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:13
		add_timer(timer);
80019a9c:	0c0005e5 	jal	80001794 <add_timer>
80019aa0:	02602021 	move	a0,s3
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80019aa4:	12400003 	beqz	s2,80019ab4 <__down+0xd8>
80019aa8:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
80019aac:	0c006d00 	jal	8001b400 <intr_enable>
80019ab0:	00000000 	nop
__down():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:110
	ipc_add_timer(timer);
	local_intr_restore(intr_flag);

	schedule();
80019ab4:	0c00059f 	jal	8000167c <schedule>
80019ab8:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80019abc:	40026000 	mfc0	v0,c0_status
80019ac0:	30420001 	andi	v0,v0,0x1
80019ac4:	14400017 	bnez	v0,80019b24 <__down+0x148>
80019ac8:	00009021 	move	s2,zero
ipc_del_timer():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:19
	}
}

static inline void ipc_del_timer(timer_t * timer)
{
	if (timer != NULL) {
80019acc:	12600003 	beqz	s3,80019adc <__down+0x100>
80019ad0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:20
		del_timer(timer);
80019ad4:	0c00062d 	jal	800018b4 <del_timer>
80019ad8:	02602021 	move	a0,s3
__down():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:114

	local_intr_save(intr_flag);
	ipc_del_timer(timer);
	wait_current_del(&(sem->wait_queue), wait);
80019adc:	0c0069b6 	jal	8001a6d8 <wait_in_queue>
80019ae0:	27a40010 	addiu	a0,sp,16
80019ae4:	54400013 	bnezl	v0,80019b34 <__down+0x158>
80019ae8:	02202021 	move	a0,s1
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80019aec:	12400004 	beqz	s2,80019b00 <__down+0x124>
80019af0:	8fa20014 	lw	v0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
80019af4:	0c006d00 	jal	8001b400 <intr_enable>
80019af8:	00000000 	nop
__down():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:117
	local_intr_restore(intr_flag);

	if (wait->wakeup_flags != wait_state) {
80019afc:	8fa20014 	lw	v0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:121
		return wait->wakeup_flags;
	}
	return 0;
}
80019b00:	8fbf0044 	lw	ra,68(sp)
80019b04:	8fb30040 	lw	s3,64(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:120
	local_intr_restore(intr_flag);

	if (wait->wakeup_flags != wait_state) {
		return wait->wakeup_flags;
	}
	return 0;
80019b08:	00508026 	xor	s0,v0,s0
80019b0c:	0010100a 	movz	v0,zero,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:121
}
80019b10:	8fb2003c 	lw	s2,60(sp)
80019b14:	8fb10038 	lw	s1,56(sp)
80019b18:	8fb00034 	lw	s0,52(sp)
80019b1c:	03e00008 	jr	ra
80019b20:	27bd0048 	addiu	sp,sp,72
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
80019b24:	0c006d04 	jal	8001b410 <intr_disable>
80019b28:	24120001 	li	s2,1
80019b2c:	080066b3 	j	80019acc <__down+0xf0>
80019b30:	00000000 	nop
__down():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:114

	schedule();

	local_intr_save(intr_flag);
	ipc_del_timer(timer);
	wait_current_del(&(sem->wait_queue), wait);
80019b34:	0c006966 	jal	8001a598 <wait_queue_del>
80019b38:	27a50010 	addiu	a1,sp,16
80019b3c:	080066bb 	j	80019aec <__down+0x110>
80019b40:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:97

static uint32_t
    __attribute__ ((noinline)) __down(semaphore_t * sem, uint32_t wait_state,
				      timer_t * timer)
{
	assert(sem->valid);
80019b44:	3c048002 	lui	a0,0x8002
80019b48:	3c068002 	lui	a2,0x8002
80019b4c:	3c078002 	lui	a3,0x8002
80019b50:	24843c18 	addiu	a0,a0,15384
80019b54:	24050061 	li	a1,97
80019b58:	24c60e28 	addiu	a2,a2,3624
80019b5c:	0c006b0b 	jal	8001ac2c <__panic>
80019b60:	24e73c20 	addiu	a3,a3,15392

80019b64 <__up>:
__up():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:78
#endif //UCONFIG_BIONIC_LIBC

static void
    __attribute__ ((noinline)) __up(semaphore_t * sem, uint32_t wait_state)
{
	assert(sem->valid);
80019b64:	8c820004 	lw	v0,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:77
}
#endif //UCONFIG_BIONIC_LIBC

static void
    __attribute__ ((noinline)) __up(semaphore_t * sem, uint32_t wait_state)
{
80019b68:	27bdffd8 	addiu	sp,sp,-40
80019b6c:	afb2001c 	sw	s2,28(sp)
80019b70:	afb10018 	sw	s1,24(sp)
80019b74:	afbf0024 	sw	ra,36(sp)
80019b78:	afb30020 	sw	s3,32(sp)
80019b7c:	afb00014 	sw	s0,20(sp)
80019b80:	00808821 	move	s1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:78
	assert(sem->valid);
80019b84:	10400025 	beqz	v0,80019c1c <__up+0xb8>
80019b88:	00a09021 	move	s2,a1
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80019b8c:	40026000 	mfc0	v0,c0_status
80019b90:	30420001 	andi	v0,v0,0x1
80019b94:	10400003 	beqz	v0,80019ba4 <__up+0x40>
80019b98:	00008021 	move	s0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80019b9c:	0c006d04 	jal	8001b410 <intr_disable>
80019ba0:	24100001 	li	s0,1
__up():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:83
	bool intr_flag;
	local_intr_save(intr_flag);
	{
		wait_t *wait;
		if ((wait = wait_queue_first(&(sem->wait_queue))) == NULL) {
80019ba4:	2633000c 	addiu	s3,s1,12
80019ba8:	0c0069a8 	jal	8001a6a0 <wait_queue_first>
80019bac:	02602021 	move	a0,s3
80019bb0:	50400017 	beqzl	v0,80019c10 <__up+0xac>
80019bb4:	8e220000 	lw	v0,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:86
			sem->value++;
		} else {
			assert(wait->proc->wait_state == wait_state);
80019bb8:	8c430000 	lw	v1,0(v0)
80019bbc:	8c630084 	lw	v1,132(v1)
80019bc0:	1472001e 	bne	v1,s2,80019c3c <__up+0xd8>
80019bc4:	02602021 	move	a0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:87
			wakeup_wait(&(sem->wait_queue), wait, wait_state, 1);
80019bc8:	00402821 	move	a1,v0
80019bcc:	02403021 	move	a2,s2
80019bd0:	0c0069bb 	jal	8001a6ec <wakeup_wait>
80019bd4:	24070001 	li	a3,1
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80019bd8:	16000007 	bnez	s0,80019bf8 <__up+0x94>
80019bdc:	8fbf0024 	lw	ra,36(sp)
__up():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:91
		}
	}
	local_intr_restore(intr_flag);
}
80019be0:	8fb30020 	lw	s3,32(sp)
80019be4:	8fb2001c 	lw	s2,28(sp)
80019be8:	8fb10018 	lw	s1,24(sp)
80019bec:	8fb00014 	lw	s0,20(sp)
80019bf0:	03e00008 	jr	ra
80019bf4:	27bd0028 	addiu	sp,sp,40
80019bf8:	8fb30020 	lw	s3,32(sp)
80019bfc:	8fb2001c 	lw	s2,28(sp)
80019c00:	8fb10018 	lw	s1,24(sp)
80019c04:	8fb00014 	lw	s0,20(sp)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
80019c08:	08006d00 	j	8001b400 <intr_enable>
80019c0c:	27bd0028 	addiu	sp,sp,40
__up():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:84
	bool intr_flag;
	local_intr_save(intr_flag);
	{
		wait_t *wait;
		if ((wait = wait_queue_first(&(sem->wait_queue))) == NULL) {
			sem->value++;
80019c10:	24420001 	addiu	v0,v0,1
80019c14:	080066f6 	j	80019bd8 <__up+0x74>
80019c18:	ae220000 	sw	v0,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:78
#endif //UCONFIG_BIONIC_LIBC

static void
    __attribute__ ((noinline)) __up(semaphore_t * sem, uint32_t wait_state)
{
	assert(sem->valid);
80019c1c:	3c048002 	lui	a0,0x8002
80019c20:	3c068002 	lui	a2,0x8002
80019c24:	3c078002 	lui	a3,0x8002
80019c28:	24843c18 	addiu	a0,a0,15384
80019c2c:	2405004e 	li	a1,78
80019c30:	24c60e28 	addiu	a2,a2,3624
80019c34:	0c006b0b 	jal	8001ac2c <__panic>
80019c38:	24e73c20 	addiu	a3,a3,15392
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:86
	{
		wait_t *wait;
		if ((wait = wait_queue_first(&(sem->wait_queue))) == NULL) {
			sem->value++;
		} else {
			assert(wait->proc->wait_state == wait_state);
80019c3c:	3c048002 	lui	a0,0x8002
80019c40:	3c068002 	lui	a2,0x8002
80019c44:	3c078002 	lui	a3,0x8002
80019c48:	24843c18 	addiu	a0,a0,15384
80019c4c:	24050056 	li	a1,86
80019c50:	24c60e28 	addiu	a2,a2,3624
80019c54:	0c006b0b 	jal	8001ac2c <__panic>
80019c58:	24e73c2c 	addiu	a3,a3,15404

80019c5c <sem_init>:
sem_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:56
    ((sem_t)((uintptr_t)(sem) - PBASE))

void sem_init(semaphore_t * sem, int value)
{
	sem->value = value;
	sem->valid = 1;
80019c5c:	24020001 	li	v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:55
#define sem2semid(sem)                          \
    ((sem_t)((uintptr_t)(sem) - PBASE))

void sem_init(semaphore_t * sem, int value)
{
	sem->value = value;
80019c60:	ac850000 	sw	a1,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:56
	sem->valid = 1;
80019c64:	ac820004 	sw	v0,4(a0)
atomic_set():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:34
 *
 * Atomically sets the value of @v to @i.
 * */
static __always_inline void atomic_set(atomic_t * v, int i)
{
	v->counter = i;
80019c68:	ac800008 	sw	zero,8(a0)
sem_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:61
#ifdef UCONFIG_BIONIC_LIBC
	sem->addr = 0;		//-1 : // Not for futex
#endif //UCONFIG_BIONIC_LIBC
	set_sem_count(sem, 0);
	wait_queue_init(&(sem->wait_queue));
80019c6c:	0800694b 	j	8001a52c <wait_queue_init>
80019c70:	2484000c 	addiu	a0,a0,12

80019c74 <up>:
up():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:125
	return 0;
}

void up(semaphore_t * sem)
{
	__up(sem, WT_KSEM);
80019c74:	080066d9 	j	80019b64 <__up>
80019c78:	24050100 	li	a1,256

80019c7c <down>:
down():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:129
}

void down(semaphore_t * sem)
{
80019c7c:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:130
	uint32_t flags = __down(sem, WT_KSEM, NULL);
80019c80:	24050100 	li	a1,256
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:129
{
	__up(sem, WT_KSEM);
}

void down(semaphore_t * sem)
{
80019c84:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:130
	uint32_t flags = __down(sem, WT_KSEM, NULL);
80019c88:	0c006677 	jal	800199dc <__down>
80019c8c:	00003021 	move	a2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:131
	assert(flags == 0);
80019c90:	14400003 	bnez	v0,80019ca0 <down+0x24>
80019c94:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:132
}
80019c98:	03e00008 	jr	ra
80019c9c:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:131
}

void down(semaphore_t * sem)
{
	uint32_t flags = __down(sem, WT_KSEM, NULL);
	assert(flags == 0);
80019ca0:	3c048002 	lui	a0,0x8002
80019ca4:	3c068002 	lui	a2,0x8002
80019ca8:	3c078002 	lui	a3,0x8002
80019cac:	24843c18 	addiu	a0,a0,15384
80019cb0:	24050083 	li	a1,131
80019cb4:	24c60e28 	addiu	a2,a2,3624
80019cb8:	0c006b0b 	jal	8001ac2c <__panic>
80019cbc:	24e73c54 	addiu	a3,a3,15444

80019cc0 <try_down>:
try_down():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:135
}

bool try_down(semaphore_t * sem)
{
80019cc0:	27bdffe0 	addiu	sp,sp,-32
80019cc4:	afbf001c 	sw	ra,28(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80019cc8:	40026000 	mfc0	v0,c0_status
80019ccc:	30420001 	andi	v0,v0,0x1
80019cd0:	10400005 	beqz	v0,80019ce8 <try_down+0x28>
80019cd4:	00002821 	move	a1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80019cd8:	0c006d04 	jal	8001b410 <intr_disable>
80019cdc:	afa40010 	sw	a0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:16
	return 1;
80019ce0:	8fa40010 	lw	a0,16(sp)
80019ce4:	24050001 	li	a1,1
try_down():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:138
	bool intr_flag, ret = 0;
	local_intr_save(intr_flag);
	if (sem->value > 0) {
80019ce8:	8c830000 	lw	v1,0(a0)
80019cec:	18600004 	blez	v1,80019d00 <try_down+0x40>
80019cf0:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:139
		sem->value--, ret = 1;
80019cf4:	2463ffff 	addiu	v1,v1,-1
80019cf8:	ac830000 	sw	v1,0(a0)
80019cfc:	24020001 	li	v0,1
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
80019d00:	10a00005 	beqz	a1,80019d18 <try_down+0x58>
80019d04:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
80019d08:	0c006d00 	jal	8001b400 <intr_enable>
80019d0c:	afa20010 	sw	v0,16(sp)
80019d10:	8fa20010 	lw	v0,16(sp)
try_down():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:143
	}
	local_intr_restore(intr_flag);
	return ret;
}
80019d14:	8fbf001c 	lw	ra,28(sp)
80019d18:	03e00008 	jr	ra
80019d1c:	27bd0020 	addiu	sp,sp,32

80019d20 <sem_queue_create>:
sem_queue_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:166
	assert(flags == WT_INTERRUPTED);
	return ipc_check_timeout(timeout, saved_ticks);
}

sem_queue_t *sem_queue_create(void)
{
80019d20:	27bdffe0 	addiu	sp,sp,-32
80019d24:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:168
	sem_queue_t *sem_queue;
	if ((sem_queue = kmalloc(sizeof(sem_queue_t))) != NULL) {
80019d28:	0c005486 	jal	80015218 <kmalloc>
80019d2c:	24040020 	li	a0,32
80019d30:	10400009 	beqz	v0,80019d58 <sem_queue_create+0x38>
80019d34:	00402021 	move	a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:169
		sem_init(&(sem_queue->sem), 1);
80019d38:	24050001 	li	a1,1
80019d3c:	0c006717 	jal	80019c5c <sem_init>
80019d40:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:171
		set_sem_queue_count(sem_queue, 0);
		list_init(&(sem_queue->semu_list));
80019d44:	8fa20010 	lw	v0,16(sp)
80019d48:	24430018 	addiu	v1,v0,24
atomic_set():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:34
80019d4c:	ac400014 	sw	zero,20(v0)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
 * list_init - initialize a new entry
 * @elm:        new entry to be initialized
 * */
static inline void list_init(list_entry_t * elm)
{
	elm->prev = elm->next = elm;
80019d50:	ac43001c 	sw	v1,28(v0)
80019d54:	ac430018 	sw	v1,24(v0)
sem_queue_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:174
	}
	return sem_queue;
}
80019d58:	8fbf001c 	lw	ra,28(sp)
80019d5c:	03e00008 	jr	ra
80019d60:	27bd0020 	addiu	sp,sp,32

80019d64 <sem_queue_destroy>:
sem_queue_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:178

void sem_queue_destroy(sem_queue_t * sem_queue)
{
	kfree(sem_queue);
80019d64:	080054b1 	j	800152c4 <kfree>
80019d68:	00000000 	nop

80019d6c <semu_create>:
semu_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:202
	return NULL;
}
#endif //UCONFIG_BIONIC_LIBC

sem_undo_t *semu_create(semaphore_t * sem, int value)
{
80019d6c:	27bdffd8 	addiu	sp,sp,-40
80019d70:	afb0001c 	sw	s0,28(sp)
80019d74:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:204
	sem_undo_t *semu;
	if ((semu = kmalloc(sizeof(sem_undo_t))) != NULL) {
80019d78:	2404000c 	li	a0,12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:202
	return NULL;
}
#endif //UCONFIG_BIONIC_LIBC

sem_undo_t *semu_create(semaphore_t * sem, int value)
{
80019d7c:	afb10020 	sw	s1,32(sp)
80019d80:	afbf0024 	sw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:204
	sem_undo_t *semu;
	if ((semu = kmalloc(sizeof(sem_undo_t))) != NULL) {
80019d84:	0c005486 	jal	80015218 <kmalloc>
80019d88:	afa50010 	sw	a1,16(sp)
80019d8c:	1040000c 	beqz	v0,80019dc0 <semu_create+0x54>
80019d90:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:205
		if (sem == NULL && (sem = kmalloc(sizeof(semaphore_t))) != NULL) {
80019d94:	12000019 	beqz	s0,80019dfc <semu_create+0x90>
80019d98:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80019d9c:	40026000 	mfc0	v0,c0_status
80019da0:	30420001 	andi	v0,v0,0x1
80019da4:	1440000c 	bnez	v0,80019dd8 <semu_create+0x6c>
80019da8:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
80019dac:	8e020008 	lw	v0,8(s0)
80019db0:	24420001 	addiu	v0,v0,1
80019db4:	ae020008 	sw	v0,8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
80019db8:	8e020008 	lw	v0,8(s0)
semu_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:210
			sem_init(sem, value);
		}
		if (sem != NULL) {
			sem_count_inc(sem);
			semu->sem = sem;
80019dbc:	ae300000 	sw	s0,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:216
			return semu;
		}
		kfree(semu);
	}
	return NULL;
}
80019dc0:	8fbf0024 	lw	ra,36(sp)
80019dc4:	02201021 	move	v0,s1
80019dc8:	8fb0001c 	lw	s0,28(sp)
80019dcc:	8fb10020 	lw	s1,32(sp)
80019dd0:	03e00008 	jr	ra
80019dd4:	27bd0028 	addiu	sp,sp,40
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80019dd8:	0c006d04 	jal	8001b410 <intr_disable>
80019ddc:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
80019de0:	8e020008 	lw	v0,8(s0)
80019de4:	24420001 	addiu	v0,v0,1
80019de8:	ae020008 	sw	v0,8(s0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80019dec:	0c006d00 	jal	8001b400 <intr_enable>
80019df0:	00000000 	nop
80019df4:	0800676e 	j	80019db8 <semu_create+0x4c>
80019df8:	00000000 	nop
semu_create():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:205

sem_undo_t *semu_create(semaphore_t * sem, int value)
{
	sem_undo_t *semu;
	if ((semu = kmalloc(sizeof(sem_undo_t))) != NULL) {
		if (sem == NULL && (sem = kmalloc(sizeof(semaphore_t))) != NULL) {
80019dfc:	0c005486 	jal	80015218 <kmalloc>
80019e00:	24040014 	li	a0,20
80019e04:	00408021 	move	s0,v0
80019e08:	10400005 	beqz	v0,80019e20 <semu_create+0xb4>
80019e0c:	8fa50010 	lw	a1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:206
			sem_init(sem, value);
80019e10:	0c006717 	jal	80019c5c <sem_init>
80019e14:	00402021 	move	a0,v0
80019e18:	08006767 	j	80019d9c <semu_create+0x30>
80019e1c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:213
		if (sem != NULL) {
			sem_count_inc(sem);
			semu->sem = sem;
			return semu;
		}
		kfree(semu);
80019e20:	0c0054b1 	jal	800152c4 <kfree>
80019e24:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:215
	}
	return NULL;
80019e28:	08006770 	j	80019dc0 <semu_create+0x54>
80019e2c:	00008821 	move	s1,zero

80019e30 <semu_destroy>:
semu_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:219
}

void semu_destroy(sem_undo_t * semu)
{
80019e30:	27bdffe0 	addiu	sp,sp,-32
80019e34:	afb10018 	sw	s1,24(sp)
80019e38:	afb00014 	sw	s0,20(sp)
80019e3c:	afbf001c 	sw	ra,28(sp)
80019e40:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:220
	if (sem_count_dec(semu->sem) == 0) {
80019e44:	8c910000 	lw	s1,0(a0)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
80019e48:	40026000 	mfc0	v0,c0_status
80019e4c:	30420001 	andi	v0,v0,0x1
80019e50:	1440000f 	bnez	v0,80019e90 <semu_destroy+0x60>
80019e54:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
80019e58:	8e220008 	lw	v0,8(s1)
80019e5c:	2442ffff 	addiu	v0,v0,-1
80019e60:	ae220008 	sw	v0,8(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:157
	local_intr_restore(intr_flag);
	return v->counter;
80019e64:	8e220008 	lw	v0,8(s1)
semu_destroy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:220
80019e68:	14400004 	bnez	v0,80019e7c <semu_destroy+0x4c>
80019e6c:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:221
		kfree(semu->sem);
80019e70:	0c0054b1 	jal	800152c4 <kfree>
80019e74:	8e040000 	lw	a0,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:223
	}
	kfree(semu);
80019e78:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:224
}
80019e7c:	8fbf001c 	lw	ra,28(sp)
80019e80:	8fb10018 	lw	s1,24(sp)
80019e84:	8fb00014 	lw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:223
void semu_destroy(sem_undo_t * semu)
{
	if (sem_count_dec(semu->sem) == 0) {
		kfree(semu->sem);
	}
	kfree(semu);
80019e88:	080054b1 	j	800152c4 <kfree>
80019e8c:	27bd0020 	addiu	sp,sp,32
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
80019e90:	0c006d04 	jal	8001b410 <intr_disable>
80019e94:	00000000 	nop
atomic_add_return():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:155
 * */
static __always_inline int atomic_add_return(atomic_t * v, int i)
{
	int intr_flag;
	local_intr_save(intr_flag);
	v->counter += i;
80019e98:	8e220008 	lw	v0,8(s1)
80019e9c:	2442ffff 	addiu	v0,v0,-1
80019ea0:	ae220008 	sw	v0,8(s1)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
80019ea4:	0c006d00 	jal	8001b400 <intr_enable>
80019ea8:	00000000 	nop
80019eac:	08006799 	j	80019e64 <semu_destroy+0x34>
80019eb0:	00000000 	nop

80019eb4 <semu_list_search>:
semu_list_search():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:254
	}
}

static sem_undo_t *semu_list_search(list_entry_t * list, sem_t sem_id)
{
	if (VALID_SEMID(sem_id)) {
80019eb4:	3c038000 	lui	v1,0x8000
80019eb8:	24631000 	addiu	v1,v1,4096
80019ebc:	00a31821 	addu	v1,a1,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:253
		semu_destroy(le2semu(le, semu_link));
	}
}

static sem_undo_t *semu_list_search(list_entry_t * list, sem_t sem_id)
{
80019ec0:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:254
	if (VALID_SEMID(sem_id)) {
80019ec4:	00a3282b 	sltu	a1,a1,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:253
		semu_destroy(le2semu(le, semu_link));
	}
}

static sem_undo_t *semu_list_search(list_entry_t * list, sem_t sem_id)
{
80019ec8:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:254
	if (VALID_SEMID(sem_id)) {
80019ecc:	10a00014 	beqz	a1,80019f20 <semu_list_search+0x6c>
80019ed0:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:257
		semaphore_t *sem = semid2sem(sem_id);
		list_entry_t *le = list;
		while ((le = list_next(le)) != list) {
80019ed4:	00802821 	move	a1,a0
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
80019ed8:	8ca50004 	lw	a1,4(a1)
semu_list_search():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:257
80019edc:	10850013 	beq	a0,a1,80019f2c <semu_list_search+0x78>
80019ee0:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:259
			sem_undo_t *semu = le2semu(le, semu_link);
			if (semu->sem == sem) {
80019ee4:	8ca2fffc 	lw	v0,-4(a1)
80019ee8:	5443fffc 	bnel	v0,v1,80019edc <semu_list_search+0x28>
80019eec:	8ca50004 	lw	a1,4(a1)
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
80019ef0:	8ca70000 	lw	a3,0(a1)
80019ef4:	8ca60004 	lw	a2,4(a1)
semu_list_search():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:261
				list_del(le);
				if (sem->valid) {
80019ef8:	8c630004 	lw	v1,4(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:258
{
	if (VALID_SEMID(sem_id)) {
		semaphore_t *sem = semid2sem(sem_id);
		list_entry_t *le = list;
		while ((le = list_next(le)) != list) {
			sem_undo_t *semu = le2semu(le, semu_link);
80019efc:	24a2fffc 	addiu	v0,a1,-4
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
80019f00:	ace60004 	sw	a2,4(a3)
semu_list_search():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:261
			if (semu->sem == sem) {
				list_del(le);
				if (sem->valid) {
80019f04:	1060000c 	beqz	v1,80019f38 <semu_list_search+0x84>
80019f08:	acc70000 	sw	a3,0(a2)
list_add_after():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:93
 * Insert the new element @elm *after* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_after(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm, listelm->next);
80019f0c:	8c830004 	lw	v1,4(a0)
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
80019f10:	ac850004 	sw	a1,4(a0)
80019f14:	ac650000 	sw	a1,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
	elm->next = next;
80019f18:	aca30004 	sw	v1,4(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->prev = prev;
80019f1c:	aca40000 	sw	a0,0(a1)
semu_list_search():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:272
				}
			}
		}
	}
	return NULL;
}
80019f20:	8fbf0014 	lw	ra,20(sp)
80019f24:	03e00008 	jr	ra
80019f28:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:271
					return NULL;
				}
			}
		}
	}
	return NULL;
80019f2c:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:272
}
80019f30:	03e00008 	jr	ra
80019f34:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:265
				list_del(le);
				if (sem->valid) {
					list_add_after(list, le);
					return semu;
				} else {
					semu_destroy(semu);
80019f38:	0c00678c 	jal	80019e30 <semu_destroy>
80019f3c:	00402021 	move	a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:266
					return NULL;
80019f40:	080067c8 	j	80019f20 <semu_list_search+0x6c>
80019f44:	00001021 	move	v0,zero

80019f48 <dup_sem_queue>:
dup_sem_queue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:227
	}
	kfree(semu);
}

int dup_sem_queue(sem_queue_t * to, sem_queue_t * from)
{
80019f48:	27bdffd8 	addiu	sp,sp,-40
80019f4c:	afb2001c 	sw	s2,28(sp)
80019f50:	afbf0024 	sw	ra,36(sp)
80019f54:	afb30020 	sw	s3,32(sp)
80019f58:	afb10018 	sw	s1,24(sp)
80019f5c:	afb00014 	sw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:228
	assert(to != NULL && from != NULL);
80019f60:	10800027 	beqz	a0,8001a000 <dup_sem_queue+0xb8>
80019f64:	00809021 	move	s2,a0
80019f68:	10a00025 	beqz	a1,8001a000 <dup_sem_queue+0xb8>
80019f6c:	24b10018 	addiu	s1,a1,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:229
	list_entry_t *list = &(from->semu_list), *le = list;
80019f70:	02208021 	move	s0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:236
		sem_undo_t *semu = le2semu(le, semu_link);
		if (semu->sem->valid) {
			if ((semu = semu_create(semu->sem, 0)) == NULL) {
				return -E_NO_MEM;
			}
			list_add(&(to->semu_list), &(semu->semu_link));
80019f74:	24930018 	addiu	s3,a0,24
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
80019f78:	8e100004 	lw	s0,4(s0)
dup_sem_queue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:230

int dup_sem_queue(sem_queue_t * to, sem_queue_t * from)
{
	assert(to != NULL && from != NULL);
	list_entry_t *list = &(from->semu_list), *le = list;
	while ((le = list_next(le)) != list) {
80019f7c:	12300011 	beq	s1,s0,80019fc4 <dup_sem_queue+0x7c>
80019f80:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:232
		sem_undo_t *semu = le2semu(le, semu_link);
		if (semu->sem->valid) {
80019f84:	8e04fffc 	lw	a0,-4(s0)
80019f88:	8c820004 	lw	v0,4(a0)
80019f8c:	5040fffb 	beqzl	v0,80019f7c <dup_sem_queue+0x34>
80019f90:	8e100004 	lw	s0,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:233
			if ((semu = semu_create(semu->sem, 0)) == NULL) {
80019f94:	0c00675b 	jal	80019d6c <semu_create>
80019f98:	00002821 	move	a1,zero
80019f9c:	10400010 	beqz	v0,80019fe0 <dup_sem_queue+0x98>
80019fa0:	24440004 	addiu	a0,v0,4
list_add_after():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:93
 * Insert the new element @elm *after* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_after(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm, listelm->next);
80019fa4:	8e43001c 	lw	v1,28(s2)
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
80019fa8:	ae44001c 	sw	a0,28(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
	elm->next = next;
80019fac:	ac430008 	sw	v1,8(v0)
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
80019fb0:	8e100004 	lw	s0,4(s0)
list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
80019fb4:	ac640000 	sw	a0,0(v1)
dup_sem_queue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:230

int dup_sem_queue(sem_queue_t * to, sem_queue_t * from)
{
	assert(to != NULL && from != NULL);
	list_entry_t *list = &(from->semu_list), *le = list;
	while ((le = list_next(le)) != list) {
80019fb8:	1630fff2 	bne	s1,s0,80019f84 <dup_sem_queue+0x3c>
80019fbc:	ac530004 	sw	s3,4(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:240
			}
			list_add(&(to->semu_list), &(semu->semu_link));
		}
	}
	return 0;
}
80019fc0:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:239
				return -E_NO_MEM;
			}
			list_add(&(to->semu_list), &(semu->semu_link));
		}
	}
	return 0;
80019fc4:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:240
}
80019fc8:	8fb30020 	lw	s3,32(sp)
80019fcc:	8fb2001c 	lw	s2,28(sp)
80019fd0:	8fb10018 	lw	s1,24(sp)
80019fd4:	8fb00014 	lw	s0,20(sp)
80019fd8:	03e00008 	jr	ra
80019fdc:	27bd0028 	addiu	sp,sp,40
80019fe0:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:234
	list_entry_t *list = &(from->semu_list), *le = list;
	while ((le = list_next(le)) != list) {
		sem_undo_t *semu = le2semu(le, semu_link);
		if (semu->sem->valid) {
			if ((semu = semu_create(semu->sem, 0)) == NULL) {
				return -E_NO_MEM;
80019fe4:	2402fff4 	li	v0,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:240
			}
			list_add(&(to->semu_list), &(semu->semu_link));
		}
	}
	return 0;
}
80019fe8:	8fb30020 	lw	s3,32(sp)
80019fec:	8fb2001c 	lw	s2,28(sp)
80019ff0:	8fb10018 	lw	s1,24(sp)
80019ff4:	8fb00014 	lw	s0,20(sp)
80019ff8:	03e00008 	jr	ra
80019ffc:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:228
	kfree(semu);
}

int dup_sem_queue(sem_queue_t * to, sem_queue_t * from)
{
	assert(to != NULL && from != NULL);
8001a000:	3c048002 	lui	a0,0x8002
8001a004:	3c068002 	lui	a2,0x8002
8001a008:	3c078002 	lui	a3,0x8002
8001a00c:	24843c18 	addiu	a0,a0,15384
8001a010:	240500e4 	li	a1,228
8001a014:	24c60e28 	addiu	a2,a2,3624
8001a018:	0c006b0b 	jal	8001ac2c <__panic>
8001a01c:	24e728a8 	addiu	a3,a3,10408

8001a020 <exit_sem_queue>:
exit_sem_queue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:243
	}
	return 0;
}

void exit_sem_queue(sem_queue_t * sem_queue)
{
8001a020:	27bdffe0 	addiu	sp,sp,-32
8001a024:	afb00014 	sw	s0,20(sp)
8001a028:	afbf001c 	sw	ra,28(sp)
8001a02c:	afb10018 	sw	s1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:244
	assert(sem_queue != NULL && sem_queue_count(sem_queue) == 0);
8001a030:	10800015 	beqz	a0,8001a088 <exit_sem_queue+0x68>
8001a034:	00808021 	move	s0,a0
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
 *
 * Atomically reads the value of @v.
 * */
static __always_inline int atomic_read(const atomic_t * v)
{
	return v->counter;
8001a038:	8c820014 	lw	v0,20(a0)
exit_sem_queue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:244
8001a03c:	14400012 	bnez	v0,8001a088 <exit_sem_queue+0x68>
8001a040:	26110018 	addiu	s1,s0,24
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
8001a044:	8c84001c 	lw	a0,28(a0)
exit_sem_queue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:246
	list_entry_t *list = &(sem_queue->semu_list), *le = list;
	while ((le = list_next(list)) != list) {
8001a048:	1224000b 	beq	s1,a0,8001a078 <exit_sem_queue+0x58>
8001a04c:	8fbf001c 	lw	ra,28(sp)
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
8001a050:	8c830000 	lw	v1,0(a0)
8001a054:	8c820004 	lw	v0,4(a0)
exit_sem_queue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:248
		list_del(le);
		semu_destroy(le2semu(le, semu_link));
8001a058:	2484fffc 	addiu	a0,a0,-4
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
8001a05c:	ac620004 	sw	v0,4(v1)
exit_sem_queue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:248
8001a060:	0c00678c 	jal	80019e30 <semu_destroy>
8001a064:	ac430000 	sw	v1,0(v0)
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
8001a068:	8e04001c 	lw	a0,28(s0)
exit_sem_queue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:246

void exit_sem_queue(sem_queue_t * sem_queue)
{
	assert(sem_queue != NULL && sem_queue_count(sem_queue) == 0);
	list_entry_t *list = &(sem_queue->semu_list), *le = list;
	while ((le = list_next(list)) != list) {
8001a06c:	5624fff9 	bnel	s1,a0,8001a054 <exit_sem_queue+0x34>
8001a070:	8c830000 	lw	v1,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:250
		list_del(le);
		semu_destroy(le2semu(le, semu_link));
	}
}
8001a074:	8fbf001c 	lw	ra,28(sp)
8001a078:	8fb10018 	lw	s1,24(sp)
8001a07c:	8fb00014 	lw	s0,20(sp)
8001a080:	03e00008 	jr	ra
8001a084:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:244
	return 0;
}

void exit_sem_queue(sem_queue_t * sem_queue)
{
	assert(sem_queue != NULL && sem_queue_count(sem_queue) == 0);
8001a088:	3c048002 	lui	a0,0x8002
8001a08c:	3c068002 	lui	a2,0x8002
8001a090:	3c078002 	lui	a3,0x8002
8001a094:	24843c18 	addiu	a0,a0,15384
8001a098:	240500f4 	li	a1,244
8001a09c:	24c60e28 	addiu	a2,a2,3624
8001a0a0:	0c006b0b 	jal	8001ac2c <__panic>
8001a0a4:	24e73c60 	addiu	a3,a3,15456

8001a0a8 <ipc_sem_init>:
ipc_sem_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:313
	return sem2semid(semu->sem);
}
#endif //UCONFIG_BIONIC_LIBC

int ipc_sem_init(int value)
{
8001a0a8:	27bdffe0 	addiu	sp,sp,-32
8001a0ac:	afb00014 	sw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:314
	assert(current->sem_queue != NULL);
8001a0b0:	3c108015 	lui	s0,0x8015
8001a0b4:	8e0277a4 	lw	v0,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:313
	return sem2semid(semu->sem);
}
#endif //UCONFIG_BIONIC_LIBC

int ipc_sem_init(int value)
{
8001a0b8:	afbf001c 	sw	ra,28(sp)
8001a0bc:	afb10018 	sw	s1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:314
	assert(current->sem_queue != NULL);
8001a0c0:	8c4200ac 	lw	v0,172(v0)
8001a0c4:	1040001c 	beqz	v0,8001a138 <ipc_sem_init+0x90>
8001a0c8:	00802821 	move	a1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:317

	sem_undo_t *semu;
	if ((semu = semu_create(NULL, value)) == NULL) {
8001a0cc:	0c00675b 	jal	80019d6c <semu_create>
8001a0d0:	00002021 	move	a0,zero
8001a0d4:	00408821 	move	s1,v0
8001a0d8:	12200012 	beqz	s1,8001a124 <ipc_sem_init+0x7c>
8001a0dc:	2402fff4 	li	v0,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:321
		return -E_NO_MEM;
	}

	sem_queue_t *sem_queue = current->sem_queue;
8001a0e0:	8e0277a4 	lw	v0,30628(s0)
8001a0e4:	8c5000ac 	lw	s0,172(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:322
	down(&(sem_queue->sem));
8001a0e8:	0c00671f 	jal	80019c7c <down>
8001a0ec:	02002021 	move	a0,s0
list_add_after():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:93
 * Insert the new element @elm *after* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_after(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm, listelm->next);
8001a0f0:	8e02001c 	lw	v0,28(s0)
ipc_sem_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:323
	list_add_after(&(sem_queue->semu_list), &(semu->semu_link));
8001a0f4:	26230004 	addiu	v1,s1,4
8001a0f8:	26040018 	addiu	a0,s0,24
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
8001a0fc:	ac430000 	sw	v1,0(v0)
8001a100:	ae03001c 	sw	v1,28(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->next = next;
	elm->prev = prev;
8001a104:	ae240004 	sw	a0,4(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
	elm->next = next;
8001a108:	ae220008 	sw	v0,8(s1)
ipc_sem_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:324
	up(&(sem_queue->sem));
8001a10c:	0c00671d 	jal	80019c74 <up>
8001a110:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:325
	return sem2semid(semu->sem);
8001a114:	8e230000 	lw	v1,0(s1)
8001a118:	3c027fff 	lui	v0,0x7fff
8001a11c:	3442f000 	ori	v0,v0,0xf000
8001a120:	00621021 	addu	v0,v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:326
}
8001a124:	8fbf001c 	lw	ra,28(sp)
8001a128:	8fb10018 	lw	s1,24(sp)
8001a12c:	8fb00014 	lw	s0,20(sp)
8001a130:	03e00008 	jr	ra
8001a134:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:314
}
#endif //UCONFIG_BIONIC_LIBC

int ipc_sem_init(int value)
{
	assert(current->sem_queue != NULL);
8001a138:	3c048002 	lui	a0,0x8002
8001a13c:	3c068002 	lui	a2,0x8002
8001a140:	3c078002 	lui	a3,0x8002
8001a144:	24843c18 	addiu	a0,a0,15384
8001a148:	2405013a 	li	a1,314
8001a14c:	24c60e28 	addiu	a2,a2,3624
8001a150:	0c006b0b 	jal	8001ac2c <__panic>
8001a154:	24e73c98 	addiu	a3,a3,15512

8001a158 <ipc_sem_post>:
ipc_sem_post():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:330
	return sem2semid(semu->sem);
}

int ipc_sem_post(sem_t sem_id)
{
	assert(current->sem_queue != NULL);
8001a158:	3c028015 	lui	v0,0x8015
8001a15c:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:329
	up(&(sem_queue->sem));
	return sem2semid(semu->sem);
}

int ipc_sem_post(sem_t sem_id)
{
8001a160:	27bdffd8 	addiu	sp,sp,-40
8001a164:	afb0001c 	sw	s0,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:330
	assert(current->sem_queue != NULL);
8001a168:	8c5000ac 	lw	s0,172(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:329
	up(&(sem_queue->sem));
	return sem2semid(semu->sem);
}

int ipc_sem_post(sem_t sem_id)
{
8001a16c:	afbf0024 	sw	ra,36(sp)
8001a170:	afb10020 	sw	s1,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:330
	assert(current->sem_queue != NULL);
8001a174:	12000016 	beqz	s0,8001a1d0 <ipc_sem_post+0x78>
8001a178:	00802821 	move	a1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:334

	sem_undo_t *semu;
	sem_queue_t *sem_queue = current->sem_queue;
	down(&(sem_queue->sem));
8001a17c:	02002021 	move	a0,s0
8001a180:	0c00671f 	jal	80019c7c <down>
8001a184:	afa50010 	sw	a1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:335
	semu = semu_list_search(&(sem_queue->semu_list), sem_id);
8001a188:	8fa50010 	lw	a1,16(sp)
8001a18c:	0c0067ad 	jal	80019eb4 <semu_list_search>
8001a190:	26040018 	addiu	a0,s0,24
8001a194:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:336
	up(&(sem_queue->sem));
8001a198:	0c00671d 	jal	80019c74 <up>
8001a19c:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:337
	if (semu != NULL) {
8001a1a0:	12200006 	beqz	s1,8001a1bc <ipc_sem_post+0x64>
8001a1a4:	2402ffea 	li	v0,-22
usem_up():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:147
	return ret;
}

static int usem_up(semaphore_t * sem)
{
	__up(sem, WT_USEM);
8001a1a8:	8e240000 	lw	a0,0(s1)
8001a1ac:	3c058000 	lui	a1,0x8000
8001a1b0:	0c0066d9 	jal	80019b64 <__up>
8001a1b4:	24a50101 	addiu	a1,a1,257
ipc_sem_post():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:338
	sem_queue_t *sem_queue = current->sem_queue;
	down(&(sem_queue->sem));
	semu = semu_list_search(&(sem_queue->semu_list), sem_id);
	up(&(sem_queue->sem));
	if (semu != NULL) {
		return usem_up(semu->sem);
8001a1b8:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:341
	}
	return -E_INVAL;
}
8001a1bc:	8fbf0024 	lw	ra,36(sp)
8001a1c0:	8fb10020 	lw	s1,32(sp)
8001a1c4:	8fb0001c 	lw	s0,28(sp)
8001a1c8:	03e00008 	jr	ra
8001a1cc:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:330
	return sem2semid(semu->sem);
}

int ipc_sem_post(sem_t sem_id)
{
	assert(current->sem_queue != NULL);
8001a1d0:	3c048002 	lui	a0,0x8002
8001a1d4:	3c068002 	lui	a2,0x8002
8001a1d8:	3c078002 	lui	a3,0x8002
8001a1dc:	24843c18 	addiu	a0,a0,15384
8001a1e0:	2405014a 	li	a1,330
8001a1e4:	24c60e28 	addiu	a2,a2,3624
8001a1e8:	0c006b0b 	jal	8001ac2c <__panic>
8001a1ec:	24e73c98 	addiu	a3,a3,15512

8001a1f0 <ipc_sem_wait>:
ipc_sem_wait():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:369
	return -E_INVAL;
}
#endif //UCONFIG_BIONIC_LIBC

int ipc_sem_wait(sem_t sem_id, unsigned int timeout)
{
8001a1f0:	27bdffb0 	addiu	sp,sp,-80
8001a1f4:	afb30044 	sw	s3,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:370
	assert(current->sem_queue != NULL);
8001a1f8:	3c138015 	lui	s3,0x8015
8001a1fc:	8e6277a4 	lw	v0,30628(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:369
	return -E_INVAL;
}
#endif //UCONFIG_BIONIC_LIBC

int ipc_sem_wait(sem_t sem_id, unsigned int timeout)
{
8001a200:	afb1003c 	sw	s1,60(sp)
8001a204:	afb40048 	sw	s4,72(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:370
	assert(current->sem_queue != NULL);
8001a208:	8c5100ac 	lw	s1,172(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:369
	return -E_INVAL;
}
#endif //UCONFIG_BIONIC_LIBC

int ipc_sem_wait(sem_t sem_id, unsigned int timeout)
{
8001a20c:	afb00038 	sw	s0,56(sp)
8001a210:	afbf004c 	sw	ra,76(sp)
8001a214:	afb20040 	sw	s2,64(sp)
8001a218:	0080a021 	move	s4,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:370
	assert(current->sem_queue != NULL);
8001a21c:	12200031 	beqz	s1,8001a2e4 <ipc_sem_wait+0xf4>
8001a220:	00a08021 	move	s0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:374

	sem_undo_t *semu;
	sem_queue_t *sem_queue = current->sem_queue;
	down(&(sem_queue->sem));
8001a224:	0c00671f 	jal	80019c7c <down>
8001a228:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:375
	semu = semu_list_search(&(sem_queue->semu_list), sem_id);
8001a22c:	26240018 	addiu	a0,s1,24
8001a230:	0c0067ad 	jal	80019eb4 <semu_list_search>
8001a234:	02802821 	move	a1,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:376
	up(&(sem_queue->sem));
8001a238:	02202021 	move	a0,s1
8001a23c:	0c00671d 	jal	80019c74 <up>
8001a240:	afa20030 	sw	v0,48(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:377
	if (semu != NULL) {
8001a244:	8fa20030 	lw	v0,48(sp)
8001a248:	5040001e 	beqzl	v0,8001a2c4 <ipc_sem_wait+0xd4>
8001a24c:	2402ffea 	li	v0,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:378
		return usem_down(semu->sem, timeout);
8001a250:	8c440000 	lw	a0,0(v0)
ipc_timer_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:28

static inline timer_t *ipc_timer_init(unsigned int timeout,
				      unsigned long *saved_ticks,
				      timer_t * timer)
{
	if (timeout != 0) {
8001a254:	1200000b 	beqz	s0,8001a284 <ipc_sem_wait+0x94>
8001a258:	00003021 	move	a2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:30
		*saved_ticks = ticks;
		return timer_init(timer, pls_read(current), timeout);
8001a25c:	8e6277a4 	lw	v0,30628(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:29
static inline timer_t *ipc_timer_init(unsigned int timeout,
				      unsigned long *saved_ticks,
				      timer_t * timer)
{
	if (timeout != 0) {
		*saved_ticks = ticks;
8001a260:	3c038015 	lui	v1,0x8015
8001a264:	8c7277ac 	lw	s2,30636(v1)
timer_init():

static inline timer_t *timer_init(timer_t * timer, struct proc_struct *proc,
				  int expires)
{
	timer->expires = expires;
	timer->proc = proc;
8001a268:	afa20014 	sw	v0,20(sp)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
 * list_init - initialize a new entry
 * @elm:        new entry to be initialized
 * */
static inline void list_init(list_entry_t * elm)
{
	elm->prev = elm->next = elm;
8001a26c:	27a20024 	addiu	v0,sp,36
timer_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.h:28
    to_struct((le), timer_t, member)

static inline timer_t *timer_init(timer_t * timer, struct proc_struct *proc,
				  int expires)
{
	timer->expires = expires;
8001a270:	afb00010 	sw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/schedule/sched.h:30
	timer->proc = proc;
	timer->linux_timer.linux_timer = NULL;
8001a274:	afa00018 	sw	zero,24(sp)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
8001a278:	afa20028 	sw	v0,40(sp)
8001a27c:	afa20024 	sw	v0,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:30
		return timer_init(timer, pls_read(current), timeout);
8001a280:	27a60010 	addiu	a2,sp,16
usem_down():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:158
	unsigned long saved_ticks;
	timer_t __timer, *timer =
	    ipc_timer_init(timeout, &saved_ticks, &__timer);

	uint32_t flags;
	if ((flags = __down(sem, WT_USEM, timer)) == 0) {
8001a284:	3c118000 	lui	s1,0x8000
8001a288:	0c006677 	jal	800199dc <__down>
8001a28c:	26250101 	addiu	a1,s1,257
8001a290:	00401821 	move	v1,v0
8001a294:	1060000b 	beqz	v1,8001a2c4 <ipc_sem_wait+0xd4>
8001a298:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:161
		return 0;
	}
	assert(flags == WT_INTERRUPTED);
8001a29c:	14710019 	bne	v1,s1,8001a304 <ipc_sem_wait+0x114>
8001a2a0:	3c048002 	lui	a0,0x8002
ipc_check_timeout():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:38
}

static inline int
ipc_check_timeout(unsigned int timeout, unsigned long saved_ticks)
{
	if (timeout != 0) {
8001a2a4:	12000007 	beqz	s0,8001a2c4 <ipc_sem_wait+0xd4>
8001a2a8:	2402ffff 	li	v0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:39
		unsigned long delt = (unsigned long)(ticks - saved_ticks);
8001a2ac:	3c038015 	lui	v1,0x8015
8001a2b0:	8c6377ac 	lw	v1,30636(v1)
8001a2b4:	00729023 	subu	s2,v1,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:40
		if (delt >= timeout) {
8001a2b8:	0250802b 	sltu	s0,s2,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/ipc.h:44
			return -E_TIMEOUT;
		}
	}
	return -1;
8001a2bc:	2403fff0 	li	v1,-16
8001a2c0:	0070100a 	movz	v0,v1,s0
ipc_sem_wait():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:381
	up(&(sem_queue->sem));
	if (semu != NULL) {
		return usem_down(semu->sem, timeout);
	}
	return -E_INVAL;
}
8001a2c4:	8fbf004c 	lw	ra,76(sp)
8001a2c8:	8fb40048 	lw	s4,72(sp)
8001a2cc:	8fb30044 	lw	s3,68(sp)
8001a2d0:	8fb20040 	lw	s2,64(sp)
8001a2d4:	8fb1003c 	lw	s1,60(sp)
8001a2d8:	8fb00038 	lw	s0,56(sp)
8001a2dc:	03e00008 	jr	ra
8001a2e0:	27bd0050 	addiu	sp,sp,80
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:370
}
#endif //UCONFIG_BIONIC_LIBC

int ipc_sem_wait(sem_t sem_id, unsigned int timeout)
{
	assert(current->sem_queue != NULL);
8001a2e4:	3c048002 	lui	a0,0x8002
8001a2e8:	3c068002 	lui	a2,0x8002
8001a2ec:	3c078002 	lui	a3,0x8002
8001a2f0:	24843c18 	addiu	a0,a0,15384
8001a2f4:	24050172 	li	a1,370
8001a2f8:	24c60e28 	addiu	a2,a2,3624
8001a2fc:	0c006b0b 	jal	8001ac2c <__panic>
8001a300:	24e73c98 	addiu	a3,a3,15512
usem_down():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:161

	uint32_t flags;
	if ((flags = __down(sem, WT_USEM, timer)) == 0) {
		return 0;
	}
	assert(flags == WT_INTERRUPTED);
8001a304:	3c068002 	lui	a2,0x8002
8001a308:	3c078002 	lui	a3,0x8002
8001a30c:	24843c18 	addiu	a0,a0,15384
8001a310:	240500a1 	li	a1,161
8001a314:	24c60e28 	addiu	a2,a2,3624
8001a318:	0c006b0b 	jal	8001ac2c <__panic>
8001a31c:	24e73a74 	addiu	a3,a3,14964

8001a320 <ipc_sem_free>:
ipc_sem_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:385
	return -E_INVAL;
}

int ipc_sem_free(sem_t sem_id)
{
	assert(current->sem_queue != NULL);
8001a320:	3c028015 	lui	v0,0x8015
8001a324:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:384
	}
	return -E_INVAL;
}

int ipc_sem_free(sem_t sem_id)
{
8001a328:	27bdffd8 	addiu	sp,sp,-40
8001a32c:	afb0001c 	sw	s0,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:385
	assert(current->sem_queue != NULL);
8001a330:	8c5000ac 	lw	s0,172(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:384
	}
	return -E_INVAL;
}

int ipc_sem_free(sem_t sem_id)
{
8001a334:	afbf0024 	sw	ra,36(sp)
8001a338:	afb10020 	sw	s1,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:385
	assert(current->sem_queue != NULL);
8001a33c:	1200002b 	beqz	s0,8001a3ec <ipc_sem_free+0xcc>
8001a340:	00802821 	move	a1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:389

	sem_undo_t *semu;
	sem_queue_t *sem_queue = current->sem_queue;
	down(&(sem_queue->sem));
8001a344:	02002021 	move	a0,s0
8001a348:	0c00671f 	jal	80019c7c <down>
8001a34c:	afa50010 	sw	a1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:390
	semu = semu_list_search(&(sem_queue->semu_list), sem_id);
8001a350:	8fa50010 	lw	a1,16(sp)
8001a354:	0c0067ad 	jal	80019eb4 <semu_list_search>
8001a358:	26040018 	addiu	a0,s0,24
8001a35c:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:391
	up(&(sem_queue->sem));
8001a360:	0c00671d 	jal	80019c74 <up>
8001a364:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:394

	int ret = -E_INVAL;
	if (semu != NULL) {
8001a368:	1220000b 	beqz	s1,8001a398 <ipc_sem_free+0x78>
8001a36c:	2402ffea 	li	v0,-22
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8001a370:	40026000 	mfc0	v0,c0_status
8001a374:	30420001 	andi	v0,v0,0x1
8001a378:	1440000c 	bnez	v0,8001a3ac <ipc_sem_free+0x8c>
8001a37c:	3c058000 	lui	a1,0x8000
ipc_sem_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:398
		bool intr_flag;
		local_intr_save(intr_flag);
		{
			semaphore_t *sem = semu->sem;
8001a380:	8e240000 	lw	a0,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:400
			sem->valid = 0, ret = 0;
			wakeup_queue(&(sem->wait_queue), WT_INTERRUPTED, 1);
8001a384:	24060001 	li	a2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:399
	if (semu != NULL) {
		bool intr_flag;
		local_intr_save(intr_flag);
		{
			semaphore_t *sem = semu->sem;
			sem->valid = 0, ret = 0;
8001a388:	ac800004 	sw	zero,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:400
			wakeup_queue(&(sem->wait_queue), WT_INTERRUPTED, 1);
8001a38c:	0c0069d4 	jal	8001a750 <wakeup_queue>
8001a390:	2484000c 	addiu	a0,a0,12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:399
	if (semu != NULL) {
		bool intr_flag;
		local_intr_save(intr_flag);
		{
			semaphore_t *sem = semu->sem;
			sem->valid = 0, ret = 0;
8001a394:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:405
			wakeup_queue(&(sem->wait_queue), WT_INTERRUPTED, 1);
		}
		local_intr_restore(intr_flag);
	}
	return ret;
}
8001a398:	8fbf0024 	lw	ra,36(sp)
8001a39c:	8fb10020 	lw	s1,32(sp)
8001a3a0:	8fb0001c 	lw	s0,28(sp)
8001a3a4:	03e00008 	jr	ra
8001a3a8:	27bd0028 	addiu	sp,sp,40
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8001a3ac:	0c006d04 	jal	8001b410 <intr_disable>
8001a3b0:	00000000 	nop
ipc_sem_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:398
	int ret = -E_INVAL;
	if (semu != NULL) {
		bool intr_flag;
		local_intr_save(intr_flag);
		{
			semaphore_t *sem = semu->sem;
8001a3b4:	8e220000 	lw	v0,0(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:400
			sem->valid = 0, ret = 0;
			wakeup_queue(&(sem->wait_queue), WT_INTERRUPTED, 1);
8001a3b8:	3c058000 	lui	a1,0x8000
8001a3bc:	24060001 	li	a2,1
8001a3c0:	2444000c 	addiu	a0,v0,12
8001a3c4:	0c0069d4 	jal	8001a750 <wakeup_queue>
8001a3c8:	ac400004 	sw	zero,4(v0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8001a3cc:	0c006d00 	jal	8001b400 <intr_enable>
8001a3d0:	00000000 	nop
ipc_sem_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:405
		}
		local_intr_restore(intr_flag);
	}
	return ret;
}
8001a3d4:	8fbf0024 	lw	ra,36(sp)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:399
	if (semu != NULL) {
		bool intr_flag;
		local_intr_save(intr_flag);
		{
			semaphore_t *sem = semu->sem;
			sem->valid = 0, ret = 0;
8001a3d8:	00001021 	move	v0,zero
ipc_sem_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:405
			wakeup_queue(&(sem->wait_queue), WT_INTERRUPTED, 1);
		}
		local_intr_restore(intr_flag);
	}
	return ret;
}
8001a3dc:	8fb10020 	lw	s1,32(sp)
8001a3e0:	8fb0001c 	lw	s0,28(sp)
8001a3e4:	03e00008 	jr	ra
8001a3e8:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:385
	return -E_INVAL;
}

int ipc_sem_free(sem_t sem_id)
{
	assert(current->sem_queue != NULL);
8001a3ec:	3c048002 	lui	a0,0x8002
8001a3f0:	3c068002 	lui	a2,0x8002
8001a3f4:	3c078002 	lui	a3,0x8002
8001a3f8:	24843c18 	addiu	a0,a0,15384
8001a3fc:	24050181 	li	a1,385
8001a400:	24c60e28 	addiu	a2,a2,3624
8001a404:	0c006b0b 	jal	8001ac2c <__panic>
8001a408:	24e73c98 	addiu	a3,a3,15512

8001a40c <ipc_sem_get_value>:
ipc_sem_get_value():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:408
	}
	return ret;
}

int ipc_sem_get_value(sem_t sem_id, int *value_store)
{
8001a40c:	27bdffc8 	addiu	sp,sp,-56
8001a410:	afb20028 	sw	s2,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:409
	assert(current->sem_queue != NULL);
8001a414:	3c128015 	lui	s2,0x8015
8001a418:	8e4277a4 	lw	v0,30628(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:408
	}
	return ret;
}

int ipc_sem_get_value(sem_t sem_id, int *value_store)
{
8001a41c:	afb40030 	sw	s4,48(sp)
8001a420:	afb3002c 	sw	s3,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:409
	assert(current->sem_queue != NULL);
8001a424:	8c4300ac 	lw	v1,172(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:408
	}
	return ret;
}

int ipc_sem_get_value(sem_t sem_id, int *value_store)
{
8001a428:	afbf0034 	sw	ra,52(sp)
8001a42c:	afb10024 	sw	s1,36(sp)
8001a430:	afb00020 	sw	s0,32(sp)
8001a434:	0080a021 	move	s4,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:409
	assert(current->sem_queue != NULL);
8001a438:	1060002b 	beqz	v1,8001a4e8 <ipc_sem_get_value+0xdc>
8001a43c:	00a09821 	move	s3,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:410
	if (value_store == NULL) {
8001a440:	10a00020 	beqz	a1,8001a4c4 <ipc_sem_get_value+0xb8>
8001a444:	2411ffea 	li	s1,-22
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:414
		return -E_INVAL;
	}

	struct mm_struct *mm = current->mm;
8001a448:	8c500020 	lw	s0,32(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:415
	if (!user_mem_check(mm, (uintptr_t) value_store, sizeof(int), 1)) {
8001a44c:	24060004 	li	a2,4
8001a450:	24070001 	li	a3,1
8001a454:	0c005077 	jal	800141dc <user_mem_check>
8001a458:	02002021 	move	a0,s0
8001a45c:	10400019 	beqz	v0,8001a4c4 <ipc_sem_get_value+0xb8>
8001a460:	8e4277a4 	lw	v0,30628(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:420
		return -E_INVAL;
	}

	sem_undo_t *semu;
	sem_queue_t *sem_queue = current->sem_queue;
8001a464:	8c5200ac 	lw	s2,172(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:421
	down(&(sem_queue->sem));
8001a468:	0c00671f 	jal	80019c7c <down>
8001a46c:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:422
	semu = semu_list_search(&(sem_queue->semu_list), sem_id);
8001a470:	26440018 	addiu	a0,s2,24
8001a474:	0c0067ad 	jal	80019eb4 <semu_list_search>
8001a478:	02802821 	move	a1,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:423
	up(&(sem_queue->sem));
8001a47c:	02402021 	move	a0,s2
8001a480:	0c00671d 	jal	80019c74 <up>
8001a484:	afa20018 	sw	v0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:426

	int ret = -E_INVAL;
	if (semu != NULL) {
8001a488:	8fa20018 	lw	v0,24(sp)
8001a48c:	1040000d 	beqz	v0,8001a4c4 <ipc_sem_get_value+0xb8>
8001a490:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:427
		int value = semu->sem->value;
8001a494:	8c420000 	lw	v0,0(v0)
8001a498:	8c420000 	lw	v0,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:428
		lock_mm(mm);
8001a49c:	0c004c26 	jal	80013098 <lock_mm>
8001a4a0:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:430
		{
			if (copy_to_user(mm, value_store, &value, sizeof(int))) {
8001a4a4:	02002021 	move	a0,s0
8001a4a8:	02602821 	move	a1,s3
8001a4ac:	27a60010 	addiu	a2,sp,16
8001a4b0:	0c007948 	jal	8001e520 <copy_to_user>
8001a4b4:	24070004 	li	a3,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:434
				ret = 0;
			}
		}
		unlock_mm(mm);
8001a4b8:	02002021 	move	a0,s0
8001a4bc:	0c004c37 	jal	800130dc <unlock_mm>
8001a4c0:	0002880b 	movn	s1,zero,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:437
	}
	return ret;
}
8001a4c4:	8fbf0034 	lw	ra,52(sp)
8001a4c8:	02201021 	move	v0,s1
8001a4cc:	8fb40030 	lw	s4,48(sp)
8001a4d0:	8fb3002c 	lw	s3,44(sp)
8001a4d4:	8fb20028 	lw	s2,40(sp)
8001a4d8:	8fb10024 	lw	s1,36(sp)
8001a4dc:	8fb00020 	lw	s0,32(sp)
8001a4e0:	03e00008 	jr	ra
8001a4e4:	27bd0038 	addiu	sp,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sem.c:409
	return ret;
}

int ipc_sem_get_value(sem_t sem_id, int *value_store)
{
	assert(current->sem_queue != NULL);
8001a4e8:	3c048002 	lui	a0,0x8002
8001a4ec:	3c068002 	lui	a2,0x8002
8001a4f0:	3c078002 	lui	a3,0x8002
8001a4f4:	24843c18 	addiu	a0,a0,15384
8001a4f8:	24050199 	li	a1,409
8001a4fc:	24c60e28 	addiu	a2,a2,3624
8001a500:	0c006b0b 	jal	8001ac2c <__panic>
8001a504:	24e73c98 	addiu	a3,a3,15512

8001a508 <sync_init>:
sync_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/sync.c:6
#include <sync.h>
#include <mbox.h>

void sync_init(void)
{
	mbox_init();
8001a508:	080061b1 	j	800186c4 <mbox_init>
8001a50c:	00000000 	nop

8001a510 <wait_init>:
wait_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:15

void wait_init(wait_t * wait, struct proc_struct *proc)
{
	wait->proc = proc;
	wait->wakeup_flags = WT_INTERRUPTED;
	list_init(&(wait->wait_link));
8001a510:	2482000c 	addiu	v0,a0,12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:14
#define current (pls_read(current))

void wait_init(wait_t * wait, struct proc_struct *proc)
{
	wait->proc = proc;
	wait->wakeup_flags = WT_INTERRUPTED;
8001a514:	3c038000 	lui	v1,0x8000
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:13

#define current (pls_read(current))

void wait_init(wait_t * wait, struct proc_struct *proc)
{
	wait->proc = proc;
8001a518:	ac850000 	sw	a1,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:14
	wait->wakeup_flags = WT_INTERRUPTED;
8001a51c:	ac830004 	sw	v1,4(a0)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
8001a520:	ac820010 	sw	v0,16(a0)
wait_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:16
	list_init(&(wait->wait_link));
}
8001a524:	03e00008 	jr	ra
8001a528:	ac82000c 	sw	v0,12(a0)

8001a52c <wait_queue_init>:
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
8001a52c:	ac840004 	sw	a0,4(a0)
wait_queue_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:21

void wait_queue_init(wait_queue_t * queue)
{
	list_init(&(queue->wait_head));
}
8001a530:	03e00008 	jr	ra
8001a534:	ac840000 	sw	a0,0(a0)

8001a538 <wait_queue_add>:
wait_queue_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:25

void wait_queue_add(wait_queue_t * queue, wait_t * wait)
{
	assert(list_empty(&(wait->wait_link)) && wait->proc != NULL);
8001a538:	8ca30010 	lw	v1,16(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:24
{
	list_init(&(queue->wait_head));
}

void wait_queue_add(wait_queue_t * queue, wait_t * wait)
{
8001a53c:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:25
	assert(list_empty(&(wait->wait_link)) && wait->proc != NULL);
8001a540:	24a2000c 	addiu	v0,a1,12
8001a544:	1443000c 	bne	v0,v1,8001a578 <wait_queue_add+0x40>
8001a548:	afbf0014 	sw	ra,20(sp)
8001a54c:	8ca30000 	lw	v1,0(a1)
8001a550:	10600009 	beqz	v1,8001a578 <wait_queue_add+0x40>
8001a554:	8fbf0014 	lw	ra,20(sp)
list_add_before():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:80
 * Insert the new element @elm *before* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_before(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm->prev, listelm);
8001a558:	8c830000 	lw	v1,0(a0)
wait_queue_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:26
	wait->wait_queue = queue;
8001a55c:	aca40008 	sw	a0,8(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:28
	list_add_before(&(queue->wait_head), &(wait->wait_link));
}
8001a560:	27bd0018 	addiu	sp,sp,24
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
8001a564:	ac820000 	sw	v0,0(a0)
8001a568:	ac620004 	sw	v0,4(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->next = next;
	elm->prev = prev;
8001a56c:	aca3000c 	sw	v1,12(a1)
wait_queue_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:28
8001a570:	03e00008 	jr	ra
8001a574:	aca40010 	sw	a0,16(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:25
	list_init(&(queue->wait_head));
}

void wait_queue_add(wait_queue_t * queue, wait_t * wait)
{
	assert(list_empty(&(wait->wait_link)) && wait->proc != NULL);
8001a578:	3c048002 	lui	a0,0x8002
8001a57c:	3c068002 	lui	a2,0x8002
8001a580:	3c078002 	lui	a3,0x8002
8001a584:	24843cb4 	addiu	a0,a0,15540
8001a588:	24050019 	li	a1,25
8001a58c:	24c60e28 	addiu	a2,a2,3624
8001a590:	0c006b0b 	jal	8001ac2c <__panic>
8001a594:	24e73cbc 	addiu	a3,a3,15548

8001a598 <wait_queue_del>:
list_empty():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:126
 * list_empty - tests whether a list is empty
 * @list:       the list to test.
 * */
static inline bool list_empty(list_entry_t * list)
{
	return list->next == list;
8001a598:	8ca30010 	lw	v1,16(a1)
wait_queue_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:31
	wait->wait_queue = queue;
	list_add_before(&(queue->wait_head), &(wait->wait_link));
}

void wait_queue_del(wait_queue_t * queue, wait_t * wait)
{
8001a59c:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:32
	assert(!list_empty(&(wait->wait_link)) && wait->wait_queue == queue);
8001a5a0:	24a2000c 	addiu	v0,a1,12
8001a5a4:	1043000b 	beq	v0,v1,8001a5d4 <wait_queue_del+0x3c>
8001a5a8:	afbf0014 	sw	ra,20(sp)
8001a5ac:	8ca60008 	lw	a2,8(a1)
8001a5b0:	14c40008 	bne	a2,a0,8001a5d4 <wait_queue_del+0x3c>
8001a5b4:	8fbf0014 	lw	ra,20(sp)
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
8001a5b8:	8ca4000c 	lw	a0,12(a1)
wait_queue_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:34
	list_del_init(&(wait->wait_link));
}
8001a5bc:	27bd0018 	addiu	sp,sp,24
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
8001a5c0:	ac830004 	sw	v1,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:170
	next->prev = prev;
8001a5c4:	ac640000 	sw	a0,0(v1)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
 * list_init - initialize a new entry
 * @elm:        new entry to be initialized
 * */
static inline void list_init(list_entry_t * elm)
{
	elm->prev = elm->next = elm;
8001a5c8:	aca20010 	sw	v0,16(a1)
wait_queue_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:34
8001a5cc:	03e00008 	jr	ra
8001a5d0:	aca2000c 	sw	v0,12(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:32
	list_add_before(&(queue->wait_head), &(wait->wait_link));
}

void wait_queue_del(wait_queue_t * queue, wait_t * wait)
{
	assert(!list_empty(&(wait->wait_link)) && wait->wait_queue == queue);
8001a5d4:	3c048002 	lui	a0,0x8002
8001a5d8:	3c068002 	lui	a2,0x8002
8001a5dc:	3c078002 	lui	a3,0x8002
8001a5e0:	24843cb4 	addiu	a0,a0,15540
8001a5e4:	24050020 	li	a1,32
8001a5e8:	24c60e28 	addiu	a2,a2,3624
8001a5ec:	0c006b0b 	jal	8001ac2c <__panic>
8001a5f0:	24e73cf4 	addiu	a3,a3,15604

8001a5f4 <wait_queue_next>:
list_empty():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:126
 * list_empty - tests whether a list is empty
 * @list:       the list to test.
 * */
static inline bool list_empty(list_entry_t * list)
{
	return list->next == list;
8001a5f4:	8ca30010 	lw	v1,16(a1)
wait_queue_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:37
	list_del_init(&(wait->wait_link));
}

wait_t *wait_queue_next(wait_queue_t * queue, wait_t * wait)
{
8001a5f8:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:38
	assert(!list_empty(&(wait->wait_link)) && wait->wait_queue == queue);
8001a5fc:	24a2000c 	addiu	v0,a1,12
8001a600:	10620009 	beq	v1,v0,8001a628 <wait_queue_next+0x34>
8001a604:	afbf0014 	sw	ra,20(sp)
8001a608:	8ca50008 	lw	a1,8(a1)
8001a60c:	14a40006 	bne	a1,a0,8001a628 <wait_queue_next+0x34>
8001a610:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:41
	list_entry_t *le = list_next(&(wait->wait_link));
	if (le != &(queue->wait_head)) {
		return le2wait(le, wait_link);
8001a614:	2462fff4 	addiu	v0,v1,-12
8001a618:	00a31826 	xor	v1,a1,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:44
	}
	return NULL;
}
8001a61c:	0003100a 	movz	v0,zero,v1
8001a620:	03e00008 	jr	ra
8001a624:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:38
	list_del_init(&(wait->wait_link));
}

wait_t *wait_queue_next(wait_queue_t * queue, wait_t * wait)
{
	assert(!list_empty(&(wait->wait_link)) && wait->wait_queue == queue);
8001a628:	3c048002 	lui	a0,0x8002
8001a62c:	3c068002 	lui	a2,0x8002
8001a630:	3c078002 	lui	a3,0x8002
8001a634:	24843cb4 	addiu	a0,a0,15540
8001a638:	24050026 	li	a1,38
8001a63c:	24c60e28 	addiu	a2,a2,3624
8001a640:	0c006b0b 	jal	8001ac2c <__panic>
8001a644:	24e73cf4 	addiu	a3,a3,15604

8001a648 <wait_queue_prev>:
wait_queue_prev():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:48
	return NULL;
}

wait_t *wait_queue_prev(wait_queue_t * queue, wait_t * wait)
{
	assert(!list_empty(&(wait->wait_link)) && wait->wait_queue == queue);
8001a648:	8ca30010 	lw	v1,16(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:47
	}
	return NULL;
}

wait_t *wait_queue_prev(wait_queue_t * queue, wait_t * wait)
{
8001a64c:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:48
	assert(!list_empty(&(wait->wait_link)) && wait->wait_queue == queue);
8001a650:	24a2000c 	addiu	v0,a1,12
8001a654:	1062000a 	beq	v1,v0,8001a680 <wait_queue_prev+0x38>
8001a658:	afbf0014 	sw	ra,20(sp)
8001a65c:	8ca60008 	lw	a2,8(a1)
8001a660:	14c40007 	bne	a2,a0,8001a680 <wait_queue_prev+0x38>
8001a664:	8fbf0014 	lw	ra,20(sp)
list_prev():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:144
 * list_prev - get the previous entry
 * @listelm:    the list head
 **/
static list_entry_t *list_prev(list_entry_t * listelm)
{
	return listelm->prev;
8001a668:	8ca3000c 	lw	v1,12(a1)
wait_queue_prev():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:54
	list_entry_t *le = list_prev(&(wait->wait_link));
	if (le != &(queue->wait_head)) {
		return le2wait(le, wait_link);
	}
	return NULL;
}
8001a66c:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:51
wait_t *wait_queue_prev(wait_queue_t * queue, wait_t * wait)
{
	assert(!list_empty(&(wait->wait_link)) && wait->wait_queue == queue);
	list_entry_t *le = list_prev(&(wait->wait_link));
	if (le != &(queue->wait_head)) {
		return le2wait(le, wait_link);
8001a670:	2462fff4 	addiu	v0,v1,-12
8001a674:	00c31826 	xor	v1,a2,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:54
	}
	return NULL;
}
8001a678:	03e00008 	jr	ra
8001a67c:	0003100a 	movz	v0,zero,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:48
	return NULL;
}

wait_t *wait_queue_prev(wait_queue_t * queue, wait_t * wait)
{
	assert(!list_empty(&(wait->wait_link)) && wait->wait_queue == queue);
8001a680:	3c048002 	lui	a0,0x8002
8001a684:	3c068002 	lui	a2,0x8002
8001a688:	3c078002 	lui	a3,0x8002
8001a68c:	24843cb4 	addiu	a0,a0,15540
8001a690:	24050030 	li	a1,48
8001a694:	24c60e28 	addiu	a2,a2,3624
8001a698:	0c006b0b 	jal	8001ac2c <__panic>
8001a69c:	24e73cf4 	addiu	a3,a3,15604

8001a6a0 <wait_queue_first>:
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
8001a6a0:	8c830004 	lw	v1,4(a0)
wait_queue_first():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:60

wait_t *wait_queue_first(wait_queue_t * queue)
{
	list_entry_t *le = list_next(&(queue->wait_head));
	if (le != &(queue->wait_head)) {
		return le2wait(le, wait_link);
8001a6a4:	2462fff4 	addiu	v0,v1,-12
8001a6a8:	00831826 	xor	v1,a0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:63
	}
	return NULL;
}
8001a6ac:	03e00008 	jr	ra
8001a6b0:	0003100a 	movz	v0,zero,v1

8001a6b4 <wait_queue_last>:
list_prev():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:144
 * list_prev - get the previous entry
 * @listelm:    the list head
 **/
static list_entry_t *list_prev(list_entry_t * listelm)
{
	return listelm->prev;
8001a6b4:	8c830000 	lw	v1,0(a0)
wait_queue_last():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:69

wait_t *wait_queue_last(wait_queue_t * queue)
{
	list_entry_t *le = list_prev(&(queue->wait_head));
	if (le != &(queue->wait_head)) {
		return le2wait(le, wait_link);
8001a6b8:	2462fff4 	addiu	v0,v1,-12
8001a6bc:	00831826 	xor	v1,a0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:72
	}
	return NULL;
}
8001a6c0:	03e00008 	jr	ra
8001a6c4:	0003100a 	movz	v0,zero,v1

8001a6c8 <wait_queue_empty>:
list_empty():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:126
 * list_empty - tests whether a list is empty
 * @list:       the list to test.
 * */
static inline bool list_empty(list_entry_t * list)
{
	return list->next == list;
8001a6c8:	8c820004 	lw	v0,4(a0)
8001a6cc:	00441026 	xor	v0,v0,a0
wait_queue_empty():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:77

bool wait_queue_empty(wait_queue_t * queue)
{
	return list_empty(&(queue->wait_head));
}
8001a6d0:	03e00008 	jr	ra
8001a6d4:	2c420001 	sltiu	v0,v0,1

8001a6d8 <wait_in_queue>:
wait_in_queue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:81

bool wait_in_queue(wait_t * wait)
{
	return !list_empty(&(wait->wait_link));
8001a6d8:	8c820010 	lw	v0,16(a0)
8001a6dc:	2484000c 	addiu	a0,a0,12
8001a6e0:	00441026 	xor	v0,v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:82
}
8001a6e4:	03e00008 	jr	ra
8001a6e8:	0002102b 	sltu	v0,zero,v0

8001a6ec <wakeup_wait>:
wakeup_wait():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:87

void
wakeup_wait(wait_queue_t * queue, wait_t * wait, uint32_t wakeup_flags,
	    bool del)
{
8001a6ec:	27bdffe0 	addiu	sp,sp,-32
8001a6f0:	afb00018 	sw	s0,24(sp)
8001a6f4:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:88
	if (del) {
8001a6f8:	10e00004 	beqz	a3,8001a70c <wakeup_wait+0x20>
8001a6fc:	00a08021 	move	s0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:89
		wait_queue_del(queue, wait);
8001a700:	0c006966 	jal	8001a598 <wait_queue_del>
8001a704:	afa60010 	sw	a2,16(sp)
8001a708:	8fa60010 	lw	a2,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:92
	}
	wait->wakeup_flags = wakeup_flags;
	wakeup_proc(wait->proc);
8001a70c:	8e040000 	lw	a0,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:91
	    bool del)
{
	if (del) {
		wait_queue_del(queue, wait);
	}
	wait->wakeup_flags = wakeup_flags;
8001a710:	ae060004 	sw	a2,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:93
	wakeup_proc(wait->proc);
}
8001a714:	8fbf001c 	lw	ra,28(sp)
8001a718:	8fb00018 	lw	s0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:92
{
	if (del) {
		wait_queue_del(queue, wait);
	}
	wait->wakeup_flags = wakeup_flags;
	wakeup_proc(wait->proc);
8001a71c:	080004f8 	j	800013e0 <wakeup_proc>
8001a720:	27bd0020 	addiu	sp,sp,32

8001a724 <wakeup_first>:
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
8001a724:	8c830004 	lw	v1,4(a0)
wakeup_first():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:96
}

void wakeup_first(wait_queue_t * queue, uint32_t wakeup_flags, bool del)
{
8001a728:	00a04021 	move	t0,a1
wait_queue_first():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:59
}

wait_t *wait_queue_first(wait_queue_t * queue)
{
	list_entry_t *le = list_next(&(queue->wait_head));
	if (le != &(queue->wait_head)) {
8001a72c:	10640006 	beq	v1,a0,8001a748 <wakeup_first+0x24>
8001a730:	00c03821 	move	a3,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:60
		return le2wait(le, wait_link);
8001a734:	2465fff4 	addiu	a1,v1,-12
wakeup_first():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:98
}

void wakeup_first(wait_queue_t * queue, uint32_t wakeup_flags, bool del)
{
	wait_t *wait;
	if ((wait = wait_queue_first(queue)) != NULL) {
8001a738:	10a00003 	beqz	a1,8001a748 <wakeup_first+0x24>
8001a73c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:99
		wakeup_wait(queue, wait, wakeup_flags, del);
8001a740:	080069bb 	j	8001a6ec <wakeup_wait>
8001a744:	01003021 	move	a2,t0
8001a748:	03e00008 	jr	ra
8001a74c:	00000000 	nop

8001a750 <wakeup_queue>:
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
8001a750:	8c820004 	lw	v0,4(a0)
wakeup_queue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:104
	}
}

void wakeup_queue(wait_queue_t * queue, uint32_t wakeup_flags, bool del)
{
8001a754:	27bdffd8 	addiu	sp,sp,-40
8001a758:	afb10020 	sw	s1,32(sp)
8001a75c:	afb0001c 	sw	s0,28(sp)
8001a760:	afbf0024 	sw	ra,36(sp)
8001a764:	00808021 	move	s0,a0
wait_queue_first():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:59
}

wait_t *wait_queue_first(wait_queue_t * queue)
{
	list_entry_t *le = list_next(&(queue->wait_head));
	if (le != &(queue->wait_head)) {
8001a768:	10440011 	beq	v0,a0,8001a7b0 <wakeup_queue+0x60>
8001a76c:	00a08821 	move	s1,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:60
		return le2wait(le, wait_link);
8001a770:	2442fff4 	addiu	v0,v0,-12
wakeup_queue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:106
}

void wakeup_queue(wait_queue_t * queue, uint32_t wakeup_flags, bool del)
{
	wait_t *wait;
	if ((wait = wait_queue_first(queue)) != NULL) {
8001a774:	1040000f 	beqz	v0,8001a7b4 <wakeup_queue+0x64>
8001a778:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:107
		if (del) {
8001a77c:	14c00014 	bnez	a2,8001a7d0 <wakeup_queue+0x80>
8001a780:	00402821 	move	a1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:113
			do {
				wakeup_wait(queue, wait, wakeup_flags, 1);
			} while ((wait = wait_queue_first(queue)) != NULL);
		} else {
			do {
				wakeup_wait(queue, wait, wakeup_flags, 0);
8001a784:	02002021 	move	a0,s0
8001a788:	02203021 	move	a2,s1
8001a78c:	00003821 	move	a3,zero
8001a790:	0c0069bb 	jal	8001a6ec <wakeup_wait>
8001a794:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:114
			} while ((wait = wait_queue_next(queue, wait)) != NULL);
8001a798:	8fa20010 	lw	v0,16(sp)
8001a79c:	02002021 	move	a0,s0
8001a7a0:	0c00697d 	jal	8001a5f4 <wait_queue_next>
8001a7a4:	00402821 	move	a1,v0
8001a7a8:	5440fff6 	bnezl	v0,8001a784 <wakeup_queue+0x34>
8001a7ac:	00402821 	move	a1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:117
		}
	}
}
8001a7b0:	8fbf0024 	lw	ra,36(sp)
8001a7b4:	8fb10020 	lw	s1,32(sp)
8001a7b8:	8fb0001c 	lw	s0,28(sp)
8001a7bc:	03e00008 	jr	ra
8001a7c0:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:110
	wait_t *wait;
	if ((wait = wait_queue_first(queue)) != NULL) {
		if (del) {
			do {
				wakeup_wait(queue, wait, wakeup_flags, 1);
			} while ((wait = wait_queue_first(queue)) != NULL);
8001a7c4:	1040fffb 	beqz	v0,8001a7b4 <wakeup_queue+0x64>
8001a7c8:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:109
{
	wait_t *wait;
	if ((wait = wait_queue_first(queue)) != NULL) {
		if (del) {
			do {
				wakeup_wait(queue, wait, wakeup_flags, 1);
8001a7cc:	00402821 	move	a1,v0
8001a7d0:	02002021 	move	a0,s0
8001a7d4:	02203021 	move	a2,s1
8001a7d8:	0c0069bb 	jal	8001a6ec <wakeup_wait>
8001a7dc:	24070001 	li	a3,1
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
8001a7e0:	8e030004 	lw	v1,4(s0)
wait_queue_first():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:59
}

wait_t *wait_queue_first(wait_queue_t * queue)
{
	list_entry_t *le = list_next(&(queue->wait_head));
	if (le != &(queue->wait_head)) {
8001a7e4:	1603fff7 	bne	s0,v1,8001a7c4 <wakeup_queue+0x74>
8001a7e8:	2462fff4 	addiu	v0,v1,-12
wakeup_queue():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:117
			do {
				wakeup_wait(queue, wait, wakeup_flags, 0);
			} while ((wait = wait_queue_next(queue, wait)) != NULL);
		}
	}
}
8001a7ec:	8fbf0024 	lw	ra,36(sp)
8001a7f0:	8fb10020 	lw	s1,32(sp)
8001a7f4:	8fb0001c 	lw	s0,28(sp)
8001a7f8:	03e00008 	jr	ra
8001a7fc:	27bd0028 	addiu	sp,sp,40

8001a800 <wait_current_set>:
wait_current_set():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:121

void wait_current_set(wait_queue_t * queue, wait_t * wait, uint32_t wait_state)
{
	assert(current != NULL);
8001a800:	3c028015 	lui	v0,0x8015
8001a804:	8c4377a4 	lw	v1,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:120
		}
	}
}

void wait_current_set(wait_queue_t * queue, wait_t * wait, uint32_t wait_state)
{
8001a808:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:121
	assert(current != NULL);
8001a80c:	1060000d 	beqz	v1,8001a844 <wait_current_set+0x44>
8001a810:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:126
	wait_init(wait, current);
	current->state = PROC_SLEEPING;
	current->wait_state = wait_state;
	wait_queue_add(queue, wait);
}
8001a814:	8fbf0014 	lw	ra,20(sp)
wait_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:15

void wait_init(wait_t * wait, struct proc_struct *proc)
{
	wait->proc = proc;
	wait->wakeup_flags = WT_INTERRUPTED;
	list_init(&(wait->wait_link));
8001a818:	24a7000c 	addiu	a3,a1,12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:14
#define current (pls_read(current))

void wait_init(wait_t * wait, struct proc_struct *proc)
{
	wait->proc = proc;
	wait->wakeup_flags = WT_INTERRUPTED;
8001a81c:	3c088000 	lui	t0,0x8000
wait_current_set():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:123

void wait_current_set(wait_queue_t * queue, wait_t * wait, uint32_t wait_state)
{
	assert(current != NULL);
	wait_init(wait, current);
	current->state = PROC_SLEEPING;
8001a820:	24020001 	li	v0,1
wait_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:13

#define current (pls_read(current))

void wait_init(wait_t * wait, struct proc_struct *proc)
{
	wait->proc = proc;
8001a824:	aca30000 	sw	v1,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:14
	wait->wakeup_flags = WT_INTERRUPTED;
8001a828:	aca80004 	sw	t0,4(a1)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
 * list_init - initialize a new entry
 * @elm:        new entry to be initialized
 * */
static inline void list_init(list_entry_t * elm)
{
	elm->prev = elm->next = elm;
8001a82c:	aca70010 	sw	a3,16(a1)
8001a830:	aca7000c 	sw	a3,12(a1)
wait_current_set():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:126
	assert(current != NULL);
	wait_init(wait, current);
	current->state = PROC_SLEEPING;
	current->wait_state = wait_state;
	wait_queue_add(queue, wait);
}
8001a834:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:123

void wait_current_set(wait_queue_t * queue, wait_t * wait, uint32_t wait_state)
{
	assert(current != NULL);
	wait_init(wait, current);
	current->state = PROC_SLEEPING;
8001a838:	ac620000 	sw	v0,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:125
	current->wait_state = wait_state;
	wait_queue_add(queue, wait);
8001a83c:	0800694e 	j	8001a538 <wait_queue_add>
8001a840:	ac660084 	sw	a2,132(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/sync/wait.c:121
	}
}

void wait_current_set(wait_queue_t * queue, wait_t * wait, uint32_t wait_state)
{
	assert(current != NULL);
8001a844:	3c048002 	lui	a0,0x8002
8001a848:	3c068002 	lui	a2,0x8002
8001a84c:	3c078002 	lui	a3,0x8002
8001a850:	24843cb4 	addiu	a0,a0,15540
8001a854:	24050079 	li	a1,121
8001a858:	24c60e28 	addiu	a2,a2,3624
8001a85c:	0c006b0b 	jal	8001ac2c <__panic>
8001a860:	24e73338 	addiu	a3,a3,13112

8001a864 <print_kerninfo>:
print_kerninfo():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:20
 * address of free memory and how many memory that kernel has used.
 * */
void print_kerninfo(void)
{
	extern char etext[], edata[], end[], kern_init[];
	kprintf("Special kernel symbols:\n");
8001a864:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:18
 * print_kerninfo - print the information about kernel, including the location
 * of kernel entry, the start addresses of data and text segements, the start
 * address of free memory and how many memory that kernel has used.
 * */
void print_kerninfo(void)
{
8001a868:	27bdffe0 	addiu	sp,sp,-32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:20
	extern char etext[], edata[], end[], kern_init[];
	kprintf("Special kernel symbols:\n");
8001a86c:	24843d34 	addiu	a0,a0,15668
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:18
 * print_kerninfo - print the information about kernel, including the location
 * of kernel entry, the start addresses of data and text segements, the start
 * address of free memory and how many memory that kernel has used.
 * */
void print_kerninfo(void)
{
8001a870:	afbf001c 	sw	ra,28(sp)
8001a874:	afb20018 	sw	s2,24(sp)
8001a878:	afb10014 	sw	s1,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:20
	extern char etext[], edata[], end[], kern_init[];
	kprintf("Special kernel symbols:\n");
8001a87c:	0c007a9e 	jal	8001ea78 <kprintf>
8001a880:	afb00010 	sw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:21
	kprintf("  entry  0x");
8001a884:	3c048002 	lui	a0,0x8002
8001a888:	0c007a9e 	jal	8001ea78 <kprintf>
8001a88c:	24843d50 	addiu	a0,a0,15696
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:22
	printhex((unsigned int)kern_init);
8001a890:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:23
	kprintf(" (phys)\n");
8001a894:	3c108002 	lui	s0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:22
void print_kerninfo(void)
{
	extern char etext[], edata[], end[], kern_init[];
	kprintf("Special kernel symbols:\n");
	kprintf("  entry  0x");
	printhex((unsigned int)kern_init);
8001a898:	0c007aaa 	jal	8001eaa8 <printhex>
8001a89c:	2484bb90 	addiu	a0,a0,-17520
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:23
	kprintf(" (phys)\n");
8001a8a0:	0c007a9e 	jal	8001ea78 <kprintf>
8001a8a4:	26043d5c 	addiu	a0,s0,15708
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:24
	kprintf("  etext\t0x");
8001a8a8:	3c048002 	lui	a0,0x8002
8001a8ac:	24843d68 	addiu	a0,a0,15720
8001a8b0:	0c007a9e 	jal	8001ea78 <kprintf>
8001a8b4:	3c118002 	lui	s1,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:25
	printhex((unsigned int)etext);
8001a8b8:	0c007aaa 	jal	8001eaa8 <printhex>
8001a8bc:	26245400 	addiu	a0,s1,21504
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:26
	kprintf(" (phys)\n");
8001a8c0:	0c007a9e 	jal	8001ea78 <kprintf>
8001a8c4:	26043d5c 	addiu	a0,s0,15708
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:27
	kprintf("  edata\t0x");
8001a8c8:	3c048002 	lui	a0,0x8002
8001a8cc:	0c007a9e 	jal	8001ea78 <kprintf>
8001a8d0:	24843d74 	addiu	a0,a0,15732
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:28
	printhex((unsigned int)edata);
8001a8d4:	3c048015 	lui	a0,0x8015
8001a8d8:	0c007aaa 	jal	8001eaa8 <printhex>
8001a8dc:	24843450 	addiu	a0,a0,13392
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:29
	kprintf(" (phys)\n");
8001a8e0:	0c007a9e 	jal	8001ea78 <kprintf>
8001a8e4:	26043d5c 	addiu	a0,s0,15708
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:30
	kprintf("  end\t0x");
8001a8e8:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:31
	printhex((unsigned int)end);
8001a8ec:	3c128015 	lui	s2,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:30
	printhex((unsigned int)etext);
	kprintf(" (phys)\n");
	kprintf("  edata\t0x");
	printhex((unsigned int)edata);
	kprintf(" (phys)\n");
	kprintf("  end\t0x");
8001a8f0:	0c007a9e 	jal	8001ea78 <kprintf>
8001a8f4:	24843d80 	addiu	a0,a0,15744
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:31
	printhex((unsigned int)end);
8001a8f8:	0c007aaa 	jal	8001eaa8 <printhex>
8001a8fc:	264477c0 	addiu	a0,s2,30656
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:32
	kprintf(" (phys)\n");
8001a900:	0c007a9e 	jal	8001ea78 <kprintf>
8001a904:	26043d5c 	addiu	a0,s0,15708
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:33
	kprintf("Kernel executable memory footprint: ");
8001a908:	3c048002 	lui	a0,0x8002
8001a90c:	0c007a9e 	jal	8001ea78 <kprintf>
8001a910:	24843d8c 	addiu	a0,a0,15756
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:34
	printbase10((end - etext + 1023) >> 10);
8001a914:	264477c0 	addiu	a0,s2,30656
8001a918:	26315400 	addiu	s1,s1,21504
8001a91c:	248403ff 	addiu	a0,a0,1023
8001a920:	00912023 	subu	a0,a0,s1
8001a924:	0c007abd 	jal	8001eaf4 <printbase10>
8001a928:	00042283 	sra	a0,a0,0xa
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:36
	kprintf("KB\n");
}
8001a92c:	8fbf001c 	lw	ra,28(sp)
8001a930:	8fb20018 	lw	s2,24(sp)
8001a934:	8fb10014 	lw	s1,20(sp)
8001a938:	8fb00010 	lw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:35
	kprintf("  end\t0x");
	printhex((unsigned int)end);
	kprintf(" (phys)\n");
	kprintf("Kernel executable memory footprint: ");
	printbase10((end - etext + 1023) >> 10);
	kprintf("KB\n");
8001a93c:	3c048002 	lui	a0,0x8002
8001a940:	24843db4 	addiu	a0,a0,15796
8001a944:	08007a9e 	j	8001ea78 <kprintf>
8001a948:	27bd0020 	addiu	sp,sp,32

8001a94c <print_debuginfo>:
print_debuginfo():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:44
 * print_debuginfo - read and print the stat information for the address @eip,
 * and info.eip_fn_addr should be the first address of the related function.
 * */
void print_debuginfo(uintptr_t eip)
{
	panic("Unimpl");
8001a94c:	3c048002 	lui	a0,0x8002
8001a950:	3c068002 	lui	a2,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:43
/* *
 * print_debuginfo - read and print the stat information for the address @eip,
 * and info.eip_fn_addr should be the first address of the related function.
 * */
void print_debuginfo(uintptr_t eip)
{
8001a954:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:44
	panic("Unimpl");
8001a958:	24843db8 	addiu	a0,a0,15800
8001a95c:	2405002c 	li	a1,44
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:43
/* *
 * print_debuginfo - read and print the stat information for the address @eip,
 * and info.eip_fn_addr should be the first address of the related function.
 * */
void print_debuginfo(uintptr_t eip)
{
8001a960:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:44
	panic("Unimpl");
8001a964:	0c006b0b 	jal	8001ac2c <__panic>
8001a968:	24c63dc4 	addiu	a2,a2,15812

8001a96c <print_stackframe>:
print_stackframe():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:84
 * Note that, the length of ebp-chain is limited. In boot/bootasm.S, before jumping
 * to the kernel entry, the value of ebp has been set to zero, that's the boundary.
 * */
void print_stackframe(void)
{
	panic("Unimpl");
8001a96c:	3c048002 	lui	a0,0x8002
8001a970:	3c068002 	lui	a2,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:83
 *
 * Note that, the length of ebp-chain is limited. In boot/bootasm.S, before jumping
 * to the kernel entry, the value of ebp has been set to zero, that's the boundary.
 * */
void print_stackframe(void)
{
8001a974:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:84
	panic("Unimpl");
8001a978:	24843db8 	addiu	a0,a0,15800
8001a97c:	24050054 	li	a1,84
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:83
 *
 * Note that, the length of ebp-chain is limited. In boot/bootasm.S, before jumping
 * to the kernel entry, the value of ebp has been set to zero, that's the boundary.
 * */
void print_stackframe(void)
{
8001a980:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/kdebug.c:84
	panic("Unimpl");
8001a984:	0c006b0b 	jal	8001ac2c <__panic>
8001a988:	24c63dc4 	addiu	a2,a2,15812

8001a98c <mon_kerninfo>:
mon_kerninfo():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:121
/* *
 * mon_kerninfo - call print_kerninfo in kern/debug/kdebug.c to
 * print the memory occupancy in kernel.
 * */
int mon_kerninfo(int argc, char **argv, struct trapframe *tf)
{
8001a98c:	27bdffe8 	addiu	sp,sp,-24
8001a990:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:122
	print_kerninfo();
8001a994:	0c006a19 	jal	8001a864 <print_kerninfo>
8001a998:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:124
	return 0;
}
8001a99c:	8fbf0014 	lw	ra,20(sp)
8001a9a0:	00001021 	move	v0,zero
8001a9a4:	03e00008 	jr	ra
8001a9a8:	27bd0018 	addiu	sp,sp,24

8001a9ac <mon_help>:
mon_help():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:105
	}
}

/* mon_help - print the information about mon_* functions */
int mon_help(int argc, char **argv, struct trapframe *tf)
{
8001a9ac:	27bdffe0 	addiu	sp,sp,-32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:108
	int i;
	for (i = 0; i < NCOMMANDS; i++) {
		kprintf(commands[i].name);
8001a9b0:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:105
	}
}

/* mon_help - print the information about mon_* functions */
int mon_help(int argc, char **argv, struct trapframe *tf)
{
8001a9b4:	afb10018 	sw	s1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:108
	int i;
	for (i = 0; i < NCOMMANDS; i++) {
		kprintf(commands[i].name);
8001a9b8:	24843dcc 	addiu	a0,a0,15820
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:109
		kprintf(" - ");
8001a9bc:	3c118002 	lui	s1,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:105
	}
}

/* mon_help - print the information about mon_* functions */
int mon_help(int argc, char **argv, struct trapframe *tf)
{
8001a9c0:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:108
	int i;
	for (i = 0; i < NCOMMANDS; i++) {
		kprintf(commands[i].name);
8001a9c4:	0c007a9e 	jal	8001ea78 <kprintf>
8001a9c8:	afb00014 	sw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:109
		kprintf(" - ");
8001a9cc:	0c007a9e 	jal	8001ea78 <kprintf>
8001a9d0:	26243dd4 	addiu	a0,s1,15828
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:110
		kprintf(commands[i].desc);
8001a9d4:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:111
		kprintf("\n");
8001a9d8:	3c108002 	lui	s0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:110
{
	int i;
	for (i = 0; i < NCOMMANDS; i++) {
		kprintf(commands[i].name);
		kprintf(" - ");
		kprintf(commands[i].desc);
8001a9dc:	0c007a9e 	jal	8001ea78 <kprintf>
8001a9e0:	24843dd8 	addiu	a0,a0,15832
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:111
		kprintf("\n");
8001a9e4:	0c007a9e 	jal	8001ea78 <kprintf>
8001a9e8:	26043f2c 	addiu	a0,s0,16172
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:108
/* mon_help - print the information about mon_* functions */
int mon_help(int argc, char **argv, struct trapframe *tf)
{
	int i;
	for (i = 0; i < NCOMMANDS; i++) {
		kprintf(commands[i].name);
8001a9ec:	3c048002 	lui	a0,0x8002
8001a9f0:	0c007a9e 	jal	8001ea78 <kprintf>
8001a9f4:	24843df8 	addiu	a0,a0,15864
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:109
		kprintf(" - ");
8001a9f8:	0c007a9e 	jal	8001ea78 <kprintf>
8001a9fc:	26243dd4 	addiu	a0,s1,15828
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:110
		kprintf(commands[i].desc);
8001aa00:	3c048002 	lui	a0,0x8002
8001aa04:	0c007a9e 	jal	8001ea78 <kprintf>
8001aa08:	24843e04 	addiu	a0,a0,15876
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:111
		kprintf("\n");
8001aa0c:	0c007a9e 	jal	8001ea78 <kprintf>
8001aa10:	26043f2c 	addiu	a0,s0,16172
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:114
	}
	return 0;
}
8001aa14:	8fbf001c 	lw	ra,28(sp)
8001aa18:	00001021 	move	v0,zero
8001aa1c:	8fb10018 	lw	s1,24(sp)
8001aa20:	8fb00014 	lw	s0,20(sp)
8001aa24:	03e00008 	jr	ra
8001aa28:	27bd0020 	addiu	sp,sp,32

8001aa2c <monitor>:
monitor():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:85
}

/***** Implementations of basic kernel monitor commands *****/

void monitor(struct trapframe *tf)
{
8001aa2c:	27bdff78 	addiu	sp,sp,-136
8001aa30:	afb7007c 	sw	s7,124(sp)
8001aa34:	0080b821 	move	s7,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:86
	kprintf("Welcome to the kernel debug monitor!!\n");
8001aa38:	3c048002 	lui	a0,0x8002
8001aa3c:	24843e2c 	addiu	a0,a0,15916
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:85
}

/***** Implementations of basic kernel monitor commands *****/

void monitor(struct trapframe *tf)
{
8001aa40:	afbf0084 	sw	ra,132(sp)
8001aa44:	afbe0080 	sw	s8,128(sp)
8001aa48:	afb60078 	sw	s6,120(sp)
8001aa4c:	afb50074 	sw	s5,116(sp)
8001aa50:	afb40070 	sw	s4,112(sp)
8001aa54:	afb3006c 	sw	s3,108(sp)
8001aa58:	afb20068 	sw	s2,104(sp)
8001aa5c:	afb10064 	sw	s1,100(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:86
	kprintf("Welcome to the kernel debug monitor!!\n");
8001aa60:	0c007a9e 	jal	8001ea78 <kprintf>
8001aa64:	afb00060 	sw	s0,96(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:87
	kprintf("Type 'help' for a list of commands.\n");
8001aa68:	3c048002 	lui	a0,0x8002
8001aa6c:	0c007a9e 	jal	8001ea78 <kprintf>
8001aa70:	24843e54 	addiu	a0,a0,15956
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:89

	if (tf != NULL) {
8001aa74:	12e00004 	beqz	s7,8001aa88 <monitor+0x5c>
8001aa78:	3c028002 	lui	v0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:90
		print_trapframe(tf);
8001aa7c:	0c007cb4 	jal	8001f2d0 <print_trapframe>
8001aa80:	02e02021 	move	a0,s7
8001aa84:	3c028002 	lui	v0,0x8002
8001aa88:	244201e4 	addiu	v0,v0,484
parse():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:41
static int parse(char *buf, char **argv)
{
	int argc = 0;
	while (1) {
		// find global whitespace
		while (*buf != '\0' && strchr(WHITESPACE, *buf) != NULL) {
8001aa8c:	3c108002 	lui	s0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:49
		if (*buf == '\0') {
			break;
		}
		// save and scan past next arg
		if (argc == MAXARGS - 1) {
			kprintf("Too many arguments.\n");
8001aa90:	3c128002 	lui	s2,0x8002
runcmd():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:76
	for (i = 0; i < NCOMMANDS; i++) {
		if (!strcmp(commands[i].name, argv[0])) {
			return commands[i].func(argc - 1, argv + 1, tf);
		}
	}
	kprintf("Unknown command '");
8001aa94:	3c168002 	lui	s6,0x8002
8001aa98:	3c118002 	lui	s1,0x8002
8001aa9c:	3c138002 	lui	s3,0x8002
8001aaa0:	afa20054 	sw	v0,84(sp)
8001aaa4:	27be0014 	addiu	s8,sp,20
parse():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:41
static int parse(char *buf, char **argv)
{
	int argc = 0;
	while (1) {
		// find global whitespace
		while (*buf != '\0' && strchr(WHITESPACE, *buf) != NULL) {
8001aaa8:	26103e80 	addiu	s0,s0,16000
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:49
		if (*buf == '\0') {
			break;
		}
		// save and scan past next arg
		if (argc == MAXARGS - 1) {
			kprintf("Too many arguments.\n");
8001aaac:	26523e88 	addiu	s2,s2,16008
runcmd():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:72
	if (!argc) {
		return 0;
	}
	int i;
	for (i = 0; i < NCOMMANDS; i++) {
		if (!strcmp(commands[i].name, argv[0])) {
8001aab0:	3c148002 	lui	s4,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:76
			return commands[i].func(argc - 1, argv + 1, tf);
		}
	}
	kprintf("Unknown command '");
8001aab4:	26d63ea0 	addiu	s6,s6,16032
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:78
	kprintf(argv[0]);
	kprintf("'\n");
8001aab8:	3c158002 	lui	s5,0x8002
monitor():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:95
		print_trapframe(tf);
	}

	char *buf;
	while (1) {
		if ((buf = readline("K> ")) != NULL) {
8001aabc:	0c0058cb 	jal	8001632c <readline>
8001aac0:	26243e7c 	addiu	a0,s1,15996
8001aac4:	1040fffd 	beqz	v0,8001aabc <monitor+0x90>
8001aac8:	00401821 	move	v1,v0
8001aacc:	90450000 	lbu	a1,0(v0)
8001aad0:	afa00050 	sw	zero,80(sp)
parse():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:41
static int parse(char *buf, char **argv)
{
	int argc = 0;
	while (1) {
		// find global whitespace
		while (*buf != '\0' && strchr(WHITESPACE, *buf) != NULL) {
8001aad4:	14a00015 	bnez	a1,8001ab2c <monitor+0x100>
8001aad8:	02002021 	move	a0,s0
runcmd():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:67
 * */
static int runcmd(char *buf, struct trapframe *tf)
{
	char *argv[MAXARGS];
	int argc = parse(buf, argv);
	if (!argc) {
8001aadc:	8fa30050 	lw	v1,80(sp)
8001aae0:	1060fff6 	beqz	v1,8001aabc <monitor+0x90>
8001aae4:	8fa50010 	lw	a1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:72
		return 0;
	}
	int i;
	for (i = 0; i < NCOMMANDS; i++) {
		if (!strcmp(commands[i].name, argv[0])) {
8001aae8:	0c005bb8 	jal	80016ee0 <strcmp>
8001aaec:	26643dcc 	addiu	a0,s3,15820
8001aaf0:	10400036 	beqz	v0,8001abcc <monitor+0x1a0>
8001aaf4:	00001821 	move	v1,zero
8001aaf8:	8fa50010 	lw	a1,16(sp)
8001aafc:	0c005bb8 	jal	80016ee0 <strcmp>
8001ab00:	26843df8 	addiu	a0,s4,15864
8001ab04:	10400031 	beqz	v0,8001abcc <monitor+0x1a0>
8001ab08:	24030001 	li	v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:76
			return commands[i].func(argc - 1, argv + 1, tf);
		}
	}
	kprintf("Unknown command '");
8001ab0c:	0c007a9e 	jal	8001ea78 <kprintf>
8001ab10:	02c02021 	move	a0,s6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:77
	kprintf(argv[0]);
8001ab14:	0c007a9e 	jal	8001ea78 <kprintf>
8001ab18:	8fa40010 	lw	a0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:78
	kprintf("'\n");
8001ab1c:	0c007a9e 	jal	8001ea78 <kprintf>
8001ab20:	26a43eb4 	addiu	a0,s5,16052
8001ab24:	08006aaf 	j	8001aabc <monitor+0x90>
8001ab28:	00000000 	nop
parse():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:41
static int parse(char *buf, char **argv)
{
	int argc = 0;
	while (1) {
		// find global whitespace
		while (*buf != '\0' && strchr(WHITESPACE, *buf) != NULL) {
8001ab2c:	0c005bdf 	jal	80016f7c <strchr>
8001ab30:	afa30058 	sw	v1,88(sp)
8001ab34:	10400005 	beqz	v0,8001ab4c <monitor+0x120>
8001ab38:	8fa30058 	lw	v1,88(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:42
			*buf++ = '\0';
8001ab3c:	a0600000 	sb	zero,0(v1)
8001ab40:	90650001 	lbu	a1,1(v1)
8001ab44:	08006ab5 	j	8001aad4 <monitor+0xa8>
8001ab48:	24630001 	addiu	v1,v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:44
		}
		if (*buf == '\0') {
8001ab4c:	90620000 	lbu	v0,0(v1)
8001ab50:	1040ffe2 	beqz	v0,8001aadc <monitor+0xb0>
8001ab54:	8fa40050 	lw	a0,80(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:48
			break;
		}
		// save and scan past next arg
		if (argc == MAXARGS - 1) {
8001ab58:	2402000f 	li	v0,15
8001ab5c:	10820017 	beq	a0,v0,8001abbc <monitor+0x190>
8001ab60:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:51
			kprintf("Too many arguments.\n");
		}
		argv[argc++] = buf;
8001ab64:	8fa40050 	lw	a0,80(sp)
8001ab68:	00041080 	sll	v0,a0,0x2
8001ab6c:	27a40010 	addiu	a0,sp,16
8001ab70:	00821021 	addu	v0,a0,v0
8001ab74:	ac430000 	sw	v1,0(v0)
8001ab78:	8fa20050 	lw	v0,80(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:52
		while (*buf != '\0' && strchr(WHITESPACE, *buf) == NULL) {
8001ab7c:	90650000 	lbu	a1,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:51
		}
		// save and scan past next arg
		if (argc == MAXARGS - 1) {
			kprintf("Too many arguments.\n");
		}
		argv[argc++] = buf;
8001ab80:	24420001 	addiu	v0,v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:52
		while (*buf != '\0' && strchr(WHITESPACE, *buf) == NULL) {
8001ab84:	14a00006 	bnez	a1,8001aba0 <monitor+0x174>
8001ab88:	afa20050 	sw	v0,80(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:67
 * */
static int runcmd(char *buf, struct trapframe *tf)
{
	char *argv[MAXARGS];
	int argc = parse(buf, argv);
	if (!argc) {
8001ab8c:	08006ab8 	j	8001aae0 <monitor+0xb4>
8001ab90:	8fa30050 	lw	v1,80(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:52
		// save and scan past next arg
		if (argc == MAXARGS - 1) {
			kprintf("Too many arguments.\n");
		}
		argv[argc++] = buf;
		while (*buf != '\0' && strchr(WHITESPACE, *buf) == NULL) {
8001ab94:	90650001 	lbu	a1,1(v1)
8001ab98:	10a0ffd0 	beqz	a1,8001aadc <monitor+0xb0>
8001ab9c:	24630001 	addiu	v1,v1,1
8001aba0:	02002021 	move	a0,s0
8001aba4:	0c005bdf 	jal	80016f7c <strchr>
8001aba8:	afa30058 	sw	v1,88(sp)
8001abac:	1040fff9 	beqz	v0,8001ab94 <monitor+0x168>
8001abb0:	8fa30058 	lw	v1,88(sp)
8001abb4:	08006ab5 	j	8001aad4 <monitor+0xa8>
8001abb8:	90650000 	lbu	a1,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:49
		if (*buf == '\0') {
			break;
		}
		// save and scan past next arg
		if (argc == MAXARGS - 1) {
			kprintf("Too many arguments.\n");
8001abbc:	0c007a9e 	jal	8001ea78 <kprintf>
8001abc0:	02402021 	move	a0,s2
8001abc4:	08006ad9 	j	8001ab64 <monitor+0x138>
8001abc8:	8fa30058 	lw	v1,88(sp)
runcmd():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:73
		return 0;
	}
	int i;
	for (i = 0; i < NCOMMANDS; i++) {
		if (!strcmp(commands[i].name, argv[0])) {
			return commands[i].func(argc - 1, argv + 1, tf);
8001abcc:	00031080 	sll	v0,v1,0x2
8001abd0:	00031900 	sll	v1,v1,0x4
8001abd4:	00621023 	subu	v0,v1,v0
8001abd8:	8fa30054 	lw	v1,84(sp)
8001abdc:	03c02821 	move	a1,s8
8001abe0:	02e03021 	move	a2,s7
8001abe4:	00621021 	addu	v0,v1,v0
8001abe8:	8fa30050 	lw	v1,80(sp)
8001abec:	8c420008 	lw	v0,8(v0)
8001abf0:	0040f809 	jalr	v0
8001abf4:	2464ffff 	addiu	a0,v1,-1
monitor():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:96
	}

	char *buf;
	while (1) {
		if ((buf = readline("K> ")) != NULL) {
			if (runcmd(buf, tf) < 0) {
8001abf8:	0441ffb0 	bgez	v0,8001aabc <monitor+0x90>
8001abfc:	8fbf0084 	lw	ra,132(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/monitor.c:101
				break;
			}
		}
	}
}
8001ac00:	8fbe0080 	lw	s8,128(sp)
8001ac04:	8fb7007c 	lw	s7,124(sp)
8001ac08:	8fb60078 	lw	s6,120(sp)
8001ac0c:	8fb50074 	lw	s5,116(sp)
8001ac10:	8fb40070 	lw	s4,112(sp)
8001ac14:	8fb3006c 	lw	s3,108(sp)
8001ac18:	8fb20068 	lw	s2,104(sp)
8001ac1c:	8fb10064 	lw	s1,100(sp)
8001ac20:	8fb00060 	lw	s0,96(sp)
8001ac24:	03e00008 	jr	ra
8001ac28:	27bd0088 	addiu	sp,sp,136

8001ac2c <__panic>:
__panic():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/panic.c:14
 * __panic - __panic is called on unresolvable fatal errors. it prints
 * "panic: 'message'", and then enters the kernel monitor.
 * */
void __panic(const char *file, int line, const char *fmt, ...)
{
	if (is_panic) {
8001ac2c:	3c028015 	lui	v0,0x8015
8001ac30:	8c436d08 	lw	v1,27912(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/panic.c:13
/* *
 * __panic - __panic is called on unresolvable fatal errors. it prints
 * "panic: 'message'", and then enters the kernel monitor.
 * */
void __panic(const char *file, int line, const char *fmt, ...)
{
8001ac34:	27bdffe0 	addiu	sp,sp,-32
8001ac38:	afb00018 	sw	s0,24(sp)
8001ac3c:	afbf001c 	sw	ra,28(sp)
8001ac40:	00a04021 	move	t0,a1
8001ac44:	afa7002c 	sw	a3,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/panic.c:14
	if (is_panic) {
8001ac48:	10600007 	beqz	v1,8001ac68 <__panic+0x3c>
8001ac4c:	00c08021 	move	s0,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/panic.c:28
	vkprintf(fmt, ap);
	kprintf("\n");
	va_end(ap);

panic_dead:
	intr_disable();
8001ac50:	0c006d04 	jal	8001b410 <intr_disable>
8001ac54:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/panic.c:30
	while (1) {
		monitor(NULL);
8001ac58:	0c006a8b 	jal	8001aa2c <monitor>
8001ac5c:	00002021 	move	a0,zero
8001ac60:	08006b16 	j	8001ac58 <__panic+0x2c>
8001ac64:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/panic.c:17
void __panic(const char *file, int line, const char *fmt, ...)
{
	if (is_panic) {
		goto panic_dead;
	}
	is_panic = 1;
8001ac68:	24030001 	li	v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/panic.c:22

	// print the 'message'
	va_list ap;
	va_start(ap, fmt);
	kprintf("kernel panic at %s:%d:\n    ", file, line);
8001ac6c:	00802821 	move	a1,a0
8001ac70:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/panic.c:17
void __panic(const char *file, int line, const char *fmt, ...)
{
	if (is_panic) {
		goto panic_dead;
	}
	is_panic = 1;
8001ac74:	ac436d08 	sw	v1,27912(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/panic.c:22

	// print the 'message'
	va_list ap;
	va_start(ap, fmt);
	kprintf("kernel panic at %s:%d:\n    ", file, line);
8001ac78:	01003021 	move	a2,t0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/panic.c:21
	}
	is_panic = 1;

	// print the 'message'
	va_list ap;
	va_start(ap, fmt);
8001ac7c:	27a2002c 	addiu	v0,sp,44
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/panic.c:22
	kprintf("kernel panic at %s:%d:\n    ", file, line);
8001ac80:	24843eb8 	addiu	a0,a0,16056
8001ac84:	0c007a9e 	jal	8001ea78 <kprintf>
8001ac88:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/panic.c:23
	vkprintf(fmt, ap);
8001ac8c:	8fa50010 	lw	a1,16(sp)
8001ac90:	0c007a8f 	jal	8001ea3c <vkprintf>
8001ac94:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/panic.c:24
	kprintf("\n");
8001ac98:	3c048002 	lui	a0,0x8002
8001ac9c:	0c007a9e 	jal	8001ea78 <kprintf>
8001aca0:	24843f2c 	addiu	a0,a0,16172
8001aca4:	08006b14 	j	8001ac50 <__panic+0x24>
8001aca8:	00000000 	nop

8001acac <__warn>:
__warn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/panic.c:36
	}
}

/* __warn - like panic, but don't */
void __warn(const char *file, int line, const char *fmt, ...)
{
8001acac:	27bdffe0 	addiu	sp,sp,-32
8001acb0:	00a01021 	move	v0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/panic.c:39
	va_list ap;
	va_start(ap, fmt);
	kprintf("kernel warning at %s:%d:\n    ", file, line);
8001acb4:	00802821 	move	a1,a0
8001acb8:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/panic.c:36
	}
}

/* __warn - like panic, but don't */
void __warn(const char *file, int line, const char *fmt, ...)
{
8001acbc:	afb00018 	sw	s0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/panic.c:39
	va_list ap;
	va_start(ap, fmt);
	kprintf("kernel warning at %s:%d:\n    ", file, line);
8001acc0:	24843ed4 	addiu	a0,a0,16084
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/panic.c:36
	}
}

/* __warn - like panic, but don't */
void __warn(const char *file, int line, const char *fmt, ...)
{
8001acc4:	00c08021 	move	s0,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/panic.c:39
	va_list ap;
	va_start(ap, fmt);
	kprintf("kernel warning at %s:%d:\n    ", file, line);
8001acc8:	00403021 	move	a2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/panic.c:38

/* __warn - like panic, but don't */
void __warn(const char *file, int line, const char *fmt, ...)
{
	va_list ap;
	va_start(ap, fmt);
8001accc:	27a2002c 	addiu	v0,sp,44
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/panic.c:36
	}
}

/* __warn - like panic, but don't */
void __warn(const char *file, int line, const char *fmt, ...)
{
8001acd0:	afbf001c 	sw	ra,28(sp)
8001acd4:	afa7002c 	sw	a3,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/panic.c:39
	va_list ap;
	va_start(ap, fmt);
	kprintf("kernel warning at %s:%d:\n    ", file, line);
8001acd8:	0c007a9e 	jal	8001ea78 <kprintf>
8001acdc:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/panic.c:40
	vkprintf(fmt, ap);
8001ace0:	8fa50010 	lw	a1,16(sp)
8001ace4:	0c007a8f 	jal	8001ea3c <vkprintf>
8001ace8:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/panic.c:41
	kprintf("\n");
8001acec:	3c048002 	lui	a0,0x8002
8001acf0:	0c007a9e 	jal	8001ea78 <kprintf>
8001acf4:	24843f2c 	addiu	a0,a0,16172
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/panic.c:43
	va_end(ap);
}
8001acf8:	8fbf001c 	lw	ra,28(sp)
8001acfc:	8fb00018 	lw	s0,24(sp)
8001ad00:	03e00008 	jr	ra
8001ad04:	27bd0020 	addiu	sp,sp,32

8001ad08 <is_kernel_panic>:
is_kernel_panic():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/panic.c:47

bool is_kernel_panic(void)
{
	return is_panic;
8001ad08:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/debug/panic.c:48
}
8001ad0c:	03e00008 	jr	ra
8001ad10:	8c426d08 	lw	v0,27912(v0)

8001ad14 <clock_int_handler>:
clock_int_handler():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/clock.c:21
	write_c0_compare(counter);
}

int clock_int_handler(void *data)
{
	ticks++;
8001ad14:	3c028015 	lui	v0,0x8015
8001ad18:	8c4377ac 	lw	v1,30636(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/clock.c:20
	counter += TIMER0_INTERVAL;
	write_c0_compare(counter);
}

int clock_int_handler(void *data)
{
8001ad1c:	27bdffe8 	addiu	sp,sp,-24
8001ad20:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/clock.c:21
	ticks++;
8001ad24:	24630001 	addiu	v1,v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/clock.c:24
//  if( (ticks & 0x1F) == 0)
//    cons_putc('A');
	run_timer_list();
8001ad28:	0c000650 	jal	80001940 <run_timer_list>
8001ad2c:	ac4377ac 	sw	v1,30636(v0)
reload_timer():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/clock.c:14

#define TIMER0_INTERVAL  1000000

static void reload_timer()
{
	uint32_t counter = read_c0_count();
8001ad30:	40024800 	mfc0	v0,c0_count
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/clock.c:15
	counter += TIMER0_INTERVAL;
8001ad34:	3c03000f 	lui	v1,0xf
8001ad38:	24634240 	addiu	v1,v1,16960
8001ad3c:	00431021 	addu	v0,v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/clock.c:16
	write_c0_compare(counter);
8001ad40:	40825800 	mtc0	v0,c0_compare
clock_int_handler():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/clock.c:27
//  if( (ticks & 0x1F) == 0)
//    cons_putc('A');
	run_timer_list();
	reload_timer();
	return 0;
}
8001ad44:	8fbf0014 	lw	ra,20(sp)
8001ad48:	00001021 	move	v0,zero
8001ad4c:	03e00008 	jr	ra
8001ad50:	27bd0018 	addiu	sp,sp,24

8001ad54 <clock_init>:
clock_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/clock.c:30

void clock_init(void)
{
8001ad54:	27bdffe8 	addiu	sp,sp,-24
8001ad58:	afbf0014 	sw	ra,20(sp)
reload_timer():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/clock.c:14

#define TIMER0_INTERVAL  1000000

static void reload_timer()
{
	uint32_t counter = read_c0_count();
8001ad5c:	40024800 	mfc0	v0,c0_count
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/clock.c:15
	counter += TIMER0_INTERVAL;
8001ad60:	3c03000f 	lui	v1,0xf
8001ad64:	24634240 	addiu	v1,v1,16960
8001ad68:	00431021 	addu	v0,v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/clock.c:16
	write_c0_compare(counter);
8001ad6c:	40825800 	mtc0	v0,c0_compare
clock_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/clock.c:32
}

void clock_init(void)
{
	reload_timer();
	pic_enable(TIMER0_IRQ);
8001ad70:	0c006d09 	jal	8001b424 <pic_enable>
8001ad74:	00002021 	move	a0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/clock.c:34
	kprintf("++setup timer interrupts\n");
}
8001ad78:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/clock.c:33

void clock_init(void)
{
	reload_timer();
	pic_enable(TIMER0_IRQ);
	kprintf("++setup timer interrupts\n");
8001ad7c:	3c048002 	lui	a0,0x8002
8001ad80:	24843ef4 	addiu	a0,a0,16116
8001ad84:	08007a9e 	j	8001ea78 <kprintf>
8001ad88:	27bd0018 	addiu	sp,sp,24

8001ad8c <serial_putc_sub>:
inw():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:72
	*((volatile uint8_t *)port) = data;
}

static inline uint32_t inw(uint32_t port)
{
	uint32_t data = *((volatile uintptr_t *)port);
8001ad8c:	3c02b040 	lui	v0,0xb040
8001ad90:	8c421004 	lw	v0,4100(v0)
serial_putc_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:95

static void serial_putc_sub(int c)
{

	//TODO
	if ((inw(COM1 + COM_IER) & COM_IER_RDI) == 0) delay();
8001ad94:	30420001 	andi	v0,v0,0x1
8001ad98:	1440000d 	bnez	v0,8001add0 <serial_putc_sub+0x44>
8001ad9c:	27bdfff8 	addiu	sp,sp,-8
delay():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:15
//#include <vga.h>

/* stupid I/O delay routine necessitated by historical PC design flaws */
void delay() {
	volatile unsigned int j;
	for (j = 0; j < (1000); j++) ; // delay
8001ada0:	afa00000 	sw	zero,0(sp)
8001ada4:	8fa20000 	lw	v0,0(sp)
8001ada8:	2c4203e8 	sltiu	v0,v0,1000
8001adac:	10400009 	beqz	v0,8001add4 <serial_putc_sub+0x48>
8001adb0:	3c02b040 	lui	v0,0xb040
8001adb4:	8fa20000 	lw	v0,0(sp)
8001adb8:	24420001 	addiu	v0,v0,1
8001adbc:	afa20000 	sw	v0,0(sp)
8001adc0:	8fa20000 	lw	v0,0(sp)
8001adc4:	2c4203e8 	sltiu	v0,v0,1000
8001adc8:	1440fffa 	bnez	v0,8001adb4 <serial_putc_sub+0x28>
8001adcc:	00000000 	nop
outw():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:78
	return data;
}

static inline void outw(uint32_t port, uint32_t data)
{
	*((volatile uintptr_t *)port) = data;
8001add0:	3c02b040 	lui	v0,0xb040
serial_putc_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:97
{

	//TODO
	if ((inw(COM1 + COM_IER) & COM_IER_RDI) == 0) delay();
	//delay();
	outw(COM1 + COM_THR, c & 0xFF);
8001add4:	308400ff 	andi	a0,a0,0xff
outw():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:78
8001add8:	ac441000 	sw	a0,4096(v0)
delay():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:15
//#include <vga.h>

/* stupid I/O delay routine necessitated by historical PC design flaws */
void delay() {
	volatile unsigned int j;
	for (j = 0; j < (1000); j++) ; // delay
8001addc:	afa00000 	sw	zero,0(sp)
8001ade0:	8fa20000 	lw	v0,0(sp)
8001ade4:	2c4203e8 	sltiu	v0,v0,1000
8001ade8:	10400008 	beqz	v0,8001ae0c <serial_putc_sub+0x80>
8001adec:	00000000 	nop
8001adf0:	8fa20000 	lw	v0,0(sp)
8001adf4:	24420001 	addiu	v0,v0,1
8001adf8:	afa20000 	sw	v0,0(sp)
8001adfc:	8fa20000 	lw	v0,0(sp)
8001ae00:	2c4203e8 	sltiu	v0,v0,1000
8001ae04:	1440fffa 	bnez	v0,8001adf0 <serial_putc_sub+0x64>
8001ae08:	00000000 	nop
serial_putc_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:100
	if ((inw(COM1 + COM_IER) & COM_IER_RDI) == 0) delay();
	//delay();
	outw(COM1 + COM_THR, c & 0xFF);
	delay();

}
8001ae0c:	03e00008 	jr	ra
8001ae10:	27bd0008 	addiu	sp,sp,8

8001ae14 <delay>:
delay():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:13
#include <memlayout.h>
#include <sync.h>
//#include <vga.h>

/* stupid I/O delay routine necessitated by historical PC design flaws */
void delay() {
8001ae14:	27bdfff8 	addiu	sp,sp,-8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:15
	volatile unsigned int j;
	for (j = 0; j < (1000); j++) ; // delay
8001ae18:	afa00000 	sw	zero,0(sp)
8001ae1c:	8fa20000 	lw	v0,0(sp)
8001ae20:	2c4203e8 	sltiu	v0,v0,1000
8001ae24:	10400008 	beqz	v0,8001ae48 <delay+0x34>
8001ae28:	00000000 	nop
8001ae2c:	8fa20000 	lw	v0,0(sp)
8001ae30:	24420001 	addiu	v0,v0,1
8001ae34:	afa20000 	sw	v0,0(sp)
8001ae38:	8fa20000 	lw	v0,0(sp)
8001ae3c:	2c4203e8 	sltiu	v0,v0,1000
8001ae40:	1440fffa 	bnez	v0,8001ae2c <delay+0x18>
8001ae44:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:16
}
8001ae48:	03e00008 	jr	ra
8001ae4c:	27bd0008 	addiu	sp,sp,8

8001ae50 <serial_intr>:
serial_intr():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:199
}

/* serial_intr - try to feed input characters from serial port */
void serial_intr(void)
{
	if (serial_exists) {
8001ae50:	3c028015 	lui	v0,0x8015
8001ae54:	8c426d0c 	lw	v0,27916(v0)
8001ae58:	1040003e 	beqz	v0,8001af54 <serial_intr+0x104>
8001ae5c:	27bdfff8 	addiu	sp,sp,-8
cons_intr():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:188
static void cons_intr(int (*proc) (void))
{
	int c;
	while ((c = (*proc) ()) != -1) {
		if (c != 0) {
			cons.buf[cons.wpos++] = c;
8001ae60:	3c068015 	lui	a2,0x8015
inw():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:72
	*((volatile uint8_t *)port) = data;
}

static inline uint32_t inw(uint32_t port)
{
	uint32_t data = *((volatile uintptr_t *)port);
8001ae64:	3c04b040 	lui	a0,0xb040
serial_proc_data():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:127
		return -1;
	delay();
	c = inw(COM1 + COM_RBR) & 0xFF;
	delay();

	if (c == 127) {
8001ae68:	2405007f 	li	a1,127
cons_intr():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:188
static void cons_intr(int (*proc) (void))
{
	int c;
	while ((c = (*proc) ()) != -1) {
		if (c != 0) {
			cons.buf[cons.wpos++] = c;
8001ae6c:	24c66d10 	addiu	a2,a2,27920
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:189
			if (cons.wpos == CONSBUFSIZE) {
8001ae70:	24070200 	li	a3,512
delay():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:15
//#include <vga.h>

/* stupid I/O delay routine necessitated by historical PC design flaws */
void delay() {
	volatile unsigned int j;
	for (j = 0; j < (1000); j++) ; // delay
8001ae74:	afa00000 	sw	zero,0(sp)
8001ae78:	8fa20000 	lw	v0,0(sp)
8001ae7c:	2c4203e8 	sltiu	v0,v0,1000
8001ae80:	10400008 	beqz	v0,8001aea4 <serial_intr+0x54>
8001ae84:	00000000 	nop
8001ae88:	8fa20000 	lw	v0,0(sp)
8001ae8c:	24420001 	addiu	v0,v0,1
8001ae90:	afa20000 	sw	v0,0(sp)
8001ae94:	8fa20000 	lw	v0,0(sp)
8001ae98:	2c4203e8 	sltiu	v0,v0,1000
8001ae9c:	1440fffa 	bnez	v0,8001ae88 <serial_intr+0x38>
8001aea0:	00000000 	nop
inw():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:72
8001aea4:	8c821014 	lw	v0,4116(a0)
serial_proc_data():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:121
{
	int c;

	//TODO
	delay();
	if ((inw(COM1 + COM_LSR) & COM_LSR_DATA) == 0)
8001aea8:	30420001 	andi	v0,v0,0x1
8001aeac:	10400029 	beqz	v0,8001af54 <serial_intr+0x104>
8001aeb0:	00000000 	nop
delay():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:15
//#include <vga.h>

/* stupid I/O delay routine necessitated by historical PC design flaws */
void delay() {
	volatile unsigned int j;
	for (j = 0; j < (1000); j++) ; // delay
8001aeb4:	afa00000 	sw	zero,0(sp)
8001aeb8:	8fa20000 	lw	v0,0(sp)
8001aebc:	2c4203e8 	sltiu	v0,v0,1000
8001aec0:	10400008 	beqz	v0,8001aee4 <serial_intr+0x94>
8001aec4:	00000000 	nop
8001aec8:	8fa20000 	lw	v0,0(sp)
8001aecc:	24420001 	addiu	v0,v0,1
8001aed0:	afa20000 	sw	v0,0(sp)
8001aed4:	8fa20000 	lw	v0,0(sp)
8001aed8:	2c4203e8 	sltiu	v0,v0,1000
8001aedc:	1440fffa 	bnez	v0,8001aec8 <serial_intr+0x78>
8001aee0:	00000000 	nop
inw():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:72
8001aee4:	8c831000 	lw	v1,4096(a0)
delay():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:15
8001aee8:	afa00000 	sw	zero,0(sp)
8001aeec:	8fa20000 	lw	v0,0(sp)
8001aef0:	2c4203e8 	sltiu	v0,v0,1000
8001aef4:	10400008 	beqz	v0,8001af18 <serial_intr+0xc8>
8001aef8:	306300ff 	andi	v1,v1,0xff
8001aefc:	8fa20000 	lw	v0,0(sp)
8001af00:	24420001 	addiu	v0,v0,1
8001af04:	afa20000 	sw	v0,0(sp)
8001af08:	8fa20000 	lw	v0,0(sp)
8001af0c:	2c4203e8 	sltiu	v0,v0,1000
8001af10:	1440fffa 	bnez	v0,8001aefc <serial_intr+0xac>
8001af14:	00000000 	nop
serial_proc_data():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:127
		return -1;
	delay();
	c = inw(COM1 + COM_RBR) & 0xFF;
	delay();

	if (c == 127) {
8001af18:	50650005 	beql	v1,a1,8001af30 <serial_intr+0xe0>
8001af1c:	24030008 	li	v1,8
cons_intr():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:187
 * */
static void cons_intr(int (*proc) (void))
{
	int c;
	while ((c = (*proc) ()) != -1) {
		if (c != 0) {
8001af20:	1060ffd4 	beqz	v1,8001ae74 <serial_intr+0x24>
8001af24:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:188
			cons.buf[cons.wpos++] = c;
8001af28:	08006bcd 	j	8001af34 <serial_intr+0xe4>
8001af2c:	8cc80204 	lw	t0,516(a2)
8001af30:	8cc80204 	lw	t0,516(a2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:190
			if (cons.wpos == CONSBUFSIZE) {
				cons.wpos = 0;
8001af34:	00005021 	move	t2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:188
static void cons_intr(int (*proc) (void))
{
	int c;
	while ((c = (*proc) ()) != -1) {
		if (c != 0) {
			cons.buf[cons.wpos++] = c;
8001af38:	25020001 	addiu	v0,t0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:190
			if (cons.wpos == CONSBUFSIZE) {
				cons.wpos = 0;
8001af3c:	00474826 	xor	t1,v0,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:188
static void cons_intr(int (*proc) (void))
{
	int c;
	while ((c = (*proc) ()) != -1) {
		if (c != 0) {
			cons.buf[cons.wpos++] = c;
8001af40:	01064021 	addu	t0,t0,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:190
			if (cons.wpos == CONSBUFSIZE) {
				cons.wpos = 0;
8001af44:	0049500b 	movn	t2,v0,t1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:188
static void cons_intr(int (*proc) (void))
{
	int c;
	while ((c = (*proc) ()) != -1) {
		if (c != 0) {
			cons.buf[cons.wpos++] = c;
8001af48:	a1030000 	sb	v1,0(t0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:190
			if (cons.wpos == CONSBUFSIZE) {
				cons.wpos = 0;
8001af4c:	08006b9d 	j	8001ae74 <serial_intr+0x24>
8001af50:	acca0204 	sw	t2,516(a2)
serial_intr():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:202
void serial_intr(void)
{
	if (serial_exists) {
		cons_intr(serial_proc_data);
	}
}
8001af54:	03e00008 	jr	ra
8001af58:	27bd0008 	addiu	sp,sp,8

8001af5c <cons_init>:
cons_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:206

/* cons_init - initializes the console devices */
void cons_init(void)
{
8001af5c:	27bdffe0 	addiu	sp,sp,-32
8001af60:	afb00018 	sw	s0,24(sp)
serial_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:58
static bool serial_exists = 0;

static void serial_init(void)
{
	volatile unsigned char *uart = (unsigned char *)COM1;
	if (serial_exists)
8001af64:	3c108015 	lui	s0,0x8015
8001af68:	8e026d0c 	lw	v0,27916(s0)
8001af6c:	1440007b 	bnez	v0,8001b15c <cons_init+0x200>
8001af70:	afbf001c 	sw	ra,28(sp)
delay():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:15
//#include <vga.h>

/* stupid I/O delay routine necessitated by historical PC design flaws */
void delay() {
	volatile unsigned int j;
	for (j = 0; j < (1000); j++) ; // delay
8001af74:	afa00010 	sw	zero,16(sp)
8001af78:	8fa20010 	lw	v0,16(sp)
serial_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:60
static void serial_init(void)
{
	volatile unsigned char *uart = (unsigned char *)COM1;
	if (serial_exists)
		return;
	serial_exists = 1;
8001af7c:	24030001 	li	v1,1
delay():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:15
//#include <vga.h>

/* stupid I/O delay routine necessitated by historical PC design flaws */
void delay() {
	volatile unsigned int j;
	for (j = 0; j < (1000); j++) ; // delay
8001af80:	2c4203e8 	sltiu	v0,v0,1000
8001af84:	10400008 	beqz	v0,8001afa8 <cons_init+0x4c>
8001af88:	ae036d0c 	sw	v1,27916(s0)
8001af8c:	8fa20010 	lw	v0,16(sp)
8001af90:	24420001 	addiu	v0,v0,1
8001af94:	afa20010 	sw	v0,16(sp)
8001af98:	8fa20010 	lw	v0,16(sp)
8001af9c:	2c4203e8 	sltiu	v0,v0,1000
8001afa0:	1440fffa 	bnez	v0,8001af8c <cons_init+0x30>
8001afa4:	00000000 	nop
serial_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:70
	//outw(COM1 + COM_DLM, 0);
	//outw(COM1 + COM_LCR, COM_LCR_WLEN8);
	//outw(COM1 + COM_IER, 0);
	//*WRITE_IO(COM1 + COM_IER)=0x00000000;
	delay();
	*WRITE_IO(COM1 + COM_THR)=0x0000000a;
8001afa8:	3c02b040 	lui	v0,0xb040
8001afac:	2403000a 	li	v1,10
8001afb0:	ac431000 	sw	v1,4096(v0)
delay():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:15
//#include <vga.h>

/* stupid I/O delay routine necessitated by historical PC design flaws */
void delay() {
	volatile unsigned int j;
	for (j = 0; j < (1000); j++) ; // delay
8001afb4:	afa00010 	sw	zero,16(sp)
8001afb8:	8fa20010 	lw	v0,16(sp)
8001afbc:	2c4203e8 	sltiu	v0,v0,1000
8001afc0:	10400008 	beqz	v0,8001afe4 <cons_init+0x88>
8001afc4:	3c02b040 	lui	v0,0xb040
8001afc8:	8fa20010 	lw	v0,16(sp)
8001afcc:	24420001 	addiu	v0,v0,1
8001afd0:	afa20010 	sw	v0,16(sp)
8001afd4:	8fa20010 	lw	v0,16(sp)
8001afd8:	2c4203e8 	sltiu	v0,v0,1000
8001afdc:	1440fffa 	bnez	v0,8001afc8 <cons_init+0x6c>
8001afe0:	3c02b040 	lui	v0,0xb040
serial_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:72
	//outw(COM1 + COM_IER, 0);
	//*WRITE_IO(COM1 + COM_IER)=0x00000000;
	delay();
	*WRITE_IO(COM1 + COM_THR)=0x0000000a;
	delay();
	*WRITE_IO(COM1 + COM_THR)=0x0000000d;
8001afe4:	2403000d 	li	v1,13
8001afe8:	ac431000 	sw	v1,4096(v0)
delay():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:15
//#include <vga.h>

/* stupid I/O delay routine necessitated by historical PC design flaws */
void delay() {
	volatile unsigned int j;
	for (j = 0; j < (1000); j++) ; // delay
8001afec:	afa00010 	sw	zero,16(sp)
8001aff0:	8fa20010 	lw	v0,16(sp)
8001aff4:	2c4203e8 	sltiu	v0,v0,1000
8001aff8:	10400008 	beqz	v0,8001b01c <cons_init+0xc0>
8001affc:	3c02b040 	lui	v0,0xb040
8001b000:	8fa20010 	lw	v0,16(sp)
8001b004:	24420001 	addiu	v0,v0,1
8001b008:	afa20010 	sw	v0,16(sp)
8001b00c:	8fa20010 	lw	v0,16(sp)
8001b010:	2c4203e8 	sltiu	v0,v0,1000
8001b014:	1440fffa 	bnez	v0,8001b000 <cons_init+0xa4>
8001b018:	3c02b040 	lui	v0,0xb040
serial_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:74
	delay();
	*WRITE_IO(COM1 + COM_THR)=0x0000000a;
	delay();
	*WRITE_IO(COM1 + COM_THR)=0x0000000d;
	delay();
	*WRITE_IO(COM1 + COM_THR)=0x00000055;
8001b01c:	24030055 	li	v1,85
8001b020:	ac431000 	sw	v1,4096(v0)
delay():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:15
//#include <vga.h>

/* stupid I/O delay routine necessitated by historical PC design flaws */
void delay() {
	volatile unsigned int j;
	for (j = 0; j < (1000); j++) ; // delay
8001b024:	afa00010 	sw	zero,16(sp)
8001b028:	8fa20010 	lw	v0,16(sp)
8001b02c:	2c4203e8 	sltiu	v0,v0,1000
8001b030:	10400008 	beqz	v0,8001b054 <cons_init+0xf8>
8001b034:	3c02b040 	lui	v0,0xb040
8001b038:	8fa20010 	lw	v0,16(sp)
8001b03c:	24420001 	addiu	v0,v0,1
8001b040:	afa20010 	sw	v0,16(sp)
8001b044:	8fa20010 	lw	v0,16(sp)
8001b048:	2c4203e8 	sltiu	v0,v0,1000
8001b04c:	1440fffa 	bnez	v0,8001b038 <cons_init+0xdc>
8001b050:	3c02b040 	lui	v0,0xb040
outw():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:78
	return data;
}

static inline void outw(uint32_t port, uint32_t data)
{
	*((volatile uintptr_t *)port) = data;
8001b054:	24030061 	li	v1,97
8001b058:	ac431000 	sw	v1,4096(v0)
delay():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:15
8001b05c:	afa00010 	sw	zero,16(sp)
8001b060:	8fa20010 	lw	v0,16(sp)
8001b064:	2c4203e8 	sltiu	v0,v0,1000
8001b068:	10400008 	beqz	v0,8001b08c <cons_init+0x130>
8001b06c:	3c02b040 	lui	v0,0xb040
8001b070:	8fa20010 	lw	v0,16(sp)
8001b074:	24420001 	addiu	v0,v0,1
8001b078:	afa20010 	sw	v0,16(sp)
8001b07c:	8fa20010 	lw	v0,16(sp)
8001b080:	2c4203e8 	sltiu	v0,v0,1000
8001b084:	1440fffa 	bnez	v0,8001b070 <cons_init+0x114>
8001b088:	3c02b040 	lui	v0,0xb040
outw():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:78
8001b08c:	24030072 	li	v1,114
8001b090:	ac431000 	sw	v1,4096(v0)
delay():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:15
8001b094:	afa00010 	sw	zero,16(sp)
8001b098:	8fa20010 	lw	v0,16(sp)
8001b09c:	2c4203e8 	sltiu	v0,v0,1000
8001b0a0:	10400008 	beqz	v0,8001b0c4 <cons_init+0x168>
8001b0a4:	3c02b040 	lui	v0,0xb040
8001b0a8:	8fa20010 	lw	v0,16(sp)
8001b0ac:	24420001 	addiu	v0,v0,1
8001b0b0:	afa20010 	sw	v0,16(sp)
8001b0b4:	8fa20010 	lw	v0,16(sp)
8001b0b8:	2c4203e8 	sltiu	v0,v0,1000
8001b0bc:	1440fffa 	bnez	v0,8001b0a8 <cons_init+0x14c>
8001b0c0:	3c02b040 	lui	v0,0xb040
outw():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:78
8001b0c4:	24030074 	li	v1,116
8001b0c8:	ac431000 	sw	v1,4096(v0)
delay():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:15
8001b0cc:	afa00010 	sw	zero,16(sp)
8001b0d0:	8fa20010 	lw	v0,16(sp)
8001b0d4:	2c4203e8 	sltiu	v0,v0,1000
8001b0d8:	10400008 	beqz	v0,8001b0fc <cons_init+0x1a0>
8001b0dc:	3c02b040 	lui	v0,0xb040
8001b0e0:	8fa20010 	lw	v0,16(sp)
8001b0e4:	24420001 	addiu	v0,v0,1
8001b0e8:	afa20010 	sw	v0,16(sp)
8001b0ec:	8fa20010 	lw	v0,16(sp)
8001b0f0:	2c4203e8 	sltiu	v0,v0,1000
8001b0f4:	1440fffa 	bnez	v0,8001b0e0 <cons_init+0x184>
8001b0f8:	3c02b040 	lui	v0,0xb040
outw():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:78
8001b0fc:	24030001 	li	v1,1
8001b100:	ac431004 	sw	v1,4100(v0)
delay():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:15
8001b104:	afa00010 	sw	zero,16(sp)
8001b108:	8fa20010 	lw	v0,16(sp)
8001b10c:	2c4203e8 	sltiu	v0,v0,1000
8001b110:	10400008 	beqz	v0,8001b134 <cons_init+0x1d8>
8001b114:	00000000 	nop
8001b118:	8fa20010 	lw	v0,16(sp)
8001b11c:	24420001 	addiu	v0,v0,1
8001b120:	afa20010 	sw	v0,16(sp)
8001b124:	8fa20010 	lw	v0,16(sp)
8001b128:	2c4203e8 	sltiu	v0,v0,1000
8001b12c:	1440fffa 	bnez	v0,8001b118 <cons_init+0x1bc>
8001b130:	00000000 	nop
serial_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:86
	delay();
	outw(COM1 + COM_IER, COM_IER_RDI);
	delay();


	pic_enable(COM1_IRQ);
8001b134:	0c006d09 	jal	8001b424 <pic_enable>
8001b138:	24040004 	li	a0,4
cons_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:212
	serial_init();
//#ifdef MACH_FPGA
//	vga_init();
//#endif
	//cons.rpos = cons.wpos = 0;
	if (!serial_exists) {
8001b13c:	8e026d0c 	lw	v0,27916(s0)
8001b140:	14400006 	bnez	v0,8001b15c <cons_init+0x200>
8001b144:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:215
		kprintf("serial port does not exist!!\n");
	}
}
8001b148:	8fb00018 	lw	s0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:213
//#ifdef MACH_FPGA
//	vga_init();
//#endif
	//cons.rpos = cons.wpos = 0;
	if (!serial_exists) {
		kprintf("serial port does not exist!!\n");
8001b14c:	3c048002 	lui	a0,0x8002
8001b150:	24843f10 	addiu	a0,a0,16144
8001b154:	08007a9e 	j	8001ea78 <kprintf>
8001b158:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:215
	}
}
8001b15c:	8fbf001c 	lw	ra,28(sp)
8001b160:	8fb00018 	lw	s0,24(sp)
8001b164:	03e00008 	jr	ra
8001b168:	27bd0020 	addiu	sp,sp,32

8001b16c <cons_putc>:
cons_putc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:219

/* cons_putc - print a single character @c to console devices */
void cons_putc(int c)
{
8001b16c:	27bdffe0 	addiu	sp,sp,-32
8001b170:	afbf001c 	sw	ra,28(sp)
8001b174:	afb00018 	sw	s0,24(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8001b178:	40026000 	mfc0	v0,c0_status
8001b17c:	30420001 	andi	v0,v0,0x1
8001b180:	1440000e 	bnez	v0,8001b1bc <cons_putc+0x50>
8001b184:	00008021 	move	s0,zero
serial_putc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:105
}

/* serial_putc - print character to serial port */
static void serial_putc(int c)
{
	if (c == '\b') {
8001b188:	24020008 	li	v0,8
8001b18c:	10820011 	beq	a0,v0,8001b1d4 <cons_putc+0x68>
8001b190:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:110
		serial_putc_sub('\b');
		serial_putc_sub(' ');
		serial_putc_sub('\b');
	} else {
		serial_putc_sub(c);
8001b194:	0c006b63 	jal	8001ad8c <serial_putc_sub>
8001b198:	00000000 	nop
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
8001b19c:	16000004 	bnez	s0,8001b1b0 <cons_putc+0x44>
8001b1a0:	8fbf001c 	lw	ra,28(sp)
cons_putc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:229
//#ifdef MACH_FPGA
//		vga_putch(c);
//#endif
	}
	local_intr_restore(intr_flag);
}
8001b1a4:	8fb00018 	lw	s0,24(sp)
8001b1a8:	03e00008 	jr	ra
8001b1ac:	27bd0020 	addiu	sp,sp,32
8001b1b0:	8fb00018 	lw	s0,24(sp)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
8001b1b4:	08006d00 	j	8001b400 <intr_enable>
8001b1b8:	27bd0020 	addiu	sp,sp,32
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8001b1bc:	0c006d04 	jal	8001b410 <intr_disable>
8001b1c0:	afa40010 	sw	a0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:16
	return 1;
8001b1c4:	8fa40010 	lw	a0,16(sp)
serial_putc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:105
}

/* serial_putc - print character to serial port */
static void serial_putc(int c)
{
	if (c == '\b') {
8001b1c8:	24020008 	li	v0,8
8001b1cc:	1482fff1 	bne	a0,v0,8001b194 <cons_putc+0x28>
8001b1d0:	24100001 	li	s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:106
		serial_putc_sub('\b');
8001b1d4:	0c006b63 	jal	8001ad8c <serial_putc_sub>
8001b1d8:	24040008 	li	a0,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:107
		serial_putc_sub(' ');
8001b1dc:	0c006b63 	jal	8001ad8c <serial_putc_sub>
8001b1e0:	24040020 	li	a0,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:108
		serial_putc_sub('\b');
8001b1e4:	0c006b63 	jal	8001ad8c <serial_putc_sub>
8001b1e8:	24040008 	li	a0,8
8001b1ec:	08006c67 	j	8001b19c <cons_putc+0x30>
8001b1f0:	00000000 	nop

8001b1f4 <cons_getc>:
cons_getc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:236
/* *
 * cons_getc - return the next input character from console,
 * or 0 if none waiting.
 * */
int cons_getc(void)
{
8001b1f4:	27bdffe0 	addiu	sp,sp,-32
8001b1f8:	afbf001c 	sw	ra,28(sp)
8001b1fc:	afb00018 	sw	s0,24(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8001b200:	40026000 	mfc0	v0,c0_status
8001b204:	30420001 	andi	v0,v0,0x1
8001b208:	1440001a 	bnez	v0,8001b274 <cons_getc+0x80>
8001b20c:	00008021 	move	s0,zero
cons_getc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:244
	local_intr_save(intr_flag);
	{
		// poll for any pending input characters,
		// so that this function works even when interrupts are disabled
		// (e.g., when called from the kernel monitor).
		serial_intr();
8001b210:	0c006b94 	jal	8001ae50 <serial_intr>
8001b214:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:247

		// grab the next character from the input buffer.
		if (cons.rpos != cons.wpos) {
8001b218:	3c038015 	lui	v1,0x8015
8001b21c:	24636d10 	addiu	v1,v1,27920
8001b220:	8c640200 	lw	a0,512(v1)
8001b224:	8c650204 	lw	a1,516(v1)
8001b228:	10850007 	beq	a0,a1,8001b248 <cons_getc+0x54>
8001b22c:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:248
			c = cons.buf[cons.rpos++];
8001b230:	00831021 	addu	v0,a0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:249
			if (cons.rpos == CONSBUFSIZE) {
8001b234:	24050200 	li	a1,512
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:248
		// (e.g., when called from the kernel monitor).
		serial_intr();

		// grab the next character from the input buffer.
		if (cons.rpos != cons.wpos) {
			c = cons.buf[cons.rpos++];
8001b238:	24840001 	addiu	a0,a0,1
8001b23c:	90420000 	lbu	v0,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:249
			if (cons.rpos == CONSBUFSIZE) {
8001b240:	1085000a 	beq	a0,a1,8001b26c <cons_getc+0x78>
8001b244:	ac640200 	sw	a0,512(v1)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:21
	return 1;
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
8001b248:	12000005 	beqz	s0,8001b260 <cons_getc+0x6c>
8001b24c:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
		intr_enable();
8001b250:	0c006d00 	jal	8001b400 <intr_enable>
8001b254:	afa20010 	sw	v0,16(sp)
8001b258:	8fa20010 	lw	v0,16(sp)
cons_getc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:259
	local_intr_restore(intr_flag);
#ifdef DEBUG_COM1
	if (c) kprintf("cons_get(0x%x)\n", c);
#endif
	return c;
}
8001b25c:	8fbf001c 	lw	ra,28(sp)
8001b260:	8fb00018 	lw	s0,24(sp)
8001b264:	03e00008 	jr	ra
8001b268:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:250

		// grab the next character from the input buffer.
		if (cons.rpos != cons.wpos) {
			c = cons.buf[cons.rpos++];
			if (cons.rpos == CONSBUFSIZE) {
				cons.rpos = 0;
8001b26c:	08006c92 	j	8001b248 <cons_getc+0x54>
8001b270:	ac600200 	sw	zero,512(v1)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8001b274:	0c006d04 	jal	8001b410 <intr_disable>
8001b278:	24100001 	li	s0,1
8001b27c:	08006c84 	j	8001b210 <cons_getc+0x1c>
8001b280:	00000000 	nop

8001b284 <serial_int_handler>:
serial_int_handler():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:134
	}
	return c;
}

void serial_int_handler(void *opaque)
{
8001b284:	27bdffe8 	addiu	sp,sp,-24
8001b288:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:137

	//int c = serial_proc_data();
	int c = cons_getc();//c);
8001b28c:	0c006c7d 	jal	8001b1f4 <cons_getc>
8001b290:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:140
	extern void dev_stdin_write(char c);
	dev_stdin_write(c);
}
8001b294:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/console.c:139
{

	//int c = serial_proc_data();
	int c = cons_getc();//c);
	extern void dev_stdin_write(char c);
	dev_stdin_write(c);
8001b298:	304400ff 	andi	a0,v0,0xff
8001b29c:	08000a99 	j	80002a64 <dev_stdin_write>
8001b2a0:	27bd0018 	addiu	sp,sp,24

8001b2a4 <ide_init>:
ide_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ide.c:30
	return 0;
}

// TODO: check if ramdisk are there
void ide_init(void)
{
8001b2a4:	27bdffe0 	addiu	sp,sp,-32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ide.c:33
	int i;
	for (i = 0; i < MAX_IDE; i++)
		ide_devices[i].valid = 0;
8001b2a8:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ide.c:30
	return 0;
}

// TODO: check if ramdisk are there
void ide_init(void)
{
8001b2ac:	afb10018 	sw	s1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ide.c:36
	int i;
	for (i = 0; i < MAX_IDE; i++)
		ide_devices[i].valid = 0;
	int devno = DISK0_DEV_NO;
	assert(devno < MAX_IDE);
	ramdisk_init_struct(&ide_devices[devno]);
8001b2b0:	3c118015 	lui	s1,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ide.c:30
	return 0;
}

// TODO: check if ramdisk are there
void ide_init(void)
{
8001b2b4:	afb00014 	sw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ide.c:36
	int i;
	for (i = 0; i < MAX_IDE; i++)
		ide_devices[i].valid = 0;
	int devno = DISK0_DEV_NO;
	assert(devno < MAX_IDE);
	ramdisk_init_struct(&ide_devices[devno]);
8001b2b8:	26246f98 	addiu	a0,s1,28568
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ide.c:33
// TODO: check if ramdisk are there
void ide_init(void)
{
	int i;
	for (i = 0; i < MAX_IDE; i++)
		ide_devices[i].valid = 0;
8001b2bc:	24506f18 	addiu	s0,v0,28440
8001b2c0:	ac406f18 	sw	zero,28440(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ide.c:30
	return 0;
}

// TODO: check if ramdisk are there
void ide_init(void)
{
8001b2c4:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ide.c:33
	int i;
	for (i = 0; i < MAX_IDE; i++)
		ide_devices[i].valid = 0;
8001b2c8:	ae000040 	sw	zero,64(s0)
8001b2cc:	ae000080 	sw	zero,128(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ide.c:36
	int devno = DISK0_DEV_NO;
	assert(devno < MAX_IDE);
	ramdisk_init_struct(&ide_devices[devno]);
8001b2d0:	0c006d7b 	jal	8001b5ec <ramdisk_init_struct>
8001b2d4:	ae0000c0 	sw	zero,192(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ide.c:37
	if (CHECK_CALL(devno, init))
8001b2d8:	8e020080 	lw	v0,128(s0)
8001b2dc:	10400009 	beqz	v0,8001b304 <ide_init+0x60>
8001b2e0:	8fbf001c 	lw	ra,28(sp)
8001b2e4:	8e1900b4 	lw	t9,180(s0)
8001b2e8:	13200006 	beqz	t9,8001b304 <ide_init+0x60>
8001b2ec:	26246f98 	addiu	a0,s1,28568
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ide.c:40
		ide_devices[devno].init(&ide_devices[devno]);

}
8001b2f0:	8fbf001c 	lw	ra,28(sp)
8001b2f4:	8fb10018 	lw	s1,24(sp)
8001b2f8:	8fb00014 	lw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ide.c:38
		ide_devices[i].valid = 0;
	int devno = DISK0_DEV_NO;
	assert(devno < MAX_IDE);
	ramdisk_init_struct(&ide_devices[devno]);
	if (CHECK_CALL(devno, init))
		ide_devices[devno].init(&ide_devices[devno]);
8001b2fc:	03200008 	jr	t9
8001b300:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ide.c:40

}
8001b304:	8fb10018 	lw	s1,24(sp)
8001b308:	8fb00014 	lw	s0,20(sp)
8001b30c:	03e00008 	jr	ra
8001b310:	27bd0020 	addiu	sp,sp,32

8001b314 <ide_device_valid>:
ide_device_valid():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ide.c:44

bool ide_device_valid(unsigned int ideno)
{
	return VALID_IDE(ideno);
8001b314:	2c830004 	sltiu	v1,a0,4
8001b318:	10600007 	beqz	v1,8001b338 <ide_device_valid+0x24>
8001b31c:	00001021 	move	v0,zero
8001b320:	3c028015 	lui	v0,0x8015
8001b324:	24426f18 	addiu	v0,v0,28440
8001b328:	00042180 	sll	a0,a0,0x6
8001b32c:	00822021 	addu	a0,a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ide.c:42
	if (CHECK_CALL(devno, init))
		ide_devices[devno].init(&ide_devices[devno]);

}

bool ide_device_valid(unsigned int ideno)
8001b330:	8c820000 	lw	v0,0(a0)
8001b334:	0002102b 	sltu	v0,zero,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ide.c:45
{
	return VALID_IDE(ideno);
}
8001b338:	03e00008 	jr	ra
8001b33c:	00000000 	nop

8001b340 <ide_device_size>:
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ide.c:44

}

bool ide_device_valid(unsigned int ideno)
{
	return VALID_IDE(ideno);
8001b340:	2c830004 	sltiu	v1,a0,4
8001b344:	10600008 	beqz	v1,8001b368 <ide_device_size+0x28>
8001b348:	00001021 	move	v0,zero
8001b34c:	3c038015 	lui	v1,0x8015
8001b350:	24636f18 	addiu	v1,v1,28440
8001b354:	00042180 	sll	a0,a0,0x6
8001b358:	00832021 	addu	a0,a0,v1
8001b35c:	8c830000 	lw	v1,0(a0)
8001b360:	54600001 	bnezl	v1,8001b368 <ide_device_size+0x28>
8001b364:	8c820008 	lw	v0,8(a0)
ide_device_size():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ide.c:53
{
	if (ide_device_valid(ideno)) {
		return ide_devices[ideno].size;
	}
	return 0;
}
8001b368:	03e00008 	jr	ra
8001b36c:	00000000 	nop

8001b370 <ide_read_secs>:
ide_read_secs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ide.c:57

int ide_read_secs(unsigned int ideno, uint32_t secno, void *dst, size_t nsecs)
{
	if (CHECK_CALL(ideno, read_secs))
8001b370:	2c820004 	sltiu	v0,a0,4
8001b374:	1040000c 	beqz	v0,8001b3a8 <ide_read_secs+0x38>
8001b378:	00042180 	sll	a0,a0,0x6
8001b37c:	3c028015 	lui	v0,0x8015
8001b380:	24426f18 	addiu	v0,v0,28440
8001b384:	00822021 	addu	a0,a0,v0
8001b388:	8c820000 	lw	v0,0(a0)
8001b38c:	10400008 	beqz	v0,8001b3b0 <ide_read_secs+0x40>
8001b390:	00001021 	move	v0,zero
8001b394:	8c990038 	lw	t9,56(a0)
8001b398:	13200005 	beqz	t9,8001b3b0 <ide_read_secs+0x40>
8001b39c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ide.c:58
		return ide_devices[ideno].read_secs(&ide_devices[ideno], secno,
8001b3a0:	03200008 	jr	t9
8001b3a4:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ide.c:61
						    dst, nsecs);
	return 0;
}
8001b3a8:	03e00008 	jr	ra
8001b3ac:	00001021 	move	v0,zero
8001b3b0:	03e00008 	jr	ra
8001b3b4:	00000000 	nop

8001b3b8 <ide_write_secs>:
ide_write_secs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ide.c:67

int
ide_write_secs(unsigned int ideno, uint32_t secno, const void *src,
	       size_t nsecs)
{
	if (CHECK_CALL(ideno, write_secs))
8001b3b8:	2c820004 	sltiu	v0,a0,4
8001b3bc:	1040000c 	beqz	v0,8001b3f0 <ide_write_secs+0x38>
8001b3c0:	00042180 	sll	a0,a0,0x6
8001b3c4:	3c028015 	lui	v0,0x8015
8001b3c8:	24426f18 	addiu	v0,v0,28440
8001b3cc:	00822021 	addu	a0,a0,v0
8001b3d0:	8c820000 	lw	v0,0(a0)
8001b3d4:	10400008 	beqz	v0,8001b3f8 <ide_write_secs+0x40>
8001b3d8:	00001021 	move	v0,zero
8001b3dc:	8c99003c 	lw	t9,60(a0)
8001b3e0:	13200005 	beqz	t9,8001b3f8 <ide_write_secs+0x40>
8001b3e4:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ide.c:68
		return ide_devices[ideno].write_secs(&ide_devices[ideno], secno,
8001b3e8:	03200008 	jr	t9
8001b3ec:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ide.c:71
						     src, nsecs);
	return 0;
}
8001b3f0:	03e00008 	jr	ra
8001b3f4:	00001021 	move	v0,zero
8001b3f8:	03e00008 	jr	ra
8001b3fc:	00000000 	nop

8001b400 <intr_enable>:
intr_enable():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.c:12

/* intr_enable - enable irq interrupt */
void intr_enable(void)
{
	uint32_t x;
	get_status(x);
8001b400:	40026000 	mfc0	v0,c0_status
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.c:13
	x |= ST0_IE;
8001b404:	34420001 	ori	v0,v0,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.c:16
	set_status(x);

}
8001b408:	03e00008 	jr	ra
8001b40c:	40826000 	mtc0	v0,c0_status

8001b410 <intr_disable>:
intr_disable():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.c:22

/* intr_disable - disable irq interrupt */
void intr_disable(void)
{
	uint32_t x;
	get_status(x);
8001b410:	40036000 	mfc0	v1,c0_status
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.c:23
	x &= ~ST0_IE;
8001b414:	2402fffe 	li	v0,-2
8001b418:	00621024 	and	v0,v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.c:25
	set_status(x);
}
8001b41c:	03e00008 	jr	ra
8001b420:	40826000 	mtc0	v0,c0_status

8001b424 <pic_enable>:
pic_enable():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/picirq.c:10
#include <asm/mipsregs.h>

static bool did_init = 0;

void pic_enable(unsigned int irq)
{
8001b424:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/picirq.c:11
	assert(irq < 8);
8001b428:	2c820008 	sltiu	v0,a0,8
8001b42c:	1040000a 	beqz	v0,8001b458 <pic_enable+0x34>
8001b430:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/picirq.c:12
	uint32_t sr = read_c0_status();
8001b434:	40036000 	mfc0	v1,c0_status
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/picirq.c:13
	sr |= 1 << (irq + STATUSB_IP0);
8001b438:	24020001 	li	v0,1
8001b43c:	24840008 	addiu	a0,a0,8
8001b440:	00821004 	sllv	v0,v0,a0
8001b444:	00622025 	or	a0,v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/picirq.c:14
	write_c0_status(sr);
8001b448:	40846000 	mtc0	a0,c0_status
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/picirq.c:15
}
8001b44c:	8fbf0014 	lw	ra,20(sp)
8001b450:	03e00008 	jr	ra
8001b454:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/picirq.c:11

static bool did_init = 0;

void pic_enable(unsigned int irq)
{
	assert(irq < 8);
8001b458:	3c048002 	lui	a0,0x8002
8001b45c:	3c068002 	lui	a2,0x8002
8001b460:	3c078002 	lui	a3,0x8002
8001b464:	24843f30 	addiu	a0,a0,16176
8001b468:	2405000b 	li	a1,11
8001b46c:	24c60e28 	addiu	a2,a2,3624
8001b470:	0c006b0b 	jal	8001ac2c <__panic>
8001b474:	24e73f3c 	addiu	a3,a3,16188

8001b478 <pic_disable>:
pic_disable():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/picirq.c:18
	sr |= 1 << (irq + STATUSB_IP0);
	write_c0_status(sr);
}

void pic_disable(unsigned int irq)
{
8001b478:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/picirq.c:19
	assert(irq < 8);
8001b47c:	2c820008 	sltiu	v0,a0,8
8001b480:	1040000b 	beqz	v0,8001b4b0 <pic_disable+0x38>
8001b484:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/picirq.c:20
	uint32_t sr = read_c0_status();
8001b488:	40036000 	mfc0	v1,c0_status
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/picirq.c:21
	sr &= ~(1 << (irq + STATUSB_IP0));
8001b48c:	24020001 	li	v0,1
8001b490:	24840008 	addiu	a0,a0,8
8001b494:	00821004 	sllv	v0,v0,a0
8001b498:	00021027 	nor	v0,zero,v0
8001b49c:	00622024 	and	a0,v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/picirq.c:22
	write_c0_status(sr);
8001b4a0:	40846000 	mtc0	a0,c0_status
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/picirq.c:23
}
8001b4a4:	8fbf0014 	lw	ra,20(sp)
8001b4a8:	03e00008 	jr	ra
8001b4ac:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/picirq.c:19
	write_c0_status(sr);
}

void pic_disable(unsigned int irq)
{
	assert(irq < 8);
8001b4b0:	3c048002 	lui	a0,0x8002
8001b4b4:	3c068002 	lui	a2,0x8002
8001b4b8:	3c078002 	lui	a3,0x8002
8001b4bc:	24843f30 	addiu	a0,a0,16176
8001b4c0:	24050013 	li	a1,19
8001b4c4:	24c60e28 	addiu	a2,a2,3624
8001b4c8:	0c006b0b 	jal	8001ac2c <__panic>
8001b4cc:	24e73f3c 	addiu	a3,a3,16188

8001b4d0 <pic_init>:
pic_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/picirq.c:27
	write_c0_status(sr);
}

void pic_init(void)
{
	uint32_t sr = read_c0_status();
8001b4d0:	40026000 	mfc0	v0,c0_status
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/picirq.c:29
	/* disable all */
	sr &= ~ST0_IM;
8001b4d4:	3c03ffff 	lui	v1,0xffff
8001b4d8:	246300ff 	addiu	v1,v1,255
8001b4dc:	00431024 	and	v0,v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/picirq.c:30
	write_c0_status(sr);
8001b4e0:	40826000 	mtc0	v0,c0_status
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/picirq.c:31
	did_init = 1;
8001b4e4:	24030001 	li	v1,1
8001b4e8:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/picirq.c:32
}
8001b4ec:	03e00008 	jr	ra
8001b4f0:	ac437018 	sw	v1,28696(v0)

8001b4f4 <ramdisk_write>:
ramdisk_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:58

static int ramdisk_write(struct ide_device *dev, size_t secno, const void *src,
			 size_t nsecs)
{
	//kprintf("%08x(%d) %08x(%d)\n", dev->size, dev->size, secno, secno);
	nsecs = MIN(nsecs, dev->size - secno);
8001b4f4:	8c820008 	lw	v0,8(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:61
	if (nsecs < 0)
		return -1;
	memcpy((void *)(dev->iobase + secno * SECTSIZE), src, nsecs * SECTSIZE);
8001b4f8:	8c83000c 	lw	v1,12(a0)
8001b4fc:	00052240 	sll	a0,a1,0x9
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:58

static int ramdisk_write(struct ide_device *dev, size_t secno, const void *src,
			 size_t nsecs)
{
	//kprintf("%08x(%d) %08x(%d)\n", dev->size, dev->size, secno, secno);
	nsecs = MIN(nsecs, dev->size - secno);
8001b500:	00451023 	subu	v0,v0,a1
8001b504:	0047402b 	sltu	t0,v0,a3
8001b508:	0048380b 	movn	a3,v0,t0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:56
	return 0;
}

static int ramdisk_write(struct ide_device *dev, size_t secno, const void *src,
			 size_t nsecs)
{
8001b50c:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:61
	//kprintf("%08x(%d) %08x(%d)\n", dev->size, dev->size, secno, secno);
	nsecs = MIN(nsecs, dev->size - secno);
	if (nsecs < 0)
		return -1;
	memcpy((void *)(dev->iobase + secno * SECTSIZE), src, nsecs * SECTSIZE);
8001b510:	00c02821 	move	a1,a2
8001b514:	00832021 	addu	a0,a0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:56
	return 0;
}

static int ramdisk_write(struct ide_device *dev, size_t secno, const void *src,
			 size_t nsecs)
{
8001b518:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:61
	//kprintf("%08x(%d) %08x(%d)\n", dev->size, dev->size, secno, secno);
	nsecs = MIN(nsecs, dev->size - secno);
	if (nsecs < 0)
		return -1;
	memcpy((void *)(dev->iobase + secno * SECTSIZE), src, nsecs * SECTSIZE);
8001b51c:	0c005c7c 	jal	800171f0 <memcpy>
8001b520:	00073240 	sll	a2,a3,0x9
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:63
	return 0;
}
8001b524:	8fbf0014 	lw	ra,20(sp)
8001b528:	00001021 	move	v0,zero
8001b52c:	03e00008 	jr	ra
8001b530:	27bd0018 	addiu	sp,sp,24

8001b534 <ramdisk_read>:
ramdisk_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:47
}

static int ramdisk_read(struct ide_device *dev, size_t secno, void *dst,
			size_t nsecs)
{
	nsecs = MIN(nsecs, dev->size - secno);
8001b534:	8c820008 	lw	v0,8(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:50
	if (nsecs < 0)
		return -1;
	memcpy(dst, (void *)(dev->iobase + secno * SECTSIZE), nsecs * SECTSIZE);
8001b538:	8c83000c 	lw	v1,12(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:46
	return 1;
}

static int ramdisk_read(struct ide_device *dev, size_t secno, void *dst,
			size_t nsecs)
{
8001b53c:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:47
	nsecs = MIN(nsecs, dev->size - secno);
8001b540:	00451023 	subu	v0,v0,a1
8001b544:	0047202b 	sltu	a0,v0,a3
8001b548:	0044380b 	movn	a3,v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:50
	if (nsecs < 0)
		return -1;
	memcpy(dst, (void *)(dev->iobase + secno * SECTSIZE), nsecs * SECTSIZE);
8001b54c:	00052a40 	sll	a1,a1,0x9
8001b550:	00c02021 	move	a0,a2
8001b554:	00a32821 	addu	a1,a1,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:46
	return 1;
}

static int ramdisk_read(struct ide_device *dev, size_t secno, void *dst,
			size_t nsecs)
{
8001b558:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:50
	nsecs = MIN(nsecs, dev->size - secno);
	if (nsecs < 0)
		return -1;
	memcpy(dst, (void *)(dev->iobase + secno * SECTSIZE), nsecs * SECTSIZE);
8001b55c:	0c005c7c 	jal	800171f0 <memcpy>
8001b560:	00073240 	sll	a2,a3,0x9
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:52
	return 0;
}
8001b564:	8fbf0014 	lw	ra,20(sp)
8001b568:	00001021 	move	v0,zero
8001b56c:	03e00008 	jr	ra
8001b570:	27bd0018 	addiu	sp,sp,24

8001b574 <ramdisk_init>:
ramdisk_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:67
	return 0;
}

static void ramdisk_init(struct ide_device *dev)
{
	kprintf("ramdisk_init(): initrd found, magic: 0x%08x, 0x%08x secs\n",
8001b574:	8c82000c 	lw	v0,12(a0)
8001b578:	8c860008 	lw	a2,8(a0)
8001b57c:	3c048002 	lui	a0,0x8002
8001b580:	8c450000 	lw	a1,0(v0)
8001b584:	08007a9e 	j	8001ea78 <kprintf>
8001b588:	24843f44 	addiu	a0,a0,16196

8001b58c <check_initrd>:
check_initrd():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:33

//char initrd_begin[], initrd_end[];

bool check_initrd()
{
	if (_initrd_begin == _initrd_end) {
8001b58c:	3c028002 	lui	v0,0x8002
8001b590:	3c078015 	lui	a3,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:32
#define MIN(x,y) (((x)<(y))?(x):(y))

//char initrd_begin[], initrd_end[];

bool check_initrd()
{
8001b594:	27bdffe0 	addiu	sp,sp,-32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:33
	if (_initrd_begin == _initrd_end) {
8001b598:	24457450 	addiu	a1,v0,29776
8001b59c:	24e73450 	addiu	a3,a3,13392
8001b5a0:	14a70008 	bne	a1,a3,8001b5c4 <check_initrd+0x38>
8001b5a4:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:34
		kprintf("Warning: No Initrd!\n");
8001b5a8:	3c048002 	lui	a0,0x8002
8001b5ac:	0c007a9e 	jal	8001ea78 <kprintf>
8001b5b0:	24843f80 	addiu	a0,a0,16256
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:35
		return 0;
8001b5b4:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:42

	kprintf("Initrd: 0x%08x - 0x%08x, size: 0x%08x, magic: 0x%08x\n",
		_initrd_begin, _initrd_end - 1, _initrd_end - _initrd_begin,
		*(uint32_t *) _initrd_begin);
	return 1;
}
8001b5b8:	8fbf001c 	lw	ra,28(sp)
8001b5bc:	03e00008 	jr	ra
8001b5c0:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:38
	if (_initrd_begin == _initrd_end) {
		kprintf("Warning: No Initrd!\n");
		return 0;
	}

	kprintf("Initrd: 0x%08x - 0x%08x, size: 0x%08x, magic: 0x%08x\n",
8001b5c4:	8c427450 	lw	v0,29776(v0)
8001b5c8:	3c048002 	lui	a0,0x8002
8001b5cc:	3c068015 	lui	a2,0x8015
8001b5d0:	24843f98 	addiu	a0,a0,16280
8001b5d4:	24c6344f 	addiu	a2,a2,13391
8001b5d8:	00e53823 	subu	a3,a3,a1
8001b5dc:	0c007a9e 	jal	8001ea78 <kprintf>
8001b5e0:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:41
		_initrd_begin, _initrd_end - 1, _initrd_end - _initrd_begin,
		*(uint32_t *) _initrd_begin);
	return 1;
8001b5e4:	08006d6e 	j	8001b5b8 <check_initrd+0x2c>
8001b5e8:	24020001 	li	v0,1

8001b5ec <ramdisk_init_struct>:
ramdisk_init_struct():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:73
		*(uint32_t *) (dev->iobase), dev->size);

}

void ramdisk_init_struct(struct ide_device *dev)
{
8001b5ec:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:74
	memset(dev, 0, sizeof(struct ide_device));
8001b5f0:	00002821 	move	a1,zero
8001b5f4:	24060040 	li	a2,64
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:73
		*(uint32_t *) (dev->iobase), dev->size);

}

void ramdisk_init_struct(struct ide_device *dev)
{
8001b5f8:	afb00010 	sw	s0,16(sp)
8001b5fc:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:74
	memset(dev, 0, sizeof(struct ide_device));
8001b600:	0c005c52 	jal	80017148 <memset>
8001b604:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:75
	assert(INITRD_SIZE() % SECTSIZE == 0);
8001b608:	3c048015 	lui	a0,0x8015
8001b60c:	3c038002 	lui	v1,0x8002
8001b610:	24843450 	addiu	a0,a0,13392
8001b614:	24637450 	addiu	v1,v1,29776
8001b618:	00831023 	subu	v0,a0,v1
8001b61c:	304501ff 	andi	a1,v0,0x1ff
8001b620:	10a00008 	beqz	a1,8001b644 <ramdisk_init_struct+0x58>
8001b624:	3c068002 	lui	a2,0x8002
8001b628:	3c048002 	lui	a0,0x8002
8001b62c:	3c078002 	lui	a3,0x8002
8001b630:	24843fd0 	addiu	a0,a0,16336
8001b634:	2405004b 	li	a1,75
8001b638:	24c60e28 	addiu	a2,a2,3624
8001b63c:	0c006b0b 	jal	8001ac2c <__panic>
8001b640:	24e73fdc 	addiu	a3,a3,16348
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:76
	if (CHECK_INITRD_EXIST()) {
8001b644:	10830017 	beq	a0,v1,8001b6a4 <ramdisk_init_struct+0xb8>
8001b648:	244401ff 	addiu	a0,v0,511
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:79
		dev->valid = 1;
		dev->sets = ~0;
		dev->size = INITRD_SIZE() / SECTSIZE;
8001b64c:	28450000 	slti	a1,v0,0
8001b650:	0085100b 	movn	v0,a0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:77
void ramdisk_init_struct(struct ide_device *dev)
{
	memset(dev, 0, sizeof(struct ide_device));
	assert(INITRD_SIZE() % SECTSIZE == 0);
	if (CHECK_INITRD_EXIST()) {
		dev->valid = 1;
8001b654:	24040001 	li	a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:79
		dev->sets = ~0;
		dev->size = INITRD_SIZE() / SECTSIZE;
8001b658:	00021243 	sra	v0,v0,0x9
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:77
void ramdisk_init_struct(struct ide_device *dev)
{
	memset(dev, 0, sizeof(struct ide_device));
	assert(INITRD_SIZE() % SECTSIZE == 0);
	if (CHECK_INITRD_EXIST()) {
		dev->valid = 1;
8001b65c:	ae040000 	sw	a0,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:81
		dev->sets = ~0;
		dev->size = INITRD_SIZE() / SECTSIZE;
		dev->iobase = (uintptr_t) _initrd_begin;
		strcpy(dev->model, "KERN_INITRD");
8001b660:	3c058002 	lui	a1,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:78
{
	memset(dev, 0, sizeof(struct ide_device));
	assert(INITRD_SIZE() % SECTSIZE == 0);
	if (CHECK_INITRD_EXIST()) {
		dev->valid = 1;
		dev->sets = ~0;
8001b664:	2404ffff 	li	a0,-1
8001b668:	ae040004 	sw	a0,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:79
		dev->size = INITRD_SIZE() / SECTSIZE;
8001b66c:	ae020008 	sw	v0,8(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:80
		dev->iobase = (uintptr_t) _initrd_begin;
8001b670:	ae03000c 	sw	v1,12(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:81
		strcpy(dev->model, "KERN_INITRD");
8001b674:	26040014 	addiu	a0,s0,20
8001b678:	0c005b92 	jal	80016e48 <strcpy>
8001b67c:	24a53ffc 	addiu	a1,a1,16380
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:82
		dev->init = ramdisk_init;
8001b680:	3c028002 	lui	v0,0x8002
8001b684:	2442b574 	addiu	v0,v0,-19084
8001b688:	ae020034 	sw	v0,52(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:83
		dev->read_secs = ramdisk_read;
8001b68c:	3c028002 	lui	v0,0x8002
8001b690:	2442b534 	addiu	v0,v0,-19148
8001b694:	ae020038 	sw	v0,56(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:84
		dev->write_secs = ramdisk_write;
8001b698:	3c028002 	lui	v0,0x8002
8001b69c:	2442b4f4 	addiu	v0,v0,-19212
8001b6a0:	ae02003c 	sw	v0,60(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/ramdisk.c:86
	}
}
8001b6a4:	8fbf0014 	lw	ra,20(sp)
8001b6a8:	8fb00010 	lw	s0,16(sp)
8001b6ac:	03e00008 	jr	ra
8001b6b0:	27bd0018 	addiu	sp,sp,24

8001b6b4 <render_char>:
render_char():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:30
static int row, col;

static void render_char(int ch, int row, int col) {
	if (ch < ' ' || ch > 127)
		ch = ' ';
	buf[row][col] = ch;
8001b6b4:	3c078015 	lui	a3,0x8015
8001b6b8:	24e7733c 	addiu	a3,a3,29500
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:31
	if (actual_screen[row][col] == ch)
8001b6bc:	000518c0 	sll	v1,a1,0x3
8001b6c0:	00051140 	sll	v0,a1,0x5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:30
static int row, col;

static void render_char(int ch, int row, int col) {
	if (ch < ' ' || ch > 127)
		ch = ' ';
	buf[row][col] = ch;
8001b6c4:	00054880 	sll	t1,a1,0x2
8001b6c8:	01274821 	addu	t1,t1,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:31
	if (actual_screen[row][col] == ch)
8001b6cc:	00624021 	addu	t0,v1,v0
8001b6d0:	3c078015 	lui	a3,0x8015
8001b6d4:	01064021 	addu	t0,t0,a2
8001b6d8:	24e7738c 	addiu	a3,a3,29580
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:30
static int row, col;

static void render_char(int ch, int row, int col) {
	if (ch < ' ' || ch > 127)
		ch = ' ';
	buf[row][col] = ch;
8001b6dc:	8d2a0000 	lw	t2,0(t1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:31
	if (actual_screen[row][col] == ch)
8001b6e0:	00e84821 	addu	t1,a3,t0
8001b6e4:	91290000 	lbu	t1,0(t1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:28
static char buf_mem[NR_ROW][NR_COL], actual_screen[NR_ROW][NR_COL],
			*buf[NR_ROW];
static int row, col;

static void render_char(int ch, int row, int col) {
	if (ch < ' ' || ch > 127)
8001b6e8:	2488ffe0 	addiu	t0,a0,-32
8001b6ec:	2d080060 	sltiu	t0,t0,96
8001b6f0:	24180020 	li	t8,32
8001b6f4:	0088c00b 	movn	t8,a0,t0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:30
		ch = ' ';
	buf[row][col] = ch;
8001b6f8:	01465021 	addu	t2,t2,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:31
	if (actual_screen[row][col] == ch)
8001b6fc:	1138002a 	beq	t1,t8,8001b7a8 <render_char+0xf4>
8001b700:	a1580000 	sb	t8,0(t2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:37
		return;
	const unsigned *bitmap = CHAR_FONT_BITMAP[ch - ' '];
	unsigned cur_bitmap = bitmap[0];
	int i, j, pos = 0;
	mem_ptr_t dest = vga +
		row * VGA_MEM_NRCOL * CHAR_HEIGHT + col * CHAR_WIDTH;
8001b704:	00065840 	sll	t3,a2,0x1
8001b708:	00055240 	sll	t2,a1,0x9
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:33
	if (ch < ' ' || ch > 127)
		ch = ' ';
	buf[row][col] = ch;
	if (actual_screen[row][col] == ch)
		return;
	const unsigned *bitmap = CHAR_FONT_BITMAP[ch - ' '];
8001b70c:	00182100 	sll	a0,t8,0x4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:37
	unsigned cur_bitmap = bitmap[0];
	int i, j, pos = 0;
	mem_ptr_t dest = vga +
		row * VGA_MEM_NRCOL * CHAR_HEIGHT + col * CHAR_WIDTH;
8001b710:	000648c0 	sll	t1,a2,0x3
8001b714:	00052b40 	sll	a1,a1,0xd
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:33
	if (ch < ' ' || ch > 127)
		ch = ' ';
	buf[row][col] = ch;
	if (actual_screen[row][col] == ch)
		return;
	const unsigned *bitmap = CHAR_FONT_BITMAP[ch - ' '];
8001b718:	00184080 	sll	t0,t8,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:37
	unsigned cur_bitmap = bitmap[0];
	int i, j, pos = 0;
	mem_ptr_t dest = vga +
		row * VGA_MEM_NRCOL * CHAR_HEIGHT + col * CHAR_WIDTH;
8001b71c:	01694821 	addu	t1,t3,t1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:33
	if (ch < ' ' || ch > 127)
		ch = ' ';
	buf[row][col] = ch;
	if (actual_screen[row][col] == ch)
		return;
	const unsigned *bitmap = CHAR_FONT_BITMAP[ch - ' '];
8001b720:	01044021 	addu	t0,t0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:37
	unsigned cur_bitmap = bitmap[0];
	int i, j, pos = 0;
	mem_ptr_t dest = vga +
		row * VGA_MEM_NRCOL * CHAR_HEIGHT + col * CHAR_WIDTH;
8001b724:	00aa2823 	subu	a1,a1,t2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:33
	if (ch < ' ' || ch > 127)
		ch = ' ';
	buf[row][col] = ch;
	if (actual_screen[row][col] == ch)
		return;
	const unsigned *bitmap = CHAR_FONT_BITMAP[ch - ' '];
8001b728:	3c0c8002 	lui	t4,0x8002
8001b72c:	2508fd80 	addiu	t0,t0,-640
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:37
	unsigned cur_bitmap = bitmap[0];
	int i, j, pos = 0;
	mem_ptr_t dest = vga +
		row * VGA_MEM_NRCOL * CHAR_HEIGHT + col * CHAR_WIDTH;
8001b730:	01252821 	addu	a1,t1,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:33
	if (ch < ' ' || ch > 127)
		ch = ' ';
	buf[row][col] = ch;
	if (actual_screen[row][col] == ch)
		return;
	const unsigned *bitmap = CHAR_FONT_BITMAP[ch - ' '];
8001b734:	258c01fc 	addiu	t4,t4,508
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:37
	unsigned cur_bitmap = bitmap[0];
	int i, j, pos = 0;
	mem_ptr_t dest = vga +
		row * VGA_MEM_NRCOL * CHAR_HEIGHT + col * CHAR_WIDTH;
8001b738:	00052880 	sll	a1,a1,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:33
	if (ch < ' ' || ch > 127)
		ch = ' ';
	buf[row][col] = ch;
	if (actual_screen[row][col] == ch)
		return;
	const unsigned *bitmap = CHAR_FONT_BITMAP[ch - ' '];
8001b73c:	01886021 	addu	t4,t4,t0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:36
	unsigned cur_bitmap = bitmap[0];
	int i, j, pos = 0;
	mem_ptr_t dest = vga +
8001b740:	3c04ba00 	lui	a0,0xba00
8001b744:	00a42021 	addu	a0,a1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:34
		ch = ' ';
	buf[row][col] = ch;
	if (actual_screen[row][col] == ch)
		return;
	const unsigned *bitmap = CHAR_FONT_BITMAP[ch - ' '];
	unsigned cur_bitmap = bitmap[0];
8001b748:	8d850000 	lw	a1,0(t4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:27

static char buf_mem[NR_ROW][NR_COL], actual_screen[NR_ROW][NR_COL],
			*buf[NR_ROW];
static int row, col;

static void render_char(int ch, int row, int col) {
8001b74c:	248f7800 	addiu	t7,a0,30720
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:35
	buf[row][col] = ch;
	if (actual_screen[row][col] == ch)
		return;
	const unsigned *bitmap = CHAR_FONT_BITMAP[ch - ' '];
	unsigned cur_bitmap = bitmap[0];
	int i, j, pos = 0;
8001b750:	00004021 	move	t0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:40
	mem_ptr_t dest = vga +
		row * VGA_MEM_NRCOL * CHAR_HEIGHT + col * CHAR_WIDTH;
	for (i = 0; i < CHAR_HEIGHT; i ++) {
		for (j = 0; j < CHAR_WIDTH; j ++, pos ++) {
			if (pos == 32) {
8001b754:	240b0020 	li	t3,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:45
				pos = 0;
				cur_bitmap = *(++ bitmap);
			}
			if (cur_bitmap & 1)
				*dest = COLOR;
8001b758:	240d00ff 	li	t5,255
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:27

static char buf_mem[NR_ROW][NR_COL], actual_screen[NR_ROW][NR_COL],
			*buf[NR_ROW];
static int row, col;

static void render_char(int ch, int row, int col) {
8001b75c:	00807021 	move	t6,a0
8001b760:	248a0028 	addiu	t2,a0,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:40
	int i, j, pos = 0;
	mem_ptr_t dest = vga +
		row * VGA_MEM_NRCOL * CHAR_HEIGHT + col * CHAR_WIDTH;
	for (i = 0; i < CHAR_HEIGHT; i ++) {
		for (j = 0; j < CHAR_WIDTH; j ++, pos ++) {
			if (pos == 32) {
8001b764:	510b0015 	beql	t0,t3,8001b7bc <render_char+0x108>
8001b768:	8d850004 	lw	a1,4(t4)
8001b76c:	25080001 	addiu	t0,t0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:44
				pos = 0;
				cur_bitmap = *(++ bitmap);
			}
			if (cur_bitmap & 1)
8001b770:	30a90001 	andi	t1,a1,0x1
8001b774:	1120000e 	beqz	t1,8001b7b0 <render_char+0xfc>
8001b778:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:45
				*dest = COLOR;
8001b77c:	ac8d0000 	sw	t5,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:48
			else
				*dest = 0;
			dest ++;
8001b780:	24840004 	addiu	a0,a0,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:39
	unsigned cur_bitmap = bitmap[0];
	int i, j, pos = 0;
	mem_ptr_t dest = vga +
		row * VGA_MEM_NRCOL * CHAR_HEIGHT + col * CHAR_WIDTH;
	for (i = 0; i < CHAR_HEIGHT; i ++) {
		for (j = 0; j < CHAR_WIDTH; j ++, pos ++) {
8001b784:	148afff7 	bne	a0,t2,8001b764 <render_char+0xb0>
8001b788:	00052842 	srl	a1,a1,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:27

static char buf_mem[NR_ROW][NR_COL], actual_screen[NR_ROW][NR_COL],
			*buf[NR_ROW];
static int row, col;

static void render_char(int ch, int row, int col) {
8001b78c:	25c40800 	addiu	a0,t6,2048
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:38
	const unsigned *bitmap = CHAR_FONT_BITMAP[ch - ' '];
	unsigned cur_bitmap = bitmap[0];
	int i, j, pos = 0;
	mem_ptr_t dest = vga +
		row * VGA_MEM_NRCOL * CHAR_HEIGHT + col * CHAR_WIDTH;
	for (i = 0; i < CHAR_HEIGHT; i ++) {
8001b790:	15e4fff3 	bne	t7,a0,8001b760 <render_char+0xac>
8001b794:	00807021 	move	t6,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:53
			dest ++;
			cur_bitmap >>= 1;
		}
		dest += VGA_MEM_NRCOL - CHAR_WIDTH;
	}
	actual_screen[row][col] = ch;
8001b798:	00621021 	addu	v0,v1,v0
8001b79c:	00463021 	addu	a2,v0,a2
8001b7a0:	00e63821 	addu	a3,a3,a2
8001b7a4:	a0f80000 	sb	t8,0(a3)
8001b7a8:	03e00008 	jr	ra
8001b7ac:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:47
				cur_bitmap = *(++ bitmap);
			}
			if (cur_bitmap & 1)
				*dest = COLOR;
			else
				*dest = 0;
8001b7b0:	ac800000 	sw	zero,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:48
			dest ++;
8001b7b4:	08006de1 	j	8001b784 <render_char+0xd0>
8001b7b8:	24840004 	addiu	a0,a0,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:42
		row * VGA_MEM_NRCOL * CHAR_HEIGHT + col * CHAR_WIDTH;
	for (i = 0; i < CHAR_HEIGHT; i ++) {
		for (j = 0; j < CHAR_WIDTH; j ++, pos ++) {
			if (pos == 32) {
				pos = 0;
				cur_bitmap = *(++ bitmap);
8001b7bc:	24080001 	li	t0,1
8001b7c0:	08006ddc 	j	8001b770 <render_char+0xbc>
8001b7c4:	258c0004 	addiu	t4,t4,4

8001b7c8 <vga_init>:
vga_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:56
		dest += VGA_MEM_NRCOL - CHAR_WIDTH;
	}
	actual_screen[row][col] = ch;
}

void vga_init() {
8001b7c8:	27bdffc8 	addiu	sp,sp,-56
8001b7cc:	afbe0030 	sw	s8,48(sp)
8001b7d0:	afb10014 	sw	s1,20(sp)
8001b7d4:	3c1e8015 	lui	s8,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:60
	int i, j;
	for (i = 0; i < NR_ROW; i ++) {
		buf[i] = buf_mem[i];
		for (j = 0; j < NR_COL; j ++) {
8001b7d8:	3c118015 	lui	s1,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:56
		dest += VGA_MEM_NRCOL - CHAR_WIDTH;
	}
	actual_screen[row][col] = ch;
}

void vga_init() {
8001b7dc:	afb60028 	sw	s6,40(sp)
8001b7e0:	2631701c 	addiu	s1,s1,28700
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:60
	int i, j;
	for (i = 0; i < NR_ROW; i ++) {
		buf[i] = buf_mem[i];
		for (j = 0; j < NR_COL; j ++) {
8001b7e4:	3c168015 	lui	s6,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:56
		dest += VGA_MEM_NRCOL - CHAR_WIDTH;
	}
	actual_screen[row][col] = ch;
}

void vga_init() {
8001b7e8:	27de738c 	addiu	s8,s8,29580
8001b7ec:	afb7002c 	sw	s7,44(sp)
8001b7f0:	afb50024 	sw	s5,36(sp)
8001b7f4:	afb40020 	sw	s4,32(sp)
8001b7f8:	afb20018 	sw	s2,24(sp)
8001b7fc:	afbf0034 	sw	ra,52(sp)
8001b800:	afb3001c 	sw	s3,28(sp)
8001b804:	afb00010 	sw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:60
	int i, j;
	for (i = 0; i < NR_ROW; i ++) {
		buf[i] = buf_mem[i];
		for (j = 0; j < NR_COL; j ++) {
8001b808:	26d6733c 	addiu	s6,s6,29500
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:58
	actual_screen[row][col] = ch;
}

void vga_init() {
	int i, j;
	for (i = 0; i < NR_ROW; i ++) {
8001b80c:	00009021 	move	s2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:56
		dest += VGA_MEM_NRCOL - CHAR_WIDTH;
	}
	actual_screen[row][col] = ch;
}

void vga_init() {
8001b810:	03d1f023 	subu	s8,s8,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:62
	int i, j;
	for (i = 0; i < NR_ROW; i ++) {
		buf[i] = buf_mem[i];
		for (j = 0; j < NR_COL; j ++) {
			buf_mem[i][j] = 0;
			actual_screen[i][j] = -1;
8001b814:	2415ffff 	li	s5,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:60

void vga_init() {
	int i, j;
	for (i = 0; i < NR_ROW; i ++) {
		buf[i] = buf_mem[i];
		for (j = 0; j < NR_COL; j ++) {
8001b818:	24140028 	li	s4,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:58
	actual_screen[row][col] = ch;
}

void vga_init() {
	int i, j;
	for (i = 0; i < NR_ROW; i ++) {
8001b81c:	24170014 	li	s7,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:59
		buf[i] = buf_mem[i];
8001b820:	aed10000 	sw	s1,0(s6)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:60
		for (j = 0; j < NR_COL; j ++) {
8001b824:	00008021 	move	s0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:56
		dest += VGA_MEM_NRCOL - CHAR_WIDTH;
	}
	actual_screen[row][col] = ch;
}

void vga_init() {
8001b828:	03d19821 	addu	s3,s8,s1
8001b82c:	02301821 	addu	v1,s1,s0
8001b830:	02701021 	addu	v0,s3,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:63
	for (i = 0; i < NR_ROW; i ++) {
		buf[i] = buf_mem[i];
		for (j = 0; j < NR_COL; j ++) {
			buf_mem[i][j] = 0;
			actual_screen[i][j] = -1;
			render_char(0, i, j);
8001b834:	02003021 	move	a2,s0
8001b838:	00002021 	move	a0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:60

void vga_init() {
	int i, j;
	for (i = 0; i < NR_ROW; i ++) {
		buf[i] = buf_mem[i];
		for (j = 0; j < NR_COL; j ++) {
8001b83c:	26100001 	addiu	s0,s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:63
			buf_mem[i][j] = 0;
			actual_screen[i][j] = -1;
			render_char(0, i, j);
8001b840:	02402821 	move	a1,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:61
void vga_init() {
	int i, j;
	for (i = 0; i < NR_ROW; i ++) {
		buf[i] = buf_mem[i];
		for (j = 0; j < NR_COL; j ++) {
			buf_mem[i][j] = 0;
8001b844:	a0600000 	sb	zero,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:63
			actual_screen[i][j] = -1;
			render_char(0, i, j);
8001b848:	0c006dad 	jal	8001b6b4 <render_char>
8001b84c:	a0550000 	sb	s5,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:60

void vga_init() {
	int i, j;
	for (i = 0; i < NR_ROW; i ++) {
		buf[i] = buf_mem[i];
		for (j = 0; j < NR_COL; j ++) {
8001b850:	1614fff7 	bne	s0,s4,8001b830 <vga_init+0x68>
8001b854:	02301821 	addu	v1,s1,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:58
	actual_screen[row][col] = ch;
}

void vga_init() {
	int i, j;
	for (i = 0; i < NR_ROW; i ++) {
8001b858:	26520001 	addiu	s2,s2,1
8001b85c:	26310028 	addiu	s1,s1,40
8001b860:	1657ffef 	bne	s2,s7,8001b820 <vga_init+0x58>
8001b864:	26d60004 	addiu	s6,s6,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:69
		}
	}
	row = 0;
	col = 0;
	render_char('_', 0, 0);
}
8001b868:	8fbf0034 	lw	ra,52(sp)
8001b86c:	8fbe0030 	lw	s8,48(sp)
8001b870:	8fb7002c 	lw	s7,44(sp)
8001b874:	8fb60028 	lw	s6,40(sp)
8001b878:	8fb50024 	lw	s5,36(sp)
8001b87c:	8fb40020 	lw	s4,32(sp)
8001b880:	8fb3001c 	lw	s3,28(sp)
8001b884:	8fb20018 	lw	s2,24(sp)
8001b888:	8fb10014 	lw	s1,20(sp)
8001b88c:	8fb00010 	lw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:66
			buf_mem[i][j] = 0;
			actual_screen[i][j] = -1;
			render_char(0, i, j);
		}
	}
	row = 0;
8001b890:	3c028015 	lui	v0,0x8015
8001b894:	ac4076ac 	sw	zero,30380(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:68
	col = 0;
	render_char('_', 0, 0);
8001b898:	2404005f 	li	a0,95
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:67
			actual_screen[i][j] = -1;
			render_char(0, i, j);
		}
	}
	row = 0;
	col = 0;
8001b89c:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:68
	render_char('_', 0, 0);
8001b8a0:	00002821 	move	a1,zero
8001b8a4:	00003021 	move	a2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:69
}
8001b8a8:	27bd0038 	addiu	sp,sp,56
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:68
			render_char(0, i, j);
		}
	}
	row = 0;
	col = 0;
	render_char('_', 0, 0);
8001b8ac:	08006dad 	j	8001b6b4 <render_char>
8001b8b0:	ac4076b0 	sw	zero,30384(v0)

8001b8b4 <vga_redraw>:
vga_redraw():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:71
}

void vga_redraw() {
8001b8b4:	27bdffc8 	addiu	sp,sp,-56
8001b8b8:	afb6002c 	sw	s6,44(sp)
8001b8bc:	afb2001c 	sw	s2,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:73
	int i, j;
	for (i = 0; i < NR_ROW; i ++)
8001b8c0:	3c168015 	lui	s6,0x8015
8001b8c4:	3c128015 	lui	s2,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:71
	row = 0;
	col = 0;
	render_char('_', 0, 0);
}

void vga_redraw() {
8001b8c8:	afb70030 	sw	s7,48(sp)
8001b8cc:	afb50028 	sw	s5,40(sp)
8001b8d0:	afb40024 	sw	s4,36(sp)
8001b8d4:	afb10018 	sw	s1,24(sp)
8001b8d8:	afbf0034 	sw	ra,52(sp)
8001b8dc:	afb30020 	sw	s3,32(sp)
8001b8e0:	afb00014 	sw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:73
	int i, j;
	for (i = 0; i < NR_ROW; i ++)
8001b8e4:	26d6733c 	addiu	s6,s6,29500
8001b8e8:	2652738c 	addiu	s2,s2,29580
8001b8ec:	00008821 	move	s1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:75
		for (j = 0; j < NR_COL; j ++) {
			actual_screen[i][j] = -1;
8001b8f0:	2415ffff 	li	s5,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:74
}

void vga_redraw() {
	int i, j;
	for (i = 0; i < NR_ROW; i ++)
		for (j = 0; j < NR_COL; j ++) {
8001b8f4:	24140028 	li	s4,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:73
	render_char('_', 0, 0);
}

void vga_redraw() {
	int i, j;
	for (i = 0; i < NR_ROW; i ++)
8001b8f8:	24170014 	li	s7,20
8001b8fc:	8ed30000 	lw	s3,0(s6)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:71
	row = 0;
	col = 0;
	render_char('_', 0, 0);
}

void vga_redraw() {
8001b900:	00008021 	move	s0,zero
8001b904:	02501021 	addu	v0,s2,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:75
	int i, j;
	for (i = 0; i < NR_ROW; i ++)
		for (j = 0; j < NR_COL; j ++) {
			actual_screen[i][j] = -1;
8001b908:	a0550000 	sb	s5,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:71
	row = 0;
	col = 0;
	render_char('_', 0, 0);
}

void vga_redraw() {
8001b90c:	02701021 	addu	v0,s3,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:76
	int i, j;
	for (i = 0; i < NR_ROW; i ++)
		for (j = 0; j < NR_COL; j ++) {
			actual_screen[i][j] = -1;
			render_char(buf[i][j], i, j);
8001b910:	90440000 	lbu	a0,0(v0)
8001b914:	02003021 	move	a2,s0
8001b918:	02202821 	move	a1,s1
8001b91c:	0c006dad 	jal	8001b6b4 <render_char>
8001b920:	26100001 	addiu	s0,s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:74
}

void vga_redraw() {
	int i, j;
	for (i = 0; i < NR_ROW; i ++)
		for (j = 0; j < NR_COL; j ++) {
8001b924:	1614fff8 	bne	s0,s4,8001b908 <vga_redraw+0x54>
8001b928:	02501021 	addu	v0,s2,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:73
	render_char('_', 0, 0);
}

void vga_redraw() {
	int i, j;
	for (i = 0; i < NR_ROW; i ++)
8001b92c:	26310001 	addiu	s1,s1,1
8001b930:	26d60004 	addiu	s6,s6,4
8001b934:	1637fff1 	bne	s1,s7,8001b8fc <vga_redraw+0x48>
8001b938:	26520028 	addiu	s2,s2,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:78
		for (j = 0; j < NR_COL; j ++) {
			actual_screen[i][j] = -1;
			render_char(buf[i][j], i, j);
		}
}
8001b93c:	8fbf0034 	lw	ra,52(sp)
8001b940:	8fb70030 	lw	s7,48(sp)
8001b944:	8fb6002c 	lw	s6,44(sp)
8001b948:	8fb50028 	lw	s5,40(sp)
8001b94c:	8fb40024 	lw	s4,36(sp)
8001b950:	8fb30020 	lw	s3,32(sp)
8001b954:	8fb2001c 	lw	s2,28(sp)
8001b958:	8fb10018 	lw	s1,24(sp)
8001b95c:	8fb00014 	lw	s0,20(sp)
8001b960:	03e00008 	jr	ra
8001b964:	27bd0038 	addiu	sp,sp,56

8001b968 <vga_putch>:
vga_putch():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:82

void vga_putch(int ch) {
	static int prev_ch;
	if (prev_ch == '\r' && ch == '\n') {
8001b968:	3c028015 	lui	v0,0x8015
8001b96c:	8c4376b4 	lw	v1,30388(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:80
			actual_screen[i][j] = -1;
			render_char(buf[i][j], i, j);
		}
}

void vga_putch(int ch) {
8001b970:	27bdffd0 	addiu	sp,sp,-48
8001b974:	afb00010 	sw	s0,16(sp)
8001b978:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:82
	static int prev_ch;
	if (prev_ch == '\r' && ch == '\n') {
8001b97c:	2404000d 	li	a0,13
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:80
			actual_screen[i][j] = -1;
			render_char(buf[i][j], i, j);
		}
}

void vga_putch(int ch) {
8001b980:	afbf002c 	sw	ra,44(sp)
8001b984:	afb60028 	sw	s6,40(sp)
8001b988:	afb50024 	sw	s5,36(sp)
8001b98c:	afb40020 	sw	s4,32(sp)
8001b990:	afb3001c 	sw	s3,28(sp)
8001b994:	afb20018 	sw	s2,24(sp)
8001b998:	afb10014 	sw	s1,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:82
	static int prev_ch;
	if (prev_ch == '\r' && ch == '\n') {
8001b99c:	10640028 	beq	v1,a0,8001ba40 <vga_putch+0xd8>
8001b9a0:	ac5076b4 	sw	s0,30388(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:87
		prev_ch = ch;
		return;
	}
	prev_ch = ch;
	if (ch == '\b') {
8001b9a4:	24020008 	li	v0,8
8001b9a8:	12020032 	beq	s0,v0,8001ba74 <vga_putch+0x10c>
8001b9ac:	3c118015 	lui	s1,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:94
		if (col)
			col --;
		render_char('_', row, col);
		return;
	}
	render_char(ch, row, col);
8001b9b0:	3c138015 	lui	s3,0x8015
8001b9b4:	8e3276b0 	lw	s2,30384(s1)
8001b9b8:	8e7576ac 	lw	s5,30380(s3)
8001b9bc:	02002021 	move	a0,s0
8001b9c0:	02403021 	move	a2,s2
8001b9c4:	0c006dad 	jal	8001b6b4 <render_char>
8001b9c8:	02a02821 	move	a1,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:95
	col ++;
8001b9cc:	26460001 	addiu	a2,s2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:96
	if (ch == '\r' || ch == '\n' || col == NR_COL) {
8001b9d0:	2402000d 	li	v0,13
8001b9d4:	12020012 	beq	s0,v0,8001ba20 <vga_putch+0xb8>
8001b9d8:	ae2676b0 	sw	a2,30384(s1)
8001b9dc:	2402000a 	li	v0,10
8001b9e0:	1202000f 	beq	s0,v0,8001ba20 <vga_putch+0xb8>
8001b9e4:	24020028 	li	v0,40
8001b9e8:	10c2000e 	beq	a2,v0,8001ba24 <vga_putch+0xbc>
8001b9ec:	26a20001 	addiu	v0,s5,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:114
			for (i = 0; i < NR_ROW; i ++)
				for (j = 0; j < NR_COL; j ++)
					render_char(buf[i][j], i, j);
		}
	}
	render_char('_', row, col);
8001b9f0:	02a02821 	move	a1,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:115
}
8001b9f4:	8fbf002c 	lw	ra,44(sp)
8001b9f8:	8fb60028 	lw	s6,40(sp)
8001b9fc:	8fb50024 	lw	s5,36(sp)
8001ba00:	8fb40020 	lw	s4,32(sp)
8001ba04:	8fb3001c 	lw	s3,28(sp)
8001ba08:	8fb20018 	lw	s2,24(sp)
8001ba0c:	8fb10014 	lw	s1,20(sp)
8001ba10:	8fb00010 	lw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:114
			for (i = 0; i < NR_ROW; i ++)
				for (j = 0; j < NR_COL; j ++)
					render_char(buf[i][j], i, j);
		}
	}
	render_char('_', row, col);
8001ba14:	2404005f 	li	a0,95
8001ba18:	08006dad 	j	8001b6b4 <render_char>
8001ba1c:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:97
		return;
	}
	render_char(ch, row, col);
	col ++;
	if (ch == '\r' || ch == '\n' || col == NR_COL) {
		row ++;
8001ba20:	26a20001 	addiu	v0,s5,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:99
		col = 0;
		if (row == NR_ROW) {
8001ba24:	24030014 	li	v1,20
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:97
		return;
	}
	render_char(ch, row, col);
	col ++;
	if (ch == '\r' || ch == '\n' || col == NR_COL) {
		row ++;
8001ba28:	ae6276ac 	sw	v0,30380(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:99
		col = 0;
		if (row == NR_ROW) {
8001ba2c:	10430029 	beq	v0,v1,8001bad4 <vga_putch+0x16c>
8001ba30:	ae2076b0 	sw	zero,30384(s1)
8001ba34:	0040a821 	move	s5,v0
8001ba38:	08006e7c 	j	8001b9f0 <vga_putch+0x88>
8001ba3c:	00003021 	move	a2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:82
		}
}

void vga_putch(int ch) {
	static int prev_ch;
	if (prev_ch == '\r' && ch == '\n') {
8001ba40:	2403000a 	li	v1,10
8001ba44:	1603ffd8 	bne	s0,v1,8001b9a8 <vga_putch+0x40>
8001ba48:	24020008 	li	v0,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:115
				for (j = 0; j < NR_COL; j ++)
					render_char(buf[i][j], i, j);
		}
	}
	render_char('_', row, col);
}
8001ba4c:	8fbf002c 	lw	ra,44(sp)
8001ba50:	8fb60028 	lw	s6,40(sp)
8001ba54:	8fb50024 	lw	s5,36(sp)
8001ba58:	8fb40020 	lw	s4,32(sp)
8001ba5c:	8fb3001c 	lw	s3,28(sp)
8001ba60:	8fb20018 	lw	s2,24(sp)
8001ba64:	8fb10014 	lw	s1,20(sp)
8001ba68:	8fb00010 	lw	s0,16(sp)
8001ba6c:	03e00008 	jr	ra
8001ba70:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:88
		prev_ch = ch;
		return;
	}
	prev_ch = ch;
	if (ch == '\b') {
		render_char(' ', row, col);
8001ba74:	3c028015 	lui	v0,0x8015
8001ba78:	3c128015 	lui	s2,0x8015
8001ba7c:	8c5176ac 	lw	s1,30380(v0)
8001ba80:	8e5076b0 	lw	s0,30384(s2)
8001ba84:	24040020 	li	a0,32
8001ba88:	02202821 	move	a1,s1
8001ba8c:	0c006dad 	jal	8001b6b4 <render_char>
8001ba90:	02003021 	move	a2,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:89
		if (col)
8001ba94:	12000003 	beqz	s0,8001baa4 <vga_putch+0x13c>
8001ba98:	00003021 	move	a2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:90
			col --;
8001ba9c:	2606ffff 	addiu	a2,s0,-1
8001baa0:	ae4676b0 	sw	a2,30384(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:91
		render_char('_', row, col);
8001baa4:	02202821 	move	a1,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:115
				for (j = 0; j < NR_COL; j ++)
					render_char(buf[i][j], i, j);
		}
	}
	render_char('_', row, col);
}
8001baa8:	8fbf002c 	lw	ra,44(sp)
8001baac:	8fb60028 	lw	s6,40(sp)
8001bab0:	8fb50024 	lw	s5,36(sp)
8001bab4:	8fb40020 	lw	s4,32(sp)
8001bab8:	8fb3001c 	lw	s3,28(sp)
8001babc:	8fb20018 	lw	s2,24(sp)
8001bac0:	8fb10014 	lw	s1,20(sp)
8001bac4:	8fb00010 	lw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:91
	prev_ch = ch;
	if (ch == '\b') {
		render_char(' ', row, col);
		if (col)
			col --;
		render_char('_', row, col);
8001bac8:	2404005f 	li	a0,95
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:114
			for (i = 0; i < NR_ROW; i ++)
				for (j = 0; j < NR_COL; j ++)
					render_char(buf[i][j], i, j);
		}
	}
	render_char('_', row, col);
8001bacc:	08006dad 	j	8001b6b4 <render_char>
8001bad0:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:101
	if (ch == '\r' || ch == '\n' || col == NR_COL) {
		row ++;
		col = 0;
		if (row == NR_ROW) {
			row --;
			char *tmp = buf[0];
8001bad4:	3c148015 	lui	s4,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:100
	col ++;
	if (ch == '\r' || ch == '\n' || col == NR_COL) {
		row ++;
		col = 0;
		if (row == NR_ROW) {
			row --;
8001bad8:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:101
			char *tmp = buf[0];
8001badc:	8e84733c 	lw	a0,29500(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:100
	col ++;
	if (ch == '\r' || ch == '\n' || col == NR_COL) {
		row ++;
		col = 0;
		if (row == NR_ROW) {
			row --;
8001bae0:	ac5576ac 	sw	s5,30380(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:80
			actual_screen[i][j] = -1;
			render_char(buf[i][j], i, j);
		}
}

void vga_putch(int ch) {
8001bae4:	2694733c 	addiu	s4,s4,29500
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:101
	if (ch == '\r' || ch == '\n' || col == NR_COL) {
		row ++;
		col = 0;
		if (row == NR_ROW) {
			row --;
			char *tmp = buf[0];
8001bae8:	3c028015 	lui	v0,0x8015
8001baec:	24427340 	addiu	v0,v0,29504
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:80
			actual_screen[i][j] = -1;
			render_char(buf[i][j], i, j);
		}
}

void vga_putch(int ch) {
8001baf0:	26850050 	addiu	a1,s4,80
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:104
		if (row == NR_ROW) {
			row --;
			char *tmp = buf[0];
			int i, j;
			for (i = 1; i < NR_ROW; i ++)
				buf[i - 1] = buf[i];
8001baf4:	8c430000 	lw	v1,0(v0)
8001baf8:	ac43fffc 	sw	v1,-4(v0)
8001bafc:	24420004 	addiu	v0,v0,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:103
		col = 0;
		if (row == NR_ROW) {
			row --;
			char *tmp = buf[0];
			int i, j;
			for (i = 1; i < NR_ROW; i ++)
8001bb00:	5445fffd 	bnel	v0,a1,8001baf8 <vga_putch+0x190>
8001bb04:	8c430000 	lw	v1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:105
				buf[i - 1] = buf[i];
			buf[row] = tmp;
8001bb08:	00151080 	sll	v0,s5,0x2
8001bb0c:	00541021 	addu	v0,v0,s4
8001bb10:	ac440000 	sw	a0,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:106
			for (i = 0; i < NR_COL; i ++)
8001bb14:	24050028 	li	a1,40
8001bb18:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:80
			actual_screen[i][j] = -1;
			render_char(buf[i][j], i, j);
		}
}

void vga_putch(int ch) {
8001bb1c:	00821821 	addu	v1,a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:106
			char *tmp = buf[0];
			int i, j;
			for (i = 1; i < NR_ROW; i ++)
				buf[i - 1] = buf[i];
			buf[row] = tmp;
			for (i = 0; i < NR_COL; i ++)
8001bb20:	24420001 	addiu	v0,v0,1
8001bb24:	1445fffd 	bne	v0,a1,8001bb1c <vga_putch+0x1b4>
8001bb28:	a0600000 	sb	zero,0(v1)
8001bb2c:	00008821 	move	s1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:110
				tmp[i] = 0;

			for (i = 0; i < NR_ROW; i ++)
				for (j = 0; j < NR_COL; j ++)
8001bb30:	24130028 	li	s3,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:109
				buf[i - 1] = buf[i];
			buf[row] = tmp;
			for (i = 0; i < NR_COL; i ++)
				tmp[i] = 0;

			for (i = 0; i < NR_ROW; i ++)
8001bb34:	24160014 	li	s6,20
8001bb38:	8e920000 	lw	s2,0(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:80
			actual_screen[i][j] = -1;
			render_char(buf[i][j], i, j);
		}
}

void vga_putch(int ch) {
8001bb3c:	00008021 	move	s0,zero
8001bb40:	02501021 	addu	v0,s2,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:111
			for (i = 0; i < NR_COL; i ++)
				tmp[i] = 0;

			for (i = 0; i < NR_ROW; i ++)
				for (j = 0; j < NR_COL; j ++)
					render_char(buf[i][j], i, j);
8001bb44:	90440000 	lbu	a0,0(v0)
8001bb48:	02003021 	move	a2,s0
8001bb4c:	02202821 	move	a1,s1
8001bb50:	0c006dad 	jal	8001b6b4 <render_char>
8001bb54:	26100001 	addiu	s0,s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:110
			buf[row] = tmp;
			for (i = 0; i < NR_COL; i ++)
				tmp[i] = 0;

			for (i = 0; i < NR_ROW; i ++)
				for (j = 0; j < NR_COL; j ++)
8001bb58:	1613fffa 	bne	s0,s3,8001bb44 <vga_putch+0x1dc>
8001bb5c:	02501021 	addu	v0,s2,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/vga.c:109
				buf[i - 1] = buf[i];
			buf[row] = tmp;
			for (i = 0; i < NR_COL; i ++)
				tmp[i] = 0;

			for (i = 0; i < NR_ROW; i ++)
8001bb60:	26310001 	addiu	s1,s1,1
8001bb64:	1636fff4 	bne	s1,s6,8001bb38 <vga_putch+0x1d0>
8001bb68:	26940004 	addiu	s4,s4,4
8001bb6c:	08006e7c 	j	8001b9f0 <vga_putch+0x88>
8001bb70:	00003021 	move	a2,zero

8001bb74 <setup_exception_vector>:
setup_exception_vector():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/init.c:21
void setup_exception_vector()
{
	//for QEMU sim
	extern unsigned char __exception_vector, __exception_vector_end;
	memcpy((unsigned int *)0xBFC00000, &__exception_vector,
	       &__exception_vector_end - &__exception_vector);
8001bb74:	3c058002 	lui	a1,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/init.c:20

void setup_exception_vector()
{
	//for QEMU sim
	extern unsigned char __exception_vector, __exception_vector_end;
	memcpy((unsigned int *)0xBFC00000, &__exception_vector,
8001bb78:	3c068002 	lui	a2,0x8002
8001bb7c:	24a55000 	addiu	a1,a1,20480
8001bb80:	24c65400 	addiu	a2,a2,21504
8001bb84:	3c04bfc0 	lui	a0,0xbfc0
8001bb88:	08005c7c 	j	800171f0 <memcpy>
8001bb8c:	00c53023 	subu	a2,a2,a1

8001bb90 <kern_init>:
kern_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/init.c:25
	       &__exception_vector_end - &__exception_vector);
}

void __noreturn kern_init(void)
{
8001bb90:	27bdffe8 	addiu	sp,sp,-24
8001bb94:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/init.c:27
	//setup_exception_vector();
	tlb_invalidate_all();
8001bb98:	0c00791c 	jal	8001e470 <tlb_invalidate_all>
8001bb9c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/init.c:29
	char *p = 0x7ffff000;
	mp_init();
8001bba0:	0c007c7f 	jal	8001f1fc <mp_init>
8001bba4:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/init.c:30
	pic_init();		// init interrupt controller
8001bba8:	0c006d34 	jal	8001b4d0 <pic_init>
8001bbac:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/init.c:31
	cons_init();		// init the console
8001bbb0:	0c006bd7 	jal	8001af5c <cons_init>
8001bbb4:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/init.c:32
	clock_init();		// init clock interrupt
8001bbb8:	0c006b55 	jal	8001ad54 <clock_init>
8001bbbc:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/init.c:34

	check_initrd();
8001bbc0:	0c006d63 	jal	8001b58c <check_initrd>
8001bbc4:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/init.c:37

	const char *message = "(THU.CST) os is loading ...\n\r\n\r";
	kprintf(message);
8001bbc8:	3c048002 	lui	a0,0x8002
8001bbcc:	0c007a9e 	jal	8001ea78 <kprintf>
8001bbd0:	24844008 	addiu	a0,a0,16392
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/init.c:38
	print_kerninfo();
8001bbd4:	0c006a19 	jal	8001a864 <print_kerninfo>
8001bbd8:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/init.c:46
	kprintf("EX\n\r");
	__asm__ volatile ("syscall");
	kprintf("EX RET\n\r");
#endif

	pmm_init();		// init physical memory management
8001bbdc:	0c007551 	jal	8001d544 <pmm_init>
8001bbe0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/init.c:49

/* SZY comments: heavy commented here.*/
	vmm_init();		// init virtual memory management
8001bbe4:	0c004d83 	jal	8001360c <vmm_init>
8001bbe8:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/init.c:51

	sched_init();
8001bbec:	0c000492 	jal	80001248 <sched_init>
8001bbf0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/init.c:52
	proc_init();		// init process table
8001bbf4:	0c0043f9 	jal	80010fe4 <proc_init>
8001bbf8:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/init.c:53
	ide_init();
8001bbfc:	0c006ca9 	jal	8001b2a4 <ide_init>
8001bc00:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/init.c:54
	fs_init();
8001bc04:	0c00326e 	jal	8000c9b8 <fs_init>
8001bc08:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/init.c:55
	intr_enable();		// enable irq interrupt
8001bc0c:	0c006d00 	jal	8001b400 <intr_enable>
8001bc10:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/init/init.c:59
	//*(int*)(0x00124) = 0x432;
	//asm volatile("divu $1, $1, $1");
//*p = 1;
	cpu_idle();
8001bc14:	0c007a29 	jal	8001e8a4 <cpu_idle>
8001bc18:	00000000 	nop

8001bc1c <buddy_init>:
buddy_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:47

//buddy_init - init the free_list(0 ~ MAX_ORDER) & reset nr_free(0 ~ MAX_ORDER)
static void buddy_init(void)
{
	int i;
	for (i = 0; i <= MAX_ORDER; i++) {
8001bc1c:	3c048015 	lui	a0,0x8015
8001bc20:	3c078015 	lui	a3,0x8015
8001bc24:	248476e8 	addiu	a0,a0,30440
8001bc28:	00001021 	move	v0,zero
8001bc2c:	24e776e0 	addiu	a3,a3,30432
8001bc30:	2406000b 	li	a2,11
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:48
		list_init(&free_list(i));
8001bc34:	00021880 	sll	v1,v0,0x2
8001bc38:	00022900 	sll	a1,v0,0x4
8001bc3c:	00a31823 	subu	v1,a1,v1
8001bc40:	00e31821 	addu	v1,a3,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:47

//buddy_init - init the free_list(0 ~ MAX_ORDER) & reset nr_free(0 ~ MAX_ORDER)
static void buddy_init(void)
{
	int i;
	for (i = 0; i <= MAX_ORDER; i++) {
8001bc44:	24420001 	addiu	v0,v0,1
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
8001bc48:	ac630004 	sw	v1,4(v1)
8001bc4c:	ac630000 	sw	v1,0(v1)
buddy_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:49
		list_init(&free_list(i));
		nr_free(i) = 0;
8001bc50:	ac800000 	sw	zero,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:47

//buddy_init - init the free_list(0 ~ MAX_ORDER) & reset nr_free(0 ~ MAX_ORDER)
static void buddy_init(void)
{
	int i;
	for (i = 0; i <= MAX_ORDER; i++) {
8001bc54:	1446fff7 	bne	v0,a2,8001bc34 <buddy_init+0x18>
8001bc58:	2484000c 	addiu	a0,a0,12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:51
		list_init(&free_list(i));
		nr_free(i) = 0;
	}
}
8001bc5c:	03e00008 	jr	ra
8001bc60:	00000000 	nop

8001bc64 <buddy_nr_free_pages>:
buddy_nr_free_pages():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:225
}

//buddy_nr_free_pages - get the nr: the number of free pages
static size_t buddy_nr_free_pages(void)
{
	size_t ret = 0, order = 0;
8001bc64:	3c048015 	lui	a0,0x8015
8001bc68:	248476e8 	addiu	a0,a0,30440
8001bc6c:	00001821 	move	v1,zero
8001bc70:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:226
	for (; order <= MAX_ORDER; order++) {
8001bc74:	2406000b 	li	a2,11
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:227
		ret += nr_free(order) * (1 << order);
8001bc78:	8c850000 	lw	a1,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:226

//buddy_nr_free_pages - get the nr: the number of free pages
static size_t buddy_nr_free_pages(void)
{
	size_t ret = 0, order = 0;
	for (; order <= MAX_ORDER; order++) {
8001bc7c:	2484000c 	addiu	a0,a0,12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:227
		ret += nr_free(order) * (1 << order);
8001bc80:	00652804 	sllv	a1,a1,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:226

//buddy_nr_free_pages - get the nr: the number of free pages
static size_t buddy_nr_free_pages(void)
{
	size_t ret = 0, order = 0;
	for (; order <= MAX_ORDER; order++) {
8001bc84:	24630001 	addiu	v1,v1,1
8001bc88:	1466fffb 	bne	v1,a2,8001bc78 <buddy_nr_free_pages+0x14>
8001bc8c:	00451021 	addu	v0,v0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:230
		ret += nr_free(order) * (1 << order);
	}
	return ret;
}
8001bc90:	03e00008 	jr	ra
8001bc94:	00000000 	nop

8001bc98 <buddy_init_memmap>:
buddy_init_memmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:55
	}
}

//buddy_init_memmap - build free_list for Page base follow  n continuous pages.
static void buddy_init_memmap(struct Page *base, size_t n)
{
8001bc98:	27bdffc8 	addiu	sp,sp,-56
8001bc9c:	afb10018 	sw	s1,24(sp)
8001bca0:	afb00014 	sw	s0,20(sp)
8001bca4:	afbf0034 	sw	ra,52(sp)
8001bca8:	afb70030 	sw	s7,48(sp)
8001bcac:	afb6002c 	sw	s6,44(sp)
8001bcb0:	afb50028 	sw	s5,40(sp)
8001bcb4:	afb40024 	sw	s4,36(sp)
8001bcb8:	afb30020 	sw	s3,32(sp)
8001bcbc:	afb2001c 	sw	s2,28(sp)
8001bcc0:	00a08021 	move	s0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:57
	static int zone_num = 0;
	assert(n > 0 && zone_num < MAX_ZONE_NUM);
8001bcc4:	10a00074 	beqz	a1,8001be98 <buddy_init_memmap+0x200>
8001bcc8:	00808821 	move	s1,a0
8001bccc:	3c148015 	lui	s4,0x8015
8001bcd0:	8e827764 	lw	v0,30564(s4)
8001bcd4:	2843000a 	slti	v1,v0,10
8001bcd8:	1060006f 	beqz	v1,8001be98 <buddy_init_memmap+0x200>
8001bcdc:	0005a940 	sll	s5,a1,0x5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:59
	struct Page *p = base;
	for (; p != base + n; p++) {
8001bce0:	0095a821 	addu	s5,a0,s5
8001bce4:	10950010 	beq	a0,s5,8001bd28 <buddy_init_memmap+0x90>
8001bce8:	00809021 	move	s2,a0
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8001bcec:	40026000 	mfc0	v0,c0_status
8001bcf0:	30420001 	andi	v0,v0,0x1
8001bcf4:	14400059 	bnez	v0,8001be5c <buddy_init_memmap+0x1c4>
8001bcf8:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8001bcfc:	8e530004 	lw	s3,4(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8001bd00:	32730001 	andi	s3,s3,0x1
buddy_init_memmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:60
		assert(PageReserved(p));
8001bd04:	1260005c 	beqz	s3,8001be78 <buddy_init_memmap+0x1e0>
8001bd08:	8e827764 	lw	v0,30564(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:61
		p->flags = p->property = 0;
8001bd0c:	ae400008 	sw	zero,8(s2)
8001bd10:	ae400004 	sw	zero,4(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:62
		p->zone_num = zone_num;
8001bd14:	ae42000c 	sw	v0,12(s2)
atomic_set():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:34
 *
 * Atomically sets the value of @v to @i.
 * */
static __always_inline void atomic_set(atomic_t * v, int i)
{
	v->counter = i;
8001bd18:	ae400000 	sw	zero,0(s2)
buddy_init_memmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:59
static void buddy_init_memmap(struct Page *base, size_t n)
{
	static int zone_num = 0;
	assert(n > 0 && zone_num < MAX_ZONE_NUM);
	struct Page *p = base;
	for (; p != base + n; p++) {
8001bd1c:	26520020 	addiu	s2,s2,32
8001bd20:	1655fff2 	bne	s2,s5,8001bcec <buddy_init_memmap+0x54>
8001bd24:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:65
		assert(PageReserved(p));
		p->flags = p->property = 0;
		p->zone_num = zone_num;
		set_page_ref(p, 0);
	}
	p = zones[zone_num++].mem_base = base;
8001bd28:	3c038015 	lui	v1,0x8015
8001bd2c:	00022080 	sll	a0,v0,0x2
8001bd30:	246376b8 	addiu	v1,v1,30392
8001bd34:	24420001 	addiu	v0,v0,1
8001bd38:	00831821 	addu	v1,a0,v1
8001bd3c:	ae827764 	sw	v0,30564(s4)
8001bd40:	3c178015 	lui	s7,0x8015
8001bd44:	3c148015 	lui	s4,0x8015
8001bd48:	ac710000 	sw	s1,0(v1)
8001bd4c:	26947760 	addiu	s4,s4,30560
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:66
	size_t order = MAX_ORDER, order_size = (1 << order);
8001bd50:	24130400 	li	s3,1024
8001bd54:	2415000a 	li	s5,10
8001bd58:	26f776e0 	addiu	s7,s7,30432
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:68
	while (n != 0) {
		while (n >= order_size) {
8001bd5c:	0213102b 	sltu	v0,s0,s3
8001bd60:	1440002f 	bnez	v0,8001be20 <buddy_init_memmap+0x188>
8001bd64:	00151100 	sll	v0,s5,0x4
8001bd68:	00159080 	sll	s2,s5,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:71
			p->property = order;
			SetPageProperty(p);
			list_add(&free_list(order), &(p->page_link));
8001bd6c:	00529023 	subu	s2,v0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:68
		set_page_ref(p, 0);
	}
	p = zones[zone_num++].mem_base = base;
	size_t order = MAX_ORDER, order_size = (1 << order);
	while (n != 0) {
		while (n >= order_size) {
8001bd70:	0013b140 	sll	s6,s3,0x5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:71
			p->property = order;
			SetPageProperty(p);
			list_add(&free_list(order), &(p->page_link));
8001bd74:	08006f6f 	j	8001bdbc <buddy_init_memmap+0x124>
8001bd78:	02f29021 	addu	s2,s7,s2
set_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:185
 * */
static __always_inline void set_bit(int nr, volatile uint32_t * addr)
{
	int intr_flag;
	local_intr_save(intr_flag);
	*addr |= (1 << nr);
8001bd7c:	8e220004 	lw	v0,4(s1)
buddy_init_memmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:71
8001bd80:	26230010 	addiu	v1,s1,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:72
			n -= order_size, p += order_size;
8001bd84:	02138023 	subu	s0,s0,s3
set_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:185
8001bd88:	34420002 	ori	v0,v0,0x2
8001bd8c:	ae220004 	sw	v0,4(s1)
list_add_after():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:93
 * Insert the new element @elm *after* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_after(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm, listelm->next);
8001bd90:	8e420004 	lw	v0,4(s2)
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
8001bd94:	ae430004 	sw	v1,4(s2)
8001bd98:	ac430000 	sw	v1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
	elm->next = next;
8001bd9c:	ae220014 	sw	v0,20(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->prev = prev;
8001bda0:	ae320010 	sw	s2,16(s1)
buddy_init_memmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:73
			nr_free(order)++;
8001bda4:	8e830000 	lw	v1,0(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:68
		set_page_ref(p, 0);
	}
	p = zones[zone_num++].mem_base = base;
	size_t order = MAX_ORDER, order_size = (1 << order);
	while (n != 0) {
		while (n >= order_size) {
8001bda8:	0213102b 	sltu	v0,s0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:72
			p->property = order;
			SetPageProperty(p);
			list_add(&free_list(order), &(p->page_link));
			n -= order_size, p += order_size;
8001bdac:	02368821 	addu	s1,s1,s6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:73
			nr_free(order)++;
8001bdb0:	24630001 	addiu	v1,v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:68
		set_page_ref(p, 0);
	}
	p = zones[zone_num++].mem_base = base;
	size_t order = MAX_ORDER, order_size = (1 << order);
	while (n != 0) {
		while (n >= order_size) {
8001bdb4:	1440001a 	bnez	v0,8001be20 <buddy_init_memmap+0x188>
8001bdb8:	ae830000 	sw	v1,0(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:69
			p->property = order;
8001bdbc:	ae350008 	sw	s5,8(s1)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8001bdc0:	40026000 	mfc0	v0,c0_status
8001bdc4:	30420001 	andi	v0,v0,0x1
8001bdc8:	1040ffec 	beqz	v0,8001bd7c <buddy_init_memmap+0xe4>
8001bdcc:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8001bdd0:	0c006d04 	jal	8001b410 <intr_disable>
8001bdd4:	00000000 	nop
set_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:185
8001bdd8:	8e220004 	lw	v0,4(s1)
buddy_init_memmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:72
			SetPageProperty(p);
			list_add(&free_list(order), &(p->page_link));
			n -= order_size, p += order_size;
8001bddc:	02138023 	subu	s0,s0,s3
set_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:185
8001bde0:	34420002 	ori	v0,v0,0x2
8001bde4:	ae220004 	sw	v0,4(s1)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8001bde8:	0c006d00 	jal	8001b400 <intr_enable>
8001bdec:	00000000 	nop
list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:93
 * Insert the new element @elm *after* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_after(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm, listelm->next);
8001bdf0:	8e420004 	lw	v0,4(s2)
buddy_init_memmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:71
	size_t order = MAX_ORDER, order_size = (1 << order);
	while (n != 0) {
		while (n >= order_size) {
			p->property = order;
			SetPageProperty(p);
			list_add(&free_list(order), &(p->page_link));
8001bdf4:	26230010 	addiu	v1,s1,16
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
8001bdf8:	ae430004 	sw	v1,4(s2)
8001bdfc:	ac430000 	sw	v1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
	elm->next = next;
8001be00:	ae220014 	sw	v0,20(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->prev = prev;
8001be04:	ae320010 	sw	s2,16(s1)
buddy_init_memmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:73
			n -= order_size, p += order_size;
			nr_free(order)++;
8001be08:	8e830000 	lw	v1,0(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:68
		set_page_ref(p, 0);
	}
	p = zones[zone_num++].mem_base = base;
	size_t order = MAX_ORDER, order_size = (1 << order);
	while (n != 0) {
		while (n >= order_size) {
8001be0c:	0213102b 	sltu	v0,s0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:72
			p->property = order;
			SetPageProperty(p);
			list_add(&free_list(order), &(p->page_link));
			n -= order_size, p += order_size;
8001be10:	02368821 	addu	s1,s1,s6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:73
			nr_free(order)++;
8001be14:	24630001 	addiu	v1,v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:68
		set_page_ref(p, 0);
	}
	p = zones[zone_num++].mem_base = base;
	size_t order = MAX_ORDER, order_size = (1 << order);
	while (n != 0) {
		while (n >= order_size) {
8001be18:	1040ffe8 	beqz	v0,8001bdbc <buddy_init_memmap+0x124>
8001be1c:	ae830000 	sw	v1,0(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:75
			SetPageProperty(p);
			list_add(&free_list(order), &(p->page_link));
			n -= order_size, p += order_size;
			nr_free(order)++;
		}
		order--;
8001be20:	26b5ffff 	addiu	s5,s5,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:76
		order_size >>= 1;
8001be24:	00139842 	srl	s3,s3,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:67
		p->zone_num = zone_num;
		set_page_ref(p, 0);
	}
	p = zones[zone_num++].mem_base = base;
	size_t order = MAX_ORDER, order_size = (1 << order);
	while (n != 0) {
8001be28:	1600ffcc 	bnez	s0,8001bd5c <buddy_init_memmap+0xc4>
8001be2c:	2694fff4 	addiu	s4,s4,-12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:78
			nr_free(order)++;
		}
		order--;
		order_size >>= 1;
	}
}
8001be30:	8fbf0034 	lw	ra,52(sp)
8001be34:	8fb70030 	lw	s7,48(sp)
8001be38:	8fb6002c 	lw	s6,44(sp)
8001be3c:	8fb50028 	lw	s5,40(sp)
8001be40:	8fb40024 	lw	s4,36(sp)
8001be44:	8fb30020 	lw	s3,32(sp)
8001be48:	8fb2001c 	lw	s2,28(sp)
8001be4c:	8fb10018 	lw	s1,24(sp)
8001be50:	8fb00014 	lw	s0,20(sp)
8001be54:	03e00008 	jr	ra
8001be58:	27bd0038 	addiu	sp,sp,56
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8001be5c:	0c006d04 	jal	8001b410 <intr_disable>
8001be60:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8001be64:	8e530004 	lw	s3,4(s2)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8001be68:	0c006d00 	jal	8001b400 <intr_enable>
8001be6c:	32730001 	andi	s3,s3,0x1
8001be70:	08006f41 	j	8001bd04 <buddy_init_memmap+0x6c>
8001be74:	00000000 	nop
buddy_init_memmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:60
{
	static int zone_num = 0;
	assert(n > 0 && zone_num < MAX_ZONE_NUM);
	struct Page *p = base;
	for (; p != base + n; p++) {
		assert(PageReserved(p));
8001be78:	3c048002 	lui	a0,0x8002
8001be7c:	3c068002 	lui	a2,0x8002
8001be80:	3c078002 	lui	a3,0x8002
8001be84:	24844028 	addiu	a0,a0,16424
8001be88:	2405003c 	li	a1,60
8001be8c:	24c60e28 	addiu	a2,a2,3624
8001be90:	0c006b0b 	jal	8001ac2c <__panic>
8001be94:	24e74058 	addiu	a3,a3,16472
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:57

//buddy_init_memmap - build free_list for Page base follow  n continuous pages.
static void buddy_init_memmap(struct Page *base, size_t n)
{
	static int zone_num = 0;
	assert(n > 0 && zone_num < MAX_ZONE_NUM);
8001be98:	3c048002 	lui	a0,0x8002
8001be9c:	3c068002 	lui	a2,0x8002
8001bea0:	3c078002 	lui	a3,0x8002
8001bea4:	24844028 	addiu	a0,a0,16424
8001bea8:	24050039 	li	a1,57
8001beac:	24c60e28 	addiu	a2,a2,3624
8001beb0:	0c006b0b 	jal	8001ac2c <__panic>
8001beb4:	24e74034 	addiu	a3,a3,16436

8001beb8 <buddy_alloc_pages>:
buddy_alloc_pages():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:125
	return NULL;
}

//buddy_alloc_pages - call buddy_alloc_pages_sub to alloc 2^order>=n pages
static struct Page *buddy_alloc_pages(size_t n)
{
8001beb8:	27bdffc0 	addiu	sp,sp,-64
8001bebc:	afbf003c 	sw	ra,60(sp)
8001bec0:	afbe0038 	sw	s8,56(sp)
8001bec4:	afb70034 	sw	s7,52(sp)
8001bec8:	afb60030 	sw	s6,48(sp)
8001becc:	afb5002c 	sw	s5,44(sp)
8001bed0:	afb40028 	sw	s4,40(sp)
8001bed4:	afb30024 	sw	s3,36(sp)
8001bed8:	afb20020 	sw	s2,32(sp)
8001bedc:	afb1001c 	sw	s1,28(sp)
8001bee0:	afb00018 	sw	s0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:126
	assert(n > 0);
8001bee4:	1080009c 	beqz	a0,8001c158 <buddy_alloc_pages+0x2a0>
8001bee8:	00803821 	move	a3,a0
getorder():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:86
static inline size_t getorder(size_t n)
{
	size_t order, order_size;
	for (order = 0, order_size = 1; order <= MAX_ORDER;
	     order++, order_size <<= 1) {
		if (n <= order_size) {
8001beec:	2c820002 	sltiu	v0,a0,2
8001bef0:	14400096 	bnez	v0,8001c14c <buddy_alloc_pages+0x294>
8001bef4:	24020002 	li	v0,2
8001bef8:	24120001 	li	s2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:84

//getorder - return order, the minmal 2^order >= n
static inline size_t getorder(size_t n)
{
	size_t order, order_size;
	for (order = 0, order_size = 1; order <= MAX_ORDER;
8001befc:	2404000b 	li	a0,11
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:86
	     order++, order_size <<= 1) {
		if (n <= order_size) {
8001bf00:	0047182b 	sltu	v1,v0,a3
8001bf04:	1060000a 	beqz	v1,8001bf30 <buddy_alloc_pages+0x78>
8001bf08:	24110001 	li	s1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:85
//getorder - return order, the minmal 2^order >= n
static inline size_t getorder(size_t n)
{
	size_t order, order_size;
	for (order = 0, order_size = 1; order <= MAX_ORDER;
	     order++, order_size <<= 1) {
8001bf0c:	26520001 	addiu	s2,s2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:84

//getorder - return order, the minmal 2^order >= n
static inline size_t getorder(size_t n)
{
	size_t order, order_size;
	for (order = 0, order_size = 1; order <= MAX_ORDER;
8001bf10:	1644fffb 	bne	s2,a0,8001bf00 <buddy_alloc_pages+0x48>
8001bf14:	00021040 	sll	v0,v0,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:90
	     order++, order_size <<= 1) {
		if (n <= order_size) {
			return order;
		}
	}
	panic("getorder failed. %d\n", n);
8001bf18:	3c048002 	lui	a0,0x8002
8001bf1c:	3c068002 	lui	a2,0x8002
8001bf20:	24844028 	addiu	a0,a0,16424
8001bf24:	2405005a 	li	a1,90
8001bf28:	0c006b0b 	jal	8001ac2c <__panic>
8001bf2c:	24c633cc 	addiu	a2,a2,13260
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:86
static inline size_t getorder(size_t n)
{
	size_t order, order_size;
	for (order = 0, order_size = 1; order <= MAX_ORDER;
	     order++, order_size <<= 1) {
		if (n <= order_size) {
8001bf30:	02518804 	sllv	s1,s1,s2
8001bf34:	3c178015 	lui	s7,0x8015
8001bf38:	02401021 	move	v0,s2
8001bf3c:	26f776e0 	addiu	s7,s7,30432
buddy_alloc_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:99
//                      - the remaining free parts insert to other free list
static inline struct Page *buddy_alloc_pages_sub(size_t order)
{
	assert(order <= MAX_ORDER);
	size_t cur_order;
	for (cur_order = order; cur_order <= MAX_ORDER; cur_order++) {
8001bf40:	2405000b 	li	a1,11
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:100
		if (!list_empty(&free_list(cur_order))) {
8001bf44:	00021880 	sll	v1,v0,0x2
8001bf48:	00022100 	sll	a0,v0,0x4
8001bf4c:	00831823 	subu	v1,a0,v1
8001bf50:	02e31821 	addu	v1,s7,v1
list_empty():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:126
 * list_empty - tests whether a list is empty
 * @list:       the list to test.
 * */
static inline bool list_empty(list_entry_t * list)
{
	return list->next == list;
8001bf54:	8c750004 	lw	s5,4(v1)
buddy_alloc_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:100
8001bf58:	54750012 	bnel	v1,s5,8001bfa4 <buddy_alloc_pages+0xec>
8001bf5c:	8c680008 	lw	t0,8(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:99
//                      - the remaining free parts insert to other free list
static inline struct Page *buddy_alloc_pages_sub(size_t order)
{
	assert(order <= MAX_ORDER);
	size_t cur_order;
	for (cur_order = order; cur_order <= MAX_ORDER; cur_order++) {
8001bf60:	24420001 	addiu	v0,v0,1
8001bf64:	5445fff8 	bnel	v0,a1,8001bf48 <buddy_alloc_pages+0x90>
8001bf68:	00021880 	sll	v1,v0,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:120
			}
			ClearPageProperty(page);
			return page;
		}
	}
	return NULL;
8001bf6c:	00008021 	move	s0,zero
buddy_alloc_pages():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:133
	struct Page *page = buddy_alloc_pages_sub(order);
	if (page != NULL && n != order_size) {
		free_pages(page + n, order_size - n);
	}
	return page;
}
8001bf70:	8fbf003c 	lw	ra,60(sp)
8001bf74:	02001021 	move	v0,s0
8001bf78:	8fbe0038 	lw	s8,56(sp)
8001bf7c:	8fb70034 	lw	s7,52(sp)
8001bf80:	8fb60030 	lw	s6,48(sp)
8001bf84:	8fb5002c 	lw	s5,44(sp)
8001bf88:	8fb40028 	lw	s4,40(sp)
8001bf8c:	8fb30024 	lw	s3,36(sp)
8001bf90:	8fb20020 	lw	s2,32(sp)
8001bf94:	8fb1001c 	lw	s1,28(sp)
8001bf98:	8fb00018 	lw	s0,24(sp)
8001bf9c:	03e00008 	jr	ra
8001bfa0:	27bd0040 	addiu	sp,sp,64
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
8001bfa4:	8ea50000 	lw	a1,0(s5)
8001bfa8:	8ea40004 	lw	a0,4(s5)
buddy_alloc_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:103
	size_t cur_order;
	for (cur_order = order; cur_order <= MAX_ORDER; cur_order++) {
		if (!list_empty(&free_list(cur_order))) {
			list_entry_t *le = list_next(&free_list(cur_order));
			struct Page *page = le2page(le, page_link);
			nr_free(cur_order)--;
8001bfac:	2508ffff 	addiu	t0,t0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:106
			list_del(le);
			size_t size = 1 << cur_order;
			while (cur_order > order) {
8001bfb0:	0242302b 	sltu	a2,s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:103
	size_t cur_order;
	for (cur_order = order; cur_order <= MAX_ORDER; cur_order++) {
		if (!list_empty(&free_list(cur_order))) {
			list_entry_t *le = list_next(&free_list(cur_order));
			struct Page *page = le2page(le, page_link);
			nr_free(cur_order)--;
8001bfb4:	ac680008 	sw	t0,8(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:102
	assert(order <= MAX_ORDER);
	size_t cur_order;
	for (cur_order = order; cur_order <= MAX_ORDER; cur_order++) {
		if (!list_empty(&free_list(cur_order))) {
			list_entry_t *le = list_next(&free_list(cur_order));
			struct Page *page = le2page(le, page_link);
8001bfb8:	26b0fff0 	addiu	s0,s5,-16
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
8001bfbc:	aca40004 	sw	a0,4(a1)
buddy_alloc_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:106
			nr_free(cur_order)--;
			list_del(le);
			size_t size = 1 << cur_order;
			while (cur_order > order) {
8001bfc0:	10c0003c 	beqz	a2,8001c0b4 <buddy_alloc_pages+0x1fc>
8001bfc4:	ac850000 	sw	a1,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:112
				cur_order--;
				size >>= 1;
				struct Page *buddy = page + size;
				buddy->property = cur_order;
				SetPageProperty(buddy);
				nr_free(cur_order)++;
8001bfc8:	2454ffff 	addiu	s4,v0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:124
	}
	return NULL;
}

//buddy_alloc_pages - call buddy_alloc_pages_sub to alloc 2^order>=n pages
static struct Page *buddy_alloc_pages(size_t n)
8001bfcc:	00141880 	sll	v1,s4,0x2
8001bfd0:	0014b100 	sll	s6,s4,0x4
8001bfd4:	02c3b023 	subu	s6,s6,v1
8001bfd8:	26d60008 	addiu	s6,s6,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:105
		if (!list_empty(&free_list(cur_order))) {
			list_entry_t *le = list_next(&free_list(cur_order));
			struct Page *page = le2page(le, page_link);
			nr_free(cur_order)--;
			list_del(le);
			size_t size = 1 << cur_order;
8001bfdc:	241e0001 	li	s8,1
8001bfe0:	005ef004 	sllv	s8,s8,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:124
	}
	return NULL;
}

//buddy_alloc_pages - call buddy_alloc_pages_sub to alloc 2^order>=n pages
static struct Page *buddy_alloc_pages(size_t n)
8001bfe4:	0800700e 	j	8001c038 <buddy_alloc_pages+0x180>
8001bfe8:	02f6b021 	addu	s6,s7,s6
set_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:185
 * */
static __always_inline void set_bit(int nr, volatile uint32_t * addr)
{
	int intr_flag;
	local_intr_save(intr_flag);
	*addr |= (1 << nr);
8001bfec:	8e620004 	lw	v0,4(s3)
buddy_alloc_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:113
				size >>= 1;
				struct Page *buddy = page + size;
				buddy->property = cur_order;
				SetPageProperty(buddy);
				nr_free(cur_order)++;
				list_add(&free_list(cur_order),
8001bff0:	00142080 	sll	a0,s4,0x2
set_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:185
8001bff4:	34420002 	ori	v0,v0,0x2
8001bff8:	ae620004 	sw	v0,4(s3)
buddy_alloc_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:112
				cur_order--;
				size >>= 1;
				struct Page *buddy = page + size;
				buddy->property = cur_order;
				SetPageProperty(buddy);
				nr_free(cur_order)++;
8001bffc:	8ec30000 	lw	v1,0(s6)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:113
				list_add(&free_list(cur_order),
8001c000:	00141100 	sll	v0,s4,0x4
8001c004:	00441023 	subu	v0,v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:112
				cur_order--;
				size >>= 1;
				struct Page *buddy = page + size;
				buddy->property = cur_order;
				SetPageProperty(buddy);
				nr_free(cur_order)++;
8001c008:	24630001 	addiu	v1,v1,1
8001c00c:	aec30000 	sw	v1,0(s6)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:113
				list_add(&free_list(cur_order),
8001c010:	02e21021 	addu	v0,s7,v0
list_add_after():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:93
 * Insert the new element @elm *after* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_after(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm, listelm->next);
8001c014:	8c430004 	lw	v1,4(v0)
buddy_alloc_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:113
8001c018:	26640010 	addiu	a0,s3,16
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
8001c01c:	ac440004 	sw	a0,4(v0)
8001c020:	ac640000 	sw	a0,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
	elm->next = next;
8001c024:	ae630014 	sw	v1,20(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->prev = prev;
8001c028:	ae620010 	sw	v0,16(s3)
buddy_alloc_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:106
			list_entry_t *le = list_next(&free_list(cur_order));
			struct Page *page = le2page(le, page_link);
			nr_free(cur_order)--;
			list_del(le);
			size_t size = 1 << cur_order;
			while (cur_order > order) {
8001c02c:	12920021 	beq	s4,s2,8001c0b4 <buddy_alloc_pages+0x1fc>
8001c030:	26d6fff4 	addiu	s6,s6,-12
8001c034:	2694ffff 	addiu	s4,s4,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:108
				cur_order--;
				size >>= 1;
8001c038:	001ef042 	srl	s8,s8,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:109
				struct Page *buddy = page + size;
8001c03c:	001e9940 	sll	s3,s8,0x5
8001c040:	02139821 	addu	s3,s0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:110
				buddy->property = cur_order;
8001c044:	ae740008 	sw	s4,8(s3)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8001c048:	40026000 	mfc0	v0,c0_status
8001c04c:	30420001 	andi	v0,v0,0x1
8001c050:	1040ffe6 	beqz	v0,8001bfec <buddy_alloc_pages+0x134>
8001c054:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8001c058:	0c006d04 	jal	8001b410 <intr_disable>
8001c05c:	afa70010 	sw	a3,16(sp)
set_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:185
8001c060:	8e620004 	lw	v0,4(s3)
8001c064:	34420002 	ori	v0,v0,0x2
8001c068:	ae620004 	sw	v0,4(s3)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8001c06c:	0c006d00 	jal	8001b400 <intr_enable>
8001c070:	00000000 	nop
buddy_alloc_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:112
				SetPageProperty(buddy);
				nr_free(cur_order)++;
8001c074:	8ec30000 	lw	v1,0(s6)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:113
				list_add(&free_list(cur_order),
8001c078:	00142080 	sll	a0,s4,0x2
8001c07c:	00141100 	sll	v0,s4,0x4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:112
				cur_order--;
				size >>= 1;
				struct Page *buddy = page + size;
				buddy->property = cur_order;
				SetPageProperty(buddy);
				nr_free(cur_order)++;
8001c080:	24630001 	addiu	v1,v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:113
				list_add(&free_list(cur_order),
8001c084:	00441023 	subu	v0,v0,a0
8001c088:	8fa70010 	lw	a3,16(sp)
8001c08c:	02e21021 	addu	v0,s7,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:112
				cur_order--;
				size >>= 1;
				struct Page *buddy = page + size;
				buddy->property = cur_order;
				SetPageProperty(buddy);
				nr_free(cur_order)++;
8001c090:	aec30000 	sw	v1,0(s6)
list_add_after():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:93
 * Insert the new element @elm *after* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_after(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm, listelm->next);
8001c094:	8c430004 	lw	v1,4(v0)
buddy_alloc_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:113
				list_add(&free_list(cur_order),
8001c098:	26640010 	addiu	a0,s3,16
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
8001c09c:	ac440004 	sw	a0,4(v0)
8001c0a0:	ac640000 	sw	a0,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
	elm->next = next;
8001c0a4:	ae630014 	sw	v1,20(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->prev = prev;
8001c0a8:	ae620010 	sw	v0,16(s3)
buddy_alloc_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:106
			list_entry_t *le = list_next(&free_list(cur_order));
			struct Page *page = le2page(le, page_link);
			nr_free(cur_order)--;
			list_del(le);
			size_t size = 1 << cur_order;
			while (cur_order > order) {
8001c0ac:	1692ffe1 	bne	s4,s2,8001c034 <buddy_alloc_pages+0x17c>
8001c0b0:	26d6fff4 	addiu	s6,s6,-12
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8001c0b4:	40026000 	mfc0	v0,c0_status
8001c0b8:	30420001 	andi	v0,v0,0x1
8001c0bc:	14400019 	bnez	v0,8001c124 <buddy_alloc_pages+0x26c>
8001c0c0:	00000000 	nop
clear_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:199
 * */
static __always_inline void clear_bit(int nr, volatile uint32_t * addr)
{
	int intr_flag;
	local_intr_save(intr_flag);
	*addr &= ~(1 << nr);
8001c0c4:	8ea3fff4 	lw	v1,-12(s5)
8001c0c8:	2402fffd 	li	v0,-3
8001c0cc:	00621024 	and	v0,v1,v0
8001c0d0:	aea2fff4 	sw	v0,-12(s5)
buddy_alloc_pages():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:129
static struct Page *buddy_alloc_pages(size_t n)
{
	assert(n > 0);
	size_t order = getorder(n), order_size = (1 << order);
	struct Page *page = buddy_alloc_pages_sub(order);
	if (page != NULL && n != order_size) {
8001c0d4:	1200ffa7 	beqz	s0,8001bf74 <buddy_alloc_pages+0xbc>
8001c0d8:	8fbf003c 	lw	ra,60(sp)
8001c0dc:	10f1ffa5 	beq	a3,s1,8001bf74 <buddy_alloc_pages+0xbc>
8001c0e0:	00072140 	sll	a0,a3,0x5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:130
		free_pages(page + n, order_size - n);
8001c0e4:	02042021 	addu	a0,s0,a0
8001c0e8:	0c007441 	jal	8001d104 <free_pages>
8001c0ec:	02272823 	subu	a1,s1,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:133
	}
	return page;
}
8001c0f0:	8fbf003c 	lw	ra,60(sp)
8001c0f4:	02001021 	move	v0,s0
8001c0f8:	8fbe0038 	lw	s8,56(sp)
8001c0fc:	8fb70034 	lw	s7,52(sp)
8001c100:	8fb60030 	lw	s6,48(sp)
8001c104:	8fb5002c 	lw	s5,44(sp)
8001c108:	8fb40028 	lw	s4,40(sp)
8001c10c:	8fb30024 	lw	s3,36(sp)
8001c110:	8fb20020 	lw	s2,32(sp)
8001c114:	8fb1001c 	lw	s1,28(sp)
8001c118:	8fb00018 	lw	s0,24(sp)
8001c11c:	03e00008 	jr	ra
8001c120:	27bd0040 	addiu	sp,sp,64
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8001c124:	0c006d04 	jal	8001b410 <intr_disable>
8001c128:	afa70010 	sw	a3,16(sp)
clear_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:199
8001c12c:	8ea3fff4 	lw	v1,-12(s5)
8001c130:	2402fffd 	li	v0,-3
8001c134:	00621024 	and	v0,v1,v0
8001c138:	aea2fff4 	sw	v0,-12(s5)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8001c13c:	0c006d00 	jal	8001b400 <intr_enable>
8001c140:	00000000 	nop
8001c144:	08007035 	j	8001c0d4 <buddy_alloc_pages+0x21c>
8001c148:	8fa70010 	lw	a3,16(sp)
getorder():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:86
static inline size_t getorder(size_t n)
{
	size_t order, order_size;
	for (order = 0, order_size = 1; order <= MAX_ORDER;
	     order++, order_size <<= 1) {
		if (n <= order_size) {
8001c14c:	24110001 	li	s1,1
8001c150:	08006fcd 	j	8001bf34 <buddy_alloc_pages+0x7c>
8001c154:	00009021 	move	s2,zero
buddy_alloc_pages():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:126
}

//buddy_alloc_pages - call buddy_alloc_pages_sub to alloc 2^order>=n pages
static struct Page *buddy_alloc_pages(size_t n)
{
	assert(n > 0);
8001c158:	3c048002 	lui	a0,0x8002
8001c15c:	3c068002 	lui	a2,0x8002
8001c160:	3c078002 	lui	a3,0x8002
8001c164:	24844028 	addiu	a0,a0,16424
8001c168:	2405007e 	li	a1,126
8001c16c:	24c60e28 	addiu	a2,a2,3624
8001c170:	0c006b0b 	jal	8001ac2c <__panic>
8001c174:	24e74068 	addiu	a3,a3,16488

8001c178 <buddy_check>:
buddy_check():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:234
	return ret;
}

//buddy_check - check the correctness of buddy system
static void buddy_check(void)
{
8001c178:	27bdff38 	addiu	sp,sp,-200
8001c17c:	afb400b0 	sw	s4,176(sp)
8001c180:	3c148015 	lui	s4,0x8015
8001c184:	afbe00c0 	sw	s8,192(sp)
8001c188:	afb500b4 	sw	s5,180(sp)
8001c18c:	afb100a4 	sw	s1,164(sp)
8001c190:	afb000a0 	sw	s0,160(sp)
8001c194:	afbf00c4 	sw	ra,196(sp)
8001c198:	afb700bc 	sw	s7,188(sp)
8001c19c:	afb600b8 	sw	s6,184(sp)
8001c1a0:	afb300ac 	sw	s3,172(sp)
8001c1a4:	afb200a8 	sw	s2,168(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:236
	int i;
	int count = 0, total = 0;
8001c1a8:	00008021 	move	s0,zero
8001c1ac:	00008821 	move	s1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:237
	for (i = 0; i <= MAX_ORDER; i++) {
8001c1b0:	0000a821 	move	s5,zero
8001c1b4:	269476e0 	addiu	s4,s4,30432
8001c1b8:	241e000b 	li	s8,11
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:238
		list_entry_t *list = &free_list(i), *le = list;
8001c1bc:	0015b080 	sll	s6,s5,0x2
8001c1c0:	00151100 	sll	v0,s5,0x4
8001c1c4:	0056b023 	subu	s6,v0,s6
8001c1c8:	0296b021 	addu	s6,s4,s6
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
8001c1cc:	8ed20004 	lw	s2,4(s6)
buddy_check():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:239
		while ((le = list_next(le)) != list) {
8001c1d0:	12d20011 	beq	s6,s2,8001c218 <buddy_check+0xa0>
8001c1d4:	24020001 	li	v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:242
			struct Page *p = le2page(le, page_link);
			assert(PageProperty(p) && p->property == i);
			count++, total += (1 << i);
8001c1d8:	02a2b804 	sllv	s7,v0,s5
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8001c1dc:	40026000 	mfc0	v0,c0_status
8001c1e0:	30420001 	andi	v0,v0,0x1
8001c1e4:	14400119 	bnez	v0,8001c64c <buddy_check+0x4d4>
8001c1e8:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8001c1ec:	8e53fff4 	lw	s3,-12(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8001c1f0:	7e730040 	ext	s3,s3,0x1,0x1
buddy_check():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:241
	int count = 0, total = 0;
	for (i = 0; i <= MAX_ORDER; i++) {
		list_entry_t *list = &free_list(i), *le = list;
		while ((le = list_next(le)) != list) {
			struct Page *p = le2page(le, page_link);
			assert(PageProperty(p) && p->property == i);
8001c1f4:	1260011d 	beqz	s3,8001c66c <buddy_check+0x4f4>
8001c1f8:	3c048002 	lui	a0,0x8002
8001c1fc:	8e42fff8 	lw	v0,-8(s2)
8001c200:	1455011a 	bne	v0,s5,8001c66c <buddy_check+0x4f4>
8001c204:	3c048002 	lui	a0,0x8002
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
8001c208:	8e520004 	lw	s2,4(s2)
buddy_check():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:242
			count++, total += (1 << i);
8001c20c:	26310001 	addiu	s1,s1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:239
{
	int i;
	int count = 0, total = 0;
	for (i = 0; i <= MAX_ORDER; i++) {
		list_entry_t *list = &free_list(i), *le = list;
		while ((le = list_next(le)) != list) {
8001c210:	16d2fff2 	bne	s6,s2,8001c1dc <buddy_check+0x64>
8001c214:	02178021 	addu	s0,s0,s7
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:237
//buddy_check - check the correctness of buddy system
static void buddy_check(void)
{
	int i;
	int count = 0, total = 0;
	for (i = 0; i <= MAX_ORDER; i++) {
8001c218:	26b50001 	addiu	s5,s5,1
8001c21c:	56beffe8 	bnel	s5,s8,8001c1c0 <buddy_check+0x48>
8001c220:	0015b080 	sll	s6,s5,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:245
			struct Page *p = le2page(le, page_link);
			assert(PageProperty(p) && p->property == i);
			count++, total += (1 << i);
		}
	}
	assert(total == nr_free_pages());
8001c224:	0c00745f 	jal	8001d17c <nr_free_pages>
8001c228:	00000000 	nop
8001c22c:	1602017e 	bne	s0,v0,8001c828 <buddy_check+0x6b0>
8001c230:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:247

	struct Page *p0 = alloc_pages(8), *buddy = alloc_pages(8), *p1;
8001c234:	0c007425 	jal	8001d094 <alloc_pages>
8001c238:	24040008 	li	a0,8
8001c23c:	24040008 	li	a0,8
8001c240:	0c007425 	jal	8001d094 <alloc_pages>
8001c244:	0040a821 	move	s5,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:249

	assert(p0 != NULL);
8001c248:	12a0016f 	beqz	s5,8001c808 <buddy_check+0x690>
8001c24c:	0040b821 	move	s7,v0
page2idx():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:151
}

//page2idx - get the related index number idx of continuous page block which this page belongs to 
static ppn_t page2idx(struct Page *page)
{
	return page - zones[page->zone_num].mem_base;
8001c250:	8ea3000c 	lw	v1,12(s5)
8001c254:	3c028015 	lui	v0,0x8015
8001c258:	244276b8 	addiu	v0,v0,30392
8001c25c:	00031880 	sll	v1,v1,0x2
8001c260:	00621021 	addu	v0,v1,v0
8001c264:	8c420000 	lw	v0,0(v0)
8001c268:	02a21023 	subu	v0,s5,v0
buddy_check():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:250
	assert(total == nr_free_pages());

	struct Page *p0 = alloc_pages(8), *buddy = alloc_pages(8), *p1;

	assert(p0 != NULL);
	assert((page2idx(p0) & 7) == 0);
8001c26c:	7c421140 	ext	v0,v0,0x5,0x3
8001c270:	1440015e 	bnez	v0,8001c7ec <buddy_check+0x674>
8001c274:	3c048002 	lui	a0,0x8002
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8001c278:	40026000 	mfc0	v0,c0_status
8001c27c:	30420001 	andi	v0,v0,0x1
8001c280:	14400101 	bnez	v0,8001c688 <buddy_check+0x510>
8001c284:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8001c288:	8eb20004 	lw	s2,4(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8001c28c:	7e520040 	ext	s2,s2,0x1,0x1
buddy_check():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:251
	assert(!PageProperty(p0));
8001c290:	16400168 	bnez	s2,8001c834 <buddy_check+0x6bc>
8001c294:	27b2003c 	addiu	s2,sp,60
8001c298:	27b30010 	addiu	s3,sp,16
8001c29c:	3c028015 	lui	v0,0x8015
8001c2a0:	244276e8 	addiu	v0,v0,30440
8001c2a4:	02603021 	move	a2,s3
8001c2a8:	02402821 	move	a1,s2
8001c2ac:	00001821 	move	v1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:256

	list_entry_t free_lists_store[MAX_ORDER + 1];
	unsigned int nr_free_store[MAX_ORDER + 1];

	for (i = 0; i <= MAX_ORDER; i++) {
8001c2b0:	2409000b 	li	t1,11
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:258
		free_lists_store[i] = free_list(i);
		list_init(&free_list(i));
8001c2b4:	00033900 	sll	a3,v1,0x4
8001c2b8:	00032080 	sll	a0,v1,0x2
8001c2bc:	00e42023 	subu	a0,a3,a0
8001c2c0:	02842021 	addu	a0,s4,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:257

	list_entry_t free_lists_store[MAX_ORDER + 1];
	unsigned int nr_free_store[MAX_ORDER + 1];

	for (i = 0; i <= MAX_ORDER; i++) {
		free_lists_store[i] = free_list(i);
8001c2c4:	8c48fff8 	lw	t0,-8(v0)
8001c2c8:	8c47fffc 	lw	a3,-4(v0)
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
 * list_init - initialize a new entry
 * @elm:        new entry to be initialized
 * */
static inline void list_init(list_entry_t * elm)
{
	elm->prev = elm->next = elm;
8001c2cc:	ac840004 	sw	a0,4(a0)
8001c2d0:	ac840000 	sw	a0,0(a0)
buddy_check():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:260
		list_init(&free_list(i));
		assert(list_empty(&free_list(i)));
		nr_free_store[i] = nr_free(i);
8001c2d4:	8c440000 	lw	a0,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:256
	assert(!PageProperty(p0));

	list_entry_t free_lists_store[MAX_ORDER + 1];
	unsigned int nr_free_store[MAX_ORDER + 1];

	for (i = 0; i <= MAX_ORDER; i++) {
8001c2d8:	24630001 	addiu	v1,v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:257
		free_lists_store[i] = free_list(i);
8001c2dc:	aca80000 	sw	t0,0(a1)
8001c2e0:	aca70004 	sw	a3,4(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:260
		list_init(&free_list(i));
		assert(list_empty(&free_list(i)));
		nr_free_store[i] = nr_free(i);
8001c2e4:	acc40000 	sw	a0,0(a2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:261
		nr_free(i) = 0;
8001c2e8:	ac400000 	sw	zero,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:256
	assert(!PageProperty(p0));

	list_entry_t free_lists_store[MAX_ORDER + 1];
	unsigned int nr_free_store[MAX_ORDER + 1];

	for (i = 0; i <= MAX_ORDER; i++) {
8001c2ec:	24a50008 	addiu	a1,a1,8
8001c2f0:	2442000c 	addiu	v0,v0,12
8001c2f4:	1469ffef 	bne	v1,t1,8001c2b4 <buddy_check+0x13c>
8001c2f8:	24c60004 	addiu	a2,a2,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:264
		assert(list_empty(&free_list(i)));
		nr_free_store[i] = nr_free(i);
		nr_free(i) = 0;
	}

	assert(nr_free_pages() == 0);
8001c2fc:	0c00745f 	jal	8001d17c <nr_free_pages>
8001c300:	00000000 	nop
8001c304:	14400153 	bnez	v0,8001c854 <buddy_check+0x6dc>
8001c308:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:265
	assert(alloc_page() == NULL);
8001c30c:	0c007425 	jal	8001d094 <alloc_pages>
8001c310:	24040001 	li	a0,1
8001c314:	14400156 	bnez	v0,8001c870 <buddy_check+0x6f8>
8001c318:	02a02021 	move	a0,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:266
	free_pages(p0, 8);
8001c31c:	0c007441 	jal	8001d104 <free_pages>
8001c320:	24050008 	li	a1,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:267
	assert(nr_free_pages() == 8);
8001c324:	0c00745f 	jal	8001d17c <nr_free_pages>
8001c328:	00000000 	nop
8001c32c:	24030008 	li	v1,8
8001c330:	14430157 	bne	v0,v1,8001c890 <buddy_check+0x718>
8001c334:	3c048002 	lui	a0,0x8002
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8001c338:	40026000 	mfc0	v0,c0_status
8001c33c:	30420001 	andi	v0,v0,0x1
8001c340:	1440010d 	bnez	v0,8001c778 <buddy_check+0x600>
8001c344:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8001c348:	8eb60004 	lw	s6,4(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8001c34c:	7ed60040 	ext	s6,s6,0x1,0x1
buddy_check():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:268
	assert(PageProperty(p0) && p0->property == 3);
8001c350:	12c00156 	beqz	s6,8001c8ac <buddy_check+0x734>
8001c354:	24020003 	li	v0,3
8001c358:	8ea30008 	lw	v1,8(s5)
8001c35c:	14620154 	bne	v1,v0,8001c8b0 <buddy_check+0x738>
8001c360:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:269
	assert((p0 = alloc_pages(6)) != NULL && !PageProperty(p0)
8001c364:	0c007425 	jal	8001d094 <alloc_pages>
8001c368:	24040006 	li	a0,6
8001c36c:	10400157 	beqz	v0,8001c8cc <buddy_check+0x754>
8001c370:	0040a821 	move	s5,v0
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8001c374:	40026000 	mfc0	v0,c0_status
8001c378:	30420001 	andi	v0,v0,0x1
8001c37c:	144000f7 	bnez	v0,8001c75c <buddy_check+0x5e4>
8001c380:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8001c384:	8eb60004 	lw	s6,4(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8001c388:	7ed60040 	ext	s6,s6,0x1,0x1
buddy_check():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:269
8001c38c:	16c00150 	bnez	s6,8001c8d0 <buddy_check+0x758>
8001c390:	3c048002 	lui	a0,0x8002
8001c394:	0c00745f 	jal	8001d17c <nr_free_pages>
8001c398:	00000000 	nop
8001c39c:	24030002 	li	v1,2
8001c3a0:	1443014b 	bne	v0,v1,8001c8d0 <buddy_check+0x758>
8001c3a4:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:272
	       && nr_free_pages() == 2);

	assert((p1 = alloc_pages(2)) != NULL && p1 == p0 + 6);
8001c3a8:	0c007425 	jal	8001d094 <alloc_pages>
8001c3ac:	24040002 	li	a0,2
8001c3b0:	1040014e 	beqz	v0,8001c8ec <buddy_check+0x774>
8001c3b4:	0040b021 	move	s6,v0
8001c3b8:	26a200c0 	addiu	v0,s5,192
8001c3bc:	16c2014c 	bne	s6,v0,8001c8f0 <buddy_check+0x778>
8001c3c0:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:273
	assert(nr_free_pages() == 0);
8001c3c4:	0c00745f 	jal	8001d17c <nr_free_pages>
8001c3c8:	00000000 	nop
8001c3cc:	1440014f 	bnez	v0,8001c90c <buddy_check+0x794>
8001c3d0:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:275

	free_pages(p0, 3);
8001c3d4:	02a02021 	move	a0,s5
8001c3d8:	0c007441 	jal	8001d104 <free_pages>
8001c3dc:	24050003 	li	a1,3
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8001c3e0:	40026000 	mfc0	v0,c0_status
8001c3e4:	30420001 	andi	v0,v0,0x1
8001c3e8:	144000d5 	bnez	v0,8001c740 <buddy_check+0x5c8>
8001c3ec:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8001c3f0:	8ebe0004 	lw	s8,4(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8001c3f4:	7fde0040 	ext	s8,s8,0x1,0x1
buddy_check():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:276
	assert(PageProperty(p0) && p0->property == 1);
8001c3f8:	13c00147 	beqz	s8,8001c918 <buddy_check+0x7a0>
8001c3fc:	24020001 	li	v0,1
8001c400:	8ea30008 	lw	v1,8(s5)
8001c404:	14620145 	bne	v1,v0,8001c91c <buddy_check+0x7a4>
8001c408:	3c048002 	lui	a0,0x8002
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8001c40c:	40026000 	mfc0	v0,c0_status
8001c410:	30420001 	andi	v0,v0,0x1
8001c414:	144000c3 	bnez	v0,8001c724 <buddy_check+0x5ac>
8001c418:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8001c41c:	8ebe0044 	lw	s8,68(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8001c420:	7fde0040 	ext	s8,s8,0x1,0x1
buddy_check():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:277
	assert(PageProperty(p0 + 2) && p0[2].property == 0);
8001c424:	13c00144 	beqz	s8,8001c938 <buddy_check+0x7c0>
8001c428:	3c048002 	lui	a0,0x8002
8001c42c:	8ea20048 	lw	v0,72(s5)
8001c430:	14400142 	bnez	v0,8001c93c <buddy_check+0x7c4>
8001c434:	3c068002 	lui	a2,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:279

	free_pages(p0 + 3, 3);
8001c438:	26a40060 	addiu	a0,s5,96
8001c43c:	0c007441 	jal	8001d104 <free_pages>
8001c440:	24050003 	li	a1,3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:280
	free_pages(p1, 2);
8001c444:	02c02021 	move	a0,s6
8001c448:	0c007441 	jal	8001d104 <free_pages>
8001c44c:	24050002 	li	a1,2
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8001c450:	40026000 	mfc0	v0,c0_status
8001c454:	30420001 	andi	v0,v0,0x1
8001c458:	144000ab 	bnez	v0,8001c708 <buddy_check+0x590>
8001c45c:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8001c460:	8eb60004 	lw	s6,4(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8001c464:	7ed60040 	ext	s6,s6,0x1,0x1
buddy_check():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:282

	assert(PageProperty(p0) && p0->property == 3);
8001c468:	12c0013a 	beqz	s6,8001c954 <buddy_check+0x7dc>
8001c46c:	24020003 	li	v0,3
8001c470:	8ea30008 	lw	v1,8(s5)
8001c474:	14620138 	bne	v1,v0,8001c958 <buddy_check+0x7e0>
8001c478:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:284

	assert((p0 = alloc_pages(6)) != NULL);
8001c47c:	0c007425 	jal	8001d094 <alloc_pages>
8001c480:	24040006 	li	a0,6
8001c484:	10400137 	beqz	v0,8001c964 <buddy_check+0x7ec>
8001c488:	0040a821 	move	s5,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:285
	assert((p1 = alloc_pages(2)) != NULL);
8001c48c:	0c007425 	jal	8001d094 <alloc_pages>
8001c490:	24040002 	li	a0,2
8001c494:	5040013b 	beqzl	v0,8001c984 <buddy_check+0x80c>
8001c498:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:286
	free_pages(p0 + 4, 2);
8001c49c:	26a40080 	addiu	a0,s5,128
8001c4a0:	24050002 	li	a1,2
8001c4a4:	0c007441 	jal	8001d104 <free_pages>
8001c4a8:	afa20098 	sw	v0,152(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:287
	free_pages(p1, 2);
8001c4ac:	8fa20098 	lw	v0,152(sp)
8001c4b0:	24050002 	li	a1,2
8001c4b4:	0c007441 	jal	8001d104 <free_pages>
8001c4b8:	00402021 	move	a0,v0
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8001c4bc:	40026000 	mfc0	v0,c0_status
8001c4c0:	30420001 	andi	v0,v0,0x1
8001c4c4:	14400089 	bnez	v0,8001c6ec <buddy_check+0x574>
8001c4c8:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8001c4cc:	8eb60084 	lw	s6,132(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8001c4d0:	7ed60040 	ext	s6,s6,0x1,0x1
buddy_check():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:290

	p1 = p0 + 4;
	assert(PageProperty(p1) && p1->property == 2);
8001c4d4:	12c00132 	beqz	s6,8001c9a0 <buddy_check+0x828>
8001c4d8:	24020002 	li	v0,2
8001c4dc:	8ea30088 	lw	v1,136(s5)
8001c4e0:	14620130 	bne	v1,v0,8001c9a4 <buddy_check+0x82c>
8001c4e4:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:291
	free_pages(p0, 4);
8001c4e8:	02a02021 	move	a0,s5
8001c4ec:	0c007441 	jal	8001d104 <free_pages>
8001c4f0:	24050004 	li	a1,4
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8001c4f4:	40026000 	mfc0	v0,c0_status
8001c4f8:	30420001 	andi	v0,v0,0x1
8001c4fc:	14400074 	bnez	v0,8001c6d0 <buddy_check+0x558>
8001c500:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8001c504:	8eb60004 	lw	s6,4(s5)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8001c508:	7ed60040 	ext	s6,s6,0x1,0x1
buddy_check():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:292
	assert(PageProperty(p0) && p0->property == 3);
8001c50c:	12c0012c 	beqz	s6,8001c9c0 <buddy_check+0x848>
8001c510:	24020003 	li	v0,3
8001c514:	8ea30008 	lw	v1,8(s5)
8001c518:	1462012a 	bne	v1,v0,8001c9c4 <buddy_check+0x84c>
8001c51c:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:294

	assert((p0 = alloc_pages(8)) != NULL);
8001c520:	0c007425 	jal	8001d094 <alloc_pages>
8001c524:	24040008 	li	a0,8
8001c528:	10400129 	beqz	v0,8001c9d0 <buddy_check+0x858>
8001c52c:	0040a821 	move	s5,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:295
	assert(alloc_page() == NULL && nr_free_pages() == 0);
8001c530:	0c007425 	jal	8001d094 <alloc_pages>
8001c534:	24040001 	li	a0,1
8001c538:	1440012e 	bnez	v0,8001c9f4 <buddy_check+0x87c>
8001c53c:	3c048002 	lui	a0,0x8002
8001c540:	0c00745f 	jal	8001d17c <nr_free_pages>
8001c544:	00000000 	nop
8001c548:	14400129 	bnez	v0,8001c9f0 <buddy_check+0x878>
8001c54c:	02801021 	move	v0,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:233
	}
	return ret;
}

//buddy_check - check the correctness of buddy system
static void buddy_check(void)
8001c550:	26860084 	addiu	a2,s4,132
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:298

	assert((p0 = alloc_pages(8)) != NULL);
	assert(alloc_page() == NULL && nr_free_pages() == 0);

	for (i = 0; i <= MAX_ORDER; i++) {
		free_list(i) = free_lists_store[i];
8001c554:	8e450000 	lw	a1,0(s2)
8001c558:	8e440004 	lw	a0,4(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:299
		nr_free(i) = nr_free_store[i];
8001c55c:	8e630000 	lw	v1,0(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:298

	assert((p0 = alloc_pages(8)) != NULL);
	assert(alloc_page() == NULL && nr_free_pages() == 0);

	for (i = 0; i <= MAX_ORDER; i++) {
		free_list(i) = free_lists_store[i];
8001c560:	ac450000 	sw	a1,0(v0)
8001c564:	ac440004 	sw	a0,4(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:299
		nr_free(i) = nr_free_store[i];
8001c568:	ac430008 	sw	v1,8(v0)
8001c56c:	2442000c 	addiu	v0,v0,12
8001c570:	26520008 	addiu	s2,s2,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:297
	assert(PageProperty(p0) && p0->property == 3);

	assert((p0 = alloc_pages(8)) != NULL);
	assert(alloc_page() == NULL && nr_free_pages() == 0);

	for (i = 0; i <= MAX_ORDER; i++) {
8001c574:	1446fff7 	bne	v0,a2,8001c554 <buddy_check+0x3dc>
8001c578:	26730004 	addiu	s3,s3,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:302
		free_list(i) = free_lists_store[i];
		nr_free(i) = nr_free_store[i];
	}

	free_pages(p0, 8);
8001c57c:	24050008 	li	a1,8
8001c580:	0c007441 	jal	8001d104 <free_pages>
8001c584:	02a02021 	move	a0,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:303
	free_pages(buddy, 8);
8001c588:	02e02021 	move	a0,s7
8001c58c:	0c007441 	jal	8001d104 <free_pages>
8001c590:	24050008 	li	a1,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:305

	assert(total == nr_free_pages());
8001c594:	0c00745f 	jal	8001d17c <nr_free_pages>
8001c598:	00009021 	move	s2,zero
8001c59c:	1602007d 	bne	s0,v0,8001c794 <buddy_check+0x61c>
8001c5a0:	241e000b 	li	s8,11
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:308

	for (i = 0; i <= MAX_ORDER; i++) {
		list_entry_t *list = &free_list(i), *le = list;
8001c5a4:	0012b080 	sll	s6,s2,0x2
8001c5a8:	00121100 	sll	v0,s2,0x4
8001c5ac:	0056b023 	subu	s6,v0,s6
8001c5b0:	0296b021 	addu	s6,s4,s6
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
 * list_next - get the next entry
 * @listelm:    the list head
 **/
static list_entry_t *list_next(list_entry_t * listelm)
{
	return listelm->next;
8001c5b4:	8ed30004 	lw	s3,4(s6)
buddy_check():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:309
		while ((le = list_next(le)) != list) {
8001c5b8:	12d30012 	beq	s6,s3,8001c604 <buddy_check+0x48c>
8001c5bc:	24020001 	li	v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:312
			struct Page *p = le2page(le, page_link);
			assert(PageProperty(p) && p->property == i);
			count--, total -= (1 << i);
8001c5c0:	0242b804 	sllv	s7,v0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:233
	}
	return ret;
}

//buddy_check - check the correctness of buddy system
static void buddy_check(void)
8001c5c4:	0017b823 	negu	s7,s7
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8001c5c8:	40026000 	mfc0	v0,c0_status
8001c5cc:	30420001 	andi	v0,v0,0x1
8001c5d0:	14400034 	bnez	v0,8001c6a4 <buddy_check+0x52c>
8001c5d4:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8001c5d8:	8e75fff4 	lw	s5,-12(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8001c5dc:	7eb50040 	ext	s5,s5,0x1,0x1
buddy_check():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:311

	for (i = 0; i <= MAX_ORDER; i++) {
		list_entry_t *list = &free_list(i), *le = list;
		while ((le = list_next(le)) != list) {
			struct Page *p = le2page(le, page_link);
			assert(PageProperty(p) && p->property == i);
8001c5e0:	12a00038 	beqz	s5,8001c6c4 <buddy_check+0x54c>
8001c5e4:	3c048002 	lui	a0,0x8002
8001c5e8:	8e62fff8 	lw	v0,-8(s3)
8001c5ec:	14520035 	bne	v0,s2,8001c6c4 <buddy_check+0x54c>
8001c5f0:	3c048002 	lui	a0,0x8002
list_next():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:135
8001c5f4:	8e730004 	lw	s3,4(s3)
buddy_check():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:312
			count--, total -= (1 << i);
8001c5f8:	2631ffff 	addiu	s1,s1,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:309

	assert(total == nr_free_pages());

	for (i = 0; i <= MAX_ORDER; i++) {
		list_entry_t *list = &free_list(i), *le = list;
		while ((le = list_next(le)) != list) {
8001c5fc:	16d3fff2 	bne	s6,s3,8001c5c8 <buddy_check+0x450>
8001c600:	02178021 	addu	s0,s0,s7
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:307
	free_pages(p0, 8);
	free_pages(buddy, 8);

	assert(total == nr_free_pages());

	for (i = 0; i <= MAX_ORDER; i++) {
8001c604:	26520001 	addiu	s2,s2,1
8001c608:	565effe7 	bnel	s2,s8,8001c5a8 <buddy_check+0x430>
8001c60c:	0012b080 	sll	s6,s2,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:315
			struct Page *p = le2page(le, page_link);
			assert(PageProperty(p) && p->property == i);
			count--, total -= (1 << i);
		}
	}
	assert(count == 0);
8001c610:	16200068 	bnez	s1,8001c7b4 <buddy_check+0x63c>
8001c614:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:316
	assert(total == 0);
8001c618:	1600006d 	bnez	s0,8001c7d0 <buddy_check+0x658>
8001c61c:	8fbf00c4 	lw	ra,196(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:317
}
8001c620:	8fbe00c0 	lw	s8,192(sp)
8001c624:	8fb700bc 	lw	s7,188(sp)
8001c628:	8fb600b8 	lw	s6,184(sp)
8001c62c:	8fb500b4 	lw	s5,180(sp)
8001c630:	8fb400b0 	lw	s4,176(sp)
8001c634:	8fb300ac 	lw	s3,172(sp)
8001c638:	8fb200a8 	lw	s2,168(sp)
8001c63c:	8fb100a4 	lw	s1,164(sp)
8001c640:	8fb000a0 	lw	s0,160(sp)
8001c644:	03e00008 	jr	ra
8001c648:	27bd00c8 	addiu	sp,sp,200
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8001c64c:	0c006d04 	jal	8001b410 <intr_disable>
8001c650:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8001c654:	8e53fff4 	lw	s3,-12(s2)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8001c658:	0c006d00 	jal	8001b400 <intr_enable>
8001c65c:	7e730040 	ext	s3,s3,0x1,0x1
buddy_check():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:241
	int count = 0, total = 0;
	for (i = 0; i <= MAX_ORDER; i++) {
		list_entry_t *list = &free_list(i), *le = list;
		while ((le = list_next(le)) != list) {
			struct Page *p = le2page(le, page_link);
			assert(PageProperty(p) && p->property == i);
8001c660:	5660fee7 	bnezl	s3,8001c200 <buddy_check+0x88>
8001c664:	8e42fff8 	lw	v0,-8(s2)
8001c668:	3c048002 	lui	a0,0x8002
8001c66c:	24844028 	addiu	a0,a0,16424
8001c670:	240500f1 	li	a1,241
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:311

	for (i = 0; i <= MAX_ORDER; i++) {
		list_entry_t *list = &free_list(i), *le = list;
		while ((le = list_next(le)) != list) {
			struct Page *p = le2page(le, page_link);
			assert(PageProperty(p) && p->property == i);
8001c674:	3c068002 	lui	a2,0x8002
8001c678:	3c078002 	lui	a3,0x8002
8001c67c:	24c60e28 	addiu	a2,a2,3624
8001c680:	0c006b0b 	jal	8001ac2c <__panic>
8001c684:	24e74070 	addiu	a3,a3,16496
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8001c688:	0c006d04 	jal	8001b410 <intr_disable>
8001c68c:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
8001c690:	8eb20004 	lw	s2,4(s5)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8001c694:	0c006d00 	jal	8001b400 <intr_enable>
8001c698:	7e520040 	ext	s2,s2,0x1,0x1
8001c69c:	080070a4 	j	8001c290 <buddy_check+0x118>
8001c6a0:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8001c6a4:	0c006d04 	jal	8001b410 <intr_disable>
8001c6a8:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
8001c6ac:	8e75fff4 	lw	s5,-12(s3)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8001c6b0:	0c006d00 	jal	8001b400 <intr_enable>
8001c6b4:	7eb50040 	ext	s5,s5,0x1,0x1
buddy_check():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:311
8001c6b8:	56a0ffcc 	bnezl	s5,8001c5ec <buddy_check+0x474>
8001c6bc:	8e62fff8 	lw	v0,-8(s3)
8001c6c0:	3c048002 	lui	a0,0x8002
8001c6c4:	24844028 	addiu	a0,a0,16424
8001c6c8:	0800719d 	j	8001c674 <buddy_check+0x4fc>
8001c6cc:	24050137 	li	a1,311
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8001c6d0:	0c006d04 	jal	8001b410 <intr_disable>
8001c6d4:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
8001c6d8:	8eb60004 	lw	s6,4(s5)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8001c6dc:	0c006d00 	jal	8001b400 <intr_enable>
8001c6e0:	7ed60040 	ext	s6,s6,0x1,0x1
8001c6e4:	08007143 	j	8001c50c <buddy_check+0x394>
8001c6e8:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8001c6ec:	0c006d04 	jal	8001b410 <intr_disable>
8001c6f0:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
8001c6f4:	8eb60084 	lw	s6,132(s5)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8001c6f8:	0c006d00 	jal	8001b400 <intr_enable>
8001c6fc:	7ed60040 	ext	s6,s6,0x1,0x1
8001c700:	08007135 	j	8001c4d4 <buddy_check+0x35c>
8001c704:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8001c708:	0c006d04 	jal	8001b410 <intr_disable>
8001c70c:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
8001c710:	8eb60004 	lw	s6,4(s5)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8001c714:	0c006d00 	jal	8001b400 <intr_enable>
8001c718:	7ed60040 	ext	s6,s6,0x1,0x1
8001c71c:	0800711a 	j	8001c468 <buddy_check+0x2f0>
8001c720:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8001c724:	0c006d04 	jal	8001b410 <intr_disable>
8001c728:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
8001c72c:	8ebe0044 	lw	s8,68(s5)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8001c730:	0c006d00 	jal	8001b400 <intr_enable>
8001c734:	7fde0040 	ext	s8,s8,0x1,0x1
8001c738:	08007109 	j	8001c424 <buddy_check+0x2ac>
8001c73c:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8001c740:	0c006d04 	jal	8001b410 <intr_disable>
8001c744:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
8001c748:	8ebe0004 	lw	s8,4(s5)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8001c74c:	0c006d00 	jal	8001b400 <intr_enable>
8001c750:	7fde0040 	ext	s8,s8,0x1,0x1
8001c754:	080070fe 	j	8001c3f8 <buddy_check+0x280>
8001c758:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8001c75c:	0c006d04 	jal	8001b410 <intr_disable>
8001c760:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
8001c764:	8eb60004 	lw	s6,4(s5)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8001c768:	0c006d00 	jal	8001b400 <intr_enable>
8001c76c:	7ed60040 	ext	s6,s6,0x1,0x1
8001c770:	080070e3 	j	8001c38c <buddy_check+0x214>
8001c774:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8001c778:	0c006d04 	jal	8001b410 <intr_disable>
8001c77c:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
8001c780:	8eb60004 	lw	s6,4(s5)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8001c784:	0c006d00 	jal	8001b400 <intr_enable>
8001c788:	7ed60040 	ext	s6,s6,0x1,0x1
8001c78c:	080070d4 	j	8001c350 <buddy_check+0x1d8>
8001c790:	00000000 	nop
buddy_check():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:305
	}

	free_pages(p0, 8);
	free_pages(buddy, 8);

	assert(total == nr_free_pages());
8001c794:	3c048002 	lui	a0,0x8002
8001c798:	24844028 	addiu	a0,a0,16424
8001c79c:	24050131 	li	a1,305
8001c7a0:	3c068002 	lui	a2,0x8002
8001c7a4:	3c078002 	lui	a3,0x8002
8001c7a8:	24c60e28 	addiu	a2,a2,3624
8001c7ac:	0c006b0b 	jal	8001ac2c <__panic>
8001c7b0:	24e74094 	addiu	a3,a3,16532
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:315
			struct Page *p = le2page(le, page_link);
			assert(PageProperty(p) && p->property == i);
			count--, total -= (1 << i);
		}
	}
	assert(count == 0);
8001c7b4:	3c068002 	lui	a2,0x8002
8001c7b8:	3c078002 	lui	a3,0x8002
8001c7bc:	24844028 	addiu	a0,a0,16424
8001c7c0:	2405013b 	li	a1,315
8001c7c4:	24c60e28 	addiu	a2,a2,3624
8001c7c8:	0c006b0b 	jal	8001ac2c <__panic>
8001c7cc:	24e742c8 	addiu	a3,a3,17096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:316
	assert(total == 0);
8001c7d0:	3c068002 	lui	a2,0x8002
8001c7d4:	3c078002 	lui	a3,0x8002
8001c7d8:	24844028 	addiu	a0,a0,16424
8001c7dc:	2405013c 	li	a1,316
8001c7e0:	24c60e28 	addiu	a2,a2,3624
8001c7e4:	0c006b0b 	jal	8001ac2c <__panic>
8001c7e8:	24e742d4 	addiu	a3,a3,17108
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:250
	assert(total == nr_free_pages());

	struct Page *p0 = alloc_pages(8), *buddy = alloc_pages(8), *p1;

	assert(p0 != NULL);
	assert((page2idx(p0) & 7) == 0);
8001c7ec:	3c068002 	lui	a2,0x8002
8001c7f0:	3c078002 	lui	a3,0x8002
8001c7f4:	24844028 	addiu	a0,a0,16424
8001c7f8:	240500fa 	li	a1,250
8001c7fc:	24c60e28 	addiu	a2,a2,3624
8001c800:	0c006b0b 	jal	8001ac2c <__panic>
8001c804:	24e740bc 	addiu	a3,a3,16572
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:249
	}
	assert(total == nr_free_pages());

	struct Page *p0 = alloc_pages(8), *buddy = alloc_pages(8), *p1;

	assert(p0 != NULL);
8001c808:	3c048002 	lui	a0,0x8002
8001c80c:	3c068002 	lui	a2,0x8002
8001c810:	3c078002 	lui	a3,0x8002
8001c814:	24844028 	addiu	a0,a0,16424
8001c818:	240500f9 	li	a1,249
8001c81c:	24c60e28 	addiu	a2,a2,3624
8001c820:	0c006b0b 	jal	8001ac2c <__panic>
8001c824:	24e740b0 	addiu	a3,a3,16560
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:245
			struct Page *p = le2page(le, page_link);
			assert(PageProperty(p) && p->property == i);
			count++, total += (1 << i);
		}
	}
	assert(total == nr_free_pages());
8001c828:	24844028 	addiu	a0,a0,16424
8001c82c:	080071e8 	j	8001c7a0 <buddy_check+0x628>
8001c830:	240500f5 	li	a1,245
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:251

	struct Page *p0 = alloc_pages(8), *buddy = alloc_pages(8), *p1;

	assert(p0 != NULL);
	assert((page2idx(p0) & 7) == 0);
	assert(!PageProperty(p0));
8001c834:	3c048002 	lui	a0,0x8002
8001c838:	3c068002 	lui	a2,0x8002
8001c83c:	3c078002 	lui	a3,0x8002
8001c840:	24844028 	addiu	a0,a0,16424
8001c844:	240500fb 	li	a1,251
8001c848:	24c60e28 	addiu	a2,a2,3624
8001c84c:	0c006b0b 	jal	8001ac2c <__panic>
8001c850:	24e740d4 	addiu	a3,a3,16596
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:264
		assert(list_empty(&free_list(i)));
		nr_free_store[i] = nr_free(i);
		nr_free(i) = 0;
	}

	assert(nr_free_pages() == 0);
8001c854:	24844028 	addiu	a0,a0,16424
8001c858:	24050108 	li	a1,264
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:273
	assert(PageProperty(p0) && p0->property == 3);
	assert((p0 = alloc_pages(6)) != NULL && !PageProperty(p0)
	       && nr_free_pages() == 2);

	assert((p1 = alloc_pages(2)) != NULL && p1 == p0 + 6);
	assert(nr_free_pages() == 0);
8001c85c:	3c068002 	lui	a2,0x8002
8001c860:	3c078002 	lui	a3,0x8002
8001c864:	24c60e28 	addiu	a2,a2,3624
8001c868:	0c006b0b 	jal	8001ac2c <__panic>
8001c86c:	24e742b0 	addiu	a3,a3,17072
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:265
		nr_free_store[i] = nr_free(i);
		nr_free(i) = 0;
	}

	assert(nr_free_pages() == 0);
	assert(alloc_page() == NULL);
8001c870:	3c048002 	lui	a0,0x8002
8001c874:	3c068002 	lui	a2,0x8002
8001c878:	3c078002 	lui	a3,0x8002
8001c87c:	24844028 	addiu	a0,a0,16424
8001c880:	24050109 	li	a1,265
8001c884:	24c60e28 	addiu	a2,a2,3624
8001c888:	0c006b0b 	jal	8001ac2c <__panic>
8001c88c:	24e740e8 	addiu	a3,a3,16616
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:267
	free_pages(p0, 8);
	assert(nr_free_pages() == 8);
8001c890:	3c068002 	lui	a2,0x8002
8001c894:	3c078002 	lui	a3,0x8002
8001c898:	24844028 	addiu	a0,a0,16424
8001c89c:	2405010b 	li	a1,267
8001c8a0:	24c60e28 	addiu	a2,a2,3624
8001c8a4:	0c006b0b 	jal	8001ac2c <__panic>
8001c8a8:	24e74100 	addiu	a3,a3,16640
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:268
	assert(PageProperty(p0) && p0->property == 3);
8001c8ac:	3c048002 	lui	a0,0x8002
8001c8b0:	24844028 	addiu	a0,a0,16424
8001c8b4:	2405010c 	li	a1,268
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:282
	assert(PageProperty(p0 + 2) && p0[2].property == 0);

	free_pages(p0 + 3, 3);
	free_pages(p1, 2);

	assert(PageProperty(p0) && p0->property == 3);
8001c8b8:	3c068002 	lui	a2,0x8002
8001c8bc:	3c078002 	lui	a3,0x8002
8001c8c0:	24c60e28 	addiu	a2,a2,3624
8001c8c4:	0c006b0b 	jal	8001ac2c <__panic>
8001c8c8:	24e74118 	addiu	a3,a3,16664
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:269
	assert(nr_free_pages() == 0);
	assert(alloc_page() == NULL);
	free_pages(p0, 8);
	assert(nr_free_pages() == 8);
	assert(PageProperty(p0) && p0->property == 3);
	assert((p0 = alloc_pages(6)) != NULL && !PageProperty(p0)
8001c8cc:	3c048002 	lui	a0,0x8002
8001c8d0:	3c068002 	lui	a2,0x8002
8001c8d4:	3c078002 	lui	a3,0x8002
8001c8d8:	24844028 	addiu	a0,a0,16424
8001c8dc:	2405010e 	li	a1,270
8001c8e0:	24c60e28 	addiu	a2,a2,3624
8001c8e4:	0c006b0b 	jal	8001ac2c <__panic>
8001c8e8:	24e74140 	addiu	a3,a3,16704
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:272
	       && nr_free_pages() == 2);

	assert((p1 = alloc_pages(2)) != NULL && p1 == p0 + 6);
8001c8ec:	3c048002 	lui	a0,0x8002
8001c8f0:	3c068002 	lui	a2,0x8002
8001c8f4:	3c078002 	lui	a3,0x8002
8001c8f8:	24844028 	addiu	a0,a0,16424
8001c8fc:	24050110 	li	a1,272
8001c900:	24c60e28 	addiu	a2,a2,3624
8001c904:	0c006b0b 	jal	8001ac2c <__panic>
8001c908:	24e7418c 	addiu	a3,a3,16780
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:273
	assert(nr_free_pages() == 0);
8001c90c:	24844028 	addiu	a0,a0,16424
8001c910:	08007217 	j	8001c85c <buddy_check+0x6e4>
8001c914:	24050111 	li	a1,273
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:276

	free_pages(p0, 3);
	assert(PageProperty(p0) && p0->property == 1);
8001c918:	3c048002 	lui	a0,0x8002
8001c91c:	3c068002 	lui	a2,0x8002
8001c920:	3c078002 	lui	a3,0x8002
8001c924:	24844028 	addiu	a0,a0,16424
8001c928:	24050114 	li	a1,276
8001c92c:	24c60e28 	addiu	a2,a2,3624
8001c930:	0c006b0b 	jal	8001ac2c <__panic>
8001c934:	24e741bc 	addiu	a3,a3,16828
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:277
	assert(PageProperty(p0 + 2) && p0[2].property == 0);
8001c938:	3c068002 	lui	a2,0x8002
8001c93c:	3c078002 	lui	a3,0x8002
8001c940:	24844028 	addiu	a0,a0,16424
8001c944:	24050115 	li	a1,277
8001c948:	24c60e28 	addiu	a2,a2,3624
8001c94c:	0c006b0b 	jal	8001ac2c <__panic>
8001c950:	24e741e4 	addiu	a3,a3,16868
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:282

	free_pages(p0 + 3, 3);
	free_pages(p1, 2);

	assert(PageProperty(p0) && p0->property == 3);
8001c954:	3c048002 	lui	a0,0x8002
8001c958:	24844028 	addiu	a0,a0,16424
8001c95c:	0800722e 	j	8001c8b8 <buddy_check+0x740>
8001c960:	2405011a 	li	a1,282
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:284

	assert((p0 = alloc_pages(6)) != NULL);
8001c964:	3c048002 	lui	a0,0x8002
8001c968:	3c068002 	lui	a2,0x8002
8001c96c:	3c078002 	lui	a3,0x8002
8001c970:	24844028 	addiu	a0,a0,16424
8001c974:	2405011c 	li	a1,284
8001c978:	24c60e28 	addiu	a2,a2,3624
8001c97c:	0c006b0b 	jal	8001ac2c <__panic>
8001c980:	24e74210 	addiu	a3,a3,16912
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:285
	assert((p1 = alloc_pages(2)) != NULL);
8001c984:	3c068002 	lui	a2,0x8002
8001c988:	3c078002 	lui	a3,0x8002
8001c98c:	24844028 	addiu	a0,a0,16424
8001c990:	2405011d 	li	a1,285
8001c994:	24c60e28 	addiu	a2,a2,3624
8001c998:	0c006b0b 	jal	8001ac2c <__panic>
8001c99c:	24e74230 	addiu	a3,a3,16944
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:290
	free_pages(p0 + 4, 2);
	free_pages(p1, 2);

	p1 = p0 + 4;
	assert(PageProperty(p1) && p1->property == 2);
8001c9a0:	3c048002 	lui	a0,0x8002
8001c9a4:	3c068002 	lui	a2,0x8002
8001c9a8:	3c078002 	lui	a3,0x8002
8001c9ac:	24844028 	addiu	a0,a0,16424
8001c9b0:	24050122 	li	a1,290
8001c9b4:	24c60e28 	addiu	a2,a2,3624
8001c9b8:	0c006b0b 	jal	8001ac2c <__panic>
8001c9bc:	24e74250 	addiu	a3,a3,16976
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:292
	free_pages(p0, 4);
	assert(PageProperty(p0) && p0->property == 3);
8001c9c0:	3c048002 	lui	a0,0x8002
8001c9c4:	24844028 	addiu	a0,a0,16424
8001c9c8:	0800722e 	j	8001c8b8 <buddy_check+0x740>
8001c9cc:	24050124 	li	a1,292
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:294

	assert((p0 = alloc_pages(8)) != NULL);
8001c9d0:	3c048002 	lui	a0,0x8002
8001c9d4:	3c068002 	lui	a2,0x8002
8001c9d8:	3c078002 	lui	a3,0x8002
8001c9dc:	24844028 	addiu	a0,a0,16424
8001c9e0:	24050126 	li	a1,294
8001c9e4:	24c60e28 	addiu	a2,a2,3624
8001c9e8:	0c006b0b 	jal	8001ac2c <__panic>
8001c9ec:	24e74278 	addiu	a3,a3,17016
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:295
	assert(alloc_page() == NULL && nr_free_pages() == 0);
8001c9f0:	3c048002 	lui	a0,0x8002
8001c9f4:	3c068002 	lui	a2,0x8002
8001c9f8:	3c078002 	lui	a3,0x8002
8001c9fc:	24844028 	addiu	a0,a0,16424
8001ca00:	24050127 	li	a1,295
8001ca04:	24c60e28 	addiu	a2,a2,3624
8001ca08:	0c006b0b 	jal	8001ac2c <__panic>
8001ca0c:	24e74298 	addiu	a3,a3,17048

8001ca10 <buddy_free_pages_sub>:
buddy_free_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:163
}

//buddy_free_pages_sub - the actual free implimentation, should consider how to 
//                     - merge the adjacent buddy block
static void buddy_free_pages_sub(struct Page *base, size_t order)
{
8001ca10:	27bdffb0 	addiu	sp,sp,-80
8001ca14:	afb00028 	sw	s0,40(sp)
page2idx():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:151
}

//page2idx - get the related index number idx of continuous page block which this page belongs to 
static ppn_t page2idx(struct Page *page)
{
	return page - zones[page->zone_num].mem_base;
8001ca18:	8c90000c 	lw	s0,12(a0)
buddy_free_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:163
}

//buddy_free_pages_sub - the actual free implimentation, should consider how to 
//                     - merge the adjacent buddy block
static void buddy_free_pages_sub(struct Page *base, size_t order)
{
8001ca1c:	afb30034 	sw	s3,52(sp)
page2idx():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:151
}

//page2idx - get the related index number idx of continuous page block which this page belongs to 
static ppn_t page2idx(struct Page *page)
{
	return page - zones[page->zone_num].mem_base;
8001ca20:	3c138015 	lui	s3,0x8015
buddy_free_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:163
}

//buddy_free_pages_sub - the actual free implimentation, should consider how to 
//                     - merge the adjacent buddy block
static void buddy_free_pages_sub(struct Page *base, size_t order)
{
8001ca24:	afb20030 	sw	s2,48(sp)
page2idx():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:151
}

//page2idx - get the related index number idx of continuous page block which this page belongs to 
static ppn_t page2idx(struct Page *page)
{
	return page - zones[page->zone_num].mem_base;
8001ca28:	267376b8 	addiu	s3,s3,30392
8001ca2c:	00109080 	sll	s2,s0,0x2
8001ca30:	02721021 	addu	v0,s3,s2
8001ca34:	8c420000 	lw	v0,0(v0)
buddy_free_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:163
}

//buddy_free_pages_sub - the actual free implimentation, should consider how to 
//                     - merge the adjacent buddy block
static void buddy_free_pages_sub(struct Page *base, size_t order)
{
8001ca38:	afbe0048 	sw	s8,72(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:165
	ppn_t buddy_idx, page_idx = page2idx(base);
	assert((page_idx & ((1 << order) - 1)) == 0);
8001ca3c:	241e0001 	li	s8,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:163
}

//buddy_free_pages_sub - the actual free implimentation, should consider how to 
//                     - merge the adjacent buddy block
static void buddy_free_pages_sub(struct Page *base, size_t order)
{
8001ca40:	afb60040 	sw	s6,64(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:165
	ppn_t buddy_idx, page_idx = page2idx(base);
	assert((page_idx & ((1 << order) - 1)) == 0);
8001ca44:	00bef004 	sllv	s8,s8,a1
page2idx():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:151
}

//page2idx - get the related index number idx of continuous page block which this page belongs to 
static ppn_t page2idx(struct Page *page)
{
	return page - zones[page->zone_num].mem_base;
8001ca48:	0082b023 	subu	s6,a0,v0
8001ca4c:	0016b143 	sra	s6,s6,0x5
buddy_free_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:165
//buddy_free_pages_sub - the actual free implimentation, should consider how to 
//                     - merge the adjacent buddy block
static void buddy_free_pages_sub(struct Page *base, size_t order)
{
	ppn_t buddy_idx, page_idx = page2idx(base);
	assert((page_idx & ((1 << order) - 1)) == 0);
8001ca50:	27c3ffff 	addiu	v1,s8,-1
8001ca54:	00761824 	and	v1,v1,s6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:163
}

//buddy_free_pages_sub - the actual free implimentation, should consider how to 
//                     - merge the adjacent buddy block
static void buddy_free_pages_sub(struct Page *base, size_t order)
{
8001ca58:	afb5003c 	sw	s5,60(sp)
8001ca5c:	afb1002c 	sw	s1,44(sp)
8001ca60:	afbf004c 	sw	ra,76(sp)
8001ca64:	afb70044 	sw	s7,68(sp)
8001ca68:	afb40038 	sw	s4,56(sp)
8001ca6c:	00808821 	move	s1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:165
	ppn_t buddy_idx, page_idx = page2idx(base);
	assert((page_idx & ((1 << order) - 1)) == 0);
8001ca70:	146000ee 	bnez	v1,8001ce2c <buddy_free_pages_sub+0x41c>
8001ca74:	00a0a821 	move	s5,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:167
	struct Page *p = base;
	for (; p != base + (1 << order); p++) {
8001ca78:	24170020 	li	s7,32
8001ca7c:	00b7b804 	sllv	s7,s7,a1
8001ca80:	0097b821 	addu	s7,a0,s7
8001ca84:	1097001a 	beq	a0,s7,8001caf0 <buddy_free_pages_sub+0xe0>
8001ca88:	0080a021 	move	s4,a0
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8001ca8c:	40026000 	mfc0	v0,c0_status
8001ca90:	30420001 	andi	v0,v0,0x1
8001ca94:	1440004b 	bnez	v0,8001cbc4 <buddy_free_pages_sub+0x1b4>
8001ca98:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
8001ca9c:	8e900004 	lw	s0,4(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8001caa0:	32100001 	andi	s0,s0,0x1
buddy_free_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:168
		assert(!PageReserved(p) && !PageProperty(p));
8001caa4:	160000da 	bnez	s0,8001ce10 <buddy_free_pages_sub+0x400>
8001caa8:	3c048002 	lui	a0,0x8002
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8001caac:	40026000 	mfc0	v0,c0_status
8001cab0:	30420001 	andi	v0,v0,0x1
8001cab4:	1440004a 	bnez	v0,8001cbe0 <buddy_free_pages_sub+0x1d0>
8001cab8:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8001cabc:	8e900004 	lw	s0,4(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8001cac0:	7e100040 	ext	s0,s0,0x1,0x1
buddy_free_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:168
8001cac4:	160000d2 	bnez	s0,8001ce10 <buddy_free_pages_sub+0x400>
8001cac8:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:169
		p->flags = 0;
8001cacc:	ae800004 	sw	zero,4(s4)
atomic_set():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:34
 *
 * Atomically sets the value of @v to @i.
 * */
static __always_inline void atomic_set(atomic_t * v, int i)
{
	v->counter = i;
8001cad0:	ae800000 	sw	zero,0(s4)
buddy_free_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:167
static void buddy_free_pages_sub(struct Page *base, size_t order)
{
	ppn_t buddy_idx, page_idx = page2idx(base);
	assert((page_idx & ((1 << order) - 1)) == 0);
	struct Page *p = base;
	for (; p != base + (1 << order); p++) {
8001cad4:	26940020 	addiu	s4,s4,32
8001cad8:	1697ffec 	bne	s4,s7,8001ca8c <buddy_free_pages_sub+0x7c>
8001cadc:	00000000 	nop
8001cae0:	8e30000c 	lw	s0,12(s1)
8001cae4:	00109080 	sll	s2,s0,0x2
8001cae8:	02721021 	addu	v0,s3,s2
8001caec:	8c420000 	lw	v0,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:173
		assert(!PageReserved(p) && !PageProperty(p));
		p->flags = 0;
		set_page_ref(p, 0);
	}
	int zone_num = base->zone_num;
	while (order < MAX_ORDER) {
8001caf0:	2ea3000a 	sltiu	v1,s5,10
8001caf4:	1060000c 	beqz	v1,8001cb28 <buddy_free_pages_sub+0x118>
8001caf8:	3c178015 	lui	s7,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:174
		buddy_idx = page_idx ^ (1 << order);
8001cafc:	02dea026 	xor	s4,s6,s8
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8001cb00:	8ee377bc 	lw	v1,30652(s7)
idx2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:157
}

//idx2page - get the related page according to the index number idx of continuous page block 
static struct Page *idx2page(int zone_num, ppn_t idx)
{
	return zones[zone_num].mem_base + idx;
8001cb04:	00148940 	sll	s1,s4,0x5
page_is_buddy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:139

//page_is_buddy - Does this page belong to the No. zone_num Zone & this page
//              -  be in the continuous page block whose size is 2^order pages?
static inline bool page_is_buddy(struct Page *page, size_t order, int zone_num)
{
	if (page2ppn(page) < npage) {
8001cb08:	3c1e8015 	lui	s8,0x8015
idx2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:157
}

//idx2page - get the related page according to the index number idx of continuous page block 
static struct Page *idx2page(int zone_num, ppn_t idx)
{
	return zones[zone_num].mem_base + idx;
8001cb0c:	00518821 	addu	s1,v0,s1
page_is_buddy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:139

//page_is_buddy - Does this page belong to the No. zone_num Zone & this page
//              -  be in the continuous page block whose size is 2^order pages?
static inline bool page_is_buddy(struct Page *page, size_t order, int zone_num)
{
	if (page2ppn(page) < npage) {
8001cb10:	8fc47770 	lw	a0,30576(s8)
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
8001cb14:	02231823 	subu	v1,s1,v1
8001cb18:	00031943 	sra	v1,v1,0x5
page_is_buddy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:139
8001cb1c:	0064182b 	sltu	v1,v1,a0
8001cb20:	54600036 	bnezl	v1,8001cbfc <buddy_free_pages_sub+0x1ec>
8001cb24:	8e23000c 	lw	v1,12(s1)
8001cb28:	3c038015 	lui	v1,0x8015
8001cb2c:	246376e0 	addiu	v1,v1,30432
8001cb30:	afa30010 	sw	v1,16(sp)
idx2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:157
}

//idx2page - get the related page according to the index number idx of continuous page block 
static struct Page *idx2page(int zone_num, ppn_t idx)
{
	return zones[zone_num].mem_base + idx;
8001cb34:	0016b140 	sll	s6,s6,0x5
8001cb38:	0056b021 	addu	s6,v0,s6
buddy_free_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:186
		ClearPageProperty(buddy);
		page_idx &= buddy_idx;
		order++;
	}
	struct Page *page = idx2page(zone_num, page_idx);
	page->property = order;
8001cb3c:	aed50008 	sw	s5,8(s6)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8001cb40:	40026000 	mfc0	v0,c0_status
8001cb44:	30420001 	andi	v0,v0,0x1
8001cb48:	1440004a 	bnez	v0,8001cc74 <buddy_free_pages_sub+0x264>
8001cb4c:	00000000 	nop
set_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:185
 * */
static __always_inline void set_bit(int nr, volatile uint32_t * addr)
{
	int intr_flag;
	local_intr_save(intr_flag);
	*addr |= (1 << nr);
8001cb50:	8ec20004 	lw	v0,4(s6)
8001cb54:	34420002 	ori	v0,v0,0x2
8001cb58:	aec20004 	sw	v0,4(s6)
buddy_free_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:188
	SetPageProperty(page);
	nr_free(order)++;
8001cb5c:	00151080 	sll	v0,s5,0x2
8001cb60:	0015a900 	sll	s5,s5,0x4
8001cb64:	02a2a823 	subu	s5,s5,v0
8001cb68:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:190
	list_add(&free_list(order), &(page->page_link));
}
8001cb6c:	8fbf004c 	lw	ra,76(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:189
	}
	struct Page *page = idx2page(zone_num, page_idx);
	page->property = order;
	SetPageProperty(page);
	nr_free(order)++;
	list_add(&free_list(order), &(page->page_link));
8001cb70:	26c30010 	addiu	v1,s6,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:188
		order++;
	}
	struct Page *page = idx2page(zone_num, page_idx);
	page->property = order;
	SetPageProperty(page);
	nr_free(order)++;
8001cb74:	0055a821 	addu	s5,v0,s5
8001cb78:	8ea40008 	lw	a0,8(s5)
list_add_after():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:93
 * Insert the new element @elm *after* the element @listelm which
 * is already in the list.
 * */
static inline void list_add_after(list_entry_t * listelm, list_entry_t * elm)
{
	__list_add(elm, listelm, listelm->next);
8001cb7c:	8ea20004 	lw	v0,4(s5)
buddy_free_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:190
	list_add(&free_list(order), &(page->page_link));
}
8001cb80:	8fbe0048 	lw	s8,72(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:188
		order++;
	}
	struct Page *page = idx2page(zone_num, page_idx);
	page->property = order;
	SetPageProperty(page);
	nr_free(order)++;
8001cb84:	24840001 	addiu	a0,a0,1
8001cb88:	aea40008 	sw	a0,8(s5)
__list_add():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:156
 * the prev/next entries already!
 * */
static inline void
__list_add(list_entry_t * elm, list_entry_t * prev, list_entry_t * next)
{
	prev->next = next->prev = elm;
8001cb8c:	aea30004 	sw	v1,4(s5)
8001cb90:	ac430000 	sw	v1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:157
	elm->next = next;
8001cb94:	aec20014 	sw	v0,20(s6)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:158
	elm->prev = prev;
8001cb98:	aed50010 	sw	s5,16(s6)
buddy_free_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:190
	list_add(&free_list(order), &(page->page_link));
}
8001cb9c:	8fb70044 	lw	s7,68(sp)
8001cba0:	8fb60040 	lw	s6,64(sp)
8001cba4:	8fb5003c 	lw	s5,60(sp)
8001cba8:	8fb40038 	lw	s4,56(sp)
8001cbac:	8fb30034 	lw	s3,52(sp)
8001cbb0:	8fb20030 	lw	s2,48(sp)
8001cbb4:	8fb1002c 	lw	s1,44(sp)
8001cbb8:	8fb00028 	lw	s0,40(sp)
8001cbbc:	03e00008 	jr	ra
8001cbc0:	27bd0050 	addiu	sp,sp,80
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8001cbc4:	0c006d04 	jal	8001b410 <intr_disable>
8001cbc8:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8001cbcc:	8e900004 	lw	s0,4(s4)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8001cbd0:	0c006d00 	jal	8001b400 <intr_enable>
8001cbd4:	32100001 	andi	s0,s0,0x1
8001cbd8:	080072a9 	j	8001caa4 <buddy_free_pages_sub+0x94>
8001cbdc:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8001cbe0:	0c006d04 	jal	8001b410 <intr_disable>
8001cbe4:	00000000 	nop
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
8001cbe8:	8e900004 	lw	s0,4(s4)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8001cbec:	0c006d00 	jal	8001b400 <intr_enable>
8001cbf0:	7e100040 	ext	s0,s0,0x1,0x1
8001cbf4:	080072b1 	j	8001cac4 <buddy_free_pages_sub+0xb4>
8001cbf8:	00000000 	nop
page_is_buddy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:140
//page_is_buddy - Does this page belong to the No. zone_num Zone & this page
//              -  be in the continuous page block whose size is 2^order pages?
static inline bool page_is_buddy(struct Page *page, size_t order, int zone_num)
{
	if (page2ppn(page) < npage) {
		if (page->zone_num == zone_num) {
8001cbfc:	1603ffcb 	bne	s0,v1,8001cb2c <buddy_free_pages_sub+0x11c>
8001cc00:	3c038015 	lui	v1,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:162
	return zones[zone_num].mem_base + idx;
}

//buddy_free_pages_sub - the actual free implimentation, should consider how to 
//                     - merge the adjacent buddy block
static void buddy_free_pages_sub(struct Page *base, size_t order)
8001cc04:	00151080 	sll	v0,s5,0x2
8001cc08:	00152100 	sll	a0,s5,0x4
8001cc0c:	00822023 	subu	a0,a0,v0
8001cc10:	3c028015 	lui	v0,0x8015
8001cc14:	244276e0 	addiu	v0,v0,30432
8001cc18:	24840008 	addiu	a0,a0,8
8001cc1c:	afa20010 	sw	v0,16(sp)
8001cc20:	00442021 	addu	a0,v0,a0
buddy_free_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:173
		assert(!PageReserved(p) && !PageProperty(p));
		p->flags = 0;
		set_page_ref(p, 0);
	}
	int zone_num = base->zone_num;
	while (order < MAX_ORDER) {
8001cc24:	2403000a 	li	v1,10
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:174
		buddy_idx = page_idx ^ (1 << order);
8001cc28:	24060001 	li	a2,1
idx2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:157
}

//idx2page - get the related page according to the index number idx of continuous page block 
static struct Page *idx2page(int zone_num, ppn_t idx)
{
	return zones[zone_num].mem_base + idx;
8001cc2c:	02722821 	addu	a1,s3,s2
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8001cc30:	40026000 	mfc0	v0,c0_status
8001cc34:	30420001 	andi	v0,v0,0x1
8001cc38:	54400048 	bnezl	v0,8001cd5c <buddy_free_pages_sub+0x34c>
8001cc3c:	afa3001c 	sw	v1,28(sp)
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
8001cc40:	8e220004 	lw	v0,4(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8001cc44:	30420001 	andi	v0,v0,0x1
page_is_buddy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:141
//              -  be in the continuous page block whose size is 2^order pages?
static inline bool page_is_buddy(struct Page *page, size_t order, int zone_num)
{
	if (page2ppn(page) < npage) {
		if (page->zone_num == zone_num) {
			return !PageReserved(page) && PageProperty(page)
8001cc48:	10400013 	beqz	v0,8001cc98 <buddy_free_pages_sub+0x288>
8001cc4c:	00000000 	nop
buddy_free_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:173
		assert(!PageReserved(p) && !PageProperty(p));
		p->flags = 0;
		set_page_ref(p, 0);
	}
	int zone_num = base->zone_num;
	while (order < MAX_ORDER) {
8001cc50:	02729021 	addu	s2,s3,s2
8001cc54:	8e420000 	lw	v0,0(s2)
idx2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:157
}

//idx2page - get the related page according to the index number idx of continuous page block 
static struct Page *idx2page(int zone_num, ppn_t idx)
{
	return zones[zone_num].mem_base + idx;
8001cc58:	0016b140 	sll	s6,s6,0x5
8001cc5c:	0056b021 	addu	s6,v0,s6
buddy_free_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:186
		ClearPageProperty(buddy);
		page_idx &= buddy_idx;
		order++;
	}
	struct Page *page = idx2page(zone_num, page_idx);
	page->property = order;
8001cc60:	aed50008 	sw	s5,8(s6)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8001cc64:	40026000 	mfc0	v0,c0_status
8001cc68:	30420001 	andi	v0,v0,0x1
8001cc6c:	1040ffb8 	beqz	v0,8001cb50 <buddy_free_pages_sub+0x140>
8001cc70:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8001cc74:	0c006d04 	jal	8001b410 <intr_disable>
8001cc78:	00000000 	nop
set_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:185
 * */
static __always_inline void set_bit(int nr, volatile uint32_t * addr)
{
	int intr_flag;
	local_intr_save(intr_flag);
	*addr |= (1 << nr);
8001cc7c:	8ec20004 	lw	v0,4(s6)
8001cc80:	34420002 	ori	v0,v0,0x2
8001cc84:	aec20004 	sw	v0,4(s6)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8001cc88:	0c006d00 	jal	8001b400 <intr_enable>
8001cc8c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:188
	SetPageProperty(page);
	nr_free(order)++;
8001cc90:	080072d8 	j	8001cb60 <buddy_free_pages_sub+0x150>
8001cc94:	00151080 	sll	v0,s5,0x2
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8001cc98:	40026000 	mfc0	v0,c0_status
8001cc9c:	30420001 	andi	v0,v0,0x1
8001cca0:	5440003e 	bnezl	v0,8001cd9c <buddy_free_pages_sub+0x38c>
8001cca4:	afa3001c 	sw	v1,28(sp)
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8001cca8:	8e220004 	lw	v0,4(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8001ccac:	7c420040 	ext	v0,v0,0x1,0x1
page_is_buddy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:141
//              -  be in the continuous page block whose size is 2^order pages?
static inline bool page_is_buddy(struct Page *page, size_t order, int zone_num)
{
	if (page2ppn(page) < npage) {
		if (page->zone_num == zone_num) {
			return !PageReserved(page) && PageProperty(page)
8001ccb0:	5040ffe8 	beqzl	v0,8001cc54 <buddy_free_pages_sub+0x244>
8001ccb4:	02729021 	addu	s2,s3,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:142
			    && page->property == order;
8001ccb8:	8e220008 	lw	v0,8(s1)
8001ccbc:	56a2ffe5 	bnel	s5,v0,8001cc54 <buddy_free_pages_sub+0x244>
8001ccc0:	02729021 	addu	s2,s3,s2
buddy_free_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:179
		buddy_idx = page_idx ^ (1 << order);
		struct Page *buddy = idx2page(zone_num, buddy_idx);
		if (!page_is_buddy(buddy, order, zone_num)) {
			break;
		}
		nr_free(order)--;
8001ccc4:	8c820000 	lw	v0,0(a0)
8001ccc8:	2442ffff 	addiu	v0,v0,-1
8001cccc:	ac820000 	sw	v0,0(a0)
list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:105
 * Note: list_empty() on @listelm does not return true after this, the entry is
 * in an undefined state.
 * */
static inline void list_del(list_entry_t * listelm)
{
	__list_del(listelm->prev, listelm->next);
8001ccd0:	8e270010 	lw	a3,16(s1)
8001ccd4:	8e220014 	lw	v0,20(s1)
__list_del():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:169
 * This is only for internal list manipulation where we know
 * the prev/next entries already!
 * */
static inline void __list_del(list_entry_t * prev, list_entry_t * next)
{
	prev->next = next;
8001ccd8:	ace20004 	sw	v0,4(a3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:170
	next->prev = prev;
8001ccdc:	ac470000 	sw	a3,0(v0)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8001cce0:	40026000 	mfc0	v0,c0_status
8001cce4:	30420001 	andi	v0,v0,0x1
8001cce8:	5440003a 	bnezl	v0,8001cdd4 <buddy_free_pages_sub+0x3c4>
8001ccec:	afa3001c 	sw	v1,28(sp)
clear_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:199
 * */
static __always_inline void clear_bit(int nr, volatile uint32_t * addr)
{
	int intr_flag;
	local_intr_save(intr_flag);
	*addr &= ~(1 << nr);
8001ccf0:	8e220004 	lw	v0,4(s1)
8001ccf4:	2407fffd 	li	a3,-3
8001ccf8:	00471024 	and	v0,v0,a3
8001ccfc:	ae220004 	sw	v0,4(s1)
buddy_free_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:183
		list_del(&(buddy->page_link));
		ClearPageProperty(buddy);
		page_idx &= buddy_idx;
		order++;
8001cd00:	26b50001 	addiu	s5,s5,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:173
		assert(!PageReserved(p) && !PageProperty(p));
		p->flags = 0;
		set_page_ref(p, 0);
	}
	int zone_num = base->zone_num;
	while (order < MAX_ORDER) {
8001cd04:	12a3ffd2 	beq	s5,v1,8001cc50 <buddy_free_pages_sub+0x240>
8001cd08:	02d4b024 	and	s6,s6,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:174
		buddy_idx = page_idx ^ (1 << order);
8001cd0c:	02a6a004 	sllv	s4,a2,s5
idx2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:157
}

//idx2page - get the related page according to the index number idx of continuous page block 
static struct Page *idx2page(int zone_num, ppn_t idx)
{
	return zones[zone_num].mem_base + idx;
8001cd10:	8ca20000 	lw	v0,0(a1)
buddy_free_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:174
		p->flags = 0;
		set_page_ref(p, 0);
	}
	int zone_num = base->zone_num;
	while (order < MAX_ORDER) {
		buddy_idx = page_idx ^ (1 << order);
8001cd14:	0296a026 	xor	s4,s4,s6
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
8001cd18:	8ee777bc 	lw	a3,30652(s7)
idx2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:157
}

//idx2page - get the related page according to the index number idx of continuous page block 
static struct Page *idx2page(int zone_num, ppn_t idx)
{
	return zones[zone_num].mem_base + idx;
8001cd1c:	00148940 	sll	s1,s4,0x5
8001cd20:	00518821 	addu	s1,v0,s1
page_is_buddy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:139

//page_is_buddy - Does this page belong to the No. zone_num Zone & this page
//              -  be in the continuous page block whose size is 2^order pages?
static inline bool page_is_buddy(struct Page *page, size_t order, int zone_num)
{
	if (page2ppn(page) < npage) {
8001cd24:	8fc87770 	lw	t0,30576(s8)
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
8001cd28:	02273823 	subu	a3,s1,a3
8001cd2c:	00073943 	sra	a3,a3,0x5
page_is_buddy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:139
8001cd30:	00e8382b 	sltu	a3,a3,t0
8001cd34:	50e0ff80 	beqzl	a3,8001cb38 <buddy_free_pages_sub+0x128>
8001cd38:	0016b140 	sll	s6,s6,0x5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:140
		if (page->zone_num == zone_num) {
8001cd3c:	8e27000c 	lw	a3,12(s1)
8001cd40:	1607ff7c 	bne	s0,a3,8001cb34 <buddy_free_pages_sub+0x124>
8001cd44:	2484000c 	addiu	a0,a0,12
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
8001cd48:	40026000 	mfc0	v0,c0_status
8001cd4c:	30420001 	andi	v0,v0,0x1
8001cd50:	1040ffbb 	beqz	v0,8001cc40 <buddy_free_pages_sub+0x230>
8001cd54:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8001cd58:	afa3001c 	sw	v1,28(sp)
8001cd5c:	afa40018 	sw	a0,24(sp)
8001cd60:	afa50024 	sw	a1,36(sp)
8001cd64:	0c006d04 	jal	8001b410 <intr_disable>
8001cd68:	afa60020 	sw	a2,32(sp)
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8001cd6c:	8e220004 	lw	v0,4(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8001cd70:	30420001 	andi	v0,v0,0x1
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8001cd74:	0c006d00 	jal	8001b400 <intr_enable>
8001cd78:	afa20014 	sw	v0,20(sp)
8001cd7c:	8fa20014 	lw	v0,20(sp)
8001cd80:	8fa3001c 	lw	v1,28(sp)
8001cd84:	8fa40018 	lw	a0,24(sp)
8001cd88:	8fa50024 	lw	a1,36(sp)
page_is_buddy():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:141
			return !PageReserved(page) && PageProperty(page)
8001cd8c:	1440ffb0 	bnez	v0,8001cc50 <buddy_free_pages_sub+0x240>
8001cd90:	8fa60020 	lw	a2,32(sp)
8001cd94:	08007326 	j	8001cc98 <buddy_free_pages_sub+0x288>
8001cd98:	00000000 	nop
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8001cd9c:	afa40018 	sw	a0,24(sp)
8001cda0:	afa50024 	sw	a1,36(sp)
8001cda4:	0c006d04 	jal	8001b410 <intr_disable>
8001cda8:	afa60020 	sw	a2,32(sp)
test_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:288
	int intr_flag;
	local_intr_save(intr_flag);
	if (*addr & (1 << nr))
8001cdac:	8e220004 	lw	v0,4(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:285
 * @nr:     the bit to test
 * @addr:   the address to count from
 * */
static __always_inline bool test_bit(int nr, volatile uint32_t * addr)
{
	unsigned char c = 0;
8001cdb0:	7c420040 	ext	v0,v0,0x1,0x1
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8001cdb4:	0c006d00 	jal	8001b400 <intr_enable>
8001cdb8:	afa20014 	sw	v0,20(sp)
8001cdbc:	8fa20014 	lw	v0,20(sp)
8001cdc0:	8fa3001c 	lw	v1,28(sp)
8001cdc4:	8fa40018 	lw	a0,24(sp)
8001cdc8:	8fa50024 	lw	a1,36(sp)
8001cdcc:	0800732c 	j	8001ccb0 <buddy_free_pages_sub+0x2a0>
8001cdd0:	8fa60020 	lw	a2,32(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
		return 0;
	}
	intr_disable();
8001cdd4:	afa40018 	sw	a0,24(sp)
8001cdd8:	afa50024 	sw	a1,36(sp)
8001cddc:	0c006d04 	jal	8001b410 <intr_disable>
8001cde0:	afa60020 	sw	a2,32(sp)
clear_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:199
 * */
static __always_inline void clear_bit(int nr, volatile uint32_t * addr)
{
	int intr_flag;
	local_intr_save(intr_flag);
	*addr &= ~(1 << nr);
8001cde4:	8e220004 	lw	v0,4(s1)
8001cde8:	2407fffd 	li	a3,-3
8001cdec:	00471024 	and	v0,v0,a3
8001cdf0:	ae220004 	sw	v0,4(s1)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8001cdf4:	0c006d00 	jal	8001b400 <intr_enable>
8001cdf8:	26b50001 	addiu	s5,s5,1
8001cdfc:	8fa3001c 	lw	v1,28(sp)
8001ce00:	8fa40018 	lw	a0,24(sp)
8001ce04:	8fa50024 	lw	a1,36(sp)
8001ce08:	08007341 	j	8001cd04 <buddy_free_pages_sub+0x2f4>
8001ce0c:	8fa60020 	lw	a2,32(sp)
buddy_free_pages_sub():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:168
{
	ppn_t buddy_idx, page_idx = page2idx(base);
	assert((page_idx & ((1 << order) - 1)) == 0);
	struct Page *p = base;
	for (; p != base + (1 << order); p++) {
		assert(!PageReserved(p) && !PageProperty(p));
8001ce10:	3c068002 	lui	a2,0x8002
8001ce14:	3c078002 	lui	a3,0x8002
8001ce18:	24844028 	addiu	a0,a0,16424
8001ce1c:	240500a8 	li	a1,168
8001ce20:	24c60e28 	addiu	a2,a2,3624
8001ce24:	0c006b0b 	jal	8001ac2c <__panic>
8001ce28:	24e74308 	addiu	a3,a3,17160
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:165
//buddy_free_pages_sub - the actual free implimentation, should consider how to 
//                     - merge the adjacent buddy block
static void buddy_free_pages_sub(struct Page *base, size_t order)
{
	ppn_t buddy_idx, page_idx = page2idx(base);
	assert((page_idx & ((1 << order) - 1)) == 0);
8001ce2c:	3c048002 	lui	a0,0x8002
8001ce30:	3c068002 	lui	a2,0x8002
8001ce34:	3c078002 	lui	a3,0x8002
8001ce38:	24844028 	addiu	a0,a0,16424
8001ce3c:	240500a5 	li	a1,165
8001ce40:	24c60e28 	addiu	a2,a2,3624
8001ce44:	0c006b0b 	jal	8001ac2c <__panic>
8001ce48:	24e742e0 	addiu	a3,a3,17120

8001ce4c <buddy_free_pages>:
buddy_free_pages():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:194
	list_add(&free_list(order), &(page->page_link));
}

//buddy_free_pages - call buddy_free_pages_sub to free n continuous page block
static void buddy_free_pages(struct Page *base, size_t n)
{
8001ce4c:	27bdffd0 	addiu	sp,sp,-48
8001ce50:	afb30020 	sw	s3,32(sp)
8001ce54:	afb2001c 	sw	s2,28(sp)
8001ce58:	afbf002c 	sw	ra,44(sp)
8001ce5c:	afb50028 	sw	s5,40(sp)
8001ce60:	afb40024 	sw	s4,36(sp)
8001ce64:	afb10018 	sw	s1,24(sp)
8001ce68:	afb00014 	sw	s0,20(sp)
8001ce6c:	00a09021 	move	s2,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:195
	assert(n > 0);
8001ce70:	10a0004b 	beqz	a1,8001cfa0 <buddy_free_pages+0x154>
8001ce74:	00809821 	move	s3,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:196
	if (n == 1) {
8001ce78:	24020001 	li	v0,1
8001ce7c:	10a2003e 	beq	a1,v0,8001cf78 <buddy_free_pages+0x12c>
8001ce80:	3c148015 	lui	s4,0x8015
8001ce84:	24100001 	li	s0,1
8001ce88:	00008821 	move	s1,zero
8001ce8c:	269476b8 	addiu	s4,s4,30392
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:201
		buddy_free_pages_sub(base, 0);
	} else {
		size_t order = 0, order_size = 1;
		while (n >= order_size) {
			assert(order <= MAX_ORDER);
8001ce90:	080073ab 	j	8001ceac <buddy_free_pages+0x60>
8001ce94:	2415000b 	li	s5,11
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:200
	assert(n > 0);
	if (n == 1) {
		buddy_free_pages_sub(base, 0);
	} else {
		size_t order = 0, order_size = 1;
		while (n >= order_size) {
8001ce98:	0250102b 	sltu	v0,s2,s0
8001ce9c:	14400016 	bnez	v0,8001cef8 <buddy_free_pages+0xac>
8001cea0:	26310001 	addiu	s1,s1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:201
			assert(order <= MAX_ORDER);
8001cea4:	1235002d 	beq	s1,s5,8001cf5c <buddy_free_pages+0x110>
8001cea8:	3c048002 	lui	a0,0x8002
page2idx():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:151
}

//page2idx - get the related index number idx of continuous page block which this page belongs to 
static ppn_t page2idx(struct Page *page)
{
	return page - zones[page->zone_num].mem_base;
8001ceac:	8e62000c 	lw	v0,12(s3)
8001ceb0:	00021080 	sll	v0,v0,0x2
8001ceb4:	02821021 	addu	v0,s4,v0
8001ceb8:	8c420000 	lw	v0,0(v0)
8001cebc:	02621023 	subu	v0,s3,v0
8001cec0:	00021143 	sra	v0,v0,0x5
buddy_free_pages():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:202
		buddy_free_pages_sub(base, 0);
	} else {
		size_t order = 0, order_size = 1;
		while (n >= order_size) {
			assert(order <= MAX_ORDER);
			if ((page2idx(base) & order_size) != 0) {
8001cec4:	00501024 	and	v0,v0,s0
8001cec8:	5040fff3 	beqzl	v0,8001ce98 <buddy_free_pages+0x4c>
8001cecc:	00108040 	sll	s0,s0,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:203
				buddy_free_pages_sub(base, order);
8001ced0:	02602021 	move	a0,s3
8001ced4:	02202821 	move	a1,s1
8001ced8:	0c007284 	jal	8001ca10 <buddy_free_pages_sub>
8001cedc:	02509023 	subu	s2,s2,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:204
				base += order_size;
8001cee0:	00101140 	sll	v0,s0,0x5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:208
				n -= order_size;
			}
			order++;
			order_size <<= 1;
8001cee4:	00108040 	sll	s0,s0,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:204
		size_t order = 0, order_size = 1;
		while (n >= order_size) {
			assert(order <= MAX_ORDER);
			if ((page2idx(base) & order_size) != 0) {
				buddy_free_pages_sub(base, order);
				base += order_size;
8001cee8:	02629821 	addu	s3,s3,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:200
	assert(n > 0);
	if (n == 1) {
		buddy_free_pages_sub(base, 0);
	} else {
		size_t order = 0, order_size = 1;
		while (n >= order_size) {
8001ceec:	0250102b 	sltu	v0,s2,s0
8001cef0:	1040ffec 	beqz	v0,8001cea4 <buddy_free_pages+0x58>
8001cef4:	26310001 	addiu	s1,s1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:210
				n -= order_size;
			}
			order++;
			order_size <<= 1;
		}
		while (n != 0) {
8001cef8:	12400010 	beqz	s2,8001cf3c <buddy_free_pages+0xf0>
8001cefc:	8fbf002c 	lw	ra,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:211
			while (n < order_size) {
8001cf00:	0250102b 	sltu	v0,s2,s0
8001cf04:	10400006 	beqz	v0,8001cf20 <buddy_free_pages+0xd4>
8001cf08:	02602021 	move	a0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:213
				order--;
				order_size >>= 1;
8001cf0c:	00108042 	srl	s0,s0,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:211
			}
			order++;
			order_size <<= 1;
		}
		while (n != 0) {
			while (n < order_size) {
8001cf10:	0250102b 	sltu	v0,s2,s0
8001cf14:	1440fffd 	bnez	v0,8001cf0c <buddy_free_pages+0xc0>
8001cf18:	2631ffff 	addiu	s1,s1,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:215
				order--;
				order_size >>= 1;
			}
			buddy_free_pages_sub(base, order);
8001cf1c:	02602021 	move	a0,s3
8001cf20:	0c007284 	jal	8001ca10 <buddy_free_pages_sub>
8001cf24:	02202821 	move	a1,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:217
			base += order_size;
			n -= order_size;
8001cf28:	02509023 	subu	s2,s2,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:216
			while (n < order_size) {
				order--;
				order_size >>= 1;
			}
			buddy_free_pages_sub(base, order);
			base += order_size;
8001cf2c:	00101140 	sll	v0,s0,0x5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:210
				n -= order_size;
			}
			order++;
			order_size <<= 1;
		}
		while (n != 0) {
8001cf30:	1640fff3 	bnez	s2,8001cf00 <buddy_free_pages+0xb4>
8001cf34:	02629821 	addu	s3,s3,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:220
			buddy_free_pages_sub(base, order);
			base += order_size;
			n -= order_size;
		}
	}
}
8001cf38:	8fbf002c 	lw	ra,44(sp)
8001cf3c:	8fb50028 	lw	s5,40(sp)
8001cf40:	8fb40024 	lw	s4,36(sp)
8001cf44:	8fb30020 	lw	s3,32(sp)
8001cf48:	8fb2001c 	lw	s2,28(sp)
8001cf4c:	8fb10018 	lw	s1,24(sp)
8001cf50:	8fb00014 	lw	s0,20(sp)
8001cf54:	03e00008 	jr	ra
8001cf58:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:201
	if (n == 1) {
		buddy_free_pages_sub(base, 0);
	} else {
		size_t order = 0, order_size = 1;
		while (n >= order_size) {
			assert(order <= MAX_ORDER);
8001cf5c:	3c068002 	lui	a2,0x8002
8001cf60:	3c078002 	lui	a3,0x8002
8001cf64:	24844028 	addiu	a0,a0,16424
8001cf68:	240500c9 	li	a1,201
8001cf6c:	24c60e28 	addiu	a2,a2,3624
8001cf70:	0c006b0b 	jal	8001ac2c <__panic>
8001cf74:	24e74330 	addiu	a3,a3,17200
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:220
			buddy_free_pages_sub(base, order);
			base += order_size;
			n -= order_size;
		}
	}
}
8001cf78:	8fbf002c 	lw	ra,44(sp)
8001cf7c:	8fb50028 	lw	s5,40(sp)
8001cf80:	8fb40024 	lw	s4,36(sp)
8001cf84:	8fb30020 	lw	s3,32(sp)
8001cf88:	8fb2001c 	lw	s2,28(sp)
8001cf8c:	8fb10018 	lw	s1,24(sp)
8001cf90:	8fb00014 	lw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:197
//buddy_free_pages - call buddy_free_pages_sub to free n continuous page block
static void buddy_free_pages(struct Page *base, size_t n)
{
	assert(n > 0);
	if (n == 1) {
		buddy_free_pages_sub(base, 0);
8001cf94:	00002821 	move	a1,zero
8001cf98:	08007284 	j	8001ca10 <buddy_free_pages_sub>
8001cf9c:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/buddy_pmm.c:195
}

//buddy_free_pages - call buddy_free_pages_sub to free n continuous page block
static void buddy_free_pages(struct Page *base, size_t n)
{
	assert(n > 0);
8001cfa0:	3c048002 	lui	a0,0x8002
8001cfa4:	3c068002 	lui	a2,0x8002
8001cfa8:	3c078002 	lui	a3,0x8002
8001cfac:	24844028 	addiu	a0,a0,16424
8001cfb0:	240500c3 	li	a1,195
8001cfb4:	24c60e28 	addiu	a2,a2,3624
8001cfb8:	0c006b0b 	jal	8001ac2c <__panic>
8001cfbc:	24e74068 	addiu	a3,a3,16488

8001cfc0 <get_pgtable_items.isra.0.part.1.constprop.3>:
get_pgtable_items():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:392
		  size_t * left_store, size_t * right_store)
{
	if (start >= right) {
		return 0;
	}
	while (start < right && !(table[start] & PTE_P)) {
8001cfc0:	2c830400 	sltiu	v1,a0,1024
8001cfc4:	10600014 	beqz	v1,8001d018 <get_pgtable_items.isra.0.part.1.constprop.3+0x58>
8001cfc8:	00001021 	move	v0,zero
8001cfcc:	00044080 	sll	t0,a0,0x2
8001cfd0:	00a84021 	addu	t0,a1,t0
8001cfd4:	8d020000 	lw	v0,0(t0)
8001cfd8:	30420001 	andi	v0,v0,0x1
8001cfdc:	14400010 	bnez	v0,8001d020 <get_pgtable_items.isra.0.part.1.constprop.3+0x60>
8001cfe0:	24820001 	addiu	v0,a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:386
//  table:       the beginning addr of table
//  left_store:  the pointer of the high side of table's next range
//  right_store: the pointer of the low side of table's next range
// return value: 0 - not a invalid item range, perm - a valid item range with perm permission
static int
get_pgtable_items(size_t left, size_t right, size_t start, uintptr_t * table,
8001cfe4:	00021880 	sll	v1,v0,0x2
8001cfe8:	00a31821 	addu	v1,a1,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:392
		  size_t * left_store, size_t * right_store)
{
	if (start >= right) {
		return 0;
	}
	while (start < right && !(table[start] & PTE_P)) {
8001cfec:	08007402 	j	8001d008 <get_pgtable_items.isra.0.part.1.constprop.3+0x48>
8001cff0:	240a0400 	li	t2,1024
8001cff4:	8c690000 	lw	t1,0(v1)
8001cff8:	24420001 	addiu	v0,v0,1
8001cffc:	31290001 	andi	t1,t1,0x1
8001d000:	15200007 	bnez	t1,8001d020 <get_pgtable_items.isra.0.part.1.constprop.3+0x60>
8001d004:	24630004 	addiu	v1,v1,4
8001d008:	00604021 	move	t0,v1
8001d00c:	144afff9 	bne	v0,t2,8001cff4 <get_pgtable_items.isra.0.part.1.constprop.3+0x34>
8001d010:	00402021 	move	a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:408
		if (right_store != NULL) {
			*right_store = start;
		}
		return perm;
	}
	return 0;
8001d014:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:409
}
8001d018:	03e00008 	jr	ra
8001d01c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:396
	}
	while (start < right && !(table[start] & PTE_P)) {
		start++;
	}
	if (start < right) {
		if (left_store != NULL) {
8001d020:	54c00001 	bnezl	a2,8001d028 <get_pgtable_items.isra.0.part.1.constprop.3+0x68>
8001d024:	acc40000 	sw	a0,0(a2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:399
			*left_store = start;
		}
		int perm = (table[start++] & PTE_USER);
8001d028:	8d020000 	lw	v0,0(t0)
8001d02c:	24830001 	addiu	v1,a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:400
		while (start < right && (table[start] & PTE_USER) == perm) {
8001d030:	24060400 	li	a2,1024
8001d034:	10660010 	beq	v1,a2,8001d078 <get_pgtable_items.isra.0.part.1.constprop.3+0xb8>
8001d038:	30420007 	andi	v0,v0,0x7
8001d03c:	00033080 	sll	a2,v1,0x2
8001d040:	00a63021 	addu	a2,a1,a2
8001d044:	8cc60000 	lw	a2,0(a2)
8001d048:	30c60007 	andi	a2,a2,0x7
8001d04c:	14c2000a 	bne	a2,v0,8001d078 <get_pgtable_items.isra.0.part.1.constprop.3+0xb8>
8001d050:	00042080 	sll	a0,a0,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:386
//  table:       the beginning addr of table
//  left_store:  the pointer of the high side of table's next range
//  right_store: the pointer of the low side of table's next range
// return value: 0 - not a invalid item range, perm - a valid item range with perm permission
static int
get_pgtable_items(size_t left, size_t right, size_t start, uintptr_t * table,
8001d054:	00a42821 	addu	a1,a1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:400
	if (start < right) {
		if (left_store != NULL) {
			*left_store = start;
		}
		int perm = (table[start++] & PTE_USER);
		while (start < right && (table[start] & PTE_USER) == perm) {
8001d058:	0800741b 	j	8001d06c <get_pgtable_items.isra.0.part.1.constprop.3+0xac>
8001d05c:	24080400 	li	t0,1024
8001d060:	30840007 	andi	a0,a0,0x7
8001d064:	14860004 	bne	a0,a2,8001d078 <get_pgtable_items.isra.0.part.1.constprop.3+0xb8>
8001d068:	24a50004 	addiu	a1,a1,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:401
			start++;
8001d06c:	24630001 	addiu	v1,v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:400
	if (start < right) {
		if (left_store != NULL) {
			*left_store = start;
		}
		int perm = (table[start++] & PTE_USER);
		while (start < right && (table[start] & PTE_USER) == perm) {
8001d070:	5468fffb 	bnel	v1,t0,8001d060 <get_pgtable_items.isra.0.part.1.constprop.3+0xa0>
8001d074:	8ca40008 	lw	a0,8(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:403
			start++;
		}
		if (right_store != NULL) {
8001d078:	10e0ffe7 	beqz	a3,8001d018 <get_pgtable_items.isra.0.part.1.constprop.3+0x58>
8001d07c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:404
			*right_store = start;
8001d080:	03e00008 	jr	ra
8001d084:	ace30000 	sw	v1,0(a3)

8001d088 <lcr3>:
lcr3():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:37
static void check_pgdir(void);
static void check_boot_pgdir(void);

void lcr3(uintptr_t cr3)
{
	current_pgdir = (pde_t *) cr3;
8001d088:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:38
}
8001d08c:	03e00008 	jr	ra
8001d090:	ac447768 	sw	a0,30568(v0)

8001d094 <alloc_pages>:
alloc_pages():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:58
	pmm_manager->init_memmap(base, n);
}

//alloc_pages - call pmm->alloc_pages to allocate a continuous n*PAGESIZE memory 
struct Page *alloc_pages(size_t n)
{
8001d094:	27bdffe0 	addiu	sp,sp,-32
8001d098:	afb00018 	sw	s0,24(sp)
8001d09c:	afbf001c 	sw	ra,28(sp)
8001d0a0:	00808021 	move	s0,a0
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8001d0a4:	40026000 	mfc0	v0,c0_status
8001d0a8:	30420001 	andi	v0,v0,0x1
8001d0ac:	14400007 	bnez	v0,8001d0cc <alloc_pages+0x38>
8001d0b0:	3c028015 	lui	v0,0x8015
alloc_pages():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:63
	struct Page *page;
	bool intr_flag;
	local_intr_save(intr_flag);
	{
		page = pmm_manager->alloc_pages(n);
8001d0b4:	8c427794 	lw	v0,30612(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:67
	}
	local_intr_restore(intr_flag);
	return page;
}
8001d0b8:	8fbf001c 	lw	ra,28(sp)
8001d0bc:	8fb00018 	lw	s0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:63
{
	struct Page *page;
	bool intr_flag;
	local_intr_save(intr_flag);
	{
		page = pmm_manager->alloc_pages(n);
8001d0c0:	8c59000c 	lw	t9,12(v0)
8001d0c4:	03200008 	jr	t9
8001d0c8:	27bd0020 	addiu	sp,sp,32
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8001d0cc:	0c006d04 	jal	8001b410 <intr_disable>
8001d0d0:	00000000 	nop
alloc_pages():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:63
8001d0d4:	3c028015 	lui	v0,0x8015
8001d0d8:	8c427794 	lw	v0,30612(v0)
8001d0dc:	8c42000c 	lw	v0,12(v0)
8001d0e0:	0040f809 	jalr	v0
8001d0e4:	02002021 	move	a0,s0
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8001d0e8:	0c006d00 	jal	8001b400 <intr_enable>
8001d0ec:	afa20010 	sw	v0,16(sp)
alloc_pages():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:67
	}
	local_intr_restore(intr_flag);
	return page;
}
8001d0f0:	8fbf001c 	lw	ra,28(sp)
8001d0f4:	8fa20010 	lw	v0,16(sp)
8001d0f8:	8fb00018 	lw	s0,24(sp)
8001d0fc:	03e00008 	jr	ra
8001d100:	27bd0020 	addiu	sp,sp,32

8001d104 <free_pages>:
free_pages():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:71

//free_pages - call pmm->free_pages to free a continuous n*PAGESIZE memory 
void free_pages(struct Page *base, size_t n)
{
8001d104:	27bdffe0 	addiu	sp,sp,-32
8001d108:	afb10018 	sw	s1,24(sp)
8001d10c:	afb00014 	sw	s0,20(sp)
8001d110:	afbf001c 	sw	ra,28(sp)
8001d114:	00808821 	move	s1,a0
8001d118:	00a08021 	move	s0,a1
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8001d11c:	40026000 	mfc0	v0,c0_status
8001d120:	30420001 	andi	v0,v0,0x1
8001d124:	14400008 	bnez	v0,8001d148 <free_pages+0x44>
8001d128:	3c028015 	lui	v0,0x8015
free_pages():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:75
	bool intr_flag;
	local_intr_save(intr_flag);
	{
		pmm_manager->free_pages(base, n);
8001d12c:	8c427794 	lw	v0,30612(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:78
	}
	local_intr_restore(intr_flag);
}
8001d130:	8fbf001c 	lw	ra,28(sp)
8001d134:	8fb10018 	lw	s1,24(sp)
8001d138:	8fb00014 	lw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:75
void free_pages(struct Page *base, size_t n)
{
	bool intr_flag;
	local_intr_save(intr_flag);
	{
		pmm_manager->free_pages(base, n);
8001d13c:	8c590010 	lw	t9,16(v0)
8001d140:	03200008 	jr	t9
8001d144:	27bd0020 	addiu	sp,sp,32
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8001d148:	0c006d04 	jal	8001b410 <intr_disable>
8001d14c:	00000000 	nop
free_pages():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:75
8001d150:	3c028015 	lui	v0,0x8015
8001d154:	8c427794 	lw	v0,30612(v0)
8001d158:	02202021 	move	a0,s1
8001d15c:	8c420010 	lw	v0,16(v0)
8001d160:	0040f809 	jalr	v0
8001d164:	02002821 	move	a1,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:78
	}
	local_intr_restore(intr_flag);
}
8001d168:	8fbf001c 	lw	ra,28(sp)
8001d16c:	8fb10018 	lw	s1,24(sp)
8001d170:	8fb00014 	lw	s0,20(sp)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8001d174:	08006d00 	j	8001b400 <intr_enable>
8001d178:	27bd0020 	addiu	sp,sp,32

8001d17c <nr_free_pages>:
nr_free_pages():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:83

//nr_free_pages - call pmm->nr_free_pages to get the size (nr*PAGESIZE) 
//of current free memory
size_t nr_free_pages(void)
{
8001d17c:	27bdffe0 	addiu	sp,sp,-32
8001d180:	afbf001c 	sw	ra,28(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8001d184:	40026000 	mfc0	v0,c0_status
8001d188:	30420001 	andi	v0,v0,0x1
8001d18c:	14400006 	bnez	v0,8001d1a8 <nr_free_pages+0x2c>
8001d190:	3c028015 	lui	v0,0x8015
nr_free_pages():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:88
	size_t ret;
	bool intr_flag;
	local_intr_save(intr_flag);
	{
		ret = pmm_manager->nr_free_pages();
8001d194:	8c427794 	lw	v0,30612(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:92
	}
	local_intr_restore(intr_flag);
	return ret;
}
8001d198:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:88
{
	size_t ret;
	bool intr_flag;
	local_intr_save(intr_flag);
	{
		ret = pmm_manager->nr_free_pages();
8001d19c:	8c590014 	lw	t9,20(v0)
8001d1a0:	03200008 	jr	t9
8001d1a4:	27bd0020 	addiu	sp,sp,32
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8001d1a8:	0c006d04 	jal	8001b410 <intr_disable>
8001d1ac:	00000000 	nop
nr_free_pages():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:88
8001d1b0:	3c028015 	lui	v0,0x8015
8001d1b4:	8c427794 	lw	v0,30612(v0)
8001d1b8:	8c420014 	lw	v0,20(v0)
8001d1bc:	0040f809 	jalr	v0
8001d1c0:	00000000 	nop
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8001d1c4:	0c006d00 	jal	8001b400 <intr_enable>
8001d1c8:	afa20010 	sw	v0,16(sp)
nr_free_pages():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:92
	}
	local_intr_restore(intr_flag);
	return ret;
}
8001d1cc:	8fbf001c 	lw	ra,28(sp)
8001d1d0:	8fa20010 	lw	v0,16(sp)
8001d1d4:	03e00008 	jr	ra
8001d1d8:	27bd0020 	addiu	sp,sp,32

8001d1dc <print_pgdir>:
print_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:416
#define PRINT_PTE(s0, a0,a1,a2,a3,s1) kprintf(s0);printhex(a0);\
  kprintf(") ");printhex(a1);kprintf("-");printhex(a2);kprintf(" ");\
  printhex(a3);kprintf(" ");kprintf(s1);kprintf("\n");
//print_pgdir - print the PDT&PT
void print_pgdir(void)
{
8001d1dc:	27bdffa8 	addiu	sp,sp,-88
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:418
	size_t left, right = 0, perm;
	kprintf("---------------- PAGE Directory BEGIN ----------------\n");
8001d1e0:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:416
#define PRINT_PTE(s0, a0,a1,a2,a3,s1) kprintf(s0);printhex(a0);\
  kprintf(") ");printhex(a1);kprintf("-");printhex(a2);kprintf(" ");\
  printhex(a3);kprintf(" ");kprintf(s1);kprintf("\n");
//print_pgdir - print the PDT&PT
void print_pgdir(void)
{
8001d1e4:	afb60048 	sw	s6,72(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:418
	size_t left, right = 0, perm;
	kprintf("---------------- PAGE Directory BEGIN ----------------\n");
8001d1e8:	24844358 	addiu	a0,a0,17240
8001d1ec:	3c168015 	lui	s6,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:416
#define PRINT_PTE(s0, a0,a1,a2,a3,s1) kprintf(s0);printhex(a0);\
  kprintf(") ");printhex(a1);kprintf("-");printhex(a2);kprintf(" ");\
  printhex(a3);kprintf(" ");kprintf(s1);kprintf("\n");
//print_pgdir - print the PDT&PT
void print_pgdir(void)
{
8001d1f0:	afbe0050 	sw	s8,80(sp)
8001d1f4:	afb00030 	sw	s0,48(sp)
8001d1f8:	afbf0054 	sw	ra,84(sp)
8001d1fc:	afb7004c 	sw	s7,76(sp)
8001d200:	afb50044 	sw	s5,68(sp)
8001d204:	afb40040 	sw	s4,64(sp)
8001d208:	afb3003c 	sw	s3,60(sp)
8001d20c:	afb20038 	sw	s2,56(sp)
8001d210:	afb10034 	sw	s1,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:418
	size_t left, right = 0, perm;
	kprintf("---------------- PAGE Directory BEGIN ----------------\n");
8001d214:	0c007a9e 	jal	8001ea78 <kprintf>
8001d218:	afa00018 	sw	zero,24(sp)
8001d21c:	8fa40018 	lw	a0,24(sp)
8001d220:	8ec57768 	lw	a1,30568(s6)
perm2str():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:367

//perm2str - use string 'u,r,w,-' to present the permission
static const char *perm2str(int perm)
{
	static char str[4];
	str[0] = (perm & PTE_U) ? 'u' : '-';
8001d224:	3c1e8015 	lui	s8,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:368
	str[1] = 'r';
8001d228:	27d07774 	addiu	s0,s8,30580
get_pgtable_items():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:389
// return value: 0 - not a invalid item range, perm - a valid item range with perm permission
static int
get_pgtable_items(size_t left, size_t right, size_t start, uintptr_t * table,
		  size_t * left_store, size_t * right_store)
{
	if (start >= right) {
8001d22c:	2c820400 	sltiu	v0,a0,1024
8001d230:	14400010 	bnez	v0,8001d274 <print_pgdir+0x98>
8001d234:	27a6001c 	addiu	a2,sp,28
print_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:461
					count_ref_l = r;
				}
			}
		}
	}
	kprintf("---------------- PAGE Directory END ------------------\n");
8001d238:	3c048002 	lui	a0,0x8002
8001d23c:	0c007a9e 	jal	8001ea78 <kprintf>
8001d240:	248443ac 	addiu	a0,a0,17324
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:462
}
8001d244:	8fbf0054 	lw	ra,84(sp)
8001d248:	8fbe0050 	lw	s8,80(sp)
8001d24c:	8fb7004c 	lw	s7,76(sp)
8001d250:	8fb60048 	lw	s6,72(sp)
8001d254:	8fb50044 	lw	s5,68(sp)
8001d258:	8fb40040 	lw	s4,64(sp)
8001d25c:	8fb3003c 	lw	s3,60(sp)
8001d260:	8fb20038 	lw	s2,56(sp)
8001d264:	8fb10034 	lw	s1,52(sp)
8001d268:	8fb00030 	lw	s0,48(sp)
8001d26c:	03e00008 	jr	ra
8001d270:	27bd0058 	addiu	sp,sp,88
get_pgtable_items():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:389
// return value: 0 - not a invalid item range, perm - a valid item range with perm permission
static int
get_pgtable_items(size_t left, size_t right, size_t start, uintptr_t * table,
		  size_t * left_store, size_t * right_store)
{
	if (start >= right) {
8001d274:	0c0073f0 	jal	8001cfc0 <get_pgtable_items.isra.0.part.1.constprop.3>
8001d278:	27a70018 	addiu	a3,sp,24
print_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:420
void print_pgdir(void)
{
	size_t left, right = 0, perm;
	kprintf("---------------- PAGE Directory BEGIN ----------------\n");
/* SZY comments: why this shows empty in QEMU emulator? */
	while ((perm =
8001d27c:	1040ffee 	beqz	v0,8001d238 <print_pgdir+0x5c>
8001d280:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:423
		get_pgtable_items(0, NPDEENTRY, right, current_pgdir, &left,
				  &right)) != 0) {
		PRINT_PTE("PDE(", right - left, left * PTSIZE, right * PTSIZE,
8001d284:	3c028002 	lui	v0,0x8002
8001d288:	0c007a9e 	jal	8001ea78 <kprintf>
8001d28c:	24444390 	addiu	a0,v0,17296
8001d290:	8fa2001c 	lw	v0,28(sp)
8001d294:	8fa40018 	lw	a0,24(sp)
8001d298:	3c138002 	lui	s3,0x8002
8001d29c:	3c158002 	lui	s5,0x8002
8001d2a0:	0c007aaa 	jal	8001eaa8 <printhex>
8001d2a4:	00822023 	subu	a0,a0,v0
8001d2a8:	3c048002 	lui	a0,0x8002
8001d2ac:	0c007a9e 	jal	8001ea78 <kprintf>
8001d2b0:	24844398 	addiu	a0,a0,17304
8001d2b4:	8fa4001c 	lw	a0,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:429
			  (right - left) * PTSIZE, perm2str(perm));
		size_t l, r = 0;

		size_t perm_ref = get_pgtable_items(0, NPTEENTRY, r,
						    (pte_t *)
						    PDE_ADDR(current_pgdir
8001d2b8:	3c128015 	lui	s2,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:423
	kprintf("---------------- PAGE Directory BEGIN ----------------\n");
/* SZY comments: why this shows empty in QEMU emulator? */
	while ((perm =
		get_pgtable_items(0, NPDEENTRY, right, current_pgdir, &left,
				  &right)) != 0) {
		PRINT_PTE("PDE(", right - left, left * PTSIZE, right * PTSIZE,
8001d2bc:	0c007aaa 	jal	8001eaa8 <printhex>
8001d2c0:	00042580 	sll	a0,a0,0x16
8001d2c4:	3c038002 	lui	v1,0x8002
8001d2c8:	0c007a9e 	jal	8001ea78 <kprintf>
8001d2cc:	2464439c 	addiu	a0,v1,17308
8001d2d0:	8fa40018 	lw	a0,24(sp)
8001d2d4:	0c007aaa 	jal	8001eaa8 <printhex>
8001d2d8:	00042580 	sll	a0,a0,0x16
8001d2dc:	0c007a9e 	jal	8001ea78 <kprintf>
8001d2e0:	26643ef0 	addiu	a0,s3,16112
8001d2e4:	8fa2001c 	lw	v0,28(sp)
8001d2e8:	8fa40018 	lw	a0,24(sp)
8001d2ec:	00822023 	subu	a0,a0,v0
8001d2f0:	0c007aaa 	jal	8001eaa8 <printhex>
8001d2f4:	00042580 	sll	a0,a0,0x16
8001d2f8:	0c007a9e 	jal	8001ea78 <kprintf>
8001d2fc:	26643ef0 	addiu	a0,s3,16112
perm2str():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:367

//perm2str - use string 'u,r,w,-' to present the permission
static const char *perm2str(int perm)
{
	static char str[4];
	str[0] = (perm & PTE_U) ? 'u' : '-';
8001d300:	32240004 	andi	a0,s1,0x4
8001d304:	2403002d 	li	v1,45
8001d308:	24020075 	li	v0,117
8001d30c:	0064100a 	movz	v0,v1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:369
	str[1] = 'r';
	str[2] = (perm & PTE_W) ? 'w' : '-';
8001d310:	32310002 	andi	s1,s1,0x2
8001d314:	24040077 	li	a0,119
8001d318:	0091180b 	movn	v1,a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:367

//perm2str - use string 'u,r,w,-' to present the permission
static const char *perm2str(int perm)
{
	static char str[4];
	str[0] = (perm & PTE_U) ? 'u' : '-';
8001d31c:	a3c27774 	sb	v0,30580(s8)
print_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:423
	kprintf("---------------- PAGE Directory BEGIN ----------------\n");
/* SZY comments: why this shows empty in QEMU emulator? */
	while ((perm =
		get_pgtable_items(0, NPDEENTRY, right, current_pgdir, &left,
				  &right)) != 0) {
		PRINT_PTE("PDE(", right - left, left * PTSIZE, right * PTSIZE,
8001d320:	02002021 	move	a0,s0
perm2str():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:368
//perm2str - use string 'u,r,w,-' to present the permission
static const char *perm2str(int perm)
{
	static char str[4];
	str[0] = (perm & PTE_U) ? 'u' : '-';
	str[1] = 'r';
8001d324:	24020072 	li	v0,114
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:369
	str[2] = (perm & PTE_W) ? 'w' : '-';
8001d328:	a2030002 	sb	v1,2(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:368
//perm2str - use string 'u,r,w,-' to present the permission
static const char *perm2str(int perm)
{
	static char str[4];
	str[0] = (perm & PTE_U) ? 'u' : '-';
	str[1] = 'r';
8001d32c:	a2020001 	sb	v0,1(s0)
print_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:423
	kprintf("---------------- PAGE Directory BEGIN ----------------\n");
/* SZY comments: why this shows empty in QEMU emulator? */
	while ((perm =
		get_pgtable_items(0, NPDEENTRY, right, current_pgdir, &left,
				  &right)) != 0) {
		PRINT_PTE("PDE(", right - left, left * PTSIZE, right * PTSIZE,
8001d330:	0c007a9e 	jal	8001ea78 <kprintf>
8001d334:	a2000003 	sb	zero,3(s0)
8001d338:	0c007a9e 	jal	8001ea78 <kprintf>
8001d33c:	26a43f2c 	addiu	a0,s5,16172
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:429
			  (right - left) * PTSIZE, perm2str(perm));
		size_t l, r = 0;

		size_t perm_ref = get_pgtable_items(0, NPTEENTRY, r,
						    (pte_t *)
						    PDE_ADDR(current_pgdir
8001d340:	8fa2001c 	lw	v0,28(sp)
8001d344:	8ec37768 	lw	v1,30568(s6)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:425
	while ((perm =
		get_pgtable_items(0, NPDEENTRY, right, current_pgdir, &left,
				  &right)) != 0) {
		PRINT_PTE("PDE(", right - left, left * PTSIZE, right * PTSIZE,
			  (right - left) * PTSIZE, perm2str(perm));
		size_t l, r = 0;
8001d348:	afa00010 	sw	zero,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:429

		size_t perm_ref = get_pgtable_items(0, NPTEENTRY, r,
						    (pte_t *)
						    PDE_ADDR(current_pgdir
8001d34c:	00021080 	sll	v0,v0,0x2
8001d350:	00621021 	addu	v0,v1,v0
8001d354:	8c450000 	lw	a1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:425
	while ((perm =
		get_pgtable_items(0, NPDEENTRY, right, current_pgdir, &left,
				  &right)) != 0) {
		PRINT_PTE("PDE(", right - left, left * PTSIZE, right * PTSIZE,
			  (right - left) * PTSIZE, perm2str(perm));
		size_t l, r = 0;
8001d358:	2402f000 	li	v0,-4096
8001d35c:	00002021 	move	a0,zero
8001d360:	00a22824 	and	a1,a1,v0
8001d364:	27a60014 	addiu	a2,sp,20
8001d368:	0c0073f0 	jal	8001cfc0 <get_pgtable_items.isra.0.part.1.constprop.3>
8001d36c:	27a70010 	addiu	a3,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:434
						    PDE_ADDR(current_pgdir
							     [left]),
						    &l, &r);
		size_t count, count_ref = 0;
		size_t count_ref_l = 0;
		for (count = 0; count < right - left; count++) {
8001d370:	8fa4001c 	lw	a0,28(sp)
8001d374:	8fa30018 	lw	v1,24(sp)
8001d378:	1083ffac 	beq	a0,v1,8001d22c <print_pgdir+0x50>
8001d37c:	8e457768 	lw	a1,30568(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:427
				  &right)) != 0) {
		PRINT_PTE("PDE(", right - left, left * PTSIZE, right * PTSIZE,
			  (right - left) * PTSIZE, perm2str(perm));
		size_t l, r = 0;

		size_t perm_ref = get_pgtable_items(0, NPTEENTRY, r,
8001d380:	00408821 	move	s1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:433
						    (pte_t *)
						    PDE_ADDR(current_pgdir
							     [left]),
						    &l, &r);
		size_t count, count_ref = 0;
		size_t count_ref_l = 0;
8001d384:	0000a021 	move	s4,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:427
				  &right)) != 0) {
		PRINT_PTE("PDE(", right - left, left * PTSIZE, right * PTSIZE,
			  (right - left) * PTSIZE, perm2str(perm));
		size_t l, r = 0;

		size_t perm_ref = get_pgtable_items(0, NPTEENTRY, r,
8001d388:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:432
						    (pte_t *)
						    PDE_ADDR(current_pgdir
							     [left]),
						    &l, &r);
		size_t count, count_ref = 0;
8001d38c:	0000b821 	move	s7,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:434
		size_t count_ref_l = 0;
		for (count = 0; count < right - left; count++) {
8001d390:	00009021 	move	s2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:444
							   [left + count]), &l,
						  &r)) != 0) {
				if (perm != perm_ref
				    || count == right - left - 1) {
					size_t total_entries =
					    (count - count_ref -
8001d394:	3c03003f 	lui	v1,0x3f
8001d398:	3463ffff 	ori	v1,v1,0xffff
8001d39c:	02431821 	addu	v1,s2,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:435
							     [left]),
						    &l, &r);
		size_t count, count_ref = 0;
		size_t count_ref_l = 0;
		for (count = 0; count < right - left; count++) {
			l = r = 0;
8001d3a0:	afa00010 	sw	zero,16(sp)
8001d3a4:	afa00014 	sw	zero,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:436
			while ((perm =
8001d3a8:	00002021 	move	a0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:444
							   [left + count]), &l,
						  &r)) != 0) {
				if (perm != perm_ref
				    || count == right - left - 1) {
					size_t total_entries =
					    (count - count_ref -
8001d3ac:	afa30024 	sw	v1,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:438
		size_t count_ref_l = 0;
		for (count = 0; count < right - left; count++) {
			l = r = 0;
			while ((perm =
				get_pgtable_items(0, NPTEENTRY, r, (pte_t *)
						  PDE_ADDR(current_pgdir
8001d3b0:	00521821 	addu	v1,v0,s2
8001d3b4:	00031880 	sll	v1,v1,0x2
8001d3b8:	00a31821 	addu	v1,a1,v1
get_pgtable_items():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:389
// return value: 0 - not a invalid item range, perm - a valid item range with perm permission
static int
get_pgtable_items(size_t left, size_t right, size_t start, uintptr_t * table,
		  size_t * left_store, size_t * right_store)
{
	if (start >= right) {
8001d3bc:	2c860400 	sltiu	a2,a0,1024
8001d3c0:	14c00009 	bnez	a2,8001d3e8 <print_pgdir+0x20c>
8001d3c4:	8c630000 	lw	v1,0(v1)
print_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:434
						    PDE_ADDR(current_pgdir
							     [left]),
						    &l, &r);
		size_t count, count_ref = 0;
		size_t count_ref_l = 0;
		for (count = 0; count < right - left; count++) {
8001d3c8:	8fa40018 	lw	a0,24(sp)
8001d3cc:	26520001 	addiu	s2,s2,1
8001d3d0:	00821823 	subu	v1,a0,v0
8001d3d4:	0243182b 	sltu	v1,s2,v1
8001d3d8:	5060ff95 	beqzl	v1,8001d230 <print_pgdir+0x54>
8001d3dc:	2c820400 	sltiu	v0,a0,1024
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:444
							   [left + count]), &l,
						  &r)) != 0) {
				if (perm != perm_ref
				    || count == right - left - 1) {
					size_t total_entries =
					    (count - count_ref -
8001d3e0:	080074e6 	j	8001d398 <print_pgdir+0x1bc>
8001d3e4:	3c03003f 	lui	v1,0x3f
get_pgtable_items():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:389
// return value: 0 - not a invalid item range, perm - a valid item range with perm permission
static int
get_pgtable_items(size_t left, size_t right, size_t start, uintptr_t * table,
		  size_t * left_store, size_t * right_store)
{
	if (start >= right) {
8001d3e8:	2402f000 	li	v0,-4096
8001d3ec:	27a60014 	addiu	a2,sp,20
8001d3f0:	00622824 	and	a1,v1,v0
8001d3f4:	0c0073f0 	jal	8001cfc0 <get_pgtable_items.isra.0.part.1.constprop.3>
8001d3f8:	27a70010 	addiu	a3,sp,16
8001d3fc:	00401821 	move	v1,v0
print_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:445
						  &r)) != 0) {
				if (perm != perm_ref
				    || count == right - left - 1) {
					size_t total_entries =
					    (count - count_ref -
					     1) * NPTEENTRY + (r - l) +
8001d400:	8fa20024 	lw	v0,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:447
					    (NPTEENTRY - count_ref_l);
					PRINT_PTE("  |-- PTE(", total_entries,
8001d404:	3c048002 	lui	a0,0x8002
8001d408:	248443a0 	addiu	a0,a0,17312
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:445
						  &r)) != 0) {
				if (perm != perm_ref
				    || count == right - left - 1) {
					size_t total_entries =
					    (count - count_ref -
					     1) * NPTEENTRY + (r - l) +
8001d40c:	00573023 	subu	a2,v0,s7
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:436
						    &l, &r);
		size_t count, count_ref = 0;
		size_t count_ref_l = 0;
		for (count = 0; count < right - left; count++) {
			l = r = 0;
			while ((perm =
8001d410:	10600049 	beqz	v1,8001d538 <print_pgdir+0x35c>
8001d414:	00063280 	sll	a2,a2,0xa
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:441
				get_pgtable_items(0, NPTEENTRY, r, (pte_t *)
						  PDE_ADDR(current_pgdir
							   [left + count]), &l,
						  &r)) != 0) {
				if (perm != perm_ref
8001d418:	1471000b 	bne	v1,s1,8001d448 <print_pgdir+0x26c>
8001d41c:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:442
				    || count == right - left - 1) {
8001d420:	8fa50018 	lw	a1,24(sp)
8001d424:	8fa2001c 	lw	v0,28(sp)
8001d428:	24a5ffff 	addiu	a1,a1,-1
8001d42c:	00a22823 	subu	a1,a1,v0
8001d430:	50b20005 	beql	a1,s2,8001d448 <print_pgdir+0x26c>
8001d434:	8fa20010 	lw	v0,16(sp)
8001d438:	8fa40010 	lw	a0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:456
						  r * PGSIZE,
						  total_entries * PGSIZE,
						  perm2str(perm_ref));
					perm_ref = perm;
					count_ref = count;
					count_ref_l = r;
8001d43c:	8ec57768 	lw	a1,30568(s6)
8001d440:	080074ec 	j	8001d3b0 <print_pgdir+0x1d4>
8001d444:	00608821 	move	s1,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:445
						  &r)) != 0) {
				if (perm != perm_ref
				    || count == right - left - 1) {
					size_t total_entries =
					    (count - count_ref -
					     1) * NPTEENTRY + (r - l) +
8001d448:	8fa50014 	lw	a1,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:447
					    (NPTEENTRY - count_ref_l);
					PRINT_PTE("  |-- PTE(", total_entries,
8001d44c:	afa30028 	sw	v1,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:445
						  &r)) != 0) {
				if (perm != perm_ref
				    || count == right - left - 1) {
					size_t total_entries =
					    (count - count_ref -
					     1) * NPTEENTRY + (r - l) +
8001d450:	24420400 	addiu	v0,v0,1024
8001d454:	00451023 	subu	v0,v0,a1
8001d458:	00541023 	subu	v0,v0,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:443
						  PDE_ADDR(current_pgdir
							   [left + count]), &l,
						  &r)) != 0) {
				if (perm != perm_ref
				    || count == right - left - 1) {
					size_t total_entries =
8001d45c:	00463021 	addu	a2,v0,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:447
					    (count - count_ref -
					     1) * NPTEENTRY + (r - l) +
					    (NPTEENTRY - count_ref_l);
					PRINT_PTE("  |-- PTE(", total_entries,
8001d460:	0c007a9e 	jal	8001ea78 <kprintf>
8001d464:	afa60020 	sw	a2,32(sp)
8001d468:	0c007aaa 	jal	8001eaa8 <printhex>
8001d46c:	8fa40020 	lw	a0,32(sp)
8001d470:	3c048002 	lui	a0,0x8002
8001d474:	0c007a9e 	jal	8001ea78 <kprintf>
8001d478:	24844398 	addiu	a0,a0,17304
8001d47c:	8fa2001c 	lw	v0,28(sp)
8001d480:	02e2b821 	addu	s7,s7,v0
8001d484:	0017ba80 	sll	s7,s7,0xa
8001d488:	02f4a021 	addu	s4,s7,s4
8001d48c:	0c007aaa 	jal	8001eaa8 <printhex>
8001d490:	00142300 	sll	a0,s4,0xc
8001d494:	3c028002 	lui	v0,0x8002
8001d498:	0c007a9e 	jal	8001ea78 <kprintf>
8001d49c:	2444439c 	addiu	a0,v0,17308
8001d4a0:	8fa4001c 	lw	a0,28(sp)
8001d4a4:	8fa20010 	lw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:456
						  r * PGSIZE,
						  total_entries * PGSIZE,
						  perm2str(perm_ref));
					perm_ref = perm;
					count_ref = count;
					count_ref_l = r;
8001d4a8:	0240b821 	move	s7,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:447
				    || count == right - left - 1) {
					size_t total_entries =
					    (count - count_ref -
					     1) * NPTEENTRY + (r - l) +
					    (NPTEENTRY - count_ref_l);
					PRINT_PTE("  |-- PTE(", total_entries,
8001d4ac:	02442021 	addu	a0,s2,a0
8001d4b0:	00042280 	sll	a0,a0,0xa
8001d4b4:	00822021 	addu	a0,a0,v0
8001d4b8:	0c007aaa 	jal	8001eaa8 <printhex>
8001d4bc:	00042300 	sll	a0,a0,0xc
8001d4c0:	0c007a9e 	jal	8001ea78 <kprintf>
8001d4c4:	26643ef0 	addiu	a0,s3,16112
8001d4c8:	8fa20020 	lw	v0,32(sp)
8001d4cc:	0c007aaa 	jal	8001eaa8 <printhex>
8001d4d0:	00022300 	sll	a0,v0,0xc
8001d4d4:	0c007a9e 	jal	8001ea78 <kprintf>
8001d4d8:	26643ef0 	addiu	a0,s3,16112
perm2str():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:367

//perm2str - use string 'u,r,w,-' to present the permission
static const char *perm2str(int perm)
{
	static char str[4];
	str[0] = (perm & PTE_U) ? 'u' : '-';
8001d4dc:	32260004 	andi	a2,s1,0x4
8001d4e0:	2404002d 	li	a0,45
8001d4e4:	24050075 	li	a1,117
8001d4e8:	0086280a 	movz	a1,a0,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:369
	str[1] = 'r';
	str[2] = (perm & PTE_W) ? 'w' : '-';
8001d4ec:	32310002 	andi	s1,s1,0x2
8001d4f0:	24020077 	li	v0,119
8001d4f4:	0091100a 	movz	v0,a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:367

//perm2str - use string 'u,r,w,-' to present the permission
static const char *perm2str(int perm)
{
	static char str[4];
	str[0] = (perm & PTE_U) ? 'u' : '-';
8001d4f8:	a3c57774 	sb	a1,30580(s8)
print_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:447
				    || count == right - left - 1) {
					size_t total_entries =
					    (count - count_ref -
					     1) * NPTEENTRY + (r - l) +
					    (NPTEENTRY - count_ref_l);
					PRINT_PTE("  |-- PTE(", total_entries,
8001d4fc:	02002021 	move	a0,s0
perm2str():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:368
//perm2str - use string 'u,r,w,-' to present the permission
static const char *perm2str(int perm)
{
	static char str[4];
	str[0] = (perm & PTE_U) ? 'u' : '-';
	str[1] = 'r';
8001d500:	24050072 	li	a1,114
8001d504:	a2050001 	sb	a1,1(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:369
	str[2] = (perm & PTE_W) ? 'w' : '-';
8001d508:	a2020002 	sb	v0,2(s0)
print_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:447
				    || count == right - left - 1) {
					size_t total_entries =
					    (count - count_ref -
					     1) * NPTEENTRY + (r - l) +
					    (NPTEENTRY - count_ref_l);
					PRINT_PTE("  |-- PTE(", total_entries,
8001d50c:	0c007a9e 	jal	8001ea78 <kprintf>
8001d510:	a2000003 	sb	zero,3(s0)
8001d514:	0c007a9e 	jal	8001ea78 <kprintf>
8001d518:	26a43f2c 	addiu	a0,s5,16172
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:456
						  r * PGSIZE,
						  total_entries * PGSIZE,
						  perm2str(perm_ref));
					perm_ref = perm;
					count_ref = count;
					count_ref_l = r;
8001d51c:	8fb40010 	lw	s4,16(sp)
8001d520:	8fa30028 	lw	v1,40(sp)
8001d524:	8fa2001c 	lw	v0,28(sp)
8001d528:	02802021 	move	a0,s4
8001d52c:	8ec57768 	lw	a1,30568(s6)
8001d530:	080074ec 	j	8001d3b0 <print_pgdir+0x1d4>
8001d534:	00608821 	move	s1,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:436
						    &l, &r);
		size_t count, count_ref = 0;
		size_t count_ref_l = 0;
		for (count = 0; count < right - left; count++) {
			l = r = 0;
			while ((perm =
8001d538:	8fa2001c 	lw	v0,28(sp)
8001d53c:	080074f2 	j	8001d3c8 <print_pgdir+0x1ec>
8001d540:	8ec57768 	lw	a1,30568(s6)

8001d544 <pmm_init>:
pmm_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:175
}

//pmm_init - setup a pmm to manage physical memory, build PDT&PT to setup paging mechanism 
//         - check the correctness of pmm & paging mechanism, print PDT&PT
void pmm_init(void)
{
8001d544:	27bdffc8 	addiu	sp,sp,-56
init_pmm_manager():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:44

//init_pmm_manager - initialize a pmm_manager instance
static void init_pmm_manager(void)
{
	pmm_manager = &buddy_pmm_manager;
	kprintf("memory management: ");
8001d548:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:43
}

//init_pmm_manager - initialize a pmm_manager instance
static void init_pmm_manager(void)
{
	pmm_manager = &buddy_pmm_manager;
8001d54c:	3c028002 	lui	v0,0x8002
pmm_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:175
}

//pmm_init - setup a pmm to manage physical memory, build PDT&PT to setup paging mechanism 
//         - check the correctness of pmm & paging mechanism, print PDT&PT
void pmm_init(void)
{
8001d550:	afb40020 	sw	s4,32(sp)
init_pmm_manager():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:44

//init_pmm_manager - initialize a pmm_manager instance
static void init_pmm_manager(void)
{
	pmm_manager = &buddy_pmm_manager;
	kprintf("memory management: ");
8001d554:	248443e4 	addiu	a0,a0,17380
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:43
}

//init_pmm_manager - initialize a pmm_manager instance
static void init_pmm_manager(void)
{
	pmm_manager = &buddy_pmm_manager;
8001d558:	3c148015 	lui	s4,0x8015
8001d55c:	24420968 	addiu	v0,v0,2408
pmm_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:175
}

//pmm_init - setup a pmm to manage physical memory, build PDT&PT to setup paging mechanism 
//         - check the correctness of pmm & paging mechanism, print PDT&PT
void pmm_init(void)
{
8001d560:	afbf0034 	sw	ra,52(sp)
8001d564:	afb60028 	sw	s6,40(sp)
8001d568:	afb50024 	sw	s5,36(sp)
8001d56c:	afb3001c 	sw	s3,28(sp)
8001d570:	afb10014 	sw	s1,20(sp)
8001d574:	afbe0030 	sw	s8,48(sp)
8001d578:	afb7002c 	sw	s7,44(sp)
8001d57c:	afb20018 	sw	s2,24(sp)
8001d580:	afb00010 	sw	s0,16(sp)
init_pmm_manager():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:44

//init_pmm_manager - initialize a pmm_manager instance
static void init_pmm_manager(void)
{
	pmm_manager = &buddy_pmm_manager;
	kprintf("memory management: ");
8001d584:	0c007a9e 	jal	8001ea78 <kprintf>
8001d588:	ae827794 	sw	v0,30612(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:45
	kprintf(pmm_manager->name);
8001d58c:	8e827794 	lw	v0,30612(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:46
	kprintf("\n\r");
8001d590:	3c158002 	lui	s5,0x8002
page_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:109
	kprintf(", 0x");
	printhex(KERNTOP);
	kprintf("]\n\r\n\r");

	maxpa = KERNTOP;
	npage = KMEMSIZE >> PGSHIFT;
8001d594:	3c118015 	lui	s1,0x8015
init_pmm_manager():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:45
//init_pmm_manager - initialize a pmm_manager instance
static void init_pmm_manager(void)
{
	pmm_manager = &buddy_pmm_manager;
	kprintf("memory management: ");
	kprintf(pmm_manager->name);
8001d598:	8c440000 	lw	a0,0(v0)
page_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:114
	npage = KMEMSIZE >> PGSHIFT;

	// end address of kernel
	extern char end[];
	// put page structure table at the end of kernel
	pages = (struct Page *)ROUNDUP_2N((void *)end, PGSHIFT);
8001d59c:	3c138015 	lui	s3,0x8015
init_pmm_manager():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:45
//init_pmm_manager - initialize a pmm_manager instance
static void init_pmm_manager(void)
{
	pmm_manager = &buddy_pmm_manager;
	kprintf("memory management: ");
	kprintf(pmm_manager->name);
8001d5a0:	0c007a9e 	jal	8001ea78 <kprintf>
8001d5a4:	0000b021 	move	s6,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:46
	kprintf("\n\r");
8001d5a8:	0c007a9e 	jal	8001ea78 <kprintf>
8001d5ac:	26a4474c 	addiu	a0,s5,18252
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:47
	pmm_manager->init();
8001d5b0:	8e827794 	lw	v0,30612(s4)
8001d5b4:	8c420004 	lw	v0,4(v0)
8001d5b8:	0040f809 	jalr	v0
8001d5bc:	00000000 	nop
page_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:101
{
	uint32_t maxpa;
	int i;

	//panic("unimpl");
	kprintf("memory map:\n\r");
8001d5c0:	3c048002 	lui	a0,0x8002
8001d5c4:	0c007a9e 	jal	8001ea78 <kprintf>
8001d5c8:	248443f8 	addiu	a0,a0,17400
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:102
	kprintf("    [0x");
8001d5cc:	3c048002 	lui	a0,0x8002
8001d5d0:	0c007a9e 	jal	8001ea78 <kprintf>
8001d5d4:	24844408 	addiu	a0,a0,17416
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:103
	printhex(KERNBASE);
8001d5d8:	3c048000 	lui	a0,0x8000
8001d5dc:	0c007aaa 	jal	8001eaa8 <printhex>
8001d5e0:	24841000 	addiu	a0,a0,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:104
	kprintf(", 0x");
8001d5e4:	3c048002 	lui	a0,0x8002
8001d5e8:	0c007a9e 	jal	8001ea78 <kprintf>
8001d5ec:	24844410 	addiu	a0,a0,17424
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:105
	printhex(KERNTOP);
8001d5f0:	3c048200 	lui	a0,0x8200
8001d5f4:	0c007aaa 	jal	8001eaa8 <printhex>
8001d5f8:	24841000 	addiu	a0,a0,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:106
	kprintf("]\n\r\n\r");
8001d5fc:	3c048002 	lui	a0,0x8002
8001d600:	0c007a9e 	jal	8001ea78 <kprintf>
8001d604:	24844418 	addiu	a0,a0,17432
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:114
	npage = KMEMSIZE >> PGSHIFT;

	// end address of kernel
	extern char end[];
	// put page structure table at the end of kernel
	pages = (struct Page *)ROUNDUP_2N((void *)end, PGSHIFT);
8001d608:	3c058016 	lui	a1,0x8016
8001d60c:	24a587bf 	addiu	a1,a1,-30785
8001d610:	00052b02 	srl	a1,a1,0xc
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:109
	kprintf(", 0x");
	printhex(KERNTOP);
	kprintf("]\n\r\n\r");

	maxpa = KERNTOP;
	npage = KMEMSIZE >> PGSHIFT;
8001d614:	24022000 	li	v0,8192
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:114

	// end address of kernel
	extern char end[];
	// put page structure table at the end of kernel
	pages = (struct Page *)ROUNDUP_2N((void *)end, PGSHIFT);
8001d618:	00052b00 	sll	a1,a1,0xc
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:109
	kprintf(", 0x");
	printhex(KERNTOP);
	kprintf("]\n\r\n\r");

	maxpa = KERNTOP;
	npage = KMEMSIZE >> PGSHIFT;
8001d61c:	ae227770 	sw	v0,30576(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:114

	// end address of kernel
	extern char end[];
	// put page structure table at the end of kernel
	pages = (struct Page *)ROUNDUP_2N((void *)end, PGSHIFT);
8001d620:	ae6577bc 	sw	a1,30652(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:117

	//reserve kernel pages, kernel space is reserved!
	for (i = 0; i < npage; i++) {
8001d624:	08007594 	j	8001d650 <pmm_init+0x10c>
8001d628:	00001021 	move	v0,zero
set_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:185
 * */
static __always_inline void set_bit(int nr, volatile uint32_t * addr)
{
	int intr_flag;
	local_intr_save(intr_flag);
	*addr |= (1 << nr);
8001d62c:	8e020004 	lw	v0,4(s0)
page_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:117
8001d630:	8e237770 	lw	v1,30576(s1)
8001d634:	26d60001 	addiu	s6,s6,1
set_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:185
8001d638:	34420001 	ori	v0,v0,0x1
page_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:117
8001d63c:	02c3202b 	sltu	a0,s6,v1
set_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:185
8001d640:	ae020004 	sw	v0,4(s0)
page_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:117
8001d644:	02c01021 	move	v0,s6
8001d648:	10800014 	beqz	a0,8001d69c <pmm_init+0x158>
8001d64c:	3c108015 	lui	s0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:118
		SetPageReserved(pages + i);
8001d650:	00028140 	sll	s0,v0,0x5
8001d654:	00b08021 	addu	s0,a1,s0
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8001d658:	40026000 	mfc0	v0,c0_status
8001d65c:	30420001 	andi	v0,v0,0x1
8001d660:	1040fff2 	beqz	v0,8001d62c <pmm_init+0xe8>
8001d664:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8001d668:	0c006d04 	jal	8001b410 <intr_disable>
8001d66c:	00000000 	nop
set_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:185
8001d670:	8e020004 	lw	v0,4(s0)
page_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:117
	extern char end[];
	// put page structure table at the end of kernel
	pages = (struct Page *)ROUNDUP_2N((void *)end, PGSHIFT);

	//reserve kernel pages, kernel space is reserved!
	for (i = 0; i < npage; i++) {
8001d674:	26d60001 	addiu	s6,s6,1
set_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:185
8001d678:	34420001 	ori	v0,v0,0x1
8001d67c:	ae020004 	sw	v0,4(s0)
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8001d680:	0c006d00 	jal	8001b400 <intr_enable>
8001d684:	3c108015 	lui	s0,0x8015
page_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:117
8001d688:	8e237770 	lw	v1,30576(s1)
set_bit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
8001d68c:	8e6577bc 	lw	a1,30652(s3)
page_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:117
8001d690:	02c3202b 	sltu	a0,s6,v1
8001d694:	1480ffee 	bnez	a0,8001d650 <pmm_init+0x10c>
8001d698:	02c01021 	move	v0,s6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:122
		SetPageReserved(pages + i);
	}

	uintptr_t freemem =
	    PADDR((uintptr_t) pages + sizeof(struct Page) * npage);
8001d69c:	00039140 	sll	s2,v1,0x5
8001d6a0:	3c168000 	lui	s6,0x8000
8001d6a4:	00b29021 	addu	s2,a1,s2
8001d6a8:	26d61000 	addiu	s6,s6,4096
8001d6ac:	0256102b 	sltu	v0,s2,s6
8001d6b0:	144002f7 	bnez	v0,8001e290 <pmm_init+0xd4c>
8001d6b4:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:123
	kprintf( "freemem start at:%x\n\r", freemem );
8001d6b8:	02402821 	move	a1,s2
8001d6bc:	0c007a9e 	jal	8001ea78 <kprintf>
8001d6c0:	24844420 	addiu	a0,a0,17440
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:125

	uint32_t mbegin = ROUNDUP_2N(freemem, PGSHIFT);
8001d6c4:	26420fff 	addiu	v0,s2,4095
8001d6c8:	00021302 	srl	v0,v0,0xc
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:127
	uint32_t mend = ROUNDDOWN_2N(KERNTOP, PGSHIFT);
	assert(mbegin < mend);
8001d6cc:	3c128200 	lui	s2,0x8200
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:125

	uintptr_t freemem =
	    PADDR((uintptr_t) pages + sizeof(struct Page) * npage);
	kprintf( "freemem start at:%x\n\r", freemem );

	uint32_t mbegin = ROUNDUP_2N(freemem, PGSHIFT);
8001d6d0:	00021300 	sll	v0,v0,0xc
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:127
	uint32_t mend = ROUNDDOWN_2N(KERNTOP, PGSHIFT);
	assert(mbegin < mend);
8001d6d4:	26521000 	addiu	s2,s2,4096
8001d6d8:	0052182b 	sltu	v1,v0,s2
8001d6dc:	106002e4 	beqz	v1,8001e270 <pmm_init+0xd2c>
8001d6e0:	3c177fff 	lui	s7,0x7fff
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
8001d6e4:	36f7f000 	ori	s7,s7,0xf000
8001d6e8:	8e047770 	lw	a0,30576(s0)
8001d6ec:	00571821 	addu	v1,v0,s7
8001d6f0:	00031b02 	srl	v1,v1,0xc
8001d6f4:	0064202b 	sltu	a0,v1,a0
8001d6f8:	108002db 	beqz	a0,8001e268 <pmm_init+0xd24>
8001d6fc:	8e857794 	lw	a1,30612(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
		panic("pa2page called with invalid pa");
	}
	return &pages[PPN(pa)];
8001d700:	8e6477bc 	lw	a0,30652(s3)
page_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:128
	init_memmap(pa2page(mbegin), (mend - mbegin) >> PGSHIFT);
8001d704:	02429023 	subu	s2,s2,v0
init_memmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:53
}

//init_memmap - call pmm->init_memmap to build Page struct for free memory  
static void init_memmap(struct Page *base, size_t n)
{
	pmm_manager->init_memmap(base, n);
8001d708:	8ca20008 	lw	v0,8(a1)
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
8001d70c:	00031940 	sll	v1,v1,0x5
page_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:128
	kprintf( "freemem start at:%x\n\r", freemem );

	uint32_t mbegin = ROUNDUP_2N(freemem, PGSHIFT);
	uint32_t mend = ROUNDDOWN_2N(KERNTOP, PGSHIFT);
	assert(mbegin < mend);
	init_memmap(pa2page(mbegin), (mend - mbegin) >> PGSHIFT);
8001d710:	00129302 	srl	s2,s2,0xc
init_memmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:53
}

//init_memmap - call pmm->init_memmap to build Page struct for free memory  
static void init_memmap(struct Page *base, size_t n)
{
	pmm_manager->init_memmap(base, n);
8001d714:	02402821 	move	a1,s2
8001d718:	0040f809 	jalr	v0
8001d71c:	00832021 	addu	a0,a0,v1
page_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:129

	uint32_t mbegin = ROUNDUP_2N(freemem, PGSHIFT);
	uint32_t mend = ROUNDDOWN_2N(KERNTOP, PGSHIFT);
	assert(mbegin < mend);
	init_memmap(pa2page(mbegin), (mend - mbegin) >> PGSHIFT);
	PRINT_HEX("free pages: ", (mend - mbegin) >> PGSHIFT);
8001d720:	3c048002 	lui	a0,0x8002
8001d724:	0c007a9e 	jal	8001ea78 <kprintf>
8001d728:	24844448 	addiu	a0,a0,17480
8001d72c:	02402021 	move	a0,s2
8001d730:	0c007aaa 	jal	8001eaa8 <printhex>
8001d734:	3c128002 	lui	s2,0x8002
8001d738:	0c007a9e 	jal	8001ea78 <kprintf>
8001d73c:	26443f2c 	addiu	a0,s2,16172
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:130
	PRINT_HEX("page structure size: ", sizeof(struct Page));
8001d740:	3c048002 	lui	a0,0x8002
8001d744:	0c007a9e 	jal	8001ea78 <kprintf>
8001d748:	24844458 	addiu	a0,a0,17496
8001d74c:	0c007aaa 	jal	8001eaa8 <printhex>
8001d750:	24040020 	li	a0,32
8001d754:	0c007a9e 	jal	8001ea78 <kprintf>
8001d758:	26443f2c 	addiu	a0,s2,16172
check_alloc_page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:250

extern int swap_init_ok;

static void check_alloc_page(void)
{
	pmm_manager->check();
8001d75c:	8e827794 	lw	v0,30612(s4)
8001d760:	8c420018 	lw	v0,24(v0)
8001d764:	0040f809 	jalr	v0
8001d768:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:251
	kprintf("check_alloc_page() succeeded!\n\r");
8001d76c:	3c048002 	lui	a0,0x8002
8001d770:	0c007a9e 	jal	8001ea78 <kprintf>
8001d774:	24844470 	addiu	a0,a0,17520
boot_alloc_page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:165
//boot_alloc_page - allocate one page using pmm->alloc_pages(1) 
// return value: the kernel virtual address of this allocated page
//note: this function is used to get the memory for PDT(Page Directory Table)&PT(Page Table)
static void *boot_alloc_page(void)
{
	struct Page *p = alloc_page();
8001d778:	0c007425 	jal	8001d094 <alloc_pages>
8001d77c:	24040001 	li	a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:166
	if (p == NULL) {
8001d780:	104002b3 	beqz	v0,8001e250 <pmm_init+0xd0c>
8001d784:	3c038015 	lui	v1,0x8015
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8001d788:	8c6477bc 	lw	a0,30652(v1)
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001d78c:	8e037770 	lw	v1,30576(s0)
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8001d790:	00441023 	subu	v0,v0,a0
8001d794:	00021143 	sra	v0,v0,0x5
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8001d798:	00021300 	sll	v0,v0,0xc
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001d79c:	00022302 	srl	a0,v0,0xc
8001d7a0:	0083182b 	sltu	v1,a0,v1
8001d7a4:	106002a3 	beqz	v1,8001e234 <pmm_init+0xcf0>
8001d7a8:	0057b823 	subu	s7,v0,s7
pmm_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:191

	//use pmm->check to verify the correctness of the alloc/free function in a pmm
	check_alloc_page();

	// create boot_pgdir, an initial page directory(Page Directory Table, PDT)
	boot_pgdir = boot_alloc_page();
8001d7ac:	3c148015 	lui	s4,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:192
	memset(boot_pgdir, 0, PGSIZE);
8001d7b0:	02e02021 	move	a0,s7
8001d7b4:	00002821 	move	a1,zero
8001d7b8:	24061000 	li	a2,4096
8001d7bc:	0c005c52 	jal	80017148 <memset>
8001d7c0:	ae97776c 	sw	s7,30572(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:193
	boot_cr3 = PADDR(boot_pgdir);
8001d7c4:	8e87776c 	lw	a3,30572(s4)
8001d7c8:	00f6b02b 	sltu	s6,a3,s6
8001d7cc:	16c00293 	bnez	s6,8001e21c <pmm_init+0xcd8>
8001d7d0:	8e027770 	lw	v0,30576(s0)
8001d7d4:	3c038015 	lui	v1,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:194
	current_pgdir = boot_pgdir;
8001d7d8:	3c058015 	lui	a1,0x8015
check_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:256
	kprintf("check_alloc_page() succeeded!\n\r");
}

static void check_pgdir(void)
{
	assert(npage <= KMEMSIZE / PGSIZE);
8001d7dc:	2c422001 	sltiu	v0,v0,8193
pmm_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:193
	check_alloc_page();

	// create boot_pgdir, an initial page directory(Page Directory Table, PDT)
	boot_pgdir = boot_alloc_page();
	memset(boot_pgdir, 0, PGSIZE);
	boot_cr3 = PADDR(boot_pgdir);
8001d7e0:	ac67779c 	sw	a3,30620(v1)
check_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:256
	kprintf("check_alloc_page() succeeded!\n\r");
}

static void check_pgdir(void)
{
	assert(npage <= KMEMSIZE / PGSIZE);
8001d7e4:	10400285 	beqz	v0,8001e1fc <pmm_init+0xcb8>
8001d7e8:	aca77768 	sw	a3,30568(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:257
	assert(boot_pgdir != NULL && (uint32_t) PGOFF(boot_pgdir) == 0);
8001d7ec:	10e0027b 	beqz	a3,8001e1dc <pmm_init+0xc98>
8001d7f0:	30e20fff 	andi	v0,a3,0xfff
8001d7f4:	14400279 	bnez	v0,8001e1dc <pmm_init+0xc98>
8001d7f8:	00e02021 	move	a0,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:258
	assert(get_page(boot_pgdir, 0x0, NULL) == NULL);
8001d7fc:	00002821 	move	a1,zero
8001d800:	0c005d1e 	jal	80017478 <get_page>
8001d804:	00003021 	move	a2,zero
8001d808:	1440026d 	bnez	v0,8001e1c0 <pmm_init+0xc7c>
8001d80c:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:261

	struct Page *p1, *p2;
	p1 = alloc_page();
8001d810:	0c007425 	jal	8001d094 <alloc_pages>
8001d814:	24040001 	li	a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:262
	assert(page_insert(boot_pgdir, p1, 0x0, 0) == 0);
8001d818:	8e84776c 	lw	a0,30572(s4)
8001d81c:	00402821 	move	a1,v0
8001d820:	00003021 	move	a2,zero
8001d824:	00003821 	move	a3,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:261
	assert(npage <= KMEMSIZE / PGSIZE);
	assert(boot_pgdir != NULL && (uint32_t) PGOFF(boot_pgdir) == 0);
	assert(get_page(boot_pgdir, 0x0, NULL) == NULL);

	struct Page *p1, *p2;
	p1 = alloc_page();
8001d828:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:262
	assert(page_insert(boot_pgdir, p1, 0x0, 0) == 0);
8001d82c:	0c005dcd 	jal	80017734 <page_insert>
8001d830:	3c168015 	lui	s6,0x8015
8001d834:	1440025a 	bnez	v0,8001e1a0 <pmm_init+0xc5c>
8001d838:	00002821 	move	a1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:265

	pte_t *ptep;
	assert((ptep = get_pte(boot_pgdir, 0x0, 0)) != NULL);
8001d83c:	8ec4776c 	lw	a0,30572(s6)
8001d840:	0c005ccc 	jal	80017330 <get_pte>
8001d844:	00003021 	move	a2,zero
8001d848:	1040024d 	beqz	v0,8001e180 <pmm_init+0xc3c>
8001d84c:	3c037fff 	lui	v1,0x7fff
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
8001d850:	8c440000 	lw	a0,0(v0)
8001d854:	3463f000 	ori	v1,v1,0xf000
8001d858:	8e227770 	lw	v0,30576(s1)
8001d85c:	00832021 	addu	a0,a0,v1
8001d860:	00042302 	srl	a0,a0,0xc
8001d864:	0082282b 	sltu	a1,a0,v0
8001d868:	10a0027f 	beqz	a1,8001e268 <pmm_init+0xd24>
8001d86c:	8e6577bc 	lw	a1,30652(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
		panic("pa2page called with invalid pa");
	}
	return &pages[PPN(pa)];
8001d870:	00042140 	sll	a0,a0,0x5
8001d874:	00a42021 	addu	a0,a1,a0
check_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:266
	assert(pa2page(*ptep) == p1);
8001d878:	1604023e 	bne	s0,a0,8001e174 <pmm_init+0xc30>
8001d87c:	3c048002 	lui	a0,0x8002
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
 *
 * Atomically reads the value of @v.
 * */
static __always_inline int atomic_read(const atomic_t * v)
{
	return v->counter;
8001d880:	8e050000 	lw	a1,0(s0)
check_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:267
	assert(page_ref(p1) == 1);
8001d884:	24040001 	li	a0,1
8001d888:	14a40236 	bne	a1,a0,8001e164 <pmm_init+0xc20>
8001d88c:	8ec4776c 	lw	a0,30572(s6)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:269

	ptep = &((pte_t *) KADDR(PDE_ADDR(boot_pgdir[0])))[1];
8001d890:	2405f000 	li	a1,-4096
8001d894:	8c920000 	lw	s2,0(a0)
8001d898:	02459024 	and	s2,s2,a1
8001d89c:	02431821 	addu	v1,s2,v1
8001d8a0:	00031b02 	srl	v1,v1,0xc
8001d8a4:	0062102b 	sltu	v0,v1,v0
8001d8a8:	50400228 	beqzl	v0,8001e14c <pmm_init+0xc08>
8001d8ac:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:270
	assert(get_pte(boot_pgdir, PGSIZE, 0) == ptep);
8001d8b0:	24051000 	li	a1,4096
8001d8b4:	0c005ccc 	jal	80017330 <get_pte>
8001d8b8:	00003021 	move	a2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:269
	pte_t *ptep;
	assert((ptep = get_pte(boot_pgdir, 0x0, 0)) != NULL);
	assert(pa2page(*ptep) == p1);
	assert(page_ref(p1) == 1);

	ptep = &((pte_t *) KADDR(PDE_ADDR(boot_pgdir[0])))[1];
8001d8bc:	26520004 	addiu	s2,s2,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:270
	assert(get_pte(boot_pgdir, PGSIZE, 0) == ptep);
8001d8c0:	1452021b 	bne	v0,s2,8001e130 <pmm_init+0xbec>
8001d8c4:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:272

	p2 = alloc_page();
8001d8c8:	0c007425 	jal	8001d094 <alloc_pages>
8001d8cc:	24040001 	li	a0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:273
	assert(page_insert(boot_pgdir, p2, PGSIZE, PTE_U | PTE_W) == 0);
8001d8d0:	8ec4776c 	lw	a0,30572(s6)
8001d8d4:	00402821 	move	a1,v0
8001d8d8:	24061000 	li	a2,4096
8001d8dc:	24070006 	li	a3,6
8001d8e0:	0c005dcd 	jal	80017734 <page_insert>
8001d8e4:	00409021 	move	s2,v0
8001d8e8:	1440020a 	bnez	v0,8001e114 <pmm_init+0xbd0>
8001d8ec:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:274
	assert((ptep = get_pte(boot_pgdir, PGSIZE, 0)) != NULL);
8001d8f0:	8ec4776c 	lw	a0,30572(s6)
8001d8f4:	24051000 	li	a1,4096
8001d8f8:	0c005ccc 	jal	80017330 <get_pte>
8001d8fc:	00003021 	move	a2,zero
8001d900:	10400201 	beqz	v0,8001e108 <pmm_init+0xbc4>
8001d904:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:275
	assert(*ptep & PTE_U);
8001d908:	8c420000 	lw	v0,0(v0)
8001d90c:	30430004 	andi	v1,v0,0x4
8001d910:	106001f6 	beqz	v1,8001e0ec <pmm_init+0xba8>
8001d914:	30420002 	andi	v0,v0,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:276
	assert(*ptep & PTE_W);
8001d918:	504001ee 	beqzl	v0,8001e0d4 <pmm_init+0xb90>
8001d91c:	3c068002 	lui	a2,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:277
	assert(boot_pgdir[0] & PTE_U);
8001d920:	8e84776c 	lw	a0,30572(s4)
8001d924:	8c820000 	lw	v0,0(a0)
8001d928:	30420004 	andi	v0,v0,0x4
8001d92c:	504001e2 	beqzl	v0,8001e0b8 <pmm_init+0xb74>
8001d930:	3c048002 	lui	a0,0x8002
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
8001d934:	8e430000 	lw	v1,0(s2)
check_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:278
	assert(page_ref(p2) == 1);
8001d938:	24020001 	li	v0,1
8001d93c:	546201d7 	bnel	v1,v0,8001e09c <pmm_init+0xb58>
8001d940:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:280

	assert(page_insert(boot_pgdir, p1, PGSIZE, 0) == 0);
8001d944:	02002821 	move	a1,s0
8001d948:	24061000 	li	a2,4096
8001d94c:	0c005dcd 	jal	80017734 <page_insert>
8001d950:	00003821 	move	a3,zero
8001d954:	144001ca 	bnez	v0,8001e080 <pmm_init+0xb3c>
8001d958:	3c048002 	lui	a0,0x8002
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
8001d95c:	8e030000 	lw	v1,0(s0)
check_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:281
	assert(page_ref(p1) == 2);
8001d960:	24020002 	li	v0,2
8001d964:	146201c0 	bne	v1,v0,8001e068 <pmm_init+0xb24>
8001d968:	3c068002 	lui	a2,0x8002
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
8001d96c:	8e420000 	lw	v0,0(s2)
check_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:282
	assert(page_ref(p2) == 0);
8001d970:	144001ba 	bnez	v0,8001e05c <pmm_init+0xb18>
8001d974:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:283
	assert((ptep = get_pte(boot_pgdir, PGSIZE, 0)) != NULL);
8001d978:	8c44776c 	lw	a0,30572(v0)
8001d97c:	24051000 	li	a1,4096
8001d980:	0c005ccc 	jal	80017330 <get_pte>
8001d984:	00003021 	move	a2,zero
8001d988:	104001ac 	beqz	v0,8001e03c <pmm_init+0xaf8>
8001d98c:	3c037fff 	lui	v1,0x7fff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:284
	assert(pa2page(*ptep) == p1);
8001d990:	8c420000 	lw	v0,0(v0)
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
8001d994:	8e247770 	lw	a0,30576(s1)
8001d998:	3463f000 	ori	v1,v1,0xf000
8001d99c:	00431821 	addu	v1,v0,v1
8001d9a0:	00031b02 	srl	v1,v1,0xc
8001d9a4:	0064202b 	sltu	a0,v1,a0
8001d9a8:	1080022f 	beqz	a0,8001e268 <pmm_init+0xd24>
8001d9ac:	8e6477bc 	lw	a0,30652(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
		panic("pa2page called with invalid pa");
	}
	return &pages[PPN(pa)];
8001d9b0:	00031940 	sll	v1,v1,0x5
8001d9b4:	00831821 	addu	v1,a0,v1
check_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:284
8001d9b8:	16030198 	bne	s0,v1,8001e01c <pmm_init+0xad8>
8001d9bc:	30420004 	andi	v0,v0,0x4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:285
	assert((*ptep & PTE_U) == 0);
8001d9c0:	1440018e 	bnez	v0,8001dffc <pmm_init+0xab8>
8001d9c4:	8e84776c 	lw	a0,30572(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:287

	page_remove(boot_pgdir, 0x0);
8001d9c8:	00002821 	move	a1,zero
8001d9cc:	0c005e37 	jal	800178dc <page_remove>
8001d9d0:	3c168015 	lui	s6,0x8015
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
8001d9d4:	8e170000 	lw	s7,0(s0)
check_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:288
	assert(page_ref(p1) == 1);
8001d9d8:	24020001 	li	v0,1
8001d9dc:	16e20180 	bne	s7,v0,8001dfe0 <pmm_init+0xa9c>
8001d9e0:	3c048002 	lui	a0,0x8002
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
8001d9e4:	8e420000 	lw	v0,0(s2)
check_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:289
	assert(page_ref(p2) == 0);
8001d9e8:	14400179 	bnez	v0,8001dfd0 <pmm_init+0xa8c>
8001d9ec:	8ec4776c 	lw	a0,30572(s6)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:291

	page_remove(boot_pgdir, PGSIZE);
8001d9f0:	0c005e37 	jal	800178dc <page_remove>
8001d9f4:	24051000 	li	a1,4096
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
8001d9f8:	8e020000 	lw	v0,0(s0)
check_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:292
	assert(page_ref(p1) == 0);
8001d9fc:	1440016d 	bnez	v0,8001dfb4 <pmm_init+0xa70>
8001da00:	3c048002 	lui	a0,0x8002
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
8001da04:	8e420000 	lw	v0,0(s2)
check_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:293
	assert(page_ref(p2) == 0);
8001da08:	14400163 	bnez	v0,8001df98 <pmm_init+0xa54>
8001da0c:	8ec2776c 	lw	v0,30572(s6)
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
8001da10:	3c107fff 	lui	s0,0x7fff
8001da14:	3610f000 	ori	s0,s0,0xf000
8001da18:	8c420000 	lw	v0,0(v0)
8001da1c:	8e237770 	lw	v1,30576(s1)
8001da20:	00501021 	addu	v0,v0,s0
8001da24:	00021302 	srl	v0,v0,0xc
8001da28:	0043182b 	sltu	v1,v0,v1
8001da2c:	1060020e 	beqz	v1,8001e268 <pmm_init+0xd24>
8001da30:	8e6477bc 	lw	a0,30652(s3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
		panic("pa2page called with invalid pa");
	}
	return &pages[PPN(pa)];
8001da34:	00021140 	sll	v0,v0,0x5
8001da38:	00822021 	addu	a0,a0,v0
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
8001da3c:	8c820000 	lw	v0,0(a0)
check_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:295

	assert(page_ref(pa2page(boot_pgdir[0])) == 1);
8001da40:	5457014e 	bnel	v0,s7,8001df7c <pmm_init+0xa38>
8001da44:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:296
	free_page(pa2page(boot_pgdir[0]));
8001da48:	0c007441 	jal	8001d104 <free_pages>
8001da4c:	24050001 	li	a1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:297
	boot_pgdir[0] = 0;
8001da50:	8ec2776c 	lw	v0,30572(s6)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:299

	kprintf("check_pgdir() succeeded!\n\r");
8001da54:	3c048002 	lui	a0,0x8002
8001da58:	24844734 	addiu	a0,a0,18228
8001da5c:	0c007a9e 	jal	8001ea78 <kprintf>
8001da60:	ac400000 	sw	zero,0(v0)
pmm_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:198
	boot_cr3 = PADDR(boot_pgdir);
	current_pgdir = boot_pgdir;

	check_pgdir();
	//FPGA
	boot_map_segment(boot_pgdir, KERNBASE, KMEMSIZE, 0, PTE_W);
8001da64:	8ed6776c 	lw	s6,30572(s6)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:151
boot_map_segment(pde_t * pgdir, uintptr_t la, size_t size, uintptr_t pa,
		 uint32_t perm)
{
	assert(PGOFF(la) == PGOFF(pa));
	size_t n = ROUNDUP_2N(size + PGOFF(la), PGSHIFT) >> PGSHIFT;
	la = ROUNDDOWN_2N(la, PGSHIFT);
8001da68:	3c128000 	lui	s2,0x8000
boot_map_segment():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:153
	pa = ROUNDDOWN_2N(pa, PGSHIFT);
	for (; n > 0; n--, la += PGSIZE, pa += PGSIZE) {
8001da6c:	3c178200 	lui	s7,0x8200
pmm_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:151
boot_map_segment(pde_t * pgdir, uintptr_t la, size_t size, uintptr_t pa,
		 uint32_t perm)
{
	assert(PGOFF(la) == PGOFF(pa));
	size_t n = ROUNDUP_2N(size + PGOFF(la), PGSHIFT) >> PGSHIFT;
	la = ROUNDDOWN_2N(la, PGSHIFT);
8001da70:	26521000 	addiu	s2,s2,4096
boot_map_segment():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:153
	pa = ROUNDDOWN_2N(pa, PGSHIFT);
	for (; n > 0; n--, la += PGSIZE, pa += PGSIZE) {
8001da74:	26f71000 	addiu	s7,s7,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:154
		pte_t *ptep = get_pte(pgdir, la, 1);
8001da78:	02c02021 	move	a0,s6
8001da7c:	02402821 	move	a1,s2
8001da80:	0c005ccc 	jal	80017330 <get_pte>
8001da84:	24060001 	li	a2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:155
		assert(ptep != NULL);
8001da88:	10400134 	beqz	v0,8001df5c <pmm_init+0xa18>
8001da8c:	02501821 	addu	v1,s2,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:156
		*ptep = pa | PTE_P | perm;
8001da90:	34630003 	ori	v1,v1,0x3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:153
{
	assert(PGOFF(la) == PGOFF(pa));
	size_t n = ROUNDUP_2N(size + PGOFF(la), PGSHIFT) >> PGSHIFT;
	la = ROUNDDOWN_2N(la, PGSHIFT);
	pa = ROUNDDOWN_2N(pa, PGSHIFT);
	for (; n > 0; n--, la += PGSIZE, pa += PGSIZE) {
8001da94:	26521000 	addiu	s2,s2,4096
8001da98:	1657fff7 	bne	s2,s7,8001da78 <pmm_init+0x534>
8001da9c:	ac430000 	sw	v1,0(v0)
pmm_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:205
	/* SZY comments: 1: 0x80000000 (KERNBASE) and up should be mapped to physical pages with exactly the same physical address? */
	/* 2: 0x80000000 = (KERNBASE) 2GB? 
	one root page table entry covers 1024 4KB pages, which means 4MB, low virtual address here. 
	what's your purpose here? */
	//virtual_addr 3G~3G+4M = linear_addr 0~4M = linear_addr 3G~3G+4M = phy_addr 0~4M
	boot_pgdir[0] = boot_pgdir[PDX(KERNBASE)];
8001daa0:	8e82776c 	lw	v0,30572(s4)
lcr3():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:37
static void check_pgdir(void);
static void check_boot_pgdir(void);

void lcr3(uintptr_t cr3)
{
	current_pgdir = (pde_t *) cr3;
8001daa4:	3c058015 	lui	a1,0x8015
check_boot_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:311
//unsigned int k;
	//assert(PDE_ADDR(boot_pgdir[PDX(VPT)]) == PADDR(boot_pgdir));

	assert(boot_pgdir[0] == 0);
	struct Page *p;
	p = alloc_page();
8001daa8:	24040001 	li	a0,1
pmm_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:205
	/* SZY comments: 1: 0x80000000 (KERNBASE) and up should be mapped to physical pages with exactly the same physical address? */
	/* 2: 0x80000000 = (KERNBASE) 2GB? 
	one root page table entry covers 1024 4KB pages, which means 4MB, low virtual address here. 
	what's your purpose here? */
	//virtual_addr 3G~3G+4M = linear_addr 0~4M = linear_addr 3G~3G+4M = phy_addr 0~4M
	boot_pgdir[0] = boot_pgdir[PDX(KERNBASE)];
8001daac:	8c430800 	lw	v1,2048(v0)
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8001dab0:	3c1e8015 	lui	s8,0x8015
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001dab4:	3c178015 	lui	s7,0x8015
pmm_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:205
8001dab8:	ac430000 	sw	v1,0(v0)
lcr3():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:37
static void check_pgdir(void);
static void check_boot_pgdir(void);

void lcr3(uintptr_t cr3)
{
	current_pgdir = (pde_t *) cr3;
8001dabc:	8ca3779c 	lw	v1,30620(a1)
8001dac0:	3c058015 	lui	a1,0x8015
8001dac4:	aca37768 	sw	v1,30568(a1)
check_boot_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:311
//unsigned int k;
	//assert(PDE_ADDR(boot_pgdir[PDX(VPT)]) == PADDR(boot_pgdir));

	assert(boot_pgdir[0] == 0);
	struct Page *p;
	p = alloc_page();
8001dac8:	0c007425 	jal	8001d094 <alloc_pages>
8001dacc:	ac400000 	sw	zero,0(v0)
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8001dad0:	8e6777bc 	lw	a3,30652(s3)
check_boot_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:311
8001dad4:	00409021 	move	s2,v0
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001dad8:	8e227770 	lw	v0,30576(s1)
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8001dadc:	02473823 	subu	a3,s2,a3
8001dae0:	00073943 	sra	a3,a3,0x5
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8001dae4:	00073b00 	sll	a3,a3,0xc
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001dae8:	00071b02 	srl	v1,a3,0xc
8001daec:	0062102b 	sltu	v0,v1,v0
8001daf0:	10400229 	beqz	v0,8001e398 <pmm_init+0xe54>
8001daf4:	00f03823 	subu	a3,a3,s0
check_boot_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:313
	*(int *)(page2kva(p) + 0x100) = 0x1234;
	kprintf("page2kva(p):0x%08x",page2kva(p));
8001daf8:	3c028002 	lui	v0,0x8002
8001dafc:	24444750 	addiu	a0,v0,18256
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:312
	//assert(PDE_ADDR(boot_pgdir[PDX(VPT)]) == PADDR(boot_pgdir));

	assert(boot_pgdir[0] == 0);
	struct Page *p;
	p = alloc_page();
	*(int *)(page2kva(p) + 0x100) = 0x1234;
8001db00:	24021234 	li	v0,4660
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:313
	kprintf("page2kva(p):0x%08x",page2kva(p));
8001db04:	00e02821 	move	a1,a3
8001db08:	0c007a9e 	jal	8001ea78 <kprintf>
8001db0c:	ace20100 	sw	v0,256(a3)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:314
	kprintf("\n\r");
8001db10:	0c007a9e 	jal	8001ea78 <kprintf>
8001db14:	26a4474c 	addiu	a0,s5,18252
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8001db18:	8fc777bc 	lw	a3,30652(s8)
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001db1c:	8ee27770 	lw	v0,30576(s7)
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8001db20:	02473823 	subu	a3,s2,a3
8001db24:	00073943 	sra	a3,a3,0x5
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8001db28:	00073b00 	sll	a3,a3,0xc
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001db2c:	00071b02 	srl	v1,a3,0xc
8001db30:	0062102b 	sltu	v0,v1,v0
8001db34:	10400218 	beqz	v0,8001e398 <pmm_init+0xe54>
8001db38:	00f03823 	subu	a3,a3,s0
check_boot_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:315
	kprintf("*(int*)(page2kva(p)+0x100):0x%08x",*(int*)(page2kva(p)+0x100));
8001db3c:	8ce50100 	lw	a1,256(a3)
8001db40:	3c168002 	lui	s6,0x8002
8001db44:	0c007a9e 	jal	8001ea78 <kprintf>
8001db48:	26c44764 	addiu	a0,s6,18276
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:317

	assert(page_insert(boot_pgdir, p, 0x100, PTE_W) == 0);
8001db4c:	3c038015 	lui	v1,0x8015
8001db50:	8c64776c 	lw	a0,30572(v1)
8001db54:	02402821 	move	a1,s2
8001db58:	24060100 	li	a2,256
8001db5c:	0c005dcd 	jal	80017734 <page_insert>
8001db60:	24070002 	li	a3,2
8001db64:	14400205 	bnez	v0,8001e37c <pmm_init+0xe38>
8001db68:	3c048002 	lui	a0,0x8002
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
8001db6c:	8e430000 	lw	v1,0(s2)
check_boot_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:318
	assert(page_ref(p) == 1);
8001db70:	24020001 	li	v0,1
8001db74:	146201fa 	bne	v1,v0,8001e360 <pmm_init+0xe1c>
8001db78:	8ee27770 	lw	v0,30576(s7)
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8001db7c:	8fc777bc 	lw	a3,30652(s8)
8001db80:	02473823 	subu	a3,s2,a3
8001db84:	00073943 	sra	a3,a3,0x5
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8001db88:	00073b00 	sll	a3,a3,0xc
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001db8c:	00071b02 	srl	v1,a3,0xc
8001db90:	0062102b 	sltu	v0,v1,v0
8001db94:	10400200 	beqz	v0,8001e398 <pmm_init+0xe54>
8001db98:	00f03823 	subu	a3,a3,s0
check_boot_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:319
	kprintf("page2kva(p):0x%08x",page2kva(p));
8001db9c:	3c058002 	lui	a1,0x8002
8001dba0:	24a44750 	addiu	a0,a1,18256
8001dba4:	0c007a9e 	jal	8001ea78 <kprintf>
8001dba8:	00e02821 	move	a1,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:320
	kprintf("\n\r");
8001dbac:	3c028002 	lui	v0,0x8002
8001dbb0:	0c007a9e 	jal	8001ea78 <kprintf>
8001dbb4:	2444474c 	addiu	a0,v0,18252
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8001dbb8:	8fc277bc 	lw	v0,30652(s8)
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001dbbc:	8ee37770 	lw	v1,30576(s7)
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8001dbc0:	02421023 	subu	v0,s2,v0
8001dbc4:	00021143 	sra	v0,v0,0x5
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8001dbc8:	00021300 	sll	v0,v0,0xc
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001dbcc:	00022302 	srl	a0,v0,0xc
8001dbd0:	0083182b 	sltu	v1,a0,v1
8001dbd4:	106001db 	beqz	v1,8001e344 <pmm_init+0xe00>
8001dbd8:	00508023 	subu	s0,v0,s0
check_boot_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:321
	kprintf("*(int*)(page2kva(p)+0x100):0x%08x",*(int*)(page2kva(p)+0x100));
8001dbdc:	8e050100 	lw	a1,256(s0)
8001dbe0:	0c007a9e 	jal	8001ea78 <kprintf>
8001dbe4:	26c44764 	addiu	a0,s6,18276
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:322
	kprintf("\n\r");
8001dbe8:	3c038002 	lui	v1,0x8002
8001dbec:	0c007a9e 	jal	8001ea78 <kprintf>
8001dbf0:	2464474c 	addiu	a0,v1,18252
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:323
	kprintf("*(int*)(0x100):0x%08x",*(int*)(0x100));
8001dbf4:	8c050100 	lw	a1,256(zero)
8001dbf8:	3c048002 	lui	a0,0x8002
8001dbfc:	0c007a9e 	jal	8001ea78 <kprintf>
8001dc00:	248447cc 	addiu	a0,a0,18380
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:324
	assert(page_insert(boot_pgdir, p, 0x100 + PGSIZE, PTE_W) == 0);
8001dc04:	3c058015 	lui	a1,0x8015
8001dc08:	8ca4776c 	lw	a0,30572(a1)
8001dc0c:	24061100 	li	a2,4352
8001dc10:	02402821 	move	a1,s2
8001dc14:	0c005dcd 	jal	80017734 <page_insert>
8001dc18:	24070002 	li	a3,2
8001dc1c:	544001c2 	bnezl	v0,8001e328 <pmm_init+0xde4>
8001dc20:	3c048002 	lui	a0,0x8002
atomic_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/atomic.h:22
8001dc24:	8e430000 	lw	v1,0(s2)
check_boot_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:325
	assert(page_ref(p) == 2);
8001dc28:	24020002 	li	v0,2
8001dc2c:	546201b7 	bnel	v1,v0,8001e30c <pmm_init+0xdc8>
8001dc30:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:327

	kprintf("\n\rHERE\n\r");
8001dc34:	3c048002 	lui	a0,0x8002
8001dc38:	0c007a9e 	jal	8001ea78 <kprintf>
8001dc3c:	24844830 	addiu	a0,a0,18480
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8001dc40:	8e6777bc 	lw	a3,30652(s3)
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001dc44:	8e227770 	lw	v0,30576(s1)
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
	return page - pages;
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8001dc48:	3c108000 	lui	s0,0x8000
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8001dc4c:	02473823 	subu	a3,s2,a3
8001dc50:	00073943 	sra	a3,a3,0x5
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8001dc54:	00073b00 	sll	a3,a3,0xc
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001dc58:	00071b02 	srl	v1,a3,0xc
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
	return page - pages;
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8001dc5c:	26101000 	addiu	s0,s0,4096
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001dc60:	0062102b 	sltu	v0,v1,v0
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8001dc64:	3c1e8015 	lui	s8,0x8015
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8001dc68:	00f03821 	addu	a3,a3,s0
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001dc6c:	104001ca 	beqz	v0,8001e398 <pmm_init+0xe54>
8001dc70:	3c178015 	lui	s7,0x8015
check_boot_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:328
	kprintf("page2kva(p):0x%08x",page2kva(p));
8001dc74:	3c028002 	lui	v0,0x8002
8001dc78:	00e02821 	move	a1,a3
8001dc7c:	0c007a9e 	jal	8001ea78 <kprintf>
8001dc80:	24444750 	addiu	a0,v0,18256
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:329
	kprintf("\n\r");
8001dc84:	0c007a9e 	jal	8001ea78 <kprintf>
8001dc88:	26a4474c 	addiu	a0,s5,18252
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8001dc8c:	8fc777bc 	lw	a3,30652(s8)
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001dc90:	8ee27770 	lw	v0,30576(s7)
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8001dc94:	02473823 	subu	a3,s2,a3
8001dc98:	00073943 	sra	a3,a3,0x5
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8001dc9c:	00073b00 	sll	a3,a3,0xc
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001dca0:	00071b02 	srl	v1,a3,0xc
8001dca4:	0062102b 	sltu	v0,v1,v0
8001dca8:	104001bb 	beqz	v0,8001e398 <pmm_init+0xe54>
8001dcac:	00f03821 	addu	a3,a3,s0
check_boot_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:330
	kprintf("*(int*)(page2kva(p)+0x100):0x%08x",*(int*)(page2kva(p)+0x100));
8001dcb0:	8ce50100 	lw	a1,256(a3)
8001dcb4:	0c007a9e 	jal	8001ea78 <kprintf>
8001dcb8:	26c44764 	addiu	a0,s6,18276
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:332
	//for(k=0x0;k<0x02000000;k+=0x1000)
	kprintf("\n\r*(int*)(0x100):0x%08x",*(int*)(0x100));
8001dcbc:	8c050100 	lw	a1,256(zero)
8001dcc0:	3c038002 	lui	v1,0x8002
8001dcc4:	0c007a9e 	jal	8001ea78 <kprintf>
8001dcc8:	2464483c 	addiu	a0,v1,18492
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:333
	kprintf("\n\r");
8001dccc:	3c058002 	lui	a1,0x8002
8001dcd0:	0c007a9e 	jal	8001ea78 <kprintf>
8001dcd4:	24a4474c 	addiu	a0,a1,18252
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8001dcd8:	8fc777bc 	lw	a3,30652(s8)
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001dcdc:	8ee27770 	lw	v0,30576(s7)
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8001dce0:	02473823 	subu	a3,s2,a3
8001dce4:	00073943 	sra	a3,a3,0x5
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8001dce8:	00073b00 	sll	a3,a3,0xc
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001dcec:	00071b02 	srl	v1,a3,0xc
8001dcf0:	0062102b 	sltu	v0,v1,v0
8001dcf4:	104001a8 	beqz	v0,8001e398 <pmm_init+0xe54>
8001dcf8:	00f03821 	addu	a3,a3,s0
check_boot_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:335
	
	kprintf("page2kva(p):0x%08x",page2kva(p));
8001dcfc:	3c028002 	lui	v0,0x8002
8001dd00:	00e02821 	move	a1,a3
8001dd04:	0c007a9e 	jal	8001ea78 <kprintf>
8001dd08:	24444750 	addiu	a0,v0,18256
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:336
	kprintf("\n\r");
8001dd0c:	3c038002 	lui	v1,0x8002
8001dd10:	0c007a9e 	jal	8001ea78 <kprintf>
8001dd14:	2464474c 	addiu	a0,v1,18252
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8001dd18:	8fc777bc 	lw	a3,30652(s8)
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001dd1c:	8ee27770 	lw	v0,30576(s7)
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8001dd20:	02473823 	subu	a3,s2,a3
8001dd24:	00073943 	sra	a3,a3,0x5
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8001dd28:	00073b00 	sll	a3,a3,0xc
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001dd2c:	00071b02 	srl	v1,a3,0xc
8001dd30:	0062102b 	sltu	v0,v1,v0
8001dd34:	10400198 	beqz	v0,8001e398 <pmm_init+0xe54>
8001dd38:	00f03821 	addu	a3,a3,s0
check_boot_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:337
	kprintf("*(int*)(page2kva(p)+0x100):0x%08x",*(int*)(page2kva(p)+0x100));
8001dd3c:	8ce50100 	lw	a1,256(a3)
8001dd40:	3c028002 	lui	v0,0x8002
8001dd44:	0c007a9e 	jal	8001ea78 <kprintf>
8001dd48:	24444764 	addiu	a0,v0,18276
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:338
	assert(*(int *)0x100 == 0x1234);
8001dd4c:	8c030100 	lw	v1,256(zero)
8001dd50:	24021234 	li	v0,4660
8001dd54:	14620165 	bne	v1,v0,8001e2ec <pmm_init+0xda8>
8001dd58:	3c058002 	lui	a1,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:340
	const char *str = "ucore: Hello world!!";
	strcpy((void *)0x100, str);
8001dd5c:	24040100 	li	a0,256
8001dd60:	0c005b92 	jal	80016e48 <strcpy>
8001dd64:	24a5486c 	addiu	a1,a1,18540
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:341
	kprintf("\n\r*(int*)(0x100):0x%08x",*(int*)(0x100));
8001dd68:	8c050100 	lw	a1,256(zero)
8001dd6c:	3c038002 	lui	v1,0x8002
8001dd70:	0c007a9e 	jal	8001ea78 <kprintf>
8001dd74:	2464483c 	addiu	a0,v1,18492
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:342
	kprintf("\n\r");
8001dd78:	3c058002 	lui	a1,0x8002
8001dd7c:	0c007a9e 	jal	8001ea78 <kprintf>
8001dd80:	24a4474c 	addiu	a0,a1,18252
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:343
	assert(strcmp((void *)0x100, (void *)(0x100 + PGSIZE)) == 0);
8001dd84:	24040100 	li	a0,256
8001dd88:	0c005bb8 	jal	80016ee0 <strcmp>
8001dd8c:	24051100 	li	a1,4352
8001dd90:	1440014e 	bnez	v0,8001e2cc <pmm_init+0xd88>
8001dd94:	8ee27770 	lw	v0,30576(s7)
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8001dd98:	8fc777bc 	lw	a3,30652(s8)
8001dd9c:	02473823 	subu	a3,s2,a3
8001dda0:	00073943 	sra	a3,a3,0x5
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8001dda4:	00073b00 	sll	a3,a3,0xc
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001dda8:	00071b02 	srl	v1,a3,0xc
8001ddac:	0062102b 	sltu	v0,v1,v0
8001ddb0:	10400179 	beqz	v0,8001e398 <pmm_init+0xe54>
8001ddb4:	00f03821 	addu	a3,a3,s0
check_boot_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:345
	
	kprintf("page2kva(p):0x%08x",page2kva(p));
8001ddb8:	3c028002 	lui	v0,0x8002
8001ddbc:	00e02821 	move	a1,a3
8001ddc0:	0c007a9e 	jal	8001ea78 <kprintf>
8001ddc4:	24444750 	addiu	a0,v0,18256
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:346
	kprintf("\n\r");
8001ddc8:	3c038002 	lui	v1,0x8002
8001ddcc:	0c007a9e 	jal	8001ea78 <kprintf>
8001ddd0:	2464474c 	addiu	a0,v1,18252
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8001ddd4:	8fc777bc 	lw	a3,30652(s8)
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001ddd8:	8ee27770 	lw	v0,30576(s7)
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8001dddc:	02473823 	subu	a3,s2,a3
8001dde0:	00073943 	sra	a3,a3,0x5
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8001dde4:	00073b00 	sll	a3,a3,0xc
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001dde8:	00071b02 	srl	v1,a3,0xc
8001ddec:	0062102b 	sltu	v0,v1,v0
8001ddf0:	10400169 	beqz	v0,8001e398 <pmm_init+0xe54>
8001ddf4:	00f03821 	addu	a3,a3,s0
check_boot_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:347
	kprintf("*(int*)(page2kva(p)+0x100):0x%08x",*(int*)(page2kva(p)+0x100));
8001ddf8:	8ce50100 	lw	a1,256(a3)
8001ddfc:	3c028002 	lui	v0,0x8002
8001de00:	0c007a9e 	jal	8001ea78 <kprintf>
8001de04:	24444764 	addiu	a0,v0,18276
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:348
	kprintf("\n\r");
8001de08:	3c038002 	lui	v1,0x8002
8001de0c:	0c007a9e 	jal	8001ea78 <kprintf>
8001de10:	2464474c 	addiu	a0,v1,18252
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8001de14:	8fc277bc 	lw	v0,30652(s8)
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001de18:	8ee37770 	lw	v1,30576(s7)
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8001de1c:	02421023 	subu	v0,s2,v0
8001de20:	00021143 	sra	v0,v0,0x5
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8001de24:	00021300 	sll	v0,v0,0xc
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001de28:	00022302 	srl	a0,v0,0xc
8001de2c:	0083182b 	sltu	v1,a0,v1
8001de30:	10600144 	beqz	v1,8001e344 <pmm_init+0xe00>
8001de34:	00508021 	addu	s0,v0,s0
check_boot_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:349
	*(char *)(page2kva(p) + 0x100) = '\0';
8001de38:	a2000100 	sb	zero,256(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:350
	assert(strlen((const char *)0x100) == 0);
8001de3c:	0c005b79 	jal	80016de4 <strlen>
8001de40:	24040100 	li	a0,256
8001de44:	14400119 	bnez	v0,8001e2ac <pmm_init+0xd68>
8001de48:	3c028002 	lui	v0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:351
	kprintf("\n\r*(int*)(0x100):0x%08x",*(int*)(0x100));
8001de4c:	8c050100 	lw	a1,256(zero)
8001de50:	0c007a9e 	jal	8001ea78 <kprintf>
8001de54:	2444483c 	addiu	a0,v0,18492
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:352
	kprintf("\n\r");
8001de58:	0c007a9e 	jal	8001ea78 <kprintf>
8001de5c:	26a4474c 	addiu	a0,s5,18252
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8001de60:	8e6277bc 	lw	v0,30652(s3)
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001de64:	8e237770 	lw	v1,30576(s1)
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
	return page - pages;
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8001de68:	3c078000 	lui	a3,0x8000
page2ppn():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:88
extern struct Page *pages;
extern size_t npage;

static inline ppn_t page2ppn(struct Page *page)
{
	return page - pages;
8001de6c:	02421023 	subu	v0,s2,v0
8001de70:	00021143 	sra	v0,v0,0x5
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8001de74:	00021300 	sll	v0,v0,0xc
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001de78:	00022302 	srl	a0,v0,0xc
page2pa():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:93
	return page - pages;
}

static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
8001de7c:	24e71000 	addiu	a3,a3,4096
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001de80:	0083182b 	sltu	v1,a0,v1
8001de84:	10600144 	beqz	v1,8001e398 <pmm_init+0xe54>
8001de88:	00473821 	addu	a3,v0,a3
check_boot_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:353
	kprintf("*(int*)(page2kva(p)+0x100):0x%08x",*(int*)(page2kva(p)+0x100));
8001de8c:	8ce50100 	lw	a1,256(a3)
8001de90:	26c44764 	addiu	a0,s6,18276
8001de94:	0c007a9e 	jal	8001ea78 <kprintf>
8001de98:	3c108015 	lui	s0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:354
	kprintf("\n\r");
8001de9c:	3c048002 	lui	a0,0x8002
8001dea0:	0c007a9e 	jal	8001ea78 <kprintf>
8001dea4:	2484474c 	addiu	a0,a0,18252
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:355
	free_page(p);
8001dea8:	02402021 	move	a0,s2
8001deac:	0c007441 	jal	8001d104 <free_pages>
8001deb0:	24050001 	li	a1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:356
	free_page(pa2page(PDE_ADDR(boot_pgdir[0])));
8001deb4:	8e82776c 	lw	v0,30572(s4)
8001deb8:	8c440000 	lw	a0,0(v0)
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
8001debc:	3c028015 	lui	v0,0x8015
8001dec0:	8c437770 	lw	v1,30576(v0)
check_boot_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:356
8001dec4:	2402f000 	li	v0,-4096
8001dec8:	00821024 	and	v0,a0,v0
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
8001decc:	3c047fff 	lui	a0,0x7fff
8001ded0:	3484f000 	ori	a0,a0,0xf000
8001ded4:	00441021 	addu	v0,v0,a0
8001ded8:	00021302 	srl	v0,v0,0xc
8001dedc:	0043182b 	sltu	v1,v0,v1
8001dee0:	106000e1 	beqz	v1,8001e268 <pmm_init+0xd24>
8001dee4:	3c038015 	lui	v1,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:101
		panic("pa2page called with invalid pa");
	}
	return &pages[PPN(pa)];
8001dee8:	8c6477bc 	lw	a0,30652(v1)
8001deec:	00021140 	sll	v0,v0,0x5
check_boot_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:356
8001def0:	24050001 	li	a1,1
8001def4:	0c007441 	jal	8001d104 <free_pages>
8001def8:	00822021 	addu	a0,a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:357
	boot_pgdir[0] = 0;
8001defc:	8e02776c 	lw	v0,30572(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:358
	tlb_invalidate_all();
8001df00:	0c00791c 	jal	8001e470 <tlb_invalidate_all>
8001df04:	ac400000 	sw	zero,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:360

	kprintf("check_boot_pgdir() succeeded!\n\r");
8001df08:	3c048002 	lui	a0,0x8002
8001df0c:	0c007a9e 	jal	8001ea78 <kprintf>
8001df10:	248448e0 	addiu	a0,a0,18656
pmm_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:217
	//~YX
	//now the basic virtual memory map(see memlayout.h) is established.
	//check the correctness of the basic virtual memory map.
	check_boot_pgdir();

	memset(boot_pgdir, 0, PGSIZE);
8001df14:	8e04776c 	lw	a0,30572(s0)
8001df18:	00002821 	move	a1,zero
8001df1c:	0c005c52 	jal	80017148 <memset>
8001df20:	24061000 	li	a2,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:218
	print_pgdir();
8001df24:	0c007477 	jal	8001d1dc <print_pgdir>
8001df28:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:224
	
/* SZY comments, what's the purpose of allocating space for slab? really store the symbols? */
	kmalloc_init();
	//slab_init();
	//kprintf("kmalloc_init() succeeded!\n");
}
8001df2c:	8fbf0034 	lw	ra,52(sp)
8001df30:	8fbe0030 	lw	s8,48(sp)
8001df34:	8fb7002c 	lw	s7,44(sp)
8001df38:	8fb60028 	lw	s6,40(sp)
8001df3c:	8fb50024 	lw	s5,36(sp)
8001df40:	8fb40020 	lw	s4,32(sp)
8001df44:	8fb3001c 	lw	s3,28(sp)
8001df48:	8fb20018 	lw	s2,24(sp)
8001df4c:	8fb10014 	lw	s1,20(sp)
8001df50:	8fb00010 	lw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:221

	memset(boot_pgdir, 0, PGSIZE);
	print_pgdir();
	
/* SZY comments, what's the purpose of allocating space for slab? really store the symbols? */
	kmalloc_init();
8001df54:	08005449 	j	80015124 <kmalloc_init>
8001df58:	27bd0038 	addiu	sp,sp,56
boot_map_segment():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:155
	size_t n = ROUNDUP_2N(size + PGOFF(la), PGSHIFT) >> PGSHIFT;
	la = ROUNDDOWN_2N(la, PGSHIFT);
	pa = ROUNDDOWN_2N(pa, PGSHIFT);
	for (; n > 0; n--, la += PGSIZE, pa += PGSIZE) {
		pte_t *ptep = get_pte(pgdir, la, 1);
		assert(ptep != NULL);
8001df5c:	3c048002 	lui	a0,0x8002
8001df60:	3c068002 	lui	a2,0x8002
8001df64:	3c078002 	lui	a3,0x8002
8001df68:	248439f8 	addiu	a0,a0,14840
8001df6c:	2405009b 	li	a1,155
8001df70:	24c60e28 	addiu	a2,a2,3624
8001df74:	0c006b0b 	jal	8001ac2c <__panic>
8001df78:	24e73084 	addiu	a3,a3,12420
check_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:295

	page_remove(boot_pgdir, PGSIZE);
	assert(page_ref(p1) == 0);
	assert(page_ref(p2) == 0);

	assert(page_ref(pa2page(boot_pgdir[0])) == 1);
8001df7c:	3c068002 	lui	a2,0x8002
8001df80:	3c078002 	lui	a3,0x8002
8001df84:	248439f8 	addiu	a0,a0,14840
8001df88:	24050127 	li	a1,295
8001df8c:	24c60e28 	addiu	a2,a2,3624
8001df90:	0c006b0b 	jal	8001ac2c <__panic>
8001df94:	24e7470c 	addiu	a3,a3,18188
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:293
	assert(page_ref(p1) == 1);
	assert(page_ref(p2) == 0);

	page_remove(boot_pgdir, PGSIZE);
	assert(page_ref(p1) == 0);
	assert(page_ref(p2) == 0);
8001df98:	248439f8 	addiu	a0,a0,14840
8001df9c:	24050125 	li	a1,293
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:289
	assert(pa2page(*ptep) == p1);
	assert((*ptep & PTE_U) == 0);

	page_remove(boot_pgdir, 0x0);
	assert(page_ref(p1) == 1);
	assert(page_ref(p2) == 0);
8001dfa0:	3c068002 	lui	a2,0x8002
8001dfa4:	3c078002 	lui	a3,0x8002
8001dfa8:	24c60e28 	addiu	a2,a2,3624
8001dfac:	0c006b0b 	jal	8001ac2c <__panic>
8001dfb0:	24e746cc 	addiu	a3,a3,18124
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:292

	page_remove(boot_pgdir, PGSIZE);
	assert(page_ref(p1) == 0);
8001dfb4:	3c068002 	lui	a2,0x8002
8001dfb8:	3c078002 	lui	a3,0x8002
8001dfbc:	248439f8 	addiu	a0,a0,14840
8001dfc0:	24050124 	li	a1,292
8001dfc4:	24c60e28 	addiu	a2,a2,3624
8001dfc8:	0c006b0b 	jal	8001ac2c <__panic>
8001dfcc:	24e746f8 	addiu	a3,a3,18168
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:289
	assert(pa2page(*ptep) == p1);
	assert((*ptep & PTE_U) == 0);

	page_remove(boot_pgdir, 0x0);
	assert(page_ref(p1) == 1);
	assert(page_ref(p2) == 0);
8001dfd0:	3c048002 	lui	a0,0x8002
8001dfd4:	248439f8 	addiu	a0,a0,14840
8001dfd8:	080077e8 	j	8001dfa0 <pmm_init+0xa5c>
8001dfdc:	24050121 	li	a1,289
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:288
	assert((ptep = get_pte(boot_pgdir, PGSIZE, 0)) != NULL);
	assert(pa2page(*ptep) == p1);
	assert((*ptep & PTE_U) == 0);

	page_remove(boot_pgdir, 0x0);
	assert(page_ref(p1) == 1);
8001dfe0:	248439f8 	addiu	a0,a0,14840
8001dfe4:	24050120 	li	a1,288
8001dfe8:	3c068002 	lui	a2,0x8002
8001dfec:	3c078002 	lui	a3,0x8002
8001dff0:	24c60e28 	addiu	a2,a2,3624
8001dff4:	0c006b0b 	jal	8001ac2c <__panic>
8001dff8:	24e7459c 	addiu	a3,a3,17820
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:285
	assert(page_insert(boot_pgdir, p1, PGSIZE, 0) == 0);
	assert(page_ref(p1) == 2);
	assert(page_ref(p2) == 0);
	assert((ptep = get_pte(boot_pgdir, PGSIZE, 0)) != NULL);
	assert(pa2page(*ptep) == p1);
	assert((*ptep & PTE_U) == 0);
8001dffc:	3c048002 	lui	a0,0x8002
8001e000:	3c068002 	lui	a2,0x8002
8001e004:	3c078002 	lui	a3,0x8002
8001e008:	248439f8 	addiu	a0,a0,14840
8001e00c:	2405011d 	li	a1,285
8001e010:	24c60e28 	addiu	a2,a2,3624
8001e014:	0c006b0b 	jal	8001ac2c <__panic>
8001e018:	24e746e0 	addiu	a3,a3,18144
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:284

	assert(page_insert(boot_pgdir, p1, PGSIZE, 0) == 0);
	assert(page_ref(p1) == 2);
	assert(page_ref(p2) == 0);
	assert((ptep = get_pte(boot_pgdir, PGSIZE, 0)) != NULL);
	assert(pa2page(*ptep) == p1);
8001e01c:	3c048002 	lui	a0,0x8002
8001e020:	248439f8 	addiu	a0,a0,14840
8001e024:	2405011c 	li	a1,284
8001e028:	3c068002 	lui	a2,0x8002
8001e02c:	3c078002 	lui	a3,0x8002
8001e030:	24c60e28 	addiu	a2,a2,3624
8001e034:	0c006b0b 	jal	8001ac2c <__panic>
8001e038:	24e74584 	addiu	a3,a3,17796
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:283
	assert(page_ref(p2) == 1);

	assert(page_insert(boot_pgdir, p1, PGSIZE, 0) == 0);
	assert(page_ref(p1) == 2);
	assert(page_ref(p2) == 0);
	assert((ptep = get_pte(boot_pgdir, PGSIZE, 0)) != NULL);
8001e03c:	3c048002 	lui	a0,0x8002
8001e040:	248439f8 	addiu	a0,a0,14840
8001e044:	2405011b 	li	a1,283
8001e048:	3c068002 	lui	a2,0x8002
8001e04c:	3c078002 	lui	a3,0x8002
8001e050:	24c60e28 	addiu	a2,a2,3624
8001e054:	0c006b0b 	jal	8001ac2c <__panic>
8001e058:	24e74610 	addiu	a3,a3,17936
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:282
	assert(boot_pgdir[0] & PTE_U);
	assert(page_ref(p2) == 1);

	assert(page_insert(boot_pgdir, p1, PGSIZE, 0) == 0);
	assert(page_ref(p1) == 2);
	assert(page_ref(p2) == 0);
8001e05c:	248439f8 	addiu	a0,a0,14840
8001e060:	080077e8 	j	8001dfa0 <pmm_init+0xa5c>
8001e064:	2405011a 	li	a1,282
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:281
	assert(*ptep & PTE_W);
	assert(boot_pgdir[0] & PTE_U);
	assert(page_ref(p2) == 1);

	assert(page_insert(boot_pgdir, p1, PGSIZE, 0) == 0);
	assert(page_ref(p1) == 2);
8001e068:	3c078002 	lui	a3,0x8002
8001e06c:	248439f8 	addiu	a0,a0,14840
8001e070:	24050119 	li	a1,281
8001e074:	24c60e28 	addiu	a2,a2,3624
8001e078:	0c006b0b 	jal	8001ac2c <__panic>
8001e07c:	24e746b8 	addiu	a3,a3,18104
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:280
	assert(*ptep & PTE_U);
	assert(*ptep & PTE_W);
	assert(boot_pgdir[0] & PTE_U);
	assert(page_ref(p2) == 1);

	assert(page_insert(boot_pgdir, p1, PGSIZE, 0) == 0);
8001e080:	3c068002 	lui	a2,0x8002
8001e084:	3c078002 	lui	a3,0x8002
8001e088:	248439f8 	addiu	a0,a0,14840
8001e08c:	24050118 	li	a1,280
8001e090:	24c60e28 	addiu	a2,a2,3624
8001e094:	0c006b0b 	jal	8001ac2c <__panic>
8001e098:	24e7468c 	addiu	a3,a3,18060
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:278
	assert(page_insert(boot_pgdir, p2, PGSIZE, PTE_U | PTE_W) == 0);
	assert((ptep = get_pte(boot_pgdir, PGSIZE, 0)) != NULL);
	assert(*ptep & PTE_U);
	assert(*ptep & PTE_W);
	assert(boot_pgdir[0] & PTE_U);
	assert(page_ref(p2) == 1);
8001e09c:	3c068002 	lui	a2,0x8002
8001e0a0:	3c078002 	lui	a3,0x8002
8001e0a4:	248439f8 	addiu	a0,a0,14840
8001e0a8:	24050116 	li	a1,278
8001e0ac:	24c60e28 	addiu	a2,a2,3624
8001e0b0:	0c006b0b 	jal	8001ac2c <__panic>
8001e0b4:	24e74678 	addiu	a3,a3,18040
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:277
	p2 = alloc_page();
	assert(page_insert(boot_pgdir, p2, PGSIZE, PTE_U | PTE_W) == 0);
	assert((ptep = get_pte(boot_pgdir, PGSIZE, 0)) != NULL);
	assert(*ptep & PTE_U);
	assert(*ptep & PTE_W);
	assert(boot_pgdir[0] & PTE_U);
8001e0b8:	3c068002 	lui	a2,0x8002
8001e0bc:	3c078002 	lui	a3,0x8002
8001e0c0:	248439f8 	addiu	a0,a0,14840
8001e0c4:	24050115 	li	a1,277
8001e0c8:	24c60e28 	addiu	a2,a2,3624
8001e0cc:	0c006b0b 	jal	8001ac2c <__panic>
8001e0d0:	24e74660 	addiu	a3,a3,18016
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:276

	p2 = alloc_page();
	assert(page_insert(boot_pgdir, p2, PGSIZE, PTE_U | PTE_W) == 0);
	assert((ptep = get_pte(boot_pgdir, PGSIZE, 0)) != NULL);
	assert(*ptep & PTE_U);
	assert(*ptep & PTE_W);
8001e0d4:	3c078002 	lui	a3,0x8002
8001e0d8:	248439f8 	addiu	a0,a0,14840
8001e0dc:	24050114 	li	a1,276
8001e0e0:	24c60e28 	addiu	a2,a2,3624
8001e0e4:	0c006b0b 	jal	8001ac2c <__panic>
8001e0e8:	24e74650 	addiu	a3,a3,18000
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:275
	assert(get_pte(boot_pgdir, PGSIZE, 0) == ptep);

	p2 = alloc_page();
	assert(page_insert(boot_pgdir, p2, PGSIZE, PTE_U | PTE_W) == 0);
	assert((ptep = get_pte(boot_pgdir, PGSIZE, 0)) != NULL);
	assert(*ptep & PTE_U);
8001e0ec:	3c068002 	lui	a2,0x8002
8001e0f0:	3c078002 	lui	a3,0x8002
8001e0f4:	248439f8 	addiu	a0,a0,14840
8001e0f8:	24050113 	li	a1,275
8001e0fc:	24c60e28 	addiu	a2,a2,3624
8001e100:	0c006b0b 	jal	8001ac2c <__panic>
8001e104:	24e74640 	addiu	a3,a3,17984
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:274
	ptep = &((pte_t *) KADDR(PDE_ADDR(boot_pgdir[0])))[1];
	assert(get_pte(boot_pgdir, PGSIZE, 0) == ptep);

	p2 = alloc_page();
	assert(page_insert(boot_pgdir, p2, PGSIZE, PTE_U | PTE_W) == 0);
	assert((ptep = get_pte(boot_pgdir, PGSIZE, 0)) != NULL);
8001e108:	248439f8 	addiu	a0,a0,14840
8001e10c:	08007812 	j	8001e048 <pmm_init+0xb04>
8001e110:	24050112 	li	a1,274
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:273

	ptep = &((pte_t *) KADDR(PDE_ADDR(boot_pgdir[0])))[1];
	assert(get_pte(boot_pgdir, PGSIZE, 0) == ptep);

	p2 = alloc_page();
	assert(page_insert(boot_pgdir, p2, PGSIZE, PTE_U | PTE_W) == 0);
8001e114:	3c068002 	lui	a2,0x8002
8001e118:	3c078002 	lui	a3,0x8002
8001e11c:	248439f8 	addiu	a0,a0,14840
8001e120:	24050111 	li	a1,273
8001e124:	24c60e28 	addiu	a2,a2,3624
8001e128:	0c006b0b 	jal	8001ac2c <__panic>
8001e12c:	24e745d8 	addiu	a3,a3,17880
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:270
	assert((ptep = get_pte(boot_pgdir, 0x0, 0)) != NULL);
	assert(pa2page(*ptep) == p1);
	assert(page_ref(p1) == 1);

	ptep = &((pte_t *) KADDR(PDE_ADDR(boot_pgdir[0])))[1];
	assert(get_pte(boot_pgdir, PGSIZE, 0) == ptep);
8001e130:	3c068002 	lui	a2,0x8002
8001e134:	3c078002 	lui	a3,0x8002
8001e138:	248439f8 	addiu	a0,a0,14840
8001e13c:	2405010e 	li	a1,270
8001e140:	24c60e28 	addiu	a2,a2,3624
8001e144:	0c006b0b 	jal	8001ac2c <__panic>
8001e148:	24e745b0 	addiu	a3,a3,17840
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:269
	pte_t *ptep;
	assert((ptep = get_pte(boot_pgdir, 0x0, 0)) != NULL);
	assert(pa2page(*ptep) == p1);
	assert(page_ref(p1) == 1);

	ptep = &((pte_t *) KADDR(PDE_ADDR(boot_pgdir[0])))[1];
8001e14c:	3c068002 	lui	a2,0x8002
8001e150:	248439f8 	addiu	a0,a0,14840
8001e154:	2405010d 	li	a1,269
8001e158:	24c62a74 	addiu	a2,a2,10868
8001e15c:	0c006b0b 	jal	8001ac2c <__panic>
8001e160:	02403821 	move	a3,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:267
	assert(page_insert(boot_pgdir, p1, 0x0, 0) == 0);

	pte_t *ptep;
	assert((ptep = get_pte(boot_pgdir, 0x0, 0)) != NULL);
	assert(pa2page(*ptep) == p1);
	assert(page_ref(p1) == 1);
8001e164:	3c048002 	lui	a0,0x8002
8001e168:	248439f8 	addiu	a0,a0,14840
8001e16c:	080077fa 	j	8001dfe8 <pmm_init+0xaa4>
8001e170:	2405010b 	li	a1,267
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:266
	p1 = alloc_page();
	assert(page_insert(boot_pgdir, p1, 0x0, 0) == 0);

	pte_t *ptep;
	assert((ptep = get_pte(boot_pgdir, 0x0, 0)) != NULL);
	assert(pa2page(*ptep) == p1);
8001e174:	248439f8 	addiu	a0,a0,14840
8001e178:	0800780a 	j	8001e028 <pmm_init+0xae4>
8001e17c:	2405010a 	li	a1,266
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:265
	struct Page *p1, *p2;
	p1 = alloc_page();
	assert(page_insert(boot_pgdir, p1, 0x0, 0) == 0);

	pte_t *ptep;
	assert((ptep = get_pte(boot_pgdir, 0x0, 0)) != NULL);
8001e180:	3c048002 	lui	a0,0x8002
8001e184:	3c068002 	lui	a2,0x8002
8001e188:	3c078002 	lui	a3,0x8002
8001e18c:	248439f8 	addiu	a0,a0,14840
8001e190:	24050109 	li	a1,265
8001e194:	24c60e28 	addiu	a2,a2,3624
8001e198:	0c006b0b 	jal	8001ac2c <__panic>
8001e19c:	24e74554 	addiu	a3,a3,17748
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:262
	assert(boot_pgdir != NULL && (uint32_t) PGOFF(boot_pgdir) == 0);
	assert(get_page(boot_pgdir, 0x0, NULL) == NULL);

	struct Page *p1, *p2;
	p1 = alloc_page();
	assert(page_insert(boot_pgdir, p1, 0x0, 0) == 0);
8001e1a0:	3c048002 	lui	a0,0x8002
8001e1a4:	3c068002 	lui	a2,0x8002
8001e1a8:	3c078002 	lui	a3,0x8002
8001e1ac:	248439f8 	addiu	a0,a0,14840
8001e1b0:	24050106 	li	a1,262
8001e1b4:	24c60e28 	addiu	a2,a2,3624
8001e1b8:	0c006b0b 	jal	8001ac2c <__panic>
8001e1bc:	24e74528 	addiu	a3,a3,17704
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:258

static void check_pgdir(void)
{
	assert(npage <= KMEMSIZE / PGSIZE);
	assert(boot_pgdir != NULL && (uint32_t) PGOFF(boot_pgdir) == 0);
	assert(get_page(boot_pgdir, 0x0, NULL) == NULL);
8001e1c0:	3c068002 	lui	a2,0x8002
8001e1c4:	3c078002 	lui	a3,0x8002
8001e1c8:	248439f8 	addiu	a0,a0,14840
8001e1cc:	24050102 	li	a1,258
8001e1d0:	24c60e28 	addiu	a2,a2,3624
8001e1d4:	0c006b0b 	jal	8001ac2c <__panic>
8001e1d8:	24e74500 	addiu	a3,a3,17664
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:257
}

static void check_pgdir(void)
{
	assert(npage <= KMEMSIZE / PGSIZE);
	assert(boot_pgdir != NULL && (uint32_t) PGOFF(boot_pgdir) == 0);
8001e1dc:	3c048002 	lui	a0,0x8002
8001e1e0:	3c068002 	lui	a2,0x8002
8001e1e4:	3c078002 	lui	a3,0x8002
8001e1e8:	248439f8 	addiu	a0,a0,14840
8001e1ec:	24050101 	li	a1,257
8001e1f0:	24c60e28 	addiu	a2,a2,3624
8001e1f4:	0c006b0b 	jal	8001ac2c <__panic>
8001e1f8:	24e744c8 	addiu	a3,a3,17608
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:256
	kprintf("check_alloc_page() succeeded!\n\r");
}

static void check_pgdir(void)
{
	assert(npage <= KMEMSIZE / PGSIZE);
8001e1fc:	3c048002 	lui	a0,0x8002
8001e200:	3c068002 	lui	a2,0x8002
8001e204:	3c078002 	lui	a3,0x8002
8001e208:	248439f8 	addiu	a0,a0,14840
8001e20c:	24050100 	li	a1,256
8001e210:	24c60e28 	addiu	a2,a2,3624
8001e214:	0c006b0b 	jal	8001ac2c <__panic>
8001e218:	24e744ac 	addiu	a3,a3,17580
pmm_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:193
	check_alloc_page();

	// create boot_pgdir, an initial page directory(Page Directory Table, PDT)
	boot_pgdir = boot_alloc_page();
	memset(boot_pgdir, 0, PGSIZE);
	boot_cr3 = PADDR(boot_pgdir);
8001e21c:	3c048002 	lui	a0,0x8002
8001e220:	3c068002 	lui	a2,0x8002
8001e224:	248439f8 	addiu	a0,a0,14840
8001e228:	240500c1 	li	a1,193
8001e22c:	0c006b0b 	jal	8001ac2c <__panic>
8001e230:	24c62a30 	addiu	a2,a2,10800
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001e234:	3c048002 	lui	a0,0x8002
8001e238:	3c068002 	lui	a2,0x8002
8001e23c:	248429ec 	addiu	a0,a0,10732
8001e240:	2405006a 	li	a1,106
8001e244:	24c62a74 	addiu	a2,a2,10868
8001e248:	0c006b0b 	jal	8001ac2c <__panic>
8001e24c:	02e03821 	move	a3,s7
boot_alloc_page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:167
//note: this function is used to get the memory for PDT(Page Directory Table)&PT(Page Table)
static void *boot_alloc_page(void)
{
	struct Page *p = alloc_page();
	if (p == NULL) {
		panic("boot_alloc_page failed.\n\r");
8001e250:	3c048002 	lui	a0,0x8002
8001e254:	3c068002 	lui	a2,0x8002
8001e258:	248439f8 	addiu	a0,a0,14840
8001e25c:	240500a7 	li	a1,167
8001e260:	0c006b0b 	jal	8001ac2c <__panic>
8001e264:	24c64490 	addiu	a2,a2,17552
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:98
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
8001e268:	0c007f78 	jal	8001fde0 <pa2page.part.2>
8001e26c:	00000000 	nop
page_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:127
	    PADDR((uintptr_t) pages + sizeof(struct Page) * npage);
	kprintf( "freemem start at:%x\n\r", freemem );

	uint32_t mbegin = ROUNDUP_2N(freemem, PGSHIFT);
	uint32_t mend = ROUNDDOWN_2N(KERNTOP, PGSHIFT);
	assert(mbegin < mend);
8001e270:	3c048002 	lui	a0,0x8002
8001e274:	3c068002 	lui	a2,0x8002
8001e278:	3c078002 	lui	a3,0x8002
8001e27c:	248439f8 	addiu	a0,a0,14840
8001e280:	2405007f 	li	a1,127
8001e284:	24c60e28 	addiu	a2,a2,3624
8001e288:	0c006b0b 	jal	8001ac2c <__panic>
8001e28c:	24e74438 	addiu	a3,a3,17464
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:122
	for (i = 0; i < npage; i++) {
		SetPageReserved(pages + i);
	}

	uintptr_t freemem =
	    PADDR((uintptr_t) pages + sizeof(struct Page) * npage);
8001e290:	3c048002 	lui	a0,0x8002
8001e294:	3c068002 	lui	a2,0x8002
8001e298:	248439f8 	addiu	a0,a0,14840
8001e29c:	2405007a 	li	a1,122
8001e2a0:	24c62a30 	addiu	a2,a2,10800
8001e2a4:	0c006b0b 	jal	8001ac2c <__panic>
8001e2a8:	02403821 	move	a3,s2
check_boot_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:350
	kprintf("page2kva(p):0x%08x",page2kva(p));
	kprintf("\n\r");
	kprintf("*(int*)(page2kva(p)+0x100):0x%08x",*(int*)(page2kva(p)+0x100));
	kprintf("\n\r");
	*(char *)(page2kva(p) + 0x100) = '\0';
	assert(strlen((const char *)0x100) == 0);
8001e2ac:	3c048002 	lui	a0,0x8002
8001e2b0:	3c068002 	lui	a2,0x8002
8001e2b4:	3c078002 	lui	a3,0x8002
8001e2b8:	248439f8 	addiu	a0,a0,14840
8001e2bc:	2405015e 	li	a1,350
8001e2c0:	24c60e28 	addiu	a2,a2,3624
8001e2c4:	0c006b0b 	jal	8001ac2c <__panic>
8001e2c8:	24e748bc 	addiu	a3,a3,18620
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:343
	assert(*(int *)0x100 == 0x1234);
	const char *str = "ucore: Hello world!!";
	strcpy((void *)0x100, str);
	kprintf("\n\r*(int*)(0x100):0x%08x",*(int*)(0x100));
	kprintf("\n\r");
	assert(strcmp((void *)0x100, (void *)(0x100 + PGSIZE)) == 0);
8001e2cc:	3c048002 	lui	a0,0x8002
8001e2d0:	3c068002 	lui	a2,0x8002
8001e2d4:	3c078002 	lui	a3,0x8002
8001e2d8:	248439f8 	addiu	a0,a0,14840
8001e2dc:	24050157 	li	a1,343
8001e2e0:	24c60e28 	addiu	a2,a2,3624
8001e2e4:	0c006b0b 	jal	8001ac2c <__panic>
8001e2e8:	24e74884 	addiu	a3,a3,18564
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:338
	kprintf("\n\r");
	
	kprintf("page2kva(p):0x%08x",page2kva(p));
	kprintf("\n\r");
	kprintf("*(int*)(page2kva(p)+0x100):0x%08x",*(int*)(page2kva(p)+0x100));
	assert(*(int *)0x100 == 0x1234);
8001e2ec:	3c048002 	lui	a0,0x8002
8001e2f0:	3c068002 	lui	a2,0x8002
8001e2f4:	3c078002 	lui	a3,0x8002
8001e2f8:	248439f8 	addiu	a0,a0,14840
8001e2fc:	24050152 	li	a1,338
8001e300:	24c60e28 	addiu	a2,a2,3624
8001e304:	0c006b0b 	jal	8001ac2c <__panic>
8001e308:	24e74854 	addiu	a3,a3,18516
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:325
	kprintf("\n\r");
	kprintf("*(int*)(page2kva(p)+0x100):0x%08x",*(int*)(page2kva(p)+0x100));
	kprintf("\n\r");
	kprintf("*(int*)(0x100):0x%08x",*(int*)(0x100));
	assert(page_insert(boot_pgdir, p, 0x100 + PGSIZE, PTE_W) == 0);
	assert(page_ref(p) == 2);
8001e30c:	3c068002 	lui	a2,0x8002
8001e310:	3c078002 	lui	a3,0x8002
8001e314:	248439f8 	addiu	a0,a0,14840
8001e318:	24050145 	li	a1,325
8001e31c:	24c60e28 	addiu	a2,a2,3624
8001e320:	0c006b0b 	jal	8001ac2c <__panic>
8001e324:	24e7481c 	addiu	a3,a3,18460
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:324
	kprintf("page2kva(p):0x%08x",page2kva(p));
	kprintf("\n\r");
	kprintf("*(int*)(page2kva(p)+0x100):0x%08x",*(int*)(page2kva(p)+0x100));
	kprintf("\n\r");
	kprintf("*(int*)(0x100):0x%08x",*(int*)(0x100));
	assert(page_insert(boot_pgdir, p, 0x100 + PGSIZE, PTE_W) == 0);
8001e328:	3c068002 	lui	a2,0x8002
8001e32c:	3c078002 	lui	a3,0x8002
8001e330:	248439f8 	addiu	a0,a0,14840
8001e334:	24050144 	li	a1,324
8001e338:	24c60e28 	addiu	a2,a2,3624
8001e33c:	0c006b0b 	jal	8001ac2c <__panic>
8001e340:	24e747e4 	addiu	a3,a3,18404
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
	return &pages[PPN(pa)];
}

static inline void *page2kva(struct Page *page)
{
	return KADDR(page2pa(page));
8001e344:	3c048002 	lui	a0,0x8002
8001e348:	3c068002 	lui	a2,0x8002
8001e34c:	248429ec 	addiu	a0,a0,10732
8001e350:	2405006a 	li	a1,106
8001e354:	24c62a74 	addiu	a2,a2,10868
8001e358:	0c006b0b 	jal	8001ac2c <__panic>
8001e35c:	02003821 	move	a3,s0
check_boot_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:318
	kprintf("page2kva(p):0x%08x",page2kva(p));
	kprintf("\n\r");
	kprintf("*(int*)(page2kva(p)+0x100):0x%08x",*(int*)(page2kva(p)+0x100));

	assert(page_insert(boot_pgdir, p, 0x100, PTE_W) == 0);
	assert(page_ref(p) == 1);
8001e360:	3c068002 	lui	a2,0x8002
8001e364:	3c078002 	lui	a3,0x8002
8001e368:	248439f8 	addiu	a0,a0,14840
8001e36c:	2405013e 	li	a1,318
8001e370:	24c60e28 	addiu	a2,a2,3624
8001e374:	0c006b0b 	jal	8001ac2c <__panic>
8001e378:	24e747b8 	addiu	a3,a3,18360
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:317
	*(int *)(page2kva(p) + 0x100) = 0x1234;
	kprintf("page2kva(p):0x%08x",page2kva(p));
	kprintf("\n\r");
	kprintf("*(int*)(page2kva(p)+0x100):0x%08x",*(int*)(page2kva(p)+0x100));

	assert(page_insert(boot_pgdir, p, 0x100, PTE_W) == 0);
8001e37c:	3c068002 	lui	a2,0x8002
8001e380:	3c078002 	lui	a3,0x8002
8001e384:	248439f8 	addiu	a0,a0,14840
8001e388:	2405013d 	li	a1,317
8001e38c:	24c60e28 	addiu	a2,a2,3624
8001e390:	0c006b0b 	jal	8001ac2c <__panic>
8001e394:	24e74788 	addiu	a3,a3,18312
page2kva():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:106
8001e398:	3c048002 	lui	a0,0x8002
8001e39c:	3c068002 	lui	a2,0x8002
8001e3a0:	248429ec 	addiu	a0,a0,10732
8001e3a4:	2405006a 	li	a1,106
8001e3a8:	0c006b0b 	jal	8001ac2c <__panic>
8001e3ac:	24c62a74 	addiu	a2,a2,10868

8001e3b0 <load_rsp0>:
load_rsp0():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:469
//added by HHL

void load_rsp0(uintptr_t esp0)
{

}
8001e3b0:	03e00008 	jr	ra
8001e3b4:	00000000 	nop

8001e3b8 <map_pgdir>:
map_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:474

void map_pgdir(pde_t * pgdir)
{
#define VPT                 0xFAC00000
	pgdir[PDX(VPT)] = PADDR(pgdir) | PTE_P | PTE_W;
8001e3b8:	3c028000 	lui	v0,0x8000
8001e3bc:	24421000 	addiu	v0,v0,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:472
{

}

void map_pgdir(pde_t * pgdir)
{
8001e3c0:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:474
#define VPT                 0xFAC00000
	pgdir[PDX(VPT)] = PADDR(pgdir) | PTE_P | PTE_W;
8001e3c4:	0082102b 	sltu	v0,a0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:472
{

}

void map_pgdir(pde_t * pgdir)
{
8001e3c8:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:474
#define VPT                 0xFAC00000
	pgdir[PDX(VPT)] = PADDR(pgdir) | PTE_P | PTE_W;
8001e3cc:	14400006 	bnez	v0,8001e3e8 <map_pgdir+0x30>
8001e3d0:	00803821 	move	a3,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:475
}
8001e3d4:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:474
}

void map_pgdir(pde_t * pgdir)
{
#define VPT                 0xFAC00000
	pgdir[PDX(VPT)] = PADDR(pgdir) | PTE_P | PTE_W;
8001e3d8:	34820003 	ori	v0,a0,0x3
8001e3dc:	ac820fac 	sw	v0,4012(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:475
}
8001e3e0:	03e00008 	jr	ra
8001e3e4:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:474
}

void map_pgdir(pde_t * pgdir)
{
#define VPT                 0xFAC00000
	pgdir[PDX(VPT)] = PADDR(pgdir) | PTE_P | PTE_W;
8001e3e8:	3c048002 	lui	a0,0x8002
8001e3ec:	3c068002 	lui	a2,0x8002
8001e3f0:	248439f8 	addiu	a0,a0,14840
8001e3f4:	240501da 	li	a1,474
8001e3f8:	0c006b0b 	jal	8001ac2c <__panic>
8001e3fc:	24c62a30 	addiu	a2,a2,10800

8001e400 <set_pgdir>:
set_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:481

/**
 * set_pgdir - save the physical address of the current pgdir
 */
void set_pgdir(struct proc_struct *proc, pde_t * pgdir)
{
8001e400:	27bdffe8 	addiu	sp,sp,-24
8001e404:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:482
	assert(proc != NULL);
8001e408:	10800009 	beqz	a0,8001e430 <set_pgdir+0x30>
8001e40c:	00a03821 	move	a3,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:483
	proc->cr3 = PADDR(pgdir);
8001e410:	3c028000 	lui	v0,0x8000
8001e414:	24421000 	addiu	v0,v0,4096
8001e418:	00a2102b 	sltu	v0,a1,v0
8001e41c:	1440000c 	bnez	v0,8001e450 <set_pgdir+0x50>
8001e420:	8fbf0014 	lw	ra,20(sp)
8001e424:	ac850058 	sw	a1,88(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:484
}
8001e428:	03e00008 	jr	ra
8001e42c:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:482
/**
 * set_pgdir - save the physical address of the current pgdir
 */
void set_pgdir(struct proc_struct *proc, pde_t * pgdir)
{
	assert(proc != NULL);
8001e430:	3c048002 	lui	a0,0x8002
8001e434:	3c068002 	lui	a2,0x8002
8001e438:	3c078002 	lui	a3,0x8002
8001e43c:	248439f8 	addiu	a0,a0,14840
8001e440:	240501e2 	li	a1,482
8001e444:	24c60e28 	addiu	a2,a2,3624
8001e448:	0c006b0b 	jal	8001ac2c <__panic>
8001e44c:	24e73ce4 	addiu	a3,a3,15588
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:483
	proc->cr3 = PADDR(pgdir);
8001e450:	3c048002 	lui	a0,0x8002
8001e454:	3c068002 	lui	a2,0x8002
8001e458:	248439f8 	addiu	a0,a0,14840
8001e45c:	240501e3 	li	a1,483
8001e460:	0c006b0b 	jal	8001ac2c <__panic>
8001e464:	24c62a30 	addiu	a2,a2,10800

8001e468 <nr_used_pages>:
nr_used_pages():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.c:489
}

size_t nr_used_pages(void)
{
	return 0;
}
8001e468:	03e00008 	jr	ra
8001e46c:	00001021 	move	v0,zero

8001e470 <tlb_invalidate_all>:
tlb_invalidate_all():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/thumips_tlb.c:42
{				//kprintf("\n\n\n\ntlb_invalidate_all()\n\n\n\n");
	unsigned int i;
	unsigned int te;
	//kprintf("\n\rbegin tlb_invalidate_all()\n\r");
	//dump_tlb_all();
	for (i = 0; i < 16; i++)// 
8001e470:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/thumips_tlb.c:44
	{
		te=0x80000000 + (i << 20);
8001e474:	3c058000 	lui	a1,0x8000
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/thumips_tlb.c:42
{				//kprintf("\n\n\n\ntlb_invalidate_all()\n\n\n\n");
	unsigned int i;
	unsigned int te;
	//kprintf("\n\rbegin tlb_invalidate_all()\n\r");
	//dump_tlb_all();
	for (i = 0; i < 16; i++)// 
8001e478:	24040010 	li	a0,16
write_one_tlb():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:90
}
static inline void write_one_tlb(int index, unsigned int pagemask,
				 unsigned int hi, unsigned int low0,
				 unsigned int low1)
{
	write_c0_entrylo0(low0);
8001e47c:	40801000 	mtc0	zero,c0_entrylo0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:91
	write_c0_pagemask(pagemask);
8001e480:	40802800 	mtc0	zero,c0_pagemask
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:92
	write_c0_entrylo1(low1);
8001e484:	40801800 	mtc0	zero,c0_entrylo1
tlb_invalidate_all():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/thumips_tlb.c:44
	{
		te=0x80000000 + (i << 20);
8001e488:	00021d00 	sll	v1,v0,0x14
8001e48c:	00651821 	addu	v1,v1,a1
write_one_tlb():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:94
	
	write_c0_entryhi(hi);
8001e490:	40835000 	mtc0	v1,c0_entryhi
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:95
	write_c0_index(index);
8001e494:	40820000 	mtc0	v0,c0_index
tlb_write_indexed():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/asm/mipsregs.h:1302
#endif
}

static inline void tlb_write_indexed(void)
{
	__asm__ __volatile__(
8001e498:	42000002 	tlbwi
tlb_invalidate_all():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/thumips_tlb.c:42
{				//kprintf("\n\n\n\ntlb_invalidate_all()\n\n\n\n");
	unsigned int i;
	unsigned int te;
	//kprintf("\n\rbegin tlb_invalidate_all()\n\r");
	//dump_tlb_all();
	for (i = 0; i < 16; i++)// 
8001e49c:	24420001 	addiu	v0,v0,1
8001e4a0:	1444fff6 	bne	v0,a0,8001e47c <tlb_invalidate_all+0xc>
8001e4a4:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/thumips_tlb.c:52
	}
	//dump_tlb_all();
	//kprintf("\n\rend");

	return ;
}
8001e4a8:	03e00008 	jr	ra
8001e4ac:	00000000 	nop

8001e4b0 <tlb_invalidate>:
tlb_invalidate():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/thumips_tlb.c:32

// invalidate both TLB 
// (clean and flush, meaning we write the data back)
void tlb_invalidate(pde_t * pgdir, uintptr_t la)
{
	tlb_invalidate_all();
8001e4b0:	0800791c 	j	8001e470 <tlb_invalidate_all>
8001e4b4:	00000000 	nop

8001e4b8 <copy_from_user>:
copy_from_user():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:56
}

bool
copy_from_user(struct mm_struct *mm, void *dst, const void *src, size_t len,
	       bool writable)
{
8001e4b8:	27bdffe0 	addiu	sp,sp,-32
8001e4bc:	afb00010 	sw	s0,16(sp)
8001e4c0:	00e08021 	move	s0,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:57
	if (!user_mem_check(mm, (uintptr_t) src, len, writable)) {
8001e4c4:	8fa70030 	lw	a3,48(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:56
}

bool
copy_from_user(struct mm_struct *mm, void *dst, const void *src, size_t len,
	       bool writable)
{
8001e4c8:	afb10014 	sw	s1,20(sp)
8001e4cc:	00c08821 	move	s1,a2
8001e4d0:	afb20018 	sw	s2,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:57
	if (!user_mem_check(mm, (uintptr_t) src, len, writable)) {
8001e4d4:	02003021 	move	a2,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:56
}

bool
copy_from_user(struct mm_struct *mm, void *dst, const void *src, size_t len,
	       bool writable)
{
8001e4d8:	00a09021 	move	s2,a1
8001e4dc:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:57
	if (!user_mem_check(mm, (uintptr_t) src, len, writable)) {
8001e4e0:	0c005077 	jal	800141dc <user_mem_check>
8001e4e4:	02202821 	move	a1,s1
8001e4e8:	10400006 	beqz	v0,8001e504 <copy_from_user+0x4c>
8001e4ec:	00001821 	move	v1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:60
		return 0;
	}
	memcpy(dst, src, len);
8001e4f0:	02402021 	move	a0,s2
8001e4f4:	02202821 	move	a1,s1
8001e4f8:	0c005c7c 	jal	800171f0 <memcpy>
8001e4fc:	02003021 	move	a2,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:61
	return 1;
8001e500:	24030001 	li	v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:62
}
8001e504:	8fbf001c 	lw	ra,28(sp)
8001e508:	00601021 	move	v0,v1
8001e50c:	8fb20018 	lw	s2,24(sp)
8001e510:	8fb10014 	lw	s1,20(sp)
8001e514:	8fb00010 	lw	s0,16(sp)
8001e518:	03e00008 	jr	ra
8001e51c:	27bd0020 	addiu	sp,sp,32

8001e520 <copy_to_user>:
copy_to_user():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:65

bool copy_to_user(struct mm_struct * mm, void *dst, const void *src, size_t len)
{
8001e520:	27bdffe0 	addiu	sp,sp,-32
8001e524:	afb00010 	sw	s0,16(sp)
8001e528:	00e08021 	move	s0,a3
8001e52c:	afb10014 	sw	s1,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:66
	if (!user_mem_check(mm, (uintptr_t) dst, len, 1)) {
8001e530:	24070001 	li	a3,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:65
	memcpy(dst, src, len);
	return 1;
}

bool copy_to_user(struct mm_struct * mm, void *dst, const void *src, size_t len)
{
8001e534:	00c08821 	move	s1,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:66
	if (!user_mem_check(mm, (uintptr_t) dst, len, 1)) {
8001e538:	02003021 	move	a2,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:65
	memcpy(dst, src, len);
	return 1;
}

bool copy_to_user(struct mm_struct * mm, void *dst, const void *src, size_t len)
{
8001e53c:	afb20018 	sw	s2,24(sp)
8001e540:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:66
	if (!user_mem_check(mm, (uintptr_t) dst, len, 1)) {
8001e544:	0c005077 	jal	800141dc <user_mem_check>
8001e548:	00a09021 	move	s2,a1
8001e54c:	10400006 	beqz	v0,8001e568 <copy_to_user+0x48>
8001e550:	00001821 	move	v1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:69
		return 0;
	}
	memcpy(dst, src, len);
8001e554:	02402021 	move	a0,s2
8001e558:	02202821 	move	a1,s1
8001e55c:	0c005c7c 	jal	800171f0 <memcpy>
8001e560:	02003021 	move	a2,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:70
	return 1;
8001e564:	24030001 	li	v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:71
}
8001e568:	8fbf001c 	lw	ra,28(sp)
8001e56c:	00601021 	move	v0,v1
8001e570:	8fb20018 	lw	s2,24(sp)
8001e574:	8fb10014 	lw	s1,20(sp)
8001e578:	8fb00010 	lw	s0,16(sp)
8001e57c:	03e00008 	jr	ra
8001e580:	27bd0020 	addiu	sp,sp,32

8001e584 <copy_string>:
copy_string():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:183
/* SZY comments: Why does this statement no show up? why I cannot see any statements related with the pgfault handler?*/
	kprintf("check_pgfault() succeeded!\n");
}

bool copy_string(struct mm_struct *mm, char *dst, const char *src, size_t maxn)
{
8001e584:	27bdffd8 	addiu	sp,sp,-40
8001e588:	afb00010 	sw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:185
	size_t alen, part =
	    ROUNDDOWN_2N((uintptr_t) src + PGSIZE, PGSHIFT) - (uintptr_t) src;
8001e58c:	2402f000 	li	v0,-4096
8001e590:	24d01000 	addiu	s0,a2,4096
8001e594:	02028024 	and	s0,s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:183
/* SZY comments: Why does this statement no show up? why I cannot see any statements related with the pgfault handler?*/
	kprintf("check_pgfault() succeeded!\n");
}

bool copy_string(struct mm_struct *mm, char *dst, const char *src, size_t maxn)
{
8001e598:	afb40020 	sw	s4,32(sp)
8001e59c:	afb3001c 	sw	s3,28(sp)
8001e5a0:	afb20018 	sw	s2,24(sp)
8001e5a4:	afb10014 	sw	s1,20(sp)
8001e5a8:	afbf0024 	sw	ra,36(sp)
8001e5ac:	00c08821 	move	s1,a2
8001e5b0:	0080a021 	move	s4,a0
8001e5b4:	00a09821 	move	s3,a1
8001e5b8:	00e09021 	move	s2,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:184
	size_t alen, part =
8001e5bc:	0800797e 	j	8001e5f8 <copy_string+0x74>
8001e5c0:	02068023 	subu	s0,s0,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:193
			part = maxn;
		}
		if (!user_mem_check(mm, (uintptr_t) src, part, 0)) {
			return 0;
		}
		if ((alen = strnlen(src, part)) < part) {
8001e5c4:	0c005b83 	jal	80016e0c <strnlen>
8001e5c8:	00000000 	nop
8001e5cc:	0050182b 	sltu	v1,v0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:200
			return 1;
		}
		if (part == maxn) {
			return 0;
		}
		memcpy(dst, src, part);
8001e5d0:	02602021 	move	a0,s3
8001e5d4:	02202821 	move	a1,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:193
			part = maxn;
		}
		if (!user_mem_check(mm, (uintptr_t) src, part, 0)) {
			return 0;
		}
		if ((alen = strnlen(src, part)) < part) {
8001e5d8:	1460001a 	bnez	v1,8001e644 <copy_string+0xc0>
8001e5dc:	02003021 	move	a2,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:197
			memcpy(dst, src, alen + 1);
			return 1;
		}
		if (part == maxn) {
8001e5e0:	1250000f 	beq	s2,s0,8001e620 <copy_string+0x9c>
8001e5e4:	02709821 	addu	s3,s3,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:201
			return 0;
		}
		memcpy(dst, src, part);
		dst += part, src += part, maxn -= part;
8001e5e8:	02308821 	addu	s1,s1,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:200
			return 1;
		}
		if (part == maxn) {
			return 0;
		}
		memcpy(dst, src, part);
8001e5ec:	0c005c7c 	jal	800171f0 <memcpy>
8001e5f0:	02509023 	subu	s2,s2,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:202
		dst += part, src += part, maxn -= part;
		part = PGSIZE;
8001e5f4:	24101000 	li	s0,4096
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:184
	kprintf("check_pgfault() succeeded!\n");
}

bool copy_string(struct mm_struct *mm, char *dst, const char *src, size_t maxn)
{
	size_t alen, part =
8001e5f8:	0250102b 	sltu	v0,s2,s0
8001e5fc:	0242800b 	movn	s0,s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:190
	    ROUNDDOWN_2N((uintptr_t) src + PGSIZE, PGSHIFT) - (uintptr_t) src;
	while (1) {
		if (part > maxn) {
			part = maxn;
		}
		if (!user_mem_check(mm, (uintptr_t) src, part, 0)) {
8001e600:	02802021 	move	a0,s4
8001e604:	02202821 	move	a1,s1
8001e608:	02003021 	move	a2,s0
8001e60c:	0c005077 	jal	800141dc <user_mem_check>
8001e610:	00003821 	move	a3,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:193
			return 0;
		}
		if ((alen = strnlen(src, part)) < part) {
8001e614:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:190
	    ROUNDDOWN_2N((uintptr_t) src + PGSIZE, PGSHIFT) - (uintptr_t) src;
	while (1) {
		if (part > maxn) {
			part = maxn;
		}
		if (!user_mem_check(mm, (uintptr_t) src, part, 0)) {
8001e618:	1440ffea 	bnez	v0,8001e5c4 <copy_string+0x40>
8001e61c:	02002821 	move	a1,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:204
		}
		memcpy(dst, src, part);
		dst += part, src += part, maxn -= part;
		part = PGSIZE;
	}
}
8001e620:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:198
		if ((alen = strnlen(src, part)) < part) {
			memcpy(dst, src, alen + 1);
			return 1;
		}
		if (part == maxn) {
			return 0;
8001e624:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:204
		}
		memcpy(dst, src, part);
		dst += part, src += part, maxn -= part;
		part = PGSIZE;
	}
}
8001e628:	8fb40020 	lw	s4,32(sp)
8001e62c:	8fb3001c 	lw	s3,28(sp)
8001e630:	8fb20018 	lw	s2,24(sp)
8001e634:	8fb10014 	lw	s1,20(sp)
8001e638:	8fb00010 	lw	s0,16(sp)
8001e63c:	03e00008 	jr	ra
8001e640:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:194
		}
		if (!user_mem_check(mm, (uintptr_t) src, part, 0)) {
			return 0;
		}
		if ((alen = strnlen(src, part)) < part) {
			memcpy(dst, src, alen + 1);
8001e644:	0c005c7c 	jal	800171f0 <memcpy>
8001e648:	24460001 	addiu	a2,v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:204
		}
		memcpy(dst, src, part);
		dst += part, src += part, maxn -= part;
		part = PGSIZE;
	}
}
8001e64c:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:195
		if (!user_mem_check(mm, (uintptr_t) src, part, 0)) {
			return 0;
		}
		if ((alen = strnlen(src, part)) < part) {
			memcpy(dst, src, alen + 1);
			return 1;
8001e650:	24020001 	li	v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/vmm.c:204
		}
		memcpy(dst, src, part);
		dst += part, src += part, maxn -= part;
		part = PGSIZE;
	}
}
8001e654:	8fb40020 	lw	s4,32(sp)
8001e658:	8fb3001c 	lw	s3,28(sp)
8001e65c:	8fb20018 	lw	s2,24(sp)
8001e660:	8fb10014 	lw	s1,20(sp)
8001e664:	8fb00010 	lw	s0,16(sp)
8001e668:	03e00008 	jr	ra
8001e66c:	27bd0028 	addiu	sp,sp,40

8001e670 <forkret>:
forkret():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:185
{				//kprintf(" [forkrets pid=%d epc=%x] ", current->pid, current->tf->tf_epc);
/*    kprintf("{");
    int i;
    for (i = 0; i < 10; ++i) kprintf("%x:%x ", (current->tf->tf_epc + i * 4), *(uint32_t*)(current->tf->tf_epc + i * 4));
    kprintf("} ");*/
	forkrets(current->tf);
8001e670:	3c028015 	lui	v0,0x8015
8001e674:	8c4277a4 	lw	v0,30628(v0)
8001e678:	08007f20 	j	8001fc80 <forkrets>
8001e67c:	8c440054 	lw	a0,84(v0)

8001e680 <alloc_proc>:
alloc_proc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:85
void forkrets(struct trapframe *tf);
void switch_to(struct context *from, struct context *to);

// alloc_proc - alloc a proc_struct and init all fields of proc_struct
struct proc_struct *alloc_proc(void)
{
8001e680:	27bdffe8 	addiu	sp,sp,-24
8001e684:	afb00010 	sw	s0,16(sp)
8001e688:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:86
	struct proc_struct *proc = kmalloc(sizeof(struct proc_struct));
8001e68c:	0c005486 	jal	80015218 <kmalloc>
8001e690:	240400f8 	li	a0,248
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:87
	if (proc != NULL) {
8001e694:	10400028 	beqz	v0,8001e738 <alloc_proc+0xb8>
8001e698:	00408021 	move	s0,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:98
		proc->parent = NULL;
		proc->mm = NULL;
		proc->tf = NULL;
		proc->flags = 0;
		proc->need_resched = 0;
		proc->cr3 = boot_cr3;
8001e69c:	3c028015 	lui	v0,0x8015
8001e6a0:	8c42779c 	lw	v0,30620(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:89
struct proc_struct *alloc_proc(void)
{
	struct proc_struct *proc = kmalloc(sizeof(struct proc_struct));
	if (proc != NULL) {
		proc->state = PROC_UNINIT;
		proc->pid = -1;
8001e6a4:	2403ffff 	li	v1,-1
8001e6a8:	ae030004 	sw	v1,4(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:92
		proc->runs = 0;
		proc->kstack = 0;
		proc->need_resched = 0;
8001e6ac:	ae000018 	sw	zero,24(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:99
		proc->mm = NULL;
		proc->tf = NULL;
		proc->flags = 0;
		proc->need_resched = 0;
		proc->cr3 = boot_cr3;
		memset(&(proc->context), 0, sizeof(struct context));
8001e6b0:	26040024 	addiu	a0,s0,36
8001e6b4:	00002821 	move	a1,zero
8001e6b8:	24060030 	li	a2,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:88
// alloc_proc - alloc a proc_struct and init all fields of proc_struct
struct proc_struct *alloc_proc(void)
{
	struct proc_struct *proc = kmalloc(sizeof(struct proc_struct));
	if (proc != NULL) {
		proc->state = PROC_UNINIT;
8001e6bc:	ae000000 	sw	zero,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:90
		proc->pid = -1;
		proc->runs = 0;
8001e6c0:	ae000010 	sw	zero,16(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:91
		proc->kstack = 0;
8001e6c4:	ae000014 	sw	zero,20(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:93
		proc->need_resched = 0;
		proc->parent = NULL;
8001e6c8:	ae00001c 	sw	zero,28(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:94
		proc->mm = NULL;
8001e6cc:	ae000020 	sw	zero,32(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:95
		proc->tf = NULL;
8001e6d0:	ae000054 	sw	zero,84(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:96
		proc->flags = 0;
8001e6d4:	ae00005c 	sw	zero,92(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:97
		proc->need_resched = 0;
8001e6d8:	ae000018 	sw	zero,24(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:99
		proc->cr3 = boot_cr3;
		memset(&(proc->context), 0, sizeof(struct context));
8001e6dc:	0c005c52 	jal	80017148 <memset>
8001e6e0:	ae020058 	sw	v0,88(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:100
		memset(proc->name, 0, PROC_NAME_LEN);
8001e6e4:	00002821 	move	a1,zero
8001e6e8:	2406000f 	li	a2,15
8001e6ec:	0c005c52 	jal	80017148 <memset>
8001e6f0:	26040060 	addiu	a0,s0,96
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:103
		proc->exit_code = 0;
		proc->wait_state = 0;
		list_init(&(proc->run_link));
8001e6f4:	260300a0 	addiu	v1,s0,160
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:104
		list_init(&(proc->list_link));
8001e6f8:	26020070 	addiu	v0,s0,112
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:107
		proc->time_slice = 0;
		proc->cptr = proc->yptr = proc->optr = NULL;
		event_box_init(&(proc->event_box));
8001e6fc:	260400b0 	addiu	a0,s0,176
list_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/glue-ucore/libs/list.h:54
 * list_init - initialize a new entry
 * @elm:        new entry to be initialized
 * */
static inline void list_init(list_entry_t * elm)
{
	elm->prev = elm->next = elm;
8001e700:	ae0300a4 	sw	v1,164(s0)
8001e704:	ae0300a0 	sw	v1,160(s0)
8001e708:	ae020074 	sw	v0,116(s0)
8001e70c:	ae020070 	sw	v0,112(s0)
alloc_proc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:101
		proc->flags = 0;
		proc->need_resched = 0;
		proc->cr3 = boot_cr3;
		memset(&(proc->context), 0, sizeof(struct context));
		memset(proc->name, 0, PROC_NAME_LEN);
		proc->exit_code = 0;
8001e710:	ae000080 	sw	zero,128(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:102
		proc->wait_state = 0;
8001e714:	ae000084 	sw	zero,132(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:105
		list_init(&(proc->run_link));
		list_init(&(proc->list_link));
		proc->time_slice = 0;
8001e718:	ae0000a8 	sw	zero,168(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:106
		proc->cptr = proc->yptr = proc->optr = NULL;
8001e71c:	ae000090 	sw	zero,144(s0)
8001e720:	ae00008c 	sw	zero,140(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:107
		event_box_init(&(proc->event_box));
8001e724:	0c005ff3 	jal	80017fcc <event_box_init>
8001e728:	ae000088 	sw	zero,136(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:109
		proc->fs_struct = NULL;
		proc->sem_queue = sem_queue_create();
8001e72c:	0c006748 	jal	80019d20 <sem_queue_create>
8001e730:	ae0000bc 	sw	zero,188(s0)
8001e734:	ae0200ac 	sw	v0,172(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:112
	}
	return proc;
}
8001e738:	8fbf0014 	lw	ra,20(sp)
8001e73c:	02001021 	move	v0,s0
8001e740:	8fb00010 	lw	s0,16(sp)
8001e744:	03e00008 	jr	ra
8001e748:	27bd0018 	addiu	sp,sp,24

8001e74c <kernel_thread>:
kernel_thread():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:204

// kernel_thread - create a kernel thread using "fn" function
// NOTE: the contents of temp trapframe tf will be copied to 
//       proc->tf in do_fork-->copy_thread function
int kernel_thread(int (*fn) (void *), void *arg, uint32_t clone_flags)
{
8001e74c:	27bdff48 	addiu	sp,sp,-184
8001e750:	afb200b0 	sw	s2,176(sp)
8001e754:	afb100ac 	sw	s1,172(sp)
8001e758:	afb000a8 	sw	s0,168(sp)
8001e75c:	00808821 	move	s1,a0
8001e760:	00a09021 	move	s2,a1
8001e764:	00c08021 	move	s0,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:206
	struct trapframe tf;
	memset(&tf, 0, sizeof(struct trapframe));
8001e768:	27a40010 	addiu	a0,sp,16
8001e76c:	00002821 	move	a1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:204

// kernel_thread - create a kernel thread using "fn" function
// NOTE: the contents of temp trapframe tf will be copied to 
//       proc->tf in do_fork-->copy_thread function
int kernel_thread(int (*fn) (void *), void *arg, uint32_t clone_flags)
{
8001e770:	afbf00b4 	sw	ra,180(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:206
	struct trapframe tf;
	memset(&tf, 0, sizeof(struct trapframe));
8001e774:	0c005c52 	jal	80017148 <memset>
8001e778:	24060094 	li	a2,148
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:207
	tf.tf_regs.reg_r[MIPS_REG_A0] = (uint32_t) arg;
8001e77c:	afb20034 	sw	s2,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:208
	tf.tf_regs.reg_r[MIPS_REG_A1] = (uint32_t) fn;
8001e780:	afb10038 	sw	s1,56(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:209
	tf.tf_regs.reg_r[MIPS_REG_V0] = 0;
8001e784:	afa0002c 	sw	zero,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:211
	//TODO
	tf.tf_status = read_c0_status();
8001e788:	40036000 	mfc0	v1,c0_status
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:212
	tf.tf_status &= ~ST0_KSU;
8001e78c:	2402ffe7 	li	v0,-25
8001e790:	00621024 	and	v0,v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:214
	tf.tf_status |= ST0_IE;
	tf.tf_status |= ST0_EXL;
8001e794:	34420003 	ori	v0,v0,0x3
8001e798:	afa20014 	sw	v0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:215
	tf.tf_regs.reg_r[MIPS_REG_GP] = __read_reg($28);
8001e79c:	03801021 	move	v0,gp
8001e7a0:	afa20094 	sw	v0,148(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:216
	tf.tf_epc = (uint32_t) kernel_thread_entry;
8001e7a4:	3c028002 	lui	v0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:217
	return do_fork(clone_flags | CLONE_VM, 0, &tf);
8001e7a8:	36040100 	ori	a0,s0,0x100
8001e7ac:	27a60010 	addiu	a2,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:216
	tf.tf_status = read_c0_status();
	tf.tf_status &= ~ST0_KSU;
	tf.tf_status |= ST0_IE;
	tf.tf_status |= ST0_EXL;
	tf.tf_regs.reg_r[MIPS_REG_GP] = __read_reg($28);
	tf.tf_epc = (uint32_t) kernel_thread_entry;
8001e7b0:	2442fc8c 	addiu	v0,v0,-884
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:217
	return do_fork(clone_flags | CLONE_VM, 0, &tf);
8001e7b4:	00002821 	move	a1,zero
8001e7b8:	0c003b6d 	jal	8000edb4 <do_fork>
8001e7bc:	afa200a0 	sw	v0,160(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:218
}
8001e7c0:	8fbf00b4 	lw	ra,180(sp)
8001e7c4:	8fb200b0 	lw	s2,176(sp)
8001e7c8:	8fb100ac 	lw	s1,172(sp)
8001e7cc:	8fb000a8 	lw	s0,168(sp)
8001e7d0:	03e00008 	jr	ra
8001e7d4:	27bd00b8 	addiu	sp,sp,184

8001e7d8 <copy_thread>:
copy_thread():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:311
//             - setup the kernel entry point and stack of process
int
copy_thread(uint32_t clone_flags, struct proc_struct *proc, uintptr_t esp,
	    struct trapframe *tf)
{
	proc->tf = (struct trapframe *)(proc->kstack + KSTACKSIZE) - 1;
8001e7d8:	8ca20014 	lw	v0,20(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:312
	*(proc->tf) = *tf;
8001e7dc:	24e40090 	addiu	a0,a3,144
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:311
//             - setup the kernel entry point and stack of process
int
copy_thread(uint32_t clone_flags, struct proc_struct *proc, uintptr_t esp,
	    struct trapframe *tf)
{
	proc->tf = (struct trapframe *)(proc->kstack + KSTACKSIZE) - 1;
8001e7e0:	24421f6c 	addiu	v0,v0,8044
8001e7e4:	aca20054 	sw	v0,84(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:312
	*(proc->tf) = *tf;
8001e7e8:	00401821 	move	v1,v0
8001e7ec:	8ceb0000 	lw	t3,0(a3)
8001e7f0:	8cea0004 	lw	t2,4(a3)
8001e7f4:	8ce90008 	lw	t1,8(a3)
8001e7f8:	8ce8000c 	lw	t0,12(a3)
8001e7fc:	24e70010 	addiu	a3,a3,16
8001e800:	ac6b0000 	sw	t3,0(v1)
8001e804:	ac6a0004 	sw	t2,4(v1)
8001e808:	ac690008 	sw	t1,8(v1)
8001e80c:	ac68000c 	sw	t0,12(v1)
8001e810:	14e4fff6 	bne	a3,a0,8001e7ec <copy_thread+0x14>
8001e814:	24630010 	addiu	v1,v1,16
8001e818:	8ce40000 	lw	a0,0(a3)
8001e81c:	ac640000 	sw	a0,0(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:313
	proc->tf->tf_regs.reg_r[MIPS_REG_V0] = 0;
8001e820:	ac40001c 	sw	zero,28(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:314
	if (esp == 0)		//a kernel thread
8001e824:	14c00003 	bnez	a2,8001e834 <copy_thread+0x5c>
8001e828:	2443ffe0 	addiu	v1,v0,-32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:315
		esp = (uintptr_t) proc->tf - 32;
8001e82c:	2446ffe0 	addiu	a2,v0,-32
8001e830:	00c01821 	move	v1,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:317
	proc->tf->tf_regs.reg_r[MIPS_REG_SP] = esp;
	proc->context.sf_ra = (uintptr_t) forkret;
8001e834:	3c048002 	lui	a0,0x8002
8001e838:	2484e670 	addiu	a0,a0,-6544
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:316
	proc->tf = (struct trapframe *)(proc->kstack + KSTACKSIZE) - 1;
	*(proc->tf) = *tf;
	proc->tf->tf_regs.reg_r[MIPS_REG_V0] = 0;
	if (esp == 0)		//a kernel thread
		esp = (uintptr_t) proc->tf - 32;
	proc->tf->tf_regs.reg_r[MIPS_REG_SP] = esp;
8001e83c:	ac460088 	sw	a2,136(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:320
	proc->context.sf_ra = (uintptr_t) forkret;
	proc->context.sf_sp = (uintptr_t) (proc->tf) - 32;
	return 0;
}
8001e840:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:317
	*(proc->tf) = *tf;
	proc->tf->tf_regs.reg_r[MIPS_REG_V0] = 0;
	if (esp == 0)		//a kernel thread
		esp = (uintptr_t) proc->tf - 32;
	proc->tf->tf_regs.reg_r[MIPS_REG_SP] = esp;
	proc->context.sf_ra = (uintptr_t) forkret;
8001e844:	aca4004c 	sw	a0,76(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:320
	proc->context.sf_sp = (uintptr_t) (proc->tf) - 32;
	return 0;
}
8001e848:	03e00008 	jr	ra
8001e84c:	aca30050 	sw	v1,80(a1)

8001e850 <kernel_execve>:
kernel_execve():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:404
// kernel_execve - do SYS_exec syscall to exec a user program scalled by user_main kernel_thread
int kernel_execve(const char *name, const char **argv, const char **kenvp)
{
	int argc = 0, ret;

	while (argv[argc] != NULL) {
8001e850:	8ca20000 	lw	v0,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:401
	return ret;
}

// kernel_execve - do SYS_exec syscall to exec a user program scalled by user_main kernel_thread
int kernel_execve(const char *name, const char **argv, const char **kenvp)
{
8001e854:	00a04021 	move	t0,a1
8001e858:	00804821 	move	t1,a0
8001e85c:	00c05021 	move	t2,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:404
	int argc = 0, ret;

	while (argv[argc] != NULL) {
8001e860:	10400006 	beqz	v0,8001e87c <kernel_execve+0x2c>
8001e864:	00001821 	move	v1,zero
8001e868:	00a01021 	move	v0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:405
		argc++;
8001e86c:	24420004 	addiu	v0,v0,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:404
// kernel_execve - do SYS_exec syscall to exec a user program scalled by user_main kernel_thread
int kernel_execve(const char *name, const char **argv, const char **kenvp)
{
	int argc = 0, ret;

	while (argv[argc] != NULL) {
8001e870:	8c440000 	lw	a0,0(v0)
8001e874:	1480fffd 	bnez	a0,8001e86c <kernel_execve+0x1c>
8001e878:	24630001 	addiu	v1,v1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:408
		argc++;
	}
	//panic("unimpl");
	asm volatile ("la $v0, %1;\n"	/* syscall no. */
8001e87c:	24020004 	li	v0,4
8001e880:	01202021 	move	a0,t1
8001e884:	01002821 	move	a1,t0
8001e888:	01403021 	move	a2,t2
8001e88c:	00603821 	move	a3,v1
8001e890:	0000000c 	syscall
8001e894:	00000000 	nop
8001e898:	00401821 	move	v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:418
		      "syscall;\n" "nop;\n" "move %0, $v0;\n":"=r" (ret)
		      :"i"( /*T_SYSCALL+ */ SYS_exec), "r"(name), "r"(argv),
		      "r"(kenvp), "r"(argc)
		      :"a0", "a1", "a2", "a3", "v0");
	return ret;
}
8001e89c:	03e00008 	jr	ra
8001e8a0:	00601021 	move	v0,v1

8001e8a4 <cpu_idle>:
cpu_idle():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:437

#define KERNEL_EXECVE3(x, s, ...)               __KERNEL_EXECVE3(x, s, ##__VA_ARGS__)

// cpu_idle - at the end of kern_init, the first kernel thread idleproc will do below works
void cpu_idle(void)
{
8001e8a4:	27bdffe8 	addiu	sp,sp,-24
8001e8a8:	afb00010 	sw	s0,16(sp)
8001e8ac:	afbf0014 	sw	ra,20(sp)
8001e8b0:	3c108015 	lui	s0,0x8015
8001e8b4:	8e0377a4 	lw	v1,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:441
	while (1) {
	//kprintf("current->need_resched=%d \n\r",current->need_resched);
	//current->need_resched = 1;
		if (current->need_resched) {
8001e8b8:	8c620018 	lw	v0,24(v1)
8001e8bc:	1040fffe 	beqz	v0,8001e8b8 <cpu_idle+0x14>
8001e8c0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:442
			schedule();
8001e8c4:	0c00059f 	jal	8000167c <schedule>
8001e8c8:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:437

#define KERNEL_EXECVE3(x, s, ...)               __KERNEL_EXECVE3(x, s, ##__VA_ARGS__)

// cpu_idle - at the end of kern_init, the first kernel thread idleproc will do below works
void cpu_idle(void)
{
8001e8cc:	08007a2e 	j	8001e8b8 <cpu_idle+0x14>
8001e8d0:	8e0377a4 	lw	v1,30628(s0)

8001e8d4 <ucore_kernel_thread>:
ucore_kernel_thread():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:450
}

//added by HHL
int ucore_kernel_thread(int (*fn) (void *), void *arg, uint32_t clone_flags)
{
	kernel_thread(fn, arg, clone_flags);
8001e8d4:	080079d3 	j	8001e74c <kernel_thread>
8001e8d8:	00000000 	nop

8001e8dc <de_thread_arch_hook>:
de_thread_arch_hook():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:455
}

void de_thread_arch_hook(struct proc_struct *proc)
{
}
8001e8dc:	03e00008 	jr	ra
8001e8e0:	00000000 	nop

8001e8e4 <init_new_context>:
init_new_context():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:460

int
init_new_context(struct proc_struct *proc, struct elfhdr *elf,
		 int argc, char **kargv, int envc, char **kenvp)
{
8001e8e4:	27bdffc8 	addiu	sp,sp,-56
8001e8e8:	afb2001c 	sw	s2,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:462

	uintptr_t stacktop = USTACKTOP - argc * PGSIZE;
8001e8ec:	00061300 	sll	v0,a2,0xc
8001e8f0:	3c128000 	lui	s2,0x8000
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:460
}

int
init_new_context(struct proc_struct *proc, struct elfhdr *elf,
		 int argc, char **kargv, int envc, char **kenvp)
{
8001e8f4:	afb30020 	sw	s3,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:462

	uintptr_t stacktop = USTACKTOP - argc * PGSIZE;
8001e8f8:	02429023 	subu	s2,s2,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:463
	char **uargv = (char **)(stacktop - argc * sizeof(char *));
8001e8fc:	00069880 	sll	s3,a2,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:460
}

int
init_new_context(struct proc_struct *proc, struct elfhdr *elf,
		 int argc, char **kargv, int envc, char **kenvp)
{
8001e900:	afb40024 	sw	s4,36(sp)
8001e904:	afb10018 	sw	s1,24(sp)
8001e908:	afb00014 	sw	s0,20(sp)
8001e90c:	afbf0034 	sw	ra,52(sp)
8001e910:	afb70030 	sw	s7,48(sp)
8001e914:	afb6002c 	sw	s6,44(sp)
8001e918:	afb50028 	sw	s5,40(sp)
8001e91c:	00c08021 	move	s0,a2
8001e920:	0080a021 	move	s4,a0
8001e924:	00a08821 	move	s1,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:465

	uintptr_t stacktop = USTACKTOP - argc * PGSIZE;
	char **uargv = (char **)(stacktop - argc * sizeof(char *));
	int i;
	for (i = 0; i < argc; i++) {
8001e928:	18c0000d 	blez	a2,8001e960 <init_new_context+0x7c>
8001e92c:	02539823 	subu	s3,s2,s3
8001e930:	00e0b821 	move	s7,a3
8001e934:	0260b021 	move	s6,s3
8001e938:	0000a821 	move	s5,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:466
		uargv[i] = strcpy((char *)(stacktop + i * PGSIZE), kargv[i]);
8001e93c:	8ee50000 	lw	a1,0(s7)
8001e940:	02402021 	move	a0,s2
8001e944:	0c005b92 	jal	80016e48 <strcpy>
8001e948:	26b50001 	addiu	s5,s5,1
8001e94c:	aec20000 	sw	v0,0(s6)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:465
{

	uintptr_t stacktop = USTACKTOP - argc * PGSIZE;
	char **uargv = (char **)(stacktop - argc * sizeof(char *));
	int i;
	for (i = 0; i < argc; i++) {
8001e950:	26f70004 	addiu	s7,s7,4
8001e954:	26521000 	addiu	s2,s2,4096
8001e958:	16b0fff8 	bne	s5,s0,8001e93c <init_new_context+0x58>
8001e95c:	26d60004 	addiu	s6,s6,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:470
		uargv[i] = strcpy((char *)(stacktop + i * PGSIZE), kargv[i]);
	}
	//stacktop = (uintptr_t)uargv - sizeof(int);
	//*(int *)stacktop = argc;
	struct trapframe *tf = proc->tf;
8001e960:	8e920054 	lw	s2,84(s4)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:471
	memset(tf, 0, sizeof(struct trapframe));
8001e964:	00002821 	move	a1,zero
8001e968:	24060094 	li	a2,148
8001e96c:	0c005c52 	jal	80017148 <memset>
8001e970:	02402021 	move	a0,s2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:472
	tf->tf_epc = elf->e_entry;
8001e974:	8e220018 	lw	v0,24(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:473
	tf->tf_regs.reg_r[MIPS_REG_SP] = USTACKTOP;
8001e978:	3c038000 	lui	v1,0x8000
8001e97c:	ae430088 	sw	v1,136(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:472
	}
	//stacktop = (uintptr_t)uargv - sizeof(int);
	//*(int *)stacktop = argc;
	struct trapframe *tf = proc->tf;
	memset(tf, 0, sizeof(struct trapframe));
	tf->tf_epc = elf->e_entry;
8001e980:	ae420090 	sw	v0,144(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:474
	tf->tf_regs.reg_r[MIPS_REG_SP] = USTACKTOP;
	uint32_t status = read_c0_status();
8001e984:	40036000 	mfc0	v1,c0_status
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:475
	status &= ~ST0_KSU;
8001e988:	2402ffe7 	li	v0,-25
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:483
	tf->tf_status = status;
	tf->tf_regs.reg_r[MIPS_REG_A0] = argc;
	tf->tf_regs.reg_r[MIPS_REG_A1] = (uint32_t) uargv;

	return 0;
}
8001e98c:	8fbf0034 	lw	ra,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:475
	struct trapframe *tf = proc->tf;
	memset(tf, 0, sizeof(struct trapframe));
	tf->tf_epc = elf->e_entry;
	tf->tf_regs.reg_r[MIPS_REG_SP] = USTACKTOP;
	uint32_t status = read_c0_status();
	status &= ~ST0_KSU;
8001e990:	00621024 	and	v0,v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:477
	status |= KSU_USER;
	status |= ST0_EXL;
8001e994:	34420012 	ori	v0,v0,0x12
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:478
	tf->tf_status = status;
8001e998:	ae420004 	sw	v0,4(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:479
	tf->tf_regs.reg_r[MIPS_REG_A0] = argc;
8001e99c:	ae500024 	sw	s0,36(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:480
	tf->tf_regs.reg_r[MIPS_REG_A1] = (uint32_t) uargv;
8001e9a0:	ae530028 	sw	s3,40(s2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:483

	return 0;
}
8001e9a4:	00001021 	move	v0,zero
8001e9a8:	8fb70030 	lw	s7,48(sp)
8001e9ac:	8fb6002c 	lw	s6,44(sp)
8001e9b0:	8fb50028 	lw	s5,40(sp)
8001e9b4:	8fb40024 	lw	s4,36(sp)
8001e9b8:	8fb30020 	lw	s3,32(sp)
8001e9bc:	8fb2001c 	lw	s2,28(sp)
8001e9c0:	8fb10018 	lw	s1,24(sp)
8001e9c4:	8fb00014 	lw	s0,20(sp)
8001e9c8:	03e00008 	jr	ra
8001e9cc:	27bd0038 	addiu	sp,sp,56

8001e9d0 <do_execve_arch_hook>:
do_execve_arch_hook():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/proc.c:488

int do_execve_arch_hook(int argc, char **kargv)
{
	return 0;
}
8001e9d0:	03e00008 	jr	ra
8001e9d4:	00001021 	move	v0,zero

8001e9d8 <__sig_setup_frame>:
__sig_setup_frame():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/signal.c:7
#include <assert.h>

int __sig_setup_frame(int sign, struct sigaction *act, sigset_t oldset,
		      struct trapframe *tf)
{
	warn("%s not implemented yet.", __func__);
8001e9d8:	3c048002 	lui	a0,0x8002
8001e9dc:	3c068002 	lui	a2,0x8002
8001e9e0:	3c078002 	lui	a3,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/signal.c:6
#include <proc.h>
#include <assert.h>

int __sig_setup_frame(int sign, struct sigaction *act, sigset_t oldset,
		      struct trapframe *tf)
{
8001e9e4:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/signal.c:7
	warn("%s not implemented yet.", __func__);
8001e9e8:	24842fb4 	addiu	a0,a0,12212
8001e9ec:	24050007 	li	a1,7
8001e9f0:	24c64900 	addiu	a2,a2,18688
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/signal.c:6
#include <proc.h>
#include <assert.h>

int __sig_setup_frame(int sign, struct sigaction *act, sigset_t oldset,
		      struct trapframe *tf)
{
8001e9f4:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/signal.c:7
	warn("%s not implemented yet.", __func__);
8001e9f8:	0c006b2b 	jal	8001acac <__warn>
8001e9fc:	24e70984 	addiu	a3,a3,2436
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/signal.c:9
	return -1;
}
8001ea00:	8fbf0014 	lw	ra,20(sp)
8001ea04:	2402ffff 	li	v0,-1
8001ea08:	03e00008 	jr	ra
8001ea0c:	27bd0018 	addiu	sp,sp,24

8001ea10 <cputch>:
cputch():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:15
/* *
 * cputch - writes a single character @c to stdout, and it will
 * increace the value of counter pointed by @cnt.
 * */
static void cputch(int c, int *cnt)
{
8001ea10:	27bdffe0 	addiu	sp,sp,-32
8001ea14:	afbf001c 	sw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:16
	cons_putc(c);
8001ea18:	0c006c5b 	jal	8001b16c <cons_putc>
8001ea1c:	afa50010 	sw	a1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:17
	(*cnt)++;
8001ea20:	8fa50010 	lw	a1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:18
}
8001ea24:	8fbf001c 	lw	ra,28(sp)
8001ea28:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:17
 * increace the value of counter pointed by @cnt.
 * */
static void cputch(int c, int *cnt)
{
	cons_putc(c);
	(*cnt)++;
8001ea2c:	8ca20000 	lw	v0,0(a1)
8001ea30:	24420001 	addiu	v0,v0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:18
}
8001ea34:	03e00008 	jr	ra
8001ea38:	aca20000 	sw	v0,0(a1)

8001ea3c <vkprintf>:
vkprintf():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:52
 *
 * Call this function if you are already dealing with a va_list.
 * Or you probably want kprintf() instead.
 * */
int vkprintf(const char *fmt, va_list ap)
{
8001ea3c:	27bdffd8 	addiu	sp,sp,-40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:54
	int cnt = 0;
	vprintfmt((void *)cputch, NO_FD, &cnt, fmt, ap);
8001ea40:	afa50010 	sw	a1,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:52
 *
 * Call this function if you are already dealing with a va_list.
 * Or you probably want kprintf() instead.
 * */
int vkprintf(const char *fmt, va_list ap)
{
8001ea44:	00803821 	move	a3,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:54
	int cnt = 0;
	vprintfmt((void *)cputch, NO_FD, &cnt, fmt, ap);
8001ea48:	3c05ffff 	lui	a1,0xffff
8001ea4c:	3c048002 	lui	a0,0x8002
8001ea50:	27a60018 	addiu	a2,sp,24
8001ea54:	2484ea10 	addiu	a0,a0,-5616
8001ea58:	24a56ad9 	addiu	a1,a1,27353
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:52
 *
 * Call this function if you are already dealing with a va_list.
 * Or you probably want kprintf() instead.
 * */
int vkprintf(const char *fmt, va_list ap)
{
8001ea5c:	afbf0024 	sw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:54
	int cnt = 0;
	vprintfmt((void *)cputch, NO_FD, &cnt, fmt, ap);
8001ea60:	0c0059c4 	jal	80016710 <vprintfmt>
8001ea64:	afa00018 	sw	zero,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:56
	return cnt;
}
8001ea68:	8fbf0024 	lw	ra,36(sp)
8001ea6c:	8fa20018 	lw	v0,24(sp)
8001ea70:	03e00008 	jr	ra
8001ea74:	27bd0028 	addiu	sp,sp,40

8001ea78 <kprintf>:
kprintf():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:65
 *
 * The return value is the number of characters which would be
 * written to stdout.
 * */
int kprintf(const char *fmt, ...)
{
8001ea78:	27bdffe0 	addiu	sp,sp,-32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:68
	va_list ap;
	int cnt;
	va_start(ap, fmt);
8001ea7c:	27a20024 	addiu	v0,sp,36
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:65
 *
 * The return value is the number of characters which would be
 * written to stdout.
 * */
int kprintf(const char *fmt, ...)
{
8001ea80:	afa50024 	sw	a1,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:69
	va_list ap;
	int cnt;
	va_start(ap, fmt);
	cnt = vkprintf(fmt, ap);
8001ea84:	00402821 	move	a1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:65
 *
 * The return value is the number of characters which would be
 * written to stdout.
 * */
int kprintf(const char *fmt, ...)
{
8001ea88:	afbf001c 	sw	ra,28(sp)
8001ea8c:	afa60028 	sw	a2,40(sp)
8001ea90:	afa7002c 	sw	a3,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:69
	va_list ap;
	int cnt;
	va_start(ap, fmt);
	cnt = vkprintf(fmt, ap);
8001ea94:	0c007a8f 	jal	8001ea3c <vkprintf>
8001ea98:	afa20010 	sw	v0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:72
	va_end(ap);
	return cnt;
}
8001ea9c:	8fbf001c 	lw	ra,28(sp)
8001eaa0:	03e00008 	jr	ra
8001eaa4:	27bd0020 	addiu	sp,sp,32

8001eaa8 <printhex>:
printhex():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:76

static const char *hexdigits = "0123456789ABCDEF";
void printhex(unsigned int x)
{
8001eaa8:	27bdffd8 	addiu	sp,sp,-40
8001eaac:	3c058002 	lui	a1,0x8002
8001eab0:	afbf0024 	sw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:79
	char tmp[9];
	int i = 0;
	tmp[8] = 0;
8001eab4:	a3a00018 	sb	zero,24(sp)
8001eab8:	27a20017 	addiu	v0,sp,23
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:75
	va_end(ap);
	return cnt;
}

static const char *hexdigits = "0123456789ABCDEF";
void printhex(unsigned int x)
8001eabc:	27a6000f 	addiu	a2,sp,15
8001eac0:	24a54918 	addiu	a1,a1,18712
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:81
{
	char tmp[9];
	int i = 0;
	tmp[8] = 0;
	for (i = 7; i >= 0; i--) {
		tmp[i] = hexdigits[x & 0xf];
8001eac4:	3083000f 	andi	v1,a0,0xf
8001eac8:	00a31821 	addu	v1,a1,v1
8001eacc:	90630000 	lbu	v1,0(v1)
8001ead0:	a0430000 	sb	v1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:82
		x = x >> 4;
8001ead4:	2442ffff 	addiu	v0,v0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:80
void printhex(unsigned int x)
{
	char tmp[9];
	int i = 0;
	tmp[8] = 0;
	for (i = 7; i >= 0; i--) {
8001ead8:	1446fffa 	bne	v0,a2,8001eac4 <printhex+0x1c>
8001eadc:	00042102 	srl	a0,a0,0x4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:84
		tmp[i] = hexdigits[x & 0xf];
		x = x >> 4;
	}
	kprintf(tmp);
8001eae0:	0c007a9e 	jal	8001ea78 <kprintf>
8001eae4:	27a40010 	addiu	a0,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:85
}
8001eae8:	8fbf0024 	lw	ra,36(sp)
8001eaec:	03e00008 	jr	ra
8001eaf0:	27bd0028 	addiu	sp,sp,40

8001eaf4 <printbase10>:
printbase10():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:88

void printbase10(int x)
{
8001eaf4:	27bdffd0 	addiu	sp,sp,-48
8001eaf8:	afb00024 	sw	s0,36(sp)
8001eafc:	afbf002c 	sw	ra,44(sp)
8001eb00:	afb10028 	sw	s1,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:92
	unsigned int t;
	int i = 0;
	char buf[16];
	if (x < 0)
8001eb04:	04800036 	bltz	a0,8001ebe0 <printbase10+0xec>
8001eb08:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:94
		kputchar('-');
	x = (x < 0) ? -x : x;
8001eb0c:	00101fc3 	sra	v1,s0,0x1f
8001eb10:	00701026 	xor	v0,v1,s0
8001eb14:	00431023 	subu	v0,v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:95
	while (x >= 10) {
8001eb18:	2843000a 	slti	v1,v0,10
8001eb1c:	00002821 	move	a1,zero
8001eb20:	1460001d 	bnez	v1,8001eb98 <printbase10+0xa4>
8001eb24:	27a80010 	addiu	t0,sp,16
__divu10():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:32
/* __divu* routines are from the book, Hacker's Delight */

static inline unsigned int __divu10(unsigned int n)
{
	unsigned int q, r;
	q = (n >> 1) + (n >> 2);
8001eb28:	00021842 	srl	v1,v0,0x1
8001eb2c:	00022082 	srl	a0,v0,0x2
8001eb30:	00832021 	addu	a0,a0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:33
	q = q + (q >> 4);
8001eb34:	00041902 	srl	v1,a0,0x4
8001eb38:	00642021 	addu	a0,v1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:34
	q = q + (q >> 8);
8001eb3c:	00041a02 	srl	v1,a0,0x8
8001eb40:	00642021 	addu	a0,v1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:35
	q = q + (q >> 16);
8001eb44:	00041c02 	srl	v1,a0,0x10
8001eb48:	00642021 	addu	a0,v1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:36
	q = q >> 3;
8001eb4c:	000420c2 	srl	a0,a0,0x3
__mulu10():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:24
    __res;\
    })

static inline unsigned int __mulu10(unsigned int n)
{
	return (n << 3) + (n << 1);
8001eb50:	24460006 	addiu	a2,v0,6
8001eb54:	00041840 	sll	v1,a0,0x1
__divu10():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:37
	q = (n >> 1) + (n >> 2);
	q = q + (q >> 4);
	q = q + (q >> 8);
	q = q + (q >> 16);
	q = q >> 3;
	r = n - __mulu10(q);
8001eb58:	00c31823 	subu	v1,a2,v1
__mulu10():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:24
    __res;\
    })

static inline unsigned int __mulu10(unsigned int n)
{
	return (n << 3) + (n << 1);
8001eb5c:	000430c0 	sll	a2,a0,0x3
__divu10():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:38
	q = q + (q >> 4);
	q = q + (q >> 8);
	q = q + (q >> 16);
	q = q >> 3;
	r = n - __mulu10(q);
	return q + ((r + 6) >> 4);
8001eb60:	00661823 	subu	v1,v1,a2
8001eb64:	00031902 	srl	v1,v1,0x4
8001eb68:	00641821 	addu	v1,v1,a0
__mulu10():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:24
    __res;\
    })

static inline unsigned int __mulu10(unsigned int n)
{
	return (n << 3) + (n << 1);
8001eb6c:	000320c0 	sll	a0,v1,0x3
8001eb70:	00033040 	sll	a2,v1,0x1
printbase10():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:97
		t = __divu10(x);
		buf[i++] = ('0' + (x - __mulu10(t)));
8001eb74:	24470030 	addiu	a3,v0,48
__mulu10():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/arch.h:24
8001eb78:	00c43021 	addu	a2,a2,a0
printbase10():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:98
		x = t;
8001eb7c:	00601021 	move	v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:87
		x = x >> 4;
	}
	kprintf(tmp);
}

void printbase10(int x)
8001eb80:	01052021 	addu	a0,t0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:97
	if (x < 0)
		kputchar('-');
	x = (x < 0) ? -x : x;
	while (x >= 10) {
		t = __divu10(x);
		buf[i++] = ('0' + (x - __mulu10(t)));
8001eb84:	00e63023 	subu	a2,a3,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:95
	int i = 0;
	char buf[16];
	if (x < 0)
		kputchar('-');
	x = (x < 0) ? -x : x;
	while (x >= 10) {
8001eb88:	2863000a 	slti	v1,v1,10
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:97
		t = __divu10(x);
		buf[i++] = ('0' + (x - __mulu10(t)));
8001eb8c:	a0860000 	sb	a2,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:95
	int i = 0;
	char buf[16];
	if (x < 0)
		kputchar('-');
	x = (x < 0) ? -x : x;
	while (x >= 10) {
8001eb90:	1060ffe5 	beqz	v1,8001eb28 <printbase10+0x34>
8001eb94:	24a50001 	addiu	a1,a1,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:100
		t = __divu10(x);
		buf[i++] = ('0' + (x - __mulu10(t)));
		x = t;
	}
	buf[i] = ('0' + x);
8001eb98:	24420030 	addiu	v0,v0,48
8001eb9c:	304400ff 	andi	a0,v0,0xff
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:87
		x = x >> 4;
	}
	kprintf(tmp);
}

void printbase10(int x)
8001eba0:	24b0ffff 	addiu	s0,a1,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:100
	while (x >= 10) {
		t = __divu10(x);
		buf[i++] = ('0' + (x - __mulu10(t)));
		x = t;
	}
	buf[i] = ('0' + x);
8001eba4:	01051021 	addu	v0,t0,a1
8001eba8:	a0440000 	sb	a0,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:87
		x = x >> 4;
	}
	kprintf(tmp);
}

void printbase10(int x)
8001ebac:	01108021 	addu	s0,t0,s0
8001ebb0:	08007aef 	j	8001ebbc <printbase10+0xc8>
8001ebb4:	27b1000f 	addiu	s1,sp,15
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:101
		t = __divu10(x);
		buf[i++] = ('0' + (x - __mulu10(t)));
		x = t;
	}
	buf[i] = ('0' + x);
	for (; i >= 0; i--) {
8001ebb8:	2610ffff 	addiu	s0,s0,-1
kputchar():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:109
}

/* kputchar - writes a single character to stdout */
void kputchar(int c)
{
	cons_putc(c);
8001ebbc:	0c006c5b 	jal	8001b16c <cons_putc>
8001ebc0:	00000000 	nop
printbase10():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:101
		t = __divu10(x);
		buf[i++] = ('0' + (x - __mulu10(t)));
		x = t;
	}
	buf[i] = ('0' + x);
	for (; i >= 0; i--) {
8001ebc4:	5611fffc 	bnel	s0,s1,8001ebb8 <printbase10+0xc4>
8001ebc8:	92040000 	lbu	a0,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:104
		kputchar(buf[i]);
	}
}
8001ebcc:	8fbf002c 	lw	ra,44(sp)
8001ebd0:	8fb10028 	lw	s1,40(sp)
8001ebd4:	8fb00024 	lw	s0,36(sp)
8001ebd8:	03e00008 	jr	ra
8001ebdc:	27bd0030 	addiu	sp,sp,48
kputchar():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:109

/* kputchar - writes a single character to stdout */
void kputchar(int c)
{
	cons_putc(c);
8001ebe0:	0c006c5b 	jal	8001b16c <cons_putc>
8001ebe4:	2404002d 	li	a0,45
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:94
	unsigned int t;
	int i = 0;
	char buf[16];
	if (x < 0)
		kputchar('-');
	x = (x < 0) ? -x : x;
8001ebe8:	08007ac4 	j	8001eb10 <printbase10+0x1c>
8001ebec:	00101fc3 	sra	v1,s0,0x1f

8001ebf0 <kputchar>:
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:109
}

/* kputchar - writes a single character to stdout */
void kputchar(int c)
{
	cons_putc(c);
8001ebf0:	08006c5b 	j	8001b16c <cons_putc>
8001ebf4:	00000000 	nop

8001ebf8 <kputs>:
kputs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:117
/* *
 * kputs- writes the string pointed by @str to stdout and
 * appends a newline character.
 * */
int kputs(const char *str)
{
8001ebf8:	27bdffe0 	addiu	sp,sp,-32
8001ebfc:	afb00018 	sw	s0,24(sp)
8001ec00:	afbf001c 	sw	ra,28(sp)
8001ec04:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:120
	int cnt = 0;
	char c;
	while ((c = *str++) != '\0') {
8001ec08:	90840000 	lbu	a0,0(a0)
8001ec0c:	10800007 	beqz	a0,8001ec2c <kputs+0x34>
8001ec10:	afa00010 	sw	zero,16(sp)
8001ec14:	26100001 	addiu	s0,s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:121
		cputch(c, &cnt);
8001ec18:	0c007a84 	jal	8001ea10 <cputch>
8001ec1c:	27a50010 	addiu	a1,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:120
 * */
int kputs(const char *str)
{
	int cnt = 0;
	char c;
	while ((c = *str++) != '\0') {
8001ec20:	92040000 	lbu	a0,0(s0)
8001ec24:	1480fffc 	bnez	a0,8001ec18 <kputs+0x20>
8001ec28:	26100001 	addiu	s0,s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:123
		cputch(c, &cnt);
	}
	cputch('\n', &cnt);
8001ec2c:	27a50010 	addiu	a1,sp,16
8001ec30:	0c007a84 	jal	8001ea10 <cputch>
8001ec34:	2404000a 	li	a0,10
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:125
	return cnt;
}
8001ec38:	8fbf001c 	lw	ra,28(sp)
8001ec3c:	8fa20010 	lw	v0,16(sp)
8001ec40:	8fb00018 	lw	s0,24(sp)
8001ec44:	03e00008 	jr	ra
8001ec48:	27bd0020 	addiu	sp,sp,32

8001ec4c <getchar>:
getchar():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:129

/* getchar - reads a single non-zero character from stdin */
int getchar(void)
{
8001ec4c:	27bdffe8 	addiu	sp,sp,-24
8001ec50:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:131
	int c;
	while ((c = cons_getc()) == 0)
8001ec54:	0c006c7d 	jal	8001b1f4 <cons_getc>
8001ec58:	00000000 	nop
8001ec5c:	1040fffd 	beqz	v0,8001ec54 <getchar+0x8>
8001ec60:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/mips_io.c:134
		/* do nothing */ ;
	return c;
}
8001ec64:	03e00008 	jr	ra
8001ec68:	27bd0018 	addiu	sp,sp,24

8001ec6c <udivmodsi4>:
udivmodsi4():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/udivmodsi4.c:29
unsigned long udivmodsi4(unsigned long num, unsigned long den, int modwanted)
{
	unsigned long bit = 1;
	unsigned long res = 0;

	while (den < num && bit && !(den & (1L << 31))) {
8001ec6c:	00a4182b 	sltu	v1,a1,a0
8001ec70:	50600010 	beqzl	v1,8001ecb4 <udivmodsi4+0x48>
8001ec74:	24030001 	li	v1,1
8001ec78:	04a0001b 	bltz	a1,8001ece8 <udivmodsi4+0x7c>
8001ec7c:	24070020 	li	a3,32
8001ec80:	08007b26 	j	8001ec98 <udivmodsi4+0x2c>
8001ec84:	24030001 	li	v1,1
8001ec88:	10e00015 	beqz	a3,8001ece0 <udivmodsi4+0x74>
8001ec8c:	00001021 	move	v0,zero
8001ec90:	04a2000a 	bltzl	a1,8001ecbc <udivmodsi4+0x50>
8001ec94:	0085382b 	sltu	a3,a0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/udivmodsi4.c:30
		den <<= 1;
8001ec98:	00052840 	sll	a1,a1,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/udivmodsi4.c:29
unsigned long udivmodsi4(unsigned long num, unsigned long den, int modwanted)
{
	unsigned long bit = 1;
	unsigned long res = 0;

	while (den < num && bit && !(den & (1L << 31))) {
8001ec9c:	00a4402b 	sltu	t0,a1,a0
8001eca0:	24e7ffff 	addiu	a3,a3,-1
8001eca4:	1500fff8 	bnez	t0,8001ec88 <udivmodsi4+0x1c>
8001eca8:	00031840 	sll	v1,v1,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/udivmodsi4.c:33
		den <<= 1;
		bit <<= 1;
	}
	while (bit) {
8001ecac:	1060000c 	beqz	v1,8001ece0 <udivmodsi4+0x74>
8001ecb0:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/udivmodsi4.c:31
	unsigned long bit = 1;
	unsigned long res = 0;

	while (den < num && bit && !(den & (1L << 31))) {
		den <<= 1;
		bit <<= 1;
8001ecb4:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/udivmodsi4.c:34
	}
	while (bit) {
		if (num >= den) {
8001ecb8:	0085382b 	sltu	a3,a0,a1
8001ecbc:	54e00004 	bnezl	a3,8001ecd0 <udivmodsi4+0x64>
8001ecc0:	00031842 	srl	v1,v1,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/udivmodsi4.c:35
			num -= den;
8001ecc4:	00852023 	subu	a0,a0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/udivmodsi4.c:36
			res |= bit;
8001ecc8:	00431025 	or	v0,v0,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/udivmodsi4.c:38
		}
		bit >>= 1;
8001eccc:	00031842 	srl	v1,v1,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/udivmodsi4.c:33

	while (den < num && bit && !(den & (1L << 31))) {
		den <<= 1;
		bit <<= 1;
	}
	while (bit) {
8001ecd0:	1460fff9 	bnez	v1,8001ecb8 <udivmodsi4+0x4c>
8001ecd4:	00052842 	srl	a1,a1,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/udivmodsi4.c:44
		den >>= 1;
	}
	if (modwanted)
		return num;
	return res;
}
8001ecd8:	03e00008 	jr	ra
8001ecdc:	0086100b 	movn	v0,a0,a2
8001ece0:	03e00008 	jr	ra
8001ece4:	0086100b 	movn	v0,a0,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/udivmodsi4.c:26
see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see
<http://www.gnu.org/licenses/>.  */

unsigned long udivmodsi4(unsigned long num, unsigned long den, int modwanted)
{
	unsigned long bit = 1;
8001ece8:	08007b2d 	j	8001ecb4 <udivmodsi4+0x48>
8001ecec:	24030001 	li	v1,1

8001ecf0 <__udivsi3>:
__udivsi3():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/udivmod.c:28

long udivmodsi4();

long __udivsi3(long a, long b)
{
	return udivmodsi4(a, b, 0);
8001ecf0:	08007b1b 	j	8001ec6c <udivmodsi4>
8001ecf4:	00003021 	move	a2,zero

8001ecf8 <__umodsi3>:
__umodsi3():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/udivmod.c:33
}

long __umodsi3(long a, long b)
{
	return udivmodsi4(a, b, 1);
8001ecf8:	08007b1b 	j	8001ec6c <udivmodsi4>
8001ecfc:	24060001 	li	a2,1

8001ed00 <__divsi3>:
__divsi3():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/divmod.c:27
<http://www.gnu.org/licenses/>.  */

long udivmodsi4();

long __divsi3(long a, long b)
{
8001ed00:	27bdffe8 	addiu	sp,sp,-24
8001ed04:	afb00010 	sw	s0,16(sp)
8001ed08:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/divmod.c:31
	int neg = 0;
	long res;

	if (a < 0) {
8001ed0c:	0480000b 	bltz	a0,8001ed3c <__divsi3+0x3c>
8001ed10:	00008021 	move	s0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/divmod.c:36
		a = -a;
		neg = !neg;
	}

	if (b < 0) {
8001ed14:	04a2000d 	bltzl	a1,8001ed4c <__divsi3+0x4c>
8001ed18:	00052823 	negu	a1,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/divmod.c:41
		b = -b;
		neg = !neg;
	}

	res = udivmodsi4(a, b, 0);
8001ed1c:	0c007b1b 	jal	8001ec6c <udivmodsi4>
8001ed20:	00003021 	move	a2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/divmod.c:47

	if (neg)
		res = -res;

	return res;
}
8001ed24:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/divmod.c:44
	}

	res = udivmodsi4(a, b, 0);

	if (neg)
		res = -res;
8001ed28:	00021823 	negu	v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/divmod.c:47

	return res;
}
8001ed2c:	0070100b 	movn	v0,v1,s0
8001ed30:	8fb00010 	lw	s0,16(sp)
8001ed34:	03e00008 	jr	ra
8001ed38:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/divmod.c:32
{
	int neg = 0;
	long res;

	if (a < 0) {
		a = -a;
8001ed3c:	00042023 	negu	a0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/divmod.c:36
		neg = !neg;
	}

	if (b < 0) {
8001ed40:	04a1fff6 	bgez	a1,8001ed1c <__divsi3+0x1c>
8001ed44:	24100001 	li	s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/divmod.c:37
		b = -b;
8001ed48:	00052823 	negu	a1,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/divmod.c:41
		neg = !neg;
	}

	res = udivmodsi4(a, b, 0);
8001ed4c:	0c007b1b 	jal	8001ec6c <udivmodsi4>
8001ed50:	00003021 	move	a2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/divmod.c:47

	if (neg)
		res = -res;

	return res;
}
8001ed54:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/divmod.c:38
		neg = !neg;
	}

	if (b < 0) {
		b = -b;
		neg = !neg;
8001ed58:	3a100001 	xori	s0,s0,0x1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/divmod.c:44
	}

	res = udivmodsi4(a, b, 0);

	if (neg)
		res = -res;
8001ed5c:	00021823 	negu	v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/divmod.c:47

	return res;
}
8001ed60:	0070100b 	movn	v0,v1,s0
8001ed64:	8fb00010 	lw	s0,16(sp)
8001ed68:	03e00008 	jr	ra
8001ed6c:	27bd0018 	addiu	sp,sp,24

8001ed70 <__modsi3>:
__modsi3():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/divmod.c:50

long __modsi3(long a, long b)
{
8001ed70:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/divmod.c:54
	int neg = 0;
	long res;

	if (a < 0) {
8001ed74:	04800008 	bltz	a0,8001ed98 <__modsi3+0x28>
8001ed78:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/divmod.c:62
	}

	if (b < 0)
		b = -b;

	res = udivmodsi4(a, b, 1);
8001ed7c:	000517c3 	sra	v0,a1,0x1f
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/divmod.c:68

	if (neg)
		res = -res;

	return res;
}
8001ed80:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/divmod.c:62
	}

	if (b < 0)
		b = -b;

	res = udivmodsi4(a, b, 1);
8001ed84:	00452826 	xor	a1,v0,a1
8001ed88:	00a22823 	subu	a1,a1,v0
8001ed8c:	24060001 	li	a2,1
8001ed90:	08007b1b 	j	8001ec6c <udivmodsi4>
8001ed94:	27bd0018 	addiu	sp,sp,24
8001ed98:	00051fc3 	sra	v1,a1,0x1f
8001ed9c:	00652826 	xor	a1,v1,a1
8001eda0:	00042023 	negu	a0,a0
8001eda4:	00a32823 	subu	a1,a1,v1
8001eda8:	0c007b1b 	jal	8001ec6c <udivmodsi4>
8001edac:	24060001 	li	a2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/libs/divmod.c:68

	if (neg)
		res = -res;

	return res;
}
8001edb0:	8fbf0014 	lw	ra,20(sp)
8001edb4:	00021023 	negu	v0,v0
8001edb8:	03e00008 	jr	ra
8001edbc:	27bd0018 	addiu	sp,sp,24

8001edc0 <sys_gettime>:
sys_gettime():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:82
    return do_kill(pid, -E_KILLED);
}

static uint32_t
sys_gettime(uint32_t arg[]) {
    return (int)ticks;
8001edc0:	3c028015 	lui	v0,0x8015
8001edc4:	8c4277ac 	lw	v0,30636(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:83
}
8001edc8:	03e00008 	jr	ra
8001edcc:	00000000 	nop

8001edd0 <sys_getpid>:
sys_getpid():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:87

static uint32_t
sys_getpid(uint32_t arg[]) {
    return pls_read(current)->pid;
8001edd0:	3c028015 	lui	v0,0x8015
8001edd4:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:88
}
8001edd8:	03e00008 	jr	ra
8001eddc:	8c420004 	lw	v0,4(v0)

8001ede0 <sys_redraw_console>:
sys_redraw_console():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:297
    uint32_t open_flags = (uint32_t)arg[1];
    return sysfile_mkfifo(name, open_flags);
}

static int
sys_redraw_console(uint32_t arg[]) {
8001ede0:	27bdffe8 	addiu	sp,sp,-24
8001ede4:	afbf0014 	sw	ra,20(sp)
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:12
void intr_enable(void);
void intr_disable(void);

static inline bool __intr_save(void)
{
	if (!(read_c0_status() & ST0_IE)) {
8001ede8:	40026000 	mfc0	v0,c0_status
8001edec:	30420001 	andi	v0,v0,0x1
8001edf0:	14400007 	bnez	v0,8001ee10 <sys_redraw_console+0x30>
8001edf4:	00000000 	nop
sys_redraw_console():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:300
    bool intr_flag;
    local_intr_save(intr_flag);
    vga_redraw();
8001edf8:	0c006e2d 	jal	8001b8b4 <vga_redraw>
8001edfc:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:303
    local_intr_restore(intr_flag);
	return 0;
}
8001ee00:	8fbf0014 	lw	ra,20(sp)
8001ee04:	00001021 	move	v0,zero
8001ee08:	03e00008 	jr	ra
8001ee0c:	27bd0018 	addiu	sp,sp,24
__intr_save():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:15
		return 0;
	}
	intr_disable();
8001ee10:	0c006d04 	jal	8001b410 <intr_disable>
8001ee14:	00000000 	nop
sys_redraw_console():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:300

static int
sys_redraw_console(uint32_t arg[]) {
    bool intr_flag;
    local_intr_save(intr_flag);
    vga_redraw();
8001ee18:	0c006e2d 	jal	8001b8b4 <vga_redraw>
8001ee1c:	00000000 	nop
__intr_restore():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/driver/intr.h:22
}

static inline void __intr_restore(bool flag)
{
	if (flag) {
		intr_enable();
8001ee20:	0c006d00 	jal	8001b400 <intr_enable>
8001ee24:	00000000 	nop
sys_redraw_console():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:303
    local_intr_restore(intr_flag);
	return 0;
}
8001ee28:	8fbf0014 	lw	ra,20(sp)
8001ee2c:	00001021 	move	v0,zero
8001ee30:	03e00008 	jr	ra
8001ee34:	27bd0018 	addiu	sp,sp,24

8001ee38 <sys_mkfifo>:
sys_mkfifo():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:290
    int *fd_store = (int *)arg[0];
    return sysfile_pipe(fd_store);
}

static uint32_t
sys_mkfifo(uint32_t arg[]) {
8001ee38:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:293
    const char *name = (const char *)arg[0];
    uint32_t open_flags = (uint32_t)arg[1];
    return sysfile_mkfifo(name, open_flags);
8001ee3c:	8c450004 	lw	a1,4(v0)
8001ee40:	0800372d 	j	8000dcb4 <sysfile_mkfifo>
8001ee44:	8c840000 	lw	a0,0(a0)

8001ee48 <sys_pipe>:
sys_pipe():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:286
}

static uint32_t
sys_pipe(uint32_t arg[]) {
    int *fd_store = (int *)arg[0];
    return sysfile_pipe(fd_store);
8001ee48:	080036f3 	j	8000dbcc <sysfile_pipe>
8001ee4c:	8c840000 	lw	a0,0(a0)

8001ee50 <sys_dup>:
sys_dup():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:277
    struct dirent *direntp = (struct dirent *)arg[1];
    return sysfile_getdirentry(fd, direntp, NULL);
}

static uint32_t
sys_dup(uint32_t arg[]) {
8001ee50:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:280
    int fd1 = (int)arg[0];
    int fd2 = (int)arg[1];
    return sysfile_dup(fd1, fd2);
8001ee54:	8c450004 	lw	a1,4(v0)
8001ee58:	080036f1 	j	8000dbc4 <sysfile_dup>
8001ee5c:	8c840000 	lw	a0,0(a0)

8001ee60 <sys_getdirentry>:
sys_getdirentry():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:270
    const char *name = (const char *)arg[0];
    return sysfile_unlink(name);
}

static uint32_t
sys_getdirentry(uint32_t arg[]) {
8001ee60:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:273
    int fd = (int)arg[0];
    struct dirent *direntp = (struct dirent *)arg[1];
    return sysfile_getdirentry(fd, direntp, NULL);
8001ee64:	8c450004 	lw	a1,4(v0)
8001ee68:	8c840000 	lw	a0,0(a0)
8001ee6c:	080036a9 	j	8000daa4 <sysfile_getdirentry>
8001ee70:	00003021 	move	a2,zero

8001ee74 <sys_unlink>:
sys_unlink():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:266
}

static uint32_t
sys_unlink(uint32_t arg[]) {
    const char *name = (const char *)arg[0];
    return sysfile_unlink(name);
8001ee74:	08003673 	j	8000d9cc <sysfile_unlink>
8001ee78:	8c840000 	lw	a0,0(a0)

8001ee7c <sys_rename>:
sys_rename():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:257
    const char *path2 = (const char *)arg[1];
    return sysfile_link(path1, path2);
}

static uint32_t
sys_rename(uint32_t arg[]) {
8001ee7c:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:260
    const char *path1 = (const char *)arg[0];
    const char *path2 = (const char *)arg[1];
    return sysfile_rename(path1, path2);
8001ee80:	8c450004 	lw	a1,4(v0)
8001ee84:	0800364e 	j	8000d938 <sysfile_rename>
8001ee88:	8c840000 	lw	a0,0(a0)

8001ee8c <sys_link>:
sys_link():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:250
    const char *path = (const char *)arg[0];
    return sysfile_mkdir(path);
}

static uint32_t
sys_link(uint32_t arg[]) {
8001ee8c:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:253
    const char *path1 = (const char *)arg[0];
    const char *path2 = (const char *)arg[1];
    return sysfile_link(path1, path2);
8001ee90:	8c450004 	lw	a1,4(v0)
8001ee94:	08003629 	j	8000d8a4 <sysfile_link>
8001ee98:	8c840000 	lw	a0,0(a0)

8001ee9c <sys_mkdir>:
sys_mkdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:246
}

static uint32_t
sys_mkdir(uint32_t arg[]) {
    const char *path = (const char *)arg[0];
    return sysfile_mkdir(path);
8001ee9c:	08003619 	j	8000d864 <sysfile_mkdir>
8001eea0:	8c840000 	lw	a0,0(a0)

8001eea4 <sys_getcwd>:
sys_getcwd():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:237
    const char *path = (const char *)arg[0];
    return sysfile_chdir(path);
}

static uint32_t
sys_getcwd(uint32_t arg[]) {
8001eea4:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:240
    char *buf = (char *)arg[0];
    size_t len = (size_t)arg[1];
    return sysfile_getcwd(buf, len);
8001eea8:	8c450004 	lw	a1,4(v0)
8001eeac:	08003683 	j	8000da0c <sysfile_getcwd>
8001eeb0:	8c840000 	lw	a0,0(a0)

8001eeb4 <sys_chdir>:
sys_chdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:233
}

static uint32_t
sys_chdir(uint32_t arg[]) {
    const char *path = (const char *)arg[0];
    return sysfile_chdir(path);
8001eeb4:	08003609 	j	8000d824 <sysfile_chdir>
8001eeb8:	8c840000 	lw	a0,0(a0)

8001eebc <sys_fsync>:
sys_fsync():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:227
}

static uint32_t
sys_fsync(uint32_t arg[]) {
    int fd = (int)arg[0];
    return sysfile_fsync(fd);
8001eebc:	08003607 	j	8000d81c <sysfile_fsync>
8001eec0:	8c840000 	lw	a0,0(a0)

8001eec4 <sys_fstat>:
sys_fstat():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:218
    int whence = (int)arg[2];
    return sysfile_seek(fd, pos, whence);
}

static uint32_t
sys_fstat(uint32_t arg[]) {
8001eec4:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:221
    int fd = (int)arg[0];
    struct stat *stat = (struct stat *)arg[1];
    return sysfile_fstat(fd, stat);
8001eec8:	8c450004 	lw	a1,4(v0)
8001eecc:	08003538 	j	8000d4e0 <sysfile_fstat>
8001eed0:	8c840000 	lw	a0,0(a0)

8001eed4 <sys_seek>:
sys_seek():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:210
    size_t len = (size_t)arg[2];
    return sysfile_write(fd, base, len);
}

static uint32_t
sys_seek(uint32_t arg[]) {
8001eed4:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:214
    int fd = (int)arg[0];
    off_t pos = (off_t)arg[1];
    int whence = (int)arg[2];
    return sysfile_seek(fd, pos, whence);
8001eed8:	8c450004 	lw	a1,4(v0)
8001eedc:	8c840000 	lw	a0,0(a0)
8001eee0:	08003536 	j	8000d4d8 <sysfile_seek>
8001eee4:	8c460008 	lw	a2,8(v0)

8001eee8 <sys_write>:
sys_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:202
    size_t len = (size_t)arg[2];
    return sysfile_read(fd, base, len);
}

static uint32_t
sys_write(uint32_t arg[]) {
8001eee8:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:206
    int fd = (int)arg[0];
    void *base = (void *)arg[1];
    size_t len = (size_t)arg[2];
    return sysfile_write(fd, base, len);
8001eeec:	8c450004 	lw	a1,4(v0)
8001eef0:	8c840000 	lw	a0,0(a0)
8001eef4:	0800347b 	j	8000d1ec <sysfile_write>
8001eef8:	8c460008 	lw	a2,8(v0)

8001eefc <sys_read>:
sys_read():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:194
    int fd = (int)arg[0];
    return sysfile_close(fd);
}

static uint32_t
sys_read(uint32_t arg[]) {
8001eefc:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:198
    int fd = (int)arg[0];
    void *base = (void *)arg[1];
    size_t len = (size_t)arg[2];
    return sysfile_read(fd, base, len);
8001ef00:	8c450004 	lw	a1,4(v0)
8001ef04:	8c840000 	lw	a0,0(a0)
8001ef08:	080033f6 	j	8000cfd8 <sysfile_read>
8001ef0c:	8c460008 	lw	a2,8(v0)

8001ef10 <sys_close>:
sys_close():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:190
}

static uint32_t
sys_close(uint32_t arg[]) {
    int fd = (int)arg[0];
    return sysfile_close(fd);
8001ef10:	080033f4 	j	8000cfd0 <sysfile_close>
8001ef14:	8c840000 	lw	a0,0(a0)

8001ef18 <sys_open>:
sys_open():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:181
    unsigned int timeout = (unsigned int)arg[2];
    return ipc_event_recv(pid_store, event_store, timeout);
}

static uint32_t
sys_open(uint32_t arg[]) {
8001ef18:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:184
    const char *path = (const char *)arg[0];
    uint32_t open_flags = (uint32_t)arg[1];
    return sysfile_open(path, open_flags);
8001ef1c:	8c450004 	lw	a1,4(v0)
8001ef20:	080033df 	j	8000cf7c <sysfile_open>
8001ef24:	8c840000 	lw	a0,0(a0)

8001ef28 <sys_event_recv>:
sys_event_recv():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:173
    unsigned int timeout = (unsigned int)arg[2];
    return ipc_event_send(pid, event, timeout);
}

static uint32_t
sys_event_recv(uint32_t arg[]) {
8001ef28:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:177
    int *pid_store = (int *)arg[0];
    int *event_store = (int *)arg[1];
    unsigned int timeout = (unsigned int)arg[2];
    return ipc_event_recv(pid_store, event_store, timeout);
8001ef2c:	8c450004 	lw	a1,4(v0)
8001ef30:	8c840000 	lw	a0,0(a0)
8001ef34:	08006088 	j	80018220 <ipc_event_recv>
8001ef38:	8c460008 	lw	a2,8(v0)

8001ef3c <sys_event_send>:
sys_event_send():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:165
    int *value_store = (int *)arg[1];
    return ipc_sem_get_value(sem_id, value_store);
}

static uint32_t
sys_event_send(uint32_t arg[]) {
8001ef3c:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:169
    int pid = (int)arg[0];
    int event = (int)arg[1];
    unsigned int timeout = (unsigned int)arg[2];
    return ipc_event_send(pid, event, timeout);
8001ef40:	8c450004 	lw	a1,4(v0)
8001ef44:	8c840000 	lw	a0,0(a0)
8001ef48:	08005ff5 	j	80017fd4 <ipc_event_send>
8001ef4c:	8c460008 	lw	a2,8(v0)

8001ef50 <sys_sem_get_value>:
sys_sem_get_value():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:158
    sem_t sem_id = (sem_t)arg[0];
    return ipc_sem_free(sem_id);
}

static uint32_t
sys_sem_get_value(uint32_t arg[]) {
8001ef50:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:161
    sem_t sem_id = (sem_t)arg[0];
    int *value_store = (int *)arg[1];
    return ipc_sem_get_value(sem_id, value_store);
8001ef54:	8c450004 	lw	a1,4(v0)
8001ef58:	08006903 	j	8001a40c <ipc_sem_get_value>
8001ef5c:	8c840000 	lw	a0,0(a0)

8001ef60 <sys_sem_free>:
sys_sem_free():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:154
}

static uint32_t
sys_sem_free(uint32_t arg[]) {
    sem_t sem_id = (sem_t)arg[0];
    return ipc_sem_free(sem_id);
8001ef60:	080068c8 	j	8001a320 <ipc_sem_free>
8001ef64:	8c840000 	lw	a0,0(a0)

8001ef68 <sys_sem_wait>:
sys_sem_wait():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:145
    sem_t sem_id = (sem_t)arg[0];
    return ipc_sem_post(sem_id);
}

static uint32_t
sys_sem_wait(uint32_t arg[]) {
8001ef68:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:148
    sem_t sem_id = (sem_t)arg[0];
    unsigned int timeout = (unsigned int)arg[1];
    return ipc_sem_wait(sem_id, timeout);
8001ef6c:	8c450004 	lw	a1,4(v0)
8001ef70:	0800687c 	j	8001a1f0 <ipc_sem_wait>
8001ef74:	8c840000 	lw	a0,0(a0)

8001ef78 <sys_sem_post>:
sys_sem_post():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:141
}

static uint32_t
sys_sem_post(uint32_t arg[]) {
    sem_t sem_id = (sem_t)arg[0];
    return ipc_sem_post(sem_id);
8001ef78:	08006856 	j	8001a158 <ipc_sem_post>
8001ef7c:	8c840000 	lw	a0,0(a0)

8001ef80 <sys_sem_init>:
sys_sem_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:135
}

static uint32_t
sys_sem_init(uint32_t arg[]) {
    int value = (int)arg[0];
    return ipc_sem_init(value);
8001ef80:	0800682a 	j	8001a0a8 <ipc_sem_init>
8001ef84:	8c840000 	lw	a0,0(a0)

8001ef88 <sys_pgdir>:
sys_pgdir():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:127
    kputchar(c);
    return 0;
}

static uint32_t
sys_pgdir(uint32_t arg[]) {
8001ef88:	27bdffe8 	addiu	sp,sp,-24
8001ef8c:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:128
    print_pgdir();
8001ef90:	0c007477 	jal	8001d1dc <print_pgdir>
8001ef94:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:130
    return 0;
}
8001ef98:	8fbf0014 	lw	ra,20(sp)
8001ef9c:	00001021 	move	v0,zero
8001efa0:	03e00008 	jr	ra
8001efa4:	27bd0018 	addiu	sp,sp,24

8001efa8 <sys_putc>:
sys_putc():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:122
}

static uint32_t
sys_putc(uint32_t arg[]) {
    int c = (int)arg[0];
    kputchar(c);
8001efa8:	8c840000 	lw	a0,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:120
    uint32_t mmap_flags = (uint32_t)arg[2];
    return do_shmem(addr_store, len, mmap_flags);
}

static uint32_t
sys_putc(uint32_t arg[]) {
8001efac:	27bdffe8 	addiu	sp,sp,-24
8001efb0:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:122
    int c = (int)arg[0];
    kputchar(c);
8001efb4:	0c007afc 	jal	8001ebf0 <kputchar>
8001efb8:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:124
    return 0;
}
8001efbc:	8fbf0014 	lw	ra,20(sp)
8001efc0:	00001021 	move	v0,zero
8001efc4:	03e00008 	jr	ra
8001efc8:	27bd0018 	addiu	sp,sp,24

8001efcc <sys_shmem>:
sys_shmem():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:112
    size_t len = (size_t)arg[1];
    return do_munmap(addr, len);
}

static uint32_t
sys_shmem(uint32_t arg[]) {
8001efcc:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:116
    uintptr_t *addr_store = (uintptr_t *)arg[0];
    size_t len = (size_t)arg[1];
    uint32_t mmap_flags = (uint32_t)arg[2];
    return do_shmem(addr_store, len, mmap_flags);
8001efd0:	8c450004 	lw	a1,4(v0)
8001efd4:	8c840000 	lw	a0,0(a0)
8001efd8:	0800438d 	j	80010e34 <do_shmem>
8001efdc:	8c460008 	lw	a2,8(v0)

8001efe0 <sys_munmap>:
sys_munmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:105
    uint32_t mmap_flags = (uint32_t)arg[2];
    return do_mmap(addr_store, len, mmap_flags);
}

static uint32_t
sys_munmap(uint32_t arg[]) {
8001efe0:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:108
    uintptr_t addr = (uintptr_t)arg[0];
    size_t len = (size_t)arg[1];
    return do_munmap(addr, len);
8001efe4:	8c450004 	lw	a1,4(v0)
8001efe8:	0800436c 	j	80010db0 <do_munmap>
8001efec:	8c840000 	lw	a0,0(a0)

8001eff0 <sys_mmap>:
sys_mmap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:97
    uintptr_t *brk_store = (uintptr_t *)arg[0];
    return do_brk(brk_store);
}

static uint32_t
sys_mmap(uint32_t arg[]) {
8001eff0:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:101
    uintptr_t *addr_store = (uintptr_t *)arg[0];
    size_t len = (size_t)arg[1];
    uint32_t mmap_flags = (uint32_t)arg[2];
    return do_mmap(addr_store, len, mmap_flags);
8001eff4:	8c450004 	lw	a1,4(v0)
8001eff8:	8c840000 	lw	a0,0(a0)
8001effc:	08004316 	j	80010c58 <do_mmap>
8001f000:	8c460008 	lw	a2,8(v0)

8001f004 <sys_brk>:
sys_brk():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:93
}

static uint32_t
sys_brk(uint32_t arg[]) {
    uintptr_t *brk_store = (uintptr_t *)arg[0];
    return do_brk(brk_store);
8001f004:	0800419a 	j	80010668 <do_brk>
8001f008:	8c840000 	lw	a0,0(a0)

8001f00c <sys_kill>:
sys_kill():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:77
}

static uint32_t
sys_kill(uint32_t arg[]) {
    int pid = (int)arg[0];
    return do_kill(pid, -E_KILLED);
8001f00c:	8c840000 	lw	a0,0(a0)
8001f010:	0800417f 	j	800105fc <do_kill>
8001f014:	2405ffdb 	li	a1,-37

8001f018 <sys_sleep>:
sys_sleep():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:71
}

static uint32_t
sys_sleep(uint32_t arg[]) {
    unsigned int time = (unsigned int)arg[0];
    return do_sleep(time);
8001f018:	08004242 	j	80010908 <do_sleep>
8001f01c:	8c840000 	lw	a0,0(a0)

8001f020 <sys_yield>:
sys_yield():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:65
    return do_exit_thread(error_code);
}

static uint32_t
sys_yield(uint32_t arg[]) {
    return do_yield();
8001f020:	08003fce 	j	8000ff38 <do_yield>
8001f024:	00000000 	nop

8001f028 <sys_exit_thread>:
sys_exit_thread():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:60
}

static uint32_t
sys_exit_thread(uint32_t arg[]) {
    int error_code = (int)arg[0];
    return do_exit_thread(error_code);
8001f028:	08003d3c 	j	8000f4f0 <do_exit_thread>
8001f02c:	8c840000 	lw	a0,0(a0)

8001f030 <sys_clone>:
sys_clone():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:48
    return do_execve(name, argv, envp);
}

static uint32_t
sys_clone(uint32_t arg[]) {
    struct trapframe *tf = pls_read(current)->tf;
8001f030:	3c028015 	lui	v0,0x8015
8001f034:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:50
    uint32_t clone_flags = (uint32_t)arg[0];
    uintptr_t stack = (uintptr_t)arg[1];
8001f038:	8c850004 	lw	a1,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:49
}

static uint32_t
sys_clone(uint32_t arg[]) {
    struct trapframe *tf = pls_read(current)->tf;
    uint32_t clone_flags = (uint32_t)arg[0];
8001f03c:	8c840000 	lw	a0,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:51
    uintptr_t stack = (uintptr_t)arg[1];
    if (stack == 0) {
8001f040:	14a00002 	bnez	a1,8001f04c <sys_clone+0x1c>
8001f044:	8c460054 	lw	a2,84(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:52
        stack = tf->tf_regs.reg_r[MIPS_REG_SP];
8001f048:	8cc50088 	lw	a1,136(a2)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:54
    }
    return do_fork(clone_flags, stack, tf);
8001f04c:	08003b6d 	j	8000edb4 <do_fork>
8001f050:	00000000 	nop

8001f054 <sys_fork>:
sys_fork():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:26
    return do_exit(error_code);
}

static uint32_t
sys_fork(uint32_t arg[]) {
    struct trapframe *tf = current->tf;
8001f054:	3c028015 	lui	v0,0x8015
8001f058:	8c4277a4 	lw	v0,30628(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:28
    uintptr_t stack = tf->tf_regs.reg_r[MIPS_REG_SP];
    return do_fork(0, stack, tf);
8001f05c:	00002021 	move	a0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:26
    return do_exit(error_code);
}

static uint32_t
sys_fork(uint32_t arg[]) {
    struct trapframe *tf = current->tf;
8001f060:	8c460054 	lw	a2,84(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:28
    uintptr_t stack = tf->tf_regs.reg_r[MIPS_REG_SP];
    return do_fork(0, stack, tf);
8001f064:	08003b6d 	j	8000edb4 <do_fork>
8001f068:	8cc50088 	lw	a1,136(a2)

8001f06c <sys_exec>:
sys_exec():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:39
    int *store = (int *)arg[1];
    return do_wait(pid, store);
}

static uint32_t
sys_exec(uint32_t arg[]) {
8001f06c:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:43
    const char *name = (const char *)arg[0];
    const char **argv = (const char **)arg[1];
    const char **envp = (const char **)arg[2];
    return do_execve(name, argv, envp);
8001f070:	8c450004 	lw	a1,4(v0)
8001f074:	8c840000 	lw	a0,0(a0)
8001f078:	08003d64 	j	8000f590 <do_execve>
8001f07c:	8c460008 	lw	a2,8(v0)

8001f080 <sys_wait>:
sys_wait():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:32
    uintptr_t stack = tf->tf_regs.reg_r[MIPS_REG_SP];
    return do_fork(0, stack, tf);
}

static uint32_t
sys_wait(uint32_t arg[]) {
8001f080:	00801021 	move	v0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:35
    int pid = (int)arg[0];
    int *store = (int *)arg[1];
    return do_wait(pid, store);
8001f084:	8c450004 	lw	a1,4(v0)
8001f088:	08003fd5 	j	8000ff54 <do_wait>
8001f08c:	8c840000 	lw	a0,0(a0)

8001f090 <sys_exit>:
sys_exit():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:21
extern volatile int ticks;

static uint32_t
sys_exit(uint32_t arg[]) {
    int error_code = (int)arg[0];
    return do_exit(error_code);
8001f090:	08003d42 	j	8000f508 <do_exit>
8001f094:	8c840000 	lw	a0,0(a0)

8001f098 <syscall>:
syscall():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:353
};

#define NUM_SYSCALLS        ((sizeof(syscalls)) / (sizeof(syscalls[0])))

void syscall(void)
{
8001f098:	27bdffb8 	addiu	sp,sp,-72
8001f09c:	afb10040 	sw	s1,64(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:354
	assert(current != NULL);
8001f0a0:	3c118015 	lui	s1,0x8015
8001f0a4:	8e2277a4 	lw	v0,30628(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:353
};

#define NUM_SYSCALLS        ((sizeof(syscalls)) / (sizeof(syscalls[0])))

void syscall(void)
{
8001f0a8:	afbf0044 	sw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:354
	assert(current != NULL);
8001f0ac:	1040002d 	beqz	v0,8001f164 <syscall+0xcc>
8001f0b0:	afb0003c 	sw	s0,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:355
	struct trapframe *tf = current->tf;
8001f0b4:	8c500054 	lw	s0,84(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:357
	uint32_t arg[5];
	int num = tf->tf_regs.reg_r[MIPS_REG_V0];
8001f0b8:	8e07001c 	lw	a3,28(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:360
	//num -= T_SYSCALL;
	//kprintf("$ %d %d\n",current->pid, num);
	if (num >= 0 && num < NUM_SYSCALLS) {
8001f0bc:	2ce200f3 	sltiu	v0,a3,243
8001f0c0:	10400019 	beqz	v0,8001f128 <syscall+0x90>
8001f0c4:	3c038002 	lui	v1,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:361
		if (syscalls[num] != NULL) {
8001f0c8:	00071080 	sll	v0,a3,0x2
8001f0cc:	24630998 	addiu	v1,v1,2456
8001f0d0:	00431021 	addu	v0,v0,v1
8001f0d4:	8c420000 	lw	v0,0(v0)
8001f0d8:	50400014 	beqzl	v0,8001f12c <syscall+0x94>
8001f0dc:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:365
			arg[0] = tf->tf_regs.reg_r[MIPS_REG_A0];
			arg[1] = tf->tf_regs.reg_r[MIPS_REG_A1];
			arg[2] = tf->tf_regs.reg_r[MIPS_REG_A2];
			arg[3] = tf->tf_regs.reg_r[MIPS_REG_A3];
8001f0e0:	8e040030 	lw	a0,48(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:362
	int num = tf->tf_regs.reg_r[MIPS_REG_V0];
	//num -= T_SYSCALL;
	//kprintf("$ %d %d\n",current->pid, num);
	if (num >= 0 && num < NUM_SYSCALLS) {
		if (syscalls[num] != NULL) {
			arg[0] = tf->tf_regs.reg_r[MIPS_REG_A0];
8001f0e4:	8e070024 	lw	a3,36(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:363
			arg[1] = tf->tf_regs.reg_r[MIPS_REG_A1];
8001f0e8:	8e060028 	lw	a2,40(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:364
			arg[2] = tf->tf_regs.reg_r[MIPS_REG_A2];
8001f0ec:	8e05002c 	lw	a1,44(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:366
			arg[3] = tf->tf_regs.reg_r[MIPS_REG_A3];
			arg[4] = tf->tf_regs.reg_r[MIPS_REG_T0];
8001f0f0:	8e030034 	lw	v1,52(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:365
	if (num >= 0 && num < NUM_SYSCALLS) {
		if (syscalls[num] != NULL) {
			arg[0] = tf->tf_regs.reg_r[MIPS_REG_A0];
			arg[1] = tf->tf_regs.reg_r[MIPS_REG_A1];
			arg[2] = tf->tf_regs.reg_r[MIPS_REG_A2];
			arg[3] = tf->tf_regs.reg_r[MIPS_REG_A3];
8001f0f4:	afa40024 	sw	a0,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:362
	int num = tf->tf_regs.reg_r[MIPS_REG_V0];
	//num -= T_SYSCALL;
	//kprintf("$ %d %d\n",current->pid, num);
	if (num >= 0 && num < NUM_SYSCALLS) {
		if (syscalls[num] != NULL) {
			arg[0] = tf->tf_regs.reg_r[MIPS_REG_A0];
8001f0f8:	afa70018 	sw	a3,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:363
			arg[1] = tf->tf_regs.reg_r[MIPS_REG_A1];
8001f0fc:	afa6001c 	sw	a2,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:364
			arg[2] = tf->tf_regs.reg_r[MIPS_REG_A2];
8001f100:	afa50020 	sw	a1,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:366
			arg[3] = tf->tf_regs.reg_r[MIPS_REG_A3];
			arg[4] = tf->tf_regs.reg_r[MIPS_REG_T0];
8001f104:	afa30028 	sw	v1,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:367
			tf->tf_regs.reg_r[MIPS_REG_V0] = syscalls[num] (arg);
8001f108:	0040f809 	jalr	v0
8001f10c:	27a40018 	addiu	a0,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:374
		}
	}
	print_trapframe(tf);
	panic("undefined syscall %d, pid = %d, name = %s.\n",
	      num, current->pid, current->name);
}
8001f110:	8fbf0044 	lw	ra,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:367
			arg[0] = tf->tf_regs.reg_r[MIPS_REG_A0];
			arg[1] = tf->tf_regs.reg_r[MIPS_REG_A1];
			arg[2] = tf->tf_regs.reg_r[MIPS_REG_A2];
			arg[3] = tf->tf_regs.reg_r[MIPS_REG_A3];
			arg[4] = tf->tf_regs.reg_r[MIPS_REG_T0];
			tf->tf_regs.reg_r[MIPS_REG_V0] = syscalls[num] (arg);
8001f114:	ae02001c 	sw	v0,28(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:374
		}
	}
	print_trapframe(tf);
	panic("undefined syscall %d, pid = %d, name = %s.\n",
	      num, current->pid, current->name);
}
8001f118:	8fb10040 	lw	s1,64(sp)
8001f11c:	8fb0003c 	lw	s0,60(sp)
8001f120:	03e00008 	jr	ra
8001f124:	27bd0048 	addiu	sp,sp,72
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:371
			arg[4] = tf->tf_regs.reg_r[MIPS_REG_T0];
			tf->tf_regs.reg_r[MIPS_REG_V0] = syscalls[num] (arg);
			return;
		}
	}
	print_trapframe(tf);
8001f128:	02002021 	move	a0,s0
8001f12c:	0c007cb4 	jal	8001f2d0 <print_trapframe>
8001f130:	afa70030 	sw	a3,48(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:372
	panic("undefined syscall %d, pid = %d, name = %s.\n",
8001f134:	8e2277a4 	lw	v0,30628(s1)
8001f138:	8fa70030 	lw	a3,48(sp)
8001f13c:	3c048002 	lui	a0,0x8002
8001f140:	8c430004 	lw	v1,4(v0)
8001f144:	3c068002 	lui	a2,0x8002
8001f148:	24420060 	addiu	v0,v0,96
8001f14c:	2484492c 	addiu	a0,a0,18732
8001f150:	24050175 	li	a1,373
8001f154:	24c64938 	addiu	a2,a2,18744
8001f158:	afa30010 	sw	v1,16(sp)
8001f15c:	0c006b0b 	jal	8001ac2c <__panic>
8001f160:	afa20014 	sw	v0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/syscall/syscall.c:354

#define NUM_SYSCALLS        ((sizeof(syscalls)) / (sizeof(syscalls[0])))

void syscall(void)
{
	assert(current != NULL);
8001f164:	3c048002 	lui	a0,0x8002
8001f168:	3c068002 	lui	a2,0x8002
8001f16c:	3c078002 	lui	a3,0x8002
8001f170:	2484492c 	addiu	a0,a0,18732
8001f174:	24050162 	li	a1,354
8001f178:	24c60e28 	addiu	a2,a2,3624
8001f17c:	0c006b0b 	jal	8001ac2c <__panic>
8001f180:	24e73338 	addiu	a3,a3,13112

8001f184 <mp_set_mm_pagetable>:
mp_set_mm_pagetable():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/mp.c:11

PLS int pls_lapic_id;
PLS int pls_lcpu_idx;
PLS int pls_lcpu_count;
void mp_set_mm_pagetable(struct mm_struct *mm)
{
8001f184:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/mp.c:12
	if (mm != NULL && mm->pgdir != NULL)
8001f188:	1080000d 	beqz	a0,8001f1c0 <mp_set_mm_pagetable+0x3c>
8001f18c:	afbf0014 	sw	ra,20(sp)
8001f190:	8c870010 	lw	a3,16(a0)
8001f194:	10e0000a 	beqz	a3,8001f1c0 <mp_set_mm_pagetable+0x3c>
8001f198:	3c028000 	lui	v0,0x8000
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/mp.c:13
		lcr3(PADDR(mm->pgdir));
8001f19c:	24421000 	addiu	v0,v0,4096
8001f1a0:	00e2102b 	sltu	v0,a3,v0
8001f1a4:	1440000c 	bnez	v0,8001f1d8 <mp_set_mm_pagetable+0x54>
8001f1a8:	3c048002 	lui	a0,0x8002
8001f1ac:	0c007422 	jal	8001d088 <lcr3>
8001f1b0:	00e02021 	move	a0,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/mp.c:17
	else
		lcr3(boot_cr3);
	tlb_invalidate_all();
}
8001f1b4:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/mp.c:16
{
	if (mm != NULL && mm->pgdir != NULL)
		lcr3(PADDR(mm->pgdir));
	else
		lcr3(boot_cr3);
	tlb_invalidate_all();
8001f1b8:	0800791c 	j	8001e470 <tlb_invalidate_all>
8001f1bc:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/mp.c:15
void mp_set_mm_pagetable(struct mm_struct *mm)
{
	if (mm != NULL && mm->pgdir != NULL)
		lcr3(PADDR(mm->pgdir));
	else
		lcr3(boot_cr3);
8001f1c0:	3c028015 	lui	v0,0x8015
8001f1c4:	0c007422 	jal	8001d088 <lcr3>
8001f1c8:	8c44779c 	lw	a0,30620(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/mp.c:17
	tlb_invalidate_all();
}
8001f1cc:	8fbf0014 	lw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/mp.c:16
{
	if (mm != NULL && mm->pgdir != NULL)
		lcr3(PADDR(mm->pgdir));
	else
		lcr3(boot_cr3);
	tlb_invalidate_all();
8001f1d0:	0800791c 	j	8001e470 <tlb_invalidate_all>
8001f1d4:	27bd0018 	addiu	sp,sp,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/mp.c:13
PLS int pls_lcpu_idx;
PLS int pls_lcpu_count;
void mp_set_mm_pagetable(struct mm_struct *mm)
{
	if (mm != NULL && mm->pgdir != NULL)
		lcr3(PADDR(mm->pgdir));
8001f1d8:	3c068002 	lui	a2,0x8002
8001f1dc:	24844964 	addiu	a0,a0,18788
8001f1e0:	2405000d 	li	a1,13
8001f1e4:	0c006b0b 	jal	8001ac2c <__panic>
8001f1e8:	24c62a30 	addiu	a2,a2,10800

8001f1ec <mp_tlb_invalidate>:
mp_tlb_invalidate():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/mp.c:21
	tlb_invalidate_all();
}

void mp_tlb_invalidate(pgd_t * pgdir, uintptr_t la)
{
	tlb_invalidate_all();
8001f1ec:	0800791c 	j	8001e470 <tlb_invalidate_all>
8001f1f0:	00000000 	nop

8001f1f4 <mp_tlb_update>:
mp_tlb_update():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/mp.c:26
}

void mp_tlb_update(pgd_t * pgdir, uintptr_t la)
{
	tlb_invalidate_all();
8001f1f4:	0800791c 	j	8001e470 <tlb_invalidate_all>
8001f1f8:	00000000 	nop

8001f1fc <mp_init>:
mp_init():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/mp.c:31
}

int mp_init(void)
{
	pls_write(lapic_id, 0);
8001f1fc:	3c028015 	lui	v0,0x8015
8001f200:	ac4077b0 	sw	zero,30640(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/mp.c:32
	pls_write(lcpu_idx, 0);
8001f204:	3c028015 	lui	v0,0x8015
8001f208:	ac407790 	sw	zero,30608(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/mp.c:33
	pls_write(lcpu_count, 1);
8001f20c:	24030001 	li	v1,1
8001f210:	3c028015 	lui	v0,0x8015
8001f214:	ac4377a0 	sw	v1,30624(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/mp.c:36

	return 0;
}
8001f218:	03e00008 	jr	ra
8001f21c:	00001021 	move	v0,zero

8001f220 <trap_in_kernel>:
trap_in_kernel():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:57
		return "Unknown";
}

bool trap_in_kernel(struct trapframe * tf)
{
	return !(tf->tf_status & KSU_USER);
8001f220:	8c820004 	lw	v0,4(a0)
8001f224:	30420010 	andi	v0,v0,0x10
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:58
}
8001f228:	03e00008 	jr	ra
8001f22c:	2c420001 	sltiu	v0,v0,1

8001f230 <print_regs>:
print_regs():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:61

void print_regs(struct pushregs *regs)
{
8001f230:	27bdffd0 	addiu	sp,sp,-48
8001f234:	afb50028 	sw	s5,40(sp)
8001f238:	afb40024 	sw	s4,36(sp)
8001f23c:	afb30020 	sw	s3,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:64
	int i;
	for (i = 0; i < 30; i++) {
		kprintf(" $");
8001f240:	3c158002 	lui	s5,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:66
		printbase10(i + 1);
		kprintf("\t: ");
8001f244:	3c148002 	lui	s4,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:68
		printhex(regs->reg_r[i]);
		kprintf("\n\r");
8001f248:	3c138002 	lui	s3,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:61
{
	return !(tf->tf_status & KSU_USER);
}

void print_regs(struct pushregs *regs)
{
8001f24c:	afb2001c 	sw	s2,28(sp)
8001f250:	afb10018 	sw	s1,24(sp)
8001f254:	afb00014 	sw	s0,20(sp)
8001f258:	afbf002c 	sw	ra,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:63
	int i;
	for (i = 0; i < 30; i++) {
8001f25c:	00808821 	move	s1,a0
8001f260:	00008021 	move	s0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:64
		kprintf(" $");
8001f264:	26b5496c 	addiu	s5,s5,18796
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:66
		printbase10(i + 1);
		kprintf("\t: ");
8001f268:	26944970 	addiu	s4,s4,18800
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:68
		printhex(regs->reg_r[i]);
		kprintf("\n\r");
8001f26c:	2673474c 	addiu	s3,s3,18252
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:63
}

void print_regs(struct pushregs *regs)
{
	int i;
	for (i = 0; i < 30; i++) {
8001f270:	2412001e 	li	s2,30
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:64
		kprintf(" $");
8001f274:	02a02021 	move	a0,s5
8001f278:	0c007a9e 	jal	8001ea78 <kprintf>
8001f27c:	26100001 	addiu	s0,s0,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:65
		printbase10(i + 1);
8001f280:	0c007abd 	jal	8001eaf4 <printbase10>
8001f284:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:66
		kprintf("\t: ");
8001f288:	0c007a9e 	jal	8001ea78 <kprintf>
8001f28c:	02802021 	move	a0,s4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:67
		printhex(regs->reg_r[i]);
8001f290:	8e240000 	lw	a0,0(s1)
8001f294:	0c007aaa 	jal	8001eaa8 <printhex>
8001f298:	26310004 	addiu	s1,s1,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:68
		kprintf("\n\r");
8001f29c:	0c007a9e 	jal	8001ea78 <kprintf>
8001f2a0:	02602021 	move	a0,s3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:63
}

void print_regs(struct pushregs *regs)
{
	int i;
	for (i = 0; i < 30; i++) {
8001f2a4:	5612fff4 	bnel	s0,s2,8001f278 <print_regs+0x48>
8001f2a8:	02a02021 	move	a0,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:70
		printbase10(i + 1);
		kprintf("\t: ");
		printhex(regs->reg_r[i]);
		kprintf("\n\r");
	}
}
8001f2ac:	8fbf002c 	lw	ra,44(sp)
8001f2b0:	8fb50028 	lw	s5,40(sp)
8001f2b4:	8fb40024 	lw	s4,36(sp)
8001f2b8:	8fb30020 	lw	s3,32(sp)
8001f2bc:	8fb2001c 	lw	s2,28(sp)
8001f2c0:	8fb10018 	lw	s1,24(sp)
8001f2c4:	8fb00014 	lw	s0,20(sp)
8001f2c8:	03e00008 	jr	ra
8001f2cc:	27bd0030 	addiu	sp,sp,48

8001f2d0 <print_trapframe>:
print_trapframe():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:73

void print_trapframe(struct trapframe *tf)
{
8001f2d0:	27bdffe0 	addiu	sp,sp,-32
8001f2d4:	afb00014 	sw	s0,20(sp)
8001f2d8:	00808021 	move	s0,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:74
	PRINT_HEX("trapframe at ", tf);
8001f2dc:	3c048002 	lui	a0,0x8002
8001f2e0:	2484497c 	addiu	a0,a0,18812
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:73
		kprintf("\n\r");
	}
}

void print_trapframe(struct trapframe *tf)
{
8001f2e4:	afbf001c 	sw	ra,28(sp)
8001f2e8:	afb10018 	sw	s1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:74
	PRINT_HEX("trapframe at ", tf);
8001f2ec:	0c007a9e 	jal	8001ea78 <kprintf>
8001f2f0:	3c118002 	lui	s1,0x8002
8001f2f4:	0c007aaa 	jal	8001eaa8 <printhex>
8001f2f8:	02002021 	move	a0,s0
8001f2fc:	0c007a9e 	jal	8001ea78 <kprintf>
8001f300:	26243f2c 	addiu	a0,s1,16172
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:75
	print_regs(&tf->tf_regs);
8001f304:	0c007c8c 	jal	8001f230 <print_regs>
8001f308:	26040018 	addiu	a0,s0,24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:76
	PRINT_HEX("\r\n $ra: ", tf->tf_ra);
8001f30c:	3c048002 	lui	a0,0x8002
8001f310:	0c007a9e 	jal	8001ea78 <kprintf>
8001f314:	2484498c 	addiu	a0,a0,18828
8001f318:	0c007aaa 	jal	8001eaa8 <printhex>
8001f31c:	8e040014 	lw	a0,20(s0)
8001f320:	0c007a9e 	jal	8001ea78 <kprintf>
8001f324:	26243f2c 	addiu	a0,s1,16172
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:77
	PRINT_HEX("\r\n BadVA: ", tf->tf_vaddr);
8001f328:	3c048002 	lui	a0,0x8002
8001f32c:	0c007a9e 	jal	8001ea78 <kprintf>
8001f330:	24844998 	addiu	a0,a0,18840
8001f334:	0c007aaa 	jal	8001eaa8 <printhex>
8001f338:	8e040000 	lw	a0,0(s0)
8001f33c:	0c007a9e 	jal	8001ea78 <kprintf>
8001f340:	26243f2c 	addiu	a0,s1,16172
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:78
	PRINT_HEX("\r\n Status: ", tf->tf_status);
8001f344:	3c048002 	lui	a0,0x8002
8001f348:	0c007a9e 	jal	8001ea78 <kprintf>
8001f34c:	248449a4 	addiu	a0,a0,18852
8001f350:	0c007aaa 	jal	8001eaa8 <printhex>
8001f354:	8e040004 	lw	a0,4(s0)
8001f358:	0c007a9e 	jal	8001ea78 <kprintf>
8001f35c:	26243f2c 	addiu	a0,s1,16172
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:79
	PRINT_HEX("\r\n Cause: ", tf->tf_cause);
8001f360:	3c048002 	lui	a0,0x8002
8001f364:	0c007a9e 	jal	8001ea78 <kprintf>
8001f368:	248449b0 	addiu	a0,a0,18864
8001f36c:	0c007aaa 	jal	8001eaa8 <printhex>
8001f370:	8e040008 	lw	a0,8(s0)
8001f374:	0c007a9e 	jal	8001ea78 <kprintf>
8001f378:	26243f2c 	addiu	a0,s1,16172
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:80
	PRINT_HEX("\r\n EPC ", tf->tf_epc);
8001f37c:	3c048002 	lui	a0,0x8002
8001f380:	0c007a9e 	jal	8001ea78 <kprintf>
8001f384:	248449bc 	addiu	a0,a0,18876
8001f388:	0c007aaa 	jal	8001eaa8 <printhex>
8001f38c:	8e040090 	lw	a0,144(s0)
8001f390:	0c007a9e 	jal	8001ea78 <kprintf>
8001f394:	26243f2c 	addiu	a0,s1,16172
trap_in_kernel():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:57
		return "Unknown";
}

bool trap_in_kernel(struct trapframe * tf)
{
	return !(tf->tf_status & KSU_USER);
8001f398:	8e020004 	lw	v0,4(s0)
8001f39c:	30420010 	andi	v0,v0,0x10
print_trapframe():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:81
	PRINT_HEX("\r\n $ra: ", tf->tf_ra);
	PRINT_HEX("\r\n BadVA: ", tf->tf_vaddr);
	PRINT_HEX("\r\n Status: ", tf->tf_status);
	PRINT_HEX("\r\n Cause: ", tf->tf_cause);
	PRINT_HEX("\r\n EPC ", tf->tf_epc);
	if (!trap_in_kernel(tf)) {
8001f3a0:	50400016 	beqzl	v0,8001f3fc <print_trapframe+0x12c>
8001f3a4:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:82
		kprintf("\r\nTrap in usermode: ");
8001f3a8:	3c048002 	lui	a0,0x8002
8001f3ac:	0c007a9e 	jal	8001ea78 <kprintf>
8001f3b0:	248449c4 	addiu	a0,a0,18884
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:86
	} else {
		kprintf("\n\rTrap in kernel: ");
	}
	kprintf(trapname(GET_CAUSE_EXCODE(tf->tf_cause)));
8001f3b4:	8e020008 	lw	v0,8(s0)
8001f3b8:	7c422080 	ext	v0,v0,0x2,0x5
trapname():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:49
		"Breakpoint",
		"Reserved (illegal) instruction",
		"Coprocessor unusable",
		"Arithmetic overflow",
	};
	if (trapno <= 12)
8001f3bc:	2843000d 	slti	v1,v0,13
8001f3c0:	50600016 	beqzl	v1,8001f41c <print_trapframe+0x14c>
8001f3c4:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:50
		return excnames[trapno];
8001f3c8:	3c038002 	lui	v1,0x8002
8001f3cc:	24630d90 	addiu	v1,v1,3472
8001f3d0:	00021080 	sll	v0,v0,0x2
8001f3d4:	00431021 	addu	v0,v0,v1
print_trapframe():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:86
	if (!trap_in_kernel(tf)) {
		kprintf("\r\nTrap in usermode: ");
	} else {
		kprintf("\n\rTrap in kernel: ");
	}
	kprintf(trapname(GET_CAUSE_EXCODE(tf->tf_cause)));
8001f3d8:	0c007a9e 	jal	8001ea78 <kprintf>
8001f3dc:	8c440000 	lw	a0,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:88
	kprintf("\n\r");
}
8001f3e0:	8fbf001c 	lw	ra,28(sp)
8001f3e4:	8fb10018 	lw	s1,24(sp)
8001f3e8:	8fb00014 	lw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:87
		kprintf("\r\nTrap in usermode: ");
	} else {
		kprintf("\n\rTrap in kernel: ");
	}
	kprintf(trapname(GET_CAUSE_EXCODE(tf->tf_cause)));
	kprintf("\n\r");
8001f3ec:	3c048002 	lui	a0,0x8002
8001f3f0:	2484474c 	addiu	a0,a0,18252
8001f3f4:	08007a9e 	j	8001ea78 <kprintf>
8001f3f8:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:84
	PRINT_HEX("\r\n Cause: ", tf->tf_cause);
	PRINT_HEX("\r\n EPC ", tf->tf_epc);
	if (!trap_in_kernel(tf)) {
		kprintf("\r\nTrap in usermode: ");
	} else {
		kprintf("\n\rTrap in kernel: ");
8001f3fc:	0c007a9e 	jal	8001ea78 <kprintf>
8001f400:	248449dc 	addiu	a0,a0,18908
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:86
	}
	kprintf(trapname(GET_CAUSE_EXCODE(tf->tf_cause)));
8001f404:	8e020008 	lw	v0,8(s0)
8001f408:	7c422080 	ext	v0,v0,0x2,0x5
trapname():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:49
		"Breakpoint",
		"Reserved (illegal) instruction",
		"Coprocessor unusable",
		"Arithmetic overflow",
	};
	if (trapno <= 12)
8001f40c:	2843000d 	slti	v1,v0,13
8001f410:	1460ffee 	bnez	v1,8001f3cc <print_trapframe+0xfc>
8001f414:	3c038002 	lui	v1,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:52
		return excnames[trapno];
	else
		return "Unknown";
8001f418:	3c048002 	lui	a0,0x8002
print_trapframe():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:86
	if (!trap_in_kernel(tf)) {
		kprintf("\r\nTrap in usermode: ");
	} else {
		kprintf("\n\rTrap in kernel: ");
	}
	kprintf(trapname(GET_CAUSE_EXCODE(tf->tf_cause)));
8001f41c:	0c007a9e 	jal	8001ea78 <kprintf>
8001f420:	24844974 	addiu	a0,a0,18804
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:88
	kprintf("\n\r");
}
8001f424:	8fbf001c 	lw	ra,28(sp)
8001f428:	8fb10018 	lw	s1,24(sp)
8001f42c:	8fb00014 	lw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:87
		kprintf("\r\nTrap in usermode: ");
	} else {
		kprintf("\n\rTrap in kernel: ");
	}
	kprintf(trapname(GET_CAUSE_EXCODE(tf->tf_cause)));
	kprintf("\n\r");
8001f430:	3c048002 	lui	a0,0x8002
8001f434:	2484474c 	addiu	a0,a0,18252
8001f438:	08007a9e 	j	8001ea78 <kprintf>
8001f43c:	27bd0020 	addiu	sp,sp,32

8001f440 <handle_tlbmiss>:
handle_tlbmiss():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:189
		while (1) ;
	}
#endif
	//dump_tlb_all();
	static int entercnt = 0;
	entercnt++;
8001f440:	3c028015 	lui	v0,0x8015
8001f444:	8c47777c 	lw	a3,30588(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:193
	//kprintf("## enter handle_tlbmiss %d times\n\r", entercnt);

	int in_kernel = trap_in_kernel(tf);
	assert(current_pgdir != NULL);
8001f448:	3c038015 	lui	v1,0x8015
8001f44c:	8c637768 	lw	v1,30568(v1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:180
/* Hint:
 * 

 */
static void handle_tlbmiss(struct trapframe *tf, int write, int perm)//YX )
{
8001f450:	27bdffd8 	addiu	sp,sp,-40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:189
		while (1) ;
	}
#endif
	//dump_tlb_all();
	static int entercnt = 0;
	entercnt++;
8001f454:	24e70001 	addiu	a3,a3,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:180
/* Hint:
 * 

 */
static void handle_tlbmiss(struct trapframe *tf, int write, int perm)//YX )
{
8001f458:	afb40020 	sw	s4,32(sp)
8001f45c:	afb3001c 	sw	s3,28(sp)
8001f460:	afb20018 	sw	s2,24(sp)
8001f464:	afb00010 	sw	s0,16(sp)
8001f468:	afbf0024 	sw	ra,36(sp)
8001f46c:	afb10014 	sw	s1,20(sp)
8001f470:	00808021 	move	s0,a0
8001f474:	00a09021 	move	s2,a1
8001f478:	00c09821 	move	s3,a2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:189
		while (1) ;
	}
#endif
	//dump_tlb_all();
	static int entercnt = 0;
	entercnt++;
8001f47c:	ac47777c 	sw	a3,30588(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:193
	//kprintf("## enter handle_tlbmiss %d times\n\r", entercnt);

	int in_kernel = trap_in_kernel(tf);
	assert(current_pgdir != NULL);
8001f480:	10600095 	beqz	v1,8001f6d8 <handle_tlbmiss+0x298>
8001f484:	8c940004 	lw	s4,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:195
	//print_trapframe(tf);
	uint32_t badaddr = tf->tf_vaddr;
8001f488:	8c910000 	lw	s1,0(a0)
trap_in_kernel():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:57
		return "Unknown";
}

bool trap_in_kernel(struct trapframe * tf)
{
	return !(tf->tf_status & KSU_USER);
8001f48c:	32940010 	andi	s4,s4,0x10
handle_tlbmiss():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:197
	int in_kernel = trap_in_kernel(tf);
	assert(current_pgdir != NULL);
	//print_trapframe(tf);
	uint32_t badaddr = tf->tf_vaddr;
	int ret = 0;
	pte_t *pte = get_pte(current_pgdir, tf->tf_vaddr, 0);
8001f490:	00602021 	move	a0,v1
8001f494:	02202821 	move	a1,s1
8001f498:	00003021 	move	a2,zero
8001f49c:	0c005ccc 	jal	80017330 <get_pte>
8001f4a0:	2e940001 	sltiu	s4,s4,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:199
	//  )
	if (perm ||pte == NULL || ptep_invalid(pte) || (write && !ptep_u_write(pte))) {	//PTE miss, pgfault
8001f4a4:	16600035 	bnez	s3,8001f57c <handle_tlbmiss+0x13c>
8001f4a8:	00000000 	nop
8001f4ac:	10400037 	beqz	v0,8001f58c <handle_tlbmiss+0x14c>
8001f4b0:	00002821 	move	a1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:337
//add by HHL
int ucore_in_interrupt()
{
	//panic("ucore_in_interrupt()");
	return 0;
}
8001f4b4:	8c450000 	lw	a1,0(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:199
	//print_trapframe(tf);
	uint32_t badaddr = tf->tf_vaddr;
	int ret = 0;
	pte_t *pte = get_pte(current_pgdir, tf->tf_vaddr, 0);
	//  )
	if (perm ||pte == NULL || ptep_invalid(pte) || (write && !ptep_u_write(pte))) {	//PTE miss, pgfault
8001f4b8:	50a00034 	beqzl	a1,8001f58c <handle_tlbmiss+0x14c>
8001f4bc:	30a50001 	andi	a1,a1,0x1
8001f4c0:	16400054 	bnez	s2,8001f614 <handle_tlbmiss+0x1d4>
8001f4c4:	30a40006 	andi	a0,a1,0x6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:209
		//permission check in tlb miss
		ret = pgfault_handler(tf, badaddr, get_error_code(write, pte));
	} else {		//tlb miss only, reload it
		/* refill two slot */
		/* check permission */
		if (in_kernel) {
8001f4c8:	16800060 	bnez	s4,8001f64c <handle_tlbmiss+0x20c>
8001f4cc:	30a30004 	andi	v1,a1,0x4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:215
			tlb_refill(badaddr, pte);
			//kprintf("## refill K\n\r");
			//dump_tlb_all();
			return;
		} else {
			if (!ptep_u_read(pte)) {
8001f4d0:	1060005a 	beqz	v1,8001f63c <handle_tlbmiss+0x1fc>
8001f4d4:	00a02021 	move	a0,a1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:219
				ret = -1;
				goto exit;
			}
			if (write && !ptep_u_write(pte)) {
8001f4d8:	12400004 	beqz	s2,8001f4ec <handle_tlbmiss+0xac>
8001f4dc:	30a60006 	andi	a2,a1,0x6
8001f4e0:	24030006 	li	v1,6
8001f4e4:	14c30055 	bne	a2,v1,8001f63c <handle_tlbmiss+0x1fc>
8001f4e8:	00000000 	nop
tlb_refill():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:137
{
	//kprintf("tlb_re ok\n\r");
	
	if (!pte)
		return;
	if (badaddr & (1 << 12))
8001f4ec:	32231000 	andi	v1,s1,0x1000
8001f4f0:	14600075 	bnez	v1,8001f6c8 <handle_tlbmiss+0x288>
8001f4f4:	00a03021 	move	a2,a1
8001f4f8:	8c470004 	lw	a3,4(v0)
8001f4fc:	00e03021 	move	a2,a3
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:143
		pte--;
	//kprintf("*pte=0x%08x\n\r",*pte);
	//kprintf("*pte+1=0x%08x\n\r",*(pte+1));
//#ifdef MACH_QEMU
	//kprintf("badaddr=0x%08x\n\r",badaddr);
	tlb_replace_random(0, badaddr & THUMIPS_TLB_ENTRYH_VPN2_MASK,
8001f500:	2403e000 	li	v1,-8192
ptep_present():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:26
	return (*ptep == 0);
}

static inline int ptep_present(pte_t * ptep)
{
	return (*ptep & PTE_P);
8001f504:	30820001 	andi	v0,a0,0x1
tlb_refill():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:143
8001f508:	02238824 	and	s1,s1,v1
pte2tlblow():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:119
{
	//kprintf("pte=0x%08x\n\r",pte);
	uint32_t t = (((uint32_t) pte - 0x80000000) >> 12) <<6;
	//kprintf("pa=0x%08x\n\r",t<<6);
	//kprintf("t=0x%08x\n\r",t);
	if (!ptep_present(&pte))
8001f50c:	10400009 	beqz	v0,8001f534 <handle_tlbmiss+0xf4>
8001f510:	00001821 	move	v1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:116

#define PTE2TLBLOW(x) (((((uint32_t)(*(x))-KERNBASE)>> 12)<<6)|THUMIPS_TLB_ENTRYL_V|THUMIPS_TLB_ENTRYL_D|(2<<3))
static inline uint32_t pte2tlblow(pte_t pte)
{
	//kprintf("pte=0x%08x\n\r",pte);
	uint32_t t = (((uint32_t) pte - 0x80000000) >> 12) <<6;
8001f514:	3c028000 	lui	v0,0x8000
8001f518:	00a21021 	addu	v0,a1,v0
8001f51c:	00021302 	srl	v0,v0,0xc
8001f520:	00021180 	sll	v0,v0,0x6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:124
	if (!ptep_present(&pte))
		return 0;
	t |= THUMIPS_TLB_ENTRYL_V;
	/* always ignore ASID */
	t |= THUMIPS_TLB_ENTRYL_G;
	t |= (3 << 3);
8001f524:	3443001b 	ori	v1,v0,0x1b
ptep_s_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:36
	return (*ptep & PTE_P);
}

static inline int ptep_s_write(pte_t * ptep)
{
	return (*ptep & PTE_W);
8001f528:	30840002 	andi	a0,a0,0x2
pte2tlblow():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:126
	if (ptep_s_write(&pte))
		t |= THUMIPS_TLB_ENTRYL_D;
8001f52c:	3442001f 	ori	v0,v0,0x1f
8001f530:	0044180b 	movn	v1,v0,a0
ptep_present():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:26
	return (*ptep == 0);
}

static inline int ptep_present(pte_t * ptep)
{
	return (*ptep & PTE_P);
8001f534:	30c40001 	andi	a0,a2,0x1
pte2tlblow():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:119
{
	//kprintf("pte=0x%08x\n\r",pte);
	uint32_t t = (((uint32_t) pte - 0x80000000) >> 12) <<6;
	//kprintf("pa=0x%08x\n\r",t<<6);
	//kprintf("t=0x%08x\n\r",t);
	if (!ptep_present(&pte))
8001f538:	10800009 	beqz	a0,8001f560 <handle_tlbmiss+0x120>
8001f53c:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:116

#define PTE2TLBLOW(x) (((((uint32_t)(*(x))-KERNBASE)>> 12)<<6)|THUMIPS_TLB_ENTRYL_V|THUMIPS_TLB_ENTRYL_D|(2<<3))
static inline uint32_t pte2tlblow(pte_t pte)
{
	//kprintf("pte=0x%08x\n\r",pte);
	uint32_t t = (((uint32_t) pte - 0x80000000) >> 12) <<6;
8001f540:	3c048000 	lui	a0,0x8000
8001f544:	00e42021 	addu	a0,a3,a0
8001f548:	00042302 	srl	a0,a0,0xc
8001f54c:	00042180 	sll	a0,a0,0x6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:124
	if (!ptep_present(&pte))
		return 0;
	t |= THUMIPS_TLB_ENTRYL_V;
	/* always ignore ASID */
	t |= THUMIPS_TLB_ENTRYL_G;
	t |= (3 << 3);
8001f550:	3482001b 	ori	v0,a0,0x1b
ptep_s_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:36
	return (*ptep & PTE_P);
}

static inline int ptep_s_write(pte_t * ptep)
{
	return (*ptep & PTE_W);
8001f554:	30c60002 	andi	a2,a2,0x2
pte2tlblow():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:126
	if (ptep_s_write(&pte))
		t |= THUMIPS_TLB_ENTRYL_D;
8001f558:	3484001f 	ori	a0,a0,0x1f
8001f55c:	0086100b 	movn	v0,a0,a2
tlb_replace_random():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:105
				      unsigned int low0, unsigned int low1)
{
	//kprintf("entryhi=0x%08x\n\r",hi);
	//kprintf("entrylo0=0x%08x\n\r",low0);
	//kprintf("entrylo1=0x%08x\n\r",low1);
	write_c0_entrylo0(low0);
8001f560:	40831000 	mtc0	v1,c0_entrylo0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:106
	write_c0_pagemask(pagemask);
8001f564:	40802800 	mtc0	zero,c0_pagemask
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:107
	write_c0_entrylo1(low1);
8001f568:	40821800 	mtc0	v0,c0_entrylo1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:108
	write_c0_entryhi(hi);
8001f56c:	40915000 	mtc0	s1,c0_entryhi
tlb_write_random():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/asm/mipsregs.h:1310
		".set reorder");
}

static inline void tlb_write_random(void)
{
	__asm__ __volatile__(
8001f570:	42000006 	tlbwr
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:239
		} else {
			do_exit(-E_KILLED);
		}
	}
	return;
}
8001f574:	08007d72 	j	8001f5c8 <handle_tlbmiss+0x188>
8001f578:	8fbf0024 	lw	ra,36(sp)
get_error_code():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:132
extern pde_t *current_pgdir;

static inline int get_error_code(int write, pte_t * pte)
{
	int r = 0;
	if (pte != NULL && ptep_present(pte))
8001f57c:	10400003 	beqz	v0,8001f58c <handle_tlbmiss+0x14c>
8001f580:	00002821 	move	a1,zero
8001f584:	8c450000 	lw	a1,0(v0)
ptep_present():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:26
	return (*ptep == 0);
}

static inline int ptep_present(pte_t * ptep)
{
	return (*ptep & PTE_P);
8001f588:	30a50001 	andi	a1,a1,0x1
pgfault_handler():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:154
	extern struct mm_struct *check_mm_struct;
	if (check_mm_struct != NULL) {	//used for test check_swap
		//print_pgfault(tf);
	}
	struct mm_struct *mm;
	if (check_mm_struct != NULL) {
8001f58c:	3c028015 	lui	v0,0x8015
8001f590:	8c4477b8 	lw	a0,30648(v0)
get_error_code():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:135
{
	int r = 0;
	if (pte != NULL && ptep_present(pte))
		r |= 0x01;
	if (write)
		r |= 0x02;
8001f594:	34a20002 	ori	v0,a1,0x2
8001f598:	0052280b 	movn	a1,v0,s2
pgfault_handler():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:154
	extern struct mm_struct *check_mm_struct;
	if (check_mm_struct != NULL) {	//used for test check_swap
		//print_pgfault(tf);
	}
	struct mm_struct *mm;
	if (check_mm_struct != NULL) {
8001f59c:	10800022 	beqz	a0,8001f628 <handle_tlbmiss+0x1e8>
8001f5a0:	3c028015 	lui	v0,0x8015
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:155
		assert(current == idleproc);
8001f5a4:	8c4377a4 	lw	v1,30628(v0)
8001f5a8:	3c028015 	lui	v0,0x8015
8001f5ac:	8c4277a8 	lw	v0,30632(v0)
8001f5b0:	54620051 	bnel	v1,v0,8001f6f8 <handle_tlbmiss+0x2b8>
8001f5b4:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:165
			//print_pgfault(tf);
			panic("unhandled page fault.\n\r");
		}
		mm = current->mm;
	}			//kprintf("  (do_pgfault(%x,%d,%x))  ", mm, error_code, addr);
	return do_pgfault(mm, error_code, addr);
8001f5b8:	0c0050bd 	jal	800142f4 <do_pgfault>
8001f5bc:	02203021 	move	a2,s1
handle_tlbmiss():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:230
			return;
		}
	}

exit:
	if (ret) {
8001f5c0:	14400008 	bnez	v0,8001f5e4 <handle_tlbmiss+0x1a4>
8001f5c4:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:239
		} else {
			do_exit(-E_KILLED);
		}
	}
	return;
}
8001f5c8:	8fb40020 	lw	s4,32(sp)
8001f5cc:	8fb3001c 	lw	s3,28(sp)
8001f5d0:	8fb20018 	lw	s2,24(sp)
8001f5d4:	8fb10014 	lw	s1,20(sp)
8001f5d8:	8fb00010 	lw	s0,16(sp)
8001f5dc:	03e00008 	jr	ra
8001f5e0:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:231
		}
	}

exit:
	if (ret) {
		print_trapframe(tf);
8001f5e4:	0c007cb4 	jal	8001f2d0 <print_trapframe>
8001f5e8:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:232
		if (in_kernel) {
8001f5ec:	16800049 	bnez	s4,8001f714 <handle_tlbmiss+0x2d4>
8001f5f0:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:239
		} else {
			do_exit(-E_KILLED);
		}
	}
	return;
}
8001f5f4:	8fb40020 	lw	s4,32(sp)
8001f5f8:	8fb3001c 	lw	s3,28(sp)
8001f5fc:	8fb20018 	lw	s2,24(sp)
8001f600:	8fb10014 	lw	s1,20(sp)
8001f604:	8fb00010 	lw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:235
	if (ret) {
		print_trapframe(tf);
		if (in_kernel) {
			panic("unhandled pgfault");
		} else {
			do_exit(-E_KILLED);
8001f608:	2404ffdb 	li	a0,-37
8001f60c:	08003d42 	j	8000f508 <do_exit>
8001f610:	27bd0028 	addiu	sp,sp,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:199
	//print_trapframe(tf);
	uint32_t badaddr = tf->tf_vaddr;
	int ret = 0;
	pte_t *pte = get_pte(current_pgdir, tf->tf_vaddr, 0);
	//  )
	if (perm ||pte == NULL || ptep_invalid(pte) || (write && !ptep_u_write(pte))) {	//PTE miss, pgfault
8001f614:	24030006 	li	v1,6
8001f618:	5483ffdc 	bnel	a0,v1,8001f58c <handle_tlbmiss+0x14c>
8001f61c:	30a50001 	andi	a1,a1,0x1
8001f620:	08007d32 	j	8001f4c8 <handle_tlbmiss+0x88>
8001f624:	00000000 	nop
pgfault_handler():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:158
	struct mm_struct *mm;
	if (check_mm_struct != NULL) {
		assert(current == idleproc);
		mm = check_mm_struct;
	} else {
		if (current == NULL) {
8001f628:	8c4277a4 	lw	v0,30628(v0)
8001f62c:	5040003f 	beqzl	v0,8001f72c <handle_tlbmiss+0x2ec>
8001f630:	3c048002 	lui	a0,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:163
			//print_trapframe(tf);
			//print_pgfault(tf);
			panic("unhandled page fault.\n\r");
		}
		mm = current->mm;
8001f634:	08007d6e 	j	8001f5b8 <handle_tlbmiss+0x178>
8001f638:	8c440020 	lw	a0,32(v0)
handle_tlbmiss():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:231
		}
	}

exit:
	if (ret) {
		print_trapframe(tf);
8001f63c:	0c007cb4 	jal	8001f2d0 <print_trapframe>
8001f640:	02002021 	move	a0,s0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:239
		} else {
			do_exit(-E_KILLED);
		}
	}
	return;
}
8001f644:	08007d7d 	j	8001f5f4 <handle_tlbmiss+0x1b4>
8001f648:	8fbf0024 	lw	ra,36(sp)
tlb_refill():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:137
{
	//kprintf("tlb_re ok\n\r");
	
	if (!pte)
		return;
	if (badaddr & (1 << 12))
8001f64c:	32231000 	andi	v1,s1,0x1000
8001f650:	1460001b 	bnez	v1,8001f6c0 <handle_tlbmiss+0x280>
8001f654:	00a02021 	move	a0,a1
8001f658:	8c440004 	lw	a0,4(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:143
		pte--;
	//kprintf("*pte=0x%08x\n\r",*pte);
	//kprintf("*pte+1=0x%08x\n\r",*(pte+1));
//#ifdef MACH_QEMU
	//kprintf("badaddr=0x%08x\n\r",badaddr);
	tlb_replace_random(0, badaddr & THUMIPS_TLB_ENTRYH_VPN2_MASK,
8001f65c:	2403e000 	li	v1,-8192
ptep_present():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:26
8001f660:	30a20001 	andi	v0,a1,0x1
tlb_refill():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:143
8001f664:	02238824 	and	s1,s1,v1
pte2tlblow():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:119
{
	//kprintf("pte=0x%08x\n\r",pte);
	uint32_t t = (((uint32_t) pte - 0x80000000) >> 12) <<6;
	//kprintf("pa=0x%08x\n\r",t<<6);
	//kprintf("t=0x%08x\n\r",t);
	if (!ptep_present(&pte))
8001f668:	10400009 	beqz	v0,8001f690 <handle_tlbmiss+0x250>
8001f66c:	00001821 	move	v1,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:116

#define PTE2TLBLOW(x) (((((uint32_t)(*(x))-KERNBASE)>> 12)<<6)|THUMIPS_TLB_ENTRYL_V|THUMIPS_TLB_ENTRYL_D|(2<<3))
static inline uint32_t pte2tlblow(pte_t pte)
{
	//kprintf("pte=0x%08x\n\r",pte);
	uint32_t t = (((uint32_t) pte - 0x80000000) >> 12) <<6;
8001f670:	3c028000 	lui	v0,0x8000
8001f674:	00a21021 	addu	v0,a1,v0
8001f678:	00021302 	srl	v0,v0,0xc
8001f67c:	00021180 	sll	v0,v0,0x6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:124
	if (!ptep_present(&pte))
		return 0;
	t |= THUMIPS_TLB_ENTRYL_V;
	/* always ignore ASID */
	t |= THUMIPS_TLB_ENTRYL_G;
	t |= (3 << 3);
8001f680:	3443001b 	ori	v1,v0,0x1b
ptep_s_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:36
	return (*ptep & PTE_P);
}

static inline int ptep_s_write(pte_t * ptep)
{
	return (*ptep & PTE_W);
8001f684:	30a50002 	andi	a1,a1,0x2
pte2tlblow():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:126
	if (ptep_s_write(&pte))
		t |= THUMIPS_TLB_ENTRYL_D;
8001f688:	3442001f 	ori	v0,v0,0x1f
8001f68c:	0045180b 	movn	v1,v0,a1
ptep_present():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:26
	return (*ptep == 0);
}

static inline int ptep_present(pte_t * ptep)
{
	return (*ptep & PTE_P);
8001f690:	30850001 	andi	a1,a0,0x1
pte2tlblow():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:119
{
	//kprintf("pte=0x%08x\n\r",pte);
	uint32_t t = (((uint32_t) pte - 0x80000000) >> 12) <<6;
	//kprintf("pa=0x%08x\n\r",t<<6);
	//kprintf("t=0x%08x\n\r",t);
	if (!ptep_present(&pte))
8001f694:	10a0ffb2 	beqz	a1,8001f560 <handle_tlbmiss+0x120>
8001f698:	00001021 	move	v0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:116

#define PTE2TLBLOW(x) (((((uint32_t)(*(x))-KERNBASE)>> 12)<<6)|THUMIPS_TLB_ENTRYL_V|THUMIPS_TLB_ENTRYL_D|(2<<3))
static inline uint32_t pte2tlblow(pte_t pte)
{
	//kprintf("pte=0x%08x\n\r",pte);
	uint32_t t = (((uint32_t) pte - 0x80000000) >> 12) <<6;
8001f69c:	3c058000 	lui	a1,0x8000
8001f6a0:	00852821 	addu	a1,a0,a1
8001f6a4:	00052b02 	srl	a1,a1,0xc
8001f6a8:	00052980 	sll	a1,a1,0x6
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:124
	if (!ptep_present(&pte))
		return 0;
	t |= THUMIPS_TLB_ENTRYL_V;
	/* always ignore ASID */
	t |= THUMIPS_TLB_ENTRYL_G;
	t |= (3 << 3);
8001f6ac:	34a2001b 	ori	v0,a1,0x1b
ptep_s_write():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/../glue-kern/arch/mips/glue_pgmap.h:36
	return (*ptep & PTE_P);
}

static inline int ptep_s_write(pte_t * ptep)
{
	return (*ptep & PTE_W);
8001f6b0:	30840002 	andi	a0,a0,0x2
pte2tlblow():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:126
	if (ptep_s_write(&pte))
		t |= THUMIPS_TLB_ENTRYL_D;
8001f6b4:	34a5001f 	ori	a1,a1,0x1f
8001f6b8:	08007d58 	j	8001f560 <handle_tlbmiss+0x120>
8001f6bc:	00a4100b 	movn	v0,a1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/glue-ucore/thumips_tlb.h:137
{
	//kprintf("tlb_re ok\n\r");
	
	if (!pte)
		return;
	if (badaddr & (1 << 12))
8001f6c0:	08007d97 	j	8001f65c <handle_tlbmiss+0x21c>
8001f6c4:	8c45fffc 	lw	a1,-4(v0)
tlb_refill():
8001f6c8:	8c45fffc 	lw	a1,-4(v0)
8001f6cc:	00c03821 	move	a3,a2
8001f6d0:	08007d40 	j	8001f500 <handle_tlbmiss+0xc0>
8001f6d4:	00a02021 	move	a0,a1
handle_tlbmiss():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:193
	static int entercnt = 0;
	entercnt++;
	//kprintf("## enter handle_tlbmiss %d times\n\r", entercnt);

	int in_kernel = trap_in_kernel(tf);
	assert(current_pgdir != NULL);
8001f6d8:	3c048002 	lui	a0,0x8002
8001f6dc:	3c068002 	lui	a2,0x8002
8001f6e0:	3c078002 	lui	a3,0x8002
8001f6e4:	248449f0 	addiu	a0,a0,18928
8001f6e8:	240500c1 	li	a1,193
8001f6ec:	24c60e28 	addiu	a2,a2,3624
8001f6f0:	0c006b0b 	jal	8001ac2c <__panic>
8001f6f4:	24e749f8 	addiu	a3,a3,18936
pgfault_handler():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:155
	if (check_mm_struct != NULL) {	//used for test check_swap
		//print_pgfault(tf);
	}
	struct mm_struct *mm;
	if (check_mm_struct != NULL) {
		assert(current == idleproc);
8001f6f8:	3c068002 	lui	a2,0x8002
8001f6fc:	3c078002 	lui	a3,0x8002
8001f700:	248449f0 	addiu	a0,a0,18928
8001f704:	2405009b 	li	a1,155
8001f708:	24c60e28 	addiu	a2,a2,3624
8001f70c:	0c006b0b 	jal	8001ac2c <__panic>
8001f710:	24e74a10 	addiu	a3,a3,18960
handle_tlbmiss():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:233

exit:
	if (ret) {
		print_trapframe(tf);
		if (in_kernel) {
			panic("unhandled pgfault");
8001f714:	3c048002 	lui	a0,0x8002
8001f718:	3c068002 	lui	a2,0x8002
8001f71c:	248449f0 	addiu	a0,a0,18928
8001f720:	240500e9 	li	a1,233
8001f724:	0c006b0b 	jal	8001ac2c <__panic>
8001f728:	24c64a3c 	addiu	a2,a2,19004
pgfault_handler():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:161
		mm = check_mm_struct;
	} else {
		if (current == NULL) {
			//print_trapframe(tf);
			//print_pgfault(tf);
			panic("unhandled page fault.\n\r");
8001f72c:	3c068002 	lui	a2,0x8002
8001f730:	248449f0 	addiu	a0,a0,18928
8001f734:	240500a1 	li	a1,161
8001f738:	0c006b0b 	jal	8001ac2c <__panic>
8001f73c:	24c64a24 	addiu	a2,a2,18980

8001f740 <trap_dispatch>:
trap_dispatch():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:244
}

static void trap_dispatch(struct trapframe *tf)
{
	int i;
	int code = GET_CAUSE_EXCODE(tf->tf_cause);
8001f740:	8c820008 	lw	v0,8(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:242
	}
	return;
}

static void trap_dispatch(struct trapframe *tf)
{
8001f744:	27bdffd0 	addiu	sp,sp,-48
8001f748:	afb10018 	sw	s1,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:244
	int i;
	int code = GET_CAUSE_EXCODE(tf->tf_cause);
8001f74c:	7c432080 	ext	v1,v0,0x2,0x5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:242
	}
	return;
}

static void trap_dispatch(struct trapframe *tf)
{
8001f750:	00808821 	move	s1,a0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:245
	int i;
	int code = GET_CAUSE_EXCODE(tf->tf_cause);
	switch (code) {
8001f754:	2c64000b 	sltiu	a0,v1,11
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:242
	}
	return;
}

static void trap_dispatch(struct trapframe *tf)
{
8001f758:	afbf002c 	sw	ra,44(sp)
8001f75c:	afb50028 	sw	s5,40(sp)
8001f760:	afb40024 	sw	s4,36(sp)
8001f764:	afb30020 	sw	s3,32(sp)
8001f768:	afb2001c 	sw	s2,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:245
	int i;
	int code = GET_CAUSE_EXCODE(tf->tf_cause);
	switch (code) {
8001f76c:	14800009 	bnez	a0,8001f794 <trap_dispatch+0x54>
8001f770:	afb00014 	sw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:285
			print_trapframe(tf);
			do_exit(-E_KILLED);
		}
		break;
	default:
		print_trapframe(tf);
8001f774:	0c007cb4 	jal	8001f2d0 <print_trapframe>
8001f778:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:286
		panic("Unhandled Exception");
8001f77c:	3c048002 	lui	a0,0x8002
8001f780:	3c068002 	lui	a2,0x8002
8001f784:	248449f0 	addiu	a0,a0,18928
8001f788:	2405011e 	li	a1,286
8001f78c:	0c006b0b 	jal	8001ac2c <__panic>
8001f790:	24c64ab0 	addiu	a2,a2,19120
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:245

static void trap_dispatch(struct trapframe *tf)
{
	int i;
	int code = GET_CAUSE_EXCODE(tf->tf_cause);
	switch (code) {
8001f794:	3c048002 	lui	a0,0x8002
8001f798:	00031880 	sll	v1,v1,0x2
8001f79c:	24840d64 	addiu	a0,a0,3428
8001f7a0:	00831821 	addu	v1,a0,v1
8001f7a4:	8c630000 	lw	v1,0(v1)
8001f7a8:	00600008 	jr	v1
8001f7ac:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:259
		break;
	case EX_TLBS:
		handle_tlbmiss(tf, 1, 0);
		break;
	case EX_RI:
		print_trapframe(tf);
8001f7b0:	0c007cb4 	jal	8001f2d0 <print_trapframe>
8001f7b4:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:260
		uint32_t *addr = (uint32_t *) (tf->tf_epc);
8001f7b8:	8e300090 	lw	s0,144(s1)
8001f7bc:	3c138002 	lui	s3,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:262
		for (i = 0; i < 10; ++i, addr++)
			kprintf("[%x:%x]\n", addr, *addr);
8001f7c0:	26734a6c 	addiu	s3,s3,19052
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:241
		}
	}
	return;
}

static void trap_dispatch(struct trapframe *tf)
8001f7c4:	26120028 	addiu	s2,s0,40
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:262
		break;
	case EX_RI:
		print_trapframe(tf);
		uint32_t *addr = (uint32_t *) (tf->tf_epc);
		for (i = 0; i < 10; ++i, addr++)
			kprintf("[%x:%x]\n", addr, *addr);
8001f7c8:	8e060000 	lw	a2,0(s0)
8001f7cc:	02002821 	move	a1,s0
8001f7d0:	02602021 	move	a0,s3
8001f7d4:	0c007a9e 	jal	8001ea78 <kprintf>
8001f7d8:	26100004 	addiu	s0,s0,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:261
		handle_tlbmiss(tf, 1, 0);
		break;
	case EX_RI:
		print_trapframe(tf);
		uint32_t *addr = (uint32_t *) (tf->tf_epc);
		for (i = 0; i < 10; ++i, addr++)
8001f7dc:	5612fffb 	bnel	s0,s2,8001f7cc <trap_dispatch+0x8c>
8001f7e0:	8e060000 	lw	a2,0(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:264
			kprintf("[%x:%x]\n", addr, *addr);

		panic("hey man! Do NOT use that insn! insn=%x",
8001f7e4:	8e220090 	lw	v0,144(s1)
8001f7e8:	3c048002 	lui	a0,0x8002
8001f7ec:	3c068002 	lui	a2,0x8002
8001f7f0:	8c470000 	lw	a3,0(v0)
8001f7f4:	248449f0 	addiu	a0,a0,18928
8001f7f8:	24050109 	li	a1,265
8001f7fc:	0c006b0b 	jal	8001ac2c <__panic>
8001f800:	24c64a78 	addiu	a2,a2,19064
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:245

static void trap_dispatch(struct trapframe *tf)
{
	int i;
	int code = GET_CAUSE_EXCODE(tf->tf_cause);
	switch (code) {
8001f804:	24100001 	li	s0,1
interrupt_handler():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:98
	extern clock_int_handler(void *);
	extern serial_int_handler(void *);
        //extern keyboard_int_handler();
	int i;
	for (i = 0; i < 8; i++) {
		if (tf->tf_cause & (1 << (CAUSEB_IP + i))) {
8001f808:	24120001 	li	s2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:241
		}
	}
	return;
}

static void trap_dispatch(struct trapframe *tf)
8001f80c:	26030007 	addiu	v1,s0,7
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:98
	extern clock_int_handler(void *);
	extern serial_int_handler(void *);
        //extern keyboard_int_handler();
	int i;
	for (i = 0; i < 8; i++) {
		if (tf->tf_cause & (1 << (CAUSEB_IP + i))) {
8001f810:	00721804 	sllv	v1,s2,v1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:107
#endif
			case TIMER0_IRQ:
				clock_int_handler(NULL);
				break;
			case COM1_IRQ:
				kprintf("COM1\n\r");
8001f814:	3c158002 	lui	s5,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:98
	extern clock_int_handler(void *);
	extern serial_int_handler(void *);
        //extern keyboard_int_handler();
	int i;
	for (i = 0; i < 8; i++) {
		if (tf->tf_cause & (1 << (CAUSEB_IP + i))) {
8001f818:	00621824 	and	v1,v1,v0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:97
{
	extern clock_int_handler(void *);
	extern serial_int_handler(void *);
        //extern keyboard_int_handler();
	int i;
	for (i = 0; i < 8; i++) {
8001f81c:	24130008 	li	s3,8
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:99
		if (tf->tf_cause & (1 << (CAUSEB_IP + i))) {
			switch (i) {
8001f820:	24140004 	li	s4,4
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:107
#endif
			case TIMER0_IRQ:
				clock_int_handler(NULL);
				break;
			case COM1_IRQ:
				kprintf("COM1\n\r");
8001f824:	26b54a50 	addiu	s5,s5,19024
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:98
	extern clock_int_handler(void *);
	extern serial_int_handler(void *);
        //extern keyboard_int_handler();
	int i;
	for (i = 0; i < 8; i++) {
		if (tf->tf_cause & (1 << (CAUSEB_IP + i))) {
8001f828:	1060000c 	beqz	v1,8001f85c <trap_dispatch+0x11c>
8001f82c:	2604ffff 	addiu	a0,s0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:99
			switch (i) {
8001f830:	14800055 	bnez	a0,8001f988 <trap_dispatch+0x248>
8001f834:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:104
#ifdef DEBUG_INT
                                kprintf("INT - No %d\r\n", i);
#endif
			case TIMER0_IRQ:
				clock_int_handler(NULL);
8001f838:	0c006b45 	jal	8001ad14 <clock_int_handler>
8001f83c:	00002021 	move	a0,zero
trap_dispatch():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:289
	default:
		print_trapframe(tf);
		panic("Unhandled Exception");
	}

}
8001f840:	8e220008 	lw	v0,8(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:245

static void trap_dispatch(struct trapframe *tf)
{
	int i;
	int code = GET_CAUSE_EXCODE(tf->tf_cause);
	switch (code) {
8001f844:	26100001 	addiu	s0,s0,1
interrupt_handler():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:241
		}
	}
	return;
}

static void trap_dispatch(struct trapframe *tf)
8001f848:	26030007 	addiu	v1,s0,7
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:98
	extern clock_int_handler(void *);
	extern serial_int_handler(void *);
        //extern keyboard_int_handler();
	int i;
	for (i = 0; i < 8; i++) {
		if (tf->tf_cause & (1 << (CAUSEB_IP + i))) {
8001f84c:	00721804 	sllv	v1,s2,v1
8001f850:	00621824 	and	v1,v1,v0
8001f854:	1460fff6 	bnez	v1,8001f830 <trap_dispatch+0xf0>
8001f858:	2604ffff 	addiu	a0,s0,-1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:97
{
	extern clock_int_handler(void *);
	extern serial_int_handler(void *);
        //extern keyboard_int_handler();
	int i;
	for (i = 0; i < 8; i++) {
8001f85c:	1613fffa 	bne	s0,s3,8001f848 <trap_dispatch+0x108>
8001f860:	26100001 	addiu	s0,s0,1
trap_dispatch():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:289
	default:
		print_trapframe(tf);
		panic("Unhandled Exception");
	}

}
8001f864:	8fbf002c 	lw	ra,44(sp)
8001f868:	8fb50028 	lw	s5,40(sp)
8001f86c:	8fb40024 	lw	s4,36(sp)
8001f870:	8fb30020 	lw	s3,32(sp)
8001f874:	8fb2001c 	lw	s2,28(sp)
8001f878:	8fb10018 	lw	s1,24(sp)
8001f87c:	8fb00014 	lw	s0,20(sp)
8001f880:	03e00008 	jr	ra
8001f884:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:250
	switch (code) {
	case EX_IRQ:
		interrupt_handler(tf);
		break;
	case EX_MOD:
		handle_tlbmiss(tf, 1, 1);
8001f888:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:289
	default:
		print_trapframe(tf);
		panic("Unhandled Exception");
	}

}
8001f88c:	8fbf002c 	lw	ra,44(sp)
8001f890:	8fb50028 	lw	s5,40(sp)
8001f894:	8fb40024 	lw	s4,36(sp)
8001f898:	8fb30020 	lw	s3,32(sp)
8001f89c:	8fb2001c 	lw	s2,28(sp)
8001f8a0:	8fb10018 	lw	s1,24(sp)
8001f8a4:	8fb00014 	lw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:250
	switch (code) {
	case EX_IRQ:
		interrupt_handler(tf);
		break;
	case EX_MOD:
		handle_tlbmiss(tf, 1, 1);
8001f8a8:	24050001 	li	a1,1
8001f8ac:	24060001 	li	a2,1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:253
		break;
	case EX_TLBL:
		handle_tlbmiss(tf, 0, 0);//YX
8001f8b0:	08007d10 	j	8001f440 <handle_tlbmiss>
8001f8b4:	27bd0030 	addiu	sp,sp,48
8001f8b8:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:289
	default:
		print_trapframe(tf);
		panic("Unhandled Exception");
	}

}
8001f8bc:	8fbf002c 	lw	ra,44(sp)
8001f8c0:	8fb50028 	lw	s5,40(sp)
8001f8c4:	8fb40024 	lw	s4,36(sp)
8001f8c8:	8fb30020 	lw	s3,32(sp)
8001f8cc:	8fb2001c 	lw	s2,28(sp)
8001f8d0:	8fb10018 	lw	s1,24(sp)
8001f8d4:	8fb00014 	lw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:253
		break;
	case EX_MOD:
		handle_tlbmiss(tf, 1, 1);
		break;
	case EX_TLBL:
		handle_tlbmiss(tf, 0, 0);//YX
8001f8d8:	00002821 	move	a1,zero
8001f8dc:	00003021 	move	a2,zero
8001f8e0:	08007d10 	j	8001f440 <handle_tlbmiss>
8001f8e4:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:256
		break;
	case EX_TLBS:
		handle_tlbmiss(tf, 1, 0);
8001f8e8:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:289
	default:
		print_trapframe(tf);
		panic("Unhandled Exception");
	}

}
8001f8ec:	8fbf002c 	lw	ra,44(sp)
8001f8f0:	8fb50028 	lw	s5,40(sp)
8001f8f4:	8fb40024 	lw	s4,36(sp)
8001f8f8:	8fb30020 	lw	s3,32(sp)
8001f8fc:	8fb2001c 	lw	s2,28(sp)
8001f900:	8fb10018 	lw	s1,24(sp)
8001f904:	8fb00014 	lw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:256
		break;
	case EX_TLBL:
		handle_tlbmiss(tf, 0, 0);//YX
		break;
	case EX_TLBS:
		handle_tlbmiss(tf, 1, 0);
8001f908:	24050001 	li	a1,1
8001f90c:	00003021 	move	a2,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:253
		break;
	case EX_MOD:
		handle_tlbmiss(tf, 1, 1);
		break;
	case EX_TLBL:
		handle_tlbmiss(tf, 0, 0);//YX
8001f910:	08007d10 	j	8001f440 <handle_tlbmiss>
8001f914:	27bd0030 	addiu	sp,sp,48
trap_in_kernel():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:57
		return "Unknown";
}

bool trap_in_kernel(struct trapframe * tf)
{
	return !(tf->tf_status & KSU_USER);
8001f918:	8e220004 	lw	v0,4(s1)
8001f91c:	30420010 	andi	v0,v0,0x10
trap_dispatch():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:276
		break;
		/* alignment error or access kernel
		 * address space in user mode */
	case EX_ADEL:
	case EX_ADES:
		if (trap_in_kernel(tf)) {
8001f920:	10400029 	beqz	v0,8001f9c8 <trap_dispatch+0x288>
8001f924:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:280
			print_trapframe(tf);
			panic("Alignment Error");
		} else {
			print_trapframe(tf);
8001f928:	0c007cb4 	jal	8001f2d0 <print_trapframe>
8001f92c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:289
	default:
		print_trapframe(tf);
		panic("Unhandled Exception");
	}

}
8001f930:	8fbf002c 	lw	ra,44(sp)
8001f934:	8fb50028 	lw	s5,40(sp)
8001f938:	8fb40024 	lw	s4,36(sp)
8001f93c:	8fb30020 	lw	s3,32(sp)
8001f940:	8fb2001c 	lw	s2,28(sp)
8001f944:	8fb10018 	lw	s1,24(sp)
8001f948:	8fb00014 	lw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:281
		if (trap_in_kernel(tf)) {
			print_trapframe(tf);
			panic("Alignment Error");
		} else {
			print_trapframe(tf);
			do_exit(-E_KILLED);
8001f94c:	2404ffdb 	li	a0,-37
8001f950:	08003d42 	j	8000f508 <do_exit>
8001f954:	27bd0030 	addiu	sp,sp,48
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:269
		panic("hey man! Do NOT use that insn! insn=%x",
		      *(uint32_t *) (tf->tf_epc));
		break;
	case EX_SYS:
		//print_trapframe(tf);
		tf->tf_epc += 4;
8001f958:	8e220090 	lw	v0,144(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:289
	default:
		print_trapframe(tf);
		panic("Unhandled Exception");
	}

}
8001f95c:	8fbf002c 	lw	ra,44(sp)
8001f960:	8fb50028 	lw	s5,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:269
		panic("hey man! Do NOT use that insn! insn=%x",
		      *(uint32_t *) (tf->tf_epc));
		break;
	case EX_SYS:
		//print_trapframe(tf);
		tf->tf_epc += 4;
8001f964:	24420004 	addiu	v0,v0,4
8001f968:	ae220090 	sw	v0,144(s1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:289
	default:
		print_trapframe(tf);
		panic("Unhandled Exception");
	}

}
8001f96c:	8fb40024 	lw	s4,36(sp)
8001f970:	8fb30020 	lw	s3,32(sp)
8001f974:	8fb2001c 	lw	s2,28(sp)
8001f978:	8fb10018 	lw	s1,24(sp)
8001f97c:	8fb00014 	lw	s0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:270
		      *(uint32_t *) (tf->tf_epc));
		break;
	case EX_SYS:
		//print_trapframe(tf);
		tf->tf_epc += 4;
		syscall();
8001f980:	08007c26 	j	8001f098 <syscall>
8001f984:	27bd0030 	addiu	sp,sp,48
interrupt_handler():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:99
	extern serial_int_handler(void *);
        //extern keyboard_int_handler();
	int i;
	for (i = 0; i < 8; i++) {
		if (tf->tf_cause & (1 << (CAUSEB_IP + i))) {
			switch (i) {
8001f988:	10940009 	beq	a0,s4,8001f9b0 <trap_dispatch+0x270>
8001f98c:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:119
                                pic_disable(KEYBOARD_IRQ);
                                keyboard_int_handler();
                                pic_enable(KEYBOARD_IRQ);
                                break;*/
			default:
				print_trapframe(tf);
8001f990:	0c007cb4 	jal	8001f2d0 <print_trapframe>
8001f994:	02202021 	move	a0,s1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:120
				panic("Unknown interrupt!");
8001f998:	3c048002 	lui	a0,0x8002
8001f99c:	3c068002 	lui	a2,0x8002
8001f9a0:	248449f0 	addiu	a0,a0,18928
8001f9a4:	24050078 	li	a1,120
8001f9a8:	0c006b0b 	jal	8001ac2c <__panic>
8001f9ac:	24c64a58 	addiu	a2,a2,19032
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:107
#endif
			case TIMER0_IRQ:
				clock_int_handler(NULL);
				break;
			case COM1_IRQ:
				kprintf("COM1\n\r");
8001f9b0:	0c007a9e 	jal	8001ea78 <kprintf>
8001f9b4:	02a02021 	move	a0,s5
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:108
				serial_int_handler(NULL);
8001f9b8:	0c006ca1 	jal	8001b284 <serial_int_handler>
8001f9bc:	00002021 	move	a0,zero
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:289
	default:
		print_trapframe(tf);
		panic("Unhandled Exception");
	}

}
8001f9c0:	08007e11 	j	8001f844 <trap_dispatch+0x104>
8001f9c4:	8e220008 	lw	v0,8(s1)
trap_dispatch():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:277
		/* alignment error or access kernel
		 * address space in user mode */
	case EX_ADEL:
	case EX_ADES:
		if (trap_in_kernel(tf)) {
			print_trapframe(tf);
8001f9c8:	0c007cb4 	jal	8001f2d0 <print_trapframe>
8001f9cc:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:278
			panic("Alignment Error");
8001f9d0:	3c048002 	lui	a0,0x8002
8001f9d4:	3c068002 	lui	a2,0x8002
8001f9d8:	248449f0 	addiu	a0,a0,18928
8001f9dc:	24050116 	li	a1,278
8001f9e0:	0c006b0b 	jal	8001ac2c <__panic>
8001f9e4:	24c64aa0 	addiu	a2,a2,19104

8001f9e8 <mips_trap>:
mips_trap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:297
 * General trap (exception) handling function for mips.
 * This is called by the assembly-language exception handler once
 * the trapframe has been set up.
 */
void mips_trap(struct trapframe *tf)
{
8001f9e8:	27bdffe0 	addiu	sp,sp,-32
8001f9ec:	afb00010 	sw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:308
	} else
		flag = 0;

	// dispatch based on what type of trap occurred
	// used for previous projects
	if (current == NULL) {
8001f9f0:	3c108015 	lui	s0,0x8015
8001f9f4:	8e0277a4 	lw	v0,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:297
 * General trap (exception) handling function for mips.
 * This is called by the assembly-language exception handler once
 * the trapframe has been set up.
 */
void mips_trap(struct trapframe *tf)
{
8001f9f8:	afbf001c 	sw	ra,28(sp)
8001f9fc:	afb20018 	sw	s2,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:308
	} else
		flag = 0;

	// dispatch based on what type of trap occurred
	// used for previous projects
	if (current == NULL) {
8001fa00:	10400023 	beqz	v0,8001fa90 <mips_trap+0xa8>
8001fa04:	afb10014 	sw	s1,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:312
		trap_dispatch(tf);
	} else {
		// keep a trapframe chain in stack
		struct trapframe *otf = current->tf;
8001fa08:	8c520054 	lw	s2,84(v0)
trap_in_kernel():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:57
		return "Unknown";
}

bool trap_in_kernel(struct trapframe * tf)
{
	return !(tf->tf_status & KSU_USER);
8001fa0c:	8c910004 	lw	s1,4(a0)
mips_trap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:317
		struct trapframe *otf = current->tf;
		current->tf = tf;

		bool in_kernel = trap_in_kernel(tf);

		trap_dispatch(tf);
8001fa10:	0c007dd0 	jal	8001f740 <trap_dispatch>
8001fa14:	ac440054 	sw	a0,84(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:319

		current->tf = otf;
8001fa18:	8e0277a4 	lw	v0,30628(s0)
trap_in_kernel():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:57
		return "Unknown";
}

bool trap_in_kernel(struct trapframe * tf)
{
	return !(tf->tf_status & KSU_USER);
8001fa1c:	32310010 	andi	s1,s1,0x10
mips_trap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:320
		bool in_kernel = trap_in_kernel(tf);

		trap_dispatch(tf);

		current->tf = otf;
		if (!in_kernel) {
8001fa20:	12200008 	beqz	s1,8001fa44 <mips_trap+0x5c>
8001fa24:	ac520054 	sw	s2,84(v0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:321
			if (current->flags & PF_EXITING) {
8001fa28:	8c43005c 	lw	v1,92(v0)
8001fa2c:	30630001 	andi	v1,v1,0x1
8001fa30:	1460000f 	bnez	v1,8001fa70 <mips_trap+0x88>
8001fa34:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:324
				do_exit(-E_KILLED);
			}
			if (current->need_resched) {
8001fa38:	8c420018 	lw	v0,24(v0)
8001fa3c:	14400007 	bnez	v0,8001fa5c <mips_trap+0x74>
8001fa40:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:330
				schedule();
			}
		}
	}
//  if (flag) kprintf(" [end: epc=%x cause=%d syscall=%d pid=%d] ", tf->tf_epc, (tf->tf_cause >> 2) & 0x1F, (unsigned)(tf->tf_regs.reg_r[MIPS_REG_V0]), current?current->pid:-1);
}
8001fa44:	8fbf001c 	lw	ra,28(sp)
8001fa48:	8fb20018 	lw	s2,24(sp)
8001fa4c:	8fb10014 	lw	s1,20(sp)
8001fa50:	8fb00010 	lw	s0,16(sp)
8001fa54:	03e00008 	jr	ra
8001fa58:	27bd0020 	addiu	sp,sp,32
8001fa5c:	8fb20018 	lw	s2,24(sp)
8001fa60:	8fb10014 	lw	s1,20(sp)
8001fa64:	8fb00010 	lw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:325
		if (!in_kernel) {
			if (current->flags & PF_EXITING) {
				do_exit(-E_KILLED);
			}
			if (current->need_resched) {
				schedule();
8001fa68:	0800059f 	j	8000167c <schedule>
8001fa6c:	27bd0020 	addiu	sp,sp,32
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:322
		trap_dispatch(tf);

		current->tf = otf;
		if (!in_kernel) {
			if (current->flags & PF_EXITING) {
				do_exit(-E_KILLED);
8001fa70:	0c003d42 	jal	8000f508 <do_exit>
8001fa74:	2404ffdb 	li	a0,-37
8001fa78:	8e0277a4 	lw	v0,30628(s0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:324
			}
			if (current->need_resched) {
8001fa7c:	8c420018 	lw	v0,24(v0)
8001fa80:	1040fff1 	beqz	v0,8001fa48 <mips_trap+0x60>
8001fa84:	8fbf001c 	lw	ra,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:330
				schedule();
			}
		}
	}
//  if (flag) kprintf(" [end: epc=%x cause=%d syscall=%d pid=%d] ", tf->tf_epc, (tf->tf_cause >> 2) & 0x1F, (unsigned)(tf->tf_regs.reg_r[MIPS_REG_V0]), current?current->pid:-1);
}
8001fa88:	08007e98 	j	8001fa60 <mips_trap+0x78>
8001fa8c:	8fb20018 	lw	s2,24(sp)
8001fa90:	8fbf001c 	lw	ra,28(sp)
8001fa94:	8fb20018 	lw	s2,24(sp)
8001fa98:	8fb10014 	lw	s1,20(sp)
8001fa9c:	8fb00010 	lw	s0,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:309
		flag = 0;

	// dispatch based on what type of trap occurred
	// used for previous projects
	if (current == NULL) {
		trap_dispatch(tf);
8001faa0:	08007dd0 	j	8001f740 <trap_dispatch>
8001faa4:	27bd0020 	addiu	sp,sp,32

8001faa8 <ucore_in_interrupt>:
ucore_in_interrupt():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/trap.c:337
//add by HHL
int ucore_in_interrupt()
{
	//panic("ucore_in_interrupt()");
	return 0;
}
8001faa8:	03e00008 	jr	ra
8001faac:	00001021 	move	v0,zero

8001fab0 <ramExcHandle_tlbmiss>:
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:20
   .section .text
# +0x000: R4000 tlbmiss vector (user)
.global ramExcHandle_tlbmiss
ramExcHandle_tlbmiss:
  #b ramExcHandle_tlbmiss
  b ramExcHandle_general 
8001fab0:	10000003 00000000                       ........

8001fab8 <ramReserved>:
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:25
  nop

.global ramReserved
ramReserved:
  b ramReserved
8001fab8:	1000ffff 00000000                       ........

8001fac0 <ramExcHandle_general>:
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:33
# +0x180: R4000 general vector
  .global ramExcHandle_general
  .type ramExcHandle_general, @function
  .ent ramExcHandle_general
ramExcHandle_general:
   move k1, sp			/* Save previous stack pointer in k1 */
8001fac0:	03a0d821 	move	k1,sp
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:34
   mfc0 k0, CP0_STATUS /* Get status register */
8001fac4:	401a6000 	mfc0	k0,c0_status
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:35
   andi k0, k0, KSU_USER/* Check the we-were-in-user-mode bit */
8001fac8:	335a0010 	andi	k0,k0,0x10
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:36
   beq	k0, $0, 1f		/* If clear, from kernel, already have stack */
8001facc:	13400007 	beqz	k0,8001faec <ramExcHandle_general+0x2c>
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:37
   nop				/* delay slot */
8001fad0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:41
   
   /* TODO */
   /* Coming from user mode - load kernel stack into sp */
   la k0, pls_current /* get address of "curkstack" */
8001fad4:	3c1a8015 	lui	k0,0x8015
8001fad8:	275a77a4 	addiu	k0,k0,30628
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:42
   lw k0, 0(k0)
8001fadc:	8f5a0000 	lw	k0,0(k0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:43
   lw k0, 20(k0)
8001fae0:	8f5a0014 	lw	k0,20(k0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:45

   addiu sp, k0, KSTACKSIZE
8001fae4:	275d2000 	addiu	sp,k0,8192
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:47
   #lw sp, 72(k0)			/* get its value */
   nop				/* delay slot for the load */
8001fae8:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:50
  
1:
   mfc0 k0, CP0_CAUSE /* Now, load the exception cause. */
8001faec:	401a6800 	mfc0	k0,c0_cause
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:51
   j common_exception		/* Skip to common code */
8001faf0:	08007ebe 	j	8001faf8 <common_exception>
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:52
   nop				/* delay slot */
8001faf4:	00000000 	nop

8001faf8 <common_exception>:
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:81
   
   /*
    * Allocate stack space for 37 words to hold the trap frame,
    * plus four more words for a minimal argument block.
    */
   addiu sp, sp, -164
8001faf8:	27bdff5c 	addiu	sp,sp,-164
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:109
    *        handle the real value of ra afterwards.
    *    (4) Because gdb will think we're saving k0 and k1, we need to
    *        leave slots for them in the trap frame, even though the
    *        stuff we save there is useless.
    */
   sw ra, 160(sp)	/* dummy for gdb */
8001fafc:	afbf00a0 	sw	ra,160(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:110
   sw s8, 156(sp)	/* save s8 */
8001fb00:	afbe009c 	sw	s8,156(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:111
   sw sp, 152(sp)	/* dummy for gdb */
8001fb04:	afbd0098 	sw	sp,152(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:112
   sw gp, 148(sp)	/* save gp */
8001fb08:	afbc0094 	sw	gp,148(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:113
   sw k1, 144(sp)	/* dummy for gdb */
8001fb0c:	afbb0090 	sw	k1,144(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:114
   sw k0, 140(sp)	/* dummy for gdb */
8001fb10:	afba008c 	sw	k0,140(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:116

   sw k1, 152(sp)	/* real saved sp */
8001fb14:	afbb0098 	sw	k1,152(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:117
   nop			/* delay slot for store */
8001fb18:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:119
   
   mfc0 k1, CP0_EPC /* Copr.0 reg 13 == PC for exception */
8001fb1c:	401b7000 	mfc0	k1,c0_epc
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:120
   sw k1, 160(sp)	/* real saved PC */
8001fb20:	afbb00a0 	sw	k1,160(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:122

   sw t9, 136(sp)
8001fb24:	afb90088 	sw	t9,136(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:123
   sw t8, 132(sp)
8001fb28:	afb80084 	sw	t8,132(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:124
   sw s7, 128(sp)
8001fb2c:	afb70080 	sw	s7,128(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:125
   sw s6, 124(sp)
8001fb30:	afb6007c 	sw	s6,124(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:126
   sw s5, 120(sp)
8001fb34:	afb50078 	sw	s5,120(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:127
   sw s4, 116(sp)
8001fb38:	afb40074 	sw	s4,116(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:128
   sw s3, 112(sp)
8001fb3c:	afb30070 	sw	s3,112(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:129
   sw s2, 108(sp)
8001fb40:	afb2006c 	sw	s2,108(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:130
   sw s1, 104(sp)
8001fb44:	afb10068 	sw	s1,104(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:131
   sw s0, 100(sp)
8001fb48:	afb00064 	sw	s0,100(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:132
   sw t7, 96(sp)
8001fb4c:	afaf0060 	sw	t7,96(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:133
   sw t6, 92(sp)
8001fb50:	afae005c 	sw	t6,92(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:134
   sw t5, 88(sp)
8001fb54:	afad0058 	sw	t5,88(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:135
   sw t4, 84(sp)
8001fb58:	afac0054 	sw	t4,84(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:136
   sw t3, 80(sp)
8001fb5c:	afab0050 	sw	t3,80(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:137
   sw t2, 76(sp)
8001fb60:	afaa004c 	sw	t2,76(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:138
   sw t1, 72(sp)
8001fb64:	afa90048 	sw	t1,72(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:139
   sw t0, 68(sp)
8001fb68:	afa80044 	sw	t0,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:140
   sw a3, 64(sp)
8001fb6c:	afa70040 	sw	a3,64(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:141
   sw a2, 60(sp)
8001fb70:	afa6003c 	sw	a2,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:142
   sw a1, 56(sp)
8001fb74:	afa50038 	sw	a1,56(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:143
   sw a0, 52(sp)
8001fb78:	afa40034 	sw	a0,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:144
   sw v1, 48(sp)
8001fb7c:	afa30030 	sw	v1,48(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:145
   sw v0, 44(sp)
8001fb80:	afa2002c 	sw	v0,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:146
   sw AT, 40(sp)
8001fb84:	afa10028 	sw	at,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:148

   sw ra, 36(sp)
8001fb88:	afbf0024 	sw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:153

   /*
    * Save special registers.
    */
   mfhi t0
8001fb8c:	00004010 	mfhi	t0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:154
   mflo t1
8001fb90:	00004812 	mflo	t1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:155
   sw t0, 32(sp)
8001fb94:	afa80020 	sw	t0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:156
   sw t1, 28(sp)
8001fb98:	afa9001c 	sw	t1,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:162

   /*
    * Save remaining exception context information.
    */

   sw   k0, 24(sp)               /* k0 was loaded with cause earlier */
8001fb9c:	afba0018 	sw	k0,24(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:163
   mfc0 t1, CP0_STATUS /* Copr.0 reg 11 == status */
8001fba0:	40096000 	mfc0	t1,c0_status
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:164
   sw   t1, 20(sp)
8001fba4:	afa90014 	sw	t1,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:167


   mfc0 t2, CP0_BADVADDR /* Copr.0 reg 8 == faulting vaddr */
8001fba8:	400a4000 	mfc0	t2,c0_badvaddr
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:168
   sw   t2, 16(sp)
8001fbac:	afaa0010 	sw	t2,16(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:173

   /*
    * Pretend to save $0 for gdb's benefit.
    */
   sw $0, 12(sp)
8001fbb0:	afa0000c 	sw	zero,12(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:176

  # support nested interrupt
  la   t0, ~(ST0_KSU|ST0_EXL|ST0_IE)
8001fbb4:	2408ffe4 	li	t0,-28
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:177
  and t1, t1, t0
8001fbb8:	01284824 	and	t1,t1,t0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:178
  mtc0 t1, CP0_STATUS /* Copr.0 reg 11 == status */
8001fbbc:	40896000 	mtc0	t1,c0_status
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:184

   /*
    * Prepare to call mips_trap(struct trapframe *)
    */

   addiu a0, sp, 16             /* set argument */
8001fbc0:	27a40010 	addiu	a0,sp,16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:185
   la  t9, mips_trap
8001fbc4:	3c198002 	lui	t9,0x8002
8001fbc8:	2739f9e8 	addiu	t9,t9,-1560
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:186
   jal t9 /* call it */
8001fbcc:	0320f809 	jalr	t9
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:187
   nop				/* delay slot */
8001fbd0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:190

   /* Something must be here or gdb doesn't find the stack frame. */
   nop
8001fbd4:	00000000 	nop

8001fbd8 <exception_return>:
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:199
    * Interrupts should be off.
    */
exception_return:

   /*     16(sp)		   no need to restore tf_vaddr */
   lw t0, 20(sp)		/* load status register value into t0 */
8001fbd8:	8fa80014 	lw	t0,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:200
   ori t0, t0, ST0_EXL
8001fbdc:	35080002 	ori	t0,t0,0x2
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:201
   nop				/* load delay slot */
8001fbe0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:202
   mtc0 t0, CP0_STATUS /* store it back to coprocessor 0 */
8001fbe4:	40886000 	mtc0	t0,c0_status
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:206
   /*     24(sp)		   no need to restore tf_cause */

   /* restore special registers */
   lw t1, 28(sp)
8001fbe8:	8fa9001c 	lw	t1,28(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:207
   lw t0, 32(sp)
8001fbec:	8fa80020 	lw	t0,32(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:208
   mtlo t1
8001fbf0:	01200013 	mtlo	t1
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:209
   mthi t0
8001fbf4:	01000011 	mthi	t0
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:212

   /* load the general registers */
   lw ra, 36(sp)
8001fbf8:	8fbf0024 	lw	ra,36(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:214

   lw AT, 40(sp)
8001fbfc:	8fa10028 	lw	at,40(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:215
   lw v0, 44(sp)
8001fc00:	8fa2002c 	lw	v0,44(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:216
   lw v1, 48(sp)
8001fc04:	8fa30030 	lw	v1,48(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:217
   lw a0, 52(sp)
8001fc08:	8fa40034 	lw	a0,52(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:218
   lw a1, 56(sp)
8001fc0c:	8fa50038 	lw	a1,56(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:219
   lw a2, 60(sp)
8001fc10:	8fa6003c 	lw	a2,60(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:220
   lw a3, 64(sp)
8001fc14:	8fa70040 	lw	a3,64(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:221
   lw t0, 68(sp)
8001fc18:	8fa80044 	lw	t0,68(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:222
   lw t1, 72(sp)
8001fc1c:	8fa90048 	lw	t1,72(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:223
   lw t2, 76(sp)
8001fc20:	8faa004c 	lw	t2,76(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:224
   lw t3, 80(sp)
8001fc24:	8fab0050 	lw	t3,80(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:225
   lw t4, 84(sp)
8001fc28:	8fac0054 	lw	t4,84(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:226
   lw t5, 88(sp)
8001fc2c:	8fad0058 	lw	t5,88(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:227
   lw t6, 92(sp)
8001fc30:	8fae005c 	lw	t6,92(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:228
   lw t7, 96(sp)
8001fc34:	8faf0060 	lw	t7,96(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:229
   lw s0, 100(sp)
8001fc38:	8fb00064 	lw	s0,100(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:230
   lw s1, 104(sp)
8001fc3c:	8fb10068 	lw	s1,104(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:231
   lw s2, 108(sp)
8001fc40:	8fb2006c 	lw	s2,108(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:232
   lw s3, 112(sp)
8001fc44:	8fb30070 	lw	s3,112(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:233
   lw s4, 116(sp)
8001fc48:	8fb40074 	lw	s4,116(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:234
   lw s5, 120(sp)
8001fc4c:	8fb50078 	lw	s5,120(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:235
   lw s6, 124(sp)
8001fc50:	8fb6007c 	lw	s6,124(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:236
   lw s7, 128(sp)
8001fc54:	8fb70080 	lw	s7,128(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:237
   lw t8, 132(sp)
8001fc58:	8fb80084 	lw	t8,132(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:238
   lw t9, 136(sp)
8001fc5c:	8fb90088 	lw	t9,136(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:243

   /*     140(sp)		   "saved" k0 was dummy garbage anyway */
   /*     144(sp)		   "saved" k1 was dummy garbage anyway */

   lw gp, 148(sp)		/* restore gp */
8001fc60:	8fbc0094 	lw	gp,148(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:245
   /*     152(sp)		   stack pointer - below */
   lw s8, 156(sp)		/* restore s8 */
8001fc64:	8fbe009c 	lw	s8,156(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:246
   lw k0, 160(sp)		/* fetch exception return PC into k0 */
8001fc68:	8fba00a0 	lw	k0,160(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:248

   lw sp, 152(sp)		/* fetch saved sp (must be last) */
8001fc6c:	8fbd0098 	lw	sp,152(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:251
   /* done */

   mtc0 k0, CP0_EPC /* Copr.0 reg 13 == PC for exception */
8001fc70:	409a7000 	mtc0	k0,c0_epc
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:252
   nop
8001fc74:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:253
   eret
8001fc78:	42000018 	eret
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:254
   nop
8001fc7c:	00000000 	nop

8001fc80 <forkrets>:
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:262

.globl forkrets
.type forkrets, @function
.ent forkrets 
forkrets:
  addiu sp, a0, -16
8001fc80:	249dfff0 	addiu	sp,a0,-16
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:263
  b exception_return
8001fc84:	1000ffd4 	b	8001fbd8 <exception_return>
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/exception.S:264
  nop
8001fc88:	00000000 	nop

8001fc8c <kernel_thread_entry>:
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/entry.S:8
/* $a0 = arg, $a1 = func
 * see proc.c:kernel_thread
 */
kernel_thread_entry:        # void kernel_thread(void)
  addiu $sp, $sp, -16
  jal $a1
8001fc8c:	00a0f809 27bdfff0 00000000 00402021     .......'....! @.
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/entry.S:11
  nop
  move $a0, $v0
  la  $t0, do_exit
8001fc9c:	3c088001 2508f508 0100f809 00000000     ...<...%........
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/entry.S:13
  jal $t0 
  nop
8001fcac:	00000000                                ....

8001fcb0 <switch_to>:
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:25
    *
    * The order must match arch/mips/include/switchframe.h.
    */

   /* Save the registers */
   sw	sp, 44(a0)
8001fcb0:	ac9d002c 	sw	sp,44(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:26
   sw	ra, 40(a0)
8001fcb4:	ac9f0028 	sw	ra,40(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:27
   sw	gp, 36(a0)
8001fcb8:	ac9c0024 	sw	gp,36(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:28
   sw	s8, 32(a0)
8001fcbc:	ac9e0020 	sw	s8,32(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:29
   sw	s7, 28(a0)
8001fcc0:	ac97001c 	sw	s7,28(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:30
   sw	s6, 24(a0)
8001fcc4:	ac960018 	sw	s6,24(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:31
   sw	s5, 20(a0)
8001fcc8:	ac950014 	sw	s5,20(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:32
   sw	s4, 16(a0)
8001fccc:	ac940010 	sw	s4,16(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:33
   sw	s3, 12(a0)
8001fcd0:	ac93000c 	sw	s3,12(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:34
   sw	s2, 8(a0)
8001fcd4:	ac920008 	sw	s2,8(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:35
   sw	s1, 4(a0)
8001fcd8:	ac910004 	sw	s1,4(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:36
   sw	s0, 0(a0)
8001fcdc:	ac900000 	sw	s0,0(a0)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:38

   nop
8001fce0:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:41

   /* Now, restore the registers */
   lw	s0, 0(a1)
8001fce4:	8cb00000 	lw	s0,0(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:42
   lw	s1, 4(a1)
8001fce8:	8cb10004 	lw	s1,4(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:43
   lw	s2, 8(a1)
8001fcec:	8cb20008 	lw	s2,8(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:44
   lw	s3, 12(a1)
8001fcf0:	8cb3000c 	lw	s3,12(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:45
   lw	s4, 16(a1)
8001fcf4:	8cb40010 	lw	s4,16(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:46
   lw	s5, 20(a1)
8001fcf8:	8cb50014 	lw	s5,20(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:47
   lw	s6, 24(a1)
8001fcfc:	8cb60018 	lw	s6,24(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:48
   lw	s7, 28(a1)
8001fd00:	8cb7001c 	lw	s7,28(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:49
   lw	s8, 32(a1)
8001fd04:	8cbe0020 	lw	s8,32(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:50
   lw	gp, 36(a1)
8001fd08:	8cbc0024 	lw	gp,36(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:51
   lw	ra, 40(a1)
8001fd0c:	8cbf0028 	lw	ra,40(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:52
   lw sp, 44(a1)
8001fd10:	8cbd002c 	lw	sp,44(a1)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:53
   nop			/* delay slot for load */
8001fd14:	00000000 	nop
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:56

   /* and return. */
   j ra
8001fd18:	03e00008 	jr	ra
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/process/switch.S:57
   nop
8001fd1c:	00000000 	nop

8001fd20 <bitmap_translate.part.0>:
bitmap_translate():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:75

static void
bitmap_translate(struct bitmap *bitmap, uint32_t index, WORD_TYPE ** word,
		 WORD_TYPE * mask)
{
	assert(index < bitmap->nbits);
8001fd20:	3c048002 	lui	a0,0x8002
8001fd24:	3c068002 	lui	a2,0x8002
8001fd28:	3c078002 	lui	a3,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:72
	}
	return -E_NO_MEM;
}

static void
bitmap_translate(struct bitmap *bitmap, uint32_t index, WORD_TYPE ** word,
8001fd2c:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:75
		 WORD_TYPE * mask)
{
	assert(index < bitmap->nbits);
8001fd30:	24841d88 	addiu	a0,a0,7560
8001fd34:	2405004b 	li	a1,75
8001fd38:	24c60e28 	addiu	a2,a2,3624
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:72
	}
	return -E_NO_MEM;
}

static void
bitmap_translate(struct bitmap *bitmap, uint32_t index, WORD_TYPE ** word,
8001fd3c:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/fs/sfs/bitmap.c:75
		 WORD_TYPE * mask)
{
	assert(index < bitmap->nbits);
8001fd40:	0c006b0b 	jal	8001ac2c <__panic>
8001fd44:	24e71d94 	addiu	a3,a3,7572

8001fd48 <check_shmn_overlap.part.5>:
check_shmn_overlap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:109
	return shmn;
}

static inline void check_shmn_overlap(shmn_t * prev, shmn_t * next)
{
	assert(prev->start < prev->end);
8001fd48:	3c048002 	lui	a0,0x8002
8001fd4c:	3c068002 	lui	a2,0x8002
8001fd50:	3c078002 	lui	a3,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:107
		shmem->shmn_cache = shmn;
	}
	return shmn;
}

static inline void check_shmn_overlap(shmn_t * prev, shmn_t * next)
8001fd54:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:109
{
	assert(prev->start < prev->end);
8001fd58:	24843064 	addiu	a0,a0,12388
8001fd5c:	2405006d 	li	a1,109
8001fd60:	24c60e28 	addiu	a2,a2,3624
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:107
		shmem->shmn_cache = shmn;
	}
	return shmn;
}

static inline void check_shmn_overlap(shmn_t * prev, shmn_t * next)
8001fd64:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:109
{
	assert(prev->start < prev->end);
8001fd68:	0c006b0b 	jal	8001ac2c <__panic>
8001fd6c:	24e7306c 	addiu	a3,a3,12396

8001fd70 <shmem_remove_entry_pte.part.6>:
shmem_remove_entry_pte():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:72
	} else if (!ptep_invalid(ptep)) {
#ifdef UCONFIG_SWAP
		swap_remove_entry(*ptep);
		ptep_unmap(ptep);
#else
		assert(0);
8001fd70:	3c048002 	lui	a0,0x8002
8001fd74:	3c068002 	lui	a2,0x8002
8001fd78:	3c078002 	lui	a3,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:43
		}
	}
	return shmn;
}

static inline void shmem_remove_entry_pte(pte_t * ptep)
8001fd7c:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:72
	} else if (!ptep_invalid(ptep)) {
#ifdef UCONFIG_SWAP
		swap_remove_entry(*ptep);
		ptep_unmap(ptep);
#else
		assert(0);
8001fd80:	24843064 	addiu	a0,a0,12388
8001fd84:	24050048 	li	a1,72
8001fd88:	24c60e28 	addiu	a2,a2,3624
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:43
		}
	}
	return shmn;
}

static inline void shmem_remove_entry_pte(pte_t * ptep)
8001fd8c:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/shmem.c:72
	} else if (!ptep_invalid(ptep)) {
#ifdef UCONFIG_SWAP
		swap_remove_entry(*ptep);
		ptep_unmap(ptep);
#else
		assert(0);
8001fd90:	0c006b0b 	jal	8001ac2c <__panic>
8001fd94:	24e7242c 	addiu	a3,a3,9260

8001fd98 <check_vma_overlap.part.5>:
check_vma_overlap():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:270

// check_vma_overlap - check if vma1 overlaps vma2 ?
static inline void
check_vma_overlap(struct vma_struct *prev, struct vma_struct *next)
{
	assert(prev->vm_start < prev->vm_end);
8001fd98:	3c048002 	lui	a0,0x8002
8001fd9c:	3c068002 	lui	a2,0x8002
8001fda0:	3c078002 	lui	a3,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:268

#endif //UCONFIG_BIONIC_LIBC

// check_vma_overlap - check if vma1 overlaps vma2 ?
static inline void
check_vma_overlap(struct vma_struct *prev, struct vma_struct *next)
8001fda4:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:270
{
	assert(prev->vm_start < prev->vm_end);
8001fda8:	2484313c 	addiu	a0,a0,12604
8001fdac:	2405010e 	li	a1,270
8001fdb0:	24c60e28 	addiu	a2,a2,3624
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:268

#endif //UCONFIG_BIONIC_LIBC

// check_vma_overlap - check if vma1 overlaps vma2 ?
static inline void
check_vma_overlap(struct vma_struct *prev, struct vma_struct *next)
8001fdb4:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/mm/vmm.c:270
{
	assert(prev->vm_start < prev->vm_end);
8001fdb8:	0c006b0b 	jal	8001ac2c <__panic>
8001fdbc:	24e731ac 	addiu	a3,a3,12716

8001fdc0 <pa2page.part.7>:
pa2page():
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:99
}

static inline struct Page *pa2page(uintptr_t pa)
{
	if (PPN(pa) >= npage) {
		panic("pa2page called with invalid pa");
8001fdc0:	3c048002 	lui	a0,0x8002
8001fdc4:	3c068002 	lui	a2,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:96
static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
8001fdc8:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:99
{
	if (PPN(pa) >= npage) {
		panic("pa2page called with invalid pa");
8001fdcc:	248429ec 	addiu	a0,a0,10732
8001fdd0:	24050063 	li	a1,99
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:96
static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
8001fdd4:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:99
{
	if (PPN(pa) >= npage) {
		panic("pa2page called with invalid pa");
8001fdd8:	0c006b0b 	jal	8001ac2c <__panic>
8001fddc:	24c62a54 	addiu	a2,a2,10836

8001fde0 <pa2page.part.2>:
8001fde0:	3c048002 	lui	a0,0x8002
8001fde4:	3c068002 	lui	a2,0x8002
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:96
static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
8001fde8:	27bdffe8 	addiu	sp,sp,-24
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:99
{
	if (PPN(pa) >= npage) {
		panic("pa2page called with invalid pa");
8001fdec:	248429ec 	addiu	a0,a0,10732
8001fdf0:	24050063 	li	a1,99
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:96
static inline uintptr_t page2pa(struct Page *page)
{
	return KERNBASE + (page2ppn(page) << PGSHIFT);
}

static inline struct Page *pa2page(uintptr_t pa)
8001fdf4:	afbf0014 	sw	ra,20(sp)
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/mm/pmm.h:99
{
	if (PPN(pa) >= npage) {
		panic("pa2page called with invalid pa");
8001fdf8:	0c006b0b 	jal	8001ac2c <__panic>
8001fdfc:	24c62a54 	addiu	a2,a2,10836

8001fe00 <dev_node_ops>:
pa2page.part.2():
8001fe00:	8c4ba476 80002098 80002050 80002004     v.K.. ..P ... ..
8001fe10:	80001fb8 800020f8 800046d4 800046f4     ..... ...F...F..
8001fe20:	800046f4 800046f4 800046dc 800046f4     .F...F...F...F..
8001fe30:	800046d4 800046dc 800046d4 80001f70     .F...F...F..p...
8001fe40:	80001f14 80001e98 800046dc 800046f4     .........F...F..
8001fe50:	800046f4 80001e58 800046f4              .F..X....F..

8001fe5c <pipe_node_ops>:
8001fe5c:	8c4ba476 800030a0 80003448 800033b4     v.K..0..H4...3..
8001fe6c:	8000330c 80003210 800046d4 800046f4     .3...2...F...F..
8001fe7c:	800046f4 800046f4 800046dc 800046f4     .F...F...F...F..
8001fe8c:	80003138 800046dc 80002f68 800046dc     81...F..h/...F..
8001fe9c:	80002f58 800046dc 800046dc 800046f4     X/...F...F...F..
8001feac:	800046f4 800046f4 800046f4              .F...F...F..

8001feb8 <pipe_root_ops>:
8001feb8:	8c4ba476 800046dc 800046dc 800046dc     v.K..F...F...F..
8001fec8:	800046dc 800046dc 800046dc 800046dc     .F...F...F...F..
8001fed8:	800046dc 800046dc 800046dc 800046dc     .F...F...F...F..
8001fee8:	800046dc 800046dc 800046dc 800046dc     .F...F...F...F..
8001fef8:	800046dc 800046dc 800046dc 80003940     .F...F...F..@9..
8001ff08:	800046dc 80003824 80003b4c              .F..$8..L;..

8001ff14 <sfs_node_dirops>:
8001ff14:	8c4ba476 80006d04 80008288 800046ec     v.K..m.......F..
8001ff24:	800046ec 800082f8 80009294 8000880c     .F..............
8001ff34:	80008b14 8000a710 800046ec 800046e4     .........F...F..
8001ff44:	80009630 80009000 80007f08 800046dc     0............F..
8001ff54:	80006df0 800046ec 800046ec 8000a428     .m...F...F..(...
8001ff64:	8000a060 80009d38 800099fc              `...8.......

8001ff70 <sfs_node_fileops>:
8001ff70:	8c4ba476 80006d24 80008288 80008684     v.K.$m..........
8001ff80:	800084f8 800082f8 80009294 800046f4     .............F..
8001ff90:	800046f4 800046f4 800046f4 800046f4     .F...F...F...F..
8001ffa0:	800046f4 800046f4 80007f08 800046dc     .F...F.......F..
8001ffb0:	80006df0 8000819c 80008d58 800046f4     .m......X....F..
8001ffc0:	800046f4 800046f4 800046f4              .F...F...F..

8001ffcc <__slab_div_table>:
8001ffcc:	00000071 0000003b 0000001e 0000000f     q...;...........
	...
8001ffec:	80016864 800167dc 80016878 800167dc     dh...g..xh...g..
8001fffc:	800167dc 800167dc 800167dc 8001688c     .g...g...g...h..
8002000c:	800167dc 800167dc 800168b0 800168c0     .g...g...h...h..
8002001c:	800167dc 800168d4 800168e4 800168e4     .g...h...h...h..
8002002c:	800168e4 800168e4 800168e4 800168e4     .h...h...h...h..
8002003c:	800168e4 800168e4 800168e4 800167dc     .h...h...h...g..
8002004c:	800167dc 800167dc 800167dc 800167dc     .g...g...g...g..
8002005c:	800167dc 800167dc 800167dc 800167dc     .g...g...g...g..
8002006c:	800167dc 800167dc 800167dc 800167dc     .g...g...g...g..
8002007c:	800167dc 800167dc 800167dc 800167dc     .g...g...g...g..
8002008c:	800167dc 800167dc 800167dc 800167dc     .g...g...g...g..
8002009c:	800167dc 800167dc 800167dc 800167dc     .g...g...g...g..
800200ac:	800167dc 800167dc 800167dc 800167dc     .g...g...g...g..
800200bc:	800167dc 800167dc 800167dc 800167dc     .g...g...g...g..
800200cc:	800167dc 800167dc 800167dc 800167dc     .g...g...g...g..
800200dc:	800167dc 800167dc 800167dc 800167dc     .g...g...g...g..
800200ec:	80016934 80016950 800169ac 800167dc     4i..Pi...i...g..
800200fc:	800167dc 800167dc 800167dc 800167dc     .g...g...g...g..
8002010c:	800167dc 800169f8 800167dc 800167dc     .g...i...g...g..
8002011c:	80016a08 80016a34 800167dc 800167dc     .j..4j...g...g..
8002012c:	80016a78 800167dc 80016b98 800167dc     xj...g...k...g..
8002013c:	800167dc 80016bc0                       .g...k..

80020144 <error_string>:
80020144:	00000000 800236e4 800236fc 80023718     .....6...6...7..
80020154:	80023728 80023740 8002374c 80023768     (7..@7..L7..h7..
80020164:	80023780 80023794 800237a4 800237b8     .7...7...7...7..
80020174:	800237c4 800237d4 800237e8 800237f4     .7...7...7...7..
80020184:	8002380c 80023824 80023830 80023844     .8..$8..08..D8..
80020194:	80023854 80023864 80023874 80023888     T8..d8..t8...8..
800201a4:	8002389c 800238b0 800238c4 800238d4     .8...8...8...8..
800201b4:	800238e4 800238fc 8002390c 80023924     .8...8...9..$9..
800201c4:	80023934 80023940 80023964 80023984     49..@9..d9...9..
800201d4:	8002399c 800239ac 800239c0 800239e0     .9...9...9...9..

800201e4 <commands>:
800201e4:	80023dcc 80023dd8 8001a9ac 80023df8     .=...=.......=..
800201f4:	80023e04 8001a98c                       .>......

800201fc <CHAR_FONT_BITMAP>:
	...
80020210:	01000000 00401004 00000401 00040100     ......@.........
80020220:	00000000 02800000 00a0280a 00000000     .........(......
	...
80020238:	04800000 43f86812 507f0902 00048120     .....h.C...P ...
80020248:	00000000 01004000 6048961f 40d00f01     .....@....H`...@
80020258:	101f0d22 00000040 40600000 01180902     "...@.....`@....
80020268:	40620303 00180902 00000000 03800000     ..b@............
80020278:	c0300401 88a22480 003f0663 00000000     ..0..$..c.?.....
80020288:	01000000 00401004 00000000 00000000     ......@.........
80020298:	00000000 01008000 80200804 20080200     .......... .... 
800202a8:	20040100 00000000 00801000 00401002     ... ..........@.
800202b8:	40100401 04020080 00000000 81000000     ...@............
800202c8:	20e03824 00000409 00000000 00000000     $8. ............
800202d8:	00000000 00401000 40103f81 00000100     ......@..?.@....
	...
800202f8:	08060180 00000010 00000000 00000000     ................
80020308:	003c0000 00000000 00000000 00000000     ..<.............
	...
80020320:	00060180 00000000 04000000 00802008     ............. ..
80020330:	20080401 04010040 00000008 03800000     ... @...........
80020340:	22088211 08822089 000e0442 00000000     ...". ..B.......
80020350:	01800000 00401005 40100401 001f0100     ......@....@....
80020360:	00000000 83c00000 02008030 20301804     ........0.....0 
80020370:	003f8040 00000000 83c00000 83008030     @.?.........0...
80020380:	00803007 000f0c22 00000000 06000000     .0.."...........
80020390:	41205814 00fe1084 00100401 00000000     .X A............
800203a0:	87e00000 20f80200 00802004 000f0422     ....... . .."...
800203b0:	00000000 07800000 a0080623 08823187     ........#....1..
800203c0:	001e0c42 00000000 0fe00000 00804030     B...........0@..
800203d0:	20100402 00010080 00000000 87c00000     ... ............
800203e0:	c3188231 08823187 001f0c62 00000000     1....1..b.......
800203f0:	83c00000 62088211 00802f0c 000f0623     .......b./..#...
	...
80020408:	80600000 00000001 00060180 00000000     ..`.............
80020418:	00000000 80600000 00000001 08060180     ......`.........
80020428:	00000010 00000000 c1c08000 c01c0181     ................
80020438:	00000801 00000000 00000000 03f80000     ................
80020448:	00fe0000 00000000 00000000 00000000     ................
80020458:	00700200 70703007 00000020 00000000     ..p..0pp .......
80020468:	81c00000 00c02008 00080201 00020080     ..... ..........
80020478:	00000000 07800000 23888433 48922489     ........3..#.$.H
80020488:	0c010e22 000001c0 01000000 80a0280e     "............(..
80020498:	107c1102 00208821 00000000 87e00000     ..|.!. .........
800204a8:	e3088230 08823087 001f8c22 00000000     0....0..".......
800204b8:	07800000 20080623 18020080 001e0840     ....#.. ....@...
800204c8:	00000000 83e00000 22088218 08822088     ...........". ..
800204d8:	000f8622 00000000 8fe00000 e0080200     "...............
800204e8:	0802008f 003f8020 00000000 8fe00000     .... .?.........
800204f8:	e0080200 0802008f 00008020 00000000     ........ .......
80020508:	07800000 20080621 08823080 001e0842     ....!.. .0..B...
80020518:	00000000 88200000 e2088220 0882208f     ...... . .... ..
80020528:	00208822 00000000 07c00000 00401004     ". ...........@.
80020538:	40100401 001f0100 00000000 07800000     ...@............
80020548:	01004010 00401004 000f0661 00000000     .@....@.a.......
80020558:	84200000 e0281208 88320480 00208420     .. ...(...2. . .
80020568:	00000000 80200000 20080200 08020080     ...... .... ....
80020578:	003f8020 00000000 8c600000 a2a8aa31      .?.......`.1...
80020588:	0882248b 00208822 00000000 88600000     .$..". .......`.
80020598:	22288a21 88a22489 00308c22 00000000     !.(".$..".0.....
800205a8:	03800000 22088211 08822088 000e0442     .......". ..B...
800205b8:	00000000 83e00000 22088230 08021f8c     ........0.."....
800205c8:	00008020 00000000 03800000 22088211      .............."
800205d8:	08822088 601e0442 00000100 83e00000     . ..B..`........
800205e8:	22088230 08421f8c 00408822 00000000     0.."..B.".@.....
800205f8:	87800000 c0080221 00801c00 001f0c22     ....!......."...
80020608:	00000000 0fe00000 00401004 40100401     ..........@....@
80020618:	00040100 00000000 88200000 22088220     .......... . .."
80020628:	08822088 001f0c62 00000000 88200000     . ..b......... .
80020638:	41104420 a0280a04 00040380 00000000      D.A..(.........
80020648:	48100000 a2648120 907e1685 00090240     ...H .d...~.@...
80020658:	00000000 08200000 00a02811 10280e01     ...... ..(....(.
80020668:	00208441 00000000 08200000 80a06411     A. ....... ..d..
80020678:	40100403 00040100 00000000 0fe00000     ...@............
80020688:	00804030 10080401 003f8060 00000000     0@......`.?.....
80020698:	0080e000 80200802 20080200 38020080     ...... .... ...8
800206a8:	00000000 00200000 80100401 40100200     ...... ........@
800206b8:	20080200 00000100 01007000 00401004     ... .....p....@.
800206c8:	40100401 1c040100 00000000 01000000     ...@............
800206d8:	0318440a 00000000 00000000 00000000     .D..............
	...
800206f8:	000ff000 0100200c 00000000 00000000     ..... ..........
	...
80020714:	01103800 08461f04 00170621 00000000     .8....F.!.......
80020724:	80200800 20983a00 08421084 000e8261     .. ..:. ..B.a...
	...
8002073c:	21103800 08020080 000e0440 00000000     .8.!....@.......
8002074c:	04010000 21905c10 08421084 00170641     .....\.!..B.A...
	...
80020764:	21903800 08021f84 000e0440 00000000     .8.!....@.......
80020774:	0081c000 80207e02 20080200 00020080     .....~ .... ....
	...
8002078c:	21905c00 08421084 40170641 00038190     .\.!..B.A..@....
8002079c:	80200800 21983a00 08421084 00108421     .. ..:.!..B.!...
800207ac:	00000000 01004000 00401c00 40100401     .....@....@....@
800207bc:	003f8100 00000000 01004000 00401c00     ..?......@....@.
800207cc:	40100401 10040100 0000e040 80200800     ...@....@..... .
800207dc:	a0482200 48120380 00108220 00000000     ."H....H .......
800207ec:	00803c00 80200802 20080200 001c0080     .<.... .... ....
	...
80020804:	22487e00 48922489 00248922 00000000     .~H".$.H".$.....
80020814:	00000000 21983a00 08421084 00108421     .....:.!..B.!...
	...
8002082c:	20903c00 08421084 000f0241 00000000     .<. ..B.A.......
8002083c:	00000000 20983a00 08421084 020e8261     .....:. ..B.a...
8002084c:	00002008 00000000 21905c00 08421084     . .......\.!..B.
8002085c:	40170641 00040100 00000000 41303400     A..@.........40A
8002086c:	10040100 00010040 00000000 00000000     ....@...........
8002087c:	21083c00 00700380 000f0421 00000000     .<.!..p.!.......
8002088c:	00800000 80207e02 20080200 001c0080     .....~ .... ....
	...
800208a4:	21084200 08421084 00170661 00000000     .B.!..B.a.......
800208b4:	00000000 41084200 60240902 00060180     .....B.A..$`....
	...
800208cc:	a2048100 f85a1685 00090241 00000000     ......Z.A.......
800208dc:	00000000 80904200 90180601 00108240     .....B......@...
	...
800208f4:	41104200 60280902 10040100 0000c020     .B.A..(`.... ...
80020904:	00000000 01007e00 10080402 001f8020     .....~...... ...
80020914:	00000000 01018000 00401004 40100301     ..........@....@
80020924:	10040100 00000180 01004000 00401004     .........@....@.
80020934:	40100401 10040100 00010040 01003000     ...@....@....0..
80020944:	00401004 40101801 10040100 00000030     ..@....@....0...
	...
8002095c:	00622700 00000000 00000000              .'b.........

80020968 <buddy_pmm_manager>:
80020968:	80024344 8001bc1c 8001bc98 8001beb8     DC..............
80020978:	8001ce4c 8001bc64 8001c178              L...d...x...

80020984 <__func__.1817>:
80020984:	69735f5f 65735f67 5f707574 6d617266     __sig_setup_fram
80020994:	00000065                                e...

80020998 <syscalls>:
80020998:	00000000 8001f090 8001f054 8001f080     ........T.......
800209a8:	8001f06c 8001f030 00000000 00000000     l...0...........
800209b8:	00000000 8001f028 8001f020 8001f018     ....(... .......
800209c8:	8001f00c 00000000 00000000 00000000     ................
800209d8:	00000000 8001edc0 8001edd0 8001f004     ................
800209e8:	8001eff0 8001efe0 8001efcc 00000000     ................
	...
80020a10:	8001efa8 8001ef88 00000000 00000000     ................
	...
80020a38:	8001ef80 8001ef78 8001ef68 8001ef60     ....x...h...`...
80020a48:	8001ef50 00000000 00000000 00000000     P...............
80020a58:	8001ef3c 8001ef28 00000000 00000000     <...(...........
	...
80020b28:	8001ef18 8001ef10 8001eefc 8001eee8     ................
80020b38:	8001eed4 00000000 00000000 00000000     ................
	...
80020b50:	8001eec4 8001eebc 00000000 00000000     ................
	...
80020b78:	8001eeb4 8001eea4 8001ee9c 8001ee8c     ................
80020b88:	8001ee7c 00000000 00000000 8001ee74     |...........t...
80020b98:	8001ee60 00000000 8001ee50 00000000     `.......P.......
	...
80020bc8:	8001ee48 8001ee38 00000000 00000000     H...8...........
	...
80020d60:	8001ede0 8001f804 8001f888 8001f8b8     ................
80020d70:	8001f8e8 8001f918 8001f918 8001f774     ............t...
80020d80:	8001f774 8001f958 8001f774 8001f7b0     t...X...t.......

80020d90 <excnames.2161>:
80020d90:	80024ac4 80024ad0 80024adc 80024af0     .J...J...J...J..
80020da0:	80024b04 80024b1c 80024b34 80024b54     .K...K..4K..TK..
80020db0:	80024b74 80024b7c 80024b88 80024ba8     tK..|K...K...K..
80020dc0:	80024bc0 20202020 20202020 00000000     .K..        ....
80020dd0:	2020207c 55504320 20206425 00002020     |    CPU%d    ..
80020de0:	64342520 00000020 34252020 34252864      %4d ...  %4d(%4
80020df0:	00202964 43206e4f 64255550 0000203a     d) .On CPU%d: ..
80020e00:	00643425 64342528 000d0a29 65686373     %4d.(%4d)...sche
80020e10:	6c632064 3a737361 0a732520 0000000d     d class: %s.....
80020e20:	65686373 00632e64 65737361 6f697472     sched.c.assertio
80020e30:	6166206e 64656c69 7325203a 00000000     n failed: %s....
80020e40:	636f7270 74733e2d 20657461 50203d21     proc->state != P
80020e50:	5f434f52 424d4f5a 00004549 636f7270     ROC_ZOMBIE..proc
80020e60:	69703e2d 3d3e2064 736c7020 6165725f     ->pid >= pls_rea
80020e70:	636c2864 635f7570 746e756f 00000029     d(lcpu_count)...
80020e80:	656b6177 72207075 616e6e75 20656c62     wakeup runnable 
80020e90:	636f7270 2e737365 00000d0a 656d6974     process.....time
80020ea0:	653e2d72 72697078 3e207365 26203020     r->expires > 0 &
80020eb0:	69742026 2d72656d 6f72703e 3d212063     & timer->proc !=
80020ec0:	4c554e20 0000004c 7473696c 706d655f      NULL...list_emp
80020ed0:	26287974 6d697428 3e2d7265 656d6974     ty(&(timer->time
80020ee0:	696c5f72 29296b6e 00000000 656d6974     r_link))....time
80020ef0:	653e2d72 72697078 21207365 0030203d     r->expires != 0.
80020f00:	636f7270 61773e2d 735f7469 65746174     proc->wait_state
80020f10:	57202620 4e495f54 52524554 45545055      & WT_INTERRUPTE
80020f20:	00000044 636f7270 20737365 73276425     D...process %d's
80020f30:	69617720 74735f74 20657461 30203d3d      wait_state == 0
80020f40:	000d0a2e 65686373 52525f64 0000632e     ....sched_RR.c..
80020f50:	73696c21 6d655f74 28797470 72702826     !list_empty(&(pr
80020f60:	3e2d636f 5f6e7572 6b6e696c 26202929     oc->run_link)) &
80020f70:	72702026 3e2d636f 3d207172 7172203d     & proc->rq == rq
80020f80:	00000000 7473696c 706d655f 26287974     ....list_empty(&
80020f90:	6f727028 723e2d63 6c5f6e75 296b6e69     (proc->run_link)
80020fa0:	00000029 735f5252 64656863 72656c75     )...RR_scheduler
80020fb0:	00000000 2e766564 00000063 6f6e5f5f     ....dev.c...__no
80020fc0:	21206564 554e203d 26204c4c 68632026     de != NULL && ch
80020fd0:	5f6b6365 646f6e69 79745f65 5f286570     eck_inode_type(_
80020fe0:	646f6e5f 64202c65 63697665 00002965     _node, device)..
80020ff0:	6f6e5f5f 21206564 554e203d 26204c4c     __node != NULL &
80021000:	5f5f2026 65646f6e 6e693e2d 73706f5f     & __node->in_ops
80021010:	203d2120 4c4c554e 20262620 6f6e5f5f      != NULL && __no
80021020:	3e2d6564 6f5f6e69 3e2d7370 5f706f76     de->in_ops->vop_
80021030:	74746567 20657079 4e203d21 004c4c55     gettype != NULL.
80021040:	74746567 00657079 5f766564 6b736964     gettype.dev_disk
80021050:	00632e30 69706f63 21206465 2030203d     0.c.copied != 0 
80021060:	63202626 6569706f 3d3c2064 73657220     && copied <= res
80021070:	26206469 6f632026 64656970 44202520     id && copied % D
80021080:	304b5349 4b4c425f 455a4953 203d3d20     ISK0_BLKSIZE == 
80021090:	00000030 6b736964 77203a30 65746972     0...disk0: write
800210a0:	6b6c6220 3d206f6e 20642520 63657328      blkno = %d (sec
800210b0:	206f6e74 6425203d 6e202c29 736b6c62     tno = %d), nblks
800210c0:	25203d20 6e282064 73636573 25203d20      = %d (nsecs = %
800210d0:	203a2964 30257830 0a2e7838 00000000     d): 0x%08x......
800210e0:	6b736964 72203a30 20646165 6e6b6c62     disk0: read blkn
800210f0:	203d206f 28206425 74636573 3d206f6e     o = %d (sectno =
80021100:	29642520 626e202c 20736b6c 6425203d      %d), nblks = %d
80021110:	736e2820 20736365 6425203d 30203a29      (nsecs = %d): 0
80021120:	38302578 000a2e78 69706f63 3d206465     x%08x...copied =
80021130:	6c61203d 26206e65 6f632026 64656970     = alen && copied
80021140:	44202520 304b5349 4b4c425f 455a4953      % DISK0_BLKSIZE
80021150:	203d3d20 00000030 6b736964 64203a30      == 0...disk0: d
80021160:	635f7665 74616572 6f6e5f65 0a2e6564     ev_create_node..
80021170:	00000000 6b736964 65642030 65636976     ....disk0 device
80021180:	6e736920 61207427 6c696176 656c6261      isn't available
80021190:	00000a2e 6b736964 6c612030 20636f6c     ....disk0 alloc 
800211a0:	66667562 66207265 656c6961 000a2e64     buffer failed...
800211b0:	6b736964 00000030 6b736964 76203a30     disk0...disk0: v
800211c0:	615f7366 645f6464 203a7665 0a2e6525     fs_add_dev: %e..
800211d0:	00000000 5f766564 6b736964 00632e31     ....dev_disk1.c.
800211e0:	6b736964 64203a31 635f7665 74616572     disk1: dev_creat
800211f0:	6f6e5f65 0a2e6564 00000000 6b736964     e_node......disk
80021200:	00000031 6b736964 76203a31 615f7366     1...disk1: vfs_a
80021210:	645f6464 203a7665 0a2e6525 00000000     dd_dev: %e......
80021220:	5f766564 6c6c756e 0000632e 6c6c756e     dev_null.c..null
80021230:	6564203a 72635f76 65746165 646f6e5f     : dev_create_nod
80021240:	000a2e65 6c6c756e 00000000 6c6c756e     e...null....null
80021250:	6676203a 64615f73 65645f64 25203a76     : vfs_add_dev: %
80021260:	000a2e65 31647361 35343332 000d0a36     e...asd123456...
80021270:	77647361 0a777777 0000000d 5f766564     asdwwww.....dev_
80021280:	69647473 00632e6e 69647473 64203a6e     stdin.c.stdin: d
80021290:	635f7665 74616572 6f6e5f65 0a2e6564     ev_create_node..
800212a0:	00000000 69647473 0000006e 69647473     ....stdin...stdi
800212b0:	76203a6e 615f7366 645f6464 203a7665     n: vfs_add_dev: 
800212c0:	0a2e6525 00000000 5f766564 6f647473     %e......dev_stdo
800212d0:	632e7475 00000000 6f647473 203a7475     ut.c....stdout: 
800212e0:	5f766564 61657263 6e5f6574 2e65646f     dev_create_node.
800212f0:	0000000a 6f647473 00007475 6f647473     ....stdout..stdo
80021300:	203a7475 5f736676 5f646461 3a766564     ut: vfs_add_dev:
80021310:	2e652520 0000000a 65706970 0000632e      %e.....pipe.c..
80021320:	73665f5f 203d2120 4c4c554e 20262620     __fs != NULL && 
80021330:	63656863 73665f6b 7079745f 5f5f2865     check_fs_type(__
80021340:	202c7366 65706970 00000029 65706970     fs, pipe)...pipe
80021350:	7263203a 65746165 70697020 73665f65     : create pipe_fs
80021360:	69616620 2e64656c 0000000a 65706970      failed.....pipe
80021370:	7263203a 65746165 6f6f7220 6e692074     : create root in
80021380:	2065646f 6c696166 0a2e6465 00000000     ode failed......
80021390:	65706970 00000000 65706970 6676203a     pipe....pipe: vf
800213a0:	64615f73 73665f64 6525203a 00000a2e     s_add_fs: %e....
800213b0:	65706970 6f6e695f 632e6564 00000000     pipe_inode.c....
800213c0:	6f6e5f5f 21206564 554e203d 26204c4c     __node != NULL &
800213d0:	68632026 5f6b6365 646f6e69 79745f65     & check_inode_ty
800213e0:	5f286570 646f6e5f 70202c65 5f657069     pe(__node, pipe_
800213f0:	646f6e69 00002965 2d6e6970 6365723e     inode)..pin->rec
80021400:	6d69616c 756f635f 3e20746e 00003020     laim_count > 0..
80021410:	74617473 3d212065 4c554e20 0000004c     state != NULL...
80021420:	65706970 6f6f725f 00632e74 6f6e722a     pipe_root.c.*rno
80021430:	735f6564 65726f74 203d3d20 4c4c554e     de_store == NULL
80021440:	00000000 6f6e772a 735f6564 65726f74     ....*wnode_store
80021450:	203d3d20 4c4c554e 00000000 6e6b6e75      == NULL....unkn
80021460:	206e776f 65706970 6f6e695f 74206564     own pipe_inode t
80021470:	20657079 0a2e6425 00000000 74617028     ype %d......(pat
80021480:	5d305b68 203d3d20 20277227 70207c7c     h[0] == 'r' || p
80021490:	5b687461 3d205d30 7727203d 26202927     ath[0] == 'w') &
800214a0:	61702026 315b6874 3d3d205d 275f2720     & path[1] == '_'
800214b0:	00000000 6d616e28 5d305b65 203d3d20     ....(name[0] == 
800214c0:	20277227 6e207c7c 5b656d61 3d205d30     'r' || name[0] =
800214d0:	7727203d 26202927 616e2026 315b656d     = 'w') && name[1
800214e0:	3d3d205d 275f2720 00000000 65706970     ] == '_'....pipe
800214f0:	6174735f 632e6574 00000000 74617473     _state.c....stat
80021500:	723e2d65 635f6665 746e756f 30203e20     e->ref_count > 0
80021510:	00000000 74617473 3d212065 4c554e20     ....state != NUL
80021520:	2626204c 61747320 3e2d6574 5f666572     L && state->ref_
80021530:	6e756f63 203e2074 00000030 74696177     count > 0...wait
80021540:	6575715f 655f6575 7974706d 73282628     _queue_empty(&(s
80021550:	65746174 65723e2d 72656461 6575715f     tate->reader_que
80021560:	29296575 00000000 74696177 6575715f     ue))....wait_que
80021570:	655f6575 7974706d 73282628 65746174     ue_empty(&(state
80021580:	72773e2d 72657469 6575715f 29296575     ->writer_queue))
80021590:	00000000 646f6e69 65725f65 6f635f66     ....inode_ref_co
800215a0:	28746e75 65646f6e 3d3d2029 00003020     unt(node) == 0..
800215b0:	646f6e69 706f5f65 635f6e65 746e756f     inode_open_count
800215c0:	646f6e28 3d202965 0030203d 65646f6e     (node) == 0.node
800215d0:	203d2120 4c4c554e 20262620 65646f6e      != NULL && node
800215e0:	6e693e2d 73706f5f 203d2120 4c4c554e     ->in_ops != NULL
800215f0:	00000000 65646f6e 6e693e2d 73706f5f     ....node->in_ops
80021600:	6f763e2d 616d5f70 20636967 56203d3d     ->vop_magic == V
80021610:	4d5f504f 43494741 00000000 5f666572     OP_MAGIC....ref_
80021620:	6e756f63 3d3e2074 65706f20 6f635f6e     count >= open_co
80021630:	20746e75 6f202626 5f6e6570 6e756f63     unt && open_coun
80021640:	3d3e2074 00003020 5f666572 6e756f63     t >= 0..ref_coun
80021650:	203c2074 5f58414d 444f4e49 4f435f45     t < MAX_INODE_CO
80021660:	20544e55 6f202626 5f6e6570 6e756f63     UNT && open_coun
80021670:	203c2074 5f58414d 444f4e49 4f435f45     t < MAX_INODE_CO
80021680:	00544e55 646f6e69 706f5f65 635f6e65     UNT.inode_open_c
80021690:	746e756f 646f6e28 3e202965 00003020     ount(node) > 0..
800216a0:	6f6e5f5f 21206564 554e203d 26204c4c     __node != NULL &
800216b0:	5f5f2026 65646f6e 6e693e2d 73706f5f     & __node->in_ops
800216c0:	203d2120 4c4c554e 20262620 6f6e5f5f      != NULL && __no
800216d0:	3e2d6564 6f5f6e69 3e2d7370 5f706f76     de->in_ops->vop_
800216e0:	736f6c63 3d212065 4c554e20 0000004c     close != NULL...
800216f0:	736f6c63 00000065 3a736676 72617720     close...vfs: war
80021700:	676e696e 6f76203a 6c635f70 3a65736f     ning: vop_close:
80021710:	2e652520 0000000a 646f6e69 65725f65      %e.....inode_re
80021720:	6f635f66 28746e75 65646f6e 203e2029     f_count(node) > 
80021730:	00000030 6f6e5f5f 21206564 554e203d     0...__node != NU
80021740:	26204c4c 5f5f2026 65646f6e 6e693e2d     LL && __node->in
80021750:	73706f5f 203d2120 4c4c554e 20262620     _ops != NULL && 
80021760:	6f6e5f5f 3e2d6564 6f5f6e69 3e2d7370     __node->in_ops->
80021770:	5f706f76 6c636572 206d6961 4e203d21     vop_reclaim != N
80021780:	004c4c55 6c636572 006d6961 3a736676     ULL.reclaim.vfs:
80021790:	72617720 676e696e 6f76203a 65725f70      warning: vop_re
800217a0:	69616c63 25203a6d 000a2e65 2e736676     claim: %e...vfs.
800217b0:	00000063 656d616e 203d2120 4c4c554e     c...name != NULL
800217c0:	00000000 79747366 3e2d6570 6e756f6d     ....fstype->moun
800217d0:	00000074 64736676 632e7665 00000000     t...vfsdev.c....
800217e0:	6e766564 20656d61 4e203d21 004c4c55     devname != NULL.
800217f0:	76656428 65646f6e 203d3d20 4c4c554e     (devnode == NULL
80021800:	20262620 756f6d21 6261746e 2029656c      && !mountable) 
80021810:	28207c7c 6e766564 2065646f 4e203d21     || (devnode != N
80021820:	204c4c55 63202626 6b636568 6f6e695f     ULL && check_ino
80021830:	745f6564 28657079 6e766564 2c65646f     de_type(devnode,
80021840:	76656420 29656369 00000029 21207366      device))...fs !
80021850:	554e203d 00004c4c 76656476 65643e2d     = NULL..vdev->de
80021860:	6d616e76 3d212065 4c554e20 2626204c     vname != NULL &&
80021870:	65647620 6d3e2d76 746e756f 656c6261      vdev->mountable
80021880:	00000000 76656476 73663e2d 203d2120     ....vdev->fs != 
80021890:	4c4c554e 00000000 3a736676 756f6d20     NULL....vfs: mou
800218a0:	2520746e 000a2e73 3a736676 6d6e7520     nt %s...vfs: unm
800218b0:	746e756f 2e732520 0000000a 3a736676     ount %s.....vfs:
800218c0:	72617720 676e696e 7973203a 6620636e      warning: sync f
800218d0:	656c6961 6f662064 73252072 6525203a     ailed for %s: %e
800218e0:	00000a2e 3a736676 72617720 676e696e     ....vfs: warning
800218f0:	6e75203a 6e756f6d 61662074 64656c69     : unmount failed
80021900:	726f6620 3a732520 2e652520 0000000a      for %s: %e.....
80021910:	66736676 2e656c69 00000063 6f6e5f5f     vfsfile.c...__no
80021920:	21206564 554e203d 26204c4c 5f5f2026     de != NULL && __
80021930:	65646f6e 6e693e2d 73706f5f 203d2120     node->in_ops != 
80021940:	4c4c554e 20262620 6f6e5f5f 3e2d6564     NULL && __node->
80021950:	6f5f6e69 3e2d7370 5f706f76 61657263     in_ops->vop_crea
80021960:	21206574 554e203d 00004c4c 61657263     te != NULL..crea
80021970:	00006574 6f6e5f5f 21206564 554e203d     te..__node != NU
80021980:	26204c4c 5f5f2026 65646f6e 6e693e2d     LL && __node->in
80021990:	73706f5f 203d2120 4c4c554e 20262620     _ops != NULL && 
800219a0:	6f6e5f5f 3e2d6564 6f5f6e69 3e2d7370     __node->in_ops->
800219b0:	5f706f76 6e65706f 203d2120 4c4c554e     vop_open != NULL
800219c0:	00000000 6e65706f 00000000 6f6e5f5f     ....open....__no
800219d0:	21206564 554e203d 26204c4c 5f5f2026     de != NULL && __
800219e0:	65646f6e 6e693e2d 73706f5f 203d2120     node->in_ops != 
800219f0:	4c4c554e 20262620 6f6e5f5f 3e2d6564     NULL && __node->
80021a00:	6f5f6e69 3e2d7370 5f706f76 6e757274     in_ops->vop_trun
80021a10:	65746163 203d2120 4c4c554e 00000000     cate != NULL....
80021a20:	6e757274 65746163 00000000 6f6e5f5f     truncate....__no
80021a30:	21206564 554e203d 26204c4c 5f5f2026     de != NULL && __
80021a40:	65646f6e 6e693e2d 73706f5f 203d2120     node->in_ops != 
80021a50:	4c4c554e 20262620 6f6e5f5f 3e2d6564     NULL && __node->
80021a60:	6f5f6e69 3e2d7370 5f706f76 696c6e75     in_ops->vop_unli
80021a70:	21206b6e 554e203d 00004c4c 696c6e75     nk != NULL..unli
80021a80:	00006b6e 6f6e5f5f 21206564 554e203d     nk..__node != NU
80021a90:	26204c4c 5f5f2026 65646f6e 6e693e2d     LL && __node->in
80021aa0:	73706f5f 203d2120 4c4c554e 20262620     _ops != NULL && 
80021ab0:	6f6e5f5f 3e2d6564 6f5f6e69 3e2d7370     __node->in_ops->
80021ac0:	5f706f76 616e6572 2120656d 554e203d     vop_rename != NU
80021ad0:	00004c4c 616e6572 0000656d 6f6e5f5f     LL..rename..__no
80021ae0:	21206564 554e203d 26204c4c 5f5f2026     de != NULL && __
80021af0:	65646f6e 6e693e2d 73706f5f 203d2120     node->in_ops != 
80021b00:	4c4c554e 20262620 6f6e5f5f 3e2d6564     NULL && __node->
80021b10:	6f5f6e69 3e2d7370 5f706f76 6b6e696c     in_ops->vop_link
80021b20:	203d2120 4c4c554e 00000000 6f6e5f5f      != NULL....__no
80021b30:	21206564 554e203d 26204c4c 5f5f2026     de != NULL && __
80021b40:	65646f6e 6e693e2d 73706f5f 203d2120     node->in_ops != 
80021b50:	4c4c554e 20262620 6f6e5f5f 3e2d6564     NULL && __node->
80021b60:	6f5f6e69 3e2d7370 5f706f76 6c6d7973     in_ops->vop_syml
80021b70:	206b6e69 4e203d21 004c4c55 6c6d7973     ink != NULL.syml
80021b80:	006b6e69 6f6e5f5f 21206564 554e203d     ink.__node != NU
80021b90:	26204c4c 5f5f2026 65646f6e 6e693e2d     LL && __node->in
80021ba0:	73706f5f 203d2120 4c4c554e 20262620     _ops != NULL && 
80021bb0:	6f6e5f5f 3e2d6564 6f5f6e69 3e2d7370     __node->in_ops->
80021bc0:	5f706f76 64616572 6b6e696c 203d2120     vop_readlink != 
80021bd0:	4c4c554e 00000000 64616572 6b6e696c     NULL....readlink
80021be0:	00000000 6f6e5f5f 21206564 554e203d     ....__node != NU
80021bf0:	26204c4c 5f5f2026 65646f6e 6e693e2d     LL && __node->in
80021c00:	73706f5f 203d2120 4c4c554e 20262620     _ops != NULL && 
80021c10:	6f6e5f5f 3e2d6564 6f5f6e69 3e2d7370     __node->in_ops->
80021c20:	5f706f76 69646b6d 3d212072 4c554e20     vop_mkdir != NUL
80021c30:	0000004c 69646b6d 00000072 6c736676     L...mkdir...vfsl
80021c40:	756b6f6f 00632e70 65646f6e 6e693e2d     ookup.c.node->in
80021c50:	2073665f 4e203d21 004c4c55 6f6e5f5f     _fs != NULL.__no
80021c60:	21206564 554e203d 26204c4c 5f5f2026     de != NULL && __
80021c70:	65646f6e 6e693e2d 73706f5f 203d2120     node->in_ops != 
80021c80:	4c4c554e 20262620 6f6e5f5f 3e2d6564     NULL && __node->
80021c90:	6f5f6e69 3e2d7370 5f706f76 6b6f6f6c     in_ops->vop_look
80021ca0:	21207075 554e203d 00004c4c 6b6f6f6c     up != NULL..look
80021cb0:	00007075 6f6e5f5f 21206564 554e203d     up..__node != NU
80021cc0:	26204c4c 5f5f2026 65646f6e 6e693e2d     LL && __node->in
80021cd0:	73706f5f 203d2120 4c4c554e 20262620     _ops != NULL && 
80021ce0:	6f6e5f5f 3e2d6564 6f5f6e69 3e2d7370     __node->in_ops->
80021cf0:	5f706f76 6b6f6f6c 705f7075 6e657261     vop_lookup_paren
80021d00:	3d212074 4c554e20 0000004c 6b6f6f6c     t != NULL...look
80021d10:	705f7075 6e657261 00000074 70736676     up_parent...vfsp
80021d20:	2e687461 00000063 6f6e5f5f 21206564     ath.c...__node !
80021d30:	554e203d 26204c4c 5f5f2026 65646f6e     = NULL && __node
80021d40:	6e693e2d 73706f5f 203d2120 4c4c554e     ->in_ops != NULL
80021d50:	20262620 6f6e5f5f 3e2d6564 6f5f6e69      && __node->in_o
80021d60:	3e2d7370 5f706f76 656d616e 656c6966     ps->vop_namefile
80021d70:	203d2120 4c4c554e 00000000 656d616e      != NULL....name
80021d80:	656c6966 00000000 6d746962 632e7061     file....bitmap.c
80021d90:	00000000 65646e69 203c2078 6d746962     ....index < bitm
80021da0:	3e2d7061 7469626e 00000073 7469626e     ap->nbits...nbit
80021db0:	3d212073 26203020 626e2026 20737469     s != 0 && nbits 
80021dc0:	4f57202b 425f4452 20535449 626e203e     + WORD_BITS > nb
80021dd0:	00737469 7469626e 202f2073 44524f57     its.nbits / WORD
80021de0:	5449425f 3d3d2053 00786920 7265766f     _BITS == ix.over
80021df0:	73746962 30203e20 20262620 7265766f     bits > 0 && over
80021e00:	73746962 57203c20 5f44524f 53544942     bits < WORD_BITS
80021e10:	00000000 772a2821 2064726f 616d2026     ....!(*word & ma
80021e20:	00296b73 00736673 2e736673 00000063     sk).sfs.sfs.c...
80021e30:	6c696166 203a6465 3a736673 67657220     failed: sfs: reg
80021e40:	65747369 69665f72 7973656c 6d657473     ister_filesystem
80021e50:	6525203a 00000a2e 6c696166 203a6465     : %e....failed: 
80021e60:	3a736673 73667320 756f6d5f 203a746e     sfs: sfs_mount: 
80021e70:	0a2e6525 00000000 5f736673 632e7366     %e......sfs_fs.c
80021e80:	00000000 73665f5f 203d2120 4c4c554e     ....__fs != NULL
80021e90:	20262620 63656863 73665f6b 7079745f      && check_fs_typ
80021ea0:	5f5f2865 202c7366 29736673 00000000     e(__fs, sfs)....
80021eb0:	3a736673 6f727720 6d20676e 63696761     sfs: wrong magic
80021ec0:	206e6920 65707573 6f6c6272 202e6b63      in superblock. 
80021ed0:	38302528 68732078 646c756f 20656220     (%08x should be 
80021ee0:	78383025 000a2e29 3a736673 20736620     %08x)...sfs: fs 
80021ef0:	20736168 62207525 6b636f6c 64202c73     has %u blocks, d
80021f00:	63697665 61682065 75252073 6f6c6220     evice has %u blo
80021f10:	2e736b63 0000000a 61746164 203d2120     cks.....data != 
80021f20:	4c4c554e 20262620 206e656c 6e203d3d     NULL && len == n
80021f30:	736b6c62 53202a20 425f5346 49534b4c     blks * SFS_BLKSI
80021f40:	0000455a 3a736673 756f6d20 203a746e     ZE..sfs: mount: 
80021f50:	27732527 64252820 2f64252f 0a296425     '%s' (%d/%d/%d).
80021f60:	00000000 6f6e5f5f 21206564 554e203d     ....__node != NU
80021f70:	26204c4c 5f5f2026 65646f6e 6e693e2d     LL && __node->in
80021f80:	73706f5f 203d2120 4c4c554e 20262620     _ops != NULL && 
80021f90:	6f6e5f5f 3e2d6564 6f5f6e69 3e2d7370     __node->in_ops->
80021fa0:	5f706f76 6e797366 3d212063 4c554e20     vop_fsync != NUL
80021fb0:	0000004c 6e797366 00000063 73667321     L...fsync...!sfs
80021fc0:	75733e2d 5f726570 74726964 00000079     ->super_dirty...
80021fd0:	3a736673 6d6e7520 746e756f 2527203a     sfs: unmount: '%
80021fe0:	28202773 252f6425 64252f64 00000a29     s' (%d/%d/%d)...
80021ff0:	3a736673 6e797320 72652063 3a726f72     sfs: sync error:
80022000:	73252720 25203a27 000a2e65 64616f6c      '%s': %e...load
80022010:	73667320 6f6f7220 61662074 64656c69      sfs root failed
80022020:	6525203a 00000000 5f736673 646f6e69     : %e....sfs_inod
80022030:	00632e65 6f6e5f5f 21206564 554e203d     e.c.__node != NU
80022040:	26204c4c 68632026 5f6b6365 646f6e69     LL && check_inod
80022050:	79745f65 5f286570 646f6e5f 73202c65     e_type(__node, s
80022060:	695f7366 65646f6e 00000029 61766e69     fs_inode)...inva
80022070:	2064696c 656c6966 70797420 64252065     lid file type %d
80022080:	00000a2e 5f736673 636f6c62 6e695f6b     ....sfs_block_in
80022090:	3a657375 6c616320 2064656c 2074756f     use: called out 
800220a0:	7220666f 65676e61 2c302820 29752520     of range (0, %u)
800220b0:	2e752520 0000000a 2d736673 7075733e      %u.....sfs->sup
800220c0:	752e7265 6573756e 6c625f64 736b636f     er.unused_blocks
800220d0:	30203e20 00000000 5f736673 636f6c62      > 0....sfs_bloc
800220e0:	6e695f6b 28657375 2c736673 6e692a20     k_inuse(sfs, *in
800220f0:	74735f6f 2965726f 00000000 65646e69     o_store)....inde
80022100:	203c2078 5f534653 5f4b4c42 544e454e     x < SFS_BLK_NENT
80022110:	00005952 65646e69 3d3c2078 6e696420     RY..index <= din
80022120:	6c623e2d 736b636f 00000000 2d6e6964     ->blocks....din-
80022130:	646e693e 63657269 3d3d2074 00003020     >indirect == 0..
80022140:	2d6e6964 5f62643e 69646e69 74636572     din->db_indirect
80022150:	203d3d20 00000030 206f6e69 30203d3d      == 0...ino == 0
80022160:	207c7c20 5f736673 636f6c62 6e695f6b      || sfs_block_in
80022170:	28657375 2c736673 6f6e6920 00000029     use(sfs, ino)...
80022180:	2d6e6964 7079743e 3d212065 53465320     din->type != SFS
80022190:	5059545f 49445f45 00000052 2d6e6973     _TYPE_DIR...sin-
800221a0:	6e69643e 79743e2d 3d206570 4653203d     >din->type == SF
800221b0:	59545f53 445f4550 26205249 73282026     S_TYPE_DIR && (s
800221c0:	20746f6c 30203d3e 20262620 746f6c73     lot >= 0 && slot
800221d0:	73203c20 3e2d6e69 2d6e6964 6f6c623e      < sin->din->blo
800221e0:	29736b63 00000000 6c727473 6e286e65     cks)....strlen(n
800221f0:	29656d61 203d3c20 5f534653 5f58414d     ame) <= SFS_MAX_
80022200:	4d414e46 454c5f45 0000004e 2d6e6973     FNAME_LEN...sin-
80022210:	6e69643e 79743e2d 3d206570 4653203d     >din->type == SF
80022220:	59545f53 445f4550 26205249 73282026     S_TYPE_DIR && (s
80022230:	20746f6c 30203d3e 20262620 746f6c73     lot >= 0 && slot
80022240:	203d3c20 2d6e6973 6e69643e 6c623e2d      <= sin->din->bl
80022250:	736b636f 00000029 5f736673 636f6c62     ocks)...sfs_bloc
80022260:	6e695f6b 28657375 2c736673 746e6520     k_inuse(sfs, ent
80022270:	26262029 646e6920 3c207865 53465320     ) && index < SFS
80022280:	4b4c425f 4e454e5f 00595254 2d6e6964     _BLK_NENTRY.din-
80022290:	6f6c623e 20736b63 30203d21 00000000     >blocks != 0....
800222a0:	2d6e6973 6365723e 6d69616c 756f635f     sin->reclaim_cou
800222b0:	3e20746e 00003020 646f6e69 65725f65     nt > 0..inode_re
800222c0:	6f635f66 28746e75 65646f6e 3d3d2029     f_count(node) ==
800222d0:	26203020 6e692026 5f65646f 6e65706f      0 && inode_open
800222e0:	756f635f 6e28746e 2965646f 203d3d20     _count(node) == 
800222f0:	00000030 2d6e6973 6e69643e 69643e2d     0...sin->din->di
80022300:	666e6972 6c732e6f 2073746f 30203d21     rinfo.slots != 0
80022310:	20262620 736b6e6c 3e2d6e69 2d6e6964      && lnksin->din-
80022320:	696c6e3e 20736b6e 30203d21 00000000     >nlinks != 0....
80022330:	00002e2e 736b6e6c 3e2d6e69 2d6e6964     ....lnksin->din-
80022340:	696c6e3e 20736b6e 30203d3d 00000000     >nlinks == 0....
80022350:	646f6e69 65725f65 6f635f66 28746e75     inode_ref_count(
80022360:	6b6e696c 646f6e5f 3d202965 2031203d     link_node) == 1 
80022370:	69202626 65646f6e 65706f5f 6f635f6e     && inode_open_co
80022380:	28746e75 6b6e696c 646f6e5f 3d202965     unt(link_node) =
80022390:	0030203d 6b6c6274 3d3d2073 6e696420     = 0.tblks == din
800223a0:	6c623e2d 736b636f 00000000 2d6e6964     ->blocks....din-
800223b0:	6f6c623e 20736b63 74203d3d 736b6c62     >blocks == tblks
800223c0:	00000000 206f6e69 73203d21 3e2d6e69     ....ino != sin->
800223d0:	206f6e69 73202626 3e2d6e69 2d6e6964     ino && sin->din-
800223e0:	7079743e 3d3d2065 53465320 5059545f     >type == SFS_TYP
800223f0:	49445f45 00000052 7461702a 3d212068     E_DIR...*path !=
80022400:	305c2720 26262027 61702a20 21206874      '\0' && *path !
80022410:	2f27203d 00000027 2d6e6973 6e69643e     = '/'...sin->din
80022420:	6c6e3e2d 736b6e69 203d2120 00000030     ->nlinks != 0...
80022430:	5f736673 65726964 6c5f746e 206b6e69     sfs_dirent_link 
80022440:	6f727265 25203a72 000a2e65 5f736673     error: %e...sfs_
80022450:	632e6f69 00000000 6b6c6228 21206f6e     io.c....(blkno !
80022460:	2030203d 21207c7c 63656863 2620296b     = 0 || !check) &
80022470:	6c622026 206f6e6b 6673203c 733e2d73     & blkno < sfs->s
80022480:	72657075 6f6c622e 00736b63 7366666f     uper.blocks.offs
80022490:	3e207465 2030203d 6f202626 65736666     et >= 0 && offse
800224a0:	203c2074 5f534653 534b4c42 20455a49     t < SFS_BLKSIZE 
800224b0:	6f202626 65736666 202b2074 206e656c     && offset + len 
800224c0:	53203d3c 425f5346 49534b4c 0000455a     <= SFS_BLKSIZE..
800224d0:	656c6966 0000632e 735f7366 63757274     file.c..fs_struc
800224e0:	3d212074 4c554e20 2626204c 5f736620     t != NULL && fs_
800224f0:	6e756f63 73662874 7274735f 29746375     count(fs_struct)
80022500:	30203e20 00000000 65706f66 6f635f6e      > 0....fopen_co
80022510:	28746e75 656c6966 3d3d2029 00003020     unt(file) == 0..
80022520:	656c6966 74733e2d 73757461 203d3d20     file->status == 
80022530:	495f4446 2054494e 66207c7c 2d656c69     FD_INIT || file-
80022540:	6174733e 20737574 46203d3d 4c435f44     >status == FD_CL
80022550:	4445534f 00000000 656c6966 74733e2d     OSED....file->st
80022560:	73757461 203d3d20 4f5f4446 454e4550     atus == FD_OPENE
80022570:	7c7c2044 6c696620 733e2d65 75746174     D || file->statu
80022580:	3d3d2073 5f444620 534f4c43 00004445     s == FD_CLOSED..
80022590:	65706f66 6f635f6e 28746e75 656c6966     fopen_count(file
800225a0:	203e2029 00000030 6c696628 733e2d65     ) > 0...(file->s
800225b0:	75746174 3d3d2073 5f444620 54494e49     tatus == FD_INIT
800225c0:	207c7c20 656c6966 74733e2d 73757461      || file->status
800225d0:	203d3d20 4f5f4446 454e4550 26202944      == FD_OPENED) &
800225e0:	69662026 3e2d656c 65646f6e 203d2120     & file->node != 
800225f0:	4c4c554e 00000000 656c6966 74733e2d     NULL....file->st
80022600:	73757461 203d3d20 4f5f4446 454e4550     atus == FD_OPENE
80022610:	00000044 3e2d6f74 74617473 3d207375     D...to->status =
80022620:	4446203d 494e495f 26262054 6f726620     = FD_INIT && fro
80022630:	733e2d6d 75746174 3d3d2073 5f444620     m->status == FD_
80022640:	4e45504f 00004445 3e2d6f74 74617473     OPENED..to->stat
80022650:	3d207375 4446203d 4f4c435f 20444553     us == FD_CLOSED 
80022660:	66202626 2d6d6f72 6174733e 20737574     && from->status 
80022670:	46203d3d 4c435f44 4445534f 00000000     == FD_CLOSED....
80022680:	6f6e5f5f 21206564 554e203d 26204c4c     __node != NULL &
80022690:	5f5f2026 65646f6e 6e693e2d 73706f5f     & __node->in_ops
800226a0:	203d2120 4c4c554e 20262620 6f6e5f5f      != NULL && __no
800226b0:	3e2d6564 6f5f6e69 3e2d7370 5f706f76     de->in_ops->vop_
800226c0:	61747366 3d212074 4c554e20 0000004c     fstat != NULL...
800226d0:	61747366 00000074 6f6e5f5f 21206564     fstat...__node !
800226e0:	554e203d 26204c4c 5f5f2026 65646f6e     = NULL && __node
800226f0:	6e693e2d 73706f5f 203d2120 4c4c554e     ->in_ops != NULL
80022700:	20262620 6f6e5f5f 3e2d6564 6f5f6e69      && __node->in_o
80022710:	3e2d7370 5f706f76 64616572 203d2120     ps->vop_read != 
80022720:	4c4c554e 00000000 64616572 00000000     NULL....read....
80022730:	6f6e5f5f 21206564 554e203d 26204c4c     __node != NULL &
80022740:	5f5f2026 65646f6e 6e693e2d 73706f5f     & __node->in_ops
80022750:	203d2120 4c4c554e 20262620 6f6e5f5f      != NULL && __no
80022760:	3e2d6564 6f5f6e69 3e2d7370 5f706f76     de->in_ops->vop_
80022770:	74697277 3d212065 4c554e20 0000004c     write != NULL...
80022780:	74697277 00000065 6f6e5f5f 21206564     write...__node !
80022790:	554e203d 26204c4c 5f5f2026 65646f6e     = NULL && __node
800227a0:	6e693e2d 73706f5f 203d2120 4c4c554e     ->in_ops != NULL
800227b0:	20262620 6f6e5f5f 3e2d6564 6f5f6e69      && __node->in_o
800227c0:	3e2d7370 5f706f76 73797274 206b6565     ps->vop_tryseek 
800227d0:	4e203d21 004c4c55 73797274 006b6565     != NULL.tryseek.
800227e0:	6f6e5f5f 21206564 554e203d 26204c4c     __node != NULL &
800227f0:	5f5f2026 65646f6e 6e693e2d 73706f5f     & __node->in_ops
80022800:	203d2120 4c4c554e 20262620 6f6e5f5f      != NULL && __no
80022810:	3e2d6564 6f5f6e69 3e2d7370 5f706f76     de->in_ops->vop_
80022820:	64746567 6e657269 20797274 4e203d21     getdirentry != N
80022830:	004c4c55 64746567 6e657269 00797274     ULL.getdirentry.
80022840:	65706970 005f723a 65706970 005f773a     pipe:r_.pipe:w_.
80022850:	735f7366 63757274 3d212074 4c554e20     fs_struct != NUL
80022860:	2626204c 5f736620 6e756f63 73662874     L && fs_count(fs
80022870:	7274735f 29746375 203d3d20 00000030     _struct) == 0...
80022880:	656c6966 64663e2d 0a64253a 00000000     file->fd:%d.....
80022890:	656c6966 74733e2d 73757461 203d3d20     file->status == 
800228a0:	4e5f4446 00454e4f 21206f74 554e203d     FD_NONE.to != NU
800228b0:	26204c4c 72662026 21206d6f 554e203d     LL && from != NU
800228c0:	00004c4c 635f7366 746e756f 296f7428     LL..fs_count(to)
800228d0:	203d3d20 26262030 5f736620 6e756f63      == 0 && fs_coun
800228e0:	72662874 20296d6f 0030203e 75626f69     t(from) > 0.iobu
800228f0:	00632e66 2d626f69 5f6f693e 69736572     f.c.iob->io_resi
80022900:	3d3e2064 00006e20 66737973 2e656c69     d >= n..sysfile.
80022910:	00000063 206e656c 61203d3e 006e656c     c...len >= alen.
80022920:	74697277 203a7665 253d6466 20783830     writev: fd=%08x 
80022930:	3d766f69 78383025 766f6920 3d746e63     iov=%08x iovcnt=
80022940:	000a6425 66737973 5f656c69 756e696c     %d..sysfile_linu
80022950:	63665f78 366c746e 64663a34 3830253d     x_fcntl64:fd=%08
80022960:	6d632078 30253d64 61207838 253d6772     x cmd=%08x arg=%
80022970:	0a783830 00000000 69647473 00003a6e     08x.....stdin:..
80022980:	6f647473 003a7475 6e69622f 0068732f     stdout:./bin/sh.
80022990:	48544150 69622f3d 00002f6e 6e72656b     PATH=/bin/..kern
800229a0:	655f6c65 76636578 70203a65 3d206469     el_execve: pid =
800229b0:	2c642520 6d616e20 203d2065 22732522      %d, name = "%s"
800229c0:	00000a2e 72657375 69616d5f 7865206e     ....user_main ex
800229d0:	65766365 69616620 2c64656c 206f6e20     ecve failed, no 
800229e0:	6e69622f 3f68732f 00000a2e 6d6f682f     /bin/sh?..../hom
800229f0:	736f2f65 2f62616c 755f736f 65726f63     e/oslab/os_ucore
80022a00:	70696d5f 316d5f73 732f6b34 6b2f6372     _mips_m14k/src/k
80022a10:	2d6e7265 726f6375 72612f65 6d2f6863     ern-ucore/arch/m
80022a20:	2f737069 702f6d6d 682e6d6d 00000000     ips/mm/pmm.h....
80022a30:	44444150 61632052 64656c6c 74697720     PADDR called wit
80022a40:	6e692068 696c6176 766b2064 30252061     h invalid kva %0
80022a50:	00786c38 70326170 20656761 6c6c6163     8lx.pa2page call
80022a60:	77206465 20687469 61766e69 2064696c     ed with invalid 
80022a70:	00006170 4444414b 61632052 64656c6c     pa..KADDR called
80022a80:	74697720 6e692068 696c6176 61702064      with invalid pa
80022a90:	38302520 0000786c 636f7270 0000632e      %08lx..proc.c..
80022aa0:	646e6528 6c203c20 26262061 61747320     (end < la && sta
80022ab0:	3d207472 6e65203d 7c202964 6528207c     rt == end) || (e
80022ac0:	3e20646e 616c203d 20262620 72617473     nd >= la && star
80022ad0:	3d3d2074 29616c20 00000000 656c6469     t == la)....idle
80022ae0:	636f7270 69786520 000a2e74 74696e69     proc exit...init
80022af0:	636f7270 69786520 000a2e74 6f645f5f     proc exit...__do
80022b00:	6978655f 69772074 6e206c6c 7220746f     _exit will not r
80022b10:	72757465 2021216e 25206425 000a2e64     eturn!! %d %d...
80022b20:	72727563 2d746e65 6961773e 74735f74     current->wait_st
80022b30:	20657461 30203d3d 00000000 72727563     ate == 0....curr
80022b40:	2d746e65 6d69743e 6c735f65 20656369     ent->time_slice 
80022b50:	30203d3e 00000000 5f646c6f 735f7366     >= 0....old_fs_s
80022b60:	63757274 3d212074 4c554e20 0000004c     truct != NULL...
80022b70:	6c756e3c 25203e6c 00000064 63677261     <null> %d...argc
80022b80:	203d3e20 26262030 67726120 3d3c2063      >= 0 && argc <=
80022b90:	45584520 414d5f43 52415f58 554e5f47      EXEC_MAX_ARG_NU
80022ba0:	0000004d 63766e65 203d3e20 26262030     M...envc >= 0 &&
80022bb0:	766e6520 3d3c2063 45584520 414d5f43      envc <= EXEC_MA
80022bc0:	4e455f58 554e5f56 0000004d 64616f6c     X_ENV_NUM...load
80022bd0:	6f63695f 203a6564 72727563 2d746e65     _icode: current-
80022be0:	206d6d3e 7473756d 20656220 74706d65     >mm must be empt
80022bf0:	000a2e79 64616f6c 64646120 73736572     y...load address
80022c00:	7830203a 78383025 7a697320 25203a65     : 0x%08x size: %
80022c10:	00000a64 65746e69 665f7072 3d3e2064     d...interp_fd >=
80022c20:	00003020 74657228 6c203d20 5f64616f      0..(ret = load_
80022c30:	646f6369 65725f65 69286461 7265746e     icode_read(inter
80022c40:	64665f70 6e69202c 70726574 666c655f     p_fd, interp_elf
80022c50:	6973202c 666f657a 72747328 20746375     , sizeof(struct 
80022c60:	68666c65 2c297264 29293020 203d3d20     elfhdr), 0)) == 
80022c70:	00000030 65746e69 655f7072 3e2d666c     0...interp_elf->
80022c80:	616d5f65 20636967 45203d3d 4d5f464c     e_magic == ELF_M
80022c90:	43494741 00000000 74657228 6c203d20     AGIC....(ret = l
80022ca0:	5f64616f 646f6369 65725f65 69286461     oad_icode_read(i
80022cb0:	7265746e 64665f70 6e69202c 70726574     nterp_fd, interp
80022cc0:	2c68705f 7a697320 28666f65 75727473     _ph, sizeof(stru
80022cd0:	70207463 68676f72 2c297264 746e6920     ct proghdr), int
80022ce0:	5f707265 666f6870 20292966 30203d3d     erp_phoff)) == 0
80022cf0:	00000000 74657228 6d203d20 705f7061     ....(ret = map_p
80022d00:	6e692868 70726574 2c64665f 746e6920     h(interp_fd, int
80022d10:	5f707265 202c6870 202c6d6d 61696226     erp_ph, mm, &bia
80022d20:	31202c73 3d202929 0030203d 74696177     s, 1)) == 0.wait
80022d30:	6c646920 6f727065 726f2063 696e6920      idleproc or ini
80022d40:	6f727074 000a2e63 6b736964 00003a30     tproc...disk0:..
80022d50:	20746573 746f6f62 20736620 6c696166     set boot fs fail
80022d60:	203a6465 0a2e6525 00000000 61657263     ed: %e......crea
80022d70:	75206574 5f726573 6e69616d 69616620     te user_main fai
80022d80:	2e64656c 0000000a 206c6c61 72657375     led.....all user
80022d90:	646f6d2d 72702065 7365636f 20736573     -mode processes 
80022da0:	65766168 69757120 000a2e74 705f726e     have quit...nr_p
80022db0:	65636f72 3d207373 2031203d 6c70202b     rocess == 1 + pl
80022dc0:	65725f73 6c286461 5f757063 6e756f63     s_read(lcpu_coun
80022dd0:	00002974 755f726e 5f646573 65676170     t)..nr_used_page
80022de0:	74735f73 2065726f 6e203d3d 73755f72     s_store == nr_us
80022df0:	705f6465 73656761 00002928 62616c73     ed_pages()..slab
80022e00:	6c6c615f 7461636f 735f6465 65726f74     _allocated_store
80022e10:	203d3d20 62616c73 6c6c615f 7461636f      == slab_allocat
80022e20:	29286465 00000000 74696e69 65686320     ed()....init che
80022e30:	6d206b63 726f6d65 61702079 0a2e7373     ck memory pass..
80022e40:	00000000 6e72656b 74206c65 61657268     ....kernel threa
80022e50:	61632064 73206c6c 625f7379 21216b72     d call sys_brk!!
80022e60:	00000a2e 62646c6f 25206b72 53475020     ....oldbrk % PGS
80022e70:	20455a49 30203d3d 00000000 6f637521     IZE == 0....!uco
80022e80:	695f6572 6e695f6e 72726574 28747075     re_in_interrupt(
80022e90:	00000029 6e72656b 74206c65 61657268     )...kernel threa
80022ea0:	61632064 6d206c6c 2170616d 000a2e21     d call mmap!!...
80022eb0:	6e72656b 74206c65 61657268 61632064     kernel thread ca
80022ec0:	6d206c6c 616d6e75 2e212170 0000000a     ll munmap!!.....
80022ed0:	656d6873 65725f6d 68732866 296d656d     shmem_ref(shmem)
80022ee0:	203d3d20 00000030 6e6e6163 6120746f      == 0...cannot a
80022ef0:	636f6c6c 6c646920 6f727065 000a2e63     lloc idleproc...
80022f00:	61657263 66206574 74735f73 74637572     create fs_struct
80022f10:	64692820 7270656c 2029636f 6c696166      (idleproc) fail
80022f20:	0a2e6465 00000000 656c6469 0064252f     ed......idle/%d.
80022f30:	61657263 69206574 5f74696e 6e69616d     create init_main
80022f40:	69616620 2e64656c 0000000a 696e696b      failed.....kini
80022f50:	00000074 656c6469 636f7270 203d2120     t...idleproc != 
80022f60:	4c4c554e 20262620 656c6469 636f7270     NULL && idleproc
80022f70:	69703e2d 3d3d2064 70636c20 64695f75     ->pid == lcpu_id
80022f80:	00000078 74696e69 636f7270 203d2120     x...initproc != 
80022f90:	4c4c554e 20262620 74696e69 636f7270     NULL && initproc
80022fa0:	69703e2d 3d3d2064 70636c20 6f635f75     ->pid == lcpu_co
80022fb0:	00746e75 6e676973 632e6c61 00000000     unt.signal.c....
80022fc0:	20676973 4e203d21 204c4c55 73202626     sig != NULL && s
80022fd0:	616e6769 6f635f6c 28746e75 29676973     ignal_count(sig)
80022fe0:	203d3d20 00000030 21206873 554e203d      == 0...sh != NU
80022ff0:	26204c4c 69732026 6e616867 6f635f64     LL && sighand_co
80023000:	28746e75 20296873 30203d3d 00000000     unt(sh) == 0....
80023010:	5f746567 63286973 65727275 2d29746e     get_si(current)-
80023020:	6769733e 646e6168 00000000 5f746567     >sighand....get_
80023030:	63286973 65727275 2d29746e 6769733e     si(current)->sig
80023040:	006c616e 61727421 6e695f70 72656b5f     nal.!trap_in_ker
80023050:	286c656e 00296674 21206d6d 554e203d     nel(tf).mm != NU
80023060:	00004c4c 656d6873 00632e6d 76657270     LL..shmem.c.prev
80023070:	74733e2d 20747261 7270203c 3e2d7665     ->start < prev->
80023080:	00646e65 70657470 203d2120 4c4c554e     end.ptep != NULL
80023090:	00000000 32657470 65676170 6c616320     ....pte2page cal
800230a0:	2064656c 68746977 766e6920 64696c61     led with invalid
800230b0:	65747020 00000000 72646461 73203c20      pte....addr < s
800230c0:	6d656d68 656c3e2d 0000006e 6e6d6873     hmem->len...shmn
800230d0:	203d3d20 4c4c554e 207c7c20 6d687328      == NULL || (shm
800230e0:	733e2d6e 74726174 203d3c20 72646461     n->start <= addr
800230f0:	20262620 72646461 73203c20 2d6e6d68      && addr < shmn-
80023100:	646e653e 00000029 76657270 6e653e2d     >end)...prev->en
80023110:	3d3c2064 78656e20 733e2d74 74726174     d <= next->start
80023120:	00000000 7478656e 74733e2d 20747261     ....next->start 
80023130:	656e203c 3e2d7478 00646e65 2e6d6d76     < next->end.vmm.
80023140:	00000063 72617473 20252074 49534750     c...start % PGSI
80023150:	3d20455a 2030203d 65202626 2520646e     ZE == 0 && end %
80023160:	53475020 20455a49 30203d3d 00000000      PGSIZE == 0....
80023170:	2d616d76 5f6d763e 72617473 3d3c2074     vma->vm_start <=
80023180:	61747320 26207472 74732026 20747261      start && start 
80023190:	6e65203c 26262064 646e6520 203d3c20     < end && end <= 
800231a0:	2d616d76 5f6d763e 00646e65 76657270     vma->vm_end.prev
800231b0:	6d763e2d 6174735f 3c207472 65727020     ->vm_start < pre
800231c0:	763e2d76 6e655f6d 00000064 2d616d76     v->vm_end...vma-
800231d0:	5f6d763e 72617473 203c2074 2d616d76     >vm_start < vma-
800231e0:	5f6d763e 00646e65 76657270 6d763e2d     >vm_end.prev->vm
800231f0:	646e655f 203d3c20 7478656e 6d763e2d     _end <= next->vm
80023200:	6174735f 00007472 7478656e 6d763e2d     _start..next->vm
80023210:	6174735f 3c207472 78656e20 763e2d74     _start < next->v
80023220:	6e655f6d 00000064 635f6d6d 746e756f     m_end...mm_count
80023230:	296d6d28 203d3d20 00000030 20616d76     (mm) == 0...vma 
80023240:	4e203d21 004c4c55 2120656c 2826203d     != NULL.le != &(
80023250:	3e2d6d6d 70616d6d 73696c5f 00002974     mm->mmap_list)..
80023260:	70616d6d 6d763e2d 6174735f 3d207472     mmap->vm_start =
80023270:	2069203d 2035202a 6d202626 2d70616d     = i * 5 && mmap-
80023280:	5f6d763e 20646e65 69203d3d 35202a20     >vm_end == i * 5
80023290:	32202b20 00000000 2d616d76 5f6d763e      + 2....vma->vm_
800232a0:	72617473 3d3d2074 2a206a20 26203520     start == j * 5 &
800232b0:	6d762026 763e2d61 6e655f6d 3d3d2064     & vma->vm_end ==
800232c0:	2a206a20 2b203520 00003220 63656863      j * 5 + 2..chec
800232d0:	6d765f6b 74735f61 74637572 73202928     k_vma_struct() s
800232e0:	65636375 64656465 00000a21 63656863     ucceeded!...chec
800232f0:	6d765f6b 2029286d 63637573 65646565     k_vmm() succeede
80023300:	000a2e64 3d206d6d 6d76203d 763e2d61     d...mm == vma->v
80023310:	6d6d5f6d 00000000 21206d6d 554e203d     m_mm....mm != NU
80023320:	26204c4c 6d6d2026 756f635f 6d28746e     LL && mm_count(m
80023330:	3d20296d 0030203d 72727563 20746e65     m) == 0.current 
80023340:	4e203d21 004c4c55 65676170 75616620     != NULL.page fau
80023350:	6920746c 656b206e 6c656e72 72687420     lt in kernel thr
80023360:	3a646165 64697020 25203d20 6e202c64     ead: pid = %d, n
80023370:	20656d61 7325203d 6425202c 38302520     ame = %s, %d %08
80023380:	000a2e78 53204f4e 0a504157 00000000     x...NO SWAP.....
80023390:	25207025 64252070 20642520 000a7825     %p %p %d %d %x..
800233a0:	62616c73 0000632e 20746f6e 6c732061     slab.c..not a sl
800233b0:	70206261 20656761 78383025 0000000a     ab page %08x....
800233c0:	65676150 62616c53 00297028 6f746567     PageSlab(p).geto
800233d0:	72656472 69616620 2e64656c 0a642520     rder failed. %d.
800233e0:	00000000 6e756f66 0a213264 00000000     ....found2!.....
800233f0:	5f66666f 62616c73 626f203a 7a69736a     off_slab: objsiz
80023400:	203d2065 202c6425 206d756e 3025203d     e = %d, num = %0
80023410:	6f207838 735f6666 5f62616c 696d696c     8x off_slab_limi
80023420:	203d2074 78383025 0000002e 636c6163     t = %08x....calc
80023430:	74616c75 6c735f65 6f5f6261 3a726576     ulate_slab_over:
80023440:	69616620 2e64656c 00000000 6c616d6b      failed.....kmal
80023450:	5f636f6c 74696e69 73202928 65636375     loc_init() succe
80023460:	64656465 00000a21 657a6973 30203e20     eded!...size > 0
80023470:	00000000 745f6272 2e656572 00000063     ....rb_tree.c...
80023480:	3d212078 65727420 723e2d65 20746f6f     x != tree->root 
80023490:	78202626 203d2120 206c696e 79202626     && x != nil && y
800234a0:	203d2120 006c696e 696e2821 723e2d6c      != nil.!(nil->r
800234b0:	00296465 20746572 4e203d21 004c4c55     ed).ret != NULL.
800234c0:	706d6f63 20657261 4e203d21 004c4c55     compare != NULL.
800234d0:	72742821 3e2d6565 2d6c696e 6465723e     !(tree->nil->red
800234e0:	26262029 74282120 2d656572 6f6f723e     ) && !(tree->roo
800234f0:	723e2d74 00296465 3d212079 6f6f7220     t->red).y != roo
80023500:	26262074 21207920 696e203d 0000006c     t && y != nil...
80023510:	646f6e21 723e2d65 00006465 504d4f43     !node->red..COMP
80023520:	28455241 65657274 6f6e202c 202c6564     ARE(tree, node, 
80023530:	65646f6e 656c3e2d 20297466 30203d3e     node->left) >= 0
80023540:	00000000 65646f6e 656c3e2d 3e2d7466     ....node->left->
80023550:	65726170 3d20746e 6f6e203d 00006564     parent == node..
80023560:	504d4f43 28455241 65657274 6f6e202c     COMPARE(tree, no
80023570:	202c6564 65646f6e 69723e2d 29746867     de, node->right)
80023580:	203d3c20 00000030 65646f6e 69723e2d      <= 0...node->ri
80023590:	2d746867 7261703e 20746e65 6e203d3d     ght->parent == n
800235a0:	0065646f 646f6e21 6c3e2d65 2d746665     ode.!node->left-
800235b0:	6465723e 20262620 646f6e21 723e2d65     >red && !node->r
800235c0:	74686769 65723e2d 00000064 6c5f6268     ight->red...hb_l
800235d0:	20746665 68203d3d 69725f62 00746867     eft == hb_right.
800235e0:	65657274 203d2120 4c4c554e 00000000     tree != NULL....
800235f0:	6c696e21 65723e2d 26262064 6f6f7220     !nil->red && roo
80023600:	6c3e2d74 20746665 6e203d3d 00006c69     t->left == nil..
80023610:	6b72616d 205d695b 31203d3d 00000000     mark[i] == 1....
80023620:	65646f6e 203d2120 4c4c554e 20262620     node != NULL && 
80023630:	65646f6e 203d3d20 6c612826 5d695b6c     node == &(all[i]
80023640:	62723e2d 6e696c5f 0000296b 65646f6e     ->rb_link)..node
80023650:	203d2120 4c4c554e 20262620 326e6272      != NULL && rbn2
80023660:	61746164 646f6e28 3e2d2965 61746164     data(node)->data
80023670:	203d3d20 00000069 65646f6e 203d2120      == i...node != 
80023680:	4c4c554e 20262620 326e6272 61746164     NULL && rbn2data
80023690:	646f6e28 3e2d2965 61746164 203d3d20     (node)->data == 
800236a0:	0078616d 745f6272 5f656572 74706d65     max.rb_tree_empt
800236b0:	72742879 00296565 00007325 33323130     y(tree).%s..0123
800236c0:	37363534 62613938 66656463 00000000     456789abcdef....
800236d0:	6c756e28 0000296c 6f727265 64252072     (null)..error %d
800236e0:	00000000 7265704f 6f697461 6f6e206e     ....Operation no
800236f0:	65702074 74696d72 00646574 73206f4e     t permitted.No s
80023700:	20686375 656c6966 20726f20 65726964     uch file or dire
80023710:	726f7463 00000079 73206f4e 20686375     ctory...No such 
80023720:	636f7270 00737365 65746e49 70757272     process.Interrup
80023730:	20646574 74737973 63206d65 006c6c61     ted system call.
80023740:	204f2f49 6f727265 00000072 73206f4e     I/O error...No s
80023750:	20686375 69766564 6f206563 64612072     uch device or ad
80023760:	73657264 00000073 75677241 746e656d     dress...Argument
80023770:	73696c20 6f742074 6f6c206f 0000676e      list too long..
80023780:	63657845 726f6620 2074616d 6f727265     Exec format erro
80023790:	00000072 20646142 656c6966 6d756e20     r...Bad file num
800237a0:	00726562 63206f4e 646c6968 6f727020     ber.No child pro
800237b0:	73736563 00007365 20797254 69616761     cesses..Try agai
800237c0:	0000006e 2074754f 6d20666f 726f6d65     n...Out of memor
800237d0:	00000079 6d726550 69737369 64206e6f     y...Permission d
800237e0:	65696e65 00000064 20646142 72646461     enied...Bad addr
800237f0:	00737365 636f6c42 6564206b 65636976     ess.Block device
80023800:	71657220 65726975 00000064 69766544      required...Devi
80023810:	6f206563 65722072 72756f73 62206563     ce or resource b
80023820:	00797375 656c6946 69786520 00737473     usy.File exists.
80023830:	736f7243 65642d73 65636976 6e696c20     Cross-device lin
80023840:	0000006b 73206f4e 20686375 69766564     k...No such devi
80023850:	00006563 20746f4e 69642061 74636572     ce..Not a direct
80023860:	0079726f 61207349 72696420 6f746365     ory.Is a directo
80023870:	00007972 61766e49 2064696c 75677261     ry..Invalid argu
80023880:	746e656d 00000000 656c6946 62617420     ment....File tab
80023890:	6f20656c 66726576 00776f6c 206f6f54     le overflow.Too 
800238a0:	796e616d 65706f20 6966206e 0073656c     many open files.
800238b0:	20746f4e 79742061 72776570 72657469     Not a typewriter
800238c0:	00000000 74786554 6c696620 75622065     ....Text file bu
800238d0:	00007973 656c6946 6f6f7420 72616c20     sy..File too lar
800238e0:	00006567 73206f4e 65636170 66656c20     ge..No space lef
800238f0:	6e6f2074 76656420 00656369 656c6c49     t on device.Ille
80023900:	206c6167 6b656573 00000000 64616552     gal seek....Read
80023910:	6c6e6f2d 69662079 7320656c 65747379     -only file syste
80023920:	0000006d 206f6f54 796e616d 6e696c20     m...Too many lin
80023930:	0000736b 6b6f7242 70206e65 00657069     ks..Broken pipe.
80023940:	6874614d 67726120 6e656d75 756f2074     Math argument ou
80023950:	666f2074 6d6f6420 206e6961 6620666f     t of domain of f
80023960:	00636e75 6874614d 73657220 20746c75     unc.Math result 
80023970:	20746f6e 72706572 6e657365 6c626174     not representabl
80023980:	00000065 6d696e55 6d656c70 65746e65     e...Unimplemente
80023990:	65462064 72757461 00000065 696e6150     d Feature...Pani
800239a0:	61462063 72756c69 00000065 636f7250     c Failure...Proc
800239b0:	20737365 6b207369 656c6c69 00000064     ess is killed...
800239c0:	70736e55 66696365 20646569 7520726f     Unspecified or u
800239d0:	6f6e6b6e 70206e77 6c626f72 00006d65     nknown problem..
800239e0:	50415753 41455220 52572f44 20455449     SWAP READ/WRITE 
800239f0:	6c756166 00000074 2e6d6d70 00000063     fault...pmm.c...
80023a00:	52455355 4343415f 28535345 72617473     USER_ACCESS(star
80023a10:	65202c74 0029646e 72617473 3d3e2074     t, end).start >=
80023a20:	26203020 74732026 20747261 6e65203c      0 && start < en
80023a30:	26262064 646e6520 203d3c20 49535450     d && end <= PTSI
80023a40:	0000455a 6574702a 3d212070 26203020     ZE..*ptep != 0 &
80023a50:	6e2a2026 70657470 203d3d20 00000030     & *nptep == 0...
80023a60:	20746572 30203d3d 00000000 6e657665     ret == 0....even
80023a70:	00632e74 67616c66 3d3d2073 5f545720     t.c.flags == WT_
80023a80:	45544e49 50555252 00444554 786f626d     INTERRUPTED.mbox
80023a90:	0000632e 786f626d 74733e2d 20657461     .c..mbox->state 
80023aa0:	43203d3d 49534f4c 2620474e 626d2026     == CLOSING && mb
80023ab0:	3e2d786f 73756e69 3d3d2065 00003020     ox->inuse == 0..
80023ac0:	7473696c 706d655f 26287974 6f626d28     list_empty(&(mbo
80023ad0:	6d3e2d78 6c5f6773 296b6e69 00000029     x->msg_link))...
80023ae0:	74696177 6575715f 655f6575 7974706d     wait_queue_empty
80023af0:	6d282628 2d786f62 6e65733e 73726564     (&(mbox->senders
80023b00:	00002929 74696177 6575715f 655f6575     ))..wait_queue_e
80023b10:	7974706d 6d282628 2d786f62 6365723e     mpty(&(mbox->rec
80023b20:	65766965 29297372 00000000 786f626d     eivers))....mbox
80023b30:	74733e2d 20657461 4f203d3d 454e4550     ->state == OPENE
80023b40:	00000044 73696c21 6d655f74 28797470     D...!list_empty(
80023b50:	65726626 626d5f65 6c5f786f 29747369     &free_mbox_list)
80023b60:	00000000 786f626d 74733e2d 20657461     ....mbox->state 
80023b70:	4f203d3d 454e4550 26262044 6f626d20     == OPENED && mbo
80023b80:	6d3e2d78 735f7861 73746f6c 6d203e20     x->max_slots > m
80023b90:	2d786f62 6f6c733e 00007374 20746572     box->slots..ret 
80023ba0:	30203d21 20262620 786f626d 74733e2d     != 0 && mbox->st
80023bb0:	20657461 43203d3d 49534f4c 0000474e     ate == CLOSING..
80023bc0:	786f626d 74733e2d 20657461 4f203d3d     mbox->state == O
80023bd0:	454e4550 26262044 6f626d20 733e2d78     PENED && mbox->s
80023be0:	73746f6c 30203e20 00000000 73696c21     lots > 0....!lis
80023bf0:	6d655f74 28797470 626d2826 3e2d786f     t_empty(&(mbox->
80023c00:	5f67736d 6b6e696c 00002929 20676573     msg_link))..seg 
80023c10:	4e203d21 004c4c55 2e6d6573 00000063     != NULL.sem.c...
80023c20:	2d6d6573 6c61763e 00006469 74696177     sem->valid..wait
80023c30:	72703e2d 3e2d636f 74696177 6174735f     ->proc->wait_sta
80023c40:	3d206574 6177203d 735f7469 65746174     te == wait_state
80023c50:	00000000 67616c66 3d3d2073 00003020     ....flags == 0..
80023c60:	5f6d6573 75657571 3d212065 4c554e20     sem_queue != NUL
80023c70:	2626204c 6d657320 6575715f 635f6575     L && sem_queue_c
80023c80:	746e756f 6d657328 6575715f 20296575     ount(sem_queue) 
80023c90:	30203d3d 00000000 72727563 2d746e65     == 0....current-
80023ca0:	6d65733e 6575715f 21206575 554e203d     >sem_queue != NU
80023cb0:	00004c4c 74696177 0000632e 7473696c     LL..wait.c..list
80023cc0:	706d655f 26287974 69617728 773e2d74     _empty(&(wait->w
80023cd0:	5f746961 6b6e696c 26202929 61772026     ait_link)) && wa
80023ce0:	3e2d7469 636f7270 203d2120 4c4c554e     it->proc != NULL
80023cf0:	00000000 73696c21 6d655f74 28797470     ....!list_empty(
80023d00:	61772826 3e2d7469 74696177 6e696c5f     &(wait->wait_lin
80023d10:	2029296b 77202626 2d746961 6961773e     k)) && wait->wai
80023d20:	75715f74 20657565 71203d3d 65756575     t_queue == queue
80023d30:	00000000 63657053 206c6169 6e72656b     ....Special kern
80023d40:	73206c65 6f626d79 0a3a736c 00000000     el symbols:.....
80023d50:	6e652020 20797274 00783020 68702820       entry  0x. (ph
80023d60:	0a297379 00000000 74652020 09747865     ys).....  etext.
80023d70:	00007830 64652020 09617461 00007830     0x..  edata.0x..
80023d80:	6e652020 78300964 00000000 6e72654b       end.0x....Kern
80023d90:	65206c65 75636578 6c626174 656d2065     el executable me
80023da0:	79726f6d 6f6f6620 69727074 203a746e     mory footprint: 
80023db0:	00000000 000a424b 6265646b 632e6775     ....KB..kdebug.c
80023dc0:	00000000 6d696e55 00006c70 706c6568     ....Unimpl..help
80023dd0:	00000000 00202d20 70736944 2079616c     .... - .Display 
80023de0:	73696874 73696c20 666f2074 6d6f6320     this list of com
80023df0:	646e616d 00002e73 6e72656b 6f666e69     mands...kerninfo
80023e00:	00000000 70736944 2079616c 6f666e69     ....Display info
80023e10:	74616d72 206e6f69 756f6261 68742074     rmation about th
80023e20:	656b2065 6c656e72 0000002e 636c6557     e kernel....Welc
80023e30:	20656d6f 74206f74 6b206568 656e7265     ome to the kerne
80023e40:	6564206c 20677562 696e6f6d 21726f74     l debug monitor!
80023e50:	00000a21 65707954 65682720 2027706c     !...Type 'help' 
80023e60:	20726f66 696c2061 6f207473 6f632066     for a list of co
80023e70:	6e616d6d 0a2e7364 00000000 00203e4b     mmands......K> .
80023e80:	0d0a0920 00000000 206f6f54 796e616d      .......Too many
80023e90:	67726120 6e656d75 0a2e7374 00000000      arguments......
80023ea0:	6e6b6e55 206e776f 6d6d6f63 20646e61     Unknown command 
80023eb0:	00000027 00000a27 6e72656b 70206c65     '...'...kernel p
80023ec0:	63696e61 20746120 253a7325 200a3a64     anic at %s:%d:. 
80023ed0:	00202020 6e72656b 77206c65 696e7261        .kernel warni
80023ee0:	6120676e 73252074 3a64253a 2020200a     ng at %s:%d:.   
80023ef0:	00000020 65732b2b 20707574 656d6974      ...++setup time
80023f00:	6e692072 72726574 73747075 0000000a     r interrupts....
80023f10:	69726573 70206c61 2074726f 73656f64     serial port does
80023f20:	746f6e20 69786520 21217473 0000000a      not exist!!....
80023f30:	69636970 632e7172 00000000 20717269     picirq.c....irq 
80023f40:	0038203c 646d6172 5f6b7369 74696e69     < 8.ramdisk_init
80023f50:	203a2928 74696e69 66206472 646e756f     (): initrd found
80023f60:	616d202c 3a636967 25783020 2c783830     , magic: 0x%08x,
80023f70:	25783020 20783830 73636573 0000000a      0x%08x secs....
80023f80:	6e726157 3a676e69 206f4e20 74696e49     Warning: No Init
80023f90:	0a216472 00000000 74696e49 203a6472     rd!.....Initrd: 
80023fa0:	30257830 2d207838 25783020 2c783830     0x%08x - 0x%08x,
80023fb0:	7a697320 30203a65 38302578 6d202c78      size: 0x%08x, m
80023fc0:	63696761 7830203a 78383025 0000000a     agic: 0x%08x....
80023fd0:	646d6172 2e6b7369 00000063 54494e49     ramdisk.c...INIT
80023fe0:	535f4452 28455a49 20252029 54434553     RD_SIZE() % SECT
80023ff0:	455a4953 203d3d20 00000030 4e52454b     SIZE == 0...KERN
80024000:	494e495f 00445254 55485428 5453432e     _INITRD.(THU.CST
80024010:	736f2029 20736920 64616f6c 20676e69     ) os is loading 
80024020:	0a2e2e2e 000d0a0d 64647562 6d705f79     ........buddy_pm
80024030:	00632e6d 203e206e 26262030 6e6f7a20     m.c.n > 0 && zon
80024040:	756e5f65 203c206d 5f58414d 454e4f5a     e_num < MAX_ZONE
80024050:	4d554e5f 00000000 65676150 65736552     _NUM....PageRese
80024060:	64657672 00297028 203e206e 00000030     rved(p).n > 0...
80024070:	65676150 706f7250 79747265 20297028     PageProperty(p) 
80024080:	70202626 72703e2d 7265706f 3d207974     && p->property =
80024090:	0069203d 61746f74 3d3d206c 5f726e20     = i.total == nr_
800240a0:	65657266 6761705f 29287365 00000000     free_pages()....
800240b0:	21203070 554e203d 00004c4c 67617028     p0 != NULL..(pag
800240c0:	64693265 30702878 20262029 3d202937     e2idx(p0) & 7) =
800240d0:	0030203d 67615021 6f725065 74726570     = 0.!PagePropert
800240e0:	30702879 00000029 6f6c6c61 61705f63     y(p0)...alloc_pa
800240f0:	29286567 203d3d20 4c4c554e 00000000     ge() == NULL....
80024100:	665f726e 5f656572 65676170 20292873     nr_free_pages() 
80024110:	38203d3d 00000000 65676150 706f7250     == 8....PageProp
80024120:	79747265 29307028 20262620 3e2d3070     erty(p0) && p0->
80024130:	706f7270 79747265 203d3d20 00000033     property == 3...
80024140:	20307028 6c61203d 5f636f6c 65676170     (p0 = alloc_page
80024150:	29362873 3d212029 4c554e20 2626204c     s(6)) != NULL &&
80024160:	61502120 72506567 7265706f 70287974      !PageProperty(p
80024170:	26202930 726e2026 6572665f 61705f65     0) && nr_free_pa
80024180:	28736567 3d3d2029 00003220 20317028     ges() == 2..(p1 
80024190:	6c61203d 5f636f6c 65676170 29322873     = alloc_pages(2)
800241a0:	3d212029 4c554e20 2626204c 20317020     ) != NULL && p1 
800241b0:	70203d3d 202b2030 00000036 65676150     == p0 + 6...Page
800241c0:	706f7250 79747265 29307028 20262620     Property(p0) && 
800241d0:	3e2d3070 706f7270 79747265 203d3d20     p0->property == 
800241e0:	00000031 65676150 706f7250 79747265     1...PageProperty
800241f0:	20307028 2932202b 20262620 325b3070     (p0 + 2) && p0[2
80024200:	72702e5d 7265706f 3d207974 0030203d     ].property == 0.
80024210:	20307028 6c61203d 5f636f6c 65676170     (p0 = alloc_page
80024220:	29362873 3d212029 4c554e20 0000004c     s(6)) != NULL...
80024230:	20317028 6c61203d 5f636f6c 65676170     (p1 = alloc_page
80024240:	29322873 3d212029 4c554e20 0000004c     s(2)) != NULL...
80024250:	65676150 706f7250 79747265 29317028     PageProperty(p1)
80024260:	20262620 3e2d3170 706f7270 79747265      && p1->property
80024270:	203d3d20 00000032 20307028 6c61203d      == 2...(p0 = al
80024280:	5f636f6c 65676170 29382873 3d212029     loc_pages(8)) !=
80024290:	4c554e20 0000004c 6f6c6c61 61705f63      NULL...alloc_pa
800242a0:	29286567 203d3d20 4c4c554e 20262620     ge() == NULL && 
800242b0:	665f726e 5f656572 65676170 20292873     nr_free_pages() 
800242c0:	30203d3d 00000000 6e756f63 3d3d2074     == 0....count ==
800242d0:	00003020 61746f74 3d3d206c 00003020      0..total == 0..
800242e0:	67617028 64695f65 20262078 20312828     (page_idx & ((1 
800242f0:	6f203c3c 72656472 202d2029 20292931     << order) - 1)) 
80024300:	30203d3d 00000000 67615021 73655265     == 0....!PageRes
80024310:	65767265 29702864 20262620 67615021     erved(p) && !Pag
80024320:	6f725065 74726570 29702879 00000000     eProperty(p)....
80024330:	6564726f 3d3c2072 58414d20 44524f5f     order <= MAX_ORD
80024340:	00005245 64647562 6d705f79 616d5f6d     ER..buddy_pmm_ma
80024350:	6567616e 00000072 2d2d2d2d 2d2d2d2d     nager...--------
80024360:	2d2d2d2d 2d2d2d2d 47415020 69442045     -------- PAGE Di
80024370:	74636572 2079726f 49474542 2d2d204e     rectory BEGIN --
80024380:	2d2d2d2d 2d2d2d2d 2d2d2d2d 000a2d2d     --------------..
80024390:	28454450 00000000 00002029 0000002d     PDE(....) ..-...
800243a0:	2d7c2020 5450202d 00002845 2d2d2d2d       |-- PTE(..----
800243b0:	2d2d2d2d 2d2d2d2d 2d2d2d2d 47415020     ------------ PAG
800243c0:	69442045 74636572 2079726f 20444e45     E Directory END 
800243d0:	2d2d2d2d 2d2d2d2d 2d2d2d2d 2d2d2d2d     ----------------
800243e0:	000a2d2d 6f6d656d 6d207972 67616e61     --..memory manag
800243f0:	6e656d65 00203a74 6f6d656d 6d207972     ement: .memory m
80024400:	0a3a7061 0000000d 20202020 0078305b     ap:.....    [0x.
80024410:	7830202c 00000000 0a0d0a5d 0000000d     , 0x....].......
80024420:	65657266 206d656d 72617473 74612074     freemem start at
80024430:	0a78253a 0000000d 6765626d 3c206e69     :%x.....mbegin <
80024440:	6e656d20 00000064 65657266 67617020      mend...free pag
80024450:	203a7365 00000000 65676170 72747320     es: ....page str
80024460:	75746375 73206572 3a657a69 00000020     ucture size: ...
80024470:	63656863 6c615f6b 5f636f6c 65676170     check_alloc_page
80024480:	73202928 65636375 64656465 000d0a21     () succeeded!...
80024490:	746f6f62 6c6c615f 705f636f 20656761     boot_alloc_page 
800244a0:	6c696166 0a2e6465 0000000d 6761706e     failed......npag
800244b0:	3d3c2065 454d4b20 5a49534d 202f2045     e <= KMEMSIZE / 
800244c0:	49534750 0000455a 746f6f62 6467705f     PGSIZE..boot_pgd
800244d0:	21207269 554e203d 26204c4c 75282026     ir != NULL && (u
800244e0:	33746e69 29745f32 4f475020 62284646     int32_t) PGOFF(b
800244f0:	5f746f6f 69646770 3d202972 0030203d     oot_pgdir) == 0.
80024500:	5f746567 65676170 6f6f6228 67705f74     get_page(boot_pg
80024510:	2c726964 30783020 554e202c 20294c4c     dir, 0x0, NULL) 
80024520:	4e203d3d 004c4c55 65676170 736e695f     == NULL.page_ins
80024530:	28747265 746f6f62 6467705f 202c7269     ert(boot_pgdir, 
80024540:	202c3170 2c307830 20293020 30203d3d     p1, 0x0, 0) == 0
80024550:	00000000 65747028 203d2070 5f746567     ....(ptep = get_
80024560:	28657470 746f6f62 6467705f 202c7269     pte(boot_pgdir, 
80024570:	2c307830 29293020 203d2120 4c4c554e     0x0, 0)) != NULL
80024580:	00000000 70326170 28656761 6574702a     ....pa2page(*pte
80024590:	3d202970 3170203d 00000000 65676170     p) == p1....page
800245a0:	6665725f 29317028 203d3d20 00000031     _ref(p1) == 1...
800245b0:	5f746567 28657470 746f6f62 6467705f     get_pte(boot_pgd
800245c0:	202c7269 49534750 202c455a 3d202930     ir, PGSIZE, 0) =
800245d0:	7470203d 00007065 65676170 736e695f     = ptep..page_ins
800245e0:	28747265 746f6f62 6467705f 202c7269     ert(boot_pgdir, 
800245f0:	202c3270 49534750 202c455a 5f455450     p2, PGSIZE, PTE_
80024600:	207c2055 5f455450 3d202957 0030203d     U | PTE_W) == 0.
80024610:	65747028 203d2070 5f746567 28657470     (ptep = get_pte(
80024620:	746f6f62 6467705f 202c7269 49534750     boot_pgdir, PGSI
80024630:	202c455a 20292930 4e203d21 004c4c55     ZE, 0)) != NULL.
80024640:	6574702a 20262070 5f455450 00000055     *ptep & PTE_U...
80024650:	6574702a 20262070 5f455450 00000057     *ptep & PTE_W...
80024660:	746f6f62 6467705f 305b7269 2026205d     boot_pgdir[0] & 
80024670:	5f455450 00000055 65676170 6665725f     PTE_U...page_ref
80024680:	29327028 203d3d20 00000031 65676170     (p2) == 1...page
80024690:	736e695f 28747265 746f6f62 6467705f     _insert(boot_pgd
800246a0:	202c7269 202c3170 49534750 202c455a     ir, p1, PGSIZE, 
800246b0:	3d202930 0030203d 65676170 6665725f     0) == 0.page_ref
800246c0:	29317028 203d3d20 00000032 65676170     (p1) == 2...page
800246d0:	6665725f 29327028 203d3d20 00000030     _ref(p2) == 0...
800246e0:	74702a28 26207065 45545020 2029555f     (*ptep & PTE_U) 
800246f0:	30203d3d 00000000 65676170 6665725f     == 0....page_ref
80024700:	29317028 203d3d20 00000030 65676170     (p1) == 0...page
80024710:	6665725f 32617028 65676170 6f6f6228     _ref(pa2page(boo
80024720:	67705f74 5b726964 29295d30 203d3d20     t_pgdir[0])) == 
80024730:	00000031 63656863 67705f6b 28726964     1...check_pgdir(
80024740:	75732029 65656363 21646564 00000d0a     ) succeeded!....
80024750:	65676170 61766b32 3a297028 30257830     page2kva(p):0x%0
80024760:	00007838 6e69282a 28292a74 65676170     8x..*(int*)(page
80024770:	61766b32 2b297028 30317830 303a2930     2kva(p)+0x100):0
80024780:	38302578 00000078 65676170 736e695f     x%08x...page_ins
80024790:	28747265 746f6f62 6467705f 202c7269     ert(boot_pgdir, 
800247a0:	30202c70 30303178 5450202c 29575f45     p, 0x100, PTE_W)
800247b0:	203d3d20 00000030 65676170 6665725f      == 0...page_ref
800247c0:	20297028 31203d3d 00000000 6e69282a     (p) == 1....*(in
800247d0:	28292a74 30317830 303a2930 38302578     t*)(0x100):0x%08
800247e0:	00000078 65676170 736e695f 28747265     x...page_insert(
800247f0:	746f6f62 6467705f 202c7269 30202c70     boot_pgdir, p, 0
80024800:	30303178 50202b20 5a495347 50202c45     x100 + PGSIZE, P
80024810:	575f4554 3d3d2029 00003020 65676170     TE_W) == 0..page
80024820:	6665725f 20297028 32203d3d 00000000     _ref(p) == 2....
80024830:	45480d0a 0d0a4552 00000000 282a0d0a     ..HERE........*(
80024840:	2a746e69 78302829 29303031 2578303a     int*)(0x100):0x%
80024850:	00783830 6e69282a 292a2074 30317830     08x.*(int *)0x10
80024860:	3d3d2030 31783020 00343332 726f6375     0 == 0x1234.ucor
80024870:	48203a65 6f6c6c65 726f7720 2121646c     e: Hello world!!
80024880:	00000000 63727473 2828706d 64696f76     ....strcmp((void
80024890:	30292a20 30303178 7628202c 2064696f      *)0x100, (void 
800248a0:	3028292a 30303178 50202b20 5a495347     *)(0x100 + PGSIZ
800248b0:	20292945 30203d3d 00000000 6c727473     E)) == 0....strl
800248c0:	28286e65 736e6f63 68632074 2a207261     en((const char *
800248d0:	31783029 20293030 30203d3d 00000000     )0x100) == 0....
800248e0:	63656863 6f625f6b 705f746f 72696467     check_boot_pgdir
800248f0:	73202928 65636375 64656465 000d0a21     () succeeded!...
80024900:	6e207325 6920746f 656c706d 746e656d     %s not implement
80024910:	79206465 002e7465 33323130 37363534     ed yet..01234567
80024920:	42413938 46454443 00000000 63737973     89ABCDEF....sysc
80024930:	2e6c6c61 00000063 65646e75 656e6966     all.c...undefine
80024940:	79732064 6c616373 6425206c 6970202c     d syscall %d, pi
80024950:	203d2064 202c6425 656d616e 25203d20     d = %d, name = %
80024960:	000a2e73 632e706d 00000000 00002420     s...mp.c.... $..
80024970:	00203a09 6e6b6e55 006e776f 70617274     .: .Unknown.trap
80024980:	6d617266 74612065 00000020 24200a0d     frame at ..... $
80024990:	203a6172 00000000 42200a0d 41566461     ra: ...... BadVA
800249a0:	0000203a 53200a0d 75746174 00203a73     : .... Status: .
800249b0:	43200a0d 65737561 0000203a 45200a0d     .. Cause: .... E
800249c0:	00204350 72540a0d 69207061 7375206e     PC ...Trap in us
800249d0:	6f6d7265 203a6564 00000000 72540d0a     ermode: ......Tr
800249e0:	69207061 656b206e 6c656e72 0000203a     ap in kernel: ..
800249f0:	70617274 0000632e 72727563 5f746e65     trap.c..current_
80024a00:	69646770 3d212072 4c554e20 0000004c     pgdir != NULL...
80024a10:	72727563 20746e65 69203d3d 70656c64     current == idlep
80024a20:	00636f72 61686e75 656c646e 61702064     roc.unhandled pa
80024a30:	66206567 746c7561 000d0a2e 61686e75     ge fault....unha
80024a40:	656c646e 67702064 6c756166 00000074     ndled pgfault...
80024a50:	314d4f43 00000d0a 6e6b6e55 206e776f     COM1....Unknown 
80024a60:	65746e69 70757272 00002174 3a78255b     interrupt!..[%x:
80024a70:	0a5d7825 00000000 20796568 216e616d     %x].....hey man!
80024a80:	206f4420 20544f4e 20657375 74616874      Do NOT use that
80024a90:	736e6920 6920216e 3d6e736e 00007825      insn! insn=%x..
80024aa0:	67696c41 6e656d6e 72452074 00726f72     Alignment Error.
80024ab0:	61686e55 656c646e 78452064 74706563     Unhandled Except
80024ac0:	006e6f69 65746e49 70757272 00000074     ion.Interrupt...
80024ad0:	20424c54 69646f4d 00007966 20424c54     TLB Modify..TLB 
80024ae0:	7373696d 206e6f20 64616f6c 00000000     miss on load....
80024af0:	20424c54 7373696d 206e6f20 726f7473     TLB miss on stor
80024b00:	00000065 72646441 20737365 6f727265     e...Address erro
80024b10:	6e6f2072 616f6c20 00000064 72646441     r on load...Addr
80024b20:	20737365 6f727265 6e6f2072 6f747320     ess error on sto
80024b30:	00006572 20737542 6f727265 6e6f2072     re..Bus error on
80024b40:	736e6920 63757274 6e6f6974 74656620      instruction fet
80024b50:	00006863 20737542 6f727265 6e6f2072     ch..Bus error on
80024b60:	74616420 6f6c2061 6f206461 74732072      data load or st
80024b70:	0065726f 63737953 006c6c61 61657242     ore.Syscall.Brea
80024b80:	696f706b 0000746e 65736552 64657672     kpoint..Reserved
80024b90:	6c692820 6167656c 6920296c 7274736e      (illegal) instr
80024ba0:	69746375 00006e6f 72706f43 7365636f     uction..Coproces
80024bb0:	20726f73 73756e75 656c6261 00000000     sor unusable....
80024bc0:	74697241 74656d68 6f206369 66726576     Arithmetic overf
80024bd0:	00776f6c 00000000 00000000 00000000     low.............
	...

80025000 <__exception_vector>:
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:26
# maybe behavior of gnu/as changed ...?
.set noreorder

.global __exception_vector
__exception_vector:
  RVECENT(ramExcHandle_tlbmiss,0) 
80025000:	1000eaab 00000000 1000eaab 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:28
	RVECENT(ramReserved,1)
	RVECENT(ramReserved,2)
80025010:	1000eaa9 00000000 1000eaa7 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:30
	RVECENT(ramReserved,3)
	RVECENT(ramReserved,4)
80025020:	1000eaa5 00000000 1000eaa3 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:32
	RVECENT(ramReserved,5)
	RVECENT(ramReserved,6)
80025030:	1000eaa1 00000000 1000ea9f 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:34
	RVECENT(ramReserved,7)
	RVECENT(ramReserved,8)
80025040:	1000ea9d 00000000 1000ea9b 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:36
	RVECENT(ramReserved,9)
	RVECENT(ramReserved,10)
80025050:	1000ea99 00000000 1000ea97 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:38
	RVECENT(ramReserved,11)
	RVECENT(ramReserved,12)
80025060:	1000ea95 00000000 1000ea93 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:40
	RVECENT(ramReserved,13)
	RVECENT(ramReserved,14)
80025070:	1000ea91 00000000 1000ea8f 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:42
	RVECENT(ramReserved,15)
	RVECENT(ramReserved,16)
80025080:	1000ea8d 00000000 1000ea8b 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:44
	RVECENT(ramReserved,17)
	RVECENT(ramReserved,18)
80025090:	1000ea89 00000000 1000ea87 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:46
	RVECENT(ramReserved,19)
	RVECENT(ramReserved,20)
800250a0:	1000ea85 00000000 1000ea83 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:48
	RVECENT(ramReserved,21)
	RVECENT(ramReserved,22)
800250b0:	1000ea81 00000000 1000ea7f 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:50
	RVECENT(ramReserved,23)
	RVECENT(ramReserved,24)
800250c0:	1000ea7d 00000000 1000ea7b 00000000     }.......{.......
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:52
	RVECENT(ramReserved,25)
	RVECENT(ramReserved,26)
800250d0:	1000ea79 00000000 1000ea77 00000000     y.......w.......
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:54
	RVECENT(ramReserved,27)
	RVECENT(ramReserved,28)
800250e0:	1000ea75 00000000 1000ea73 00000000     u.......s.......
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:56
	RVECENT(ramReserved,29)
	RVECENT(ramReserved,30)
800250f0:	1000ea71 00000000 1000ea6f 00000000     q.......o.......
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:58
	RVECENT(ramReserved,31)
	XVECENT(ramExcHandle_general, 32) 
80025100:	1000ea6f 00000000 1000ea6b 00000000     o.......k.......
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:60
	RVECENT(ramReserved,33)
	RVECENT(ramReserved,34)
80025110:	1000ea69 00000000 1000ea67 00000000     i.......g.......
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:62
	RVECENT(ramReserved,35)
	RVECENT(ramReserved,36)
80025120:	1000ea65 00000000 1000ea63 00000000     e.......c.......
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:64
	RVECENT(ramReserved,37)
	RVECENT(ramReserved,38)
80025130:	1000ea61 00000000 1000ea5f 00000000     a......._.......
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:66
	RVECENT(ramReserved,39)
	RVECENT(ramReserved,40)
80025140:	1000ea5d 00000000 1000ea5b 00000000     ].......[.......
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:68
	RVECENT(ramReserved,41)
	RVECENT(ramReserved,42)
80025150:	1000ea59 00000000 1000ea57 00000000     Y.......W.......
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:70
	RVECENT(ramReserved,43)
	RVECENT(ramReserved,44)
80025160:	1000ea55 00000000 1000ea53 00000000     U.......S.......
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:72
	RVECENT(ramReserved,45)
	RVECENT(ramReserved,46)
80025170:	1000ea51 00000000 1000ea4f 00000000     Q.......O.......
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:74
	RVECENT(ramReserved,47)
  XVECENT(ramExcHandle_general, 0x180) 
80025180:	1000ea4f 00000000 1000ea4b 00000000     O.......K.......
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:76
	RVECENT(ramReserved,49)
	RVECENT(ramReserved,50)
80025190:	1000ea49 00000000 1000ea47 00000000     I.......G.......
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:78
	RVECENT(ramReserved,51)
	RVECENT(ramReserved,52)
800251a0:	1000ea45 00000000 1000ea43 00000000     E.......C.......
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:80
	RVECENT(ramReserved,53)
	RVECENT(ramReserved,54)
800251b0:	1000ea41 00000000 1000ea3f 00000000     A.......?.......
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:82
	RVECENT(ramReserved,55)
	RVECENT(ramReserved,56)
800251c0:	1000ea3d 00000000 1000ea3b 00000000     =.......;.......
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:84
	RVECENT(ramReserved,57)
	RVECENT(ramReserved,58)
800251d0:	1000ea39 00000000 1000ea37 00000000     9.......7.......
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:86
	RVECENT(ramReserved,59)
	RVECENT(ramReserved,60)
800251e0:	1000ea35 00000000 1000ea33 00000000     5.......3.......
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:88
	RVECENT(ramReserved,61)
	RVECENT(ramReserved,62)
800251f0:	1000ea31 00000000 1000ea2f 00000000     1......./.......
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:90
	RVECENT(ramReserved,63)
	RVECENT(ramReserved,64)
80025200:	1000ea2d 00000000 1000ea2b 00000000     -.......+.......
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:92
	RVECENT(ramReserved,65)
	RVECENT(ramReserved,66)
80025210:	1000ea29 00000000 1000ea27 00000000     ).......'.......
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:94
	RVECENT(ramReserved,67)
	RVECENT(ramReserved,68)
80025220:	1000ea25 00000000 1000ea23 00000000     %.......#.......
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:96
	RVECENT(ramReserved,69)
	RVECENT(ramReserved,70)
80025230:	1000ea21 00000000 1000ea1f 00000000     !...............
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:98
	RVECENT(ramReserved,71)
	RVECENT(ramReserved,72)
80025240:	1000ea1d 00000000 1000ea1b 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:100
	RVECENT(ramReserved,73)
	RVECENT(ramReserved,74)
80025250:	1000ea19 00000000 1000ea17 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:102
	RVECENT(ramReserved,75)
	RVECENT(ramReserved,76)
80025260:	1000ea15 00000000 1000ea13 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:104
	RVECENT(ramReserved,77)
	RVECENT(ramReserved,78)
80025270:	1000ea11 00000000 1000ea0f 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:106
	RVECENT(ramReserved,79)
	RVECENT(ramReserved,80)
80025280:	1000ea0d 00000000 1000ea0b 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:108
	RVECENT(ramReserved,81)
	RVECENT(ramReserved,82)
80025290:	1000ea09 00000000 1000ea07 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:110
	RVECENT(ramReserved,83)
	RVECENT(ramReserved,84)
800252a0:	1000ea05 00000000 1000ea03 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:112
	RVECENT(ramReserved,85)
	RVECENT(ramReserved,86)
800252b0:	1000ea01 00000000 1000e9ff 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:114
	RVECENT(ramReserved,87)
	RVECENT(ramReserved,88)
800252c0:	1000e9fd 00000000 1000e9fb 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:116
	RVECENT(ramReserved,89)
	RVECENT(ramReserved,90)
800252d0:	1000e9f9 00000000 1000e9f7 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:118
	RVECENT(ramReserved,91)
	RVECENT(ramReserved,92)
800252e0:	1000e9f5 00000000 1000e9f3 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:120
	RVECENT(ramReserved,93)
	RVECENT(ramReserved,94)
800252f0:	1000e9f1 00000000 1000e9ef 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:122
	RVECENT(ramReserved,95)
	RVECENT(ramReserved,96)
80025300:	1000e9ed 00000000 1000e9eb 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:124
	RVECENT(ramReserved,97)
	RVECENT(ramReserved,98)
80025310:	1000e9e9 00000000 1000e9e7 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:126
	RVECENT(ramReserved,99)
	RVECENT(ramReserved,100)
80025320:	1000e9e5 00000000 1000e9e3 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:128
	RVECENT(ramReserved,101)
	RVECENT(ramReserved,102)
80025330:	1000e9e1 00000000 1000e9df 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:130
	RVECENT(ramReserved,103)
	RVECENT(ramReserved,104)
80025340:	1000e9dd 00000000 1000e9db 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:132
	RVECENT(ramReserved,105)
	RVECENT(ramReserved,106)
80025350:	1000e9d9 00000000 1000e9d7 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:134
	RVECENT(ramReserved,107)
	RVECENT(ramReserved,108)
80025360:	1000e9d5 00000000 1000e9d3 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:136
	RVECENT(ramReserved,109)
	RVECENT(ramReserved,110)
80025370:	1000e9d1 00000000 1000e9cf 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:138
	RVECENT(ramReserved,111)
	RVECENT(ramReserved,112)
80025380:	1000e9cd 00000000 1000e9cb 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:140
	RVECENT(ramReserved,113)
	RVECENT(ramReserved,114)
80025390:	1000e9c9 00000000 1000e9c7 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:142
	RVECENT(ramReserved,115)
	RVECENT(ramReserved,116)
800253a0:	1000e9c5 00000000 1000e9c3 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:144
	RVECENT(ramReserved,116)
	RVECENT(ramReserved,118)
800253b0:	1000e9c1 00000000 1000e9bf 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:146
	RVECENT(ramReserved,119)
	RVECENT(ramReserved,120)
800253c0:	1000e9bd 00000000 1000e9bb 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:148
	RVECENT(ramReserved,121)
	RVECENT(ramReserved,122)
800253d0:	1000e9b9 00000000 1000e9b7 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:150
	RVECENT(ramReserved,123)
	RVECENT(ramReserved,124)
800253e0:	1000e9b5 00000000 1000e9b3 00000000     ................
/home/oslab/os_ucore_mips_m14k/src/kern-ucore/arch/mips/trap/vectors.S:152
	RVECENT(ramReserved,125)
	RVECENT(ramReserved,126)
800253f0:	1000e9b1 00000000 1000e9af 00000000     ................
